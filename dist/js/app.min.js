!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=197)}([function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.EDITOR=0]="EDITOR",e[e.DETAILS=1]="DETAILS",e[e.SETTINGS=2]="SETTINGS",e[e.ABOUT=3]="ABOUT",e[e.MODELS=4]="MODELS",e[e.PATCHES=5]="PATCHES",e[e.STRINGS=6]="STRINGS",e[e.EVENTS=7]="EVENTS",e[e.CREATEEVENT=8]="CREATEEVENT",e[e.DEBUG=9]="DEBUG",e[e.AUDIO=10]="AUDIO"}(t.View||(t.View={})),function(e){e[e.OTHER=0]="OTHER",e[e.BLUE=1]="BLUE",e[e.RED=2]="RED",e[e.MINIGAME=3]="MINIGAME",e[e.HAPPENING=4]="HAPPENING",e[e.STAR=5]="STAR",e[e.CHANCE=6]="CHANCE",e[e.START=7]="START",e[e.SHROOM=8]="SHROOM",e[e.BOWSER=9]="BOWSER",e[e.ITEM=10]="ITEM",e[e.BATTLE=11]="BATTLE",e[e.BANK=12]="BANK",e[e.ARROW=13]="ARROW",e[e.BLACKSTAR=14]="BLACKSTAR",e[e.GAMEGUY=15]="GAMEGUY",e[e.DUEL_BASIC=16]="DUEL_BASIC",e[e.DUEL_START_BLUE=17]="DUEL_START_BLUE",e[e.DUEL_START_RED=18]="DUEL_START_RED",e[e.DUEL_POWERUP=19]="DUEL_POWERUP",e[e.DUEL_REVERSE=20]="DUEL_REVERSE"}(t.Space||(t.Space={})),function(e){e[e.TOAD=0]="TOAD",e[e.BOWSER=1]="BOWSER",e[e.KOOPA=2]="KOOPA",e[e.BOO=3]="BOO",e[e.GOOMBA=4]="GOOMBA",e[e.BANK=5]="BANK",e[e.BANKCOIN=6]="BANKCOIN",e[e.ITEMSHOP=7]="ITEMSHOP",e[e.GATE=8]="GATE"}(t.SpaceSubtype||(t.SpaceSubtype={})),function(e){e.NORMAL="NORMAL",e.DUEL="DUEL"}(t.BoardType||(t.BoardType={})),function(e){e[e.MOVE=0]="MOVE",e[e.LINE=1]="LINE",e[e.LINE_STICKY=2]="LINE_STICKY",e[e.ROTATE=3]="ROTATE",e[e.ERASE=4]="ERASE",e[e.ROM_LOAD=5]="ROM_LOAD",e[e.ROM_UNLOAD=6]="ROM_UNLOAD",e[e.BOARD_LOAD=7]="BOARD_LOAD",e[e.BOARD_SAVE=8]="BOARD_SAVE",e[e.BOARD_NEW=9]="BOARD_NEW",e[e.BOARD_WRITE=10]="BOARD_WRITE",e[e.BOARD_DETAILS=11]="BOARD_DETAILS",e[e.BOARD_EDITOR=12]="BOARD_EDITOR",e[e.BOARD_COPY=13]="BOARD_COPY",e[e.MODEL_VIEWER=13.3]="MODEL_VIEWER",e[e.STRINGS_EDITOR=13.4]="STRINGS_EDITOR",e[e.EVENTS=13.5]="EVENTS",e[e.CREATEEVENT=13.6]="CREATEEVENT",e[e.BACK_TO_EVENTS=13.7]="BACK_TO_EVENTS",e[e.SAVE_EVENT=13.8]="SAVE_EVENT",e[e.EVENT_LOAD=13.9]="EVENT_LOAD",e[e.SET_BG=14]="SET_BG",e[e.SCREENSHOT=14.1]="SCREENSHOT",e[e.ROM_SAVE=15]="ROM_SAVE",e[e.SETTINGS=15.1]="SETTINGS",e[e.ABOUT=15.2]="ABOUT",e[e.PATCHES=15.3]="PATCHES",e[e.DEBUG=15.4]="DEBUG",e[e.AUDIO=15.5]="AUDIO",e[e.ADD_OTHER=16]="ADD_OTHER",e[e.ADD_BLUE=17]="ADD_BLUE",e[e.ADD_RED=18]="ADD_RED",e[e.ADD_MINIGAME=19]="ADD_MINIGAME",e[e.ADD_HAPPENING=20]="ADD_HAPPENING",e[e.ADD_STAR=21]="ADD_STAR",e[e.ADD_BLACKSTAR=21.2]="ADD_BLACKSTAR",e[e.ADD_START=21.3]="ADD_START",e[e.ADD_CHANCE=22]="ADD_CHANCE",e[e.ADD_SHROOM=23]="ADD_SHROOM",e[e.ADD_BOWSER=24]="ADD_BOWSER",e[e.ADD_TOAD_CHARACTER=25]="ADD_TOAD_CHARACTER",e[e.ADD_BOWSER_CHARACTER=26]="ADD_BOWSER_CHARACTER",e[e.ADD_KOOPA_CHARACTER=27]="ADD_KOOPA_CHARACTER",e[e.ADD_BOO_CHARACTER=28]="ADD_BOO_CHARACTER",e[e.ADD_ITEM=29]="ADD_ITEM",e[e.ADD_BATTLE=30]="ADD_BATTLE",e[e.ADD_BANK=31]="ADD_BANK",e[e.ADD_GAMEGUY=32]="ADD_GAMEGUY",e[e.ADD_ARROW=32.2]="ADD_ARROW",e[e.MARK_STAR=33]="MARK_STAR",e[e.MARK_GATE=33.1]="MARK_GATE",e[e.ADD_BANK_SUBTYPE=34]="ADD_BANK_SUBTYPE",e[e.ADD_BANKCOIN_SUBTYPE=35]="ADD_BANKCOIN_SUBTYPE",e[e.ADD_ITEMSHOP_SUBTYPE=36]="ADD_ITEMSHOP_SUBTYPE",e[e.ADD_DUEL_BASIC=37]="ADD_DUEL_BASIC",e[e.ADD_DUEL_REVERSE=38]="ADD_DUEL_REVERSE",e[e.ADD_DUEL_POWERUP=39]="ADD_DUEL_POWERUP",e[e.ADD_DUEL_START_BLUE=40]="ADD_DUEL_START_BLUE",e[e.ADD_DUEL_START_RED=41]="ADD_DUEL_START_RED"}(t.Action||(t.Action={})),function(e){e.MP1_USA="CLBE",e.MP1_JPN="CLBJ",e.MP1_PAL="NLBP",e.MP2_USA="NMWE",e.MP2_JPN="NMWJ",e.MP2_PAL="NMWP",e.MP3_USA="NMVE",e.MP3_JPN="NMVJ",e.MP3_PAL="NMVP"}(r=t.Game||(t.Game={})),t.getGameName=function(e){for(var t in r)if(r[t]===e)return t;return null},function(e){e[e.WALKOVER=1]="WALKOVER",e[e.LANDON=3]="LANDON",e[e.BEGINORWALKOVER=8]="BEGINORWALKOVER"}(t.EventActivationType||(t.EventActivationType={})),function(e){e[e.DIRECT=1]="DIRECT",e[e.PROCESS=2]="PROCESS"}(t.EventExecutionType||(t.EventExecutionType={})),t.getExecutionTypeName=function(e){switch(e){case 1:return"Direct";case 2:return"Process"}throw new Error("Unknown execution type "+e+".")},t.getExecutionTypeByName=function(e){switch(e){case"Direct":return 1;case"Process":return 2}return null},function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING"}(t.ValidationLevel||(t.ValidationLevel={})),t.EventParameterTypes=["Boolean","Number","+Number","Number[]","Space"],function(e){e.Boolean="Boolean",e.Space="Space",e.Number="Number",e.PositiveNumber="+Number",e.NumberArray="Number[]"}(t.EventParameterType||(t.EventParameterType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(3),a=n(198);function o(e,t,n){return t+n>e.byteLength?"":a.ArrayBuffer.hash(e,{start:t,length:n})}function s(e,t,n){void 0===t&&(t=e.byteLength),void 0===n&&(n=0);var r,a="";r=e instanceof ArrayBuffer?new DataView(e):e;for(var o=0;o<t;o++)a+=i.$$hex(r.getUint8(o),"")+(o&&n&&(o+1)%n==0?"\n":" ");return a}function l(e,t,n){for(var i=r.createContext(t,n).createImageData(t,n),a=new Uint8Array(e),o=0;o<e.byteLength;o++)i.data[o]=a[o];return i}t.copyRange=function(e,t,n,r,i){e instanceof ArrayBuffer&&(e=new DataView(e)),t instanceof ArrayBuffer&&(t=new DataView(t));for(var a=0;a<i;a++)e.setUint8(n+a,t.getUint8(r+a))},t.arrayToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},t.hash=o,t.hashEqual=function(e,t){return o.apply(null,e).toLowerCase()===t.toLowerCase()},t.toHexString=s,t.print=function(e,t,n){void 0===t&&(t=e.byteLength),void 0===n&&(n=0),console.log(s(e,t,n))},t.readBitAtOffset=function(e,t){var n=e;n instanceof ArrayBuffer&&(n=new DataView(n));var r=Math.floor(t/8),i=128>>>t%8;return n.getUint8(r)&i?1:0},t.readByteAtBitOffset=function(e,t){var n=e;n instanceof ArrayBuffer&&(n=new DataView(n));var r=Math.floor(t/8),i=t%8,a=65280>>>i;return(n.getUint16(r)&a)>>>8-i},t.arrayBufferToImageData=l,t.arrayBufferToDataURL=function(e,t,n){var i=l(e,t,n),a=r.createContext(t,n);return a.putImageData(i,0,0),a.canvas.toDataURL()},t.arrayBuffersEqual=function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.byteLength;i++)if(n[i]!==r[i])return!1;return!0},t.join=function(e,t){if(!e||!t)return e||t;var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},t.equal=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.intersection=function(e,t,n){void 0===n&&(n=function(e,t){return e===t});for(var r=[],i=0;i<e.length;i++)for(var a=e[i],o=0;o<t.length;o++)if(n(a,t[o])){r.push(a);break}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),a=n(113),o=n(50),s=n(23),l=n(27),c=n(13),u=0,d=!1;function p(e,t){void 0===e&&(e=1),void 0===t&&(t=i.BoardType.NORMAL);var n={name:"Untitled",description:"Use your Star Power to finish\nthis board.",game:e,type:t,difficulty:3,spaces:[],links:{},events:{}};switch(e){case 1:n.bg={width:960,height:720,src:!0,fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0},n.otherbg={boardselect:!0,boardlogo:!0,largescene:!0,conversation:!0,splashscreen:!0},n.audioIndex=24;break;case 2:n.bg={width:1152,height:864,src:!0,fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0},n.animbg=[],n.otherbg={boardselect:!0,boardselecticon:!0,boardlogo:!0,largescene:!0},n.audioIndex=54;break;case 3:switch(t){case i.BoardType.NORMAL:n.bg={width:1152,height:864,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0},n.audioIndex=41;break;case i.BoardType.DUEL:n.bg={width:896,height:672,src:!0,fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0},n.audioIndex=0}n.otherbg={boardselect:!0,boardlogo:!0,boardlogotext:!0,largescene:!0}}return t===i.BoardType.DUEL?(n.spaces.push({x:200,y:200,type:i.Space.DUEL_START_BLUE}),n.spaces.push({x:n.bg.width-200,y:n.bg.height-200,type:i.Space.DUEL_START_RED})):n.spaces.push({x:n.bg.width-200,y:n.bg.height-200,type:i.Space.START}),function(e,t){void 0===t&&(t="default");e.otherbg.boardselect&&(e.otherbg.boardselect="img/themes/"+t+"/boardselect.png");e.otherbg.boardselecticon&&(e.otherbg.boardselecticon="img/themes/"+t+"/boardselecticon.png");e.otherbg.boardlogo&&(e.otherbg.boardlogo="img/themes/"+t+"/boardlogo.png");e.otherbg.boardlogotext&&(e.otherbg.boardlogotext="img/themes/"+t+"/boardlogotext.png");e.otherbg.largescene&&(e.otherbg.largescene="img/themes/"+t+"/largescene.png");e.otherbg.conversation&&(e.otherbg.conversation="img/themes/"+t+"/conversation.png");e.otherbg.splashscreen&&(e.otherbg.splashscreen="img/themes/"+t+"/splashscreen.png");switch(e.game){case 1:e.bg.src="img/themes/"+t+"/bg.png";break;case 2:case 3:e.bg.src="img/themes/"+t+"/bg2.png"}}(n),n}var f=[],h=a.getSavedBoards();function m(e,t){void 0===t&&(t={}),e||(e=p(t.game||1,t.type||i.BoardType.NORMAL));var n=t.rom?f:r;return t.rom?(e._rom=!0,n.push(e)):n.push(e),function(e){"game"in e||(e.game=1);"type"in e||(e.type=i.BoardType.NORMAL);"events"in e||(e.events={});if(function(e){y(e,function(t){"parameters"in t&&delete t.parameters,"supportedGames"in t&&delete t.supportedGames,t.asm&&(t.id=t.name,e.events[t.id]&&e.events[t.id]!==t.asm&&console.warn("When updating the format of "+e.name+", event "+t.id+" had multiple versions. Only one will be kept."),e.events[t.id]=t.asm,delete t.asm)})}(e),!("fov"in e.bg))switch(e.game){case 3:e.type===i.BoardType.DUEL?Object.assign(e.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:210,cameraEyePosZ:210,lookatPointX:0,lookatPointY:0,lookatPointZ:0}):Object.assign(e.bg,{fov:15,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:300,cameraEyePosZ:300,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 2:Object.assign(e.bg,{fov:3,scaleFactor:.1,cameraEyePosX:0,cameraEyePosY:1570,cameraEyePosZ:1577,lookatPointX:0,lookatPointY:0,lookatPointZ:0});break;case 1:Object.assign(e.bg,{fov:17,scaleFactor:1,cameraEyePosX:0,cameraEyePosY:1355,cameraEyePosZ:1780,lookatPointX:0,lookatPointY:0,lookatPointZ:0})}}(e),c.getAppInstance()&&c.boardsChanged(w()),n.length-1}function _(e){var t;return void 0===e&&(e=!1),t=d?f[u]:r[u],e&&(t=function e(t){void 0===t&&(t={});if("object"!=typeof t)return t;t=JSON.parse(JSON.stringify(t));for(var n in t)t.hasOwnProperty(n)&&("_"===n.charAt(0)&&delete t[n],"object"==typeof t[n]&&null!==t[n]&&(t[n]=e(t[n])));return t}(t)),t}function g(e,t){d=!!t,u=e,c.currentBoardChanged(_())}function v(e,t,n){return void 0===n&&(n=_()),Array.isArray(n.links[e])?"*"===t||void 0===t||n.links[e].indexOf(t)>=0:void 0!==n.links[e]&&null!==n.links[e]&&("*"===t||void 0===t||n.links[e]===t)}function y(e,t){var n=e.spaces;if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i.events&&i.events.length)for(var a=i.events.length-1;a>=0;a--){t(i.events[a],i,r)}}}function A(e,t){y(e,function(n,r){var i=s.getEvent(n.id,e);if(i.parameters)for(var a=0;a<i.parameters.length;a++){var o=i.parameters[a];t(o,n,r)}})}function x(e,t,n,r){if(t.events=t.events||[],n&&(r?t.events.unshift(n):t.events.push(n),n.custom)){var i=s.getEvent(n.id,e);b(e,n.id,i.asm)}}function S(e,t){if(e&&t&&e.events){var n=e.events.indexOf(t);-1===n||e.events.splice(n,1)}}function b(e,t,n){if(!n)throw new Error("Attempting to add event "+t+" but it doesn't have assembly code");e.events[t]=n}function w(){return r}function E(e){for(var t=e.spaces,n=0;n<t.length;n++)if(t[n]&&t[n].type===i.Space.START)return n;return-1}function P(e,t){return void 0===t&&(t=_()),e<0?null:(t.links=t.links||{},Array.isArray(t.links[e])?t.links[e].slice(0):"number"==typeof t.links[e]?[t.links[e]]:[])}h&&h.length?(r=[],h.forEach(function(e){return m(e)})):r=[p(1)],t.addBoard=m,t.getCurrentBoard=_,t.indexOfBoard=function(e){return r.indexOf(e)},t.setCurrentBoard=g,t.boardIsROM=function(e){return!!e._rom},t.hasConnection=v,t.forEachEvent=y,t.forEachEventParameter=A,t.addEventToSpace=x,t.removeEventFromSpace=S,t.getBoardEventAsm=function(e,t){return e.events?e.events[t]:null},t.addEventToBoard=b,t.removeEventFromBoard=function(e,t){e.events&&delete e.events[t],y(e,function(e,n){e.id===t&&S(n,e)})},t.getDeadEnds=function(e){var t=[],n=function(e){return o.copyObject(e.spaces)}(e);function r(i){if(n[i]._seen)return!1;if(!e.links.hasOwnProperty(i))return t.push(i),!0;n[i]._seen=!0;var a,o=e.links[i];if(Array.isArray(o)){for(var s=0;s<o.length;s++)if(a=r(o[s]))return a}else if(a=r(o))return a}for(var i={},a=0;a<n.length;a++)n[a]&&(i[a]=[]);var s=function(t){P(parseInt(t),e).forEach(function(e){i[e].push(Number(t))})};for(var l in e.links)s(l);var c,u,d=E(e);for(d>=0&&r(d),a=0;a<n.length;a++)n[a]&&(n[a]._seen||(c=a,!(void 0===(u=void 0)?i[c].length:i[c].length&&(-1===i[c].indexOf(Number(u))||i[c].length>1))&&v(a,null,e)&&r(a)));return t},t.getCurrentBoardIndex=function(){return u},t.currentBoardIsROM=function(){return d},t.getBoardCount=function(){return r.length},t.getBoards=w,t.getROMBoards=function(){return f},t.setBG=function(e,t){void 0===t&&(t=_()),t.bg.src=e},t.addAnimBG=function(e,t){void 0===t&&(t=_()),t.animbg=t.animbg||[],t.animbg.push(e)},t.removeAnimBG=function(e,t){void 0===t&&(t=_()),!t.animbg||t.animbg.length<=e||e<0||t.animbg.splice(e,1)},t.deleteBoard=function(e){isNaN(e)||e<0||e>=r.length||(1===r.length&&m(),r.splice(e,1),u>e?g(u-1):1===r.length?g(0):u===e&&u===r.length&&g(u-1),c.boardsChanged(w()),c.currentBoardChanged(_()))},t.copyCurrentBoard=function(){var e;e=d?f[u]:r[u];var t,n=o.copyObject(e);return delete n._rom,n.name="Copy of "+n.name,d?(t=r.length,r.push(n)):(t=u+1,r.splice(t,0,n)),c.boardsChanged(w()),t},t.addSpace=function(e,t,n,r,i){void 0===i&&(i=_());var a={x:e,y:t,z:0,type:n};void 0!==r&&(a.subtype=r);var o=l.getAdapter(i.game||1);return o&&o.hydrateSpace(a,i),i.spaces.push(a),i.spaces.length-1},t.removeSpace=function(e,t){if(void 0===t&&(t=_()),!(e<0||e>=t.spaces.length)){!function(e,t){if(t.links)for(var n in delete t.links[e],t.links){var r=t.links[n];if(Array.isArray(r)){var i=r.indexOf(e);-1!==i&&r.splice(i,1),1===r.length?t.links[n]=r[0]:r.length||delete t.links[n]}else r===e&&delete t.links[n]}}(e,t),function(e,t){A(t,function(t,n){"Space"===t.type&&n.parameterValues&&n.parameterValues.hasOwnProperty(t.name)&&n.parameterValues[t.name]===e&&delete n.parameterValues[t.name]})}(e,t);var n,r,i=t.spaces.length;t.spaces.splice(e,1);for(var a=0;a<i;a++)t.links.hasOwnProperty(a)&&(n=o(a),r=t.links[a],n!==a&&delete t.links[a],Array.isArray(r)?t.links[n]=r.map(o):t.links[n]=o(r));A(t,function(e,t){"Space"===e.type&&t.parameterValues&&t.parameterValues.hasOwnProperty(e.name)&&(t.parameterValues[e.name]=o(t.parameterValues[e.name]))})}function o(t){return parseInt(t)>parseInt(e)?t-1:t}},t.getSpaceIndex=function(e,t){return void 0===t&&(t=_()),t.spaces.indexOf(e)},t.getStartSpaceIndex=E,t.getSpacesOfType=function(e,t){void 0===t&&(t=_());for(var n=t.spaces,r=[],i=0;i<n.length;i++)n[i]&&n[i].type===e&&r.push(i);return r},t.getSpacesOfSubType=function(e,t){void 0===t&&(t=_());for(var n=t.spaces,r=[],i=0;i<n.length;i++)n[i]&&n[i].subtype===e&&r.push(i);return r},t.getSpacesWithEvent=function(e,t){void 0===t&&(t=_()),t.spaces;var n=[];return y(t,function(t,r,i){t.id===e&&n.push(i)}),n},t.getConnections=P,t.addConnection=function(e,t,n){void 0===n&&(n=_()),e===t||v(e,t,n)||(n.links=n.links||{},Array.isArray(n.links[e])?n.links[e].push(t):"number"==typeof n.links[e]?n.links[e]=[n.links[e],t]:t>=0&&(n.links[e]=t))},t.addAssociation=function(e,t,n){void 0===n&&(n=_()),n.associations=n.associations||{},isNaN(n.spaces[e].subtype),isNaN(n.spaces[t].subtype)},t.setSpaceRotation=function(e,t,n){void 0===n&&(n=_());var r=n.spaces[e];if(!r)throw new Error("setSpaceRotation: Invalid space index "+e);r.rotation=Math.round(t)},t.addEventByIndex=function(e,t,n,r){x(e,e.spaces[t],n,r)},t.loadBoardsFromROM=function(){var e=l.getROMAdapter();if(e){for(var t=e.loadBoards(),n=0;n<t.length;n++)t[n]._rom=!0,f.push(t[n]);c.boardsChanged(w())}},t.clearBoardsFromROM=function(){f=[],r.length||m()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$$log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$$debug&&console.log.apply(console,arguments)},t.$$hex=function(e,t){void 0===t&&(t="0x");var n=Number(Math.abs(e)).toString(16).toUpperCase();return 1===n.length&&(n="0"+n),(e<0?"-":"")+t+n}},function(e,t,n){"use strict";e.exports=n(203)},function(e,t,n){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return o(e)?e:q(e)}function r(e){return s(e)?e:K(e)}function i(e){return l(e)?e:Y(e)}function a(e){return o(e)&&!c(e)?e:$(e)}function o(e){return!(!e||!e[d])}function s(e){return!(!e||!e[p])}function l(e){return!(!e||!e[f])}function c(e){return s(e)||l(e)}function u(e){return!(!e||!e[h])}t(r,n),t(i,n),t(a,n),n.isIterable=o,n.isKeyed=s,n.isIndexed=l,n.isAssociative=c,n.isOrdered=u,n.Keyed=r,n.Indexed=i,n.Set=a;var d="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",h="@@__IMMUTABLE_ORDERED__@@",m=5,_=1<<m,g=_-1,v={},y={value:!1},A={value:!1};function x(e){return e.value=!1,e}function S(e){e&&(e.value=!0)}function b(){}function w(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function E(e){return void 0===e.size&&(e.size=e.__iterate(C)),e.size}function P(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?E(e)+t:t}function C(){return!0}function T(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function V(e,t){return D(e,t,0)}function F(e,t){return D(e,t,t)}function D(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var O=0,R=1,M=2,L="function"==typeof Symbol&&Symbol.iterator,B="@@iterator",k=L||B;function I(e){this.next=e}function j(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function N(){return{value:void 0,done:!0}}function U(e){return!!W(e)}function z(e){return e&&"function"==typeof e.next}function G(e){var t=W(e);return t&&t.call(e)}function W(e){var t=e&&(L&&e[L]||e[B]);if("function"==typeof t)return t}function H(e){return e&&"number"==typeof e.length}function q(e){return null==e?ae():o(e)?e.toSeq():function(e){var t=le(e)||"object"==typeof e&&new te(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function K(e){return null==e?ae().toKeyedSeq():o(e)?s(e)?e.toSeq():e.fromEntrySeq():oe(e)}function Y(e){return null==e?ae():o(e)?s(e)?e.entrySeq():e.toIndexedSeq():se(e)}function $(e){return(null==e?ae():o(e)?s(e)?e.entrySeq():e:se(e)).toSetSeq()}I.prototype.toString=function(){return"[Iterator]"},I.KEYS=O,I.VALUES=R,I.ENTRIES=M,I.prototype.inspect=I.prototype.toSource=function(){return this.toString()},I.prototype[k]=function(){return this},t(q,n),q.of=function(){return q(arguments)},q.prototype.toSeq=function(){return this},q.prototype.toString=function(){return this.__toString("Seq {","}")},q.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},q.prototype.__iterate=function(e,t){return ce(this,e,t,!0)},q.prototype.__iterator=function(e,t){return ue(this,e,t,!0)},t(K,q),K.prototype.toKeyedSeq=function(){return this},t(Y,q),Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(e,t){return ce(this,e,t,!1)},Y.prototype.__iterator=function(e,t){return ue(this,e,t,!1)},t($,q),$.of=function(){return $(arguments)},$.prototype.toSetSeq=function(){return this},q.isSeq=ie,q.Keyed=K,q.Set=$,q.Indexed=Y;var X,Z,J,Q="@@__IMMUTABLE_SEQ__@@";function ee(e){this._array=e,this.size=e.length}function te(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function re(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[Q])}function ae(){return X||(X=new ee([]))}function oe(e){var t=Array.isArray(e)?new ee(e).fromEntrySeq():z(e)?new re(e).fromEntrySeq():U(e)?new ne(e).fromEntrySeq():"object"==typeof e?new te(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function se(e){var t=le(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){return H(e)?new ee(e):z(e)?new re(e):U(e)?new ne(e):void 0}function ce(e,t,n,r){var i=e._cache;if(i){for(var a=i.length-1,o=0;o<=a;o++){var s=i[n?a-o:o];if(!1===t(s[1],r?s[0]:o,e))return o+1}return o}return e.__iterateUncached(t,n)}function ue(e,t,n,r){var i=e._cache;if(i){var a=i.length-1,o=0;return new I(function(){var e=i[n?a-o:o];return o++>a?{value:void 0,done:!0}:j(t,r?e[0]:o-1,e[1])})}return e.__iteratorUncached(t,n)}function de(e,t){return t?function e(t,n,r,i){return Array.isArray(n)?t.call(i,r,Y(n).map(function(r,i){return e(t,r,i,n)})):fe(n)?t.call(i,r,K(n).map(function(r,i){return e(t,r,i,n)})):n}(t,e,"",{"":e}):pe(e)}function pe(e){return Array.isArray(e)?Y(e).map(pe).toList():fe(e)?K(e).map(pe).toMap():e}function fe(e){return e&&(e.constructor===Object||void 0===e.constructor)}function he(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function me(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||l(e)!==l(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!c(e);if(u(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&he(i[1],e)&&(n||he(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var a=e;e=t,t=a}var d=!0,p=t.__iterate(function(t,r){if(n?!e.has(t):i?!he(t,e.get(r,v)):!he(e.get(r,v),t))return d=!1,!1});return d&&e.size===p}function _e(e,t){if(!(this instanceof _e))return new _e(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Z)return Z;Z=this}}function ge(e,t){if(!e)throw new Error(t)}function ve(e,t,n){if(!(this instanceof ve))return new ve(e,t,n);if(ge(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(J)return J;J=this}}function ye(){throw TypeError("Abstract")}function Ae(){}function xe(){}function Se(){}q.prototype[Q]=!0,t(ee,Y),ee.prototype.get=function(e,t){return this.has(e)?this._array[P(this,e)]:t},ee.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===e(n[t?r-i:i],i,this))return i+1;return i},ee.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new I(function(){return i>r?{value:void 0,done:!0}:j(e,i,n[t?r-i++:i++])})},t(te,K),te.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},te.prototype.has=function(e){return this._object.hasOwnProperty(e)},te.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,a=0;a<=i;a++){var o=r[t?i-a:a];if(!1===e(n[o],o,this))return a+1}return a},te.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,a=0;return new I(function(){var o=r[t?i-a:a];return a++>i?{value:void 0,done:!0}:j(e,o,n[o])})},te.prototype[h]=!0,t(ne,Y),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=G(n),i=0;if(z(r))for(var a;!(a=r.next()).done&&!1!==e(a.value,i++,this););return i},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=G(n);if(!z(r))return new I(N);var i=0;return new I(function(){var t=r.next();return t.done?t:j(e,i++,t.value)})},t(re,Y),re.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,i=this._iteratorCache,a=0;a<i.length;)if(!1===e(i[a],a++,this))return a;for(;!(n=r.next()).done;){var o=n.value;if(i[a]=o,!1===e(o,a++,this))break}return a},re.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new I(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return j(e,i,r[i++])})},t(_e,Y),_e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},_e.prototype.get=function(e,t){return this.has(e)?this._value:t},_e.prototype.includes=function(e){return he(this._value,e)},_e.prototype.slice=function(e,t){var n=this.size;return T(e,t,n)?this:new _e(this._value,F(t,n)-V(e,n))},_e.prototype.reverse=function(){return this},_e.prototype.indexOf=function(e){return he(this._value,e)?0:-1},_e.prototype.lastIndexOf=function(e){return he(this._value,e)?this.size:-1},_e.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},_e.prototype.__iterator=function(e,t){var n=this,r=0;return new I(function(){return r<n.size?j(e,r++,n._value):{value:void 0,done:!0}})},_e.prototype.equals=function(e){return e instanceof _e?he(this._value,e._value):me(e)},t(ve,Y),ve.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},ve.prototype.get=function(e,t){return this.has(e)?this._start+P(this,e)*this._step:t},ve.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},ve.prototype.slice=function(e,t){return T(e,t,this.size)?this:(e=V(e,this.size),(t=F(t,this.size))<=e?new ve(0,0):new ve(this.get(e,this._end),this.get(t,this._end),this._step))},ve.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},ve.prototype.lastIndexOf=function(e){return this.indexOf(e)},ve.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,a=0;a<=n;a++){if(!1===e(i,a,this))return a+1;i+=t?-r:r}return a},ve.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,a=0;return new I(function(){var o=i;return i+=t?-r:r,a>n?{value:void 0,done:!0}:j(e,a++,o)})},ve.prototype.equals=function(e){return e instanceof ve?this._start===e._start&&this._end===e._end&&this._step===e._step:me(this,e)},t(ye,n),t(Ae,ye),t(xe,ye),t(Se,ye),ye.Keyed=Ae,ye.Indexed=xe,ye.Set=Se;var be="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function we(e){return e>>>1&1073741824|3221225471&e}function Ee(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t,n,r=typeof e;if("number"===r){var i=0|e;for(i!==e&&(i^=4294967295*e);e>4294967295;)i^=e/=4294967295;return we(i)}if("string"===r)return e.length>Re?(void 0===(n=Be[t=e])&&(n=Pe(t),Le===Me&&(Le=0,Be={}),Le++,Be[t]=n),n):Pe(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===r)return function(e){var t;if(Fe&&void 0!==(t=Ce.get(e)))return t;if(void 0!==(t=e[Oe]))return t;if(!Ve){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Oe]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++De,1073741824&De&&(De=0),Fe)Ce.set(e,t);else{if(void 0!==Te&&!1===Te(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Ve)Object.defineProperty(e,Oe,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Oe]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Oe]=t}}return t}(e);if("function"==typeof e.toString)return Pe(e.toString());throw new Error("Value type "+r+" cannot be hashed.")}function Pe(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return we(t)}var Ce,Te=Object.isExtensible,Ve=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Fe="function"==typeof WeakMap;Fe&&(Ce=new WeakMap);var De=0,Oe="__immutablehash__";"function"==typeof Symbol&&(Oe=Symbol(Oe));var Re=16,Me=255,Le=0,Be={};function ke(e){ge(e!==1/0,"Cannot perform this action with an infinite size.")}function Ie(e){return null==e?Je():je(e)&&!u(e)?e:Je().withMutations(function(t){var n=r(e);ke(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function je(e){return!(!e||!e[Ue])}t(Ie,Ae),Ie.prototype.toString=function(){return this.__toString("Map {","}")},Ie.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ie.prototype.set=function(e,t){return Qe(this,e,t)},Ie.prototype.setIn=function(e,t){return this.updateIn(e,v,function(){return t})},Ie.prototype.remove=function(e){return Qe(this,e,v)},Ie.prototype.deleteIn=function(e){return this.updateIn(e,function(){return v})},Ie.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ie.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=function e(t,n,r,i){var a=t===v,o=n.next();if(o.done){var s=a?r:t,l=i(s);return l===s?t:l}ge(a||t&&t.set,"invalid keyPath");var c=o.value,u=a?v:t.get(c,v),d=e(u,n,r,i);return d===u?t:d===v?t.remove(c):(a?Je():t).set(c,d)}(this,nn(e),t,n);return r===v?void 0:r},Ie.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Je()},Ie.prototype.merge=function(){return rt(this,void 0,arguments)},Ie.prototype.mergeWith=function(t){var n=e.call(arguments,1);return rt(this,t,n)},Ie.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Je(),function(e){return"function"==typeof e.merge?e.merge.apply(e,n):n[n.length-1]})},Ie.prototype.mergeDeep=function(){return rt(this,it,arguments)},Ie.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return rt(this,at(t),n)},Ie.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Je(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]})},Ie.prototype.sort=function(e){return Vt(Ht(this,e))},Ie.prototype.sortBy=function(e,t){return Vt(Ht(this,t,e))},Ie.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ie.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new b)},Ie.prototype.asImmutable=function(){return this.__ensureOwner()},Ie.prototype.wasAltered=function(){return this.__altered},Ie.prototype.__iterator=function(e,t){return new Ye(this,e,t)},Ie.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},Ie.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ze(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ie.isMap=je;var Ne,Ue="@@__IMMUTABLE_MAP__@@",ze=Ie.prototype;function Ge(e,t){this.ownerID=e,this.entries=t}function We(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function He(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function qe(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function Ke(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function Ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Xe(e._root)}function $e(e,t){return j(e,t[0],t[1])}function Xe(e,t){return{node:e,index:0,__prev:t}}function Ze(e,t,n,r){var i=Object.create(ze);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Je(){return Ne||(Ne=Ze(0))}function Qe(e,t,n){var r,i;if(e._root){var a=x(y),o=x(A);if(r=et(e._root,e.__ownerID,0,void 0,t,n,a,o),!o.value)return e;i=e.size+(a.value?n===v?-1:1:0)}else{if(n===v)return e;i=1,r=new Ge(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ze(i,r):Je()}function et(e,t,n,r,i,a,o,s){return e?e.update(t,n,r,i,a,o,s):a===v?e:(S(s),S(o),new Ke(t,r,[i,a]))}function tt(e){return e.constructor===Ke||e.constructor===qe}function nt(e,t,n,r,i){if(e.keyHash===r)return new qe(t,r,[e.entry,i]);var a,o=(0===n?e.keyHash:e.keyHash>>>n)&g,s=(0===n?r:r>>>n)&g,l=o===s?[nt(e,t,n+m,r,i)]:(a=new Ke(t,r,i),o<s?[e,a]:[a,e]);return new We(t,1<<o|1<<s,l)}function rt(e,t,n){for(var i=[],a=0;a<n.length;a++){var s=n[a],l=r(s);o(s)||(l=l.map(function(e){return de(e)})),i.push(l)}return ot(e,t,i)}function it(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):he(e,t)?e:t}function at(e){return function(t,n,r){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return he(t,i)?t:i}}function ot(e,t,n){return 0===(n=n.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,v,function(e){return e===v?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function st(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function lt(e,t,n,r){var i=r?e:w(e);return i[t]=n,i}ze[Ue]=!0,ze.delete=ze.remove,ze.removeIn=ze.deleteIn,Ge.prototype.get=function(e,t,n,r){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(he(n,i[a][0]))return i[a][1];return r},Ge.prototype.update=function(e,t,n,r,i,a,o){for(var s=i===v,l=this.entries,c=0,u=l.length;c<u&&!he(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===i:s)return this;if(S(o),(s||!d)&&S(a),!s||1!==l.length){if(!d&&!s&&l.length>=ct)return function(e,t,n,r){e||(e=new b);for(var i=new Ke(e,Ee(n),[n,r]),a=0;a<t.length;a++){var o=t[a];i=i.update(e,0,void 0,o[0],o[1])}return i}(e,l,r,i);var p=e&&e===this.ownerID,f=p?l:w(l);return d?s?c===u-1?f.pop():f[c]=f.pop():f[c]=[r,i]:f.push([r,i]),p?(this.entries=f,this):new Ge(e,f)}},We.prototype.get=function(e,t,n,r){void 0===t&&(t=Ee(n));var i=1<<((0===e?t:t>>>e)&g),a=this.bitmap;return 0==(a&i)?r:this.nodes[st(a&i-1)].get(e+m,t,n,r)},We.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Ee(r));var s=(0===t?n:n>>>t)&g,l=1<<s,c=this.bitmap,u=0!=(c&l);if(!u&&i===v)return this;var d=st(c&l-1),p=this.nodes,f=u?p[d]:void 0,h=et(f,e,t+m,n,r,i,a,o);if(h===f)return this;if(!u&&h&&p.length>=ut)return function(e,t,n,r,i){for(var a=0,o=new Array(_),s=0;0!==n;s++,n>>>=1)o[s]=1&n?t[a++]:void 0;return o[r]=i,new He(e,a+1,o)}(e,p,c,s,h);if(u&&!h&&2===p.length&&tt(p[1^d]))return p[1^d];if(u&&h&&1===p.length&&tt(h))return h;var y=e&&e===this.ownerID,A=u?h?c:c^l:c|l,x=u?h?lt(p,d,h,y):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),a=0,o=0;o<r;o++)o===t&&(a=1),i[o]=e[o+a];return i}(p,d,y):function(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var a=new Array(i),o=0,s=0;s<i;s++)s===t?(a[s]=n,o=-1):a[s]=e[s+o];return a}(p,d,h,y);return y?(this.bitmap=A,this.nodes=x,this):new We(e,A,x)},He.prototype.get=function(e,t,n,r){void 0===t&&(t=Ee(n));var i=(0===e?t:t>>>e)&g,a=this.nodes[i];return a?a.get(e+m,t,n,r):r},He.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Ee(r));var s=(0===t?n:n>>>t)&g,l=i===v,c=this.nodes,u=c[s];if(l&&!u)return this;var d=et(u,e,t+m,n,r,i,a,o);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<dt)return function(e,t,n,r){for(var i=0,a=0,o=new Array(n),s=0,l=1,c=t.length;s<c;s++,l<<=1){var u=t[s];void 0!==u&&s!==r&&(i|=l,o[a++]=u)}return new We(e,i,o)}(e,c,p,s)}else p++;var f=e&&e===this.ownerID,h=lt(c,s,d,f);return f?(this.count=p,this.nodes=h,this):new He(e,p,h)},qe.prototype.get=function(e,t,n,r){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(he(n,i[a][0]))return i[a][1];return r},qe.prototype.update=function(e,t,n,r,i,a,o){void 0===n&&(n=Ee(r));var s=i===v;if(n!==this.keyHash)return s?this:(S(o),S(a),nt(this,e,t,n,[r,i]));for(var l=this.entries,c=0,u=l.length;c<u&&!he(r,l[c][0]);c++);var d=c<u;if(d?l[c][1]===i:s)return this;if(S(o),(s||!d)&&S(a),s&&2===u)return new Ke(e,this.keyHash,l[1^c]);var p=e&&e===this.ownerID,f=p?l:w(l);return d?s?c===u-1?f.pop():f[c]=f.pop():f[c]=[r,i]:f.push([r,i]),p?(this.entries=f,this):new qe(e,this.keyHash,f)},Ke.prototype.get=function(e,t,n,r){return he(n,this.entry[0])?this.entry[1]:r},Ke.prototype.update=function(e,t,n,r,i,a,o){var s=i===v,l=he(r,this.entry[0]);return(l?i===this.entry[1]:s)?this:(S(o),s?void S(a):l?e&&e===this.ownerID?(this.entry[1]=i,this):new Ke(e,this.keyHash,[r,i]):(S(a),nt(this,e,t,Ee(r),[r,i])))},Ge.prototype.iterate=qe.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},We.prototype.iterate=He.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var a=n[t?i-r:r];if(a&&!1===a.iterate(e,t))return!1}},Ke.prototype.iterate=function(e,t){return e(this.entry)},t(Ye,I),Ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return $e(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return $e(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var a=r.nodes[this._reverse?n-i:i];if(a){if(a.entry)return $e(e,a.entry);t=this._stack=Xe(a,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ct=_/4,ut=_/2,dt=_/4;function pt(e){var t=St();if(null==e)return t;if(ft(e))return e;var n=i(e),r=n.size;return 0===r?t:(ke(r),r>0&&r<_?xt(0,r,m,null,new _t(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function ft(e){return!(!e||!e[ht])}t(pt,xe),pt.of=function(){return this(arguments)},pt.prototype.toString=function(){return this.__toString("List [","]")},pt.prototype.get=function(e,t){if((e=P(this,e))>=0&&e<this.size){var n=Et(this,e+=this._origin);return n&&n.array[e&g]}return t},pt.prototype.set=function(e,t){return function(e,t,n){if((t=P(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Pt(e,t).set(0,n):Pt(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,a=x(A);return t>=Tt(e._capacity)?r=bt(r,e.__ownerID,0,t,n,a):i=bt(i,e.__ownerID,e._level,t,n,a),a.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):xt(e._origin,e._capacity,e._level,i,r):e}(this,e,t)},pt.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},pt.prototype.insert=function(e,t){return this.splice(e,0,t)},pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):St()},pt.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Pt(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},pt.prototype.pop=function(){return Pt(this,0,-1)},pt.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Pt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},pt.prototype.shift=function(){return Pt(this,1)},pt.prototype.merge=function(){return Ct(this,void 0,arguments)},pt.prototype.mergeWith=function(t){var n=e.call(arguments,1);return Ct(this,t,n)},pt.prototype.mergeDeep=function(){return Ct(this,it,arguments)},pt.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return Ct(this,at(t),n)},pt.prototype.setSize=function(e){return Pt(this,0,e)},pt.prototype.slice=function(e,t){var n=this.size;return T(e,t,n)?this:Pt(this,V(e,n),F(t,n))},pt.prototype.__iterator=function(e,t){var n=0,r=At(this,t);return new I(function(){var t=r();return t===yt?{value:void 0,done:!0}:j(e,n++,t)})},pt.prototype.__iterate=function(e,t){for(var n,r=0,i=At(this,t);(n=i())!==yt&&!1!==e(n,r++,this););return r},pt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},pt.isList=ft;var ht="@@__IMMUTABLE_LIST__@@",mt=pt.prototype;function _t(e,t){this.array=e,this.ownerID=t}mt[ht]=!0,mt.delete=mt.remove,mt.setIn=ze.setIn,mt.deleteIn=mt.removeIn=ze.removeIn,mt.update=ze.update,mt.updateIn=ze.updateIn,mt.mergeIn=ze.mergeIn,mt.mergeDeepIn=ze.mergeDeepIn,mt.withMutations=ze.withMutations,mt.asMutable=ze.asMutable,mt.asImmutable=ze.asImmutable,mt.wasAltered=ze.wasAltered,_t.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&g;if(r>=this.array.length)return new _t([],e);var i,a=0===r;if(t>0){var o=this.array[r];if((i=o&&o.removeBefore(e,t-m,n))===o&&a)return this}if(a&&!i)return this;var s=wt(this,e);if(!a)for(var l=0;l<r;l++)s.array[l]=void 0;return i&&(s.array[r]=i),s},_t.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,i=n-1>>>t&g;if(i>=this.array.length)return this;if(t>0){var a=this.array[i];if((r=a&&a.removeAfter(e,t-m,n))===a&&i===this.array.length-1)return this}var o=wt(this,e);return o.array.splice(i+1),r&&(o.array[i]=r),o};var gt,vt,yt={};function At(e,t){var n=e._origin,r=e._capacity,i=Tt(r),a=e._tail;return o(e._root,e._level,0);function o(e,s,l){return 0===s?function(e,o){var s=o===i?a&&a.array:e&&e.array,l=o>n?0:n-o,c=r-o;return c>_&&(c=_),function(){if(l===c)return yt;var e=t?--c:l++;return s&&s[e]}}(e,l):function(e,i,a){var s,l=e&&e.array,c=a>n?0:n-a>>i,u=1+(r-a>>i);return u>_&&(u=_),function(){for(;;){if(s){var e=s();if(e!==yt)return e;s=null}if(c===u)return yt;var n=t?--u:c++;s=o(l&&l[n],i-m,a+(n<<i))}}}(e,s,l)}}function xt(e,t,n,r,i,a,o){var s=Object.create(mt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function St(){return gt||(gt=xt(0,0,m))}function bt(e,t,n,r,i,a){var o,s=r>>>n&g,l=e&&s<e.array.length;if(!l&&void 0===i)return e;if(n>0){var c=e&&e.array[s],u=bt(c,t,n-m,r,i,a);return u===c?e:((o=wt(e,t)).array[s]=u,o)}return l&&e.array[s]===i?e:(S(a),o=wt(e,t),void 0===i&&s===o.array.length-1?o.array.pop():o.array[s]=i,o)}function wt(e,t){return t&&e&&t===e.ownerID?e:new _t(e?e.array.slice():[],t)}function Et(e,t){if(t>=Tt(e._capacity))return e._tail;if(t<1<<e._level+m){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&g],r-=m;return n}}function Pt(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new b,i=e._origin,a=e._capacity,o=i+t,s=void 0===n?a:n<0?a+n:i+n;if(o===i&&s===a)return e;if(o>=s)return e.clear();for(var l=e._level,c=e._root,u=0;o+u<0;)c=new _t(c&&c.array.length?[void 0,c]:[],r),u+=1<<(l+=m);u&&(o+=u,i+=u,s+=u,a+=u);for(var d=Tt(a),p=Tt(s);p>=1<<l+m;)c=new _t(c&&c.array.length?[c]:[],r),l+=m;var f=e._tail,h=p<d?Et(e,s-1):p>d?new _t([],r):f;if(f&&p>d&&o<a&&f.array.length){for(var _=c=wt(c,r),v=l;v>m;v-=m){var y=d>>>v&g;_=_.array[y]=wt(_.array[y],r)}_.array[d>>>m&g]=f}if(s<a&&(h=h&&h.removeAfter(r,0,s)),o>=p)o-=p,s-=p,l=m,c=null,h=h&&h.removeBefore(r,0,o);else if(o>i||p<d){for(u=0;c;){var A=o>>>l&g;if(A!==p>>>l&g)break;A&&(u+=(1<<l)*A),l-=m,c=c.array[A]}c&&o>i&&(c=c.removeBefore(r,l,o-u)),c&&p<d&&(c=c.removeAfter(r,l,p-u)),u&&(o-=u,s-=u)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=l,e._root=c,e._tail=h,e.__hash=void 0,e.__altered=!0,e):xt(o,s,l,c,h)}function Ct(e,t,n){for(var r=[],a=0,s=0;s<n.length;s++){var l=n[s],c=i(l);c.size>a&&(a=c.size),o(l)||(c=c.map(function(e){return de(e)})),r.push(c)}return a>e.size&&(e=e.setSize(a)),ot(e,t,r)}function Tt(e){return e<_?0:e-1>>>m<<m}function Vt(e){return null==e?Ot():Ft(e)?e:Ot().withMutations(function(t){var n=r(e);ke(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Ft(e){return je(e)&&u(e)}function Dt(e,t,n,r){var i=Object.create(Vt.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function Ot(){return vt||(vt=Dt(Je(),St()))}function Rt(e,t,n){var r,i,a=e._map,o=e._list,s=a.get(t),l=void 0!==s;if(n===v){if(!l)return e;o.size>=_&&o.size>=2*a.size?(i=o.filter(function(e,t){return void 0!==e&&s!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=a.remove(t),i=s===o.size-1?o.pop():o.set(s,void 0))}else if(l){if(n===o.get(s)[1])return e;r=a,i=o.set(s,[t,n])}else r=a.set(t,o.size),i=o.set(o.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):Dt(r,i)}function Mt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Lt(e){this._iter=e,this.size=e.size}function Bt(e){this._iter=e,this.size=e.size}function kt(e){this._iter=e,this.size=e.size}function It(e){var t=Qt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=en,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===M){var r=e.__iterator(t,n);return new I(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===R?O:R,n)},t}function jt(e,t,n){var r=Qt(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var a=e.get(r,v);return a===v?i:t.call(n,a,r,e)},r.__iterateUncached=function(r,i){var a=this;return e.__iterate(function(e,i,o){return!1!==r(t.call(n,e,i,o),i,a)},i)},r.__iteratorUncached=function(r,i){var a=e.__iterator(M,i);return new I(function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return j(r,s,t.call(n,o[1],s,e),i)})},r}function Nt(e,t){var n=Qt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=It(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=en,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function Ut(e,t,n,r){var i=Qt(e);return r&&(i.has=function(r){var i=e.get(r,v);return i!==v&&!!t.call(n,i,r,e)},i.get=function(r,i){var a=e.get(r,v);return a!==v&&t.call(n,a,r,e)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return e.__iterate(function(e,a,l){if(t.call(n,e,a,l))return s++,i(e,r?a:s-1,o)},a),s},i.__iteratorUncached=function(i,a){var o=e.__iterator(M,a),s=0;return new I(function(){for(;;){var a=o.next();if(a.done)return a;var l=a.value,c=l[0],u=l[1];if(t.call(n,u,c,e))return j(i,r?c:s++,u,a)}})},i}function zt(e,t,n,r){var i=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),T(t,n,i))return e;var a=V(t,i),o=F(n,i);if(a!=a||o!=o)return zt(e.toSeq().cacheResult(),t,n,r);var s,l=o-a;l==l&&(s=l<0?0:l);var c=Qt(e);return c.size=0===s?s:e.size&&s||void 0,!r&&ie(e)&&s>=0&&(c.get=function(t,n){return(t=P(this,t))>=0&&t<s?e.get(t+a,n):n}),c.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var o=0,l=!0,c=0;return e.__iterate(function(e,n){if(!l||!(l=o++<a))return c++,!1!==t(e,r?n:c-1,i)&&c!==s}),c},c.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var i=0!==s&&e.__iterator(t,n),o=0,l=0;return new I(function(){for(;o++<a;)i.next();if(++l>s)return{value:void 0,done:!0};var e=i.next();return r||t===R?e:j(t,l-1,t===O?void 0:e.value[1],e)})},c}function Gt(e,t,n,r){var i=Qt(e);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,l=0;return e.__iterate(function(e,a,c){if(!s||!(s=t.call(n,e,a,c)))return l++,i(e,r?a:l-1,o)}),l},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=e.__iterator(M,a),l=!0,c=0;return new I(function(){var e,a,u;do{if((e=s.next()).done)return r||i===R?e:j(i,c++,i===O?void 0:e.value[1],e);var d=e.value;a=d[0],u=d[1],l&&(l=t.call(n,u,a,o))}while(l);return i===M?e:j(i,a,u,e)})},i}function Wt(e,t,n){var r=Qt(e);return r.__iterateUncached=function(r,i){var a=0,s=!1;return function e(l,c){var u=this;l.__iterate(function(i,l){return(!t||c<t)&&o(i)?e(i,c+1):!1===r(i,n?l:a++,u)&&(s=!0),!s},i)}(e,0),a},r.__iteratorUncached=function(r,i){var a=e.__iterator(r,i),s=[],l=0;return new I(function(){for(;a;){var e=a.next();if(!1===e.done){var c=e.value;if(r===M&&(c=c[1]),t&&!(s.length<t)||!o(c))return n?e:j(r,l++,c,e);s.push(a),a=c.__iterator(r,i)}else a=s.pop()}return{value:void 0,done:!0}})},r}function Ht(e,t,n){t||(t=tn);var r=s(e),i=0,a=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return a.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),r?K(a):l(e)?Y(a):$(a)}function qt(e,t,n){if(t||(t=tn),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Kt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Kt(t,e,n)?n:e})}function Kt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(null==n||n!=n)||r>0}function Yt(e,t,r){var i=Qt(e);return i.size=new ee(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(R,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var a=r.map(function(e){return e=n(e),G(i?e.reverse():e)}),o=0,s=!1;return new I(function(){var n;return s||(n=a.map(function(e){return e.next()}),s=n.some(function(e){return e.done})),s?{value:void 0,done:!0}:j(e,o++,t.apply(null,n.map(function(e){return e.value})))})},i}function $t(e,t){return ie(e)?t:e.constructor(t)}function Xt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Zt(e){return ke(e.size),E(e)}function Jt(e){return s(e)?r:l(e)?i:a}function Qt(e){return Object.create((s(e)?K:l(e)?Y:$).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):q.prototype.cacheResult.call(this)}function tn(e,t){return e>t?1:e<t?-1:0}function nn(e){var t=G(e);if(!t){if(!H(e))throw new TypeError("Expected iterable or array-like: "+e);t=G(n(e))}return t}function rn(e,t){var n,r=function(a){if(a instanceof r)return a;if(!(this instanceof r))return new r(a);if(!n){n=!0;var o=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ge(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(i,o),i.size=o.length,i._name=t,i._keys=o,i._defaultValues=e}this._map=Ie(a)},i=r.prototype=Object.create(an);return i.constructor=r,r}t(Vt,Ie),Vt.of=function(){return this(arguments)},Vt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Vt.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Vt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ot()},Vt.prototype.set=function(e,t){return Rt(this,e,t)},Vt.prototype.remove=function(e){return Rt(this,e,v)},Vt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Vt.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Vt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Vt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Dt(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Vt.isOrderedMap=Ft,Vt.prototype[h]=!0,Vt.prototype.delete=Vt.prototype.remove,t(Mt,K),Mt.prototype.get=function(e,t){return this._iter.get(e,t)},Mt.prototype.has=function(e){return this._iter.has(e)},Mt.prototype.valueSeq=function(){return this._iter.valueSeq()},Mt.prototype.reverse=function(){var e=this,t=Nt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Mt.prototype.map=function(e,t){var n=this,r=jt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},Mt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Zt(this):0,function(i){return e(i,t?--n:n++,r)}),t)},Mt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(R,t),r=t?Zt(this):0;return new I(function(){var i=n.next();return i.done?i:j(e,t?--r:r++,i.value,i)})},Mt.prototype[h]=!0,t(Lt,Y),Lt.prototype.includes=function(e){return this._iter.includes(e)},Lt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},Lt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t),r=0;return new I(function(){var t=n.next();return t.done?t:j(e,r++,t.value,t)})},t(Bt,$),Bt.prototype.has=function(e){return this._iter.includes(e)},Bt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Bt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t);return new I(function(){var t=n.next();return t.done?t:j(e,t.value,t.value,t)})},t(kt,K),kt.prototype.entrySeq=function(){return this._iter.toSeq()},kt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Xt(t);var r=o(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},kt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t);return new I(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Xt(r);var i=o(r);return j(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},Lt.prototype.cacheResult=Mt.prototype.cacheResult=Bt.prototype.cacheResult=kt.prototype.cacheResult=en,t(rn,Ae),rn.prototype.toString=function(){return this.__toString(sn(this)+" {","}")},rn.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},rn.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},rn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=on(this,Je()))},rn.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+sn(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:on(this,n)},rn.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:on(this,t)},rn.prototype.wasAltered=function(){return this._map.wasAltered()},rn.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},rn.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},rn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?on(this,t,e):(this.__ownerID=e,this._map=t,this)};var an=rn.prototype;function on(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function sn(e){return e._name||e.constructor.name||"Record"}function ln(e){return null==e?mn():cn(e)&&!u(e)?e:mn().withMutations(function(t){var n=a(e);ke(n.size),n.forEach(function(e){return t.add(e)})})}function cn(e){return!(!e||!e[dn])}an.delete=an.remove,an.deleteIn=an.removeIn=ze.removeIn,an.merge=ze.merge,an.mergeWith=ze.mergeWith,an.mergeIn=ze.mergeIn,an.mergeDeep=ze.mergeDeep,an.mergeDeepWith=ze.mergeDeepWith,an.mergeDeepIn=ze.mergeDeepIn,an.setIn=ze.setIn,an.update=ze.update,an.updateIn=ze.updateIn,an.withMutations=ze.withMutations,an.asMutable=ze.asMutable,an.asImmutable=ze.asImmutable,t(ln,Se),ln.of=function(){return this(arguments)},ln.fromKeys=function(e){return this(r(e).keySeq())},ln.prototype.toString=function(){return this.__toString("Set {","}")},ln.prototype.has=function(e){return this._map.has(e)},ln.prototype.add=function(e){return fn(this,this._map.set(e,!0))},ln.prototype.remove=function(e){return fn(this,this._map.remove(e))},ln.prototype.clear=function(){return fn(this,this._map.clear())},ln.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)a(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},ln.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.every(function(e){return e.includes(n)})||e.remove(n)})})},ln.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return a(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.some(function(e){return e.includes(n)})&&e.remove(n)})})},ln.prototype.merge=function(){return this.union.apply(this,arguments)},ln.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},ln.prototype.sort=function(e){return _n(Ht(this,e))},ln.prototype.sortBy=function(e,t){return _n(Ht(this,t,e))},ln.prototype.wasAltered=function(){return this._map.wasAltered()},ln.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},ln.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},ln.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},ln.isSet=cn;var un,dn="@@__IMMUTABLE_SET__@@",pn=ln.prototype;function fn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function hn(e,t){var n=Object.create(pn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function mn(){return un||(un=hn(Je()))}function _n(e){return null==e?xn():gn(e)?e:xn().withMutations(function(t){var n=a(e);ke(n.size),n.forEach(function(e){return t.add(e)})})}function gn(e){return cn(e)&&u(e)}pn[dn]=!0,pn.delete=pn.remove,pn.mergeDeep=pn.merge,pn.mergeDeepWith=pn.mergeWith,pn.withMutations=ze.withMutations,pn.asMutable=ze.asMutable,pn.asImmutable=ze.asImmutable,pn.__empty=mn,pn.__make=hn,t(_n,ln),_n.of=function(){return this(arguments)},_n.fromKeys=function(e){return this(r(e).keySeq())},_n.prototype.toString=function(){return this.__toString("OrderedSet {","}")},_n.isOrderedSet=gn;var vn,yn=_n.prototype;function An(e,t){var n=Object.create(yn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function xn(){return vn||(vn=An(Ot()))}function Sn(e){return null==e?Tn():bn(e)?e:Tn().unshiftAll(e)}function bn(e){return!(!e||!e[En])}yn[h]=!0,yn.__empty=xn,yn.__make=An,t(Sn,xe),Sn.of=function(){return this(arguments)},Sn.prototype.toString=function(){return this.__toString("Stack [","]")},Sn.prototype.get=function(e,t){var n=this._head;for(e=P(this,e);n&&e--;)n=n.next;return n?n.value:t},Sn.prototype.peek=function(){return this._head&&this._head.value},Sn.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Cn(e,t)},Sn.prototype.pushAll=function(e){if(0===(e=i(e)).size)return this;ke(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Cn(t,n)},Sn.prototype.pop=function(){return this.slice(1)},Sn.prototype.unshift=function(){return this.push.apply(this,arguments)},Sn.prototype.unshiftAll=function(e){return this.pushAll(e)},Sn.prototype.shift=function(){return this.pop.apply(this,arguments)},Sn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Tn()},Sn.prototype.slice=function(e,t){if(T(e,t,this.size))return this;var n=V(e,this.size),r=F(t,this.size);if(r!==this.size)return xe.prototype.slice.call(this,e,t);for(var i=this.size-n,a=this._head;n--;)a=a.next;return this.__ownerID?(this.size=i,this._head=a,this.__hash=void 0,this.__altered=!0,this):Cn(i,a)},Sn.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Cn(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Sn.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},Sn.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new I(function(){if(r){var t=r.value;return r=r.next,j(e,n++,t)}return{value:void 0,done:!0}})},Sn.isStack=bn;var wn,En="@@__IMMUTABLE_STACK__@@",Pn=Sn.prototype;function Cn(e,t,n,r){var i=Object.create(Pn);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Tn(){return wn||(wn=Cn(0))}function Vn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}Pn[En]=!0,Pn.withMutations=ze.withMutations,Pn.asMutable=ze.asMutable,Pn.asImmutable=ze.asImmutable,Pn.wasAltered=ze.wasAltered,n.Iterator=I,Vn(n,{toArray:function(){ke(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new Lt(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new Mt(this,!0)},toMap:function(){return Ie(this.toKeyedSeq())},toObject:function(){ke(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Vt(this.toKeyedSeq())},toOrderedSet:function(){return _n(s(this)?this.valueSeq():this)},toSet:function(){return ln(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Bt(this)},toSeq:function(){return l(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Sn(s(this)?this.valueSeq():this)},toList:function(){return pt(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return $t(this,function(e,t){var n=s(e),i=[e].concat(t).map(function(e){return o(e)?n&&(e=r(e)):e=n?oe(e):se(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var a=i[0];if(a===e||n&&s(a)||l(e)&&l(a))return a}var c=new ee(i);return n?c=c.toKeyedSeq():l(e)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),c}(this,t))},includes:function(e){return this.some(function(t){return he(t,e)})},entries:function(){return this.__iterator(M)},every:function(e,t){ke(this.size);var n=!0;return this.__iterate(function(r,i,a){if(!e.call(t,r,i,a))return n=!1,!1}),n},filter:function(e,t){return $t(this,Ut(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(r,i,a){if(e.call(t,r,i,a))return n=[i,r],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return ke(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ke(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!=r?r.toString():""}),t},keys:function(){return this.__iterator(O)},map:function(e,t){return $t(this,jt(this,e,t))},reduce:function(e,t,n){var r,i;return ke(this.size),arguments.length<2?i=!0:r=t,this.__iterate(function(t,a,o){i?(i=!1,r=t):r=e.call(n,r,t,a,o)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return $t(this,Nt(this,!0))},slice:function(e,t){return $t(this,zt(this,e,t,!0))},some:function(e,t){return!this.every(Mn(e),t)},sort:function(e){return $t(this,Ht(this,e))},values:function(){return this.__iterator(R)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return E(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Ie().asMutable();return e.__iterate(function(i,a){r.update(t.call(n,i,a,e),0,function(e){return e+1})}),r.asImmutable()}(this,e,t)},equals:function(e){return me(this,e)},entrySeq:function(){var e=this;if(e._cache)return new ee(e._cache);var t=e.toSeq().map(Rn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Mn(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(C)},flatMap:function(e,t){return $t(this,function(e,t,n){var r=Jt(e);return e.toSeq().map(function(i,a){return r(t.call(n,i,a,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return $t(this,Wt(this,e,!0))},fromEntrySeq:function(){return new kt(this)},get:function(e,t){return this.find(function(t,n){return he(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=nn(e);!(n=i.next()).done;){var a=n.value;if((r=r&&r.get?r.get(a,v):v)===v)return t}return r},groupBy:function(e,t){return function(e,t,n){var r=s(e),i=(u(e)?Vt():Ie()).asMutable();e.__iterate(function(a,o){i.update(t.call(n,a,o,e),function(e){return(e=e||[]).push(r?[o,a]:a),e})});var a=Jt(e);return i.map(function(t){return $t(e,a(t))})}(this,e,t)},has:function(e){return this.get(e,v)!==v},hasIn:function(e){return this.getIn(e,v)!==v},isSubset:function(e){return e="function"==typeof e.includes?e:n(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:n(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(On).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return qt(this,e)},maxBy:function(e,t){return qt(this,t,e)},min:function(e){return qt(this,e?Ln(e):In)},minBy:function(e,t){return qt(this,t?Ln(t):In,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return $t(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return $t(this,Gt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Mn(e),t)},sortBy:function(e,t){return $t(this,Ht(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return $t(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return $t(this,function(e,t,n){var r=Qt(e);return r.__iterateUncached=function(r,i){var a=this;if(i)return this.cacheResult().__iterate(r,i);var o=0;return e.__iterate(function(e,i,s){return t.call(n,e,i,s)&&++o&&r(e,i,a)}),o},r.__iteratorUncached=function(r,i){var a=this;if(i)return this.cacheResult().__iterator(r,i);var o=e.__iterator(M,i),s=!0;return new I(function(){if(!s)return{value:void 0,done:!0};var e=o.next();if(e.done)return e;var i=e.value,l=i[0],c=i[1];return t.call(n,c,l,a)?r===M?e:j(r,l,c,e):(s=!1,{value:void 0,done:!0})})},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Mn(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=u(e),n=s(e),r=t?1:0;return function(e,t){return t=be(t,3432918353),t=be(t<<15|t>>>-15,461845907),t=be(t<<13|t>>>-13,5),t=be((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=we((t=be(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+jn(Ee(e),Ee(t))|0}:function(e,t){r=r+jn(Ee(e),Ee(t))|0}:t?function(e){r=31*r+Ee(e)|0}:function(e){r=r+Ee(e)|0}),r)}(this))}});var Fn=n.prototype;Fn[d]=!0,Fn[k]=Fn.values,Fn.__toJS=Fn.toArray,Fn.__toStringMapper=Bn,Fn.inspect=Fn.toSource=function(){return this.toString()},Fn.chain=Fn.flatMap,Fn.contains=Fn.includes,function(){try{Object.defineProperty(Fn,"length",{get:function(){if(!n.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Vn(r,{flip:function(){return $t(this,It(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return he(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return he(t,e)})},mapEntries:function(e,t){var n=this,r=0;return $t(this,this.toSeq().map(function(i,a){return e.call(t,[a,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return $t(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var Dn=r.prototype;function On(e,t){return t}function Rn(e,t){return[t,e]}function Mn(e){return function(){return!e.apply(this,arguments)}}function Ln(e){return function(){return-e.apply(this,arguments)}}function Bn(e){return"string"==typeof e?JSON.stringify(e):e}function kn(){return w(arguments)}function In(e,t){return e<t?1:e>t?-1:0}function jn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Dn[p]=!0,Dn[k]=Fn.entries,Dn.__toJS=Fn.toObject,Dn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Bn(e)},Vn(i,{toKeyedSeq:function(){return new Mt(this,!1)},filter:function(e,t){return $t(this,Ut(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return $t(this,Nt(this,!1))},slice:function(e,t){return $t(this,zt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=V(e,e<0?this.count():this.size);var r=this.slice(0,e);return $t(this,1===n?r:r.concat(w(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return $t(this,Wt(this,e,!1))},get:function(e,t){return(e=P(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=P(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return $t(this,function(e,t){var n=Qt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,a=0;return e.__iterate(function(e,r){return(!a||!1!==n(t,a++,i))&&!1!==n(e,a++,i)},r),a},n.__iteratorUncached=function(n,r){var i,a=e.__iterator(R,r),o=0;return new I(function(){return(!i||o%2)&&(i=a.next()).done?i:o%2?j(n,o++,t):j(n,o++,i.value,i)})},n}(this,e))},interleave:function(){var e=[this].concat(w(arguments)),t=Yt(this.toSeq(),Y.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),$t(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return $t(this,Gt(this,e,t,!1))},zip:function(){return $t(this,Yt(this,kn,[this].concat(w(arguments))))},zipWith:function(e){var t=w(arguments);return t[0]=this,$t(this,Yt(this,e,t))}}),i.prototype[f]=!0,i.prototype[h]=!0,Vn(a,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),a.prototype.has=Fn.includes,Vn(K,r.prototype),Vn(Y,i.prototype),Vn($,a.prototype),Vn(Ae,r.prototype),Vn(xe,i.prototype),Vn(Se,a.prototype),{Iterable:n,Seq:q,Collection:ye,Map:Ie,OrderedMap:Vt,List:pt,Stack:Sn,Set:ln,OrderedSet:_n,Record:rn,Range:ve,Repeat:_e,is:he,fromJS:de}}()},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,a,o,s,l){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,a,o,s,l],d=0;(c=new Error(t.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n(143),a=n(91),o=n(262),s=n(5),l=n(45),c=s.OrderedSet,u=s.Record,d=s.Stack,p=u({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:d(),selection:null,treeMap:null,undoStack:d()}),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._immutable=t}return e.createEmpty=function(t){return e.createWithContent(a.createFromText(""),t)},e.createWithContent=function(t,n){var r=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:d(),redoStack:d(),decorator:n||null,selection:l.createEmpty(r)})},e.create=function(t){var n=t.currentContent,i=t.decorator,a=r({},t,{treeMap:m(n,i),directionMap:o.getDirectionMap(n)});return new e(new p(a))},e.set=function(t,n){return new e(t.getImmutable().withMutations(function(e){var r=e.get("decorator"),a=r;null===n.decorator?a=null:n.decorator&&(a=n.decorator);var o=n.currentContent||t.getCurrentContent();if(a!==r){var s,l=e.get("treeMap");return s=a&&r?function(e,t,n,r,a){return n.merge(t.toSeq().filter(function(t){return r.getDecorations(t,e)!==a.getDecorations(t,e)}).map(function(t){return i.generate(e,t,r)}))}(o,o.getBlockMap(),l,a,r):m(o,a),void e.merge({decorator:a,treeMap:s,nativelyRenderedContent:null})}o!==t.getCurrentContent()&&e.set("treeMap",function(e,t,n,r){var a=e.getCurrentContent().set("entityMap",n),o=a.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter(function(e,t){return e!==o.get(t)}).map(function(e){return i.generate(a,e,r)}))}(t,o.getBlockMap(),o.getEntityMap(),a)),e.merge(n)}))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);if(r>0)return i.getInlineStyleAt(r-1);if(i.getLength())return i.getInlineStyleAt(0);return _(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=e.getBlockForKey(n);if(r<i.getLength())return i.getInlineStyleAt(r);if(r>0)return i.getInlineStyleAt(r-1);return _(e,n)}(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return h(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),h(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent().getLastBlock(),r=n.getKey(),i=n.getLength();return e.acceptSelection(t,new l({anchorKey:r,anchorOffset:i,focusKey:r,focusOffset:i,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(t,n,r){if(t.getCurrentContent()===n)return t;var i="insert-characters"!==r,a=o.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:a,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:null});var s=t.getSelection(),l=t.getCurrentContent(),c=t.getUndoStack(),u=n;s!==l.getSelectionAfter()||function(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(t,r)?(c=c.push(l),u=u.set("selectionBefore",s)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(u=u.set("selectionBefore",l.getSelectionBefore()));var p=t.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(r)&&(p=null);var f={currentContent:u,directionMap:a,undoStack:c,redoStack:d(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:i,inlineStyleOverride:p};return e.set(t,f)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var i=t.getCurrentContent(),a=o.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:a,undoStack:n.shift(),redoStack:t.getRedoStack().push(i),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:i.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var i=t.getCurrentContent(),a=o.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:a,undoStack:t.getUndoStack().push(i),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();function h(e,t,n){return f.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function m(e,t){return e.getBlockMap().map(function(n){return i.generate(e,n,t)}).toOrderedMap()}function _(e,t){var n=e.getBlockMap().reverse().skipUntil(function(e,n){return n===t}).skip(1).skipUntil(function(e,t){return e.getLength()}).first();return n?n.getInlineStyleAt(n.getLength()-1):c()}e.exports=f},function(e,t,n){"use strict";var r=n(34),i=n(175),a=n(80),o=n(355),s=n(66);function l(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return u.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return u.stringifyByChar(e)}function p(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=d;var f={};f.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,a.allocBuffer(e.length))}},f.array={string:d,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},f.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return a.newBufferFrom(e)}},f.nodebuffer={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:l},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return f[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){o(function(){e.apply(n||null,t||[])})},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,a,o,l){return s.Promise.resolve(n).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(n){var u,d=t.getTypeOf(n);return d?("arraybuffer"===d?n=t.transformTo("uint8array",n):"string"===d&&(l?n=i.decode(n):a&&!0!==o&&(n=c(u=n,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),n):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(16),a=n(18),o=n(25),s=n(58),l=n(41),c=n(53),u=n(134),d=n(11),p=n(1),f=n(137),h=n(238),m=n(3),_=n(27),g=n(13),v=n(43),y=n(19);t.romhandler=new(function(){function e(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null}return e.prototype.getROMGame=function(){return this._rom?this._gameId?this._gameId:this._rom.byteLength<64?null:(this._gameId=String.fromCharCode(this._u8array[59],this._u8array[60],this._u8array[61],this._u8array[62]),this._gameId):null},e.prototype.getROMBuffer=function(){return this._rom},e.prototype.clear=function(){this._rom=null,this._u8array=null,this._gameId=null,this._gameVersion=null,i.scenes.clearCache(),a.mainfs.clearCache(),o.strings.clear(),s.strings3.clear(),l.hvqfs.clearCache(),c.audio.clearCache(),u.animationfs.clearCache()},e.prototype.setROMBuffer=function(e){var t=this;if(!e)return this.clear(),!1;if(this._rom=e,this._u8array=new Uint8Array(this._rom),this.byteSwapIfNeeded(),!this.romRecognized())return g.showMessage("File is not recognized as any valid ROM."),this.clear(),!1;if(!this.romSupported())return g.showMessage("This ROM is not supported right now."),this.clear(),!1;v.reset();var n=this.getGameVersion(),r=[];return r.push(i.scenes.extractAsync()),r.push(a.mainfs.extractAsync()),3===n?r.push(s.strings3.extractAsync()):r.push(o.strings.extractAsync()),r.push(l.hvqfs.extractAsync()),r.push(c.audio.extractAsync()),2===n&&r.push(u.animationfs.extractAsync()),Promise.all(r).then(function(){var e=i.scenes.getInfo(0);t._rom=t._rom.slice(0,e.rom_start)})},e.prototype.saveROM=function(){if(!this._rom)throw new Error("Cannot save ROM, buffer was not present");var e,t=this.getGameVersion(),n=this._rom.byteLength,r=d.makeDivisibleBy(i.scenes.getByteLength(),16),m=d.makeDivisibleBy(a.mainfs.getByteLength(),16);e=3===t?d.makeDivisibleBy(s.strings3.getByteLength(),16):d.makeDivisibleBy(o.strings.getByteLength(),16);var g=d.makeDivisibleBy(l.hvqfs.getByteLength(),16),v=d.makeDivisibleBy(c.audio.getByteLength(),16),y=0;for(2===t&&(y=d.makeDivisibleBy(u.animationfs.getByteLength(),16));n+r+m+e&32768;)e+=4096;var A=new ArrayBuffer(n+r+m+e+g+y+v);p.copyRange(A,this._rom,0,0,n),f.applyHook(A),a.mainfs.pack(A,n+r),a.mainfs.setROMOffset(n+r,A),3===t?(s.strings3.pack(A,n+r+m),s.strings3.setROMOffset(n+r+m,A)):(o.strings.pack(A,n+r+m),o.strings.setROMOffset(n+r+m,A)),l.hvqfs.pack(A,n+r+m+e),l.hvqfs.setROMOffset(n+m+r+e,A),2===t&&(u.animationfs.pack(A,n+r+m+e+g),u.animationfs.setROMOffset(n+r+m+e+g,A)),c.audio.pack(A,n+r+m+e+g+y),c.audio.setROMOffset(n+r+m+e+g+y,A),i.scenes.pack(A,n);var x=_.getROMAdapter();x.onAfterSave&&x.onAfterSave(new DataView(A)),h.fixChecksum(A),this._rom=A.slice(0,n),this._u8array=new Uint8Array(this._rom);var S=new Blob([A]);saveAs(S,"MyMarioParty"+t+".z64")},e.prototype.romIsLoaded=function(){return!!this._rom},e.prototype.getDataView=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=0),!this._rom)throw"ROM not loaded, cannot get DataView.";return t?new DataView(this._rom,e,t-e):new DataView(this._rom,e)},e.prototype.getGameVersion=function(){if(null!==this._gameVersion)return this._gameVersion;var e=this.getROMGame();if(!e)return null;switch(e){case r.Game.MP1_USA:case r.Game.MP1_JPN:return this._gameVersion=1,1;case r.Game.MP2_USA:return this._gameVersion=2,2;case r.Game.MP3_USA:return this._gameVersion=3,3}return null},e.prototype.romRecognized=function(){return null!==this.getGameVersion()},e.prototype.romSupported=function(){var e=!1;switch(this.getROMGame()){case r.Game.MP1_USA:case r.Game.MP2_USA:case r.Game.MP3_USA:e=!0}return e||y.get(y.$setting.uiAllowAllRoms)},e.prototype.byteSwapIfNeeded=function(){var e,t;if(this._rom&&!(this._rom.byteLength<4)&&this._u8array){var n=this.getDataView(),r=n.getUint32(0);if(2151092800!==r){m.$$log("Byteswapping ROM...");var i=this._rom.byteLength-this._rom.byteLength%2,a=this._rom.byteLength-this._rom.byteLength%4;if(931151890===r)for(var o=0;o<i;o+=2)e=[this._u8array[o+1],this._u8array[o]],this._u8array[o]=e[0],this._u8array[o+1]=e[1];else if(1074935680===r)for(o=0;o<a;o+=4)t=[this._u8array[o+3],this._u8array[o+2],this._u8array[o+1],this._u8array[o]],this._u8array[o]=t[0],this._u8array[o+1]=t[1],this._u8array[o+2]=t[2],this._u8array[o+3]=t[3];else if(306217015===r)for(o=0;o<a;o+=4){var s=n.getUint16(o+2);n.setUint16(o+2,n.getUint16(o)),n.setUint16(o,s)}}}},e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.create(null);t.addEventToLibrary=function(e){r[e.id]=e},t.removeEventFromLibrary=function(e){if(!r[e])throw new Error("Cannot remove event "+e+", as it isn't in the event library");if(!r[e].custom)throw new Error("Cannot remove event "+e+", as it is a built-in event");delete r[e]},t.getEventFromLibrary=function(e){return r[e]},t.getEventsInLibrary=function(){return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distance=function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))},t.midpoint=function(e,t,n,r){return{x:(e+n)/2,y:(t+r)/2}},t.lineDistance=function(e,t,n,r,i,a){return Math.abs((a-r)*e-(i-n)*t+i*r-a*n)/Math.sqrt(Math.pow(a-r,2)+Math.pow(i-n,2))},t.pointFallsWithin=function(e,t,n,r,i,a){var o=[Math.min(n,i),Math.max(n,i)],s=o[0],l=o[1],c=[Math.min(r,a),Math.max(r,a)];return e>=s&&e<=l&&t>=c[0]&&t<=c[1]},t.makeDivisibleBy=function(e,t){return t*Math.ceil(e/t)},t.degreesToRadians=function(e){return e*Math.PI/180},t.radiansToDegrees=function(e){return 180*e/Math.PI},t.determineAngle=function(e,t,n,r){var i=n-e,a=r-t,o=Math.atan2(a,i);return o<0?Math.abs(o):Math.abs(o-Math.PI)+Math.PI},t.getRawFloat32Format=function(e){var t=new ArrayBuffer(4),n=new DataView(t);return n.setFloat32(0,e),n.getUint32(0)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(0);function a(){return window._PP64instance}t.getAppInstance=a,t.changeView=function(e){a().setState({currentView:e})},t.currentBoardChanged=function(e){a().setState({currentBoard:e,selectedSpaces:null,currentAction:i.Action.MOVE})},t.boardsChanged=function(e){a().setState({boards:e})},t.romLoadedChanged=function(){a().setState({romLoaded:r.romhandler.romIsLoaded()})},t.changeCurrentAction=function(e){a().setState({currentAction:e})},t.getCurrentAction=function(){return a().state.currentAction},t.changeSelectedSpaces=function(e){a().setState({selectedSpaces:e})},t.getSelectedSpaces=function(){return a().state.selectedSpaces},t.changeCurrentEvent=function(e,t){a().setState({currentEvent:e,currentEventIsBoardEvent:!!t})},t.getCurrentEvent=function(){return a().state.currentEvent},t.getCurrentEventIsBoardEvent=function(){return a().state.currentEventIsBoardEvent},t.blockUI=function(e){a().setState({blocked:!!e})},t.showMessage=function(e){a().setState({blocked:!!e,message:e||"",messageHTML:""})},t.showMessageHTML=function(e){a().setState({blocked:!!e,message:"",messageHTML:e||""})},t.refresh=function(){a().forceUpdate()},t.addNotification=function(e){var t=a().state.notifications.slice();t.push(e),a().setState({notifications:t})},t.removeNotification=function(e){var t=a().state.notifications.slice(),n=t.indexOf(e);t.splice(n,1),a().setState({notifications:t})}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(s[c]=n[c]);if(r){o=r(n);for(var u=0;u<o.length;u++)a.call(n,o[u])&&(s[o[u]]=n[o[u]])}}return s}},function(e,t,n){"use strict";var r=n(17),i=n(251),a=n(33),o=n(5),s=n(252),l=n(254),c=n(73),u=n(257),d=n(258),p=n(6),f=n(259),h=n(140),m=n(260),_=n(261),g=o.OrderedSet,v={replaceText:function(e,t,n,i,a){var o=h(e,t),s=m(o,t),l=r.create({style:i||g(),entity:a||null});return d(s,s.getSelectionAfter(),n,l)},insertText:function(e,t,n,r,i){return t.isCollapsed()||p(!1),v.replaceText(e,t,n,r,i)},moveText:function(e,t,n){var r=c(e,t),i=v.removeRange(e,t,"backward");return v.replaceWithFragment(i,n,r)},replaceWithFragment:function(e,t,n){var r=h(e,t),i=m(r,t);return u(i,i.getSelectionAfter(),n)},removeRange:function(e,t,n){var r,i,o=void 0,s=void 0;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),i=t.getFocusKey(),o=e.getBlockForKey(r),s=e.getBlockForKey(i);var c=t.getStartOffset(),u=t.getEndOffset(),d=o.getEntityAt(c),p=s.getEntityAt(u-1);if(r===i&&d&&d===p){var f=l(e.getEntityMap(),o,s,t,n);return m(e,f)}var _=t;a.draft_segmented_entities_behavior&&(_=l(e.getEntityMap(),o,s,t,n));var g=h(e,_);return m(g,_)},splitBlock:function(e,t){var n=h(e,t),r=m(n,t);return _(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return i.add(e,t,n)},removeInlineStyle:function(e,t,n){return i.remove(e,t,n)},setBlockType:function(e,t,n){return f(e,t,function(e){return e.merge({type:n,depth:0})})},setBlockData:function(e,t,n){return f(e,t,function(e){return e.merge({data:n})})},mergeBlockData:function(e,t,n){return f(e,t,function(e){return e.merge({data:e.getData().merge(n)})})},applyEntity:function(e,t,n){var r=h(e,t);return s(r,t,n)}};e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(9),a=n(27),o=n(3);t.scenes=new(function(){function e(){this._overlays=[],this._sceneInfo=[]}return e.prototype.clearCache=function(){this._overlays=null,this._sceneInfo=null},e.prototype.count=function(){return this._sceneInfo.length},e.prototype.getInfo=function(e){return this._sceneInfo[e]||null},e.prototype.getDataView=function(e){return new DataView(this._overlays[e])},e.prototype.getCodeDataView=function(e){var t=this._sceneInfo[e],n=2147483647&t.code_start,r=2147483647&t.code_end;return new DataView(this._overlays[e],0,r-n)},e.prototype.getRoDataView=function(e){var t=this._sceneInfo[e],n=2147483647&t.rodata_start,r=2147483647&t.rodata_end,i=2147483647&t.ram_start;return new DataView(this._overlays[e],n-i,r-n)},e.prototype.getByteLength=function(){return this._sceneInfo.reduce(function(e,t){return e+t.rom_end-t.rom_start},0)},e.prototype.extractAsync=function(){var e=this;return new Promise(function(t){e.extract(),t()})},e.prototype.extract=function(){var e=a.getROMAdapter(),t=e&&e.SCENE_TABLE_ROM;if(!t)throw new Error("SCENE_TABLE_ROM undefined in current ROM adapter");this._overlays=[],this._sceneInfo=[];for(var n=i.romhandler.getROMBuffer(),r=i.romhandler.getDataView(),o=t;1142947840!==r.getUint32(o);){var s={rom_start:r.getUint32(o),rom_end:r.getUint32(o+4),ram_start:r.getUint32(o+8),code_start:r.getUint32(o+12),code_end:r.getUint32(o+16),rodata_start:r.getUint32(o+20),rodata_end:r.getUint32(o+24),bss_start:r.getUint32(o+28),bss_end:r.getUint32(o+32)};this._sceneInfo.push(s),this._overlays.push(n.slice(s.rom_start,s.rom_end)),o+=36}},e.prototype.pack=function(e,t){void 0===t&&(t=0);var n=a.getROMAdapter(),i=n&&n.SCENE_TABLE_ROM;if(!i)throw new Error("SCENE_TABLE_ROM undefined in current ROM adapter");for(var o=new DataView(e),s=i,l=0;1142947840!==o.getUint32(s);){var c=this._sceneInfo[l];o.setUint32(s,c.rom_start),o.setUint32(s+4,c.rom_end),o.setUint32(s+8,c.ram_start),o.setUint32(s+12,c.code_start),o.setUint32(s+16,c.code_end),o.setUint32(s+20,c.rodata_start),o.setUint32(s+24,c.rodata_end),o.setUint32(s+28,c.bss_start),o.setUint32(s+32,c.bss_end);var u=this._overlays[l];r.copyRange(e,u,c.rom_start,0,u.byteLength),s+=36,l++}},e.prototype.replace=function(e,t,n){if(t.byteLength%16)throw new Error("Cannot have overlay byte length that is not divisible by 16");this._overlays[e]=t;var r=this._sceneInfo[e],i=r.rom_end-r.rom_start,a=t.byteLength-i;if(r.rom_end=r.rom_start+t.byteLength,n)for(var s in n){var l=n[s];l&&(r[s]=l)}for(var c=e+1;c<this._sceneInfo.length;c++){var u=this._sceneInfo[c];r.rom_start<u.rom_start&&(u.rom_start+=a,u.rom_end+=a)}o.$$log("Replaced overlay "+o.$$hex(e)+" with new buffer of length "+t.byteLength,n)},e}())},function(e,t,n){"use strict";var r=n(5),i=r.Map,a=r.OrderedSet,o=r.Record,s=a(),l={style:s,entity:null},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getStyle=function(){return this.get("style")},t.prototype.getEntity=function(){return this.get("entity")},t.prototype.hasStyle=function(e){return this.getStyle().includes(e)},t.applyStyle=function(e,n){var r=e.set("style",e.getStyle().add(n));return t.create(r)},t.removeStyle=function(e,n){var r=e.set("style",e.getStyle().remove(n));return t.create(r)},t.applyEntity=function(e,n){var r=e.getEntity()===n?e:e.set("entity",n);return t.create(r)},t.create=function(e){if(!e)return u;var n=i({style:s,entity:null}).merge(e),r=d.get(n);if(r)return r;var a=new t(n);return d=d.set(n,a),a},t}(o(l)),u=new c,d=i([[i(l),u]]);c.EMPTY=u,e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3),a=n(69),o=n(1),s=n(11),l=n(0),c=n(9),u=n(19),d=n(32),p={};function f(e){switch(e){case 0:case 1:case 5:return 8;case 2:case 3:case 4:return 12}throw"_getFileHeaderSize("+e+") not handled"}p[l.Game.MP1_USA]=[{upper:87974,lower:87978},{upper:245782,lower:245790}],p[l.Game.MP1_JPN]=[{upper:87766,lower:87770},{upper:245554,lower:245562}],p[l.Game.MP2_USA]=[{upper:268006,lower:268014}],p[l.Game.MP3_USA]=[{upper:221598,lower:221606}];var h=function(){function e(){}return e.getROMOffset=function(){var t=c.romhandler.getDataView(),n=e.getPatchOffsets();if(!n)return null;var r=n[0],a=t.getUint16(r.upper)<<16,o=t.getUint16(r.lower),s=a|o;if(32768&o&&(s-=65536),i.$$log("MainFS.getROMOffset -> "+i.$$hex(s)),$$debug)for(var l=1;l<n.length;l++){var u=t.getUint16(n[l].upper)<<16,d=t.getUint16(n[l].lower);if(u!==a||d!==o)throw"MainFS.getROMOffset patch offset "+l+" seems wrong"}return s},e.setROMOffset=function(t,n){for(var r=new DataView(n),a=e.getPatchOffsets(),o=d.getRegSetUpperAndLower(t),s=o[0],l=o[1],c=0;c<a.length;c++)r.setUint16(a[c].upper,s),r.setUint16(a[c].lower,l);i.$$log("MainFS.setROMOffset -> "+i.$$hex(d.getRegSetAddress(s,l)))},e.getPatchOffsets=function(){return p[c.romhandler.getROMGame()]},e.get=function(e,t){return r[e][t].decompressed},e.has=function(e,t){return!!r[e][t]},e.read=function(t,n,r){var i=c.romhandler.getROMBuffer(),o=e.getROMOffset(),s=o+new DataView(i,o).getUint32(4*(1+t)),l=s+new DataView(i,s).getUint32(4*(1+n)),u=new DataView(i,l),d=u.getUint32(0),p=u.getUint32(4),h=l+f(p),m=new DataView(i,h),_={compressionType:p,decompressedSize:d,decompressed:a.decompress(p,m,d)};if($$debug&&d!==_.decompressed.byteLength)throw"MainFS Dir: "+t+", File: "+n+" decompressed size mismatch";if(r){var g=_.decompressed.compressedSize;_.compressed=i.slice(h,h+g)}return _},e.write=function(e,t,n){var a=r[e][t];if(a){if(n!==a.decompressed&&o.arrayBuffersEqual(n,a.decompressed))return}else i.$$log("Adding new file to MainFS: "+e+"/"+t),r[e][t]=a={compressionType:0};a.compressed&&(delete a.decompressedSize,delete a.compressed,a.compressionType=0),a.decompressed=n.slice(0)},e.clearCache=function(){r=null},e.extract=function(){var t,n;$$debug&&window.performance&&(t=performance.now());var a=e.getDirectoryCount();r=new Array(a);for(var o=0;o<a;o++){var s=e.getFileCount(o);r[o]=new Array(s);for(var l=0;l<s;l++)r[o][l]=e.read(o,l,!0)}return $$debug&&t&&(n=performance.now(),i.$$log("MainFS.extract() -> "+(n-t)+"ms")),r},e.extractAsync=function(){return new Promise(function(t){e.extract(),t()})},e.pack=function(t,n){void 0===n&&(n=0);var r=new DataView(t,n),i=e.getDirectoryCount();r.setUint32(0,i);for(var a=4,o=4+4*i,l=0;l<i;l++)r.setUint32(a,o),a+=4,o=e._writeDir(l,r,o),o=s.makeDivisibleBy(o,2);return o},e._writeDir=function(t,n,r){var i=e.getFileCount(t);n.setUint32(r,i);for(var a=r+4,o=r+4+4*i,l=0;l<i;l++)n.setUint32(a,o-r),a+=4,o=e._writeFile(t,l,n,o),o=s.makeDivisibleBy(o,2);return o},e._writeFile=function(e,t,n,i){var a=r[e][t],s=u.get(u.$setting.writeDecompressed);if(a){n.setUint32(i,a.decompressedSize||a.decompressed.byteLength);var l=s?0:a.compressionType;n.setUint32(i+4,l);d=i+8;12===f(l)&&(n.setUint32(i+8,a.decompressedSize||a.decompressed.byteLength),d+=4);var c=void 0;return c=s?a.decompressed:a.compressed||a.decompressed,o.copyRange(n,c,d,0,c.byteLength),d+c.byteLength}n.setUint32(i,0),n.setUint32(i+4,0);var d=i+8;return 12===f(0)&&(n.setUint32(i+8,0),d+=4),d},e.getDirectoryCount=function(){if(r)return r.length;var t=c.romhandler.getROMBuffer();return new DataView(t,e.getROMOffset()).getUint32(0)},e.getFileCount=function(t){if(r&&r[t])return r[t].length;var n=c.romhandler.getROMBuffer(),i=e.getROMOffset(),a=i+new DataView(n,i).getUint32(4*(1+t));return new DataView(n,a).getUint32(0)},e.getByteLength=function(){var e=r.length,t=u.get(u.$setting.writeDecompressed),n=0;n+=4,n+=4*e;for(var i=0;i<e;i++){var a=r[i].length;n+=4,n+=4*a;for(var o=0;o<a;o++){var l=r[i][o];l?(n+=f(t?0:l.compressionType),l.compressed&&!t?n+=l.compressed.byteLength:n+=l.decompressed.byteLength,n=s.makeDivisibleBy(n,2)):n+=f(0)}}return n},e}();t.mainfs=h},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(4),s=n(204);!function(e){e.uiAdvanced="ui.advanced",e.uiDebug="ui.debug",e.uiSkipValidation="ui.skipvalidation",e.uiAllowAllRoms="ui.allowallroms",e.uiShowRomBoards="ui.showromboards",e.writeBranding="write.branding",e.writeDecompressed="write.decompressed",e.limitModelFPS="models.limitfps",e.limitModelAnimations="models.limitAnimations",e.modelUseGLB="models.useGLB"}(a=t.$setting||(t.$setting={}));var l=[{name:"UI",type:"section"},{id:"ui.advanced",type:"checkbox",default:!1,name:"Advanced features",desc:"Enables infrequently used, potentially complicated, and developer features."},{id:"ui.debug",type:"checkbox",default:$$debug,name:"Debug features",advanced:!0,desc:"Enables debug output and UI that may aid development."},{id:"ui.skipvalidation",type:"checkbox",default:!1,name:"Skip Overwrite Validation",advanced:!0,desc:"Allow boards to be written regardless of warnings."},{id:"ui.showromboards",type:"checkbox",default:!1,name:"Show ROM Boards",advanced:!0,desc:"Show boards parsed from the ROM in the editor."},{id:"ui.allowallroms",type:"checkbox",default:!1,name:"Allow All ROMs",advanced:!0,desc:"Allows more than just the officially supported ROMs to attempt to load."},{name:"ROM",type:"section"},{id:"write.branding",type:"checkbox",default:!0,name:"Include branding",desc:"Adds the PartyPlanner64 logo to the game boot splashscreens."},{id:"write.decompressed",type:"checkbox",default:!1,name:"Leave ROM decompressed",advanced:!0,desc:"Leaves all files decompressed when saving a ROM, resulting in larger file size."},{name:"Model Viewer",type:"section"},{id:"models.limitfps",type:"checkbox",default:!0,name:"Limit FPS",desc:"Reduce the refresh rate for better performance."},{id:"models.limitAnimations",type:"checkbox",default:!0,name:"Limit animations",desc:"Limit animations to those in the same directory as the model."},{id:"models.useGLB",type:"checkbox",default:!1,name:"Use GLB container for glTF",desc:"Create a GLB container when exporting models to glTF."}];function c(e){var t=function(e){return l.find(function(t){return"section"!==t.type&&t.id===e})}(e);if(t&&"section"!==t.type)return t.default}var u=new(function(){function e(){s.defaults={expires:1/0},this._tempSettings={}}return e.prototype.getSetting=function(e){if(!s.enabled)return this._tempSettings.hasOwnProperty(e)?this._tempSettings[e]:this._tempSettings[e]=c(e);var t=s.get(e);return void 0===t?c(e):JSON.parse(t)},e.prototype.setSetting=function(e,t){s.enabled?s.set(e,JSON.stringify(t)):this._tempSettings[e]=t},e.prototype.reset=function(){l.forEach(function(e){"section"!==e.type&&e.id&&s.expire(e.id)})},e}());$$debug=u.getSetting(a.uiDebug),t.Settings=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onCheckChanged=function(e,n){!function(e,t){u.setSetting(e,t),"ui.debug"===e&&($$debug=t)}(e,n),t.setState({id:n})},t}return i(t,e),t.prototype.render=function(){var e,t=this,n=(e=l,u.getSetting(a.uiAdvanced)||(e=e.filter(function(e){return!e.advanced})),e).map(function(e){var n;switch(e.type){case"checkbox":var r=(n=e.id)?u.getSetting(n):"";return o.createElement(d,{id:e.id,name:e.name,desc:e.desc,key:e.id,value:r,onCheckChanged:t.onCheckChanged});case"section":return o.createElement("h3",{key:e.name},e.name)}});return o.createElement("div",{id:"settingsForm"},o.createElement("h2",null,"Settings"),n)},t}(o.Component);var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onToggled=function(){t.props.onCheckChanged(t.props.id,!t.props.value)},t}return i(t,e),t.prototype.render=function(){var e=this.props.id+"-main",t=this.props.id+"-desc";return o.createElement("div",{className:"checkboxSetting",onClick:this.onToggled},o.createElement("input",{type:"checkbox",className:"checkboxSettingChk",checked:this.props.value,onChange:this.onToggled,"aria-labelledby":e,"aria-describedby":t}),o.createElement("div",{className:"checkboxSettingLines"},o.createElement("span",{id:e,className:"checkboxSettingMain"},this.props.name),o.createElement("br",null),o.createElement("span",{id:t,className:"checkboxSettingDesc"},this.props.desc)))},t}(o.Component);t.get=function(e){return u.getSetting(e)},t.set=function(e,t){return u.setSetting(e,t)}},function(e,t,n){"use strict";var r=n(17),i=n(5),a=n(60),o=i.List,s=i.Map,l=i.OrderedSet,c=i.Record,u=i.Repeat,d=l(),p={parent:null,characterList:o(),data:s(),depth:0,key:"",text:"",type:"unstyled",children:o(),prevSibling:null,nextSibling:null},f=function(e,t){return e.getStyle()===t.getStyle()},h=function(e,t){return e.getEntity()===t.getEntity()},m=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=o(u(r.EMPTY,n.length))),e},_=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,m(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.getChildKeys=function(){return this.get("children")},t.prototype.getParentKey=function(){return this.get("parent")},t.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")},t.prototype.getNextSiblingKey=function(){return this.get("nextSibling")},t.prototype.findStyleRanges=function(e,t){a(this.getCharacterList(),f,e,t)},t.prototype.findEntityRanges=function(e,t){a(this.getCharacterList(),h,e,t)},t}(c(p));e.exports=_},function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(11),a=n(50),o=n(2),s=n(9),l=n(44),c=n(10);function u(e,t){for(var n=0;n<e.length;n++)switch(e[n]){case r.Game.MP1_USA:case r.Game.MP1_JPN:case r.Game.MP1_PAL:if(1===t)return!0;break;case r.Game.MP2_USA:case r.Game.MP2_JPN:case r.Game.MP2_PAL:if(2===t)return!0;break;case r.Game.MP3_USA:case r.Game.MP3_JPN:case r.Game.MP3_PAL:if(3===t)return!0}return!1}t.getEvent=function(e,t){return t&&t.events&&t.events[e]?l.createCustomEvent(t.events[e]):c.getEventFromLibrary(e)},t.createSpaceEvent=function(e,t){var n=Object.assign({id:e.id,activationType:e.activationType,executionType:e.executionType},t);return e.custom&&(n.custom=!0),n},t.parse=function(e,t){var n=s.romhandler.getROMGame(),r=c.getEventsInLibrary();for(var i in r){var a=r[i];if(a.parse&&-1!==a.supportedGames.indexOf(n)){var o=a.parse(e,t);if(o){if(a.fakeEvent)return!0;var l={id:i};return!0!==o&&(l.args=o),l}}}return!1},t.getAvailableEvents=function(){var e=[],t=c.getEventsInLibrary(),n=o.getCurrentBoard().game||1;for(var r in t){var i=t[r];u(i.supportedGames,n)&&!i.fakeEvent&&e.push(i)}return e},t.getCustomEvents=function(){var e=[],t=c.getEventsInLibrary();for(var n in t){var r=t[n];r.custom&&e.push(a.copyObject(r))}return e},t.write=function(e,t,n,r){var a,s=0,u=0;if(t.inlineArgs){s=t.inlineArgs.length,a=s,u=i.makeDivisibleBy(2*a,4);for(var d=new DataView(e,n.offset),p=0;p<s;p++){var f=2*p;d.setUint16(f,t.inlineArgs[p])}n.argsAddr=n.addr,n.addr+=u,n.offset+=u}var h,m=new DataView(e,n.offset);if(t.custom){var _=o.getBoardEventAsm(n.board,t.id);if(!_)throw new Error("A space had the "+t.id+" custom event, but its code wasn't in the board file");h=l.writeCustomEvent(m,t,n,_,r)}else h=c.getEventFromLibrary(t.id).write(m,t,n,r);if(!1===h)throw"Could not write ${event.id} for game ${info.gameVersion}";return t.inlineArgs&&(h[1]+=u),h},t.isUnsupported=function(e,t){return-1===e.supportedGames.indexOf(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createContext=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(11),a=n(1),o=n(0),s=n(9),l=n(27),c={};c[o.Game.MP1_USA]=[{upper:110190,lower:110198}],c[o.Game.MP1_JPN]=[{upper:109982,lower:109990}],c[o.Game.MP2_USA]=[{upper:119338,lower:119346},{upper:562006,lower:562014},{upper:562026,lower:562034}],function(e){function t(){var e=s.romhandler.getDataView(),t=n();if(!t)return null;var i=t[0];if(!i)return null;var a=e.getUint16(i.upper)<<16,o=e.getUint16(i.lower),l=a|o;if(32768&o&&(l-=65536),r.$$log("Strings.getROMOffset -> "+r.$$hex(l)),$$debug)for(var c=1;c<t.length;c++){var u=e.getUint16(t[c].upper)<<16,d=e.getUint16(t[c].lower);if(u!==a||d!==o)throw"Strings.getROMOffset patch offset "+c+" seems wrong"}return l}function n(){return c[s.romhandler.getROMGame()]}e.getROMOffset=t,e.setROMOffset=function(e,t){var i=new DataView(t),a=n(),o=(4294901760&e)>>>16,s=65535&e;32768&s&&(o+=1);for(var l=0;l<a.length;l++)i.setUint16(a[l].upper,o),i.setUint16(a[l].lower,s);r.$$log("Strings.setROMOffset -> "+r.$$hex(o<<16|s))},e.getPatchOffsets=n;var o,u=function(){function e(e){this.strs=this._extract(e)}return e.prototype._extract=function(e){for(var t=this._getStringCountFromView(e),n=new Array(t),r=0;r<t;r++)n[r]=this._readFromView(e,r);return n},e.prototype._getStringCountFromView=function(e){return e.getUint32(0)},e.prototype._readFromView=function(e,t){var n=this._getStringOffsetFromView(e,t),r=new DataView(e.buffer,e.byteOffset+n).getUint16(0);return e.buffer.slice(e.byteOffset+n+2,e.byteOffset+n+2+r)},e.prototype._getStringOffsetFromView=function(e,t){return e.getUint32(4*(1+t))},e.prototype.read=function(e,t){if(void 0===t&&(t=!1),e>=this.getStringCount())throw"Requesting non-existent string entry";var n=this.strs[e];if(t)return n;for(var r=new DataView(n),i="",a=0;a<n.byteLength;a++)i+=this._byteToStr(r.getUint8(a));return i},e.prototype._byteToStr=function(e){var t=l.getROMAdapter().getCharacterMap();return t.hasOwnProperty(e)?t[e]:String.fromCharCode(e)},e.prototype.write=function(e,t){this.strs[e]=t.slice(0)},e.prototype.getStringCount=function(){return this.strs.length},e.prototype.getByteLength=function(e){void 0===e&&(e=!1);var t=0,n=this.strs.length;t+=4,t+=4*n;for(var r=0;r<n;r++)t+=2,t+=this.strs[r].byteLength,t=i.makeDivisibleBy(t,2);return e&&(t+=t/8+16),t},e.prototype.pack=function(e,t){void 0===t&&(t=0);var n=new DataView(e,t),r=this.getStringCount();n.setUint32(0,r);for(var a=4,o=4+4*r,s=0;s<r;s++)n.setUint32(a,o),a+=4,o=this._packStr(s,n,o),o=i.makeDivisibleBy(o,2);return o},e.prototype._packStr=function(e,t,n){var r=this.strs[e];return t.setUint16(n,r.byteLength),a.copyRange(t,r,n+2,0,r.byteLength),n+2+r.byteLength},e}();function d(){var e=s.romhandler.getDataView(t());return o=new u(e)}e.StringTable=u,e._strToBytes=function(e){for(var t=l.getROMAdapter().getCharacterMap(),n=[],r=[0,e.length],i=r[0],a=r[1];i<a;){var o=0,s=void 0;for(var c in t)if(t.hasOwnProperty(c)){var u=t[c];e.substr(i,u.length)===u&&u.length>o&&(o=u.length,s=c)}0===o&&(o=1,s=e.charCodeAt(i)),"string"==typeof s&&(s=parseInt(s)),n.push(s),i+=o}return n},e.extract=d,e.extractAsync=function(){return new Promise(function(e,t){d(),e()})},e.pack=function(e,t){return void 0===t&&(t=0),o.pack(e,t)},e.read=function(e,t){return void 0===t&&(t=!1),o.read(e,t)},e.write=function(e,t){o.write(e,t)},e.clear=function(){o=null},e.getStringCount=function(){return o.getStringCount()},e.getByteLength=function(){return o.getByteLength()}}(t.strings||(t.strings={}))},function(e,t,n){"use strict";var r=n(272),i=n(275),a=n(276),o=n(277);function s(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var a=n.slice(e.length);return!!t&&(a=r?r(a):a,i.contains(a,t))}function l(e){return"Windows"===r.platformName?e.replace(/^\s*NT/,""):e}var c={isBrowser:function(e){return s(r.browserName,r.browserFullVersion,e)},isBrowserArchitecture:function(e){return s(r.browserArchitecture,null,e)},isDevice:function(e){return s(r.deviceName,null,e)},isEngine:function(e){return s(r.engineName,r.engineVersion,e)},isPlatform:function(e){return s(r.platformName,r.platformFullVersion,e,l)},isPlatformArchitecture:function(e){return s(r.platformArchitecture,null,e)}};e.exports=a(c,o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(199),i=n(229),a=n(230),o=n(9);function s(e){switch(e){case 1:return r.MP1;case 2:return i.MP2;case 3:return a.MP3}return null}t.getROMAdapter=function(){var e=o.romhandler.getGameVersion();return e?s(e):null},t.getAdapter=s},function(module,exports,__webpack_require__){var factory;"undefined"!=typeof self&&self,factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./src/bitstrings.js":
/*!***************************!*\
  !*** ./src/bitstrings.js ***!
  \***************************/
/*! exports provided: isBinaryLiteral, compareBits, makeBitMaskFromString, makeBitMask, padBitString */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isBinaryLiteral", function() { return isBinaryLiteral; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareBits", function() { return compareBits; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeBitMaskFromString", function() { return makeBitMaskFromString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeBitMask", function() { return makeBitMask; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "padBitString", function() { return padBitString; });\nfunction isBinaryLiteral(str) {\n  return str[0] === "0" || str[0] === "1"; // Checking first char is enough for now\n}\n\nfunction compareBits(number, bitString, bitOffset) {\n  let shifted = (number >>> bitOffset) & makeBitMask(bitString.length);\n  let mask = makeBitMaskFromString(bitString);\n  return shifted === mask;\n}\n\nfunction makeBitMaskFromString(bitString) {\n  let mask = 0;\n  for (var i = 0; i < bitString.length; i++) {\n    let bit = bitString[i] === "1" ? 1 : 0;\n    mask <<= 1;\n    mask = mask | bit;\n  }\n  return mask;\n}\n\nfunction makeBitMask(len) {\n  if (len <= 0)\n    throw new Error(`makeBitMask cannot make mask of length ${len}`);\n\n  let mask = 1;\n  while (--len) {\n    mask <<= 1;\n    mask = mask | 1;\n  }\n  return mask;\n}\n\nfunction padBitString(str, minLen) {\n  while (str.length < minLen) {\n    str = "0" + str;\n  }\n  return str;\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/bitstrings.js?')},"./src/immediates.js":
/*!***************************!*\
  !*** ./src/immediates.js ***!
  \***************************/
/*! exports provided: parseImmediate, formatImmediate, makeInt16, getImmFormatDetails */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseImmediate", function() { return parseImmediate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatImmediate", function() { return formatImmediate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeInt16", function() { return makeInt16; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getImmFormatDetails", function() { return getImmFormatDetails; });\nfunction parseImmediate(immArr, maxBits, signed, shift) {\n  let [neg, base, num] = immArr;\n  base = base.toLowerCase();\n\n  let value;\n  if (base === "b")\n    value = parseInt(num, 2);\n  else if (base === "o")\n    value = parseInt(num, 8);\n  else if (base === "x")\n    value = parseInt(num, 16);\n  else\n    value = parseInt(num, 10);\n\n  if (isNaN(value)) {\n    return value; // Let the caller decide what to do with NaN.\n  }\n\n  if (shift) {\n    value >>>= shift;\n  }\n\n  if (maxBits === 16) {\n    if (signed) {\n      value = makeInt16(value);\n    }\n  }\n\n  if (neg)\n    value = -value;\n\n  return value;\n}\n\nfunction formatImmediate(value, maxBits) {\n  if (maxBits === 16) {\n    value = (new Uint16Array([value]))[0];\n  }\n\n  return value;\n}\n\nfunction makeInt16(value) {\n  return (new Int16Array([value]))[0];\n}\n\nfunction getImmFormatDetails(formatVal) {\n  // Remove optional indicator\n  if (formatVal[formatVal.length - 1] === "?")\n    formatVal = formatVal.substring(0, formatVal.length - 1);\n\n  if (formatVal.indexOf("int") === -1) {\n    if (formatVal.substr(0, 2) === "cc") {\n      return {\n        signed: false,\n        bits: 4,\n        shift: false,\n      };\n    }\n\n    return null; // Not an immediate\n  }\n\n  let shift = 0;\n  const shiftIndex = formatVal.indexOf("shift");\n  if (shiftIndex > 0)\n    shift = formatVal.substr(shiftIndex).match(/\\d+/g);\n\n  return {\n    signed: formatVal[0] !== "u",\n    bits: parseInt(formatVal.match(/\\d+/g)),\n    shift: shift,\n  };\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/immediates.js?')},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: parse, print */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse */ "./src/parse.js");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return _parse__WEBPACK_IMPORTED_MODULE_0__["parse"]; });\n\n/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./print */ "./src/print.js");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "print", function() { return _print__WEBPACK_IMPORTED_MODULE_1__["print"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://MIPSInst/./src/index.js?')},"./src/opcodes.js":
/*!************************!*\
  !*** ./src/opcodes.js ***!
  \************************/
/*! exports provided: getOpcodeDetails, getValueBitLength, findMatch */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOpcodeDetails", function() { return getOpcodeDetails; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getValueBitLength", function() { return getValueBitLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findMatch", function() { return findMatch; });\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regs */ "./src/regs.js");\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bitstrings */ "./src/bitstrings.js");\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./immediates */ "./src/immediates.js");\n\n\n\n\nconst rs = "rs";\nconst rt = "rt";\nconst rd = "rd";\nconst fs = "fs";\nconst ft = "ft";\nconst fd = "fd";\nconst fr = "fr";\nconst sa = "uint5";\nconst uint5 = "uint5";\nconst uint10 = "uint10";\nconst int16 = "int16";\nconst uint16 = "uint16";\nconst uint20 = "uint20";\nconst uint26 = "uint26";\nconst uint26shift2 = "uint26shift2";\nconst cc = "cc";\nconst cond = "cond";\nconst fmt = "fmt";\nconst fmt3 = "fmt3";\n\nfunction getOpcodeDetails(opcode) {\n  return opcodeDetails[opcode.toLowerCase()];\n}\n\nfunction getValueBitLength(str) {\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["isBinaryLiteral"])(str))\n    return str.length;\n\n  str = str.replace("?", "");\n  switch (str) {\n    case "cc":\n    case "fmt3":\n      return 3;\n\n    case "cond":\n      return 4;\n\n    case "rs":\n    case "rt":\n    case "rd":\n    case "fs":\n    case "ft":\n    case "fd":\n    case "fr":\n    case "sa":\n    case "fmt":\n      return 5;\n  }\n\n  const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__["getImmFormatDetails"])(str);\n  if (immDetails) {\n    return immDetails.bits;\n  }\n\n  throw new Error(`Unrecongized format value: ${str}`);\n}\n\n// returns name\nfunction findMatch(inst) {\n  let bestMatch = "";\n  let bestMatchScore = 0;\n  for (let opName in opcodeDetails) {\n    const format = opcodeDetails[opName].format;\n    const fmts = opcodeDetails[opName].fmts;\n    const score = formatMatches(inst, format, fmts);\n    if (score > bestMatchScore) {\n      bestMatch = opName;\n      bestMatchScore = score;\n    }\n  }\n\n  return bestMatch;\n}\n\n// Returns number of literal bits matched, if the overall format matches.\nfunction formatMatches(number, format, fmts) {\n  let score = 0;\n  let tempScore;\n  let bitOffset = 0;\n  for (let i = format.length - 1; i >= 0; i--) {\n    let bitLength;\n    let piece = format[i];\n    if (Array.isArray(piece)) {\n      let matchedOne = false;\n      for (let j = 0; j < piece.length; j++) {\n        tempScore = checkPiece(piece[j], number, bitOffset, fmts);\n        if (tempScore >= 0) {\n          matchedOne = true;\n          score += tempScore;\n          bitLength = getValueBitLength(piece[j]);\n          break; // j\n        }\n      }\n      if (!matchedOne)\n        return 0;\n    }\n    else {\n      tempScore = checkPiece(piece, number, bitOffset, fmts);\n      if (tempScore >= 0) {\n        score += tempScore;\n        bitLength = getValueBitLength(piece);\n      }\n      else {\n        return 0;\n      }\n    }\n\n    bitOffset += bitLength;\n  }\n\n  return score;\n}\n\nfunction checkPiece(piece, number, bitOffset, fmts) {\n  if (!Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["isBinaryLiteral"])(piece)) {\n    if (piece === fmt) {\n      for (let i = 0; i < fmts.length; i++) {\n        let fmtBitString = Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["padBitString"])(Object(_regs__WEBPACK_IMPORTED_MODULE_0__["getFmtBits"])(fmts[i]).toString(2), 5);\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["compareBits"])(number, fmtBitString, bitOffset))\n          return fmtBitString.length;\n      }\n      return -1;\n    }\n\n    if (piece === fmt3) {\n      for (let i = 0; i < fmts.length; i++) {\n        let fmtBitString = Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["padBitString"])(Object(_regs__WEBPACK_IMPORTED_MODULE_0__["getFmt3Bits"])(fmts[i]).toString(2), 3);\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["compareBits"])(number, fmtBitString, bitOffset))\n          return fmtBitString.length;\n      }\n      return -1;\n    }\n\n    return 0; // non-literal contributes nothing\n  }\n\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__["compareBits"])(number, piece, bitOffset))\n    return piece.length;\n\n  return -1;\n}\n\nconst opcodeDetails = {\n  "abs.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "000101"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  add: {\n    format: ["000000", rs, rt, rd, "00000100000"],\n    display: [rd, rs, rt],\n  },\n  "add.fmt": {\n    format: ["010001", fmt, ft, fs, fd, "000000"],\n    fmts: ["S", "D"],\n    display: [fd, fs, ft],\n  },\n  addi: {\n    format: ["001000", rs, rt, int16],\n    display: [rt, rs, int16],\n  },\n  addiu: {\n    format: ["001001", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n  addu: {\n    format: ["000000", rs, rt, rd, "00000100001"],\n    display: [rd, rs, rt],\n  },\n  and: {\n    format: ["000000", rs, rt, rd, "00000100100"],\n    display: [rd, rs, rt],\n  },\n  andi: {\n    format: ["001100", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n  bc1f: {\n    format: ["010001", "01000", [cc, "000"], "00", int16], // TODO shifting?\n    display: ["cc?", int16], // offset\n  },\n  bc1fl: {\n    format: ["010001", "01000", [cc, "000"], "10", int16],\n    display: ["cc?", int16], // offset\n  },\n  bc1t: {\n    format: ["010001", "01000", [cc, "000"], "01", int16],\n    display: ["cc?", int16], // offset\n  },\n  bc1tl: {\n    format: ["010001", "01000", [cc, "000"], "11", int16],\n    display: ["cc?", int16], // offset\n  },\n  beq: {\n    format: ["000100", rs, rt, uint16],\n    display: [rs, rt, uint16], // offset\n  },\n  beql: {\n    format: ["010100", rs, rt, uint16],\n    display: [rs, rt, uint16], // offset\n  },\n  bgez: {\n    format: ["000001", rs, "00001", uint16],\n    display: [rs, uint16], // offset\n  },\n  bgezal: {\n    format: ["000001", rs, "10001", uint16],\n    display: [rs, uint16], // offset\n  },\n  bgezall: {\n    format: ["000001", rs, "10011", uint16],\n    display: [rs, uint16], // offset\n  },\n  bgezl: {\n    format: ["000001", rs, "00011", uint16],\n    display: [rs, uint16], // offset\n  },\n  bgtz: {\n    format: ["000111", rs, "00000", uint16],\n    display: [rs, uint16], // offset\n  },\n  bgtzl: {\n    format: ["010111", rs, "00000", uint16],\n    display: [rs, uint16], // offset\n  },\n  blez: {\n    format: ["000110", rs, "00000", uint16],\n    display: [rs, uint16], // offset\n  },\n  blezl: {\n    format: ["010110", rs, "00000", uint16],\n    display: [rs, uint16], // offset\n  },\n  bltz: {\n    format: ["000001", rs, "00000", uint16],\n    display: [rs, uint16], // offset\n  },\n  bltzal: {\n    format: ["000001", rs, "10000", uint16],\n    display: [rs, uint16], // offset\n  },\n  bltzall: {\n    format: ["000001", rs, "10010", uint16],\n    display: [rs, uint16], // offset\n  },\n  bltzl: {\n    format: ["000001", rs, "00010", uint16],\n    display: [rs, uint16], // offset\n  },\n  bne: {\n    format: ["000101", rs, rt, uint16],\n    display: [rs, rt, uint16], // offset\n  },\n  bnel: {\n    format: ["010101", rs, rt, uint16],\n    display: [rs, rt, uint16], // offset\n  },\n  break: {\n    format: ["000000", [uint20, "00000000000000000000"], "001101"],\n    display: ["uint20?"],\n  },\n  "c.cond.fmt": {\n    format: ["010001", fmt, ft, fs, [cc, "000"], "00", "11", cond],\n    fmts: ["S", "D"],\n    display: ["cc?", fs, ft],\n  },\n  "ceil.l.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001010"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "ceil.w.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001110"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  cfc1: {\n    format: ["010001", "00010", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  ctc1: {\n    format: ["010001", "00110", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  cop0: {\n    format: ["010000", uint26],\n    display: [uint26], // cop_fun\n  },\n  cop1: {\n    format: ["010001", uint26],\n    display: [uint26], // cop_fun\n  },\n  cop2: {\n    format: ["010010", uint26],\n    display: [uint26], // cop_fun\n  },\n  cop3: {\n    format: ["010011", uint26],\n    display: [uint26], // cop_fun\n  },\n  "cvt.d.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "100001"],\n    fmts: ["S", "W", "L"],\n    display: [fd, fs],\n  },\n  "cvt.l.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "100101"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "cvt.s.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "100000"],\n    fmts: ["D", "W", "L"],\n    display: [fd, fs],\n  },\n  "cvt.w.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "100100"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  dadd: {\n    format: ["000000", rs, rt, rd, "00000101100"],\n    display: [rd, rs, rt],\n  },\n  daddi: {\n    format: ["011000", rs, rt, int16],\n    display: [rt, rs, int16],\n  },\n  daddiu: {\n    format: ["011001", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n  daddu: {\n    format: ["000000", rs, rt, rd, "00000101101"],\n    display: [rd, rs, rt],\n  },\n  ddiv: {\n    format: ["000000", rs, rt, "0000000000011110"],\n    display: [rs, rt],\n  },\n  ddivu: {\n    format: ["000000", rs, rt, "0000000000011111"],\n    display: [rs, rt],\n  },\n  div: {\n    format: ["000000", rs, rt, "0000000000011010"],\n    display: [rs, rt],\n  },\n  "div.fmt": {\n    format: ["010001", fmt, ft, fs, fd, "000011"],\n    fmts: ["S", "D"],\n    display: [fd, fs, ft],\n  },\n  divu: {\n    format: ["000000", rs, rt, "0000000000011011"],\n    display: [rs, rt],\n  },\n  dmfc1: {\n    format: ["010001", "00001", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  dmult: {\n    format: ["000000", rs, rt, "0000000000011100"],\n    display: [rs, rt],\n  },\n  dmultu: {\n    format: ["000000", rs, rt, "0000000000011101"],\n    display: [rs, rt],\n  },\n  dmtc1: {\n    format: ["010001", "00101", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  dsll: {\n    format: ["00000000000", rt, rd, sa, "111000"],\n    display: [rd, rt, sa],\n  },\n  dsll32: {\n    format: ["00000000000", rt, rd, sa, "111100"],\n    display: [rd, rt, sa],\n  },\n  dsllv: {\n    format: ["000000", rs, rt, rd, "00000010100"],\n    display: [rd, rt, rs],\n  },\n  dsra: {\n    format: ["00000000000", rt, rd, sa, "111011"],\n    display: [rd, rt, sa],\n  },\n  dsra32: {\n    format: ["00000000000", rt, rd, sa, "111111"],\n    display: [rd, rt, sa],\n  },\n  dsrav: {\n    format: ["000000", rs, rt, rd, "00000010111"],\n    display: [rd, rt, rs],\n  },\n  dsrl: {\n    format: ["00000000000", rt, rd, sa, "111010"],\n    display: [rd, rt, sa],\n  },\n  dsrl32: {\n    format: ["00000000000", rt, rd, sa, "111110"],\n    display: [rd, rt, sa],\n  },\n  dsrlv: {\n    format: ["000000", rs, rt, rd, "00000010110"],\n    display: [rd, rt, rs],\n  },\n  dsub: {\n    format: ["000000", rs, rt, rd, "00000101110"],\n    display: [rd, rs, rt],\n  },\n  dsubu: {\n    format: ["000000", rs, rt, rd, "00000101111"],\n    display: [rd, rs, rt],\n  },\n  "floor.l.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001011"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "floor.w.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001111"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  j: {\n    format: ["000010", uint26shift2],\n    display: [uint26shift2],\n  },\n  jal: {\n    format: ["000011", uint26shift2],\n    display: [uint26shift2],\n  },\n  jalr: {\n    format: ["000000", rs, "00000", [rd, "11111"], "00000", "001001"],\n    display: ["rd?", rs],\n  },\n  jr: {\n    format: ["000000", rs, "000000000000000", "001000"],\n    display: [rs],\n  },\n  lb: {\n    format: ["100000", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lbu: {\n    format: ["100100", rs, rt, uint16],\n    display: [rt, uint16, "(", rs, ")"], // offset\n  },\n  ld: {\n    format: ["110111", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  ldc1: {\n    format: ["110101", rs, ft, int16],\n    display: [ft, int16, "(", rs, ")"], // offset\n  },\n  ldc2: {\n    format: ["110110", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  ldl: {\n    format: ["011010", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  ldr: {\n    format: ["011011", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  ldxc1: {\n    format: ["010011", rs, rt, "00000", fd, "000001"],\n    display: [fd, rt, "(", rs, ")"], // offset\n  },\n  lh: {\n    format: ["100001", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lhu: {\n    format: ["100101", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  ll: {\n    format: ["110000", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lld: {\n    format: ["110100", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lui: {\n    format: ["001111", "00000", rt, uint16],\n    display: [rt, uint16],\n  },\n  lw: {\n    format: ["100011", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwc1: {\n    format: ["110001", rs, ft, int16],\n    display: [ft, int16, "(", rs, ")"], // offset\n  },\n  lwc2: {\n    format: ["110010", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwc3: {\n    format: ["110011" ,rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwl: {\n    format: ["100010", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwr: {\n    format: ["100110", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwu: {\n    format: ["100111", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  lwxc1: {\n    format: ["010011", rs, rt, "00000", fd, "000000"],\n    display: [fd, rt, "(", rs, ")"],\n  },\n  "madd.fmt": {\n    format: ["010011", fr, ft, fs, fd, "100", fmt3],\n    fmts: ["S", "D"],\n    display: [fd, fr, fs, ft],\n  },\n  mfc1: {\n    format: ["010001", "00000", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  mfhi: {\n    format: ["000000", "0000000000", rd, "00000", "010000"],\n    display: [rd],\n  },\n  mflo: {\n    format: ["000000", "0000000000", rd, "00000", "010010"],\n    display: [rd],\n  },\n  "mov.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "000110"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  movf: {\n    format: ["000000", rs, cc, "00", rd, "00000", "000001"],\n    display: [rd, rs, cc],\n  },\n  "movf.fmt": {\n    format: ["010001", fmt, cc, "00", fs, fd, "010001"],\n    fmts: ["S", "D"],\n    display: [fd, fs, cc],\n  },\n  movn: {\n    format: ["000000", rs, rt, rd, "00000", "001011"],\n    display: [rd, rs, rt],\n  },\n  "movn.fmt": {\n    format: ["010001", fmt, rt, fs, fd, "010011"],\n    fmts: ["S", "D"],\n    display: [fd, fs, rt],\n  },\n  movt: {\n    format: ["000000", rs, cc, "01", rd, "00000", "000001"],\n    display: [rd, rs, cc],\n  },\n  "movt.fmt": {\n    format: ["010001", fmt, cc, "01", fs, fd, "010001"],\n    fmts: ["S", "D"],\n    display: [fd, fs, cc],\n  },\n  movz: {\n    format: ["000000", rs, rt, rd, "00000", "001010"],\n    display: [rd, rs, rt],\n  },\n  "movz.fmt": {\n    format: ["010001", fmt, rt, fs, fd, "010010"],\n    fmts: ["S", "D"],\n    display: [fd, fs, rt],\n  },\n  "msub.fmt": {\n    format: ["010011", fr, ft, fs, fd, "101", fmt3],\n    fmts: ["S", "D"],\n    display: [fd, fr, fs, ft],\n  },\n  mtc1: {\n    format: ["010001", "00100", rt, fs, "00000000000"],\n    display: [rt, fs],\n  },\n  mthi: {\n    format: ["000000", rs, "000000000000000", "010001"],\n    display: [rs],\n  },\n  mtlo: {\n    format: ["000000", rs, "000000000000000", "010011"],\n    display: [rs],\n  },\n  "mul.fmt": {\n    format: ["010001", fmt, ft, fs, fd, "000010"],\n    fmts: ["S", "D"],\n    display: [fd, fs, ft],\n  },\n  mult: {\n    format: ["000000", rs, rt, "0000000000", "011000"],\n    display: [rs, rt],\n  },\n  multu: {\n    format: ["000000", rs, rt, "0000000000", "011001"],\n    display: [rs, rt],\n  },\n  "neg.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "000111"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "nmadd.fmt": {\n    format: ["010011", fr, ft, fs, fd, "110", fmt3],\n    fmts: ["S", "D"],\n    display: [fd, fr, fs, ft],\n  },\n  "nmsub.fmt": {\n    format: ["010011", fr, ft, fs, fd, "111", fmt3],\n    fmts: ["S", "D"],\n    display: [fd, fr, fs, ft],\n  },\n  nop: {\n    format: ["00000000000000000000000000000000"],\n    display: [],\n  },\n  nor: {\n    format: ["000000", rs, rt, rd, "00000", "100111"],\n    display: [rd, rs, rt],\n  },\n  or: {\n    format: ["000000", rs, rt, rd, "00000", "100101"],\n    display: [rd, rs, rt],\n  },\n  ori: {\n    format: ["001101", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n  pref: {\n    format: ["110011", rs, uint5, int16],\n    display: [uint5, int16, "(", rs, ")"], // hint, offset, base\n  },\n  prefx: {\n    format: ["010011", rs, rt, uint5, "00000", "001111"],\n    display: [uint5, rt, "(", rs, ")"], // hint, index, base\n  },\n  "recip.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "010101"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "round.l.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001000"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "round.w.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001100"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "rsqrt.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "010110"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  sb: {\n    format: ["101000", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sc: {\n    format: ["111000", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  scd: {\n    format: ["111100", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sd: {\n    format: ["111111", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sdc1: {\n    format: ["111101", rs, ft, int16],\n    display: [ft, int16, "(", rs, ")"], // offset\n  },\n  sdc2: {\n    format: ["111110", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sdl: {\n    format: ["101100", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sdr: {\n    format: ["101101", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sdxc1: {\n    format: ["010011", rs, uint5, fs, "00000", "001001"],\n    display: [fs, uint5, "(", rs, ")"],\n  },\n  sh: {\n    format: ["101001", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"], // offset\n  },\n  sll: {\n    format: ["000000", "00000", rt, rd, sa, "000000"],\n    display: [rd, rt, sa],\n  },\n  sllv: {\n    format: ["000000", rs, rt, rd, "00000", "000100"],\n    display: [rd, rt, rs],\n  },\n  slt: {\n    format: ["000000", rs, rt, rd, "00000", "101010"],\n    display: [rd, rs, rt],\n  },\n  slti: {\n    format: ["001010", rs, rt, int16],\n    display: [rt, rs, int16],\n  },\n  sltiu: {\n    format: ["001011", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n  sltu: {\n    format: ["000000", rs, rt, rd, "00000", "101011"],\n    display: [rd, rs, rt],\n  },\n  "sqrt.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "000100"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  sra: {\n    format: ["000000", "00000", rt, rd, sa, "000011"],\n    display: [rd, rt, sa],\n  },\n  srav: {\n    format: ["000000", rs, rt, rd, "00000", "000111"],\n    display: [rd, rt, rs],\n  },\n  srl: {\n    format: ["000000", "00000", rt, rd, sa, "000010"],\n    display: [rd, rt, sa],\n  },\n  srlv: {\n    format: ["000000", rs, rt, rd, "00000", "000110"],\n    display: [rd, rt, rs],\n  },\n  sub: {\n    format: ["000000", rs, rt, rd, "00000", "100010"],\n    display: [rd, rs, rt],\n  },\n  "sub.fmt": {\n    format: ["010001", fmt, ft, fs, fd, "000001"],\n    fmts: ["S", "D"],\n    display: [fd, fs, ft],\n  },\n  subu: {\n    format: ["000000", rs, rt, rd, "00000", "100011"],\n    display: [rd, rs, rt],\n  },\n  sw: {\n    format: ["101011", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"],\n  },\n  swc1: {\n    format: ["111001", rs, ft, int16],\n    display: [ft, int16, "(", rs, ")"],\n  },\n  swc2: {\n    format: ["111010", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"],\n  },\n  swc3: {\n    format: ["111011", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"],\n  },\n  swl: {\n    format: ["101010", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"],\n  },\n  swr: {\n    format: ["101110", rs, rt, int16],\n    display: [rt, int16, "(", rs, ")"],\n  },\n  swxc1: {\n    format: ["010011", rs, uint5, fs, "00000", "001000"],\n    display: [fs, uint5, "(", rs, ")"],\n  },\n  sync: {\n    format: ["000000", "000000000000000", "00000", "001111"],\n    display: [],\n  },\n  syscall: {\n    format: ["000000", [uint20, "00000000000000000000"], "001100"],\n    display: [],\n  },\n  teq: {\n    format: ["000000", rs, rt, uint10, "110100"],\n    display: [rs, rt],\n  },\n  teqi: {\n    format: ["000001", rs, "01100", int16],\n    display: [rs, int16],\n  },\n  tge: {\n    format: ["000000", rs, rt, uint10, "110000"],\n    display: [rs, rt],\n  },\n  tgei: {\n    format: ["000001", rs, "01000", int16],\n    display: [rs, int16],\n  },\n  tgeiu: {\n    format: ["000001", rs, "01001", uint16],\n    display: [rs, uint16],\n  },\n  tgeu: {\n    format: ["000000", rs, rt, uint10, "110001"],\n    display: [rs, rt],\n  },\n  tlt: {\n    format: ["000000", rs, rt, uint10, "110010"],\n    display: [rs, rt],\n  },\n  tlti: {\n    format: ["000001", rs, "01010", int16],\n    display: [rs, int16],\n  },\n  tltiu: {\n    format: ["000001", rs, "01011", uint16],\n    display: [rs, uint16],\n  },\n  tltu: {\n    format: ["000000", rs, rt, uint10, "110011"],\n    display: [rs, rt],\n  },\n  tne: {\n    format: ["000000", rs, rt, uint10, "110110"],\n    display: [rs, rt],\n  },\n  tnei: {\n    format: ["000001", rs, "01110", int16],\n    display: [rs, int16],\n  },\n  "trunc.l.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001001"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  "trunc.w.fmt": {\n    format: ["010001", fmt, "00000", fs, fd, "001101"],\n    fmts: ["S", "D"],\n    display: [fd, fs],\n  },\n  xor: {\n    format: ["000000", rs, rt, rd, "00000", "100110"],\n    display: [rd, rs, rt],\n  },\n  xori: {\n    format: ["001110", rs, rt, uint16],\n    display: [rt, rs, uint16],\n  },\n};\n\n\n//# sourceURL=webpack://MIPSInst/./src/opcodes.js?')},"./src/parse.js":
/*!**********************!*\
  !*** ./src/parse.js ***!
  \**********************/
/*! exports provided: parse */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return parse; });\n/* harmony import */ var _opcodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./opcodes */ "./src/opcodes.js");\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./immediates */ "./src/immediates.js");\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./regs */ "./src/regs.js");\n/* harmony import */ var _regex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./regex */ "./src/regex.js");\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bitstrings */ "./src/bitstrings.js");\n\n\n\n\n\n\n/**\n * Parses a string MIPS instruction, returning numeric machine code.\n *\n * With the `intermediate` option, this can also be used as a convenient base\n * for an assembler. The object output with `intermediate` can be manipulated\n * prior to calling `parse` with it again.\n * @param {String|Array|Object} value MIPS instruction, or intermediate object format.\n * @param {Object} opts Behavior options\n * @param {Boolean} opts.intermediate: Output an object intermediate format instead of a number\n * @returns {Number|Array|Object} Returns a numeric representation of the given\n * MIPS instruction string.\n * If multiple values are given (array) then multiple values are returned.\n * When the `intermediate` option is passed, the return type is an object.\n */\nfunction parse(value, opts) {\n  opts = _getFinalOpts(opts);\n\n  if (Array.isArray(value)) {\n    return value.map(s => _parse(s, opts));\n  }\n  if (typeof value === "object") {\n    return _parse(value, opts);\n  }\n  if (typeof value === "string") {\n    const values = value.split(/\\r?\\n/).filter(v => !!(v.trim()));\n    if (values.length === 1)\n      return _parse(values[0], opts);\n    else\n      return values.map(s => _parse(s, opts));\n  }\n\n  throw new Error("Unexpected input to parse. Pass a string or array of strings.");\n}\n\nfunction _getFinalOpts(givenOpts) {\n  return Object.assign({\n    intermediate: false,\n  }, givenOpts);\n}\n\nfunction _parse(value, opts) {\n  let opcode, opcodeObj, values;\n  if (typeof value === "string") {\n    opcode = _regex__WEBPACK_IMPORTED_MODULE_3__["getOpcode"](value);\n    if (!opcode)\n      throw new Error(`Could not parse opcode from ${value}`);\n\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getOpcodeDetails"])(opcode);\n    if (!opcodeObj)\n      throw new Error(`Opcode ${opcode} was not recognized`);\n\n    values = _parseValues(opcode, opcodeObj, value);\n  }\n  else if (typeof value === "object") {\n    opcode = _regex__WEBPACK_IMPORTED_MODULE_3__["getOpcode"](value.op);\n    if (!opcode)\n      throw new Error("Object input to parse did not contain \'op\'");\n\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getOpcodeDetails"])(opcode);\n    if (!opcodeObj)\n      throw new Error(`Opcode ${opcode} was not recognized`);\n\n    values = value;\n  }\n\n  if (opts.intermediate)\n    return values;\n\n  return bitsFromFormat(opcodeObj.format, values);\n}\n\nfunction _parseValues(opcode, opcodeObj, value) {\n  let regex = _regex__WEBPACK_IMPORTED_MODULE_3__["makeRegexForOpcode"](opcode, opcodeObj);\n  let match = regex.exec(value);\n  if (!match)\n    throw new Error(`Could not parse instruction: ${value}`);\n\n  let values = {\n    op: opcode\n  };\n\n  if (opcode.indexOf(".fmt") !== -1 || opcode.indexOf(".cond") !== -1) {\n    determineOpcodeValues(match[1], opcode, opcodeObj.fmts, opcodeObj.format, values);\n  }\n\n  const display = opcodeObj.display;\n  let matchIndex = 2; // 0 is whole match, 1 is opcode - skip both\n  for (let i = 0; i < display.length; i++, matchIndex++) {\n    const parsedVal = match[matchIndex];\n    let displayEntry = display[i];\n\n    const optional = displayEntry.endsWith("?");\n    if (optional) {\n      displayEntry = displayEntry.replace("?", "");\n    }\n\n    switch (displayEntry) {\n      case "(":\n      case ")":\n        matchIndex--; // Eh\n        continue;\n\n      case "rs":\n      case "rd":\n      case "rt": {\n        const tryReg = Object(_regs__WEBPACK_IMPORTED_MODULE_2__["getRegBits"])(parsedVal);\n        if (tryReg === undefined) {\n          if (optional)\n            continue;\n\n          throw new Error(`Unrecognized ${displayEntry} register ${parsedVal}`);\n        }\n        values[displayEntry] = tryReg;\n        continue;\n      }\n\n      case "fs":\n      case "ft":\n      case "fd":\n      case "fr":\n        values[displayEntry] = parseInt(parsedVal);\n        if (isNaN(values[displayEntry]))\n          throw new Error(`Unrecognized ${displayEntry} register ${parsedVal}`);\n        continue;\n    }\n\n    const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_1__["getImmFormatDetails"])(displayEntry);\n    if (immDetails) {\n      let value;\n      const immPieces = [match[matchIndex], match[matchIndex + 1], match[matchIndex + 2]];\n\n      if (!optional || immPieces[2]) {\n        value = Object(_immediates__WEBPACK_IMPORTED_MODULE_1__["parseImmediate"])(immPieces, immDetails.bits, immDetails.signed, immDetails.shift);\n        if (isNaN(value)) {\n          throw new Error(`Could not parse immediate ${immPieces.join("")}`);\n        }\n        values[displayEntry] = value;\n      }\n\n      matchIndex += 2;\n\n      continue;\n    }\n\n    throw new Error(`Unrecognized opcode display entry ${displayEntry}`);\n  }\n\n  return values;\n}\n\nfunction bitsFromFormat(format, values) {\n  let output = 0;\n  let bitOffset = 0;\n  for (let i = 0; i < format.length; i++) {\n    let writeResult;\n    let piece = format[i];\n    let bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getValueBitLength"])(Array.isArray(piece) ? piece[0] : piece);\n    output = (output << bitLength) >>> 0;\n    if (Array.isArray(piece)) {\n      for (let j = 0; j < piece.length; j++) {\n        writeResult = writeBitsForPiece(piece[j], output, values);\n        if (writeResult.wrote) {\n          output = writeResult.output;\n          break; // j\n        }\n      }\n    }\n    else {\n      writeResult = writeBitsForPiece(piece, output, values);\n      if (writeResult.wrote) {\n        output = writeResult.output;\n      }\n    }\n\n    bitOffset += bitLength;\n  }\n\n  if (bitOffset != 32)\n    throw new Error("Incorrect number of bits written for format " + format);\n\n  return output;\n}\n\nfunction writeBitsForPiece(piece, output, values) {\n  let wrote = false;\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__["isBinaryLiteral"])(piece)) {\n    output |= Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__["makeBitMaskFromString"])(piece);\n    wrote = true;\n  }\n  else if (values[piece] !== undefined) {\n    let value = values[piece] & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__["makeBitMask"])(Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getValueBitLength"])(piece));\n    wrote = true;\n    output |= value;\n  }\n\n  return {\n    wrote: wrote,\n    output: output >>> 0,\n  };\n}\n\nfunction determineOpcodeValues(givenOpcode, genericOpcode, allowedFormats, format, values) {\n  const givenPieces = givenOpcode.split(".");\n  const genericPieces = genericOpcode.split(".");\n  if (givenPieces.length !== genericPieces.length)\n    throw new Error(`Given opcode ${givenOpcode} does not have all pieces (${genericOpcode})`);\n\n  for (let i = 0; i < genericPieces.length; i++) {\n    const genericPiece = genericPieces[i];\n\n    if (genericPiece === "fmt" || genericPiece === "ftm3") {\n      if (allowedFormats.indexOf(givenPieces[i].toUpperCase()) === -1)\n        throw new Error(`Format ${givenPieces[i]} is not allowed for ${genericPiece}. Allowed values are ${allowedFormats}`);\n\n      if (genericPiece === "fmt")\n        values["fmt"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__["getFmtBits"])(givenPieces[i]);\n      else if (genericPiece === "fmt3")\n        values["fmt3"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__["getFmt3Bits"])(givenPieces[i]);\n    }\n\n    if (genericPiece === "cond")\n      values["cond"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__["getCondBits"])(givenPieces[i]);\n  }\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/parse.js?')},"./src/print.js":
/*!**********************!*\
  !*** ./src/print.js ***!
  \**********************/
/*! exports provided: print */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "print", function() { return print; });\n/* harmony import */ var _opcodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./opcodes */ "./src/opcodes.js");\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./regs */ "./src/regs.js");\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./immediates */ "./src/immediates.js");\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bitstrings */ "./src/bitstrings.js");\n\n\n\n\n\n/**\n * Prints a string representation of a MIPS instruction.\n *\n * With the `intermediate` option, this can also be used as a convenient base\n * for a disassembler. The object output with `intermediate` can be manipulated\n * prior to calling `print` with it again.\n * @param {Number|Array|ArrayBuffer|DataView|Object} inst MIPS instruction, or intermediate object format.\n * @param {Object} opts Behavior options\n * @param {String} opts.casing "toUpperCase" (default), "toLowerCase"\n * @param {Boolean} opts.commas True to separate values by commas\n * @param {Boolean} opts.include$ True to prefix registers with dollar sign\n * @param {Boolean} opts.intermediate: Output an object intermediate format instead of a string\n * @param {Number} opts.numBase Number format. 16 (hex, default), 10 (decimal)\n * @returns {String|Array|Object} Returns a string representation of the given\n * MIPS instruction code(s).\n * If multiple values are given (array) then multiple values are returned.\n * When the `intermediate` option is passed, the return type is an object.\n */\nfunction print(inst, opts) {\n  opts = _getFinalOpts(opts);\n\n  if (Array.isArray(inst))\n    return inst.map(i => _print(i, opts));\n\n  const isArrayBuffer = inst instanceof ArrayBuffer;\n  if (isArrayBuffer || inst instanceof DataView) {\n    const dataView = isArrayBuffer ? new DataView(inst) : inst;\n    const result = [];\n    for (let i = 0; i < dataView.byteLength; i += 4) {\n      result.push(_print(dataView.getUint32(i), opts));\n    }\n    return result;\n  }\n\n  const inputType = typeof inst;\n  if (inputType === "number" || inputType === "object")\n    return _print(inst, opts);\n\n  throw new Error("Unexpected input to print.");\n}\n\nfunction _getFinalOpts(givenOpts) {\n  return Object.assign({\n    casing: "toUpperCase",\n    commas: false,\n    include$: false,\n    intermediate: false,\n    numBase: 16\n  }, givenOpts);\n}\n\nfunction _print(inst, opts) {\n  let opcodeObj, opName, values;\n  if (typeof inst === "number") {\n    opName = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["findMatch"])(inst);\n    if (!opName)\n      throw new Error("Unrecognized instruction");\n\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getOpcodeDetails"])(opName);\n\n    values = _extractValues(inst, opcodeObj.format);\n    values.op = opName;\n  }\n  else if (typeof inst === "object") {\n    if (!inst.op)\n      throw new Error("Instruction object did not contain op");\n\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getOpcodeDetails"])(inst.op);\n\n    values = inst;\n  }\n  else\n    throw new Error(`Unexpected value ${inst}`);\n\n  if (!opcodeObj)\n    throw new Error("Invalid opcode");\n\n  if (opts.intermediate)\n    return values;\n\n  return _printValues(values, opcodeObj, opts);\n}\n\nfunction _printValues(values, opcodeObj, opts) {\n  let result = _formatOpcode(values, opts);\n\n  function _getRegName(displayEntry) {\n    switch (displayEntry) {\n      case "rs":\n      case "rt":\n      case "rd":\n        return Object(_regs__WEBPACK_IMPORTED_MODULE_1__["getRegName"])(values[displayEntry]);\n\n      case "fs":\n      case "ft":\n      case "fd":\n        return Object(_regs__WEBPACK_IMPORTED_MODULE_1__["getFloatRegName"])(values[displayEntry]);\n    }\n  }\n\n  const display = opcodeObj.display;\n  for (let i = 0; i < display.length; i++) {\n    let displayEntry = display[i];\n\n    if (displayEntry.endsWith("?")) {\n      displayEntry = displayEntry.replace("?", "");\n      if (values[displayEntry] === undefined)\n        continue; // Optional value, not set.\n    }\n\n    let value = values[displayEntry];\n    if (value === undefined && displayEntry !== "(" && displayEntry !== ")") {\n      throw new Error(`Expected ${displayEntry} value, got undefined`);\n    }\n\n    let addComma = opts.commas;\n\n    switch (displayEntry) {\n      case "rs":\n      case "rt":\n      case "rd":\n      case "fs":\n      case "ft":\n      case "fd":\n        if (!result.endsWith("("))\n          result += " ";\n        result += _formatReg(_getRegName(displayEntry), opts);\n        break;\n\n      case "(":\n      case ")":\n        addComma = false;\n        if (result.endsWith(","))\n          result = result.slice(0, -1); // Lop off comma, since we are involved in a parenthesis open/close\n\n        result += displayEntry;\n        break;\n    }\n\n    const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__["getImmFormatDetails"])(displayEntry);\n    if (immDetails) {\n      if (!result.endsWith("("))\n        result += " ";\n\n      if (immDetails.signed && immDetails.bits === 16) {\n        value = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__["makeInt16"])(value);\n      }\n      if (immDetails.shift) {\n        value = value << immDetails.shift;\n      }\n\n      result += _formatNumber(value, opts);\n    }\n\n    if (addComma && (i !== display.length - 1) && !result.endsWith(",")) {\n      result += ",";\n    }\n  }\n\n  return result.trim();\n}\n\nfunction _extractValues(inst, format) {\n  let values = {};\n  for (let i = format.length - 1; i >= 0; i--) {\n    let value, bitLength;\n    let piece = format[i];\n    if (Array.isArray(piece)) {\n      for (let j = piece.length - 1; j >= 0; j--) {\n        bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getValueBitLength"])(piece[j]);\n        value = inst & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__["makeBitMask"])(bitLength);\n\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__["isBinaryLiteral"])(piece[j])) {\n          if (piece[j] === Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__["padBitString"])(value.toString(2), bitLength)) {\n            piece = piece[j];\n            break;\n          }\n        }\n        else {\n          piece = piece[j];\n          break;\n        }\n      }\n    }\n    else {\n      bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__["getValueBitLength"])(piece);\n      value = inst & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__["makeBitMask"])(bitLength);\n    }\n\n    if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__["isBinaryLiteral"])(piece)) {\n      inst >>>= bitLength;\n      continue;\n    }\n\n    values[piece] = value;\n\n    inst >>>= bitLength;\n  }\n\n  return values;\n}\n\nfunction _formatNumber(num, opts) {\n  if (num === 0)\n    return num.toString(opts.numBase);\n\n  let value = "";\n  if (num < 0)\n    value += "-";\n\n  if (opts.numBase === 16)\n    value += "0x";\n  else if (opts.numBase === 8)\n    value += "0o";\n  else if (opts.numBase === 2)\n    value += "0b";\n\n  value += _applyCasing(Math.abs(num).toString(opts.numBase), opts.casing);\n  return value;\n}\n\nfunction _formatReg(regStr, opts) {\n  let value = "";\n  if (opts.include$)\n    value += "$";\n  value += _applyCasing(regStr, opts.casing);\n  return value;\n}\n\nfunction _formatOpcode(values, opts) {\n  const pieces = values.op.split(".");\n  for (let i = 0; i < pieces.length; i++) {\n    if (pieces[i] === "fmt") {\n      if (values.hasOwnProperty("fmt3"))\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__["getFmt3Name"])(values["fmt3"]);\n      else if (values.hasOwnProperty("fmt"))\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__["getFmtName"])(values["fmt"]);\n      else\n        throw new Error("Format value not available");\n    }\n    else if (pieces[i] === "cond") {\n      if (values.hasOwnProperty("cond"))\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__["getCondName"])(values["cond"]);\n      else\n        throw new Error("Condition value not available");\n    }\n  }\n  let opcode = pieces.join(".");\n\n  return _applyCasing(opcode, opts.casing);\n}\n\nfunction _applyCasing(value, casing) {\n  switch (casing) {\n    case "toLowerCase":\n      return value.toLowerCase();\n\n    case "toUpperCase":\n    default:\n      return value.toUpperCase();\n  }\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/print.js?')},"./src/regex.js":
/*!**********************!*\
  !*** ./src/regex.js ***!
  \**********************/
/*! exports provided: getOpcode, makeRegexForOpcode, isReg, isFloatReg */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOpcode", function() { return getOpcode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeRegexForOpcode", function() { return makeRegexForOpcode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isReg", function() { return isReg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFloatReg", function() { return isFloatReg; });\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regs */ "./src/regs.js");\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./immediates */ "./src/immediates.js");\n\n\n\nconst opRegex = "([A-Za-z0-3.]+)";\nconst immRegex = "(-)?0?([xbo]?)([A-Fa-f0-9]+)";\nconst regRegex = "\\\\$?(\\\\w+)";\nconst floatRegRegex = "\\\\$?[Ff]([0-9]+)";\n\nconst opcodeRegex = new RegExp("^\\\\s*" + opRegex);\n\nconst _regexCache = Object.create(null);\n\n// Gets the op string from a given entire instruction.\n// This is a general form (.fmt rather than .S, .D, etc.)\nfunction getOpcode(str) {\n  const match = opcodeRegex.exec(str);\n  if (match) {\n    const pieces = match[1].split("."); // Could be .fmt, .cond.fmt, etc\n    if (pieces.length === 1)\n      return pieces[0].toLowerCase();\n\n    // Loop from the end, as the end has the .fmt for tricky things like .D.W\n    let result = "";\n    let foundFmt = false;\n    let foundCond = false;\n    for (let i = pieces.length - 1; i > 0; i--) {\n      let piece = pieces[i];\n      if (!foundFmt) {\n        if (piece === "fmt" || Object(_regs__WEBPACK_IMPORTED_MODULE_0__["isFmtString"])(piece)) {\n          foundFmt = true;\n          piece = "fmt";\n        }\n      }\n\n      if (!foundCond) {\n        if (Object(_regs__WEBPACK_IMPORTED_MODULE_0__["isCondString"])(piece)) {\n          foundCond = true;\n          piece = "cond";\n        }\n      }\n\n      result = "." + piece + result;\n    }\n\n    return (pieces[0] + result).toLowerCase();\n  }\n  return null;\n}\n\nfunction makeRegexForOpcode(opcode, opcodeObj) {\n  if (_regexCache[opcode]) {\n    return _regexCache[opcode];\n  }\n\n  const parts = [opRegex];\n  const display = opcodeObj.display;\n  for (let i = 0; i < display.length; i++) {\n    const part = display[i];\n    const optional = part.endsWith("?");\n\n    let regexPart = "";\n    if (optional)\n      regexPart += "(?:[,\\\\s]+";\n\n    if (display[i + 1] === "(") {\n      if (optional)\n        throw new Error("Not prepared to generate optional regex with parenthesis");\n\n      if (display[i + 3] !== ")")\n        throw new Error("Not prepared to generate regex for multiple values in parenthesis"); // Or no closing paren\n\n      regexPart += makeParenthesisRegex(getRegexForPart(part), getRegexForPart(display[i + 2]));\n      i = i + 3;\n    }\n    else {\n      regexPart += getRegexForPart(part);\n    }\n\n    if (optional)\n      regexPart += ")?";\n\n    parts.push(regexPart);\n  }\n\n  let regexStr =\n    "^\\\\s*" +\n    parts.reduce((str, next, index) => {\n      if (index === 0 || partIsOptional(next))\n        return str + next;\n\n      return str + "[,\\\\s]+" + next;\n    }, "") +\n    "\\\\s*$";\n\n  const regex = new RegExp(regexStr);\n  _regexCache[opcode] = regex;\n  return regex;\n}\n\nfunction getRegexForPart(part) {\n  if (isReg(part))\n    return regRegex;\n  if (isFloatReg(part))\n    return floatRegRegex;\n\n  if (Object(_immediates__WEBPACK_IMPORTED_MODULE_1__["getImmFormatDetails"])(part))\n    return immRegex;\n\n  throw new Error(`Unrecognized display entry ${part}`);\n}\n\nfunction makeParenthesisRegex(regex1, regex2) {\n  return regex1 + "\\\\s*" + "\\\\(?" + regex2 + "\\\\)?";\n}\n\nfunction partIsOptional(partStr) {\n  return partStr.startsWith("(?:");\n}\n\nfunction isReg(entry) {\n  if (!entry)\n    return false;\n\n  switch (entry.substr(0, 2)) {\n    case "rs":\n    case "rt":\n    case "rd":\n      return true;\n  }\n  return false;\n}\n\nfunction isFloatReg(entry) {\n  if (!entry)\n    return false;\n\n  switch (entry.substr(0, 2)) {\n    case "fs":\n    case "ft":\n    case "fd":\n      return true;\n  }\n  return false;\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/regex.js?')},"./src/regs.js":
/*!*********************!*\
  !*** ./src/regs.js ***!
  \*********************/
/*! exports provided: getRegBits, getRegName, getFloatRegName, getFmtBits, getFmtName, getFmt3Bits, getFmt3Name, isFmtString, getCondBits, getCondName, isCondString */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRegBits", function() { return getRegBits; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRegName", function() { return getRegName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFloatRegName", function() { return getFloatRegName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFmtBits", function() { return getFmtBits; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFmtName", function() { return getFmtName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFmt3Bits", function() { return getFmt3Bits; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFmt3Name", function() { return getFmt3Name; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isFmtString", function() { return isFmtString; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCondBits", function() { return getCondBits; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCondName", function() { return getCondName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isCondString", function() { return isCondString; });\nconst regs = {\n  r0: 0,\n  zero: 0,\n  at: 1,\n  v0: 2,\n  v1: 3,\n  a0: 4,\n  a1: 5,\n  a2: 6,\n  a3: 7,\n  t0: 8,\n  t1: 9,\n  t2: 10,\n  t3: 11,\n  t4: 12,\n  t5: 13,\n  t6: 14,\n  t7: 15,\n  s0: 16,\n  s1: 17,\n  s2: 18,\n  s3: 19,\n  s4: 20,\n  s5: 21,\n  s6: 22,\n  s7: 23,\n  t8: 24,\n  t9: 25,\n  k0: 26,\n  k1: 27,\n  gp: 28,\n  sp: 29,\n  fp: 30,\n  ra: 31\n};\n\nfunction getRegBits(reg) {\n  if (!reg)\n    return undefined;\n  return regs[reg.toLowerCase()];\n}\n\nfunction getRegName(bits) {\n  for (let name in regs) {\n    if (regs[name] === bits)\n      return name;\n  }\n  return "";\n}\n\nfunction getFloatRegName(bits) {\n  if (typeof bits !== "number")\n    throw new Error("getFloatRegName encountered non-number");\n\n  return "F" + bits;\n}\n\nconst fmts = {\n  S: 16,\n  D: 17,\n  W: 20,\n  L: 21,\n};\n\nfunction getFmtBits(fmtStr) {\n  return fmts[fmtStr.toUpperCase()];\n}\n\nfunction getFmtName(bits) {\n  for (let name in fmts) {\n    if (fmts[name] === bits)\n      return name;\n  }\n  return "";\n}\n\nconst fmt3s = {\n  S: 0,\n  D: 1,\n  W: 4,\n  L: 5,\n};\n\nfunction getFmt3Bits(fmtStr) {\n  return fmt3s[fmtStr.toUpperCase()];\n}\n\nfunction getFmt3Name(bits) {\n  for (let name in fmt3s) {\n    if (fmt3s[name] === bits)\n      return name;\n  }\n  return "";\n}\n\nfunction isFmtString(fmtStr) {\n  return fmts.hasOwnProperty(fmtStr.toUpperCase()) || fmt3s.hasOwnProperty(fmtStr.toUpperCase());\n}\n\nconst conds = {\n  F: 0,\n  UN: 1,\n  EQ: 2,\n  UEQ: 3,\n  OLT: 4,\n  ULT: 5,\n  OLE: 6,\n  ULE: 7,\n  SF: 8,\n  NGLE: 9,\n  SEQ: 10,\n  NGL: 11,\n  LT: 12,\n  NGE: 13,\n  LE: 14,\n  NGT: 15,\n};\n\nfunction getCondBits(condStr) {\n  return conds[condStr.toUpperCase()];\n}\n\nfunction getCondName(bits) {\n  for (let name in conds) {\n    if (conds[name] === bits)\n      return name;\n  }\n  return "";\n}\n\nfunction isCondString(condStr) {\n  return conds.hasOwnProperty(condStr.toUpperCase());\n}\n\n\n//# sourceURL=webpack://MIPSInst/./src/regs.js?')}})},module.exports=factory()},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),o=n(2),s=n(0),l=n(11),c=n(243),u=n(87),d=n(3),p=n(4),f=n(244),h=n(245),m=n(23),_=n(138);function g(e,t){var n=Math.floor((t.offsetWidth-e.bg.width)/2);n=Math.max(0,n);var r=Math.floor((t.offsetHeight-e.bg.height)/2);return"translateX("+n+"px) translateY("+(r=Math.max(0,r))+"px)"}function v(e,t,n,r){void 0===r&&(r=!0),r&&t.clearRect(0,0,e.width,e.height);var i=n.links=n.links||{};for(var a in i)for(var s=n.spaces[a].x,l=n.spaces[a].y,c=o.getConnections(parseInt(a),n),u=void 0,d=void 0,p=!1,f=0;f<c.length;f++)u=n.spaces[c[f]].x,d=n.spaces[c[f]].y,(p=y(i,c[f],a))&&parseInt(a)>c[f]||w(t,s,l,u,d,p)}function y(e,t,n){var r=e[t];return Array.isArray(r)?r.indexOf(parseInt(n))>=0:r==n}function A(e,t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i={}),r&&t.clearRect(0,0,e.width,e.height);for(var a=0;a<n.spaces.length;a++){var o=n.spaces[a];null!==o&&(o.z=o.z||0,x(t,o,n,i))}}function x(e,t,n,r){void 0===r&&(r={});var i=n.game||1,a=n.type||s.BoardType.NORMAL,p=t.x,f=t.y,h=t.rotation,_=t.type,g=t.subtype;if("number"==typeof h){e.save(),e.translate(p,f);var v=-h;e.rotate(l.degreesToRadians(v)),e.translate(-p,-f)}switch(_){case s.Space.OTHER:if(r.skipHiddenSpaces)break;3===i?c.spaces.drawOther3(e,p,f):c.spaces.drawOther(e,p,f);break;case s.Space.BLUE:3===i?c.spaces.drawBlue3(e,p,f):c.spaces.drawBlue(e,p,f);break;case s.Space.RED:3===i?c.spaces.drawRed3(e,p,f):c.spaces.drawRed(e,p,f);break;case s.Space.MINIGAME:a===s.BoardType.DUEL?c.spaces.drawMiniGameDuel3(e,p,f):c.spaces.drawMiniGame(e,p,f);break;case s.Space.HAPPENING:3===i?a===s.BoardType.DUEL?c.spaces.drawHappeningDuel3(e,p,f):c.spaces.drawHappening3(e,p,f):c.spaces.drawHappening(e,p,f);break;case s.Space.STAR:3===i?c.spaces.drawStar3(e,p,f):c.spaces.drawStar(e,p,f);break;case s.Space.CHANCE:3===i?c.spaces.drawChance3(e,p,f):2===i?c.spaces.drawChance2(e,p,f):c.spaces.drawChance(e,p,f);break;case s.Space.START:if(r.skipHiddenSpaces)break;3===i?c.spaces.drawStart3(e,p,f):c.spaces.drawStart(e,p,f);break;case s.Space.SHROOM:c.spaces.drawShroom(e,p,f);break;case s.Space.BOWSER:3===i?c.spaces.drawBowser3(e,p,f):c.spaces.drawBowser(e,p,f);break;case s.Space.ITEM:3===i?c.spaces.drawItem3(e,p,f):c.spaces.drawItem2(e,p,f);break;case s.Space.BATTLE:3===i?c.spaces.drawBattle3(e,p,f):c.spaces.drawBattle2(e,p,f);break;case s.Space.BANK:3===i?c.spaces.drawBank3(e,p,f):c.spaces.drawBank2(e,p,f);break;case s.Space.ARROW:c.spaces.drawArrow(e,p,f,i);break;case s.Space.BLACKSTAR:c.spaces.drawBlackStar2(e,p,f);break;case s.Space.GAMEGUY:a===s.BoardType.DUEL?c.spaces.drawGameGuyDuel3(e,p,f):c.spaces.drawGameGuy3(e,p,f);break;case s.Space.DUEL_BASIC:c.spaces.drawDuelBasic(e,p,f);break;case s.Space.DUEL_START_BLUE:if(r.skipHiddenSpaces)break;c.spaces.drawStartDuelBlue(e,p,f);break;case s.Space.DUEL_START_RED:if(r.skipHiddenSpaces)break;c.spaces.drawStartDuelRed(e,p,f);break;case s.Space.DUEL_POWERUP:c.spaces.drawDuelPowerup(e,p,f);break;case s.Space.DUEL_REVERSE:c.spaces.drawDuelReverse(e,p,f);break;default:c.spaces.drawUnknown(e,p,f)}if("number"==typeof h&&e.restore(),r.skipCharacters||function(e,t,n,r,i){r===s.SpaceSubtype.TOAD&&(3===i?e.drawImage(u.getImage("mstarImg"),t-15,n-22):e.drawImage(u.getImage("toadImg"),t-9,n-22));r===s.SpaceSubtype.BOWSER&&e.drawImage(u.getImage("bowserImg"),t-27,n-45);r===s.SpaceSubtype.KOOPA&&e.drawImage(u.getImage("koopaImg"),t-12,n-22);r===s.SpaceSubtype.BOO&&e.drawImage(u.getImage("booImg"),t-13,n-17);r===s.SpaceSubtype.GOOMBA&&e.drawImage(u.getImage("goombaImg"),t-8,n-12);r===s.SpaceSubtype.BANK&&(2===i?e.drawImage(u.getImage("bank2Img"),t-9,n-10):e.drawImage(u.getImage("bank3Img"),t-17,n-20));r===s.SpaceSubtype.BANKCOIN&&e.drawImage(u.getImage("bankcoinImg"),t-10,n-9);r===s.SpaceSubtype.ITEMSHOP&&(2===i?e.drawImage(u.getImage("itemShop2Img"),t-9,n-10):e.drawImage(u.getImage("itemShop3Img"),t-16,n-20))}(e,p,f,g,i),!r.skipBadges){var y=3===i?5:2,A=3===i?16:12;if(t.events&&t.events.length){var x=f+y;_===s.Space.START&&(x-=A),e.drawImage(function(e,t){if(e.events&&e.events.length)for(var n=0;n<e.events.length;n++){var r=e.events[n],i=m.getEvent(r.id,t);if(!i)return u.getImage("eventErrorImg");if(i.parameters)for(var a=0;a<i.parameters.length;a++){var o=i.parameters[a];if(!r.parameterValues||!r.parameterValues.hasOwnProperty(o.name))return u.getImage("eventErrorImg")}}return u.getImage("eventImg")}(t,n),p+y,x)}if(t.star){x=f+y;_===s.Space.START&&(x-=A),e.drawImage(u.getImage("starImg"),p-y-9,x)}if(t.subtype===s.SpaceSubtype.GATE){var S=p-y-9;x=f+y-5;e.drawImage(u.getImage("gateImg"),S,x)}}if($$debug){e.save();var b=o.getSpaceIndex(t);e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.font="bold 6pt Courier New",e.textAlign="center";var w=b.toString();e.strokeText(w,p,f-2),e.fillText(w,p,f-2),w=d.$$hex(b),e.strokeText(w,p,f+8),e.fillText(w,p,f+8),e.restore()}}var S,b=Math.PI/1;function w(e,t,n,r,i,a){e.save(),e.beginPath(),e.strokeStyle="rgba(255, 185, 105, 0.75)",e.lineCap="round",e.lineWidth=8,e.moveTo(t,n),e.lineTo(r,i),e.stroke();var o=(t+r)/2,s=(n+i)/2;e.translate(o,s),e.rotate(-Math.atan2(t-o,n-s)+b),e.fillStyle="#A15000";var l=a?3:0;e.moveTo(-4,-2+l),e.lineTo(0,2+l),e.lineTo(4,-2+l),e.fill(),a&&(e.moveTo(-4,2-l),e.lineTo(0,-2-l),e.lineTo(4,2-l),e.fill()),e.restore()}var E,P,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.componentDidMount=function(){this.renderContent(),S=this},t.prototype.componentWillUnmount=function(){S=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=this.props.board,t=this.getImage(),n=g(e,t.parentElement);t.style.transform=n,t._src===e.bg.src&&t.width===e.bg.width&&t.height===e.bg.height||(t.width=e.bg.width,t.height=e.bg.height,this.setSource(e.bg.src,t))},t.prototype.getImage=function(){return a.findDOMNode(this)},t.prototype.setSource=function(e,t){void 0===t&&(t=this.getImage()),t.src=e,t._src=e},t.prototype.render=function(){return p.createElement("img",{className:"editor_bg"})},t}(p.Component),T=-1;function V(){E&&clearInterval(E),E=null,T=-1,U()}function F(){var e=o.getCurrentBoard(),t=e.animbg;S&&t&&t.length?(T>=0&&T<t.length?(S.setSource(t[T]),T++):T=-1,-1===T&&(S.setSource(e.bg.src),T++)):V()}t.playAnimation=function(){E||(E=setInterval(F,800))},t.stopAnimation=V;var D,O,R,M,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.componentDidMount=function(){this.renderContent(),P=this},t.prototype.componentWillUnmount=function(){P=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=a.findDOMNode(this),t=e.parentElement,n=this.props.board,r=g(n,t);e.style.transform=r,e.width===n.bg.width&&e.height===n.bg.height||(e.width=n.bg.width,e.height=n.bg.height),v(e,e.getContext("2d"),n)},t.prototype.render=function(){return p.createElement("canvas",{className:"editor_line_canvas"})},t}(p.Component),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.componentDidMount=function(){this.renderContent(),D=this},t.prototype.componentWillUnmount=function(){D=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=a.findDOMNode(this),t=e.parentElement,n=this.props.board,r=g(n,t);e.style.transform=r,e.width===n.bg.width&&e.height===n.bg.height||(e.width=n.bg.width,e.height=n.bg.height),function(e,t,n,r){if(t.clearRect(0,0,e.width,e.height),r&&1===r.length){var i=0;o.forEachEventParameter(n,function(e,a,o){if("Space"===e.type){if(r[0]!==o)return;var s=a.parameterValues&&a.parameterValues[e.name];if("number"==typeof s){var l=n.spaces[s];if(!l)return;var c="rgba("+_.getDistinctColor(i).join(", ")+", 0.5)";!function(e,t,n,r,i,a){e.save(),e.beginPath(),e.strokeStyle="rgba(0, 0, 0, 0.5)",e.setLineDash([1,8]),e.lineCap="round",e.lineWidth=6,e.moveTo(t,n),e.lineTo(r,i),e.stroke(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=a,e.setLineDash([1,8]),e.lineCap="round",e.lineWidth=4,e.moveTo(t,n),e.lineTo(r,i),e.stroke(),e.restore()}(t,o.x,o.y,l.x,l.y,c)}i++}})}}(e,e.getContext("2d"),n,this.props.selectedSpaces)},t.prototype.render=function(){return p.createElement("canvas",{className:"editor_association_canvas"})},t}(p.Component),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.componentDidMount=function(){this.renderContent(),O=this},t.prototype.componentWillUnmount=function(){O=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=a.findDOMNode(this),t=e.parentElement,n=this.props.board,r=g(n,t);e.style.transform=r,e.width===n.bg.width&&e.height===n.bg.height||(e.width=n.bg.width,e.height=n.bg.height),function(e,t,n){if(t.clearRect(0,0,e.width,e.height),n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i){t.save(),t.beginPath();var a=3===o.getCurrentBoard().game?18:12;t.arc(i.x,i.y,a,0,2*Math.PI),t.setLineDash([2,2]),t.lineWidth=2,t.fillStyle="rgba(47, 70, 95, 0.35)",t.strokeStyle="rgba(47, 70, 95, 1)",t.fill(),t.stroke(),t.restore()}}}(e,e.getContext("2d"),this.props.selectedSpaces)},t.prototype.highlightSpaces=function(e){var t=a.findDOMNode(this);!function(e,t,n){for(var r=o.getCurrentBoard(),i=3===r.game?18:12,a=0;a<n.length;a++){var s=r.spaces[n[a]];s&&(t.save(),t.beginPath(),t.arc(s.x,s.y,i,0,2*Math.PI),t.shadowColor="rgba(225, 225, 225, 1)",t.shadowBlur=2,t.fillStyle="rgba(255, 0, 0, 0.85)",t.fill(),t.restore())}}(0,t.getContext("2d"),e)},t.prototype.render=function(){return p.createElement("canvas",{className:"editor_current_space_canvas"})},t}(p.Component),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.__canvas=null,t.drawSelectionBox=function(e,n,r,i){var o=a.findDOMNode(t).getContext("2d");o.save(),o.beginPath(),o.fillStyle="rgba(47, 70, 95, 0.5)",o.strokeStyle="rgba(47, 70, 95, 1)",o.fillRect(Math.min(e,r),Math.min(n,i),Math.abs(e-r),Math.abs(n-i)),o.strokeRect(Math.min(e,r),Math.min(n,i),Math.abs(e-r),Math.abs(n-i)),o.restore()},t}return i(t,e),t.prototype.componentDidMount=function(){h.attachToCanvas(this.__canvas),this.renderContent(),R=this},t.prototype.componentWillUnmount=function(){h.detachFromCanvas(this.__canvas),R=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=a.findDOMNode(this),t=e.parentElement,n=this.props.board,r=g(n,t);e.style.transform=r,e.width===n.bg.width&&e.height===n.bg.height||(e.width=n.bg.width,e.height=n.bg.height),A(e,e.getContext("2d"),n)},t.prototype.render=function(){var e=this;return p.createElement("canvas",{className:"editor_space_canvas",tabIndex:-1,ref:function(t){return e.__canvas=t},onDragOver:void 0})},t}(p.Component),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={rightClickSpace:null},t}return i(t,e),t.prototype.componentDidMount=function(){this.renderContent(),M=this},t.prototype.componentWillUnmount=function(){M=null},t.prototype.componentDidUpdate=function(){this.renderContent()},t.prototype.renderContent=function(){var e=a.findDOMNode(this),t=e.parentElement,n=g(this.props.board,t);e.style.transform=n},t.prototype.setRightClickMenu=function(e){this.setState({rightClickSpace:e})},t.prototype.rightClickOpen=function(){return!!this.state.rightClickSpace},t.prototype.render=function(){var e;return this.rightClickOpen()&&(e=p.createElement(f.RightClickMenu,{space:this.state.rightClickSpace})),p.createElement("div",{className:"editor_menu_overlay"},e)},t}(p.Component);function N(){S&&S.renderContent(),P&&P.renderContent(),D&&D.renderContent(),O&&O.renderContent(),R&&R.renderContent()}function U(){S&&S.renderContent()}t.Editor=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",N,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",N)},t.prototype.componentDidUpdate=function(){},t.prototype.render=function(){return p.createElement("div",{className:"editor"},p.createElement(C,{board:this.props.board}),p.createElement(L,{board:this.props.board}),p.createElement(B,{board:this.props.board,selectedSpaces:this.props.selectedSpaces}),p.createElement(k,{board:this.props.board,selectedSpaces:this.props.selectedSpaces}),p.createElement(I,{board:this.props.board}),p.createElement(j,{board:this.props.board}))},t}(p.Component),t.render=N,t.renderBG=U,t.renderConnections=function(){P&&P.renderContent(),D&&D.renderContent()},t.renderSelectedSpaces=function(){O&&O.renderContent()},t.renderSpaces=function(){R&&R.renderContent()},t.updateRightClickMenu=function(e){M&&M.setRightClickMenu(e)},t.rightClickOpen=function(){return!!M&&M.rightClickOpen()},t.drawConnection=function(e,t,n,r){P&&w(a.findDOMNode(P).getContext("2d"),e,t,n,r)},t.highlightSpaces=function(e){O&&O.highlightSpaces(e)},t.drawSelectionBox=function(e,t,n,r){R&&R.drawSelectionBox(e,t,n,r)},t.animationPlaying=function(){return!!E},t.external={getBGImage:function(){return S.getImage()},setBGImage:function(e){S.setSource(e)},renderConnections:v,renderSpaces:A}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(240)},function(e,t,n){"use strict";var r={},i=Math.pow(2,24);e.exports=function(){for(var e=void 0;void 0===e||r.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*i).toString(32);return r[e]=!0,e}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mips_inst_1=__webpack_require__(28);function makeInst(inst){for(var extras=[],_i=1;_i<arguments.length;_i++)extras[_i-1]=arguments[_i];if(!arguments.length)return null;for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];var methodName="_"+inst.toLowerCase(),method=eval(methodName);if("function"==typeof method)return method.apply(null,args);throw"MIPS.makeInst: Unrecognized instruction "+inst}function getJALAddr(e){if(201326592!=(201326592&e))throw"MIPS.getJALAddr: "+e.toString(16)+" is not a JAL instruction.";return(67108863&e)<<2}function getRegSetUpperAndLower(e){var t=65535&e,n=e>>>16;return 32768&t&&(n+=1),[n,t]}function getRegSetAddress(e,t){return e&=65535,32768&(t&=65535)&&(e-=1),2147483647&(e<<16|t)}function getFunctionLength(e,t){for(var n=t+4;65011720!==e.getUint32(n)&&n<t+8192;)n+=4;return 65011720!==e.getUint32(n)?null:(n+=8)-t}function findCalls(e,t){for(var n=mips_inst_1.parse("JAL "+t),r=[],i=0;i<e.byteLength;i+=4){e.getUint32(i)===n&&r.push(i)}return r}function _addiu(e,t,n){var r=603979776;return r|=t<<21,(r|=e<<16)|65535&n}function _addu(e,t,n){var r=33;return r|=t<<21,r|=n<<16,r|=e<<11}function _beq(e,t,n){var r=268435456;return r|=e<<21,(r|=t<<16)|n>>2&65535}function _bne(e,t,n){var r=335544320;return r|=e<<21,(r|=t<<16)|n>>2&65535}function _bgtz(e,t){var n=469762048;return(n|=e<<21)|t>>2&65535}function _blez(e,t){var n=402653184;return(n|=e<<21)|t>>2&65535}function _j(e){return 134217728|e>>>2}function _jr(e){return 8|e<<21}function _jal(e){return 201326592|e>>>2}function _lb(e,t,n){var r=2147483648;return r|=t<<21,(r|=e<<16)|65535&n}function _sb(e,t,n){var r=2684354560;return r|=t<<21,(r|=e<<16)|65535&n}function _lh(e,t,n){var r=2214592512;return r|=t<<21,(r|=e<<16)|65535&n}function _sh(e,t,n){var r=2751463424;return r|=t<<21,(r|=e<<16)|65535&n}function _lui(e,t){var n=1006632960;return(n|=e<<16)|65535&t}function _lw(e,t,n){var r=2348810240;return r|=t<<21,(r|=e<<16)|65535&n}function _sw(e,t,n){var r=2885681152;return r|=t<<21,(r|=e<<16)|65535&n}function _ori(e,t,n){var r=872415232;return r|=e<<21,(r|=t<<16)|65535&n}exports.REG={R0:0,AT:1,V0:2,V1:3,A0:4,A1:5,A2:6,A3:7,T0:8,T1:9,T2:10,T3:11,T4:12,T5:13,T6:14,T7:15,S0:16,S1:17,S2:18,S3:19,S4:20,S5:21,S6:22,S7:23,T8:24,T9:25,K0:26,K1:27,GP:28,SP:29,S8:30,RA:31},exports.makeInst=makeInst,exports.getJALAddr=getJALAddr,exports.getRegSetUpperAndLower=getRegSetUpperAndLower,exports.getRegSetAddress=getRegSetAddress,exports.getFunctionLength=getFunctionLength,exports.findCalls=findCalls},function(e,t,n){"use strict";var r=n(250);e.exports=r},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(168).Readable}catch(e){t.nodestream=!1}}).call(this,n(64).Buffer)},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(71),i=n(202),a=n(1),o=n(52);function s(e,t){for(var n=32,r=0;r<e.length;r++)n+=12,e[r].bpp===t?n+=e[r].src.byteLength:32===e[r].bpp&&16===t&&(n+=e[r].src.byteLength/2);return n}function l(e,t,n,r,i){var s;if(e.setUint32(t,t+12),e.setUint16(t+=4,n.width),e.setUint16(t+=2,n.height),i?(e.setUint32(t+=2,i.getUint32(t)),t+=4):(e.setUint16(t+=2,n.width/2),e.setUint16(t+=2,n.height/2),t+=2),n._bmpData)s=new DataView(n._bmpData);else if(n.bpp===r)s=new DataView(n.src);else{if(32!==n.bpp||16!==r)throw"Cannot create ImgPack (yet) with inBpp="+n.bpp+" and outBpp="+r+".";var l=o.RGBA5551fromRGBA32(n.src,n.width,n.height);s=new DataView(l)}return a.copyRange(e,s,t,0,s.byteLength),t+s.byteLength}t.fromPack=function(e){var t=new DataView(e),n=t.getUint32(0),a=t.getUint32(12),s=t.getUint16(16),l=t.getUint8(25),c=a!==t.byteLength,u=[];if(c)for(;a!==t.byteLength;)u.push(t.getUint16(a)),a+=2;for(var d=[],p=n,f=new DataView(e,p),h=0;h<s;h++){var m=f.getUint32(0),_=f.getUint16(4),g=f.getUint16(6),v=void 0;v=l>=8?l*_*g/8:_*g/(8/l);var y=e.slice(m,m+v);c&&(y=r.BMPtoRGBA(y,u,l,16));var A={width:_,height:g};32===l?A.src=y:16===l||c?A.src=o.RGBA5551toRGBA32(y,_,g):4!==l&&8!==l||(A.src=i.GrayscaleToRGBA32(y,_,g,l)),d.push(A),p+=12,f=new DataView(e,p)}return d},t.toPack=function(e,t,n,i){var a,o,c,u=s(e,t);n&&(o=(a=r.BMPfromRGBA(e[0].src,e[0].bpp,8))[0],c=a[1],e[0]._bmpData=o,u+=c.colors.length*(t/n),u-=e[0].src.byteLength-o.byteLength);var d,p=new ArrayBuffer(u),f=new DataView(p);i&&(d=new DataView(i)),f.setUint32(0,32),f.setUint32(4,44),f.setUint32(8,44),c?f.setUint32(12,u-c.colors.length*(t/n)):f.setUint32(12,u),f.setUint16(16,e.length),f.setUint16(18,0);for(var h=0,m=0,_=0;_<e.length;_++)h+=e[_].width,m+=e[_].height;if(f.setUint16(20,h),f.setUint16(22,m),d?f.setUint8(24,d.getUint8(24)):f.setUint8(24,0),f.setUint8(25,n||t),c){f.setUint8(26,c.colors.length);var g=u-c.colors.length*(t/n);for(_=0;_<c.colors.length;_++)f.setUint16(g+2*_,c.colors[_])}var v=32;for(_=0;_<e.length;_++)v=l(f,v,e[_],t,d);return p},t.getByteLength=s},function(e,t,n){"use strict";function r(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.fromU32=function(e){return String.fromCharCode((4278190080&e)>>>24)+String.fromCharCode((16711680&e)>>>16)+String.fromCharCode((65280&e)>>>8)+String.fromCharCode(255&e)},t.toU32=function(e){var t=r(e),n=0;return n|=t[0]<<24,n|=t[1]<<16,n|=t[2]<<8,n|=t[3]},t.toCharCodes=r,t.stringToArrayBuffer=function(e){if("TextEncoder"in window)return(new TextEncoder).encode(e).buffer;for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},t.stringFromArrayBuffer=function(e){return"TextDecoder"in window?(new TextDecoder).decode(e):String.fromCharCode.apply(null,new Uint16Array(e))},t.pad=function(e,t,n){for(;e.length<t;)e=n+e;return e},t.splice=function(e,t,n,r){return e.slice(0,t)+r+e.slice(t+Math.abs(n))},t.normalizeLineEndings=function(e){return e?e.replace(/\r\n|\r/g,"\n"):e},t.mpFormatToPlainText=function(e){return e?e.replace(/<\w+>/g,"").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("","").replace("",""):""}},function(e,t,n){"use strict";var r=n(17),i=n(5),a=n(60),o=i.List,s=i.Map,l=i.OrderedSet,c=i.Record,u=i.Repeat,d=l(),p=c({key:"",type:"unstyled",text:"",characterList:o(),depth:0,data:s()}),f=function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=o(u(r.EMPTY,n.length))),e},h=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,f(n)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():d},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.findStyleRanges=function(e,t){a(this.getCharacterList(),m,e,t)},t.prototype.findEntityRanges=function(e,t){a(this.getCharacterList(),_,e,t)},t}(p);function m(e,t){return e.getStyle()===t.getStyle()}function _(e,t){return e.getEntity()===t.getEntity()}e.exports=h},function(e,t,n){"use strict";var r=n(6),i=55296,a=56319,o=56320,s=57343,l=/[\uD800-\uDFFF]/;function c(e){return i<=e&&e<=s}function u(e){return l.test(e)}function d(e,t){return 1+c(e.charCodeAt(t))}function p(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!u(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var i=0;if(t>0){for(;t>0&&i<r;t--)i+=d(e,i);if(i>=r)return""}else if(t<0){for(i=r;t<0&&0<i;t++)i-=d(e,i-1);i<0&&(i=0)}var a=r;if(n<r)for(a=i;n>0&&a<r;n--)a+=d(e,a);return e.substring(i,a)}var f={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=d(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:d,hasSurrogateUnit:u,isCodeUnitInSurrogateRange:c,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||r(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),l=e.charCodeAt(t+1);return i<=n&&n<=a&&o<=l&&l<=s},strlen:function(e){if(!u(e))return e.length;for(var t=0,n=0;n<e.length;n+=d(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return p(e,t=t<n?t:n,r)},substr:p};e.exports=f},function(e,t,n){"use strict";var r=n(78),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var a=n(65);a.inherits=n(49);var o=n(169),s=n(106);a.inherits(d,o);for(var l=i(s.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=s.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(11),a=n(201),o=n(70),s=n(52),l=n(24),c=n(1),u=n(0),d=n(9),p=n(16),f=n(32),h={};h[u.Game.MP1_USA]=[{upper:357926,lower:357930},{upper:380946,lower:380950},{ovl:1,upper:566,lower:574},{ovl:63,upper:2774,lower:2782},{ovl:64,upper:23038,lower:23046},{ovl:65,upper:1826,lower:1834},{ovl:66,upper:14490,lower:14498},{ovl:67,upper:15970,lower:15978},{ovl:68,upper:3606,lower:3614},{ovl:69,upper:2186,lower:2194},{ovl:70,upper:10390,lower:10398},{ovl:71,upper:2230,lower:2238},{ovl:72,upper:2714,lower:2722},{ovl:73,upper:2730,lower:2738},{ovl:74,upper:5282,lower:5290},{ovl:75,upper:4494,lower:4502},{ovl:76,upper:3774,lower:3782},{ovl:77,upper:4082,lower:4090},{ovl:78,upper:4614,lower:4622},{ovl:79,upper:3822,lower:3830},{ovl:80,upper:1270,lower:1278},{ovl:81,upper:1490,lower:1498},{ovl:82,upper:6726,lower:6734},{ovl:83,upper:2370,lower:2378},{ovl:84,upper:2914,lower:2922},{ovl:85,upper:4350,lower:4358},{ovl:86,upper:1930,lower:1938},{ovl:87,upper:6294,lower:6302},{ovl:89,upper:2218,lower:2226},{ovl:90,upper:3006,lower:3014},{ovl:91,upper:3938,lower:3946},{ovl:92,upper:866,lower:874},{ovl:93,upper:2610,lower:2618},{ovl:94,upper:6042,lower:6050},{ovl:95,upper:1570,lower:1578},{ovl:96,upper:1582,lower:1590},{ovl:97,upper:21754,lower:21762},{ovl:98,upper:11426,lower:11434},{ovl:100,upper:23142,lower:23150},{ovl:101,upper:11470,lower:11478},{ovl:119,upper:10730,lower:10738},{ovl:120,upper:10614,lower:10622},{ovl:121,upper:3582,lower:3590},{ovl:123,upper:9394,lower:9398},{ovl:124,upper:5438,lower:5446},{ovl:125,upper:4842,lower:4850},{ovl:128,upper:7834,lower:7842},{ovl:130,upper:4898,lower:4906}],h[u.Game.MP1_JPN]=[{upper:357526,lower:2},{upper:379858,lower:2},{upper:870598,lower:6},{upper:2462374,lower:6},{upper:2485734,lower:6},{upper:2488530,lower:6},{upper:2604202,lower:6},{upper:2621122,lower:6},{upper:2625478,lower:6},{upper:2628346,lower:6},{upper:2639334,lower:6},{upper:2641942,lower:6},{upper:2644794,lower:6},{upper:2647770,lower:6},{upper:2653298,lower:6},{upper:2658142,lower:6},{upper:2662286,lower:6},{upper:2666690,lower:6},{upper:2671526,lower:6},{upper:2675726,lower:6},{upper:2677334,lower:6},{upper:2679090,lower:6},{upper:2685974,lower:6},{upper:2688866,lower:6},{upper:2692082,lower:6},{upper:2696782,lower:6},{upper:2699034,lower:6},{upper:2705462,lower:6},{upper:2708010,lower:6},{upper:2711338,lower:6},{upper:2715646,lower:6},{upper:2716770,lower:6},{upper:2719490,lower:6},{upper:2725790,lower:6},{upper:2727746,lower:6},{upper:2729598,lower:6},{upper:2752006,lower:6},{upper:2770646,lower:6},{upper:2844246,lower:6},{upper:2856686,lower:6},{upper:3132114,lower:6},{upper:3143158,lower:6},{upper:3147502,lower:6},{upper:3167842,lower:2},{upper:3183310,lower:6},{upper:3197802,lower:6},{upper:3226138,lower:6},{upper:3238402,lower:6}],h[u.Game.MP2_USA]=[{upper:347090,lower:347098},{upper:408118,lower:408126},{upper:478570,lower:478574},{ovl:63,upper:154,lower:162},{ovl:64,upper:150,lower:158},{ovl:66,upper:154,lower:162},{ovl:68,upper:154,lower:162},{ovl:70,upper:158,lower:166},{ovl:72,upper:162,lower:170},{ovl:74,upper:154,lower:162},{ovl:77,upper:3602,lower:3610},{ovl:78,upper:174,lower:182},{ovl:79,upper:166,lower:174},{ovl:80,upper:166,lower:174},{ovl:81,upper:22522,lower:22530},{ovl:82,upper:13326,lower:13334},{ovl:83,upper:154,lower:162},{ovl:84,upper:3950,lower:3958},{ovl:85,upper:158,lower:166},{ovl:98,upper:206,lower:214},{ovl:109,upper:14818,lower:14826},{ovl:110,upper:5558,lower:5566},{ovl:112,upper:7002,lower:7010},{ovl:114,upper:30,lower:38}],h[u.Game.MP3_USA]=[{ovl:129,upper:73318,lower:73326},{ovl:129,upper:153366,lower:153374},{ovl:128,upper:77898,lower:77906},{ovl:128,upper:138886,lower:138894},{ovl:79,upper:25386,lower:25394},{ovl:80,upper:14662,lower:14670},{ovl:81,upper:6754,lower:6762},{ovl:83,upper:13170,lower:13178},{ovl:84,upper:7126,lower:7134},{ovl:98,upper:20950,lower:20958},{ovl:100,upper:14346,lower:14354},{ovl:101,upper:12106,lower:12114},{ovl:110,upper:41914,lower:41918},{ovl:113,upper:5682,lower:5690},{ovl:115,upper:298,lower:306},{ovl:116,upper:1374,lower:1382},{ovl:122,upper:10058,lower:10066},{ovl:124,upper:30842,lower:30846},{ovl:125,upper:6382,lower:6390},{ovl:125,upper:10422,lower:10430}],function(e){function t(){var e=n();if(!e)return null;var t=e[0];if(!t)return null;var i,a,o=t.upper,s=t.lower;"number"==typeof t.ovl?(i=(u=p.scenes.getDataView(t.ovl)).getUint16(o),a=u.getUint16(s)):(i=(h=d.romhandler.getDataView()).getUint16(o),a=h.getUint16(s));var l=f.getRegSetAddress(i,a);if($$debug)for(var c=1;c<e.length;c++){var u,h,m=e[c],_=m.upper,g=m.lower,v=void 0,y=void 0;if("number"==typeof m.ovl)v=(u=p.scenes.getDataView(m.ovl)).getUint16(_),y=u.getUint16(g);else v=(h=d.romhandler.getDataView()).getUint16(_),y=h.getUint16(g);if(v!==i||y!==a)throw"HVQFS.getROMOffset patch offset "+c+" seems wrong:\n          offset: "+r.$$hex(l)+" vs "+(r.$$hex(v>>>16)+r.$$hex(y,""))+"\n          reading upper: "+r.$$hex(_)+", lower: "+r.$$hex(g)+"\n          "}return l}function n(){return h[d.romhandler.getROMGame()].map(function(e){return e.lower<10&&!e.ovl?{upper:e.upper,lower:e.upper+2+e.lower}:{upper:e.upper,lower:e.lower,ovl:e.ovl}})}function u(e,n){var r=d.romhandler.getROMBuffer(),i=t(),a=i+new DataView(r,i).getUint32(4*(1+e)),o=new DataView(r,a),s=a+o.getUint32(4*(1+n)),l=a+o.getUint32(4*(1+n+1));return r.slice(s,l)}var m,_;function g(){var e,t;$$debug&&window.performance&&(e=performance.now());var n,i,a,o=b();m=new Array(o),_=new Array(o);for(var s=0;s<o;s++){var l=w(s);m[s]=new Array(l);for(var c=0;c<l;c++)m[s][c]=u(s,c);n=s,i=void 0,a=void 0,i=new DataView(m[n][0],0),a={tileWidth:i.getUint32(0),tileHeight:i.getUint32(4),tileCountX:i.getUint32(8),tileCountY:i.getUint32(12),fov:i.getFloat32(16),scaleFactor:i.getFloat32(20),cameraEyePosX:i.getFloat32(24),cameraEyePosZ:i.getFloat32(28),cameraEyePosY:i.getFloat32(32),lookatPointX:i.getFloat32(36),lookatPointZ:i.getFloat32(40),lookatPointY:i.getFloat32(44),cameraUpVecX:i.getFloat32(48),cameraUpVecZ:i.getFloat32(52),cameraUpVecY:i.getFloat32(56)},x(n,a)}return $$debug&&e&&(t=performance.now(),r.$$log("HVQFS.extract() -> "+(t-e)+"ms")),m}function v(e,t,n){var r,a,o,s=w(e);t.setUint32(n,s+1),r=e,a=new DataView(m[r][0],0),o=A(r),a.setUint32(0,o.tileWidth),a.setUint32(4,o.tileHeight),a.setUint32(8,o.tileCountX),a.setUint32(12,o.tileCountY),a.setFloat32(16,o.fov),a.setFloat32(20,o.scaleFactor),a.setFloat32(24,o.cameraEyePosX),a.setFloat32(28,o.cameraEyePosZ),a.setFloat32(32,o.cameraEyePosY),a.setFloat32(36,o.lookatPointX),a.setFloat32(40,o.lookatPointZ),a.setFloat32(44,o.lookatPointY),a.setFloat32(48,o.cameraUpVecX),a.setFloat32(52,o.cameraUpVecZ),a.setFloat32(56,o.cameraUpVecY);for(var l=n+4,c=n+4+4*(s+1),u=0;u<s;u++)t.setUint32(l,c-n),l+=4,c=y(e,u,t,c),c=i.makeDivisibleBy(c,4);return t.setUint32(l,c-n),c}function y(e,t,n,r){var i=m[e][t];return c.copyRange(n,i,r,0,i.byteLength),r+i.byteLength}function A(e){return _[e]}function x(e,t){_[e]=t}function S(e){var t=m[e].length-1,n=A(e),i=n.tileWidth,c=n.tileHeight,u=n.tileCountX,p=n.tileCountY,f=i*u,h=c*p;r.$$log("HVQFS.readBackground, dir: "+e+", tiles: "+t+", board is "+f+"x"+h);for(var _=[],g=1===d.romhandler.getGameVersion()?1:2;g<m[e].length;g++)_.push(new DataView(m[e][g]));for(var v=_.map(a.decode).map(function(e){return new DataView(e)}),y=[],x=p-1;x>=0;x--)for(var S=0;S<u;S++)y.push(v[x*u+S]);var b=o.fromTiles(y,u,p,2*i,c),w=s.RGBA5551toRGBA32(b,f,h),E=new Uint8Array(w),P=l.createContext(f,h).createImageData(f,h);for(g=0;g<E.byteLength;g++)P.data[g]=E[g];return P}function b(){if(m)return m.length;var e=d.romhandler.getROMBuffer(),n=t();return null===n?0:new DataView(e,n).getUint32(0)-1}function w(e){if(m&&m[e])return m[e].length;var n=d.romhandler.getROMBuffer(),r=t();if(null===r)return 0;var i=r+new DataView(n,r).getUint32(4*(1+e));return new DataView(n,i).getUint32(0)-1}e.getROMOffset=t,e.setROMOffset=function(e,t){r.$$log("HVQFS.setROMOffset("+r.$$hex(e)+"})");for(var i=n(),a=f.getRegSetUpperAndLower(e),o=a[0],s=a[1],l=0;l<i.length;l++){var c=i[l],u=c.upper,d=c.lower;if("number"==typeof c.ovl){var h=p.scenes.getDataView(c.ovl);h.setUint16(u,o),h.setUint16(d,s)}else{var m=new DataView(t);m.setUint16(u,o),m.setUint16(d,s)}}r.$$log("HVQFS.setROMOffset -> "+r.$$hex(o<<16|s))},e.getPatchOffsets=n,e.get=function(e,t){return m[e][t]},e.read=u,e.write=function(e,t,n){m[e][t]=n.slice(0)},e.clearCache=function(){m=null,_=null},e.extract=g,e.extractAsync=function(){return new Promise(function(e,t){g(),e()})},e.pack=function(e,t){void 0===t&&(t=0);var n=new DataView(e,t),r=b();n.setUint32(0,r+1);for(var a=4,o=4+4*(r+1),s=0;s<r;s++)n.setUint32(a,o),a+=4,o=v(s,n,o),o=i.makeDivisibleBy(o,4);return n.setUint32(a,o),o},e.getMetadata=A,e._setMetadata=x,e.updateMetadata=function(e,t){var n=A(e);"tileWidth"in t&&(n.tileWidth=t.tileWidth),"tileHeight"in t&&(n.tileHeight=t.tileHeight),"tileCountX"in t&&(n.tileCountX=t.tileCountX),"tileCountY"in t&&(n.tileCountY=t.tileCountY),"fov"in t&&(n.fov=t.fov),"scaleFactor"in t&&(n.scaleFactor=t.scaleFactor),"cameraEyePosX"in t&&(n.cameraEyePosX=t.cameraEyePosX),"cameraEyePosZ"in t&&(n.cameraEyePosZ=t.cameraEyePosZ),"cameraEyePosY"in t&&(n.cameraEyePosY=t.cameraEyePosY),"lookatPointX"in t&&(n.lookatPointX=t.lookatPointX),"lookatPointZ"in t&&(n.lookatPointZ=t.lookatPointZ),"lookatPointY"in t&&(n.lookatPointY=t.lookatPointY),"cameraUpVecX"in t&&(n.cameraUpVecX=t.cameraUpVecX),"cameraUpVecZ"in t&&(n.cameraUpVecZ=t.cameraUpVecZ),"cameraUpVecY"in t&&(n.cameraUpVecY=t.cameraUpVecY),x(e,n)},e.readBackgroundImgData=S,e.readBackground=function(e){var t=A(e),n=function(e){var t=_[e];return[t.tileWidth*t.tileCountX,t.tileHeight*t.tileCountY]}(e),r=n[0],i=n[1],a=l.createContext(r,i),o=S(e);return a.putImageData(o,0,0),Object.assign({},t,{width:r,height:i,src:a.canvas.toDataURL()})},e.writeBackground=function(e,t,n,i){var l=n/64,c=i/48,u=l*c;r.$$log("HVQFS.writeBackground, dir: "+e+", img is "+n+"x"+i);for(var p=o.toTiles(t.data,l,c,256,48).map(function(e){return s.RGBA5551fromRGBA32(e,64,48)}).map(function(e){return a.encode(e,64,48)}),f=[],h=c-1;h>=0;h--)for(var _=0;_<l;_++)f.push(p[h*l+_]);if(1===d.romhandler.getGameVersion())for(var g=1;g<=u;g++)m[e][g]=f[g-1];else for(g=2;g<=u+1;g++)m[e][g]=f[g-2]},e.getDirectoryCount=b,e.getHVQFileCount=w,e.getByteLength=function(){var e=0,t=m.length;e+=4,e+=4*(t+1);for(var n=0;n<t;n++){var r=m[n].length;e+=4,e+=4*(r+1);for(var a=0;a<r;a++)e+=m[n][a].byteLength,e=i.makeDivisibleBy(e,4)}return e}}(t.hvqfs||(t.hvqfs={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(85);var i=n(119),a=n(120),o=n(121),s=n(122),l=n(123),c=n(124),u=n(125),d=n(126),p=n(127),f=n(128),h=n(129),m=n(130),_=n(10);t.BooEvent={id:"BOO",name:"Visit Boo",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP1_USA,r.Game.MP2_USA,r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:return a.BooEvent1.parse(e,t);case 2:return l.BooEvent2.parse(e,t);case 3:return c.BooEvent3.parse(e,t)}},write:function(e,t,n,r){switch(n.gameVersion){case 1:return a.BooEvent1.write(e,t,n,r);case 2:return l.BooEvent2.write(e,t,n,r);case 3:return c.BooEvent3.write(e,t,n,r)}}},_.addEventToLibrary(t.BooEvent),t.StarEvent={id:"STAR",name:"Buy star",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,fakeEvent:!0,supportedGames:[r.Game.MP1_USA,r.Game.MP2_USA,r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:return i.StarEvent1.parse(e,t);case 2:return u.StarEvent2.parse(e,t)}return!1},write:function(e,t,n,r){switch(n.gameVersion){case 1:return i.StarEvent1.write(e,t,n,r);case 2:return u.StarEvent2.write(e,t,n,r);case 3:return d.StarEvent3.write(e,t,n,r)}return!1}},_.addEventToLibrary(t.StarEvent),t.BankEvent={id:"BANK",name:"Visit Bank",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP2_USA,r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:return!1;case 2:return p.BankEvent2.parse(e,t);case 3:return f.BankEvent3.parse(e,t)}return!1},write:function(e,t,n,r){switch(n.gameVersion){case 1:return!1;case 2:return p.BankEvent2.write(e,t,n,r);case 3:return f.BankEvent3.write(e,t,n,r)}return!1}},_.addEventToLibrary(t.BankEvent),t.ItemShopEvent={id:"ITEMSHOP",name:"Visit Item Shop",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP2_USA,r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:return!1;case 2:return h.ItemShopEvent2.parse(e,t);case 3:return m.ItemShopEvent3.parse(e,t)}return!1},write:function(e,t,n,r){switch(n.gameVersion){case 1:return!1;case 2:return h.ItemShopEvent2.write(e,t,n,r);case 3:return m.ItemShopEvent3.write(e,t,n,r)}return!1}},_.addEventToLibrary(t.ItemShopEvent),t.Gate={id:"GATE",name:"Skeleton Key Gate",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:case 2:return!1;case 3:return s.Gate3.parse(e,t)}return!1},write:function(e,t,n,r){switch(n.gameVersion){case 1:case 2:return!1;case 3:return s.Gate3.write(e,t,n,r)}return!1}},_.addEventToLibrary(t.Gate),t.GateClose={id:"GATECLOSE",name:"Skeleton Key Gate Close",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,parameters:[{name:"gateIndex",type:r.EventParameterType.Number}],fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){switch(t.gameVersion){case 1:case 2:return!1;case 3:return o.GateClose3.parse(e,t)}return!1},write:function(e,t,n,r){switch(n.gameVersion){case 1:case 2:return!1;case 3:return o.GateClose3.write(e,t,n,r)}return!1}},_.addEventToLibrary(t.GateClose)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(137),o=n(1),s=n(4),l=n(234),c=n(235),u=n(13);function d(){t.currentCheats=[]}function p(){return t.currentCheats.reduce(o.join)}t.currentCheats=[],t.reset=d,d(),t.getCheatBuffer=p,t.getCheatRoutineBuffer=function(e){var t=(e=e||{}).endInsts,n=p(),r=n.byteLength+(t?4*t.length:0),i=new ArrayBuffer(r),a=new DataView(i),s=0;if(o.copyRange(i,n,s,0,n.byteLength),s+=n.byteLength,t)for(var l=0;l<t.length;l++)a.setUint32(s,t[l]),s+=4;return i};var f=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.inputEl=null,n.state={showApplied:!1},n.applyCheat=function(){var e=n.inputEl.value,r=l.Parser.parse(e);if(r){var i=(new c.Compiler).compile(r);i?(t.currentCheats.push(i),n.inputEl.value="",n.setState({showApplied:!0}),setTimeout(function(){n.setState({showApplied:!1})},3e3)):u.showMessage("There was an error compiling the entered cheats")}else u.showMessage("There was an error parsing the entered cheats")},n}return i(n,e),n.prototype.render=function(){var e,t=this,n=a.romSupportsCheats();return this.state.showApplied&&(e=s.createElement("span",{className:"gsApplied"},"Applied!")),s.createElement("div",{id:"gamesharkView"},s.createElement("h3",null,"Gameshark Cheats"),!n&&s.createElement("p",null,"Embeddable Gameshark cheats are not supported with this ROM."),n&&s.createElement(s.Fragment,null,s.createElement("p",null,"Paste cheats in the box below to embed them in the ROM."),s.createElement("textarea",{ref:function(e){t.inputEl=e},rows:10}),s.createElement("button",{className:"patchBtn",onClick:this.applyCheat},"Apply"),e))},n}(s.Component);t.GamesharkView=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(113),i=n(3),a=n(1),o=n(0),s=n(72),l=n(84),c=n(10);function u(e,n){var r=t.CustomAsmHelper.readDiscreteProperty(e,"NAME");if(!r||!r.trim())throw new Error("Custom event must have a name");var i=r=r.trim(),a=t.CustomAsmHelper.readExecutionType(e);if(!a)throw new Error("Custom even must have execution type");var s=t.CustomAsmHelper.readSupportedGames(e);if(!s)throw new Error("Custom even must have supported games list");var l=t.CustomAsmHelper.readParameters(e);if(n){t.CustomAsmHelper.validateParameters(l);for(var c=0;c<s.length;c++){var u=s[c];try{t.CustomAsmHelper.testAssemble(e,l,{game:u})}catch(t){var d="Failed a test assembly for "+o.getGameName(u)+". The event may need adjustments before it can be used.\n\n"+t.toString();throw console.error(d+"\n\n"+e),new Error(d)}}}return{id:i,name:r,custom:!0,asm:e,activationType:o.EventActivationType.LANDON,executionType:a,supportedGames:s,parameters:l}}t.CustomAsmHelper={readDiscreteProperty:function(e,t){var n=new RegExp("^\\s*[;\\/]+\\s*"+t+":(.+)$","gim").exec(e);return n?n[1]:null},readDiscretePropertySet:function(e,t){var n=new RegExp("^\\s*[;\\/]+\\s*"+t+":(.+)$","gim"),r=null,i=[];do{(r=n.exec(e))&&i.push(r[1].trim())}while(r);return i},readSupportedGames:function(e){var n=t.CustomAsmHelper.readDiscreteProperty(e,"GAMES");if(null!==n){for(var r=n.trim().split(","),i=[],a=0;a<r.length;a++){var s=r[a];o.Game[s]&&i.push(o.Game[s])}return i}return null},readExecutionType:function(e){var n=t.CustomAsmHelper.readDiscreteProperty(e,"EXECUTION");if(n)return o.getExecutionTypeByName(n.trim())},readParameters:function(e){var n=t.CustomAsmHelper.readDiscretePropertySet(e,"PARAM"),r=[];return n.forEach(function(e){var n=e.split("|");if(2===n.length){var i={name:n[1],type:n[0]};try{t.CustomAsmHelper.validateParameters([i]),r.push(i)}catch(e){}}}),r},validParameterNameRegex:/^[\w\?\!]*$/,validateParameters:function(e){e&&e.forEach(function(e){if(!e.name)throw new Error("An event parameter didn't have a name");if(!e.type)throw new Error("An event parameter didn't have a type");if(!e.name.match(t.CustomAsmHelper.validParameterNameRegex))throw new Error("Event parameter name '"+e.name+"' is not valid");if(-1===o.EventParameterTypes.indexOf(e.type))throw new Error("Event parameter type "+e.type+" is not recognized")})},testAssemble:function(e,t,n){void 0===n&&(n={});var r={};t&&t.length&&t.forEach(function(e){r[e.name]=0});var i=u(e),a=l.prepAsm(e,i,{parameterValues:r},Object.assign({addr:0},n));return s.assemble(a)}},t.createCustomEvent=u,t.writeCustomEvent=function(e,t,n,r,o){if(i.$$log("Writing custom event",t,n),2!==n.gameVersion)return r;var c=u(r),d=l.prepAsm(r,c,t,n),p=s.assemble(d);return i.$$log(d),a.copyRange(e,p,0,0,p.byteLength),[n.offset,p.byteLength]};var d=r.getSavedEvents();d&&d.length&&d.forEach(function(e){if(e&&e.asm)try{var t=u(e.asm);c.addEventToLibrary(t)}catch(e){console.error("Error reading cached event: "+e.toString())}})},function(e,t,n){"use strict";var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),i=this.getFocusKey();if(r===i&&r===e){var a=this.getStartOffset();return t<=this.getEndOffset()&&a<=n}if(e!==r&&e!==i)return!1;var o=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=o&&n>=o},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}((0,n(5).Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1}));e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(/\//g,"-")}e.exports=function(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).map(r).join(" "):Array.prototype.map.call(arguments,r).join(" ")}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(63);t.Button=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onClick=function(){t.props.onClick(t.props.id)},t}return i(t,e),t.prototype.render=function(){var e="nbButton";return this.props.css&&(e+=" "+this.props.css),a.createElement("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:o.makeKeyClick(this.onClick,this)},this.props.children)},t}(a.Component),t.ToggleButton=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onClick=function(){!1===t.props.allowDeselect&&t.props.pressed||t.props.onToggled(t.props.id,!t.props.pressed)},t}return i(t,e),t.prototype.render=function(){var e="toggleButton"+(this.props.pressed?" pressed":"");return this.props.css&&(e+=" "+this.props.css),a.createElement("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onClick,onKeyDown:o.makeKeyClick(this.onClick,this)},this.props.children)},t}(a.Component),t.ToggleGroup=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(n,e),n.prototype.render=function(){var e=this,n=this.props.items.map(function(n){return a.createElement(t.ToggleButton,{id:n.id,key:n.id,pressed:n.selected,allowDeselect:e.props.allowDeselect,title:n.title,onToggled:e.props.onToggleClick},n.text)});return a.createElement("div",{className:this.props.groupCssClass},n)},n}(a.Component)},function(e,t,n){"use strict";for(var r=n(8),i=n(34),a=n(80),o=n(21),s=new Array(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}t.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,l=new Array(2*o);for(n=0,t=0;t<o;)if((i=e[t++])<128)l[n++]=i;else if((a=s[i])>4)l[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<o;)i=i<<6|63&e[t++],a--;a>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var n=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=n;(n=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),n.set(a,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}(n),l=n;o!==n.length&&(i.uint8array?(l=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(l=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=u},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyObject=function(e){return JSON.parse(JSON.stringify(e))},t.equals=function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(200),a=n(205),o=n(206),s=n(207);function l(e){switch(e){case r.Game.MP1_USA:return i.getBoardInfos();case r.Game.MP1_JPN:return a.getBoardInfos();case r.Game.MP2_USA:return o.getBoardInfos();case r.Game.MP3_USA:return s.getBoardInfos()}throw new Error("Missing boardinfo for "+e)}t.getBoardInfos=l,t.getBoardInfoByIndex=function(e,t){return l(e)[t]},t.getArrowRotationLimit=function(e){return 8}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBA5551toRGBA32=function(e,t,n){for(var r=new ArrayBuffer(t*n*4),i=new Uint8Array(r),a=new DataView(e),o=0,s=0;s<t*n;s++){var l=a.getUint16(2*s);i[o]=8*((63488&l)>>>11),i[o+1]=8*((1984&l)>>>6),i[o+2]=8*((62&l)>>>1),i[o+3]=1&l?255:0,o+=4}return r},t.RGBA5551fromRGBA32=function(e,t,n){for(var r=new ArrayBuffer(t*n*2),i=new DataView(r),a=new Uint8Array(e),o=0,s=0;s<t*n;s++){var l=a[o]/8;l<<=11;var c=a[o+1]/8;c<<=6;var u=a[o+2]/8;u<<=1;var d=a[o+3]>>>7;i.setUint16(2*s,65535&(l|c|u|d)),o+=4}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(1),a=n(0),o=n(9),s=n(16),l=n(32),c=n(208),u=n(218),d=n(219),p=n(220),f=n(221),h={};h[a.Game.MP1_USA]=[{type:"S2",relative:0,offsets:[{upper:399174,lower:399178},{ovl:110,upper:3682,lower:3686}]},{type:"S2",relative:2356512,offsets:[{upper:110378,lower:110382},{upper:399182,lower:399186},{upper:399230,lower:399234},{ovl:110,upper:3690,lower:3694},{ovl:110,upper:3730,lower:3734}]},{type:"T3",relative:3118144,offsets:[{upper:110386,lower:110390},{upper:399150,lower:399154},{upper:399238,lower:399242},{ovl:110,upper:3662,lower:3666},{ovl:110,upper:3738,lower:3742}]},{type:"T3",relative:6811072,offsets:[{upper:110350,lower:110354},{upper:399202,lower:399206},{ovl:110,upper:3706,lower:3710}]},{type:"FXD0",relative:8074688,offsets:[{upper:110426,lower:110430}]},{relative:8076784,offsets:[{upper:110438,lower:110442}]}],h[a.Game.MP1_JPN]=[],h[a.Game.MP2_USA]=[{type:"MBF0",relative:0,offsets:[{upper:119618,lower:119622},{upper:502254,lower:502258},{upper:502290,lower:502294}]},{type:"SBF0",relative:1809472,offsets:[{upper:502266,lower:502270}]},{type:"SBF0",relative:5697472,offsets:[{upper:119630,lower:119634},{upper:502302,lower:502306}]},{type:"FXD0",relative:7184656,offsets:[{upper:119682,lower:119686}]}],h[a.Game.MP3_USA]=[{type:"MBF0",relative:0,offsets:[{upper:62058,lower:62062},{upper:311026,lower:311030}]},{type:"SBF0",relative:1920048,offsets:[{upper:62070,lower:62074},{upper:311038,lower:311042}]},{type:"FXD0",relative:6796288,offsets:[{upper:62110,lower:62114}]}],function(e){function t(e){void 0===e&&(e=0);var t=n()[e];if(!t)return null;var i,a,c=t.offsets[0],u=c.upper,d=c.lower;if("number"==typeof c.ovl){var p=s.scenes.getDataView(c.ovl);i=p.getUint16(u),a=p.getUint16(d)}else{var f=o.romhandler.getDataView();i=f.getUint16(u),a=f.getUint16(d)}var h=l.getRegSetAddress(i,a);return r.$$log("Audio.getROMOffset -> "+r.$$hex(h)),$$debug&&t.offsets.forEach(function(t,n){var i,a,c=t.upper,u=t.lower;if("number"==typeof t.ovl){var d=s.scenes.getDataView(t.ovl);i=d.getUint16(c),a=d.getUint16(u)}else{var p=o.romhandler.getDataView();i=p.getUint16(c),a=p.getUint16(u)}var f=l.getRegSetAddress(i,a);if(f!==h)throw"AudioFS.getROMOffset patch offset "+e+"/"+n+" seems wrong:\n          offset: "+r.$$hex(h)+" vs "+r.$$hex(f)+"\n          reading upper: "+r.$$hex(c)+", lower: "+r.$$hex(u)+"\n          "}),h}function n(){return h[o.romhandler.getROMGame()]}var m,_;function g(){var e=o.romhandler.getROMBuffer(),r=t();if(null!==r){var i=v();m=e.slice(r,r+i),_=[];for(var a=n(),s=0;s<a.length;s++)switch(a[s].type){case"S2":var l=t(s);_.push(new c.S2(o.romhandler.getDataView(l)));break;case"T3":var h=t(s);_.push(new p.T3(o.romhandler.getDataView(h)));break;case"MBF0":var g=t(s);_.push(new u.MBF0(o.romhandler.getDataView(g)));break;case"SBF0":var y=t(s);_.push(new d.SBF0(o.romhandler.getDataView(y)));break;case"FXD0":var A=t(s);_.push(new f.FXD0(o.romhandler.getDataView(A)));break;default:_.push(null)}}}function v(){var e=o.romhandler.getROMGame();switch(e){case a.Game.MP1_USA:return 8076784;case a.Game.MP1_JPN:return 16;case a.Game.MP2_USA:return 7187280;case a.Game.MP3_USA:return 6798912}throw"Figure out the audio section length for "+e}e.getROMOffset=t,e.setROMOffset=function(e,t){r.$$log("Audio.setROMOffset("+r.$$hex(e)+")");for(var i=n(),a=0;a<i.length;a++)for(var o=i[a],c=e+o.relative,u=l.getRegSetUpperAndLower(c),d=u[0],p=u[1],f=0;f<o.offsets.length;f++){var h=o.offsets[f],m=h.upper,_=h.lower;if("number"==typeof h.ovl){var g=s.scenes.getDataView(h.ovl);g.setUint16(m,d),g.setUint16(_,p)}else{var v=new DataView(t);v.setUint16(m,d),v.setUint16(_,p)}}},e.getPatchInfo=n,e.read=function(e){throw"audio.read not implemented"},e.write=function(e,t){throw"audio.write not implemented"},e.getSequenceTableCount=function(){for(var e=0,t=0;t<_.length;t++){var n=_[t];n&&"midis"in n&&e++}return e},e.getSequenceTable=function(e){if(!_)return null;for(var t=-1,n=0;n<_.length;n++){var r=_[n];if(r&&"midis"in r&&++t===e)return r}return null},e.getSoundTableCount=function(){for(var e=0,t=0;t<_.length;t++){var n=_[t];n&&"sounds"in n&&e++}return e},e.getSoundTable=function(e){if(!_)return null;for(var t=-1,n=0;n<_.length;n++){var r=_[n];if(r&&"sounds"in r&&++t===e)return r}return null},e.clearCache=function(){m=null,_=null},e.extract=g,e.extractAsync=function(){return new Promise(function(e,t){g(),e()})},e.pack=function(e,t){return void 0===t&&(t=0),i.copyRange(e,m,t,0,m.byteLength),m.byteLength},e.getByteLength=v}(t.audio||(t.audio={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(222),a=n(223),o=n(224);function s(e){switch(e){case r.Game.MP1_USA:return i.default;case r.Game.MP1_JPN:case r.Game.MP1_PAL:throw"Symbols not available for game type "+e;case r.Game.MP2_USA:return a.default;case r.Game.MP2_JPN:case r.Game.MP2_PAL:throw"Symbols not available for game type "+e;case r.Game.MP3_USA:return o.default;case r.Game.MP3_JPN:case r.Game.MP3_PAL:throw"Symbols not available for game type "+e}throw"Unrecognized game type "+e}t.getSymbols=function(e,t){var n=s(e);return n?(t&&(n=n.filter(function(e){return e.type===t})),n=n.filter(function(e){return"_"!==e.name[0]&&"?"!==e.name[0]})):[]},t.getSymbol=function(e,t){var n=s(e);if(!n)throw new Error("Symbols aren't available for "+e+".");for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r].addr;throw new Error("Symbol "+t+" wasn't found for "+e+".")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.cutFromWhole=function(e,t,n,r,i,a,o,s){for(var l=o*(r/8),c=new ArrayBuffer(l*s),u=new Uint8Array(c),d=new Uint8Array(e),p=t*(r/8),f=i*(r/8),h=0,m=a;m<a+s;m++)for(var _=f+p*m,g=0;g<l;g++)u[h++]=d[_+g];return c},t.toArrayBuffer=function(e,t,n){var i=r.createContext(t,n);return i.drawImage(e,0,0,t,n),i.getImageData(0,0,t,n).data.buffer},t.invertColor=function(e){return 255-(e>>>16&255)<<16|255-(e>>>8&255)<<8|255-(255&e)}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"WebGLMultisampleRenderTarget",function(){return fn}),n.d(t,"WebGLRenderTargetCube",function(){return hn}),n.d(t,"WebGLRenderTarget",function(){return pn}),n.d(t,"WebGLRenderer",function(){return Ca}),n.d(t,"ShaderLib",function(){return On}),n.d(t,"UniformsLib",function(){return Dn}),n.d(t,"UniformsUtils",function(){return Cn}),n.d(t,"ShaderChunk",function(){return xn}),n.d(t,"FogExp2",function(){return Ta}),n.d(t,"Fog",function(){return Va}),n.d(t,"Scene",function(){return Fa}),n.d(t,"Sprite",function(){return Ma}),n.d(t,"LOD",function(){return La}),n.d(t,"SkinnedMesh",function(){return Ba}),n.d(t,"Skeleton",function(){return ka}),n.d(t,"Bone",function(){return Ia}),n.d(t,"Mesh",function(){return Or}),n.d(t,"LineSegments",function(){return Ua}),n.d(t,"LineLoop",function(){return za}),n.d(t,"Line",function(){return Na}),n.d(t,"Points",function(){return Wa}),n.d(t,"Group",function(){return pa}),n.d(t,"VideoTexture",function(){return Ha}),n.d(t,"DataTexture",function(){return mn}),n.d(t,"DataTexture2DArray",function(){return Hr}),n.d(t,"DataTexture3D",function(){return qr}),n.d(t,"CompressedTexture",function(){return qa}),n.d(t,"CubeTexture",function(){return Wr}),n.d(t,"CanvasTexture",function(){return Ka}),n.d(t,"DepthTexture",function(){return Ya}),n.d(t,"Texture",function(){return un}),n.d(t,"AnimationLoader",function(){return Ns}),n.d(t,"CompressedTextureLoader",function(){return Us}),n.d(t,"DataTextureLoader",function(){return zs}),n.d(t,"CubeTextureLoader",function(){return Ws}),n.d(t,"TextureLoader",function(){return Hs}),n.d(t,"ObjectLoader",function(){return Fl}),n.d(t,"MaterialLoader",function(){return Pl}),n.d(t,"BufferGeometryLoader",function(){return Tl}),n.d(t,"DefaultLoadingManager",function(){return ks}),n.d(t,"LoadingManager",function(){return Bs}),n.d(t,"ImageLoader",function(){return Gs}),n.d(t,"ImageBitmapLoader",function(){return jl}),n.d(t,"FontLoader",function(){return Gl}),n.d(t,"FileLoader",function(){return js}),n.d(t,"Loader",function(){return Wl}),n.d(t,"LoaderUtils",function(){return Cl}),n.d(t,"Cache",function(){return Ls}),n.d(t,"AudioLoader",function(){return nc}),n.d(t,"SpotLightShadow",function(){return vl}),n.d(t,"SpotLight",function(){return yl}),n.d(t,"PointLight",function(){return Al}),n.d(t,"RectAreaLight",function(){return El}),n.d(t,"HemisphereLight",function(){return _l}),n.d(t,"DirectionalLightShadow",function(){return Sl}),n.d(t,"DirectionalLight",function(){return bl}),n.d(t,"AmbientLight",function(){return wl}),n.d(t,"LightShadow",function(){return gl}),n.d(t,"Light",function(){return ml}),n.d(t,"StereoCamera",function(){return rc}),n.d(t,"PerspectiveCamera",function(){return ha}),n.d(t,"OrthographicCamera",function(){return xl}),n.d(t,"CubeCamera",function(){return ic}),n.d(t,"ArrayCamera",function(){return ma}),n.d(t,"Camera",function(){return fa}),n.d(t,"AudioListener",function(){return oc}),n.d(t,"PositionalAudio",function(){return lc}),n.d(t,"AudioContext",function(){return tc}),n.d(t,"AudioAnalyser",function(){return cc}),n.d(t,"Audio",function(){return sc}),n.d(t,"VectorKeyframeTrack",function(){return Os}),n.d(t,"StringKeyframeTrack",function(){return Ds}),n.d(t,"QuaternionKeyframeTrack",function(){return Fs}),n.d(t,"NumberKeyframeTrack",function(){return Ts}),n.d(t,"ColorKeyframeTrack",function(){return Cs}),n.d(t,"BooleanKeyframeTrack",function(){return Ps}),n.d(t,"PropertyMixer",function(){return uc}),n.d(t,"PropertyBinding",function(){return Cc}),n.d(t,"KeyframeTrack",function(){return Es}),n.d(t,"AnimationUtils",function(){return As}),n.d(t,"AnimationObjectGroup",function(){return Tc}),n.d(t,"AnimationMixer",function(){return Fc}),n.d(t,"AnimationClip",function(){return Rs}),n.d(t,"Uniform",function(){return Dc}),n.d(t,"InstancedBufferGeometry",function(){return Oc}),n.d(t,"BufferGeometry",function(){return sr}),n.d(t,"Geometry",function(){return Kn}),n.d(t,"InterleavedBufferAttribute",function(){return Oa}),n.d(t,"InstancedInterleavedBuffer",function(){return Rc}),n.d(t,"InterleavedBuffer",function(){return Da}),n.d(t,"InstancedBufferAttribute",function(){return Mc}),n.d(t,"Face3",function(){return Ln}),n.d(t,"Object3D",function(){return Gn}),n.d(t,"Raycaster",function(){return Lc}),n.d(t,"Layers",function(){return kn}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"Clock",function(){return ac}),n.d(t,"QuaternionLinearInterpolant",function(){return Vs}),n.d(t,"LinearInterpolant",function(){return bs}),n.d(t,"DiscreteInterpolant",function(){return ws}),n.d(t,"CubicInterpolant",function(){return Ss}),n.d(t,"Interpolant",function(){return xs}),n.d(t,"Triangle",function(){return Fr}),n.d(t,"Math",function(){return Wt}),n.d(t,"Spherical",function(){return Ic}),n.d(t,"Cylindrical",function(){return jc}),n.d(t,"Plane",function(){return vn}),n.d(t,"Frustum",function(){return yn}),n.d(t,"Sphere",function(){return gn}),n.d(t,"Ray",function(){return Vr}),n.d(t,"Matrix4",function(){return An}),n.d(t,"Matrix3",function(){return Yt}),n.d(t,"Box3",function(){return _n}),n.d(t,"Box2",function(){return Nc}),n.d(t,"Line3",function(){return Uc}),n.d(t,"Euler",function(){return Bn}),n.d(t,"Vector4",function(){return dn}),n.d(t,"Vector3",function(){return Kt}),n.d(t,"Vector2",function(){return Ht}),n.d(t,"Quaternion",function(){return qt}),n.d(t,"Color",function(){return Vn}),n.d(t,"ImmediateRenderObject",function(){return zc}),n.d(t,"VertexNormalsHelper",function(){return Gc}),n.d(t,"SpotLightHelper",function(){return Wc}),n.d(t,"SkeletonHelper",function(){return Hc}),n.d(t,"PointLightHelper",function(){return qc}),n.d(t,"RectAreaLightHelper",function(){return Kc}),n.d(t,"HemisphereLightHelper",function(){return Yc}),n.d(t,"GridHelper",function(){return $c}),n.d(t,"PolarGridHelper",function(){return Xc}),n.d(t,"PositionalAudioHelper",function(){return Zc}),n.d(t,"FaceNormalsHelper",function(){return Jc}),n.d(t,"DirectionalLightHelper",function(){return Qc}),n.d(t,"CameraHelper",function(){return eu}),n.d(t,"BoxHelper",function(){return tu}),n.d(t,"Box3Helper",function(){return nu}),n.d(t,"PlaneHelper",function(){return ru}),n.d(t,"ArrowHelper",function(){return iu}),n.d(t,"AxesHelper",function(){return au}),n.d(t,"Shape",function(){return hl}),n.d(t,"Path",function(){return fl}),n.d(t,"ShapePath",function(){return Nl}),n.d(t,"Font",function(){return Ul}),n.d(t,"CurvePath",function(){return pl}),n.d(t,"Curve",function(){return qs}),n.d(t,"ImageUtils",function(){return ln}),n.d(t,"ShapeUtils",function(){return ko}),n.d(t,"WebGLUtils",function(){return da}),n.d(t,"WireframeGeometry",function(){return $a}),n.d(t,"ParametricGeometry",function(){return Xa}),n.d(t,"ParametricBufferGeometry",function(){return Za}),n.d(t,"TetrahedronGeometry",function(){return eo}),n.d(t,"TetrahedronBufferGeometry",function(){return to}),n.d(t,"OctahedronGeometry",function(){return no}),n.d(t,"OctahedronBufferGeometry",function(){return ro}),n.d(t,"IcosahedronGeometry",function(){return io}),n.d(t,"IcosahedronBufferGeometry",function(){return ao}),n.d(t,"DodecahedronGeometry",function(){return oo}),n.d(t,"DodecahedronBufferGeometry",function(){return so}),n.d(t,"PolyhedronGeometry",function(){return Ja}),n.d(t,"PolyhedronBufferGeometry",function(){return Qa}),n.d(t,"TubeGeometry",function(){return lo}),n.d(t,"TubeBufferGeometry",function(){return co}),n.d(t,"TorusKnotGeometry",function(){return uo}),n.d(t,"TorusKnotBufferGeometry",function(){return po}),n.d(t,"TorusGeometry",function(){return fo}),n.d(t,"TorusBufferGeometry",function(){return ho}),n.d(t,"TextGeometry",function(){return Wo}),n.d(t,"TextBufferGeometry",function(){return Ho}),n.d(t,"SphereGeometry",function(){return qo}),n.d(t,"SphereBufferGeometry",function(){return Ko}),n.d(t,"RingGeometry",function(){return Yo}),n.d(t,"RingBufferGeometry",function(){return $o}),n.d(t,"PlaneGeometry",function(){return ur}),n.d(t,"PlaneBufferGeometry",function(){return dr}),n.d(t,"LatheGeometry",function(){return Xo}),n.d(t,"LatheBufferGeometry",function(){return Zo}),n.d(t,"ShapeGeometry",function(){return Jo}),n.d(t,"ShapeBufferGeometry",function(){return Qo}),n.d(t,"ExtrudeGeometry",function(){return No}),n.d(t,"ExtrudeBufferGeometry",function(){return Uo}),n.d(t,"EdgesGeometry",function(){return ts}),n.d(t,"ConeGeometry",function(){return is}),n.d(t,"ConeBufferGeometry",function(){return as}),n.d(t,"CylinderGeometry",function(){return ns}),n.d(t,"CylinderBufferGeometry",function(){return rs}),n.d(t,"CircleGeometry",function(){return os}),n.d(t,"CircleBufferGeometry",function(){return ss}),n.d(t,"BoxGeometry",function(){return lr}),n.d(t,"CubeGeometry",function(){return lr}),n.d(t,"BoxBufferGeometry",function(){return cr}),n.d(t,"ShadowMaterial",function(){return cs}),n.d(t,"SpriteMaterial",function(){return Ra}),n.d(t,"RawShaderMaterial",function(){return us}),n.d(t,"ShaderMaterial",function(){return Tr}),n.d(t,"PointsMaterial",function(){return Ga}),n.d(t,"MeshPhysicalMaterial",function(){return ps}),n.d(t,"MeshStandardMaterial",function(){return ds}),n.d(t,"MeshPhongMaterial",function(){return fs}),n.d(t,"MeshToonMaterial",function(){return hs}),n.d(t,"MeshNormalMaterial",function(){return ms}),n.d(t,"MeshLambertMaterial",function(){return _s}),n.d(t,"MeshDepthMaterial",function(){return oa}),n.d(t,"MeshDistanceMaterial",function(){return sa}),n.d(t,"MeshBasicMaterial",function(){return Dr}),n.d(t,"MeshMatcapMaterial",function(){return gs}),n.d(t,"LineDashedMaterial",function(){return vs}),n.d(t,"LineBasicMaterial",function(){return ja}),n.d(t,"Material",function(){return fr}),n.d(t,"Float64BufferAttribute",function(){return rr}),n.d(t,"Float32BufferAttribute",function(){return nr}),n.d(t,"Uint32BufferAttribute",function(){return tr}),n.d(t,"Int32BufferAttribute",function(){return er}),n.d(t,"Uint16BufferAttribute",function(){return Qn}),n.d(t,"Int16BufferAttribute",function(){return Jn}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Zn}),n.d(t,"Uint8BufferAttribute",function(){return Xn}),n.d(t,"Int8BufferAttribute",function(){return $n}),n.d(t,"BufferAttribute",function(){return Yn}),n.d(t,"ArcCurve",function(){return Ys}),n.d(t,"CatmullRomCurve3",function(){return el}),n.d(t,"CubicBezierCurve",function(){return il}),n.d(t,"CubicBezierCurve3",function(){return al}),n.d(t,"EllipseCurve",function(){return Ks}),n.d(t,"LineCurve",function(){return ol}),n.d(t,"LineCurve3",function(){return sl}),n.d(t,"QuadraticBezierCurve",function(){return ll}),n.d(t,"QuadraticBezierCurve3",function(){return cl}),n.d(t,"SplineCurve",function(){return ul}),n.d(t,"REVISION",function(){return c}),n.d(t,"MOUSE",function(){return u}),n.d(t,"CullFaceNone",function(){return d}),n.d(t,"CullFaceBack",function(){return p}),n.d(t,"CullFaceFront",function(){return f}),n.d(t,"CullFaceFrontBack",function(){return h}),n.d(t,"FrontFaceDirectionCW",function(){return m}),n.d(t,"FrontFaceDirectionCCW",function(){return _}),n.d(t,"BasicShadowMap",function(){return g}),n.d(t,"PCFShadowMap",function(){return v}),n.d(t,"PCFSoftShadowMap",function(){return y}),n.d(t,"FrontSide",function(){return A}),n.d(t,"BackSide",function(){return x}),n.d(t,"DoubleSide",function(){return S}),n.d(t,"FlatShading",function(){return b}),n.d(t,"SmoothShading",function(){return w}),n.d(t,"NoColors",function(){return E}),n.d(t,"FaceColors",function(){return P}),n.d(t,"VertexColors",function(){return C}),n.d(t,"NoBlending",function(){return T}),n.d(t,"NormalBlending",function(){return V}),n.d(t,"AdditiveBlending",function(){return F}),n.d(t,"SubtractiveBlending",function(){return D}),n.d(t,"MultiplyBlending",function(){return O}),n.d(t,"CustomBlending",function(){return R}),n.d(t,"AddEquation",function(){return M}),n.d(t,"SubtractEquation",function(){return L}),n.d(t,"ReverseSubtractEquation",function(){return B}),n.d(t,"MinEquation",function(){return k}),n.d(t,"MaxEquation",function(){return I}),n.d(t,"ZeroFactor",function(){return j}),n.d(t,"OneFactor",function(){return N}),n.d(t,"SrcColorFactor",function(){return U}),n.d(t,"OneMinusSrcColorFactor",function(){return z}),n.d(t,"SrcAlphaFactor",function(){return G}),n.d(t,"OneMinusSrcAlphaFactor",function(){return W}),n.d(t,"DstAlphaFactor",function(){return H}),n.d(t,"OneMinusDstAlphaFactor",function(){return q}),n.d(t,"DstColorFactor",function(){return K}),n.d(t,"OneMinusDstColorFactor",function(){return Y}),n.d(t,"SrcAlphaSaturateFactor",function(){return $}),n.d(t,"NeverDepth",function(){return X}),n.d(t,"AlwaysDepth",function(){return Z}),n.d(t,"LessDepth",function(){return J}),n.d(t,"LessEqualDepth",function(){return Q}),n.d(t,"EqualDepth",function(){return ee}),n.d(t,"GreaterEqualDepth",function(){return te}),n.d(t,"GreaterDepth",function(){return ne}),n.d(t,"NotEqualDepth",function(){return re}),n.d(t,"MultiplyOperation",function(){return ie}),n.d(t,"MixOperation",function(){return ae}),n.d(t,"AddOperation",function(){return oe}),n.d(t,"NoToneMapping",function(){return se}),n.d(t,"LinearToneMapping",function(){return le}),n.d(t,"ReinhardToneMapping",function(){return ce}),n.d(t,"Uncharted2ToneMapping",function(){return ue}),n.d(t,"CineonToneMapping",function(){return de}),n.d(t,"ACESFilmicToneMapping",function(){return pe}),n.d(t,"UVMapping",function(){return fe}),n.d(t,"CubeReflectionMapping",function(){return he}),n.d(t,"CubeRefractionMapping",function(){return me}),n.d(t,"EquirectangularReflectionMapping",function(){return _e}),n.d(t,"EquirectangularRefractionMapping",function(){return ge}),n.d(t,"SphericalReflectionMapping",function(){return ve}),n.d(t,"CubeUVReflectionMapping",function(){return ye}),n.d(t,"CubeUVRefractionMapping",function(){return Ae}),n.d(t,"RepeatWrapping",function(){return xe}),n.d(t,"ClampToEdgeWrapping",function(){return Se}),n.d(t,"MirroredRepeatWrapping",function(){return be}),n.d(t,"NearestFilter",function(){return we}),n.d(t,"NearestMipMapNearestFilter",function(){return Ee}),n.d(t,"NearestMipMapLinearFilter",function(){return Pe}),n.d(t,"LinearFilter",function(){return Ce}),n.d(t,"LinearMipMapNearestFilter",function(){return Te}),n.d(t,"LinearMipMapLinearFilter",function(){return Ve}),n.d(t,"UnsignedByteType",function(){return Fe}),n.d(t,"ByteType",function(){return De}),n.d(t,"ShortType",function(){return Oe}),n.d(t,"UnsignedShortType",function(){return Re}),n.d(t,"IntType",function(){return Me}),n.d(t,"UnsignedIntType",function(){return Le}),n.d(t,"FloatType",function(){return Be}),n.d(t,"HalfFloatType",function(){return ke}),n.d(t,"UnsignedShort4444Type",function(){return Ie}),n.d(t,"UnsignedShort5551Type",function(){return je}),n.d(t,"UnsignedShort565Type",function(){return Ne}),n.d(t,"UnsignedInt248Type",function(){return Ue}),n.d(t,"AlphaFormat",function(){return ze}),n.d(t,"RGBFormat",function(){return Ge}),n.d(t,"RGBAFormat",function(){return We}),n.d(t,"LuminanceFormat",function(){return He}),n.d(t,"LuminanceAlphaFormat",function(){return qe}),n.d(t,"RGBEFormat",function(){return Ke}),n.d(t,"DepthFormat",function(){return Ye}),n.d(t,"DepthStencilFormat",function(){return $e}),n.d(t,"RedFormat",function(){return Xe}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Ze}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return Je}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Qe}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return et}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return tt}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return nt}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return rt}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return it}),n.d(t,"RGB_ETC1_Format",function(){return at}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return ot}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return st}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return lt}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return ct}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return ut}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return dt}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return pt}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return ft}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return ht}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return mt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return _t}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return gt}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return vt}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return yt}),n.d(t,"LoopOnce",function(){return At}),n.d(t,"LoopRepeat",function(){return xt}),n.d(t,"LoopPingPong",function(){return St}),n.d(t,"InterpolateDiscrete",function(){return bt}),n.d(t,"InterpolateLinear",function(){return wt}),n.d(t,"InterpolateSmooth",function(){return Et}),n.d(t,"ZeroCurvatureEnding",function(){return Pt}),n.d(t,"ZeroSlopeEnding",function(){return Ct}),n.d(t,"WrapAroundEnding",function(){return Tt}),n.d(t,"TrianglesDrawMode",function(){return Vt}),n.d(t,"TriangleStripDrawMode",function(){return Ft}),n.d(t,"TriangleFanDrawMode",function(){return Dt}),n.d(t,"LinearEncoding",function(){return Ot}),n.d(t,"sRGBEncoding",function(){return Rt}),n.d(t,"GammaEncoding",function(){return Mt}),n.d(t,"RGBEEncoding",function(){return Lt}),n.d(t,"LogLuvEncoding",function(){return Bt}),n.d(t,"RGBM7Encoding",function(){return kt}),n.d(t,"RGBM16Encoding",function(){return It}),n.d(t,"RGBDEncoding",function(){return jt}),n.d(t,"BasicDepthPacking",function(){return Nt}),n.d(t,"RGBADepthPacking",function(){return Ut}),n.d(t,"TangentSpaceNormalMap",function(){return zt}),n.d(t,"ObjectSpaceNormalMap",function(){return Gt}),n.d(t,"Face4",function(){return ou}),n.d(t,"LineStrip",function(){return su}),n.d(t,"LinePieces",function(){return lu}),n.d(t,"MeshFaceMaterial",function(){return cu}),n.d(t,"MultiMaterial",function(){return uu}),n.d(t,"PointCloud",function(){return du}),n.d(t,"Particle",function(){return pu}),n.d(t,"ParticleSystem",function(){return fu}),n.d(t,"PointCloudMaterial",function(){return hu}),n.d(t,"ParticleBasicMaterial",function(){return mu}),n.d(t,"ParticleSystemMaterial",function(){return _u}),n.d(t,"Vertex",function(){return gu}),n.d(t,"DynamicBufferAttribute",function(){return vu}),n.d(t,"Int8Attribute",function(){return yu}),n.d(t,"Uint8Attribute",function(){return Au}),n.d(t,"Uint8ClampedAttribute",function(){return xu}),n.d(t,"Int16Attribute",function(){return Su}),n.d(t,"Uint16Attribute",function(){return bu}),n.d(t,"Int32Attribute",function(){return wu}),n.d(t,"Uint32Attribute",function(){return Eu}),n.d(t,"Float32Attribute",function(){return Pu}),n.d(t,"Float64Attribute",function(){return Cu}),n.d(t,"ClosedSplineCurve3",function(){return Tu}),n.d(t,"SplineCurve3",function(){return Vu}),n.d(t,"Spline",function(){return Fu}),n.d(t,"AxisHelper",function(){return Du}),n.d(t,"BoundingBoxHelper",function(){return Ou}),n.d(t,"EdgesHelper",function(){return Ru}),n.d(t,"WireframeHelper",function(){return Mu}),n.d(t,"XHRLoader",function(){return Lu}),n.d(t,"BinaryTextureLoader",function(){return Bu}),n.d(t,"GeometryUtils",function(){return ku}),n.d(t,"Projector",function(){return Iu}),n.d(t,"CanvasRenderer",function(){return ju}),n.d(t,"JSONLoader",function(){return Nu}),n.d(t,"SceneUtils",function(){return Uu}),n.d(t,"LensFlare",function(){return zu}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var i,a,o,s,l,c="103",u={LEFT:0,MIDDLE:1,RIGHT:2},d=0,p=1,f=2,h=3,m=0,_=1,g=0,v=1,y=2,A=0,x=1,S=2,b=1,w=2,E=0,P=1,C=2,T=0,V=1,F=2,D=3,O=4,R=5,M=100,L=101,B=102,k=103,I=104,j=200,N=201,U=202,z=203,G=204,W=205,H=206,q=207,K=208,Y=209,$=210,X=0,Z=1,J=2,Q=3,ee=4,te=5,ne=6,re=7,ie=0,ae=1,oe=2,se=0,le=1,ce=2,ue=3,de=4,pe=5,fe=300,he=301,me=302,_e=303,ge=304,ve=305,ye=306,Ae=307,xe=1e3,Se=1001,be=1002,we=1003,Ee=1004,Pe=1005,Ce=1006,Te=1007,Ve=1008,Fe=1009,De=1010,Oe=1011,Re=1012,Me=1013,Le=1014,Be=1015,ke=1016,Ie=1017,je=1018,Ne=1019,Ue=1020,ze=1021,Ge=1022,We=1023,He=1024,qe=1025,Ke=We,Ye=1026,$e=1027,Xe=1028,Ze=33776,Je=33777,Qe=33778,et=33779,tt=35840,nt=35841,rt=35842,it=35843,at=36196,ot=37808,st=37809,lt=37810,ct=37811,ut=37812,dt=37813,pt=37814,ft=37815,ht=37816,mt=37817,_t=37818,gt=37819,vt=37820,yt=37821,At=2200,xt=2201,St=2202,bt=2300,wt=2301,Et=2302,Pt=2400,Ct=2401,Tt=2402,Vt=0,Ft=1,Dt=2,Ot=3e3,Rt=3001,Mt=3007,Lt=3002,Bt=3003,kt=3004,It=3005,jt=3006,Nt=3200,Ut=3201,zt=0,Gt=1,Wt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Wt.DEG2RAD},radToDeg:function(e){return e*Wt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Ht(e,t){this.x=e||0,this.y=t||0}function qt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Kt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Yt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Ht.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Ht.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(i=new Ht,a=new Ht,function(e,t){return i.set(e,e),a.set(t,t),this.clamp(i,a)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}}),Object.assign(qt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],d=i[a+0],p=i[a+1],f=i[a+2],h=i[a+3];if(u!==h||s!==d||l!==p||c!==f){var m=1-o,_=s*d+l*p+c*f+u*h,g=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){var y=Math.sqrt(v),A=Math.atan2(y,_*g);m=Math.sin(m*A)/y,o=Math.sin(o*A)/y}var x=o*g;if(s=s*m+d*x,l=l*m+p*x,c=c*m+f*x,u=u*m+h*x,m===1-o){var S=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=S,l*=S,c*=S,u*=S}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(qt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(qt.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=s(n/2),p=s(r/2),f=s(i/2);return"XYZ"===a?(this._x=d*c*u+l*p*f,this._y=l*p*u-d*c*f,this._z=l*c*f+d*p*u,this._w=l*c*u-d*p*f):"YXZ"===a?(this._x=d*c*u+l*p*f,this._y=l*p*u-d*c*f,this._z=l*c*f-d*p*u,this._w=l*c*u+d*p*f):"ZXY"===a?(this._x=d*c*u-l*p*f,this._y=l*p*u+d*c*f,this._z=l*c*f+d*p*u,this._w=l*c*u-d*p*f):"ZYX"===a?(this._x=d*c*u-l*p*f,this._y=l*p*u+d*c*f,this._z=l*c*f-d*p*u,this._w=l*c*u+d*p*f):"YZX"===a?(this._x=d*c*u+l*p*f,this._y=l*p*u+d*c*f,this._z=l*c*f-d*p*u,this._w=l*c*u-d*p*f):"XZY"===a&&(this._x=d*c*u-l*p*f,this._y=l*p*u-d*c*f,this._z=l*c*f+d*p*u,this._w=l*c*u+d*p*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],l=n[9],c=n[2],u=n[6],d=n[10],p=r+s+d;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(u-l)*t,this._y=(a-c)*t,this._z=(o-i)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(u-l)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+c)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(a-c)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(o-i)/t,this._x=(a+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Wt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=a*d+this._w*p,this._x=n*d+this._x*p,this._y=r*d+this._y*p,this._z=i*d+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Kt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(s=new qt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(s.setFromEuler(e))}),applyAxisAngle:function(){var e=new qt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,c=s*n+o*t-i*r,u=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=l*s+d*-i+c*-o-u*-a,this.y=c*s+d*-a+u*-i-l*-o,this.z=u*s+d*-o+l*-a-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Kt,t=new Kt;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(o=new Kt,function(e){return o.copy(this).projectOnVector(e),this.sub(o)}),reflect:function(){var e=new Kt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Wt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Yt.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,l){var c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Kt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],p=n[5],f=n[8],h=r[0],m=r[3],_=r[6],g=r[1],v=r[4],y=r[7],A=r[2],x=r[5],S=r[8];return i[0]=a*h+o*g+s*A,i[3]=a*m+o*v+s*x,i[6]=a*_+o*y+s*S,i[1]=l*h+c*g+u*A,i[4]=l*m+c*v+u*x,i[7]=l*_+c*y+u*S,i[2]=d*h+p*g+f*A,i[5]=d*m+p*v+f*x,i[8]=d*_+p*y+f*S,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],d=n[7],p=n[8],f=p*l-c*d,h=c*u-p*s,m=d*s-l*u,_=i*f+a*h+o*m;if(0===_){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var v=1/_;return r[0]=f*v,r[1]=(o*d-p*a)*v,r[2]=(c*a-o*l)*v,r[3]=h*v,r[4]=(p*i-o*u)*v,r[5]=(o*s-c*i)*v,r[6]=m*v,r[7]=(a*u-d*i)*v,r[8]=(l*i-a*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*a+t*l,r[7]=-n*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var $t,Xt,Zt,Jt,Qt,en,tn,nn,rn,an,on,sn,ln={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===l&&(l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),l.width=e.width,l.height=e.height;var n=l.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=l}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},cn=0;function un(e,t,n,r,i,a,o,s,l,c){Object.defineProperty(this,"id",{value:cn++}),this.uuid=Wt.generateUUID(),this.name="",this.image=void 0!==e?e:un.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:un.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Se,this.wrapT=void 0!==r?r:Se,this.magFilter=void 0!==i?i:Ce,this.minFilter=void 0!==a?a:Ve,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:We,this.type=void 0!==s?s:Fe,this.offset=new Ht(0,0),this.repeat=new Ht(1,1),this.center=new Ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Ot,this.version=0,this.onUpdate=null}function dn(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function pn(e,t,n){this.width=e,this.height=t,this.scissor=new dn(0,0,e,t),this.scissorTest=!1,this.viewport=new dn(0,0,e,t),n=n||{},this.texture=new un(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ce,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function fn(e,t,n){pn.call(this,e,t,n),this.samples=4}function hn(e,t,n){pn.call(this,e,t,n)}function mn(e,t,n,r,i,a,o,s,l,c,u,d){un.call(this,null,a,o,s,l,c,r,i,u,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:we,this.minFilter=void 0!==c?c:we,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function _n(e,t){this.min=void 0!==e?e:new Kt(1/0,1/0,1/0),this.max=void 0!==t?t:new Kt(-1/0,-1/0,-1/0)}function gn(e,t){this.center=void 0!==e?e:new Kt,this.radius=void 0!==t?t:0}function vn(e,t){this.normal=void 0!==e?e:new Kt(1,0,0),this.constant=void 0!==t?t:0}function yn(e,t,n,r,i,a){this.planes=[void 0!==e?e:new vn,void 0!==t?t:new vn,void 0!==n?n:new vn,void 0!==r?r:new vn,void 0!==i?i:new vn,void 0!==a?a:new vn]}function An(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}un.DEFAULT_IMAGE=void 0,un.DEFAULT_MAPPING=fe,un.prototype=Object.assign(Object.create(r.prototype),{constructor:un,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Wt.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(ln.getDataURL(r[a]))}else i=ln.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==fe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xe:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case be:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case xe:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case be:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(un.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(dn.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=e.elements,o=a[0],s=a[4],l=a[8],c=a[1],u=a[5],d=a[9],p=a[2],f=a[6],h=a[10];if(Math.abs(s-c)<.01&&Math.abs(l-p)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+p)<.1&&Math.abs(d+f)<.1&&Math.abs(o+u+h-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,_=(u+1)/2,g=(h+1)/2,v=(s+c)/4,y=(l+p)/4,A=(d+f)/4;return m>_&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=v/(n=Math.sqrt(m)),i=y/n):_>g?_<.01?(n=.707106781,r=0,i=.707106781):(n=v/(r=Math.sqrt(_)),i=A/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=y/(i=Math.sqrt(g)),r=A/i),this.set(n,r,i,t),this}var x=Math.sqrt((f-d)*(f-d)+(l-p)*(l-p)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(f-d)/x,this.y=(l-p)/x,this.z=(c-s)/x,this.w=Math.acos((o+u+h-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new dn,t=new dn),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),pn.prototype=Object.assign(Object.create(r.prototype),{constructor:pn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),fn.prototype=Object.assign(Object.create(pn.prototype),{constructor:fn,isWebGLMultisampleRenderTarget:!0,copy:function(e){return pn.prototype.copy.call(this,e),this.samples=e.samples,this}}),hn.prototype=Object.create(pn.prototype),hn.prototype.constructor=hn,hn.prototype.isWebGLRenderTargetCube=!0,mn.prototype=Object.create(un.prototype),mn.prototype.constructor=mn,mn.prototype.isDataTexture=!0,Object.assign(_n.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],d=e[s+2];c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>a&&(a=u),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),d=e.getZ(s);c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>a&&(a=u),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Kt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Kt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Kt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Kt;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)r.copy(o[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Kt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Xt=new Kt,function(e){return this.clampPoint(e.center,Xt),Xt.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Kt,i=new Kt,a=new Kt,o=new Kt,s=new Kt,l=new Kt,c=new Kt;function u(r){var i,a;for(i=0,a=r.length-3;i<=a;i+=3){o.fromArray(r,i);var s=l.x*Math.abs(o.x)+l.y*Math.abs(o.y)+l.z*Math.abs(o.z),c=e.dot(o),u=t.dot(o),d=n.dot(o);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),r.subVectors(t,e),i.subVectors(n,t),a.subVectors(e,n);var d=[0,-r.z,r.y,0,-i.z,i.y,0,-a.z,a.y,r.z,0,-r.x,i.z,0,-i.x,a.z,0,-a.x,-r.y,r.x,0,-i.y,i.x,0,-a.y,a.x,0];return!!u(d)&&(!!u(d=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(r,i),u(d=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Kt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Kt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Kt;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:($t=[new Kt,new Kt,new Kt,new Kt,new Kt,new Kt,new Kt,new Kt],function(e){return this.isEmpty()?this:($t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($t),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(gn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Zt=new _n,function(e,t){var n=this.center;void 0!==t?n.copy(t):Zt.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Kt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new _n),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(vn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Kt,t=new Kt;return function(n,r,i){var a=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Kt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Kt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Kt);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?void 0:n.copy(r).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Kt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Kt,t=new Yt;return function(n,r){var i=r||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(yn.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],p=n[9],f=n[10],h=n[11],m=n[12],_=n[13],g=n[14],v=n[15];return t[0].setComponents(o-r,u-s,h-d,v-m).normalize(),t[1].setComponents(o+r,u+s,h+d,v+m).normalize(),t[2].setComponents(o+i,u+l,h+p,v+_).normalize(),t[3].setComponents(o-i,u-l,h-p,v-_).normalize(),t[4].setComponents(o-a,u-c,h-f,v-g).normalize(),t[5].setComponents(o+a,u+c,h+f,v+g).normalize(),this},intersectsObject:(Qt=new gn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Qt.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Qt)}),intersectsSprite:function(){var e=new gn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:(Jt=new Kt,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Jt.x=r.normal.x>0?e.max.x:e.min.x,Jt.y=r.normal.y>0?e.max.y:e.min.y,Jt.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Jt)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}),Object.assign(An.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,l,c,u,d,p,f,h,m){var _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=i,_[5]=a,_[9]=o,_[13]=s,_[2]=l,_[6]=c,_[10]=u,_[14]=d,_[3]=p,_[7]=f,_[11]=h,_[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new An).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Kt;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var d=a*c,p=a*u,f=o*c,h=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=p+f*l,t[5]=d-h*l,t[9]=-o*s,t[2]=h-d*l,t[6]=f+p*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*c,_=s*u,g=l*c,v=l*u;t[0]=m+v*o,t[4]=g*o-_,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=_*o-g,t[6]=v+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*c,_=s*u,g=l*c,v=l*u;t[0]=m-v*o,t[4]=-a*u,t[8]=g+_*o,t[1]=_+g*o,t[5]=a*c,t[9]=v-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){d=a*c,p=a*u,f=o*c,h=o*u;t[0]=s*c,t[4]=f*l-p,t[8]=d*l+h,t[1]=s*u,t[5]=h*l+d,t[9]=p*l-f,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var y=a*s,A=a*l,x=o*s,S=o*l;t[0]=s*c,t[4]=S-y*u,t[8]=x*u+A,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=A*u+x,t[10]=y-S*u}else if("XZY"===e.order){y=a*s,A=a*l,x=o*s,S=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=y*u+S,t[5]=a*c,t[9]=A*u-x,t[2]=x*u-A,t[6]=o*c,t[10]=S*u+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(on=new Kt(0,0,0),sn=new Kt(1,1,1),function(e){return this.compose(on,e,sn)}),lookAt:(nn=new Kt,rn=new Kt,an=new Kt,function(e,t,n){var r=this.elements;return an.subVectors(e,t),0===an.lengthSq()&&(an.z=1),an.normalize(),nn.crossVectors(n,an),0===nn.lengthSq()&&(1===Math.abs(n.z)?an.x+=1e-4:an.z+=1e-4,an.normalize(),nn.crossVectors(n,an)),nn.normalize(),rn.crossVectors(an,nn),r[0]=nn.x,r[4]=rn.x,r[8]=an.x,r[1]=nn.y,r[5]=rn.y,r[9]=an.y,r[2]=nn.z,r[6]=rn.z,r[10]=an.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],p=n[13],f=n[2],h=n[6],m=n[10],_=n[14],g=n[3],v=n[7],y=n[11],A=n[15],x=r[0],S=r[4],b=r[8],w=r[12],E=r[1],P=r[5],C=r[9],T=r[13],V=r[2],F=r[6],D=r[10],O=r[14],R=r[3],M=r[7],L=r[11],B=r[15];return i[0]=a*x+o*E+s*V+l*R,i[4]=a*S+o*P+s*F+l*M,i[8]=a*b+o*C+s*D+l*L,i[12]=a*w+o*T+s*O+l*B,i[1]=c*x+u*E+d*V+p*R,i[5]=c*S+u*P+d*F+p*M,i[9]=c*b+u*C+d*D+p*L,i[13]=c*w+u*T+d*O+p*B,i[2]=f*x+h*E+m*V+_*R,i[6]=f*S+h*P+m*F+_*M,i[10]=f*b+h*C+m*D+_*L,i[14]=f*w+h*T+m*O+_*B,i[3]=g*x+v*E+y*V+A*R,i[7]=g*S+v*P+y*F+A*M,i[11]=g*b+v*C+y*D+A*L,i[15]=g*w+v*T+y*O+A*B,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Kt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],p=e[14];return e[3]*(+i*s*u-r*l*u-i*o*d+n*l*d+r*o*p-n*s*p)+e[7]*(+t*s*p-t*l*d+i*a*d-r*a*p+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*p-i*a*u+n*a*p+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*d+r*a*u-n*a*d+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],d=r[7],p=r[8],f=r[9],h=r[10],m=r[11],_=r[12],g=r[13],v=r[14],y=r[15],A=f*v*d-g*h*d+g*u*m-c*v*m-f*u*y+c*h*y,x=_*h*d-p*v*d-_*u*m+l*v*m+p*u*y-l*h*y,S=p*g*d-_*f*d+_*c*m-l*g*m-p*c*y+l*f*y,b=_*f*u-p*g*u-_*c*h+l*g*h+p*c*v-l*f*v,w=i*A+a*x+o*S+s*b;if(0===w){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var P=1/w;return n[0]=A*P,n[1]=(g*h*s-f*v*s-g*o*m+a*v*m+f*o*y-a*h*y)*P,n[2]=(c*v*s-g*u*s+g*o*d-a*v*d-c*o*y+a*u*y)*P,n[3]=(f*u*s-c*h*s-f*o*d+a*h*d+c*o*m-a*u*m)*P,n[4]=x*P,n[5]=(p*v*s-_*h*s+_*o*m-i*v*m-p*o*y+i*h*y)*P,n[6]=(_*u*s-l*v*s-_*o*d+i*v*d+l*o*y-i*u*y)*P,n[7]=(l*h*s-p*u*s+p*o*d-i*h*d-l*o*m+i*u*m)*P,n[8]=S*P,n[9]=(_*f*s-p*g*s-_*a*m+i*g*m+p*a*y-i*f*y)*P,n[10]=(l*g*s-_*c*s+_*a*d-i*g*d-l*a*y+i*c*y)*P,n[11]=(p*c*s-l*f*s-p*a*d+i*f*d+l*a*m-i*c*m)*P,n[12]=b*P,n[13]=(p*g*o-_*f*o+_*a*h-i*g*h-p*a*v+i*f*v)*P,n[14]=(_*c*o-l*g*o-_*a*u+i*g*u+l*a*v-i*c*v)*P,n[15]=(l*f*o-p*c*o+p*a*u-i*f*u-l*a*h+i*c*h)*P,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,d=i*l,p=i*c,f=i*u,h=a*c,m=a*u,_=o*u,g=s*l,v=s*c,y=s*u,A=n.x,x=n.y,S=n.z;return r[0]=(1-(h+_))*A,r[1]=(p+y)*A,r[2]=(f-v)*A,r[3]=0,r[4]=(p-y)*x,r[5]=(1-(d+_))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(f+v)*S,r[9]=(m-g)*S,r[10]=(1-(d+h))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(en=new Kt,tn=new An,function(e,t,n){var r=this.elements,i=en.set(r[0],r[1],r[2]).length(),a=en.set(r[4],r[5],r[6]).length(),o=en.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],tn.copy(this);var s=1/i,l=1/a,c=1/o;return tn.elements[0]*=s,tn.elements[1]*=s,tn.elements[2]*=s,tn.elements[4]*=l,tn.elements[5]*=l,tn.elements[6]*=l,tn.elements[8]*=c,tn.elements[9]*=c,tn.elements[10]*=c,t.setFromRotationMatrix(tn),n.x=i,n.y=a,n.z=o,this}),makePerspective:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(a+i)/(a-i),p=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),l=1/(n-r),c=1/(a-i),u=(t+e)*s,d=(n+r)*l,p=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var xn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function Sn(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function bn(e){for(var t={},n=0;n<e.length;n++){var r=Sn(e[n]);for(var i in r)t[i]=r[i]}return t}var wn,En,Pn,Cn={clone:Sn,merge:bn},Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Vn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(Vn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Wt.euclideanModulo(t,1),n=Wt.clamp(n,0,1),r=Wt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=n[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=Tn[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),l=(s+o)/2;if(s===o)t=0,n=0;else{var c=o-s;switch(n=l<=.5?c/(o+s):c/(2-o-s),o){case r:t=(i-a)/c+(i<a?6:0);break;case i:t=(a-r)/c+2;break;case a:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Pn={},function(e,t,n){return this.getHSL(Pn),Pn.h+=e,Pn.s+=t,Pn.l+=n,this.setHSL(Pn.h,Pn.s,Pn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(wn={h:0,s:0,l:0},En={h:0,s:0,l:0},function(e,t){this.getHSL(wn),e.getHSL(En);var n=Wt.lerp(wn.h,En.h,t),r=Wt.lerp(wn.s,En.s,t),i=Wt.lerp(wn.l,En.l,t);return this.setHSL(n,r,i),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Fn,Dn={common:{diffuse:{value:new Vn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Yt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Vn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Vn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new Vn(15658734)},opacity:{value:1},center:{value:new Ht(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Yt}}},On={basic:{uniforms:bn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:bn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.fog,Dn.lights,{emissive:{value:new Vn(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:bn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.gradientmap,Dn.fog,Dn.lights,{emissive:{value:new Vn(0)},specular:{value:new Vn(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:bn([Dn.common,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.roughnessmap,Dn.metalnessmap,Dn.fog,Dn.lights,{emissive:{value:new Vn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},matcap:{uniforms:bn([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,{matcap:{value:null}}]),vertexShader:xn.meshmatcap_vert,fragmentShader:xn.meshmatcap_frag},points:{uniforms:bn([Dn.points,Dn.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:bn([Dn.common,Dn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:bn([Dn.common,Dn.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:bn([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,{opacity:{value:1}}]),vertexShader:xn.normal_vert,fragmentShader:xn.normal_frag},sprite:{uniforms:bn([Dn.sprite,Dn.fog]),vertexShader:xn.sprite_vert,fragmentShader:xn.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null}},vertexShader:xn.background_vert,fragmentShader:xn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:bn([Dn.common,Dn.displacementmap,{referencePosition:{value:new Kt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag},shadow:{uniforms:bn([Dn.lights,Dn.fog,{color:{value:new Vn(0)},opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}};function Rn(){var e=null,t=!1,n=null;function r(i,a){!1!==t&&(n(i,a),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Mn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?35048:35044,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,a=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===a.count?e.bufferSubData(r,0,i):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function Ln(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Kt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Vn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function Bn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Bn.DefaultOrder}function kn(){this.mask=1}On.physical={uniforms:bn([On.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},Object.assign(Ln.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),Bn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Bn.DefaultOrder="XYZ",Object.defineProperties(Bn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Bn.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Wt.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],f=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new An;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(Fn=new qt,function(e){return Fn.setFromEuler(this),this.setFromQuaternion(Fn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Kt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(kn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var In,jn,Nn,Un,zn=0;function Gn(){Object.defineProperty(this,"id",{value:zn++}),this.uuid=Wt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gn.DefaultUp.clone();var e=new Kt,t=new Bn,n=new qt,r=new Kt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new An},normalMatrix:{value:new Yt}}),this.matrix=new An,this.matrixWorld=new An,this.matrixAutoUpdate=Gn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new kn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Gn.DefaultUp=new Kt(0,1,0),Gn.DefaultMatrixAutoUpdate=!0,Gn.prototype=Object.assign(Object.create(r.prototype),{constructor:Gn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Un=new qt,function(e,t){return Un.setFromAxisAngle(e,t),this.quaternion.multiply(Un),this}),rotateOnWorldAxis:function(){var e=new qt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Kt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Kt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Kt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Kt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Kt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Kt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Kt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Nn=new An,function(e){return e.applyMatrix4(Nn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new qt,t=new An,n=new Kt,r=new Kt;return function(i,a,o){i.isVector3?n.copy(i):n.set(i,a,o);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Kt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(In=new Kt,jn=new Kt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new qt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(In,e,jn),e}),getWorldScale:function(){var e=new Kt,t=new qt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Kt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Kt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Vt&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var c=o[s];i(e.shapes,c)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(i(e.materials,this.material[s]));r.material=u}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var d=m(e.geometries),p=m(e.materials),f=m(e.textures),h=m(e.images);o=m(e.shapes);d.length>0&&(n.geometries=d),p.length>0&&(n.materials=p),f.length>0&&(n.textures=f),h.length>0&&(n.images=h),o.length>0&&(n.shapes=o)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var Wn,Hn,qn=0;function Kn(){Object.defineProperty(this,"id",{value:qn+=2}),this.uuid=Wt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Yn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function $n(e,t,n){Yn.call(this,new Int8Array(e),t,n)}function Xn(e,t,n){Yn.call(this,new Uint8Array(e),t,n)}function Zn(e,t,n){Yn.call(this,new Uint8ClampedArray(e),t,n)}function Jn(e,t,n){Yn.call(this,new Int16Array(e),t,n)}function Qn(e,t,n){Yn.call(this,new Uint16Array(e),t,n)}function er(e,t,n){Yn.call(this,new Int32Array(e),t,n)}function tr(e,t,n){Yn.call(this,new Uint32Array(e),t,n)}function nr(e,t,n){Yn.call(this,new Float32Array(e),t,n)}function rr(e,t,n){Yn.call(this,new Float64Array(e),t,n)}function ir(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ar(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Kn.prototype=Object.assign(Object.create(r.prototype),{constructor:Kn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Yt).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new An;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new An;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new An;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new An;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new An;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(Hn=new Gn,function(e){Hn.lookAt(e),Hn.updateMatrix(),this.applyMatrix(Hn.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0,u=0;c<i.length;c+=3,u+=2)t.vertices.push((new Kt).fromArray(i,c)),void 0!==o&&t.colors.push((new Vn).fromArray(o,c));function d(e,n,r,i){var c=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],u=new Ln(e,n,r,void 0===a?[]:[(new Kt).fromArray(a,3*e),(new Kt).fromArray(a,3*n),(new Kt).fromArray(a,3*r)],c,i);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Ht).fromArray(s,2*e),(new Ht).fromArray(s,2*n),(new Ht).fromArray(s,2*r)]),void 0!==l&&t.faceVertexUvs[1].push([(new Ht).fromArray(l,2*e),(new Ht).fromArray(l,2*n),(new Ht).fromArray(l,2*r)])}var p=e.groups;if(p.length>0)for(c=0;c<p.length;c++)for(var f=p[c],h=f.start,m=(u=h,h+f.count);u<m;u+=3)void 0!==n?d(n[u],n[u+1],n[u+2],f.materialIndex):d(u,u+1,u+2,f.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)d(n[c],n[c+1],n[c+2]);else for(c=0;c<i.length/3;c+=3)d(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Wn=new Kt,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wn).negate(),this.translate(Wn.x,Wn.y,Wn.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new An;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Kt,t=new Kt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new Kt;if(e){var s,l,c,u=new Kt,d=new Kt;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],u.subVectors(c,l),d.subVectors(s,l),u.cross(d),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o[(a=this.faces[r]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(a=this.faces[r]).vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Kn;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)l=new Kt,c={a:new Kt,b:new Kt,c:new Kt},o.push(l),s.push(c)}var l,c,u=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],l=u.faceNormals[n],c=u.vertexNormals[n],l.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new _n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],d=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Yt).getNormalMatrix(t));for(var f=0,h=o.length;f<h;f++){var m=o[f].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(f=0,h=p.length;f<h;f++)d.push(p[f].clone());for(f=0,h=l.length;f<h;f++){var _,g,v,y=l[f],A=y.vertexNormals,x=y.vertexColors;(_=new Ln(y.a+i,y.b+i,y.c+i)).normal.copy(y.normal),void 0!==r&&_.normal.applyMatrix3(r).normalize();for(var S=0,b=A.length;S<b;S++)g=A[S].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),_.vertexNormals.push(g);_.color.copy(y.color);for(S=0,b=x.length;S<b;S++)v=x[S],_.vertexColors.push(v.clone());_.materialIndex=y.materialIndex+n,s.push(_)}for(f=0,h=u.length;f<h;f++){var w=u[f],E=[];if(void 0!==w){for(S=0,b=w.length;S<b;S++)E.push(w[S].clone());c.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,a,o,s,l={},c=[],u=[],d=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=u[i.a],i.b=u[i.b],i.c=u[i.c],a=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var h=p[n];for(this.faces.splice(h,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(h,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Kt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),o&&o.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(a[s]),i&&i.push(o[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}var o=[],s=[],l={},c=[],u={},d=[],p={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],h=void 0!==this.faceVertexUvs[0][i],m=f.normal.length()>0,_=f.vertexNormals.length>0,g=1!==f.color.r||1!==f.color.g||1!==f.color.b,v=f.vertexColors.length>0,y=0;if(y=b(y,0,0),y=b(y,1,!0),y=b(y,2,!1),y=b(y,3,h),y=b(y,4,m),y=b(y,5,_),y=b(y,6,g),y=b(y,7,v),o.push(y),o.push(f.a,f.b,f.c),o.push(f.materialIndex),h){var A=this.faceVertexUvs[0][i];o.push(P(A[0]),P(A[1]),P(A[2]))}if(m&&o.push(w(f.normal)),_){var x=f.vertexNormals;o.push(w(x[0]),w(x[1]),w(x[2]))}if(g&&o.push(E(f.color)),v){var S=f.vertexColors;o.push(E(S[0]),E(S[1]),E(S[2]))}}function b(e,t,n){return n?e|1<<t:e&~(1<<t)}function w(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t])}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=c.length,c.push(e.getHex()),u[t])}function P(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=d.length/2,d.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=r,e.data.normals=s,c.length>0&&(e.data.colors=c),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e},clone:function(){return(new Kn).copy(this)},copy:function(e){var t,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=u.length;r<i;r++){var d=u[r],p=[];for(a=0,o=d.length;a<o;a++){var f=d[a];p.push(f.clone())}this.faceVertexUvs[t].push(p)}}var h=e.morphTargets;for(t=0,n=h.length;t<n;t++){var m={};if(m.name=h[t].name,void 0!==h[t].vertices)for(m.vertices=[],r=0,i=h[t].vertices.length;r<i;r++)m.vertices.push(h[t].vertices[r].clone());if(void 0!==h[t].normals)for(m.normals=[],r=0,i=h[t].normals.length;r<i;r++)m.normals.push(h[t].normals[r].clone());this.morphTargets.push(m)}var _=e.morphNormals;for(t=0,n=_.length;t<n;t++){var g={};if(void 0!==_[t].vertexNormals)for(g.vertexNormals=[],r=0,i=_[t].vertexNormals.length;r<i;r++){var v=_[t].vertexNormals[r],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==_[t].faceNormals)for(g.faceNormals=[],r=0,i=_[t].faceNormals.length;r<i;r++)g.faceNormals.push(_[t].faceNormals[r].clone());this.morphNormals.push(g)}var A=e.skinWeights;for(t=0,n=A.length;t<n;t++)this.skinWeights.push(A[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var S=e.lineDistances;for(t=0,n=S.length;t<n;t++)this.lineDistances.push(S[t]);var b=e.boundingBox;null!==b&&(this.boundingBox=b.clone());var w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Yn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Vn),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Ht),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Kt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new dn),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),$n.prototype=Object.create(Yn.prototype),$n.prototype.constructor=$n,Xn.prototype=Object.create(Yn.prototype),Xn.prototype.constructor=Xn,Zn.prototype=Object.create(Yn.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(Yn.prototype),Jn.prototype.constructor=Jn,Qn.prototype=Object.create(Yn.prototype),Qn.prototype.constructor=Qn,er.prototype=Object.create(Yn.prototype),er.prototype.constructor=er,tr.prototype=Object.create(Yn.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create(Yn.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(Yn.prototype),rr.prototype.constructor=rr,Object.assign(ir.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var u,d=e.morphNormals,p=d.length;if(p>0){u=[];for(c=0;c<p;c++)u[c]={name:d[c].name,data:[]};this.morphTargets.normal=u}var f=e.skinIndices,h=e.skinWeights,m=f.length===r.length,_=h.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var y=g.normal;this.normals.push(y,y,y)}var A,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var S=g.color;this.colors.push(S,S,S)}if(!0===a)void 0!==(A=i[0][c])?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Ht,new Ht,new Ht));if(!0===o)void 0!==(A=i[1][c])?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Ht,new Ht,new Ht));for(var b=0;b<l;b++){var w=s[b].vertices;t[b].data.push(w[g.a],w[g.b],w[g.c])}for(b=0;b<p;b++){var E=d[b].vertexNormals[c];u[b].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),_&&this.skinWeights.push(h[g.a],h[g.b],h[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var or=1;function sr(){Object.defineProperty(this,"id",{value:or+=2}),this.uuid=Wt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function lr(e,t,n,r,i,a){Kn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new cr(e,t,n,r,i,a)),this.mergeVertices()}function cr(e,t,n,r,i,a){sr.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],l=[],c=[],u=[],d=0,p=0;function f(e,t,n,r,i,a,f,h,m,_,g){var v,y,A=a/m,x=f/_,S=a/2,b=f/2,w=h/2,E=m+1,P=_+1,C=0,T=0,V=new Kt;for(y=0;y<P;y++){var F=y*x-b;for(v=0;v<E;v++){var D=v*A-S;V[e]=D*r,V[t]=F*i,V[n]=w,l.push(V.x,V.y,V.z),V[e]=0,V[t]=0,V[n]=h>0?1:-1,c.push(V.x,V.y,V.z),u.push(v/m),u.push(1-y/_),C+=1}}for(y=0;y<_;y++)for(v=0;v<m;v++){var O=d+v+E*y,R=d+v+E*(y+1),M=d+(v+1)+E*(y+1),L=d+(v+1)+E*y;s.push(O,R,L),s.push(R,M,L),T+=6}o.addGroup(p,T,g),p+=T,d+=C}f("z","y","x",-1,-1,n,t,e,a,i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new nr(l,3)),this.addAttribute("normal",new nr(c,3)),this.addAttribute("uv",new nr(u,2))}function ur(e,t,n,r){Kn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new dr(e,t,n,r)),this.mergeVertices()}function dr(e,t,n,r){sr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,a,o=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(r)||1,u=l+1,d=c+1,p=e/l,f=t/c,h=[],m=[],_=[],g=[];for(a=0;a<d;a++){var v=a*f-s;for(i=0;i<u;i++){var y=i*p-o;m.push(y,-v,0),_.push(0,0,1),g.push(i/l),g.push(1-a/c)}}for(a=0;a<c;a++)for(i=0;i<l;i++){var A=i+u*a,x=i+u*(a+1),S=i+1+u*(a+1),b=i+1+u*a;h.push(A,x,b),h.push(x,S,b)}this.setIndex(h),this.addAttribute("position",new nr(m,3)),this.addAttribute("normal",new nr(_,3)),this.addAttribute("uv",new nr(g,2))}sr.prototype=Object.assign(Object.create(r.prototype),{constructor:sr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(ar(e)>65535?tr:Qn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Yn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Yt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new Yt).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new An;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new An;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new An;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new An;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new An;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Gn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Kt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new nr(3*t.vertices.length,3),r=new nr(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new nr(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new nr(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new ir).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Yn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Yn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new Yn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Yn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Yn(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[o],c=0,u=l.length;c<u;c++){var d=l[c],p=new nr(3*d.data.length,3);p.name=d.name,s.push(p.copyVector3sArray(d.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var f=new nr(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var h=new nr(4*e.skinWeights.length,4);this.addAttribute("skinWeight",h.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new _n;return function(){null===this.boundingBox&&(this.boundingBox=new _n);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var r=0,i=n.length;r<i;r++){var a=n[r];e.setFromBufferAttribute(a),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new _n,t=new _n,n=new Kt;return function(){null===this.boundingSphere&&(this.boundingSphere=new gn);var r=this.attributes.position,i=this.morphAttributes.position;if(r){var a=this.boundingSphere.center;if(e.setFromBufferAttribute(r),i)for(var o=0,s=i.length;o<s;o++){var l=i[o];t.setFromBufferAttribute(l),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(a);var c=0;for(o=0,s=r.count;o<s;o++)n.fromBufferAttribute(r,o),c=Math.max(c,a.distanceToSquared(n));if(i)for(o=0,s=i.length;o<s;o++)for(var u=0,d=(l=i[o]).count;u<d;u++)n.fromBufferAttribute(l,o),c=Math.max(c,a.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Yn(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,a=r.length;i<a;i++)r[i]=0;var o,s,l,c=t.normal.array,u=new Kt,d=new Kt,p=new Kt,f=new Kt,h=new Kt;if(e){var m=e.array;for(i=0,a=e.count;i<a;i+=3)o=3*m[i+0],s=3*m[i+1],l=3*m[i+2],u.fromArray(n,o),d.fromArray(n,s),p.fromArray(n,l),f.subVectors(p,d),h.subVectors(u,d),f.cross(h),c[o]+=f.x,c[o+1]+=f.y,c[o+2]+=f.z,c[s]+=f.x,c[s+1]+=f.y,c[s+2]+=f.z,c[l]+=f.x,c[l+1]+=f.y,c[l+2]+=f.z}else for(i=0,a=n.length;i<a;i+=9)u.fromArray(n,i),d.fromArray(n,i+3),p.fromArray(n,i+6),f.subVectors(p,d),h.subVectors(u,d),f.cross(h),c[i]=f.x,c[i+1]=f.y,c[i+2]=f.z,c[i+3]=f.x,c[i+4]=f.y,c[i+5]=f.z,c[i+6]=f.x,c[i+7]=f.y,c[i+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=0,l=a.itemSize*t;s<o.length;s++,l++)i[l]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Kt;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),a=0,o=0,s=0,l=t.length;s<l;s++){a=t[s]*r;for(var c=0;c<r;c++)i[o++]=n[a++]}return new Yn(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new sr,n=this.index.array,r=this.attributes;for(var i in r){var a=e(r[i],n);t.addAttribute(i,a)}var o=this.morphAttributes;for(i in o){for(var s=[],l=o[i],c=0,u=l.length;c<u;c++){a=e(l[c],n);s.push(a)}t.morphAttributes[i]=s}for(var d=this.groups,p=(c=0,d.length);c<p;c++){var f=d[c];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var a={itemSize:(p=i[n]).itemSize,type:p.array.constructor.name,array:Array.prototype.slice.call(p.array),normalized:p.normalized};""!==p.name&&(a.name=p.name),e.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],c=[],u=0,d=l.length;u<d;u++){var p;a={itemSize:(p=l[u]).itemSize,type:p.array.constructor.name,array:Array.prototype.slice.call(p.array),normalized:p.normalized};""!==p.name&&(a.name=p.name),c.push(a)}c.length>0&&(o[n]=c,s=!0)}s&&(e.data.morphAttributes=o);var f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));var h=this.boundingSphere;return null!==h&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e},clone:function(){return(new sr).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var l=[],c=s[t];for(n=0,r=c.length;n<r;n++)l.push(c[n].clone());this.morphAttributes[t]=l}var u=e.groups;for(n=0,r=u.length;n<r;n++){var d=u[n];this.addGroup(d.start,d.count,d.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),lr.prototype=Object.create(Kn.prototype),lr.prototype.constructor=lr,cr.prototype=Object.create(sr.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(Kn.prototype),ur.prototype.constructor=ur,dr.prototype=Object.create(sr.prototype),dr.prototype.constructor=dr;var pr=0;function fr(){Object.defineProperty(this,"id",{value:pr++}),this.uuid=Wt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=V,this.side=A,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=E,this.opacity=1,this.transparent=!1,this.blendSrc=G,this.blendDst=W,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Q,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}fr.prototype=Object.assign(Object.create(r.prototype),{constructor:fr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===b;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==V&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==A&&(n.side=this.side),this.vertexColors!==E&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hr,mr,_r,gr,vr,yr,Ar,xr,Sr,br,wr,Er,Pr="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Cr="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Tr(e){fr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Pr,this.fragmentShader=Cr,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Vr(e,t){this.origin=void 0!==e?e:new Kt,this.direction=void 0!==t?t:new Kt}function Fr(e,t,n){this.a=void 0!==e?e:new Kt,this.b=void 0!==t?t:new Kt,this.c=void 0!==n?n:new Kt}function Dr(e){fr.call(this),this.type="MeshBasicMaterial",this.color=new Vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ie,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Or(e,t){Gn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new sr,this.material=void 0!==t?t:new Dr({color:16777215*Math.random()}),this.drawMode=Vt,this.updateMorphTargets()}function Rr(e,t,n,r){var i,a,o=new Vn(0),s=0,l=null,c=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),u(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){u(o,s=e)},render:function(t,r,d,p){var f=r.background,h=e.vr,m=h.getSession&&h.getSession();if(m&&"additive"===m.environmentBlendMode&&(f=null),null===f?(u(o,s),l=null,c=0):f&&f.isColor&&(u(f,1),p=!0,l=null,c=0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLRenderTargetCube)){void 0===a&&((a=new Or(new cr(1,1,1),new Tr({type:"BackgroundCubeMaterial",uniforms:Sn(On.cube.uniforms),vertexShader:On.cube.vertexShader,fragmentShader:On.cube.fragmentShader,side:x,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var _=f.isWebGLRenderTargetCube?f.texture:f;a.material.uniforms.tCube.value=_,a.material.uniforms.tFlip.value=f.isWebGLRenderTargetCube?1:-1,l===f&&c===_.version||(a.material.needsUpdate=!0,l=f,c=_.version),t.unshift(a,a.geometry,a.material,0,0,null)}else f&&f.isTexture&&(void 0===i&&((i=new Or(new dr(2,2),new Tr({type:"BackgroundMaterial",uniforms:Sn(On.background.uniforms),vertexShader:On.background.vertexShader,fragmentShader:On.background.fragmentShader,side:A,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&c===f.version||(i.material.needsUpdate=!0,l=f,c=f.version),t.unshift(i,i.geometry,i.material,0,0,null))}}}function Mr(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(a,o,s){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,o,s,a.maxInstancedCount),n.update(s,i,a.maxInstancedCount)}}function Lr(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),h=e.getParameter(36347),m=e.getParameter(36348),_=e.getParameter(36349),g=u>0,v=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:h,maxVaryings:m,maxFragmentUniforms:_,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:a?e.getParameter(36183):0}}function Br(){var e=this,t=null,n=0,r=!1,i=!1,a=new vn,o=new Yt,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,r,i){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==i||null===c){var u=r+4*l,d=n.matrixWorldInverse;o.getNormalMatrix(d),(null===c||c.length<u)&&(c=new Float32Array(u));for(var p=0,f=r;p!==l;++p,f+=4)a.copy(t[p]).applyMatrix4(d,o),a.normal.toArray(c,f),c[f+3]=a.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==n||r;return r=i,t=c(e,a,0),n=e.length,o},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,a,o,u,d,p){if(!r||null===e||0===e.length||i&&!o)i?c(null):l();else{var f=i?0:n,h=4*f,m=d.clippingState||null;s.value=m,m=c(e,u,h,p);for(var _=0;_!==h;++_)m[_]=t[_];d.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function kr(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Ir(e,t,n){var r={},i={};function a(e){var o=e.target,s=r[o.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);o.removeEventListener("dispose",a),delete r[o.id];var c=i[s.id];c&&(t.remove(c),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new sr).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var n=i[e.id];if(n)return n;var r,a=[],o=e.index,s=e.attributes;if(null!==o)for(var l=0,c=(r=o.array).length;l<c;l+=3){var u=r[l+0],d=r[l+1],p=r[l+2];a.push(u,d,d,p,p,u)}else for(l=0,c=(r=s.position.array).length/3-1;l<c;l+=3)u=l+0,d=l+1,p=l+2,a.push(u,d,d,p,p,u);return n=new(ar(a)>65535?tr:Qn)(a,1),t.update(n,34963),i[e.id]=n,n}}}function jr(e,t,n,r){var i,a,o;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i)},this.renderInstances=function(s,l,c){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,a,l*o,s.maxInstancedCount),n.update(c,i,s.maxInstancedCount)}}function Nr(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 5:case 6:t.triangles+=r*(e-2);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ur(e,t){return Math.abs(t[1])-Math.abs(e[1])}function zr(e){var t={},n=new Float32Array(8);return{update:function(r,i,a,o){var s=r.morphTargetInfluences,l=s.length,c=t[i.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[i.id]=c}var d=a.morphTargets&&i.morphAttributes.position,p=a.morphNormals&&i.morphAttributes.normal;for(u=0;u<l;u++)0!==(f=c[u])[1]&&(d&&i.removeAttribute("morphTarget"+u),p&&i.removeAttribute("morphNormal"+u));for(u=0;u<l;u++)(f=c[u])[0]=u,f[1]=s[u];for(c.sort(Ur),u=0;u<8;u++){var f;if(f=c[u]){var h=f[0],m=f[1];if(m){d&&i.addAttribute("morphTarget"+u,d[h]),p&&i.addAttribute("morphNormal"+u,p[h]),n[u]=m;continue}}n[u]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Gr(e,t){var n={};return{update:function(r){var i=t.render.frame,a=r.geometry,o=e.get(r,a);return n[o.id]!==i&&(a.isGeometry&&o.updateFromObject(r),e.update(o),n[o.id]=i),o},dispose:function(){n={}}}}function Wr(e,t,n,r,i,a,o,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:he,o=void 0!==o?o:Ge,un.call(this,e,t,n,r,i,a,o,s,l,c),this.flipY=!1}function Hr(e,t,n,r){un.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=we,this.minFilter=we,this.wrapR=Se,this.generateMipmaps=!1,this.flipY=!1}function qr(e,t,n,r){un.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=we,this.minFilter=we,this.wrapR=Se,this.generateMipmaps=!1,this.flipY=!1}Tr.prototype=Object.create(fr.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isShaderMaterial=!0,Tr.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sn(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Tr.prototype.toJSON=function(e){var t=fr.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var a in this.extensions)!0===this.extensions[a]&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},Object.assign(Vr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Kt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Kt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Kt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Kt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(mr=new Kt,_r=new Kt,gr=new Kt,function(e,t,n,r){mr.copy(e).add(t).multiplyScalar(.5),_r.copy(t).sub(e).normalize(),gr.copy(this.origin).sub(mr);var i,a,o,s,l=.5*e.distanceTo(t),c=-this.direction.dot(_r),u=gr.dot(this.direction),d=-gr.dot(_r),p=gr.lengthSq(),f=Math.abs(1-c*c);if(f>0)if(a=c*u-d,s=l*f,(i=c*d-u)>=0)if(a>=-s)if(a<=s){var h=1/f;o=(i*=h)*(i+c*(a*=h)+2*u)+a*(c*i+a+2*d)+p}else a=l,o=-(i=Math.max(0,-(c*a+u)))*i+a*(a+2*d)+p;else a=-l,o=-(i=Math.max(0,-(c*a+u)))*i+a*(a+2*d)+p;else a<=-s?o=-(i=Math.max(0,-(-c*l+u)))*i+(a=i>0?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+p:a<=s?(i=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+p):o=-(i=Math.max(0,-(c*l+u)))*i+(a=i>0?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+p;else a=c>0?-l:l,o=-(i=Math.max(0,-(c*a+u)))*i+a*(a+2*d)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(_r).multiplyScalar(a).add(mr),o}),intersectSphere:function(){var e=new Kt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,l=r+o;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(hr=new Kt,function(e){return null!==this.intersectBox(e,hr)}),intersectTriangle:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Kt;return function(i,a,o,s,l){t.subVectors(a,i),n.subVectors(o,i),r.crossVectors(t,n);var c,u=this.direction.dot(r);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,i);var d=c*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var p=c*this.direction.dot(t.cross(e));if(p<0)return null;if(d+p>u)return null;var f=-c*e.dot(r);return f<0?null:this.at(f/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Fr,{getNormal:(yr=new Kt,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Kt),r.subVectors(n,t),yr.subVectors(e,t),r.cross(yr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new Kt,t=new Kt,n=new Kt;return function(r,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),n.subVectors(r,i);var l=e.dot(e),c=e.dot(t),u=e.dot(n),d=t.dot(t),p=t.dot(n),f=l*d-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Kt),0===f)return s.set(-2,-1,-1);var h=1/f,m=(d*u-c*p)*h,_=(l*p-c*u)*h;return s.set(1-m-_,_,m)}}(),containsPoint:function(){var e=new Kt;return function(t,n,r,i){return Fr.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(vr=new Kt,function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,vr),s.set(0,0),s.addScaledVector(i,vr.x),s.addScaledVector(a,vr.y),s.addScaledVector(o,vr.z),s})}),Object.assign(Fr.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Kt,t=new Kt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Kt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Fr.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Kt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Fr.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Fr.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return Fr.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Ar=new Kt,xr=new Kt,Sr=new Kt,br=new Kt,wr=new Kt,Er=new Kt,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Kt);var n,r,i=this.a,a=this.b,o=this.c;Ar.subVectors(a,i),xr.subVectors(o,i),br.subVectors(e,i);var s=Ar.dot(br),l=xr.dot(br);if(s<=0&&l<=0)return t.copy(i);wr.subVectors(e,a);var c=Ar.dot(wr),u=xr.dot(wr);if(c>=0&&u<=c)return t.copy(a);var d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(Ar,n);Er.subVectors(e,o);var p=Ar.dot(Er),f=xr.dot(Er);if(f>=0&&p<=f)return t.copy(o);var h=p*l-s*f;if(h<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(xr,r);var m=c*f-p*u;if(m<=0&&u-c>=0&&p-f>=0)return Sr.subVectors(o,a),r=(u-c)/(u-c+(p-f)),t.copy(a).addScaledVector(Sr,r);var _=1/(m+h+d);return n=h*_,r=d*_,t.copy(i).addScaledVector(Ar,n).addScaledVector(xr,r)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Dr.prototype=Object.create(fr.prototype),Dr.prototype.constructor=Dr,Dr.prototype.isMeshBasicMaterial=!0,Dr.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Or.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Or,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Gn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new An,t=new Vr,n=new gn,r=new Kt,i=new Kt,a=new Kt,o=new Kt,s=new Kt,l=new Kt,c=new Kt,u=new Kt,d=new Kt,p=new Ht,f=new Ht,h=new Ht,m=new Kt,_=new Kt;function g(e,t,n,r,i,a,o,s){if(null===(t.side===x?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==S,s)))return null;_.copy(s),_.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(_);return l<n.near||l>n.far?null:{distance:l,point:_.clone(),object:e}}function v(e,t,n,_,v,y,A,x,S,b){r.fromBufferAttribute(v,x),i.fromBufferAttribute(v,S),a.fromBufferAttribute(v,b);var w=e.morphTargetInfluences;if(t.morphTargets&&y&&w){c.set(0,0,0),u.set(0,0,0),d.set(0,0,0);for(var E=0,P=y.length;E<P;E++){var C=w[E],T=y[E];0!==C&&(o.fromBufferAttribute(T,x),s.fromBufferAttribute(T,S),l.fromBufferAttribute(T,b),c.addScaledVector(o.sub(r),C),u.addScaledVector(s.sub(i),C),d.addScaledVector(l.sub(a),C))}r.add(c),i.add(u),a.add(d)}var V=g(e,t,n,_,r,i,a,m);if(V){A&&(p.fromBufferAttribute(A,x),f.fromBufferAttribute(A,S),h.fromBufferAttribute(A,b),V.uv=Fr.getUV(m,r,i,a,p,f,h,new Ht));var F=new Ln(x,S,b);Fr.getNormal(r,i,a,F.normal),V.face=F}return V}return function(r,i){var a,o=this.geometry,s=this.material,l=this.matrixWorld;if(void 0!==s&&(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(l),!1!==r.ray.intersectsSphere(n)&&(e.getInverse(l),t.copy(r.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var c,u,d,_,y,A,x,S,b,w=o.index,E=o.attributes.position,P=o.morphAttributes.position,C=o.attributes.uv,T=o.groups,V=o.drawRange;if(null!==w)if(Array.isArray(s))for(_=0,A=T.length;_<A;_++)for(b=s[(S=T[_]).materialIndex],y=Math.max(S.start,V.start),x=Math.min(S.start+S.count,V.start+V.count);y<x;y+=3)c=w.getX(y),u=w.getX(y+1),d=w.getX(y+2),(a=v(this,b,r,t,E,P,C,c,u,d))&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=S.materialIndex,i.push(a));else for(_=Math.max(0,V.start),A=Math.min(w.count,V.start+V.count);_<A;_+=3)c=w.getX(_),u=w.getX(_+1),d=w.getX(_+2),(a=v(this,s,r,t,E,P,C,c,u,d))&&(a.faceIndex=Math.floor(_/3),i.push(a));else if(void 0!==E)if(Array.isArray(s))for(_=0,A=T.length;_<A;_++)for(b=s[(S=T[_]).materialIndex],y=Math.max(S.start,V.start),x=Math.min(S.start+S.count,V.start+V.count);y<x;y+=3)(a=v(this,b,r,t,E,P,C,c=y,u=y+1,d=y+2))&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=S.materialIndex,i.push(a));else for(_=Math.max(0,V.start),A=Math.min(E.count,V.start+V.count);_<A;_+=3)(a=v(this,s,r,t,E,P,C,c=_,u=_+1,d=_+2))&&(a.faceIndex=Math.floor(_/3),i.push(a))}else if(o.isGeometry){var F,D,O,R,M=Array.isArray(s),L=o.vertices,B=o.faces,k=o.faceVertexUvs[0];k.length>0&&(R=k);for(var I=0,j=B.length;I<j;I++){var N=B[I],U=M?s[N.materialIndex]:s;if(void 0!==U&&(F=L[N.a],D=L[N.b],O=L[N.c],a=g(this,U,r,t,F,D,O,m))){if(R&&R[I]){var z=R[I];p.copy(z[0]),f.copy(z[1]),h.copy(z[2]),a.uv=Fr.getUV(m,F,D,O,p,f,h,new Ht)}a.face=N,a.faceIndex=I,i.push(a)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Wr.prototype=Object.create(un.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isCubeTexture=!0,Object.defineProperty(Wr.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Hr.prototype=Object.create(un.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isDataTexture2DArray=!0,qr.prototype=Object.create(un.prototype),qr.prototype.constructor=qr,qr.prototype.isDataTexture3D=!0;var Kr=new un,Yr=new Hr,$r=new qr,Xr=new Wr,Zr=[],Jr=[],Qr=new Float32Array(16),ei=new Float32Array(9),ti=new Float32Array(4);function ni(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Zr[i];if(void 0===a&&(a=new Float32Array(i),Zr[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function ri(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ii(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function ai(e,t){var n=Jr[t];void 0===n&&(n=new Int32Array(t),Jr[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function oi(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function si(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function li(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ri(n,t))return;e.uniform2fv(this.addr,t),ii(n,t)}}function ci(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ri(n,t))return;e.uniform3fv(this.addr,t),ii(n,t)}}function ui(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ri(n,t))return;e.uniform4fv(this.addr,t),ii(n,t)}}function di(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ri(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ii(n,t)}else{if(ri(n,r))return;ti.set(r),e.uniformMatrix2fv(this.addr,!1,ti),ii(n,r)}}function pi(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ri(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ii(n,t)}else{if(ri(n,r))return;ei.set(r),e.uniformMatrix3fv(this.addr,!1,ei),ii(n,r)}}function fi(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ri(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ii(n,t)}else{if(ri(n,r))return;Qr.set(r),e.uniformMatrix4fv(this.addr,!1,Qr),ii(n,r)}}function hi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Kr,i)}function mi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Yr,i)}function _i(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||$r,i)}function gi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Xr,i)}function vi(e,t){var n=this.cache;ri(n,t)||(e.uniform2iv(this.addr,t),ii(n,t))}function yi(e,t){var n=this.cache;ri(n,t)||(e.uniform3iv(this.addr,t),ii(n,t))}function Ai(e,t){var n=this.cache;ri(n,t)||(e.uniform4iv(this.addr,t),ii(n,t))}function xi(e,t){var n=this.cache;ri(n,t)||(e.uniform1fv(this.addr,t),ii(n,t))}function Si(e,t){var n=this.cache;ri(n,t)||(e.uniform1iv(this.addr,t),ii(n,t))}function bi(e,t){var n=this.cache,r=ni(t,this.size,2);ri(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function wi(e,t){var n=this.cache,r=ni(t,this.size,3);ri(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Ei(e,t){var n=this.cache,r=ni(t,this.size,4);ri(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Pi(e,t){var n=this.cache,r=ni(t,this.size,4);ri(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Ci(e,t){var n=this.cache,r=ni(t,this.size,9);ri(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Ti(e,t){var n=this.cache,r=ni(t,this.size,16);ri(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Vi(e,t,n){var r=this.cache,i=t.length,a=ai(n,i);!1===ri(r,a)&&(e.uniform1iv(this.addr,a),ii(r,a));for(var o=0;o!==i;++o)n.safeSetTexture2D(t[o]||Kr,a[o])}function Fi(e,t,n){var r=this.cache,i=t.length,a=ai(n,i);!1===ri(r,a)&&(e.uniform1iv(this.addr,a),ii(r,a));for(var o=0;o!==i;++o)n.safeSetTextureCube(t[o]||Xr,a[o])}function Di(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return oi;case 35664:return li;case 35665:return ci;case 35666:return ui;case 35674:return di;case 35675:return pi;case 35676:return fi;case 35678:case 36198:return hi;case 35679:return _i;case 35680:return gi;case 36289:return mi;case 5124:case 35670:return si;case 35667:case 35671:return vi;case 35668:case 35672:return yi;case 35669:case 35673:return Ai}}(t.type)}function Oi(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return xi;case 35664:return bi;case 35665:return wi;case 35666:return Ei;case 35674:return Pi;case 35675:return Ci;case 35676:return Ti;case 35678:return Vi;case 35680:return Fi;case 5124:case 35670:return Si;case 35667:case 35671:return vi;case 35668:case 35672:return yi;case 35669:case 35673:return Ai}}(t.type)}function Ri(e){this.id=e,this.seq=[],this.map={}}Oi.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ii(t,e)},Ri.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var Mi=/([\w\d_]+)(\])?(\[|\.)?/g;function Li(e,t){e.seq.push(t),e.map[t.id]=t}function Bi(e,t,n){var r=e.name,i=r.length;for(Mi.lastIndex=0;;){var a=Mi.exec(r),o=Mi.lastIndex,s=a[1],l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){Li(n,void 0===c?new Di(s,e,t):new Oi(s,e,t));break}var u=n.map[s];void 0===u&&Li(n,u=new Ri(s)),n=u}}function ki(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Bi(i,e.getUniformLocation(t,i.name),this)}}function Ii(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}ki.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},ki.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},ki.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},ki.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var ji=0;function Ni(e){switch(e){case Ot:return["Linear","( value )"];case Rt:return["sRGB","( value )"];case Lt:return["RGBE","( value )"];case kt:return["RGBM","( value, 7.0 )"];case It:return["RGBM","( value, 16.0 )"];case jt:return["RGBD","( value, 256.0 )"];case Mt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ui(e,t){var n=Ni(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function zi(e,t){var n;switch(t){case le:n="Linear";break;case ce:n="Reinhard";break;case ue:n="Uncharted2";break;case de:n="OptimizedCineon";break;case pe:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Gi(e){return""!==e}function Wi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Hi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function qi(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){var n=xn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return qi(n)})}function Ki(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]");return i})}function Yi(e,t,n,r,i,a,o,s){var l=e.context,c=r.defines,u=i.vertexShader,d=i.fragmentShader,p="SHADOWMAP_TYPE_BASIC";a.shadowMapType===v?p="SHADOWMAP_TYPE_PCF":a.shadowMapType===y&&(p="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case he:case me:f="ENVMAP_TYPE_CUBE";break;case ye:case Ae:f="ENVMAP_TYPE_CUBE_UV";break;case _e:case ge:f="ENVMAP_TYPE_EQUIREC";break;case ve:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case me:case ge:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ie:m="ENVMAP_BLENDING_MULTIPLY";break;case ae:m="ENVMAP_BLENDING_MIX";break;case oe:m="ENVMAP_BLENDING_ADD"}}var _,g,A,x,S,b=e.gammaFactor>0?e.gammaFactor:1,w=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gi).join("\n")}(r.extensions,a,t),E=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),P=l.createProgram();if(r.isRawShaderMaterial?((_=[E].filter(Gi).join("\n")).length>0&&(_+="\n"),(g=[w,E].filter(Gi).join("\n")).length>0&&(g+="\n")):(_=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,E,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Gi).join("\n"),g=[w,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,E,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.envMap?"#define "+h:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+p:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==se?"#define TONE_MAPPING":"",a.toneMapping!==se?xn.tonemapping_pars_fragment:"",a.toneMapping!==se?zi("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?xn.encodings_pars_fragment:"",a.mapEncoding?Ui("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Ui("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Ui("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ui("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(A="linearToOutputTexel",x=a.outputEncoding,S=Ni(x),"vec4 "+A+"( vec4 value ) { return LinearTo"+S[0]+S[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Gi).join("\n")),u=Hi(u=Wi(u=qi(u),a),a),d=Hi(d=Wi(d=qi(d),a),a),u=Ki(u),d=Ki(d),o.isWebGL2&&!r.isRawShaderMaterial){var C=!1,T=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(T)&&null!==d.match(T)&&(C=!0,u=u.replace(T,""),d=d.replace(T,"")),_=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,g=["#version 300 es\n","#define varying in",C?"":"out highp vec4 pc_fragColor;",C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var V=g+d,F=Ii(l,35633,_+u),D=Ii(l,35632,V);l.attachShader(P,F),l.attachShader(P,D),void 0!==r.index0AttributeName?l.bindAttribLocation(P,0,r.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(P,0,"position"),l.linkProgram(P);var O,R,M=l.getProgramInfoLog(P).trim(),L=l.getShaderInfoLog(F).trim(),B=l.getShaderInfoLog(D).trim(),k=!0,I=!0;return!1===l.getProgramParameter(P,35714)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(P,35715),"gl.getProgramInfoLog",M,L,B)):""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==L&&""!==B||(I=!1),I&&(this.diagnostics={runnable:k,material:r,programLog:M,vertexShader:{log:L,prefix:_},fragmentShader:{log:B,prefix:g}}),l.deleteShader(F),l.deleteShader(D),this.getUniforms=function(){return void 0===O&&(O=new ki(l,P,s)),O},this.getAttributes=function(){return void 0===R&&(R=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(l,P)),R},this.destroy=function(){l.deleteProgram(P),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=ji++,this.code=n,this.usedTimes=1,this.program=P,this.vertexShader=F,this.fragmentShader=D,this}function $i(e,t,n,r){var i=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ot,n===Ot&&t&&(n=Mt),n}this.getParameters=function(t,r,i,o,l,c,u){var d=a[t.type],p=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),a=Math.min(i,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(u):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var h=e.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:s(h?h.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:s(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===ye||t.envMap.mapping===Ae),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Gt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!o,useFog:t.fog,fogExp:o&&o.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&i.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===S,flipSided:t.side===x,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(a,o,s,l){for(var c,u=0,d=i.length;u<d;u++){var p=i[u];if(p.code===l){++(c=p).usedTimes;break}}return void 0===c&&(c=new Yi(e,t,l,a,o,s,n,r),i.push(c)),c},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Xi(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Zi(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ji(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Qi(){var e=[],t=0,n=[],r=[],i={id:-1};function a(n,r,a,o,s,l){var c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:a,program:a.program||i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:l},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=a,c.program=a.program||i,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=s,c.group=l),t++,c}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,o,s,l){var c=a(e,t,i,o,s,l);(!0===i.transparent?r:n).push(c)},unshift:function(e,t,i,o,s,l){var c=a(e,t,i,o,s,l);(!0===i.transparent?r:n).unshift(c)},sort:function(){n.length>1&&n.sort(Zi),r.length>1&&r.sort(Ji)}}}function ea(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}return{get:function(n,r){var i,a=e[n.id];return void 0===a?(i=new Qi,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):void 0===(i=a[r.id])&&(i=new Qi,a[r.id]=i),i},dispose:function(){e={}}}}function ta(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Kt,color:new Vn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"SpotLight":n={position:new Kt,direction:new Kt,color:new Vn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"PointLight":n={position:new Kt,color:new Vn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ht,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Kt,skyColor:new Vn,groundColor:new Vn};break;case"RectAreaLight":n={color:new Vn,position:new Kt,halfWidth:new Kt,halfHeight:new Kt}}return e[t.id]=n,n}}}var na=0;function ra(){var e=new ta,t={id:na++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Kt,r=new An,i=new An;return{setup:function(a,o,s){for(var l=0,c=0,u=0,d=0,p=0,f=0,h=0,m=0,_=s.matrixWorldInverse,g=0,v=a.length;g<v;g++){var y=a[g],A=y.color,x=y.intensity,S=y.distance,b=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=A.r*x,c+=A.g*x,u+=A.b*x;else if(y.isDirectionalLight){if((E=e.get(y)).color.copy(y.color).multiplyScalar(y.intensity),E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(_),E.shadow=y.castShadow,y.castShadow){var w=y.shadow;E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize}t.directionalShadowMap[d]=b,t.directionalShadowMatrix[d]=y.shadow.matrix,t.directional[d]=E,d++}else if(y.isSpotLight)(E=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(_),E.color.copy(A).multiplyScalar(x),E.distance=S,E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(_),E.coneCos=Math.cos(y.angle),E.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),E.decay=y.decay,E.shadow=y.castShadow,y.castShadow&&(w=y.shadow,E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize),t.spotShadowMap[f]=b,t.spotShadowMatrix[f]=y.shadow.matrix,t.spot[f]=E,f++;else if(y.isRectAreaLight)(E=e.get(y)).color.copy(A).multiplyScalar(x),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(_),i.identity(),r.copy(y.matrixWorld),r.premultiply(_),i.extractRotation(r),E.halfWidth.set(.5*y.width,0,0),E.halfHeight.set(0,.5*y.height,0),E.halfWidth.applyMatrix4(i),E.halfHeight.applyMatrix4(i),t.rectArea[h]=E,h++;else if(y.isPointLight)(E=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(_),E.color.copy(y.color).multiplyScalar(y.intensity),E.distance=y.distance,E.decay=y.decay,E.shadow=y.castShadow,y.castShadow&&(w=y.shadow,E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize,E.shadowCameraNear=w.camera.near,E.shadowCameraFar=w.camera.far),t.pointShadowMap[p]=b,t.pointShadowMatrix[p]=y.shadow.matrix,t.point[p]=E,p++;else if(y.isHemisphereLight){var E;(E=e.get(y)).direction.setFromMatrixPosition(y.matrixWorld),E.direction.transformDirection(_),E.direction.normalize(),E.skyColor.copy(y.color).multiplyScalar(x),E.groundColor.copy(y.groundColor).multiplyScalar(x),t.hemi[m]=E,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=d,t.spot.length=f,t.rectArea.length=h,t.point.length=p,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=d,t.hash.pointLength=p,t.hash.spotLength=f,t.hash.rectAreaLength=h,t.hash.hemiLength=m,t.hash.shadowsLength=o.length},state:t}}function ia(){var e=new ra,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function aa(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}return{get:function(n,r){var i;return void 0===e[n.id]?(i=new ia,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):void 0===e[n.id][r.id]?(i=new ia,e[n.id][r.id]=i):i=e[n.id][r.id],i},dispose:function(){e={}}}}function oa(e){fr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Nt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function sa(e){fr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Kt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function la(e,t,n){for(var r=new yn,i=new An,a=new Ht,o=new Ht(n,n),s=new Kt,l=new Kt,c=1,u=2,d=1+(c|u),p=new Array(d),f=new Array(d),h={},m={0:x,1:A,2:S},_=[new Kt(1,0,0),new Kt(-1,0,0),new Kt(0,0,1),new Kt(0,0,-1),new Kt(0,1,0),new Kt(0,-1,0)],g=[new Kt(0,1,0),new Kt(0,1,0),new Kt(0,1,0),new Kt(0,1,0),new Kt(0,0,1),new Kt(0,0,-1)],y=[new dn,new dn,new dn,new dn,new dn,new dn],b=0;b!==d;++b){var w=0!=(b&c),E=0!=(b&u),P=new oa({depthPacking:Ut,morphTargets:w,skinning:E});p[b]=P;var C=new sa({morphTargets:w,skinning:E});f[b]=C}var V=this;function F(t,n,r,i,a,o){var s=t.geometry,l=null,d=p,_=t.customDepthMaterial;if(r&&(d=f,_=t.customDistanceMaterial),_)l=_;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var v=t.isSkinnedMesh&&n.skinning,y=0;g&&(y|=c),v&&(y|=u),l=d[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var A=l.uuid,x=n.uuid,S=h[A];void 0===S&&(S={},h[A]=S);var b=S[x];void 0===b&&(b=l.clone(),S[x]=b),l=b}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:m[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(i),l.nearDistance=a,l.farDistance=o),l}function D(n,i,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var u=s.groups,d=0,p=u.length;d<p;d++){var f=u[d],h=c[f.materialIndex];if(h&&h.visible){var m=F(n,h,o,l,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,f)}}else if(c.visible){m=F(n,c,o,l,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,null)}}for(var _=n.children,g=0,v=_.length;g<v;g++)D(_[g],i,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v,this.render=function(t,n,c){if(!1!==V.enabled&&(!1!==V.autoUpdate||!1!==V.needsUpdate)&&0!==t.length){var u,d=e.getRenderTarget(),p=e.state;p.setBlending(T),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var f=0,h=t.length;f<h;f++){var m=t[f],v=m.shadow,A=m&&m.isPointLight;if(void 0!==v){var x=v.camera;if(a.copy(v.mapSize),a.min(o),A){var S=a.x,b=a.y;y[0].set(2*S,b,S,b),y[1].set(0,b,S,b),y[2].set(3*S,b,S,b),y[3].set(S,b,S,b),y[4].set(3*S,0,S,b),y[5].set(S,0,S,b),a.x*=4,a.y*=2}if(null===v.map){var w={minFilter:we,magFilter:we,format:We};v.map=new pn(a.x,a.y,w),v.map.texture.name=m.name+".shadowMap",x.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var E=v.map,P=v.matrix;l.setFromMatrixPosition(m.matrixWorld),x.position.copy(l),A?(u=6,P.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(m.target.matrixWorld),x.lookAt(s),x.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(x.projectionMatrix),P.multiply(x.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var C=0;C<u;C++){if(A){s.copy(x.position),s.add(_[C]),x.up.copy(g[C]),x.lookAt(s),x.updateMatrixWorld();var F=y[C];p.viewport(F)}i.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),r.setFromMatrix(i),D(n,c,x,A)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}V.needsUpdate=!1,e.setRenderTarget(d)}}}function ca(e,t,n,r){var i=new function(){var t=!1,n=new dn,r=null,i=new dn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?ae(2929):oe(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case X:e.depthFunc(512);break;case Z:e.depthFunc(519);break;case J:e.depthFunc(513);break;case Q:e.depthFunc(515);break;case ee:e.depthFunc(514);break;case te:e.depthFunc(518);break;case ne:e.depthFunc(516);break;case re:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(e){e?ae(2960):oe(2960)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},s=e.getParameter(34921),l=new Uint8Array(s),c=new Uint8Array(s),u=new Uint8Array(s),h={},m=null,_=null,g=null,v=null,y=null,A=null,b=null,w=null,E=null,P=null,C=!1,L=null,B=null,k=null,I=null,j=null,N=e.getParameter(35661),U=!1,z=0,G=e.getParameter(7938);-1!==G.indexOf("WebGL")?(z=parseFloat(/^WebGL\ ([0-9])/.exec(G)[1]),U=z>=1):-1!==G.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(G)[1]),U=z>=2);var W=null,H={},q=new dn,K=new dn;function Y(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var $={};function ie(n,i){(l[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),u[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),u[n]=i)}function ae(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function oe(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function se(t,r,i,a,o,s,l,c){if(t!==T){if(g||(ae(3042),g=!0),t===R)o=o||r,s=s||i,l=l||a,r===y&&o===w||(e.blendEquationSeparate(n.convert(r),n.convert(o)),y=r,w=o),i===A&&a===b&&s===E&&l===P||(e.blendFuncSeparate(n.convert(i),n.convert(a),n.convert(s),n.convert(l)),A=i,b=a,E=s,P=l),v=t,C=null;else if(t!==v||c!==C){if(y===M&&w===M||(e.blendEquation(32774),y=M,w=M),c)switch(t){case V:e.blendFuncSeparate(1,771,1,771);break;case F:e.blendFunc(1,1);break;case D:e.blendFuncSeparate(0,0,769,771);break;case O:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case V:e.blendFuncSeparate(770,771,1,771);break;case F:e.blendFunc(770,1);break;case D:e.blendFunc(0,769);break;case O:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}A=null,b=null,E=null,P=null,v=t,C=c}}else g&&(oe(3042),g=!1)}function le(t){L!==t&&(t?e.frontFace(2304):e.frontFace(2305),L=t)}function ce(t){t!==d?(ae(2884),t!==B&&(t===p?e.cullFace(1029):t===f?e.cullFace(1028):e.cullFace(1032))):oe(2884),B=t}function ue(t,n,r){t?(ae(32823),I===n&&j===r||(e.polygonOffset(n,r),I=n,j=r)):oe(32823)}function de(t){void 0===t&&(t=33984+N-1),W!==t&&(e.activeTexture(t),W=t)}return $[3553]=Y(3553,3553,1),$[34067]=Y(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ae(2929),a.setFunc(Q),le(!1),ce(p),ae(2884),se(T),{buffers:{color:i,depth:a,stencil:o},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){ie(e,0)},enableAttributeAndDivisor:ie,disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==l[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:ae,disable:oe,getCompressedTextureFormats:function(){if(null===m&&(m=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)m.push(n[r]);return m},useProgram:function(t){return _!==t&&(e.useProgram(t),_=t,!0)},setBlending:se,setMaterial:function(e,t){e.side===S?oe(2884):ae(2884);var n=e.side===x;t&&(n=!n),le(n),e.blending===V&&!1===e.transparent?se(T):se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite),ue(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:le,setCullFace:ce,setLineWidth:function(t){t!==k&&(U&&e.lineWidth(t),k=t)},setPolygonOffset:ue,setScissorTest:function(e){e?ae(3089):oe(3089)},activeTexture:de,bindTexture:function(t,n){null===W&&de();var r=H[W];void 0===r&&(r={type:void 0,texture:void 0},H[W]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||$[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))},viewport:function(t){!1===K.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),K.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);h={},m=null,W=null,H={},_=null,v=null,L=null,B=null,i.reset(),a.reset(),o.reset()}}}function ua(e,t,n,r,i,a,o){var s,l={},c="undefined"!=typeof OffscreenCanvas;function u(e,t){return c?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Wt.floorPowerOfTwo:Math.floor,o=a(i*e.width),l=a(i*e.height);void 0===s&&(s=u(o,l));var c=n?u(o,l):s;return c.width=o,c.height=l,c.getContext("2d").drawImage(e,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+l+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function p(e){return Wt.isPowerOfTwo(e.width)&&Wt.isPowerOfTwo(e.height)}function f(e,t){return e.generateMipmaps&&t&&e.minFilter!==we&&e.minFilter!==Ce}function h(t,n,i,a){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function m(e,n){if(!i.isWebGL2)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function _(e){return e===we||e===Ee||e===Pe?9728:9729}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&delete l[n.id],o.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),o.memory.textures--}var y=0;function A(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;l[t]!==n&&(l[t]=n,e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void E(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function x(t,o){var s=r.get(t);if(6===t.image.length)if(t.version>0&&s.__version!==t.version){w(s,t),n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,u=[],_=0;_<6;_++)u[_]=l||c?c?t.image[_].image:t.image[_]:d(t.image[_],!1,!0,i.maxCubemapSize);var g=u[0],v=p(g)||i.isWebGL2,y=a.convert(t.format),A=a.convert(t.type),x=m(y,A);b(34067,t,v);for(_=0;_<6;_++)if(l)for(var S,E=u[_].mipmaps,P=0,C=E.length;P<C;P++)S=E[P],t.format!==We&&t.format!==Ge?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(34069+_,P,x,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+_,P,x,S.width,S.height,0,y,A,S.data);else c?n.texImage2D(34069+_,0,x,u[_].width,u[_].height,0,y,A,u[_].data):n.texImage2D(34069+_,0,x,y,A,u[_]);s.__maxMipLevel=l?E.length-1:0,f(t,v)&&h(34067,t,g.width,g.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+o),n.bindTexture(34067,s.__webglTexture)}function S(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function b(n,o,s){var l;if(s?(e.texParameteri(n,10242,a.convert(o.wrapS)),e.texParameteri(n,10243,a.convert(o.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,a.convert(o.wrapR)),e.texParameteri(n,10240,a.convert(o.magFilter)),e.texParameteri(n,10241,a.convert(o.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===Se&&o.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,_(o.magFilter)),e.texParameteri(n,10241,_(o.minFilter)),o.minFilter!==we&&o.minFilter!==Ce&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===Be&&null===t.get("OES_texture_float_linear"))return;if(o.type===ke&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function w(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",g),t.__webglTexture=e.createTexture(),o.memory.textures++)}function E(t,r,o){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),w(t,r),n.activeTexture(33984+o),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var l=function(e){return!i.isWebGL2&&(e.wrapS!==Se||e.wrapT!==Se||e.minFilter!==we&&e.minFilter!==Ce)}(r)&&!1===p(r.image),c=d(r.image,l,!1,i.maxTextureSize),u=p(c)||i.isWebGL2,_=a.convert(r.format),g=a.convert(r.type),v=m(_,g);b(s,r,u);var y,A=r.mipmaps;if(r.isDepthTexture){if(v=6402,r.type===Be){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");v=36012}else i.isWebGL2&&(v=33189);r.format===Ye&&6402===v&&r.type!==Re&&r.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Re,g=a.convert(r.type)),r.format===$e&&(v=34041,r.type!==Ue&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ue,g=a.convert(r.type))),n.texImage2D(3553,0,v,c.width,c.height,0,_,g,null)}else if(r.isDataTexture)if(A.length>0&&u){for(var x=0,S=A.length;x<S;x++)y=A[x],n.texImage2D(3553,x,v,y.width,y.height,0,_,g,y.data);r.generateMipmaps=!1,t.__maxMipLevel=A.length-1}else n.texImage2D(3553,0,v,c.width,c.height,0,_,g,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(x=0,S=A.length;x<S;x++)y=A[x],r.format!==We&&r.format!==Ge?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(3553,x,v,y.width,y.height,0,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,x,v,y.width,y.height,0,_,g,y.data);t.__maxMipLevel=A.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,c.width,c.height,c.depth,0,_,g,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,c.width,c.height,c.depth,0,_,g,c.data),t.__maxMipLevel=0;else if(A.length>0&&u){for(x=0,S=A.length;x<S;x++)y=A[x],n.texImage2D(3553,x,v,_,g,y);r.generateMipmaps=!1,t.__maxMipLevel=A.length-1}else n.texImage2D(3553,0,v,_,g,c),t.__maxMipLevel=0;f(r,u)&&h(3553,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function P(t,i,o,s){var l=a.convert(i.texture.format),c=a.convert(i.texture.type),u=m(l,c);n.texImage2D(s,0,u,i.width,i.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function C(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=V(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=V(n);e.renderbufferStorageMultisample(36161,i,34041,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var o=m(a.convert(n.texture.format),a.convert(n.texture.type));if(r){i=V(n);e.renderbufferStorageMultisample(36161,i,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function T(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),A(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ye)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),C(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),C(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function V(e){return i.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,e.samples):0}var F=!1,D=!1;this.allocateTextureUnit=function(){var e=y;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),y+=1,e},this.resetTextureUnits=function(){y=0},this.setTexture2D=A,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?E(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?E(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=x,this.setTextureCubeDynamic=S,this.setupRenderTarget=function(t){var s=r.get(t),l=r.get(t.texture);t.addEventListener("dispose",v),l.__webglTexture=e.createTexture(),o.memory.textures++;var c=!0===t.isWebGLRenderTargetCube,u=!0===t.isWebGLMultisampleRenderTarget,d=p(t)||i.isWebGL2;if(c){s.__webglFramebuffer=[];for(var _=0;_<6;_++)s.__webglFramebuffer[_]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),u)if(i.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=m(a.convert(t.texture.format),a.convert(t.texture.type)),y=V(t);e.renderbufferStorageMultisample(36161,y,g,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),C(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){for(n.bindTexture(34067,l.__webglTexture),b(34067,t.texture,d),_=0;_<6;_++)P(s.__webglFramebuffer[_],t,36064,34069+_);f(t.texture,d)&&h(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),b(3553,t.texture,d),P(s.__webglFramebuffer,t,36064,3553),f(t.texture,d)&&h(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&T(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(f(t,p(e)||i.isWebGL2)){var a=e.isWebGLRenderTargetCube?34067:3553,o=r.get(t).__webglTexture;n.bindTexture(a,o),h(a,t,e.width,e.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var a=t.width,o=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),A(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x(e,t):S(e,t)}}function da(e,t,n){return{convert:function(e){var r;if(e===xe)return 10497;if(e===Se)return 33071;if(e===be)return 33648;if(e===we)return 9728;if(e===Ee)return 9984;if(e===Pe)return 9986;if(e===Ce)return 9729;if(e===Te)return 9985;if(e===Ve)return 9987;if(e===Fe)return 5121;if(e===Ie)return 32819;if(e===je)return 32820;if(e===Ne)return 33635;if(e===De)return 5120;if(e===Oe)return 5122;if(e===Re)return 5123;if(e===Me)return 5124;if(e===Le)return 5125;if(e===Be)return 5126;if(e===ke){if(n.isWebGL2)return 5131;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(e===ze)return 6406;if(e===Ge)return 6407;if(e===We)return 6408;if(e===He)return 6409;if(e===qe)return 6410;if(e===Ye)return 6402;if(e===$e)return 34041;if(e===Xe)return 6403;if(e===M)return 32774;if(e===L)return 32778;if(e===B)return 32779;if(e===j)return 0;if(e===N)return 1;if(e===U)return 768;if(e===z)return 769;if(e===G)return 770;if(e===W)return 771;if(e===H)return 772;if(e===q)return 773;if(e===K)return 774;if(e===Y)return 775;if(e===$)return 776;if((e===Ze||e===Je||e===Qe||e===et)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(e===Ze)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qe)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===et)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===tt||e===nt||e===rt||e===it)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===tt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===nt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===rt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===it)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===at&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((e===ot||e===st||e===lt||e===ct||e===ut||e===dt||e===pt||e===ft||e===ht||e===mt||e===_t||e===gt||e===vt||e===yt)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return e;if(e===k||e===I){if(n.isWebGL2){if(e===k)return 32775;if(e===I)return 32776}if(null!==(r=t.get("EXT_blend_minmax"))){if(e===k)return r.MIN_EXT;if(e===I)return r.MAX_EXT}}if(e===Ue){if(n.isWebGL2)return 34042;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function pa(){Gn.call(this),this.type="Group"}function fa(){Gn.call(this),this.type="Camera",this.matrixWorldInverse=new An,this.projectionMatrix=new An,this.projectionMatrixInverse=new An}function ha(e,t,n,r){fa.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function ma(e){ha.call(this),this.cameras=e||[]}oa.prototype=Object.create(fr.prototype),oa.prototype.constructor=oa,oa.prototype.isMeshDepthMaterial=!0,oa.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},sa.prototype=Object.create(fr.prototype),sa.prototype.constructor=sa,sa.prototype.isMeshDistanceMaterial=!0,sa.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},pa.prototype=Object.assign(Object.create(Gn.prototype),{constructor:pa,isGroup:!0}),fa.prototype=Object.assign(Object.create(Gn.prototype),{constructor:fa,isCamera:!0,copy:function(e,t){return Gn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Kt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Gn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ha.prototype=Object.assign(Object.create(fa.prototype),{constructor:ha,isPerspectiveCamera:!0,copy:function(e,t){return fa.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Wt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Wt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Wt.RAD2DEG*Math.atan(Math.tan(.5*Wt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Wt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Gn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),ma.prototype=Object.assign(Object.create(ha.prototype),{constructor:ma,isArrayCamera:!0});var _a,ga,va,ya,Aa,xa,Sa=new Kt,ba=new Kt;function wa(e,t,n){Sa.setFromMatrixPosition(t.matrixWorld),ba.setFromMatrixPosition(n.matrixWorld);var r=Sa.distanceTo(ba),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],p=o*u,f=o*d,h=r/(-u+d),m=h*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var _=o+h,g=s+h,v=p-m,y=f+(r-m),A=l*s/g*_,x=c*s/g*_;e.projectionMatrix.makePerspective(v,y,A,x,_,g)}function Ea(e){var t=this,n=null,r=null,i=null,a=[],o=new An,s=new An,l=1,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",y,!1));var u=new An,d=new qt,p=new Kt,f=new ha;f.bounds=new dn(0,0,.5,1),f.layers.enable(1);var h=new ha;h.bounds=new dn(.5,0,.5,1),h.layers.enable(2);var m=new ma([f,h]);function _(){return null!==n&&!0===n.isPresenting}m.layers.enable(1),m.layers.enable(2);var g,v=new Ht;function y(){if(_()){var r=n.getEyeParameters("left"),i=r.renderWidth*l,a=r.renderHeight*l;g=e.getPixelRatio(),e.getSize(v),e.setDrawingBufferSize(2*i,a,1),S.start()}else t.enabled&&e.setDrawingBufferSize(v.width,v.height,g),S.stop()}var A=[];function x(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var a=t[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(r===e)return a;r++}}}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new pa).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),S.setContext(e)},this.setFramebufferScaleFactor=function(e){l=e},this.setFrameOfReferenceType=function(e){c=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===c?1.6:0;if(!1===_())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r),"stage"===c){var l=n.stageParameters;l?o.fromArray(l.sittingToStandingTransform):o.makeTranslation(0,t,0)}var g=r.pose,v=null!==i?i:e;v.matrix.copy(o),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==g.orientation&&(d.fromArray(g.orientation),v.quaternion.multiply(d)),null!==g.position&&(d.setFromRotationMatrix(o),p.fromArray(g.position),p.applyQuaternion(d),v.position.add(p)),v.updateMatrixWorld(),f.near=e.near,h.near=e.near,f.far=e.far,h.far=e.far,f.matrixWorldInverse.fromArray(r.leftViewMatrix),h.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(o),"stage"===c&&(f.matrixWorldInverse.multiply(s),h.matrixWorldInverse.multiply(s));var y=v.parent;null!==y&&(u.getInverse(y.matrixWorld),f.matrixWorldInverse.multiply(u),h.matrixWorldInverse.multiply(u)),f.matrixWorld.getInverse(f.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),f.projectionMatrix.fromArray(r.leftProjectionMatrix),h.projectionMatrix.fromArray(r.rightProjectionMatrix),wa(m,f,h);var S=n.getLayers();if(S.length){var b=S[0];null!==b.leftBounds&&4===b.leftBounds.length&&f.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&h.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<a.length;e++){var t=a[e],n=x(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;A[e]!==n.buttons[i].pressed&&(A[e]=n.buttons[i].pressed,!0===A[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return o},this.isPresenting=_;var S=new Rn;this.setAnimationLoop=function(e){S.setAnimationLoop(e),_()&&S.start()},this.submitFrame=function(){_()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",y)}}function Pa(e){var t=e.context,n=null,r=null,i=1,a=null,o="stage",s=null,l=[],c=[];function u(){return null!==r&&null!==a}var d=new ha;d.layers.enable(1),d.viewport=new dn;var p=new ha;p.layers.enable(2),p.viewport=new dn;var f=new ma([d,p]);function h(e){var t=l[c.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),v.stop()}function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new pa).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){i=e},this.setFrameOfReferenceType=function(e){o=e},this.setSession=function(n){null!==(r=n)&&(r.addEventListener("select",h),r.addEventListener("selectstart",h),r.addEventListener("selectend",h),r.addEventListener("end",m),r.baseLayer=new XRWebGLLayer(r,t,{framebufferScaleFactor:i}),r.requestFrameOfReference(o).then(function(t){a=t,e.setFramebuffer(r.baseLayer.framebuffer),v.setContext(r),v.start()}),c=r.getInputSources(),r.addEventListener("inputsourceschange",function(){c=r.getInputSources(),console.log(c);for(var e=0;e<l.length;e++){l[e].userData.inputSource=c[e]}}))},this.getCamera=function(e){if(u()){var t=e.parent,n=f.cameras;_(f,t);for(var r=0;r<n.length;r++)_(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,a=(r=0,i.length);r<a;r++)i[r].updateMatrixWorld(!0);return wa(f,d,p),f}return e},this.isPresenting=u;var g=null;var v=new Rn;v.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(a)))for(var n=r.baseLayer,i=t.views,o=0;o<i.length;o++){var u=i[o],d=n.getViewport(u),p=s.getViewMatrix(u),h=f.cameras[o];h.matrix.fromArray(p).getInverse(h.matrix),h.projectionMatrix.fromArray(u.projectionMatrix),h.viewport.set(d.x,d.y,d.width,d.height),0===o&&f.matrix.copy(h.matrix)}for(o=0;o<l.length;o++){var m=l[o],_=c[o];if(_){var v=t.getInputPose(_,a);if(null!==v){"targetRay"in v?m.matrix.elements=v.targetRay.transformMatrix:"pointerMatrix"in v&&(m.matrix.elements=v.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(e)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new An},this.submitFrame=function(){}}function Ca(e){console.log("THREE.WebGLRenderer",c);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",d=null,p=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=le,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var f,h,m,_,g,v,y,A,S,b,w,E,P,C,T,V,F,D,O=this,R=!1,M=null,L=null,B=null,k=-1,I={geometry:null,program:null,wireframe:!1},j=null,N=null,U=new dn,z=new dn,G=null,W=t.width,H=t.height,q=1,K=new dn(0,0,W,H),Y=new dn(0,0,W,H),$=!1,X=new yn,Z=new Br,J=!1,Q=!1,ee=new An,te=new Kt;function ne(){return null===L?q:1}try{var re={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u};if(t.addEventListener("webglcontextlost",se,!1),t.addEventListener("webglcontextrestored",ce,!1),null===(f=n||t.getContext("webgl",re)||t.getContext("experimental-webgl",re)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===f.getShaderPrecisionFormat&&(f.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ie(){h=new kr(f),(m=new Lr(f,h,e)).isWebGL2||(h.get("WEBGL_depth_texture"),h.get("OES_texture_float"),h.get("OES_texture_half_float"),h.get("OES_texture_half_float_linear"),h.get("OES_standard_derivatives"),h.get("OES_element_index_uint"),h.get("ANGLE_instanced_arrays")),h.get("OES_texture_float_linear"),D=new da(f,h,m),(_=new ca(f,h,D,m)).scissor(z.copy(Y).multiplyScalar(q)),_.viewport(U.copy(K).multiplyScalar(q)),g=new Nr(f),v=new Xi,y=new ua(f,h,_,v,m,D,g),A=new Mn(f),S=new Ir(f,A,g),b=new Gr(S,g),T=new zr(f),w=new $i(O,h,m,y),E=new ea,P=new aa,C=new Rr(O,_,b,s),V=new Mr(f,h,g,m),F=new jr(f,h,g,m),g.programs=w.programs,O.context=f,O.capabilities=m,O.extensions=h,O.properties=v,O.renderLists=E,O.state=_,O.info=g}ie();var ae=null;"undefined"!=typeof navigator&&(ae="xr"in navigator?new Pa(O):new Ea(O)),this.vr=ae;var oe=new la(O,b,m.maxTextureSize);function se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,ie()}function ue(e){var t=e.target;t.removeEventListener("dispose",ue),function(e){de(e),v.remove(e)}(t)}function de(e){var t=v.get(e).program;e.program=void 0,void 0!==t&&w.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return f},this.getContextAttributes=function(){return f.getContextAttributes()},this.forceContextLoss=function(){var e=h.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=h.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(e){void 0!==e&&(q=e,this.setSize(W,H,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Ht),e.set(W,H)},this.setSize=function(e,n,r){ae.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,H=n,t.width=e*q,t.height=n*q,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Ht),e.set(W*q,H*q)},this.setDrawingBufferSize=function(e,n,r){W=e,H=n,q=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new dn),e.copy(U)},this.getViewport=function(e){return e.copy(K)},this.setViewport=function(e,t,n,r){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,r),_.viewport(U.copy(K).multiplyScalar(q))},this.getScissor=function(e){return e.copy(Y)},this.setScissor=function(e,t,n,r){e.isVector4?Y.set(e.x,e.y,e.z,e.w):Y.set(e,t,n,r),_.scissor(z.copy(Y).multiplyScalar(q))},this.getScissorTest=function(){return $},this.setScissorTest=function(e){_.setScissorTest($=e)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),f.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",se,!1),t.removeEventListener("webglcontextrestored",ce,!1),E.dispose(),P.dispose(),v.dispose(),b.dispose(),ae.dispose(),fe.stop()},this.renderBufferImmediate=function(e,t){_.initAttributes();var n=v.get(e);e.hasPositions&&!n.position&&(n.position=f.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=f.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=f.createBuffer()),e.hasColors&&!n.color&&(n.color=f.createBuffer());var r=t.getAttributes();e.hasPositions&&(f.bindBuffer(34962,n.position),f.bufferData(34962,e.positionArray,35048),_.enableAttribute(r.position),f.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(f.bindBuffer(34962,n.normal),f.bufferData(34962,e.normalArray,35048),_.enableAttribute(r.normal),f.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(f.bindBuffer(34962,n.uv),f.bufferData(34962,e.uvArray,35048),_.enableAttribute(r.uv),f.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(f.bindBuffer(34962,n.color),f.bufferData(34962,e.colorArray,35048),_.enableAttribute(r.color),f.vertexAttribPointer(r.color,3,5126,!1,0,0)),_.disableUnusedAttributes(),f.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;_.setMaterial(r,o);var s=ge(e,t,r,i),l=!1;I.geometry===n.id&&I.program===s.id&&I.wireframe===(!0===r.wireframe)||(I.geometry=n.id,I.program=s.id,I.wireframe=!0===r.wireframe,l=!0),i.morphTargetInfluences&&(T.update(i,n,r,s),l=!0);var c,u=n.index,d=n.attributes.position,p=1;!0===r.wireframe&&(u=S.getWireframeAttribute(n),p=2);var g=V;null!==u&&(c=A.get(u),(g=F).setIndex(c)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===h.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_.initAttributes();var r=n.attributes,i=t.getAttributes(),a=e.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var l=r[o];if(void 0!==l){var c=l.normalized,u=l.itemSize,d=A.get(l);if(void 0===d)continue;var p=d.buffer,g=d.type,v=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var y=l.data,x=y.stride,S=l.offset;y&&y.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(s,y.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):_.enableAttribute(s),f.bindBuffer(34962,p),f.vertexAttribPointer(s,u,g,c,x*v,S*v)}else l.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):_.enableAttribute(s),f.bindBuffer(34962,p),f.vertexAttribPointer(s,u,g,c,0,0)}else if(void 0!==a){var b=a[o];if(void 0!==b)switch(b.length){case 2:f.vertexAttrib2fv(s,b);break;case 3:f.vertexAttrib3fv(s,b);break;case 4:f.vertexAttrib4fv(s,b);break;default:f.vertexAttrib1fv(s,b)}}}}_.disableUnusedAttributes()}(r,s,n),null!==u&&f.bindBuffer(34963,c.buffer));var v=1/0;null!==u?v=u.count:void 0!==d&&(v=d.count);var y=n.drawRange.start*p,x=n.drawRange.count*p,b=null!==a?a.start*p:0,w=null!==a?a.count*p:1/0,E=Math.max(y,b),P=Math.min(v,y+x,b+w)-1,C=Math.max(0,P-E+1);if(0!==C){if(i.isMesh)if(!0===r.wireframe)_.setLineWidth(r.wireframeLinewidth*ne()),g.setMode(1);else switch(i.drawMode){case Vt:g.setMode(4);break;case Ft:g.setMode(5);break;case Dt:g.setMode(6)}else if(i.isLine){var D=r.linewidth;void 0===D&&(D=1),_.setLineWidth(D*ne()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,E,C):g.render(E,C)}},this.compile=function(e,t){(p=P.get(e,t)).init(),e.traverse(function(e){e.isLight&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))}),p.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)_e(t.material[n],e.fog,t);else _e(t.material,e.fog,t)})};var pe=null;var fe=new Rn;function he(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,l=o.geometry,c=void 0===r?o.material:r,u=o.group;if(n.isArrayCamera){N=n;for(var d=n.cameras,f=0,h=d.length;f<h;f++){var m=d[f];if(s.layers.test(m.layers)){if("viewport"in m)_.viewport(U.copy(m.viewport));else{var g=m.bounds,v=g.x*W,y=g.y*H,A=g.z*W,x=g.w*H;_.viewport(U.set(v,y,A,x).multiplyScalar(q))}p.setupLights(m),me(s,t,m,l,c,u)}}}else N=null,me(s,t,n,l,c,u)}}function me(e,t,n,r,i,a){if(e.onBeforeRender(O,t,n,r,i,a),p=P.get(t,N||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){_.setMaterial(i);var o=ge(n,t.fog,i,e);I.geometry=null,I.program=null,I.wireframe=!1,function(e,t){e.render(function(e){O.renderBufferImmediate(e,t)})}(e,o)}else O.renderBufferDirect(n,t.fog,r,i,e,a);e.onAfterRender(O,t,n,r,i,a),p=P.get(t,N||n)}function _e(e,t,n){var r=v.get(e),i=p.state.lights,a=p.state.shadowsArray,o=r.lightsHash,s=i.state.hash,l=w.getParameters(e,i.state,a,t,Z.numPlanes,Z.numIntersection,n),c=w.getProgramCode(e,l),u=r.program,d=!0;if(void 0===u)e.addEventListener("dispose",ue);else if(u.code!==c)de(e);else if(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength)o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,d=!1;else{if(void 0!==l.shaderID)return;d=!1}if(d){if(l.shaderID){var f=On[l.shaderID];r.shader={name:e.type,uniforms:Sn(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,O),c=w.getProgramCode(e,l),u=w.acquireProgram(e,r.shader,l,c),r.program=u,e.program=u}var h=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<O.maxMorphTargets;m++)h["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<O.maxMorphNormals;m++)h["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var _=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Z.numPlanes,r.numIntersection=Z.numIntersection,_.clippingPlanes=Z.uniform),r.fog=t,void 0===o&&(r.lightsHash=o={}),o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,e.lights&&(_.ambientLightColor.value=i.state.ambient,_.directionalLights.value=i.state.directional,_.spotLights.value=i.state.spot,_.rectAreaLights.value=i.state.rectArea,_.pointLights.value=i.state.point,_.hemisphereLights.value=i.state.hemi,_.directionalShadowMap.value=i.state.directionalShadowMap,_.directionalShadowMatrix.value=i.state.directionalShadowMatrix,_.spotShadowMap.value=i.state.spotShadowMap,_.spotShadowMatrix.value=i.state.spotShadowMatrix,_.pointShadowMap.value=i.state.pointShadowMap,_.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=ki.seqWithValue(g.seq,_);r.uniformsList=y}function ge(e,t,n,r){y.resetTextureUnits();var i=v.get(n),a=p.state.lights,o=i.lightsHash,s=a.state.hash;if(J&&(Q||e!==j)){var l=e===j&&n.id===k;Z.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,l)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||o.stateID===s.stateID&&o.directionalLength===s.directionalLength&&o.pointLength===s.pointLength&&o.spotLength===s.spotLength&&o.rectAreaLength===s.rectAreaLength&&o.hemiLength===s.hemiLength&&o.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===Z.numPlanes&&i.numIntersection===Z.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(_e(n,t,r),n.needsUpdate=!1);var c,u,d=!1,h=!1,g=!1,A=i.program,S=A.getUniforms(),b=i.shader.uniforms;if(_.useProgram(A.program)&&(d=!0,h=!0,g=!0),n.id!==k&&(k=n.id,h=!0),d||j!==e){if(S.setValue(f,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&S.setValue(f,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),j!==e&&(j=e,h=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var w=S.map.cameraPosition;void 0!==w&&w.setValue(f,te.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&S.setValue(f,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){S.setOptional(f,r,"bindMatrix"),S.setOptional(f,r,"bindMatrixInverse");var E=r.skeleton;if(E){var P=E.bones;if(m.floatVertexTextures){if(void 0===E.boneTexture){var C=Math.sqrt(4*P.length);C=Wt.ceilPowerOfTwo(C),C=Math.max(C,4);var T=new Float32Array(C*C*4);T.set(E.boneMatrices);var V=new mn(T,C,C,We,Be);V.needsUpdate=!0,E.boneMatrices=T,E.boneTexture=V,E.boneTextureSize=C}S.setValue(f,"boneTexture",E.boneTexture,y),S.setValue(f,"boneTextureSize",E.boneTextureSize)}else S.setOptional(f,E,"boneMatrices")}}return h&&(S.setValue(f,"toneMappingExposure",O.toneMappingExposure),S.setValue(f,"toneMappingWhitePoint",O.toneMappingWhitePoint),n.lights&&(u=g,(c=b).ambientLightColor.needsUpdate=u,c.directionalLights.needsUpdate=u,c.pointLights.needsUpdate=u,c.spotLights.needsUpdate=u,c.rectAreaLights.needsUpdate=u,c.hemisphereLights.needsUpdate=u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(b,t),n.isMeshBasicMaterial?ve(b,n):n.isMeshLambertMaterial?(ve(b,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(b,n)):n.isMeshPhongMaterial?(ve(b,n),n.isMeshToonMaterial?function(e,t){ye(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(b,n):ye(b,n)):n.isMeshStandardMaterial?(ve(b,n),n.isMeshPhysicalMaterial?function(e,t){Ae(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(b,n):Ae(b,n)):n.isMeshMatcapMaterial?(ve(b,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===x&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===x&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isMeshDepthMaterial?(ve(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isMeshDistanceMaterial?(ve(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(b,n)):n.isMeshNormalMaterial?(ve(b,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===x&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===x&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(b,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(b,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*q,e.scale.value=.5*H,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isShadowMaterial&&(b.color.value=n.color,b.opacity.value=n.opacity),void 0!==b.ltc_1&&(b.ltc_1.value=Dn.LTC_1),void 0!==b.ltc_2&&(b.ltc_2.value=Dn.LTC_2),ki.upload(f,i.uniformsList,b,y)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ki.upload(f,i.uniformsList,b,y),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&S.setValue(f,"center",r.center),S.setValue(f,"modelViewMatrix",r.modelViewMatrix),S.setValue(f,"normalMatrix",r.normalMatrix),S.setValue(f,"modelMatrix",r.matrixWorld),A}function ve(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=v.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function ye(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===x&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===x&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ae(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===x&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===x&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}fe.setAnimationLoop(function(e){ae.isPresenting()||pe&&pe(e)}),"undefined"!=typeof window&&fe.setContext(window),this.setAnimationLoop=function(e){pe=e,ae.setAnimationLoop(e),fe.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!R){I.geometry=null,I.program=null,I.wireframe=!1,k=-1,j=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ae.enabled&&(t=ae.getCamera(t)),(p=P.get(e,t)).init(),e.onBeforeRender(O,e,t,n||L),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),X.setFromMatrix(ee),Q=this.localClippingEnabled,J=Z.init(this.clippingPlanes,Q,t),(d=E.get(e,t)).init(),function e(t,n,r,i){if(!1===t.visible)return;var a=t.layers.test(n.layers);if(a)if(t.isGroup)r=t.renderOrder;else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||X.intersectsSprite(t)){i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee);var o=b.update(t),s=t.material;s.visible&&d.push(t,o,s,r,te.z,null)}}else if(t.isImmediateRenderObject)i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee),d.push(t,null,t.material,r,te.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||X.intersectsObject(t))){i&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee);var o=b.update(t),s=t.material;if(Array.isArray(s))for(var l=o.groups,c=0,u=l.length;c<u;c++){var f=l[c],h=s[f.materialIndex];h&&h.visible&&d.push(t,o,h,r,te.z,f)}else s.visible&&d.push(t,o,s,r,te.z,null)}var m=t.children;for(var c=0,u=m.length;c<u;c++)e(m[c],n,r,i)}(e,t,0,O.sortObjects),!0===O.sortObjects&&d.sort(),J&&Z.beginShadows();var i=p.state.shadowsArray;oe.render(i,e,t),p.setupLights(t),J&&Z.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(d,e,t,r);var a=d.opaque,o=d.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&he(a,e,t,s),o.length&&he(o,e,t,s)}else a.length&&he(a,e,t),o.length&&he(o,e,t);e.onAfterRender(O,e,t),null!==L&&(y.updateRenderTargetMipmap(L),y.updateMultisampleRenderTarget(L)),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),ae.enabled&&ae.submitFrame(),d=null,p=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){M=e},this.getRenderTarget=function(){return L},this.setRenderTarget=function(e,t,n){L=e,e&&void 0===v.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var r=M,i=!1;if(e){var a=v.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=a[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?v.get(e).__webglMultisampledFramebuffer:a,U.copy(e.viewport),z.copy(e.scissor),G=e.scissorTest}else U.copy(K).multiplyScalar(q),z.copy(Y).multiplyScalar(q),G=$;if(B!==r&&(f.bindFramebuffer(36160,r),B=r),_.viewport(U),_.scissor(z),_.setScissorTest(G),i){var o=v.get(e.texture);f.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,a){if(e&&e.isWebGLRenderTarget){var o=v.get(e).__webglFramebuffer;if(o){var s=!1;o!==B&&(f.bindFramebuffer(36160,o),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==We&&D.convert(c)!==f.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Fe||D.convert(u)===f.getParameter(35738)||u===Be&&(m.isWebGL2||h.get("OES_texture_float")||h.get("WEBGL_color_buffer_float"))||u===ke&&(m.isWebGL2?h.get("EXT_color_buffer_float"):h.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===f.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&f.readPixels(t,n,r,i,D.convert(c),D.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&f.bindFramebuffer(36160,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,a=D.convert(t.format);y.setTexture2D(t,0),f.copyTexImage2D(3553,n||0,a,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,a=t.image.height,o=D.convert(n.format),s=D.convert(n.type);y.setTexture2D(n,0),t.isDataTexture?f.texSubImage2D(3553,r||0,e.x,e.y,i,a,o,s,t.image.data):f.texSubImage2D(3553,r||0,e.x,e.y,o,s,t.image)}}function Ta(e,t){this.name="",this.color=new Vn(e),this.density=void 0!==t?t:25e-5}function Va(e,t,n){this.name="",this.color=new Vn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Fa(){Gn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Da(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Oa(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ra(e){fr.call(this),this.type="SpriteMaterial",this.color=new Vn(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Ma(e){if(Gn.call(this),this.type="Sprite",void 0===_a){_a=new sr;var t=new Da(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);_a.setIndex([0,1,2,0,2,3]),_a.addAttribute("position",new Oa(t,3,0,!1)),_a.addAttribute("uv",new Oa(t,2,3,!1))}this.geometry=_a,this.material=void 0!==e?e:new Ra,this.center=new Ht(.5,.5)}function La(){Gn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ba(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Or.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new An,this.bindMatrixInverse=new An}function ka(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new An)}}function Ia(){Gn.call(this),this.type="Bone"}function ja(e){fr.call(this),this.type="LineBasicMaterial",this.color=new Vn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Na(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Gn.call(this),this.type="Line",this.geometry=void 0!==e?e:new sr,this.material=void 0!==t?t:new ja({color:16777215*Math.random()})}function Ua(e,t){Na.call(this,e,t),this.type="LineSegments"}function za(e,t){Na.call(this,e,t),this.type="LineLoop"}function Ga(e){fr.call(this),this.type="PointsMaterial",this.color=new Vn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Wa(e,t){Gn.call(this),this.type="Points",this.geometry=void 0!==e?e:new sr,this.material=void 0!==t?t:new Ga({color:16777215*Math.random()})}function Ha(e,t,n,r,i,a,o,s,l){un.call(this,e,t,n,r,i,a,o,s,l),this.format=void 0!==o?o:Ge,this.minFilter=void 0!==a?a:Ce,this.magFilter=void 0!==i?i:Ce,this.generateMipmaps=!1}function qa(e,t,n,r,i,a,o,s,l,c,u,d){un.call(this,null,a,o,s,l,c,r,i,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ka(e,t,n,r,i,a,o,s,l){un.call(this,e,t,n,r,i,a,o,s,l),this.needsUpdate=!0}function Ya(e,t,n,r,i,a,o,s,l,c){if((c=void 0!==c?c:Ye)!==Ye&&c!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ye&&(n=Re),void 0===n&&c===$e&&(n=Ue),un.call(this,null,r,i,a,o,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:we,this.minFilter=void 0!==s?s:we,this.flipY=!1,this.generateMipmaps=!1}function $a(e){sr.call(this),this.type="WireframeGeometry";var t,n,r,i,a,o,s,l,c,u,d=[],p=[0,0],f={},h=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var _=m[t];for(n=0;n<3;n++)s=_[h[n]],l=_[h[(n+1)%3]],p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===f[c=p[0]+","+p[1]]&&(f[c]={index1:p[0],index2:p[1]})}for(c in f)o=f[c],u=e.vertices[o.index1],d.push(u.x,u.y,u.z),u=e.vertices[o.index2],d.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var g,v,y,A,x,S,b;if(u=new Kt,null!==e.index){for(g=e.attributes.position,v=e.index,0===(y=e.groups).length&&(y=[{start:0,count:v.count,materialIndex:0}]),i=0,a=y.length;i<a;++i)for(t=x=(A=y[i]).start,r=x+A.count;t<r;t+=3)for(n=0;n<3;n++)s=v.getX(t+n),l=v.getX(t+(n+1)%3),p[0]=Math.min(s,l),p[1]=Math.max(s,l),void 0===f[c=p[0]+","+p[1]]&&(f[c]={index1:p[0],index2:p[1]});for(c in f)o=f[c],u.fromBufferAttribute(g,o.index1),d.push(u.x,u.y,u.z),u.fromBufferAttribute(g,o.index2),d.push(u.x,u.y,u.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)S=3*t+n,u.fromBufferAttribute(g,S),d.push(u.x,u.y,u.z),b=3*t+(n+1)%3,u.fromBufferAttribute(g,b),d.push(u.x,u.y,u.z)}this.addAttribute("position",new nr(d,3))}function Xa(e,t,n){Kn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Za(e,t,n)),this.mergeVertices()}function Za(e,t,n){sr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,a=[],o=[],s=[],l=[],c=new Kt,u=new Kt,d=new Kt,p=new Kt,f=new Kt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var h=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var _=i/t;e(_,m,u),o.push(u.x,u.y,u.z),_-1e-5>=0?(e(_-1e-5,m,d),p.subVectors(u,d)):(e(_+1e-5,m,d),p.subVectors(d,u)),m-1e-5>=0?(e(_,m-1e-5,d),f.subVectors(u,d)):(e(_,m+1e-5,d),f.subVectors(d,u)),c.crossVectors(p,f).normalize(),s.push(c.x,c.y,c.z),l.push(_,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*h+i,v=r*h+i+1,y=(r+1)*h+i+1,A=(r+1)*h+i;a.push(g,v,A),a.push(v,y,A)}this.setIndex(a),this.addAttribute("position",new nr(o,3)),this.addAttribute("normal",new nr(s,3)),this.addAttribute("uv",new nr(l,2))}function Ja(e,t,n,r){Kn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Qa(e,t,n,r)),this.mergeVertices()}function Qa(e,t,n,r){sr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],a=[];function o(e,t,n,r){var i,a,o=Math.pow(2,r),l=[];for(i=0;i<=o;i++){l[i]=[];var c=e.clone().lerp(n,i/o),u=t.clone().lerp(n,i/o),d=o-i;for(a=0;a<=d;a++)l[i][a]=0===a&&i===o?c:c.clone().lerp(u,a/d)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var p=Math.floor(a/2);a%2==0?(s(l[i][p+1]),s(l[i+1][p]),s(l[i][p])):(s(l[i][p+1]),s(l[i+1][p+1]),s(l[i+1][p]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Kt,r=new Kt,i=new Kt,a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r=r||0),function(e){for(var t=new Kt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Kt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=u(e)/2/Math.PI+.5,r=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-r)}var o;(function(){for(var e=new Kt,t=new Kt,n=new Kt,r=new Kt,o=new Ht,s=new Ht,l=new Ht,d=0,p=0;d<i.length;d+=9,p+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[p+0],a[p+1]),s.set(a[p+2],a[p+3]),l.set(a[p+4],a[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=u(r);c(o,p+0,e,f),c(s,p+2,t,f),c(l,p+4,n,f)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new nr(i,3)),this.addAttribute("normal",new nr(i.slice(),3)),this.addAttribute("uv",new nr(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function eo(e,t){Kn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new to(e,t)),this.mergeVertices()}function to(e,t){Qa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function no(e,t){Kn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ro(e,t)),this.mergeVertices()}function ro(e,t){Qa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function io(e,t){Kn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ao(e,t)),this.mergeVertices()}function ao(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Qa.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function oo(e,t){Kn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new so(e,t)),this.mergeVertices()}function so(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Qa.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function lo(e,t,n,r,i,a){Kn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new co(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function co(e,t,n,r,i){sr.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,l=new Kt,c=new Kt,u=new Ht,d=new Kt,p=[],f=[],h=[],m=[];function _(i){d=e.getPointAt(i/t,d);var o=a.normals[i],u=a.binormals[i];for(s=0;s<=r;s++){var h=s/r*Math.PI*2,m=Math.sin(h),_=-Math.cos(h);c.x=_*o.x+m*u.x,c.y=_*o.y+m*u.y,c.z=_*o.z+m*u.z,c.normalize(),f.push(c.x,c.y,c.z),l.x=d.x+n*c.x,l.y=d.y+n*c.y,l.z=d.z+n*c.z,p.push(l.x,l.y,l.z)}}!function(){for(o=0;o<t;o++)_(o);_(!1===i?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=r;s++)u.x=o/t,u.y=s/r,h.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=r;o++){var e=(r+1)*(s-1)+(o-1),n=(r+1)*s+(o-1),i=(r+1)*s+o,a=(r+1)*(s-1)+o;m.push(e,n,a),m.push(n,i,a)}}()}(),this.setIndex(m),this.addAttribute("position",new nr(p,3)),this.addAttribute("normal",new nr(f,3)),this.addAttribute("uv",new nr(h,2))}function uo(e,t,n,r,i,a,o){Kn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new po(e,t,n,r,i,a)),this.mergeVertices()}function po(e,t,n,r,i,a){sr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o,s,l=[],c=[],u=[],d=[],p=new Kt,f=new Kt,h=new Kt,m=new Kt,_=new Kt,g=new Kt,v=new Kt;for(o=0;o<=n;++o){var y=o/n*i*Math.PI*2;for(C(y,i,a,e,h),C(y+.01,i,a,e,m),g.subVectors(m,h),v.addVectors(m,h),_.crossVectors(g,v),v.crossVectors(_,g),_.normalize(),v.normalize(),s=0;s<=r;++s){var A=s/r*Math.PI*2,x=-t*Math.cos(A),S=t*Math.sin(A);p.x=h.x+(x*v.x+S*_.x),p.y=h.y+(x*v.y+S*_.y),p.z=h.z+(x*v.z+S*_.z),c.push(p.x,p.y,p.z),f.subVectors(p,h).normalize(),u.push(f.x,f.y,f.z),d.push(o/n),d.push(s/r)}}for(s=1;s<=n;s++)for(o=1;o<=r;o++){var b=(r+1)*(s-1)+(o-1),w=(r+1)*s+(o-1),E=(r+1)*s+o,P=(r+1)*(s-1)+o;l.push(b,w,P),l.push(w,E,P)}function C(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new nr(c,3)),this.addAttribute("normal",new nr(u,3)),this.addAttribute("uv",new nr(d,2))}function fo(e,t,n,r,i){Kn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ho(e,t,n,r,i)),this.mergeVertices()}function ho(e,t,n,r,i){sr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,o,s=[],l=[],c=[],u=[],d=new Kt,p=new Kt,f=new Kt;for(a=0;a<=n;a++)for(o=0;o<=r;o++){var h=o/r*i,m=a/n*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(h),p.y=(e+t*Math.cos(m))*Math.sin(h),p.z=t*Math.sin(m),l.push(p.x,p.y,p.z),d.x=e*Math.cos(h),d.y=e*Math.sin(h),f.subVectors(p,d).normalize(),c.push(f.x,f.y,f.z),u.push(o/r),u.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=r;o++){var _=(r+1)*a+o-1,g=(r+1)*(a-1)+o-1,v=(r+1)*(a-1)+o,y=(r+1)*a+o;s.push(_,g,y),s.push(g,v,y)}this.setIndex(s),this.addAttribute("position",new nr(l,3)),this.addAttribute("normal",new nr(c,3)),this.addAttribute("uv",new nr(u,2))}Object.assign(Ta.prototype,{isFogExp2:!0,clone:function(){return new Ta(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Va.prototype,{isFog:!0,clone:function(){return new Va(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Fa.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Fa,isScene:!0,copy:function(e,t){return Gn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Gn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Da.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Da.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Oa.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Oa.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Ra.prototype=Object.create(fr.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isSpriteMaterial=!0,Ra.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},Ma.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Ma,isSprite:!0,raycast:function(){var e=new Kt,t=new Kt,n=new Kt,r=new Ht,i=new Ht,a=new An,o=new Kt,s=new Kt,l=new Kt,c=new Ht,u=new Ht,d=new Ht;function p(e,t,n,o,s,l){r.subVectors(e,n).addScalar(.5).multiply(o),void 0!==s?(i.x=l*r.x-s*r.y,i.y=s*r.x+l*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(a)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var f,h,m=this.material.rotation;0!==m&&(h=Math.cos(m),f=Math.sin(m));var _=this.center;p(o.set(-.5,-.5,0),n,_,t,f,h),p(s.set(.5,-.5,0),n,_,t,f,h),p(l.set(.5,.5,0),n,_,t,f,h),c.set(0,0),u.set(1,0),d.set(1,1);var g=r.ray.intersectTriangle(o,s,l,!1,e);if(null!==g||(p(s.set(-.5,.5,0),n,_,t,f,h),u.set(0,1),null!==(g=r.ray.intersectTriangle(o,l,s,!1,e)))){var v=r.ray.origin.distanceTo(e);v<r.near||v>r.far||i.push({distance:v,point:e.clone(),uv:Fr.getUV(e,o,s,l,c,u,d,new Ht),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Gn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),La.prototype=Object.assign(Object.create(Gn.prototype),{constructor:La,copy:function(e){Gn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(ga=new Kt,function(e,t){ga.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(ga);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new Kt,t=new Kt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var a=1,o=r.length;a<o&&i>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<o;a++)r[a].object.visible=!1}}}(),toJSON:function(e){var t=Gn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Ba.prototype=Object.assign(Object.create(Or.prototype),{constructor:Ba,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new dn,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Or.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(ka.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new An;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(va=new An,ya=new An,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:ya;va.multiplyMatrices(o,t[i]),va.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new ka(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Ia.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Ia,isBone:!0}),ja.prototype=Object.create(fr.prototype),ja.prototype.constructor=ja,ja.prototype.isLineBasicMaterial=!0,ja.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Na.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Na,isLine:!0,computeLineDistances:(Aa=new Kt,xa=new Kt,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)Aa.fromBufferAttribute(t,r-1),xa.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Aa.distanceTo(xa);e.addAttribute("lineDistance",new nr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=a.length;r<i;r++)n[r]=n[r-1],n[r]+=a[r-1].distanceTo(a[r])}return this}),raycast:function(){var e=new An,t=new Vr,n=new gn;return function(r,i){var a=r.linePrecision,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=a,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new Kt,d=new Kt,p=new Kt,f=new Kt,h=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,_=o.attributes.position.array;if(null!==m)for(var g=m.array,v=0,y=g.length-1;v<y;v+=h){var A=g[v],x=g[v+1];if(u.fromArray(_,3*A),d.fromArray(_,3*x),!(t.distanceSqToSegment(u,d,f,p)>c))f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,y=_.length/3-1;v<y;v+=h){if(u.fromArray(_,3*v),d.fromArray(_,3*v+3),!(t.distanceSqToSegment(u,d,f,p)>c))f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var S=o.vertices,b=S.length;for(v=0;v<b-1;v+=h){var w;if(!(t.distanceSqToSegment(S[v],S[v+1],f,p)>c))f.applyMatrix4(this.matrixWorld),(w=r.ray.origin.distanceTo(f))<r.near||w>r.far||i.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ua.prototype=Object.assign(Object.create(Na.prototype),{constructor:Ua,isLineSegments:!0,computeLineDistances:function(){var e=new Kt,t=new Kt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],a=0,o=r.count;a<o;a+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(r,a+1),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t);n.addAttribute("lineDistance",new nr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t)}return this}}()}),za.prototype=Object.assign(Object.create(Na.prototype),{constructor:za,isLineLoop:!0}),Ga.prototype=Object.create(fr.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isPointsMaterial=!0,Ga.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Wa.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Wa,isPoints:!0,raycast:function(){var e=new An,t=new Vr,n=new gn;return function(r,i){var a=this,o=this.geometry,s=this.matrixWorld,l=r.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,d=new Kt,p=new Kt;if(o.isBufferGeometry){var f=o.index,h=o.attributes.position.array;if(null!==f)for(var m=f.array,_=0,g=m.length;_<g;_++){var v=m[_];d.fromArray(h,3*v),x(d,v)}else{_=0;for(var y=h.length/3;_<y;_++)d.fromArray(h,3*_),x(d,_)}}else{var A=o.vertices;for(_=0,y=A.length;_<y;_++)x(A[_],_)}}function x(e,n){var o=t.distanceSqToPoint(e);if(o<u){t.closestPointToPoint(e,p),p.applyMatrix4(s);var l=r.ray.origin.distanceTo(p);if(l<r.near||l>r.far)return;i.push({distance:l,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ha.prototype=Object.assign(Object.create(un.prototype),{constructor:Ha,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),qa.prototype=Object.create(un.prototype),qa.prototype.constructor=qa,qa.prototype.isCompressedTexture=!0,Ka.prototype=Object.create(un.prototype),Ka.prototype.constructor=Ka,Ka.prototype.isCanvasTexture=!0,Ya.prototype=Object.create(un.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isDepthTexture=!0,$a.prototype=Object.create(sr.prototype),$a.prototype.constructor=$a,Xa.prototype=Object.create(Kn.prototype),Xa.prototype.constructor=Xa,Za.prototype=Object.create(sr.prototype),Za.prototype.constructor=Za,Ja.prototype=Object.create(Kn.prototype),Ja.prototype.constructor=Ja,Qa.prototype=Object.create(sr.prototype),Qa.prototype.constructor=Qa,eo.prototype=Object.create(Kn.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(Qa.prototype),to.prototype.constructor=to,no.prototype=Object.create(Kn.prototype),no.prototype.constructor=no,ro.prototype=Object.create(Qa.prototype),ro.prototype.constructor=ro,io.prototype=Object.create(Kn.prototype),io.prototype.constructor=io,ao.prototype=Object.create(Qa.prototype),ao.prototype.constructor=ao,oo.prototype=Object.create(Kn.prototype),oo.prototype.constructor=oo,so.prototype=Object.create(Qa.prototype),so.prototype.constructor=so,lo.prototype=Object.create(Kn.prototype),lo.prototype.constructor=lo,co.prototype=Object.create(sr.prototype),co.prototype.constructor=co,co.prototype.toJSON=function(){var e=sr.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},uo.prototype=Object.create(Kn.prototype),uo.prototype.constructor=uo,po.prototype=Object.create(sr.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Kn.prototype),fo.prototype.constructor=fo,ho.prototype=Object.create(sr.prototype),ho.prototype.constructor=ho;var mo=function(e,t,n){n=n||2;var r,i,a,o,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,p=_o(e,0,d,n,!0),f=[];if(!p)return f;if(u&&(p=function(e,t,n,r){var i,a,o,s,l,c=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,(l=_o(e,o,s,r,!1))===l.next&&(l.steiner=!0),c.push(Po(l));for(c.sort(bo),i=0;i<c.length;i++)wo(c[i],n),n=go(n,n.next);return n}(e,t,p,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var h=n;h<d;h+=n)(s=e[h])<r&&(r=s),(l=e[h+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-r,o-i))?1/c:0}return vo(p,f,n,r,i,c),f};function _o(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Mo(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Mo(a,e[a],e[a+1],o);return o&&Fo(o,o.next)&&(Lo(o),o=o.next),o}function go(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Fo(r,r.next)&&0!==Vo(r.prev,r,r.next))r=r.next;else{if(Lo(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function vo(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Eo(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Ao(e,r,i,a):yo(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Lo(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?vo(e=xo(e,t,n),t,n,r,i,a,2):2===o&&So(e,t,n,r,i,a):vo(go(e),t,n,r,i,a,1);break}}}function yo(e){var t=e.prev,n=e,r=e.next;if(Vo(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Co(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Vo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ao(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Vo(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=Eo(s,l,t,n,r),p=Eo(c,u,t,n,r),f=e.nextZ;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&Co(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Vo(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&Co(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Vo(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function xo(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Fo(i,a)&&Do(i,r,r.next,a)&&Oo(i,a)&&Oo(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Lo(r),Lo(r.next),r=e=a),r=r.next}while(r!==e);return r}function So(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&To(o,s)){var l=Ro(o,s);return o=go(o,o.next),l=go(l,l.next),vo(o,t,n,r,i,a),void vo(l,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function bo(e,t){return e.x-t.x}function wo(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var l,c=n,u=n.x,d=n.y,p=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=u&&i!==r.x&&Co(a<d?i:o,a,u,d,a<d?o:i,a,r.x,r.y)&&((l=Math.abs(a-r.y)/(i-r.x))<p||l===p&&r.x>n.x)&&Oo(r,e)&&(n=r,p=l),r=r.next;return n}(e,t)){var n=Ro(t,e);go(n,n.next)}}function Eo(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Po(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Co(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function To(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Do(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Oo(e,t)&&Oo(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Vo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fo(e,t){return e.x===t.x&&e.y===t.y}function Do(e,t,n,r){return!!(Fo(e,t)&&Fo(n,r)||Fo(e,r)&&Fo(n,t))||Vo(e,t,n)>0!=Vo(e,t,r)>0&&Vo(n,r,e)>0!=Vo(n,r,t)>0}function Oo(e,t){return Vo(e.prev,e,e.next)<0?Vo(e,t,e.next)>=0&&Vo(e,e.prev,t)>=0:Vo(e,t,e.prev)<0||Vo(e,e.next,t)<0}function Ro(e,t){var n=new Bo(e.i,e.x,e.y),r=new Bo(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Mo(e,t,n,r){var i=new Bo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Lo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Bo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ko={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return ko.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Io(e),jo(n,e);var a=e.length;t.forEach(Io);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,jo(n,t[o]);var s=mo(n,r);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function Io(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function jo(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function No(e,t){Kn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Uo(e,t)),this.mergeVertices()}function Uo(e,t){sr.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],a=0,o=e.length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:u-2,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,h=void 0!==t.UVGenerator?t.UVGenerator:zo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,_,g,v,y,A,x,S,b=!1;f&&(m=f.getSpacedPoints(s),b=!0,c=!1,_=f.computeFrenetFrames(s,!1),g=new Kt,v=new Kt,y=new Kt),c||(p=0,u=0,d=0);var w=e.extractPoints(o),E=w.shape,P=w.holes;if(!ko.isClockWise(E))for(E=E.reverse(),x=0,S=P.length;x<S;x++)A=P[x],ko.isClockWise(A)&&(P[x]=A.reverse());var C=ko.triangulateShape(E,P),T=E;for(x=0,S=P.length;x<S;x++)A=P[x],E=E.concat(A);function V(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var F,D,O,R,M,L,B=E.length,k=C.length;function I(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,d=o*c-s*l;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(u),f=Math.sqrt(l*l+c*c),h=t.x-s/p,m=t.y+o/p,_=((n.x-c/f-h)*c-(n.y+l/f-m)*l)/(o*c-s*l),g=(r=h+o*_-e.x)*r+(i=m+s*_-e.y)*i;if(g<=2)return new Ht(r,i);a=Math.sqrt(g/2)}else{var v=!1;o>Number.EPSILON?l>Number.EPSILON&&(v=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(s)===Math.sign(c)&&(v=!0),v?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new Ht(r/a,i/a)}for(var j=[],N=0,U=T.length,z=U-1,G=N+1;N<U;N++,z++,G++)z===U&&(z=0),G===U&&(G=0),j[N]=I(T[N],T[z],T[G]);var W,H,q=[],K=j.concat();for(x=0,S=P.length;x<S;x++){for(A=P[x],W=[],N=0,z=(U=A.length)-1,G=N+1;N<U;N++,z++,G++)z===U&&(z=0),G===U&&(G=0),W[N]=I(A[N],A[z],A[G]);q.push(W),K=K.concat(W)}for(F=0;F<p;F++){for(O=F/p,R=u*Math.cos(O*Math.PI/2),D=d*Math.sin(O*Math.PI/2),N=0,U=T.length;N<U;N++)$((M=V(T[N],j[N],D)).x,M.y,-R);for(x=0,S=P.length;x<S;x++)for(A=P[x],W=q[x],N=0,U=A.length;N<U;N++)$((M=V(A[N],W[N],D)).x,M.y,-R)}for(D=d,N=0;N<B;N++)M=c?V(E[N],K[N],D):E[N],b?(v.copy(_.normals[0]).multiplyScalar(M.x),g.copy(_.binormals[0]).multiplyScalar(M.y),y.copy(m[0]).add(v).add(g),$(y.x,y.y,y.z)):$(M.x,M.y,0);for(H=1;H<=s;H++)for(N=0;N<B;N++)M=c?V(E[N],K[N],D):E[N],b?(v.copy(_.normals[H]).multiplyScalar(M.x),g.copy(_.binormals[H]).multiplyScalar(M.y),y.copy(m[H]).add(v).add(g),$(y.x,y.y,y.z)):$(M.x,M.y,l/s*H);for(F=p-1;F>=0;F--){for(O=F/p,R=u*Math.cos(O*Math.PI/2),D=d*Math.sin(O*Math.PI/2),N=0,U=T.length;N<U;N++)$((M=V(T[N],j[N],D)).x,M.y,l+R);for(x=0,S=P.length;x<S;x++)for(A=P[x],W=q[x],N=0,U=A.length;N<U;N++)M=V(A[N],W[N],D),b?$(M.x,M.y+m[s-1].y,m[s-1].x+R):$(M.x,M.y,l+R)}function Y(e,t){var n,r;for(N=e.length;--N>=0;){n=N,(r=N-1)<0&&(r=e.length-1);var i=0,a=s+2*p;for(i=0;i<a;i++){var o=B*i,l=B*(i+1);Z(t+n+o,t+r+o,t+r+l,t+n+l)}}}function $(e,t,n){a.push(e),a.push(t),a.push(n)}function X(e,t,i){J(e),J(t),J(i);var a=r.length/3,o=h.generateTopUV(n,r,a-3,a-2,a-1);Q(o[0]),Q(o[1]),Q(o[2])}function Z(e,t,i,a){J(e),J(t),J(a),J(t),J(i),J(a);var o=r.length/3,s=h.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);Q(s[0]),Q(s[1]),Q(s[3]),Q(s[1]),Q(s[2]),Q(s[3])}function J(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function Q(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(c){var t=0,i=B*t;for(N=0;N<k;N++)X((L=C[N])[2]+i,L[1]+i,L[0]+i);for(i=B*(t=s+2*p),N=0;N<k;N++)X((L=C[N])[0]+i,L[1]+i,L[2]+i)}else{for(N=0;N<k;N++)X((L=C[N])[2],L[1],L[0]);for(N=0;N<k;N++)X((L=C[N])[0]+B*s,L[1]+B*s,L[2]+B*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Y(T,t),t+=T.length,x=0,S=P.length;x<S;x++)Y(A=P[x],t),t+=A.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new nr(r,3)),this.addAttribute("uv",new nr(i,2)),this.computeVertexNormals()}No.prototype=Object.create(Kn.prototype),No.prototype.constructor=No,No.prototype.toJSON=function(){var e=Kn.prototype.toJSON.call(this);return Go(this.parameters.shapes,this.parameters.options,e)},Uo.prototype=Object.create(sr.prototype),Uo.prototype.constructor=Uo,Uo.prototype.toJSON=function(){var e=sr.prototype.toJSON.call(this);return Go(this.parameters.shapes,this.parameters.options,e)};var zo={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Ht(a,o),new Ht(s,l),new Ht(c,u)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],p=t[3*i],f=t[3*i+1],h=t[3*i+2],m=t[3*a],_=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new Ht(o,1-l),new Ht(c,1-d),new Ht(p,1-h),new Ht(m,1-g)]:[new Ht(s,1-l),new Ht(u,1-d),new Ht(f,1-h),new Ht(_,1-g)]}};function Go(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Wo(e,t){Kn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ho(e,t)),this.mergeVertices()}function Ho(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Kn;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Uo.call(this,r,t),this.type="TextBufferGeometry"}function qo(e,t,n,r,i,a,o){Kn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ko(e,t,n,r,i,a,o)),this.mergeVertices()}function Ko(e,t,n,r,i,a,o){sr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,l,c=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),u=0,d=[],p=new Kt,f=new Kt,h=[],m=[],_=[],g=[];for(l=0;l<=n;l++){var v=[],y=l/n,A=0==l?.5/t:l==n?-.5/t:0;for(s=0;s<=t;s++){var x=s/t;p.x=-e*Math.cos(r+x*i)*Math.sin(a+y*o),p.y=e*Math.cos(a+y*o),p.z=e*Math.sin(r+x*i)*Math.sin(a+y*o),m.push(p.x,p.y,p.z),f.copy(p).normalize(),_.push(f.x,f.y,f.z),g.push(x+A,1-y),v.push(u++)}d.push(v)}for(l=0;l<n;l++)for(s=0;s<t;s++){var S=d[l][s+1],b=d[l][s],w=d[l+1][s],E=d[l+1][s+1];(0!==l||a>0)&&h.push(S,b,E),(l!==n-1||c<Math.PI)&&h.push(b,w,E)}this.setIndex(h),this.addAttribute("position",new nr(m,3)),this.addAttribute("normal",new nr(_,3)),this.addAttribute("uv",new nr(g,2))}function Yo(e,t,n,r,i,a){Kn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new $o(e,t,n,r,i,a)),this.mergeVertices()}function $o(e,t,n,r,i,a){sr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,l,c=[],u=[],d=[],p=[],f=e,h=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Kt,_=new Ht;for(s=0;s<=r;s++){for(l=0;l<=n;l++)o=i+l/n*a,m.x=f*Math.cos(o),m.y=f*Math.sin(o),u.push(m.x,m.y,m.z),d.push(0,0,1),_.x=(m.x/t+1)/2,_.y=(m.y/t+1)/2,p.push(_.x,_.y);f+=h}for(s=0;s<r;s++){var g=s*(n+1);for(l=0;l<n;l++){var v=o=l+g,y=o+n+1,A=o+n+2,x=o+1;c.push(v,y,x),c.push(y,A,x)}}this.setIndex(c),this.addAttribute("position",new nr(u,3)),this.addAttribute("normal",new nr(d,3)),this.addAttribute("uv",new nr(p,2))}function Xo(e,t,n,r){Kn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Zo(e,t,n,r)),this.mergeVertices()}function Zo(e,t,n,r){sr.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Wt.clamp(r,0,2*Math.PI);var i,a,o,s=[],l=[],c=[],u=1/t,d=new Kt,p=new Ht;for(a=0;a<=t;a++){var f=n+a*u*r,h=Math.sin(f),m=Math.cos(f);for(o=0;o<=e.length-1;o++)d.x=e[o].x*h,d.y=e[o].y,d.z=e[o].x*m,l.push(d.x,d.y,d.z),p.x=a/t,p.y=o/(e.length-1),c.push(p.x,p.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var _=i=o+a*e.length,g=i+e.length,v=i+e.length+1,y=i+1;s.push(_,g,y),s.push(g,v,y)}if(this.setIndex(s),this.addAttribute("position",new nr(l,3)),this.addAttribute("uv",new nr(c,2)),this.computeVertexNormals(),r===2*Math.PI){var A=this.attributes.normal.array,x=new Kt,S=new Kt,b=new Kt;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)x.x=A[o+0],x.y=A[o+1],x.z=A[o+2],S.x=A[i+o+0],S.y=A[i+o+1],S.z=A[i+o+2],b.addVectors(x,S).normalize(),A[o+0]=A[i+o+0]=b.x,A[o+1]=A[i+o+1]=b.y,A[o+2]=A[i+o+2]=b.z}}function Jo(e,t){Kn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Qo(e,t)),this.mergeVertices()}function Qo(e,t){sr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(o,s,l),o+=s,s=0;function c(e){var o,l,c,u=r.length/3,d=e.extractPoints(t),p=d.shape,f=d.holes;for(!1===ko.isClockWise(p)&&(p=p.reverse()),o=0,l=f.length;o<l;o++)c=f[o],!0===ko.isClockWise(c)&&(f[o]=c.reverse());var h=ko.triangulateShape(p,f);for(o=0,l=f.length;o<l;o++)c=f[o],p=p.concat(c);for(o=0,l=p.length;o<l;o++){var m=p[o];r.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,l=h.length;o<l;o++){var _=h[o],g=_[0]+u,v=_[1]+u,y=_[2]+u;n.push(g,v,y),s+=3}}this.setIndex(n),this.addAttribute("position",new nr(r,3)),this.addAttribute("normal",new nr(i,3)),this.addAttribute("uv",new nr(a,2))}function es(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function ts(e,t){sr.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,a,o=[],s=Math.cos(Wt.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(a=new Kn).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,p=a.faces,f=0,h=p.length;f<h;f++)for(var m=p[f],_=0;_<3;_++)n=m[u[_]],r=m[u[(_+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===c[i=l[0]+","+l[1]]?c[i]={index1:l[0],index2:l[1],face1:f,face2:void 0}:c[i].face2=f;for(i in c){var g=c[i];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var v=d[g.index1];o.push(v.x,v.y,v.z),v=d[g.index2],o.push(v.x,v.y,v.z)}}this.addAttribute("position",new nr(o,3))}function ns(e,t,n,r,i,a,o,s){Kn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new rs(e,t,n,r,i,a,o,s)),this.mergeVertices()}function rs(e,t,n,r,i,a,o,s){sr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],d=[],p=[],f=0,h=[],m=n/2,_=0;function g(n){var i,a,h,g=new Ht,v=new Kt,y=0,A=!0===n?e:t,x=!0===n?1:-1;for(a=f,i=1;i<=r;i++)u.push(0,m*x,0),d.push(0,x,0),p.push(.5,.5),f++;for(h=f,i=0;i<=r;i++){var S=i/r*s+o,b=Math.cos(S),w=Math.sin(S);v.x=A*w,v.y=m*x,v.z=A*b,u.push(v.x,v.y,v.z),d.push(0,x,0),g.x=.5*b+.5,g.y=.5*w*x+.5,p.push(g.x,g.y),f++}for(i=0;i<r;i++){var E=a+i,P=h+i;!0===n?c.push(P,P+1,E):c.push(P+1,P,E),y+=3}l.addGroup(_,y,!0===n?1:2),_+=y}!function(){var a,g,v=new Kt,y=new Kt,A=0,x=(t-e)/n;for(g=0;g<=i;g++){var S=[],b=g/i,w=b*(t-e)+e;for(a=0;a<=r;a++){var E=a/r,P=E*s+o,C=Math.sin(P),T=Math.cos(P);y.x=w*C,y.y=-b*n+m,y.z=w*T,u.push(y.x,y.y,y.z),v.set(C,x,T).normalize(),d.push(v.x,v.y,v.z),p.push(E,1-b),S.push(f++)}h.push(S)}for(a=0;a<r;a++)for(g=0;g<i;g++){var V=h[g][a],F=h[g+1][a],D=h[g+1][a+1],O=h[g][a+1];c.push(V,F,O),c.push(F,D,O),A+=6}l.addGroup(_,A,0),_+=A}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.addAttribute("position",new nr(u,3)),this.addAttribute("normal",new nr(d,3)),this.addAttribute("uv",new nr(p,2))}function is(e,t,n,r,i,a,o){ns.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function as(e,t,n,r,i,a,o){rs.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function os(e,t,n,r){Kn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ss(e,t,n,r)),this.mergeVertices()}function ss(e,t,n,r){sr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,a,o=[],s=[],l=[],c=[],u=new Kt,d=new Ht;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var p=n+a/t*r;u.x=e*Math.cos(p),u.y=e*Math.sin(p),s.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(s[i]/e+1)/2,d.y=(s[i+1]/e+1)/2,c.push(d.x,d.y)}for(i=1;i<=t;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute("position",new nr(s,3)),this.addAttribute("normal",new nr(l,3)),this.addAttribute("uv",new nr(c,2))}Wo.prototype=Object.create(Kn.prototype),Wo.prototype.constructor=Wo,Ho.prototype=Object.create(Uo.prototype),Ho.prototype.constructor=Ho,qo.prototype=Object.create(Kn.prototype),qo.prototype.constructor=qo,Ko.prototype=Object.create(sr.prototype),Ko.prototype.constructor=Ko,Yo.prototype=Object.create(Kn.prototype),Yo.prototype.constructor=Yo,$o.prototype=Object.create(sr.prototype),$o.prototype.constructor=$o,Xo.prototype=Object.create(Kn.prototype),Xo.prototype.constructor=Xo,Zo.prototype=Object.create(sr.prototype),Zo.prototype.constructor=Zo,Jo.prototype=Object.create(Kn.prototype),Jo.prototype.constructor=Jo,Jo.prototype.toJSON=function(){var e=Kn.prototype.toJSON.call(this);return es(this.parameters.shapes,e)},Qo.prototype=Object.create(sr.prototype),Qo.prototype.constructor=Qo,Qo.prototype.toJSON=function(){var e=sr.prototype.toJSON.call(this);return es(this.parameters.shapes,e)},ts.prototype=Object.create(sr.prototype),ts.prototype.constructor=ts,ns.prototype=Object.create(Kn.prototype),ns.prototype.constructor=ns,rs.prototype=Object.create(sr.prototype),rs.prototype.constructor=rs,is.prototype=Object.create(ns.prototype),is.prototype.constructor=is,as.prototype=Object.create(rs.prototype),as.prototype.constructor=as,os.prototype=Object.create(Kn.prototype),os.prototype.constructor=os,ss.prototype=Object.create(sr.prototype),ss.prototype.constructor=ss;var ls=Object.freeze({WireframeGeometry:$a,ParametricGeometry:Xa,ParametricBufferGeometry:Za,TetrahedronGeometry:eo,TetrahedronBufferGeometry:to,OctahedronGeometry:no,OctahedronBufferGeometry:ro,IcosahedronGeometry:io,IcosahedronBufferGeometry:ao,DodecahedronGeometry:oo,DodecahedronBufferGeometry:so,PolyhedronGeometry:Ja,PolyhedronBufferGeometry:Qa,TubeGeometry:lo,TubeBufferGeometry:co,TorusKnotGeometry:uo,TorusKnotBufferGeometry:po,TorusGeometry:fo,TorusBufferGeometry:ho,TextGeometry:Wo,TextBufferGeometry:Ho,SphereGeometry:qo,SphereBufferGeometry:Ko,RingGeometry:Yo,RingBufferGeometry:$o,PlaneGeometry:ur,PlaneBufferGeometry:dr,LatheGeometry:Xo,LatheBufferGeometry:Zo,ShapeGeometry:Jo,ShapeBufferGeometry:Qo,ExtrudeGeometry:No,ExtrudeBufferGeometry:Uo,EdgesGeometry:ts,ConeGeometry:is,ConeBufferGeometry:as,CylinderGeometry:ns,CylinderBufferGeometry:rs,CircleGeometry:os,CircleBufferGeometry:ss,BoxGeometry:lr,BoxBufferGeometry:cr});function cs(e){fr.call(this),this.type="ShadowMaterial",this.color=new Vn(0),this.transparent=!0,this.setValues(e)}function us(e){Tr.call(this,e),this.type="RawShaderMaterial"}function ds(e){fr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Vn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zt,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ps(e){ds.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function fs(e){fr.call(this),this.type="MeshPhongMaterial",this.color=new Vn(16777215),this.specular=new Vn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zt,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ie,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hs(e){fs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ms(e){fr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zt,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _s(e){fr.call(this),this.type="MeshLambertMaterial",this.color=new Vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ie,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gs(e){fr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Vn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zt,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function vs(e){ja.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}cs.prototype=Object.create(fr.prototype),cs.prototype.constructor=cs,cs.prototype.isShadowMaterial=!0,cs.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this},us.prototype=Object.create(Tr.prototype),us.prototype.constructor=us,us.prototype.isRawShaderMaterial=!0,ds.prototype=Object.create(fr.prototype),ds.prototype.constructor=ds,ds.prototype.isMeshStandardMaterial=!0,ds.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ps.prototype=Object.create(ds.prototype),ps.prototype.constructor=ps,ps.prototype.isMeshPhysicalMaterial=!0,ps.prototype.copy=function(e){return ds.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},fs.prototype=Object.create(fr.prototype),fs.prototype.constructor=fs,fs.prototype.isMeshPhongMaterial=!0,fs.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hs.prototype=Object.create(fs.prototype),hs.prototype.constructor=hs,hs.prototype.isMeshToonMaterial=!0,hs.prototype.copy=function(e){return fs.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ms.prototype=Object.create(fr.prototype),ms.prototype.constructor=ms,ms.prototype.isMeshNormalMaterial=!0,ms.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_s.prototype=Object.create(fr.prototype),_s.prototype.constructor=_s,_s.prototype.isMeshLambertMaterial=!0,_s.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gs.prototype=Object.create(fr.prototype),gs.prototype.constructor=gs,gs.prototype.isMeshMatcapMaterial=!0,gs.prototype.copy=function(e){return fr.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vs.prototype=Object.create(ja.prototype),vs.prototype.constructor=vs,vs.prototype.isLineDashedMaterial=!0,vs.prototype.copy=function(e){return ja.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ys=Object.freeze({ShadowMaterial:cs,SpriteMaterial:Ra,RawShaderMaterial:us,ShaderMaterial:Tr,PointsMaterial:Ga,MeshPhysicalMaterial:ps,MeshStandardMaterial:ds,MeshPhongMaterial:fs,MeshToonMaterial:hs,MeshNormalMaterial:ms,MeshLambertMaterial:_s,MeshDepthMaterial:oa,MeshDistanceMaterial:sa,MeshBasicMaterial:Dr,MeshMatcapMaterial:gs,LineDashedMaterial:vs,LineBasicMaterial:ja,Material:fr}),As={arraySlice:function(e,t,n){return As.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,l=0;l!==t;++l)i[o++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}};function xs(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ss(e,t,n,r){xs.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function bs(e,t,n,r){xs.call(this,e,t,n,r)}function ws(e,t,n,r){xs.call(this,e,t,n,r)}function Es(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=As.convertArray(t,this.TimeBufferType),this.values=As.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Ps(e,t,n){Es.call(this,e,t,n)}function Cs(e,t,n,r){Es.call(this,e,t,n,r)}function Ts(e,t,n,r){Es.call(this,e,t,n,r)}function Vs(e,t,n,r){xs.call(this,e,t,n,r)}function Fs(e,t,n,r){Es.call(this,e,t,n,r)}function Ds(e,t,n,r){Es.call(this,e,t,n,r)}function Os(e,t,n,r){Es.call(this,e,t,n,r)}function Rs(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Wt.generateUUID(),this.duration<0&&this.resetDuration()}function Ms(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ts;case"vector":case"vector2":case"vector3":case"vector4":return Os;case"color":return Cs;case"quaternion":return Fs;case"bool":case"boolean":return Ps;case"string":return Ds}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];As.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(xs.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(xs.prototype,{beforeStart_:xs.prototype.copySampleValue_,afterEnd_:xs.prototype.copySampleValue_}),Ss.prototype=Object.assign(Object.create(xs.prototype),{constructor:Ss,DefaultSettings_:{endingStart:Pt,endingEnd:Pt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ct:i=e,o=2*t-n;break;case Tt:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ct:a=e,s=2*n-t;break;case Tt:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,p=this._weightNext,f=(n-t)/(r-t),h=f*f,m=h*f,_=-d*m+2*d*h-d*f,g=(1+d)*m+(-1.5-2*d)*h+(-.5+d)*f+1,v=(-1-p)*m+(1.5+p)*h+.5*f,y=p*m-p*h,A=0;A!==o;++A)i[A]=_*a[c+A]+g*a[l+A]+v*a[s+A]+y*a[u+A];return i}}),bs.prototype=Object.assign(Object.create(xs.prototype),{constructor:bs,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c,d=0;d!==o;++d)i[d]=a[l+d]*u+a[s+d]*c;return i}}),ws.prototype=Object.assign(Object.create(xs.prototype),{constructor:ws,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Es,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:As.convertArray(e.times,Array),values:As.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(Es.prototype,{constructor:Es,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:wt,InterpolantFactoryMethodDiscrete:function(e){return new ws(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new bs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ss(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case bt:t=this.InterpolantFactoryMethodDiscrete;break;case wt:t=this.InterpolantFactoryMethodLinear;break;case Et:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bt;case this.InterpolantFactoryMethodLinear:return wt;case this.InterpolantFactoryMethodSmooth:return Et}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=As.arraySlice(n,i,a),this.values=As.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&As.isTypedArray(r)){o=0;for(var l=r.length;o!==l;++o){var c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Et,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(r)s=!0;else for(var c=o*n,u=c-n,d=c+n,p=0;p!==n;++p){var f=t[c+p];if(f!==t[u+p]||f!==t[d+p]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var h=o*n,m=i*n;for(p=0;p!==n;++p)t[m+p]=t[h+p]}++i}}if(a>0){e[i]=e[a];for(h=a*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[h+p];++i}return i!==e.length&&(this.times=As.arraySlice(e,0,i),this.values=As.arraySlice(t,0,i*n)),this},clone:function(){var e=As.arraySlice(this.times,0),t=As.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Ps.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ps,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:bt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Cs,ValueTypeName:"color"}),Ts.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ts,ValueTypeName:"number"}),Vs.prototype=Object.assign(Object.create(xs.prototype),{constructor:Vs,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=(n-t)/(r-t),c=s+o;s!==c;s+=4)qt.slerpFlat(i,0,a,s-o,a,s,l);return i}}),Fs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Fs,ValueTypeName:"quaternion",DefaultInterpolation:wt,InterpolantFactoryMethodLinear:function(e){return new Vs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ds.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ds,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:bt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Os.prototype=Object.assign(Object.create(Es.prototype),{constructor:Os,ValueTypeName:"vector"}),Object.assign(Rs,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Ms(n[i]).scale(r));return new Rs(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,a=n.length;i!==a;++i)t.push(Es.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],l=[];s.push((o+i-1)%i,o,(o+1)%i),l.push(0,1,0);var c=As.getKeyframeOrder(s);s=As.sortedArray(s,1,c),l=As.sortedArray(l,1,c),r||0!==s[0]||(s.push(i),l.push(l[0])),a.push(new Ts(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new Rs(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(i);if(l&&l.length>1){var c=r[d=l[1]];c||(r[d]=c=[]),c.push(s)}}var u=[];for(var d in r)u.push(Rs.CreateFromMorphTargetSequence(d,r[d],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];As.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var p=0;p<c[d].morphTargets.length;p++)u[c[d].morphTargets[p]]=-1;for(var f in u){var h=[],m=[];for(p=0;p!==c[d].morphTargets.length;++p){var _=c[d];h.push(_.time),m.push(_.morphTarget===f?1:0)}r.push(new Ts(".morphTargetInfluence["+f+"]",h,m))}a=u.length*(o||1)}else{var g=".bones["+t[l].name+"]";n(Os,g+".position",c,"pos",r),n(Fs,g+".quaternion",c,"rot",r),n(Os,g+".scale",c,"scl",r)}}return 0===r.length?null:new Rs(i,a,r)}}),Object.assign(Rs.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Rs(this.name,this.duration,e)}});var Ls={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Bs(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var ks=new Bs,Is={};function js(e){this.manager=void 0!==e?e:ks}function Ns(e){this.manager=void 0!==e?e:ks}function Us(e){this.manager=void 0!==e?e:ks,this._parser=null}function zs(e){this.manager=void 0!==e?e:ks,this._parser=null}function Gs(e){this.manager=void 0!==e?e:ks}function Ws(e){this.manager=void 0!==e?e:ks}function Hs(e){this.manager=void 0!==e?e:ks}function qs(){this.type="Curve",this.arcLengthDivisions=200}function Ks(e,t,n,r,i,a,o,s){qs.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Ys(e,t,n,r,i,a){Ks.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function $s(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,c*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}Object.assign(js.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ls.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(void 0===Is[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],l=!!o[2],c=o[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var u,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),f=0;f<c.length;f++)p[f]=c.charCodeAt(f);u="blob"===d?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var h=new DOMParser;u=h.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:u=c}setTimeout(function(){t&&t(u),i.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{Is[e]=[],Is[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var _ in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Ls.add(e,n);var r=Is[e];if(delete Is[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=r.length;a<o;a++){(s=r[a]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(a=0,o=r.length;a<o;a++){var s;(s=r[a]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var n=Is[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Is[e];delete Is[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var n=Is[e];delete Is[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(_,this.requestHeader[_]);m.send(null)}return i.manager.itemStart(e),m}Is[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ns.prototype,{load:function(e,t,n,r){var i=this,a=new js(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=Rs.parse(e[n]);t.push(r)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(Us.prototype,{load:function(e,t,n,r){var i=this,a=[],o=new qa;o.image=a;var s=new js(this.manager);function l(l){s.load(e[l],function(e){var n=i._parser(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(o.minFilter=Ce),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,d=e.length;u<d;++u)l(u);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ce),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o},setPath:function(e){return this.path=e,this}}),Object.assign(zs.prototype,{load:function(e,t,n,r){var i=this,a=new mn,o=new js(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Se,a.wrapT=void 0!==n.wrapT?n.wrapT:Se,a.magFilter=void 0!==n.magFilter?n.magFilter:Ce,a.minFilter=void 0!==n.minFilter?n.minFilter:Ve,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Ce),a.needsUpdate=!0,t&&t(a,n))},n,r),a},setPath:function(e){return this.path=e,this}}),Object.assign(Gs.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ls.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),Ls.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ws.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Wr,a=new Gs(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var l=0;l<e.length;++l)s(l);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Hs.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new un,a=new Gs(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ge:We,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(qs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),a=0;for(r.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(i),r.push(a),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(a-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,a=new Kt,o=[],s=[],l=[],c=new Kt,u=new An;for(n=0;n<=e;n++)r=n/e,o[n]=this.getTangentAt(r),o[n].normalize();s[0]=new Kt,l[0]=new Kt;var d=Number.MAX_VALUE,p=Math.abs(o[0].x),f=Math.abs(o[0].y),h=Math.abs(o[0].z);for(p<=d&&(d=p,a.set(1,0,0)),f<=d&&(d=f,a.set(0,1,0)),h<=d&&a.set(0,0,1),c.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],c),l[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(o[n-1],o[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Wt.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(c,i))),l[n].crossVectors(o[n],s[n]);if(!0===t)for(i=Math.acos(Wt.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(o[n],i*n)),l[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ks.prototype=Object.create(qs.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isEllipseCurve=!0,Ks.prototype.getPoint=function(e,t){for(var n=t||new Ht,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=s-this.aX,p=l-this.aY;s=d*c-p*u+this.aX,l=d*u+p*c+this.aY}return n.set(s,l)},Ks.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ks.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ks.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ys.prototype=Object.create(Ks.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isArcCurve=!0;var Xs=new Kt,Zs=new $s,Js=new $s,Qs=new $s;function el(e,t,n,r){qs.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function tl(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function nl(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function rl(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function il(e,t,n,r){qs.call(this),this.type="CubicBezierCurve",this.v0=e||new Ht,this.v1=t||new Ht,this.v2=n||new Ht,this.v3=r||new Ht}function al(e,t,n,r){qs.call(this),this.type="CubicBezierCurve3",this.v0=e||new Kt,this.v1=t||new Kt,this.v2=n||new Kt,this.v3=r||new Kt}function ol(e,t){qs.call(this),this.type="LineCurve",this.v1=e||new Ht,this.v2=t||new Ht}function sl(e,t){qs.call(this),this.type="LineCurve3",this.v1=e||new Kt,this.v2=t||new Kt}function ll(e,t,n){qs.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ht,this.v1=t||new Ht,this.v2=n||new Ht}function cl(e,t,n){qs.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Kt,this.v1=t||new Kt,this.v2=n||new Kt}function ul(e){qs.call(this),this.type="SplineCurve",this.points=e||[]}el.prototype=Object.create(qs.prototype),el.prototype.constructor=el,el.prototype.isCatmullRomCurve3=!0,el.prototype.getPoint=function(e,t){var n,r,i,a,o=t||new Kt,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),d=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===d&&u===l-1&&(u=l-2,d=1),this.closed||u>0?n=s[(u-1)%l]:(Xs.subVectors(s[0],s[1]).add(s[0]),n=Xs),r=s[u%l],i=s[(u+1)%l],this.closed||u+2<l?a=s[(u+2)%l]:(Xs.subVectors(s[l-1],s[l-2]).add(s[l-1]),a=Xs),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(r),p),h=Math.pow(r.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(a),p);h<1e-4&&(h=1),f<1e-4&&(f=h),m<1e-4&&(m=h),Zs.initNonuniformCatmullRom(n.x,r.x,i.x,a.x,f,h,m),Js.initNonuniformCatmullRom(n.y,r.y,i.y,a.y,f,h,m),Qs.initNonuniformCatmullRom(n.z,r.z,i.z,a.z,f,h,m)}else"catmullrom"===this.curveType&&(Zs.initCatmullRom(n.x,r.x,i.x,a.x,this.tension),Js.initCatmullRom(n.y,r.y,i.y,a.y,this.tension),Qs.initCatmullRom(n.z,r.z,i.z,a.z,this.tension));return o.set(Zs.calc(d),Js.calc(d),Qs.calc(d)),o},el.prototype.copy=function(e){qs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},el.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},el.prototype.fromJSON=function(e){qs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Kt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},il.prototype=Object.create(qs.prototype),il.prototype.constructor=il,il.prototype.isCubicBezierCurve=!0,il.prototype.getPoint=function(e,t){var n=t||new Ht,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(rl(e,r.x,i.x,a.x,o.x),rl(e,r.y,i.y,a.y,o.y)),n},il.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},il.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},il.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},al.prototype=Object.create(qs.prototype),al.prototype.constructor=al,al.prototype.isCubicBezierCurve3=!0,al.prototype.getPoint=function(e,t){var n=t||new Kt,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(rl(e,r.x,i.x,a.x,o.x),rl(e,r.y,i.y,a.y,o.y),rl(e,r.z,i.z,a.z,o.z)),n},al.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},al.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},al.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ol.prototype=Object.create(qs.prototype),ol.prototype.constructor=ol,ol.prototype.isLineCurve=!0,ol.prototype.getPoint=function(e,t){var n=t||new Ht;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ol.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ol.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ol.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ol.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ol.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},sl.prototype=Object.create(qs.prototype),sl.prototype.constructor=sl,sl.prototype.isLineCurve3=!0,sl.prototype.getPoint=function(e,t){var n=t||new Kt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},sl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},sl.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},sl.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},sl.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ll.prototype=Object.create(qs.prototype),ll.prototype.constructor=ll,ll.prototype.isQuadraticBezierCurve=!0,ll.prototype.getPoint=function(e,t){var n=t||new Ht,r=this.v0,i=this.v1,a=this.v2;return n.set(nl(e,r.x,i.x,a.x),nl(e,r.y,i.y,a.y)),n},ll.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ll.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ll.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},cl.prototype=Object.create(qs.prototype),cl.prototype.constructor=cl,cl.prototype.isQuadraticBezierCurve3=!0,cl.prototype.getPoint=function(e,t){var n=t||new Kt,r=this.v0,i=this.v1,a=this.v2;return n.set(nl(e,r.x,i.x,a.x),nl(e,r.y,i.y,a.y),nl(e,r.z,i.z,a.z)),n},cl.prototype.copy=function(e){return qs.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},cl.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},cl.prototype.fromJSON=function(e){return qs.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ul.prototype=Object.create(qs.prototype),ul.prototype.constructor=ul,ul.prototype.isSplineCurve=!0,ul.prototype.getPoint=function(e,t){var n=t||new Ht,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(tl(o,s.x,l.x,c.x,u.x),tl(o,s.y,l.y,c.y,u.y)),n},ul.prototype.copy=function(e){qs.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},ul.prototype.toJSON=function(){var e=qs.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},ul.prototype.fromJSON=function(e){qs.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Ht).fromArray(r))}return this};var dl=Object.freeze({ArcCurve:Ys,CatmullRomCurve3:el,CubicBezierCurve:il,CubicBezierCurve3:al,EllipseCurve:Ks,LineCurve:ol,LineCurve3:sl,QuadraticBezierCurve:ll,QuadraticBezierCurve3:cl,SplineCurve:ul});function pl(){qs.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function fl(e){pl.call(this),this.type="Path",this.currentPoint=new Ht,e&&this.setFromPoints(e)}function hl(e){fl.call(this,e),this.uuid=Wt.generateUUID(),this.type="Shape",this.holes=[]}function ml(e,t){Gn.call(this),this.type="Light",this.color=new Vn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function _l(e,t,n){ml.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.groundColor=new Vn(t)}function gl(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Ht(512,512),this.map=null,this.matrix=new An}function vl(){gl.call(this,new ha(50,1,.5,500))}function yl(e,t,n,r,i,a){ml.call(this,e,t),this.type="SpotLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new vl}function Al(e,t,n,r){ml.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new gl(new ha(90,1,.5,500))}function xl(e,t,n,r,i,a){fa.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Sl(){gl.call(this,new xl(-5,5,5,-5,.5,500))}function bl(e,t){ml.call(this,e,t),this.type="DirectionalLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,this.shadow=new Sl}function wl(e,t){ml.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function El(e,t,n,r){ml.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Pl(e){this.manager=void 0!==e?e:ks,this.textures={}}pl.prototype=Object.assign(Object.create(qs.prototype),{constructor:pl,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ol(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){qs.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=qs.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){qs.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new dl[r.type]).fromJSON(r))}return this}}),fl.prototype=Object.assign(Object.create(pl.prototype),{constructor:fl,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ol(this.currentPoint.clone(),new Ht(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new ll(this.currentPoint.clone(),new Ht(e,t),new Ht(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var o=new il(this.currentPoint.clone(),new Ht(e,t),new Ht(n,r),new Ht(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=new ul([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,o,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,r,i,a,o,s)},absellipse:function(e,t,n,r,i,a,o,s){var l=new Ks(e,t,n,r,i,a,o,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return pl.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=pl.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return pl.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),hl.prototype=Object.assign(Object.create(fl.prototype),{constructor:hl,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){fl.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=fl.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){fl.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new fl).fromJSON(r))}return this}}),ml.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ml,isLight:!0,copy:function(e){return Gn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Gn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),_l.prototype=Object.assign(Object.create(ml.prototype),{constructor:_l,isHemisphereLight:!0,copy:function(e){return ml.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(gl.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),vl.prototype=Object.assign(Object.create(gl.prototype),{constructor:vl,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Wt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),yl.prototype=Object.assign(Object.create(ml.prototype),{constructor:yl,isSpotLight:!0,copy:function(e){return ml.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Al.prototype=Object.assign(Object.create(ml.prototype),{constructor:Al,isPointLight:!0,copy:function(e){return ml.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),xl.prototype=Object.assign(Object.create(fa.prototype),{constructor:xl,isOrthographicCamera:!0,copy:function(e,t){return fa.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a=(i+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(o-=d*(this.view.offsetY/c))-d*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Gn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Sl.prototype=Object.assign(Object.create(gl.prototype),{constructor:Sl}),bl.prototype=Object.assign(Object.create(ml.prototype),{constructor:bl,isDirectionalLight:!0,copy:function(e){return ml.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),wl.prototype=Object.assign(Object.create(ml.prototype),{constructor:wl,isAmbientLight:!0}),El.prototype=Object.assign(Object.create(ml.prototype),{constructor:El,isRectAreaLight:!0,copy:function(e){return ml.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ml.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Pl.prototype,{load:function(e,t,n,r){var i=this,a=new js(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new ys[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new Vn).setHex(a.value);break;case"v2":r.uniforms[i].value=(new Ht).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new Kt).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new dn).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new Yt).fromArray(a.value);case"m4":r.uniforms[i].value=(new An).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new Ht).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var Cl={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Tl(e){this.manager=void 0!==e?e:ks}Object.assign(Tl.prototype,{load:function(e,t,n,r){var i=this,a=new js(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new sr,n=e.data.index;if(void 0!==n){var r=new Vl[n.type](n.array);t.setIndex(new Yn(r,1))}var i=e.data.attributes;for(var a in i){var o=i[a],s=new Yn(r=new Vl[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),t.addAttribute(a,s)}var l=e.data.morphAttributes;if(l)for(var a in l){for(var c=l[a],u=[],d=0,p=c.length;d<p;d++){o=c[d],s=new Yn(r=new Vl[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),u.push(s)}t.morphAttributes[a]=u}var f=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==f){d=0;for(var h=f.length;d!==h;++d){var m=f[d];t.addGroup(m.start,m.count,m.materialIndex)}}var _=e.data.boundingSphere;if(void 0!==_){var g=new Kt;void 0!==_.center&&g.fromArray(_.center),t.boundingSphere=new gn(g,_.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Vl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Fl(e){this.manager=void 0!==e?e:ks,this.resourcePath=""}Object.assign(Fl.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,a=void 0===this.path?Cl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new js(i.manager);o.setPath(this.path),o.load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new hl).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Tl,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ls[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ls[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ls[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ls[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ls[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ls[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new ls[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ls[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ls[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ls[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new ls[s.type]((new dl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ls[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new ls[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,u=s.shapes.length;c<u;c++){var d=t[s.shapes[c]];l.push(d)}o=new ls[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,u=s.shapes.length;c<u;c++){d=t[s.shapes[c]];l.push(d)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new dl[p.type]).fromJSON(p)),o=new ls[s.type](l,s.options);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new Pl;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=i.parse(u)),l.push(n[u.uuid])}r[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Rs.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var a=new Gs(new Bs(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var l=e[o],c=l.url;if(Array.isArray(c)){r[l.uuid]=[];for(var u=0,d=c.length;u<d;u++){var p=c[u],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[l.uuid].push(i(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;r[l.uuid]=i(f)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new Wr(t[s.image]):new un(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,Bl)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],kl),o.wrapT=n(s.wrap[1],kl)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Il)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Il)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Fa,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new Vn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Va(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Ta(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new ha(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new xl(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new wl(e.color,e.intensity);break;case"DirectionalLight":r=new bl(e.color,e.intensity);break;case"PointLight":r=new Al(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new El(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new yl(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new _l(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=a(e.material);r=o.bones&&o.bones.length>0?new Ba(o,s):new Or(o,s),void 0!==e.drawMode&&r.setDrawMode(e.drawMode);break;case"LOD":r=new La;break;case"Line":r=new Na(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":r=new za(i(e.geometry),a(e.material));break;case"LineSegments":r=new Ua(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":r=new Wa(i(e.geometry),a(e.material));break;case"Sprite":r=new Ma(a(e.material));break;case"Group":r=new pa;break;default:r=new Gn}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)r.add(this.parseObject(l[c],t,n));if("LOD"===e.type)for(var u=e.levels,d=0;d<u.length;d++){var p=u[d],f=r.getObjectByProperty("uuid",p.object);void 0!==f&&r.addLevel(f,p.distance)}return r}});var Dl,Ol,Rl,Ml,Ll,Bl={UVMapping:fe,CubeReflectionMapping:he,CubeRefractionMapping:me,EquirectangularReflectionMapping:_e,EquirectangularRefractionMapping:ge,SphericalReflectionMapping:ve,CubeUVReflectionMapping:ye,CubeUVRefractionMapping:Ae},kl={RepeatWrapping:xe,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:be},Il={NearestFilter:we,NearestMipMapNearestFilter:Ee,NearestMipMapLinearFilter:Pe,LinearFilter:Ce,LinearMipMapNearestFilter:Te,LinearMipMapLinearFilter:Ve};function jl(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ks,this.options=void 0}function Nl(){this.type="ShapePath",this.color=new Vn,this.subPaths=[],this.currentPath=null}function Ul(e){this.type="Font",this.data=e}function zl(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,l,c,u,d,p,f,h=new Nl;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),_=0,g=m.length;_<g;){switch(m[_++]){case"m":o=m[_++]*t+n,s=m[_++]*t+r,h.moveTo(o,s);break;case"l":o=m[_++]*t+n,s=m[_++]*t+r,h.lineTo(o,s);break;case"q":l=m[_++]*t+n,c=m[_++]*t+r,u=m[_++]*t+n,d=m[_++]*t+r,h.quadraticCurveTo(u,d,l,c);break;case"b":l=m[_++]*t+n,c=m[_++]*t+r,u=m[_++]*t+n,d=m[_++]*t+r,p=m[_++]*t+n,f=m[_++]*t+r,h.bezierCurveTo(u,d,p,f,l,c)}}return{offsetX:a.ha*t,path:h}}}function Gl(e){this.manager=void 0!==e?e:ks}function Wl(){}jl.prototype={constructor:jl,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ls.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)}).then(function(n){Ls.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Nl.prototype,{moveTo:function(e,t){this.currentPath=new fl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new hl;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],l=-l,s=t[i],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=c*(e.x-o.x)-l*(e.y-o.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i=ko.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,l,c=[];if(1===a.length)return s=a[0],(l=new hl).curves=s.curves,c.push(l),c;var u=!i(a[0].getPoints());u=e?!u:u;var d,p,f=[],h=[],m=[],_=0;h[_]=void 0,m[_]=[];for(var g=0,v=a.length;g<v;g++)o=i(d=(s=a[g]).getPoints()),(o=e?!o:o)?(!u&&h[_]&&_++,h[_]={s:new hl,p:d},h[_].s.curves=s.curves,u&&_++,m[_]=[]):m[_].push({h:s,p:d[0]});if(!h[0])return n(a);if(h.length>1){for(var y=!1,A=[],x=0,S=h.length;x<S;x++)f[x]=[];for(x=0,S=h.length;x<S;x++)for(var b=m[x],w=0;w<b.length;w++){for(var E=b[w],P=!0,C=0;C<h.length;C++)r(E.p,h[C].p)&&(x!==C&&A.push({froms:x,tos:C,hole:w}),P?(P=!1,f[C].push(E)):y=!0);P&&f[x].push(E)}A.length>0&&(y||(m=f))}g=0;for(var T=h.length;g<T;g++){l=h[g].s,c.push(l);for(var V=0,F=(p=m[g]).length;V<F;V++)l.holes.push(p[V].h)}return c}}),Object.assign(Ul.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,l=0,c=0;c<r.length;c++){var u=r[c];if("\n"===u)s=0,l-=a;else{var d=zl(u,i,s,l,n);s+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(Gl.prototype,{load:function(e,t,n,r){var i=this,a=new js(this.manager);a.setPath(this.path),a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Ul(e)},setPath:function(e){return this.path=e,this}}),Wl.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],a=t[n+1];if(i.test(e))return a}return null}},Object.assign(Wl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(Dl={NoBlending:T,NormalBlending:V,AdditiveBlending:F,SubtractiveBlending:D,MultiplyBlending:O,CustomBlending:R},Ol=new Vn,Rl=new Hs,Ml=new Pl,function(e,t,n){var r={};function i(e,i,a,o,s){var l,c=t+e,u=Wl.Handlers.get(c);null!==u?l=u.load(c):(Rl.setCrossOrigin(n),l=Rl.load(c)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=xe),1!==i[1]&&(l.wrapT=xe)),void 0!==a&&l.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(l.wrapS=xe),"mirror"===o[0]&&(l.wrapS=be),"repeat"===o[1]&&(l.wrapT=xe),"mirror"===o[1]&&(l.wrapT=be)),void 0!==s&&(l.anisotropy=s);var d=Wt.generateUUID();return r[d]=l,d}var a={uuid:Wt.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=Dl[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=Ol.fromArray(s).getHex();break;case"colorSpecular":a.specular=Ol.fromArray(s).getHex();break;case"colorEmissive":a.emissive=Ol.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=x;break;case"doubleSided":a.side=S;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=C),"face"===s&&(a.vertexColors=P);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),Ml.setTextures(r),Ml.parse(a)})});var Hl,ql,Kl,Yl,$l,Xl,Zl,Jl,Ql,ec,tc={getContext:function(){return void 0===Ll&&(Ll=new(window.AudioContext||window.webkitAudioContext)),Ll},setContext:function(e){Ll=e}};function nc(e){this.manager=void 0!==e?e:ks}function rc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ha,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ha,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ic(e,t,n,r){Gn.call(this),this.type="CubeCamera";var i=new ha(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Kt(1,0,0)),this.add(i);var a=new ha(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new Kt(-1,0,0)),this.add(a);var o=new ha(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Kt(0,1,0)),this.add(o);var s=new ha(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new Kt(0,-1,0)),this.add(s);var l=new ha(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Kt(0,0,1)),this.add(l);var c=new ha(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Kt(0,0,-1)),this.add(c),r=r||{format:Ge,magFilter:Ce,minFilter:Ce},this.renderTarget=new hn(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,u=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,a),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=u,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)e.setRenderTarget(a,o),e.clear(t,n,r);e.setRenderTarget(i)}}function ac(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function oc(){Gn.call(this),this.type="AudioListener",this.context=tc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function sc(e){Gn.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function lc(e){sc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function cc(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function uc(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(nc.prototype,{load:function(e,t,n,r){var i=new js(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var n=e.slice(0);tc.getContext().decodeAudioData(n,function(e){t(e)})},n,r)},setPath:function(e){return this.path=e,this}}),Object.assign(rc.prototype,{update:(Ql=new An,ec=new An,function(e){if(Hl!==this||ql!==e.focus||Kl!==e.fov||Yl!==e.aspect*this.aspect||$l!==e.near||Xl!==e.far||Zl!==e.zoom||Jl!==this.eyeSep){Hl=this,ql=e.focus,Kl=e.fov,Yl=e.aspect*this.aspect,$l=e.near,Xl=e.far,Zl=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=(Jl=this.eyeSep/2)*$l/ql,a=$l*Math.tan(Wt.DEG2RAD*Kl*.5)/Zl;ec.elements[12]=-Jl,Ql.elements[12]=Jl,t=-a*Yl+i,n=a*Yl+i,r.elements[0]=2*$l/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),t=-a*Yl-i,n=a*Yl-i,r.elements[0]=2*$l/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ec),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ql)})}),ic.prototype=Object.create(Gn.prototype),ic.prototype.constructor=ic,Object.assign(ac.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),oc.prototype=Object.assign(Object.create(Gn.prototype),{constructor:oc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Kt,t=new qt,n=new Kt,r=new Kt,i=new ac;return function(a){Gn.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX){var l=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(e.x,l),o.positionY.linearRampToValueAtTime(e.y,l),o.positionZ.linearRampToValueAtTime(e.z,l),o.forwardX.linearRampToValueAtTime(r.x,l),o.forwardY.linearRampToValueAtTime(r.y,l),o.forwardZ.linearRampToValueAtTime(r.z,l),o.upX.linearRampToValueAtTime(s.x,l),o.upY.linearRampToValueAtTime(s.y,l),o.upZ.linearRampToValueAtTime(s.z,l)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),sc.prototype=Object.assign(Object.create(Gn.prototype),{constructor:sc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),lc.prototype=Object.assign(Object.create(sc.prototype),{constructor:lc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new Kt,t=new qt,n=new Kt,r=new Kt;return function(i){if(Gn.prototype.updateMatrixWorld.call(this,i),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t);var a=this.panner;if(a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(e.x,o),a.positionY.linearRampToValueAtTime(e.y,o),a.positionZ.linearRampToValueAtTime(e.z,o),a.orientationX.linearRampToValueAtTime(r.x,o),a.orientationY.linearRampToValueAtTime(r.y,o),a.orientationZ.linearRampToValueAtTime(r.z,o)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z)}}}()}),Object.assign(cc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(uc.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(n,r,o,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){qt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}});var dc,pc,fc,hc,mc,_c,gc,vc,yc,Ac,xc,Sc,bc,wc,Ec;function Pc(e,t,n){var r=n||Cc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Cc(e,t,n){this.path=t,this.parsedPath=n||Cc.parseTrackName(t),this.node=Cc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Tc(){this.uuid=Wt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Vc(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),o={endingStart:Pt,endingEnd:Pt},s=0;s!==i;++s){var l=r[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Fc(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Dc(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Oc(){sr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Rc(e,t,n){Da.call(this,e,t),this.meshPerAttribute=n||1}function Mc(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Yn.call(this,e,t,n),this.meshPerAttribute=r||1}function Lc(e,t,n,r){this.ray=new Vr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Bc(e,t){return e.distance-t.distance}function kc(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,a=0,o=i.length;a<o;a++)kc(i[a],t,n,!0)}function Ic(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function jc(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Nc(e,t){this.min=void 0!==e?e:new Ht(1/0,1/0),this.max=void 0!==t?t:new Ht(-1/0,-1/0)}function Uc(e,t){this.start=void 0!==e?e:new Kt,this.end=void 0!==t?t:new Kt}function zc(e){Gn.call(this),this.material=e,this.render=function(){}}function Gc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new sr,c=new nr(2*o*3,3);l.addAttribute("position",c),Ua.call(this,l,new ja({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Wc(e,t){Gn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new sr,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new nr(r,3));var l=new ja({fog:!1});this.cone=new Ua(n,l),this.add(this.cone),this.update()}function Hc(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new sr,r=[],i=[],a=new Vn(0,0,1),o=new Vn(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute("position",new nr(r,3)),n.addAttribute("color",new nr(i,3));var c=new ja({vertexColors:C,depthTest:!1,depthWrite:!1,transparent:!0});Ua.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function qc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Ko(t,4,2),i=new Dr({wireframe:!0,fog:!1});Or.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Kc(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new sr;n.addAttribute("position",new nr([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new ja({fog:!1});Na.call(this,n,r);var i=new sr;i.addAttribute("position",new nr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Or(i,new Dr({side:x,fog:!1}))),this.update()}function Yc(e,t,n){Gn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new ro(t);r.rotateY(.5*Math.PI),this.material=new Dr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=C);var i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new Yn(a,3)),this.add(new Or(r,this.material)),this.update()}function $c(e,t,n,r){e=e||10,t=t||10,n=new Vn(void 0!==n?n:4473924),r=new Vn(void 0!==r?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],l=[],c=0,u=0,d=-o;c<=t;c++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);var p=c===i?n:r;p.toArray(l,u),u+=3,p.toArray(l,u),u+=3,p.toArray(l,u),u+=3,p.toArray(l,u),u+=3}var f=new sr;f.addAttribute("position",new nr(s,3)),f.addAttribute("color",new nr(l,3));var h=new ja({vertexColors:C});Ua.call(this,f,h)}function Xc(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new Vn(void 0!==i?i:4473924),a=new Vn(void 0!==a?a:8947848);var o,s,l,c,u,d,p,f=[],h=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),o=Math.sin(l)*e,s=Math.cos(l)*e,f.push(0,0,0),f.push(o,0,s),p=1&c?i:a,h.push(p.r,p.g,p.b),h.push(p.r,p.g,p.b);for(c=0;c<=n;c++)for(p=1&c?i:a,d=e-e/n*c,u=0;u<r;u++)l=u/r*(2*Math.PI),o=Math.sin(l)*d,s=Math.cos(l)*d,f.push(o,0,s),h.push(p.r,p.g,p.b),l=(u+1)/r*(2*Math.PI),o=Math.sin(l)*d,s=Math.cos(l)*d,f.push(o,0,s),h.push(p.r,p.g,p.b);var m=new sr;m.addAttribute("position",new nr(f,3)),m.addAttribute("color",new nr(h,3));var _=new ja({vertexColors:C});Ua.call(this,m,_)}function Zc(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new sr,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));i.addAttribute("position",new Yn(o,3));var s=new ja({color:65280}),l=new ja({color:16776960});Na.call(this,i,[l,s]),this.update()}function Jc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new sr,c=new nr(2*o*3,3);l.addAttribute("position",c),Ua.call(this,l,new ja({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Qc(e,t,n){Gn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new sr;r.addAttribute("position",new nr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ja({fog:!1});this.lightPlane=new Na(r,i),this.add(this.lightPlane),(r=new sr).addAttribute("position",new nr([0,0,0,0,0,1],3)),this.targetLine=new Na(r,i),this.add(this.targetLine),this.update()}function eu(e){var t=new sr,n=new ja({color:16777215,vertexColors:P}),r=[],i=[],a={},o=new Vn(16755200),s=new Vn(16711680),l=new Vn(43775),c=new Vn(16777215),u=new Vn(3355443);function d(e,t,n){p(e,n),p(t,n)}function p(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}d("n1","n2",o),d("n2","n4",o),d("n4","n3",o),d("n3","n1",o),d("f1","f2",o),d("f2","f4",o),d("f4","f3",o),d("f3","f1",o),d("n1","f1",o),d("n2","f2",o),d("n3","f3",o),d("n4","f4",o),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u),t.addAttribute("position",new nr(r,3)),t.addAttribute("color",new nr(i,3)),Ua.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function tu(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new sr;i.setIndex(new Yn(n,1)),i.addAttribute("position",new Yn(r,3)),Ua.call(this,i,new ja({color:t})),this.matrixAutoUpdate=!1,this.update()}function nu(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new sr;i.setIndex(new Yn(r,1)),i.addAttribute("position",new nr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ua.call(this,i,new ja({color:n})),this.geometry.computeBoundingSphere()}function ru(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new sr;i.addAttribute("position",new nr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Na.call(this,i,new ja({color:r}));var a=new sr;a.addAttribute("position",new nr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Or(a,new Dr({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function iu(e,t,n,r,i,a){Gn.call(this),void 0===e&&(e=new Kt(0,0,1)),void 0===t&&(t=new Kt(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===Sc&&((Sc=new sr).addAttribute("position",new nr([0,0,0,0,1,0],3)),(bc=new rs(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Na(Sc,new ja({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Or(bc,new Dr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}function au(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new sr;n.addAttribute("position",new nr(t,3)),n.addAttribute("color",new nr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new ja({vertexColors:C});Ua.call(this,n,r)}function ou(e,t,n,r,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Ln(e,t,n,i,a,o)}Object.assign(Pc.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Cc,{Composite:Pc,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Cc.Composite(e,t,n):new Cc(e,t,n)},sanitizeNodeName:(yc=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(yc,"")}),parseTrackName:(dc="[^\\[\\]\\.:\\/]",pc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",fc=/((?:WC+[\/:])*)/.source.replace("WC",dc),hc=/(WCOD+)?/.source.replace("WCOD",pc),mc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",dc),_c=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",dc),gc=new RegExp("^"+fc+hc+mc+_c+"$"),vc=["material","materials","bones"],function(e){var t=gc.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==vc.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var a=r(i.children);if(a)return a}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(Cc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Cc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Cc.prototype,{_getValue_unbound:Cc.prototype.getValue,_setValue_unbound:Cc.prototype.setValue}),Object.assign(Tc.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var d=arguments[c],p=d.uuid,f=r[p];if(void 0===f){f=t++,r[p]=f,e.push(d);for(var h=0,m=s;h!==m;++h)o[h].push(new Cc(d,i[h],a[h]))}else if(f<n){l=e[f];var _=--n,g=e[_];r[g.uuid]=f,e[f]=g,r[p]=_,e[_]=d;for(h=0,m=s;h!==m;++h){var v=o[h],y=v[_],A=v[f];v[f]=y,void 0===A&&(A=new Cc(d,i[h],a[h])),v[_]=A}}else e[f]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=n[l];if(void 0!==c&&c>=t){var u=t++,d=e[u];n[d.uuid]=c,e[c]=d,n[l]=u,e[u]=s;for(var p=0,f=i;p!==f;++p){var h=r[p],m=h[u],_=h[c];h[c]=m,h[u]=_}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=r[l];if(void 0!==c)if(delete r[l],c<n){var u=--n,d=e[u],p=e[g=--t];r[d.uuid]=c,e[c]=d,r[p.uuid]=u,e[u]=p,e.pop();for(var f=0,h=a;f!==h;++f){var m=(v=i[f])[u],_=v[g];v[c]=m,v[u]=_,v.pop()}}else{var g;r[(p=e[g=--t]).uuid]=c,e[c]=p,e.pop();for(f=0,h=a;f!==h;++f){var v;(v=i[f])[c]=v[g],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(var d=c,p=s.length;d!==p;++d){var f=s[d];u[d]=new Cc(f,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}),Object.assign(Vc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,a=r===St;if(0===e)return-1===i?t:a&&1==(1&i)?n-t:t;if(r===At){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Ct,r.endingEnd=Ct):(r.endingStart=e?this.zeroSlopeAtStart?Ct:Pt:Tt,r.endingEnd=t?this.zeroSlopeAtEnd?Ct:Pt:Tt)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}),Fc.prototype=Object.assign(Object.create(r.prototype),{constructor:Fc,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==i;++u){var d=r[u],p=d.name,f=c[p];if(void 0!==f)a[u]=f;else{if(void 0!==(f=a[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,p));continue}var h=t&&t._propertyBindings[u].binding.parsedPath;++(f=new uc(Cc.create(n,p,h),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,p),a[u]=f}o[u].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i];e:{for(var c in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new bs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Rs.findByName(n,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[r];if(void 0!==l)return l;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new Vc(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,a,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Rs.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}var s=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Dc.prototype.clone=function(){return new Dc(void 0===this.value.clone?this.value:this.value.clone())},Oc.prototype=Object.assign(Object.create(sr.prototype),{constructor:Oc,isInstancedBufferGeometry:!0,copy:function(e){return sr.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Rc.prototype=Object.assign(Object.create(Da.prototype),{constructor:Rc,isInstancedInterleavedBuffer:!0,copy:function(e){return Da.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Mc.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Mc,isInstancedBufferAttribute:!0,copy:function(e){return Yn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Lc.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return kc(e,this,r,t),r.sort(Bc),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)kc(e[i],this,r,t);return r.sort(Bc),r}}),Object.assign(Ic.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Wt.clamp(t/this.radius,-1,1))),this}}),Object.assign(jc.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Nc.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ht;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Ht),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Ht),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Ht),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Ht),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ht;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Uc.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Kt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Kt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Kt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ac=new Kt,xc=new Kt,function(e,t){Ac.subVectors(e,this.start),xc.subVectors(this.end,this.start);var n=xc.dot(xc),r=xc.dot(Ac)/n;return t&&(r=Wt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Kt),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),zc.prototype=Object.create(Gn.prototype),zc.prototype.constructor=zc,zc.prototype.isImmediateRenderObject=!0,Gc.prototype=Object.create(Ua.prototype),Gc.prototype.constructor=Gc,Gc.prototype.update=function(){var e=new Kt,t=new Kt,n=new Yt;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,c=0,u=0,d=l.length;u<d;u++)for(var p=l[u],f=0,h=p.vertexNormals.length;f<h;f++){var m=s[p[r[f]]],_=p.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(_).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1}else if(o&&o.isBufferGeometry){var g=o.attributes.position,v=o.attributes.normal;for(c=0,f=0,h=g.count;f<h;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(i),t.set(v.getX(f),v.getY(f),v.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1}a.needsUpdate=!0}}(),Wc.prototype=Object.create(Gn.prototype),Wc.prototype.constructor=Wc,Wc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Wc.prototype.update=function(){var e=new Kt;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Hc.prototype=Object.create(Ua.prototype),Hc.prototype.constructor=Hc,Hc.prototype.updateMatrixWorld=function(){var e=new Kt,t=new An,n=new An;return function(r){var i=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,Gn.prototype.updateMatrixWorld.call(this,r)}}(),qc.prototype=Object.create(Or.prototype),qc.prototype.constructor=qc,qc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Kc.prototype=Object.create(Na.prototype),Kc.prototype.constructor=Kc,Kc.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Kc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yc.prototype=Object.create(Gn.prototype),Yc.prototype.constructor=Yc,Yc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yc.prototype.update=function(){var e=new Kt,t=new Vn,n=new Vn;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:n;i.setXYZ(a,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),$c.prototype=Object.assign(Object.create(Ua.prototype),{constructor:$c,copy:function(e){return Ua.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Xc.prototype=Object.create(Ua.prototype),Xc.prototype.constructor=Xc,Zc.prototype=Object.create(Na.prototype),Zc.prototype.constructor=Zc,Zc.prototype.update=function(){var e,t,n=this.audio,r=this.range,i=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=Wt.degToRad(n.panner.coneInnerAngle),s=Wt.degToRad(n.panner.coneOuterAngle),l=o/2,c=s/2,u=0,d=0,p=this.geometry,f=p.attributes.position;function h(n,i,a,o){var s=(i-n)/a;for(f.setXYZ(u,0,0,0),d++,e=n;e<i;e+=s)t=u+d,f.setXYZ(t,Math.sin(e)*r,0,Math.cos(e)*r),f.setXYZ(t+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),f.setXYZ(t+2,0,0,0),d+=3;p.addGroup(u,d,o),u+=d,d=0}p.clearGroups(),h(-c,-l,a,0),h(-l,l,i,1),h(l,c,a,0),f.needsUpdate=!0,o===s&&(this.material[0].visible=!1)},Zc.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},Jc.prototype=Object.create(Ua.prototype),Jc.prototype.constructor=Jc,Jc.prototype.update=function(){var e=new Kt,t=new Kt,n=new Yt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,c=0,u=s.length;c<u;c++){var d=s[c],p=d.normal;e.copy(o[d.a]).add(o[d.b]).add(o[d.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}i.needsUpdate=!0}}(),Qc.prototype=Object.create(Gn.prototype),Qc.prototype.constructor=Qc,Qc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Qc.prototype.update=function(){var e=new Kt,t=new Kt,n=new Kt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),eu.prototype=Object.create(Ua.prototype),eu.prototype.constructor=eu,eu.prototype.update=function(){var e,t,n=new Kt,r=new fa;function i(i,a,o,s){n.set(a,o,s).unproject(r);var l=t[i];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,d=l.length;u<d;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),tu.prototype=Object.create(Ua.prototype),tu.prototype.constructor=tu,tu.prototype.update=function(){var e=new _n;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),tu.prototype.setFromObject=function(e){return this.object=e,this.update(),this},tu.prototype.copy=function(e){return Ua.prototype.copy.call(this,e),this.object=e.object,this},tu.prototype.clone=function(){return(new this.constructor).copy(this)},nu.prototype=Object.create(Ua.prototype),nu.prototype.constructor=nu,nu.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Gn.prototype.updateMatrixWorld.call(this,e))},ru.prototype=Object.create(Na.prototype),ru.prototype.constructor=ru,ru.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?x:A,this.lookAt(this.plane.normal),Gn.prototype.updateMatrixWorld.call(this,e)},iu.prototype=Object.create(Gn.prototype),iu.prototype.constructor=iu,iu.prototype.setDirection=(Ec=new Kt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Ec.set(e.z,0,-e.x).normalize(),wc=Math.acos(e.y),this.quaternion.setFromAxisAngle(Ec,wc))}),iu.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},iu.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},iu.prototype.copy=function(e){return Gn.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},iu.prototype.clone=function(){return(new this.constructor).copy(this)},au.prototype=Object.create(Ua.prototype),au.prototype.constructor=au;var su=0,lu=1;function cu(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function uu(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function du(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Wa(e,t)}function pu(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ma(e)}function fu(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Wa(e,t)}function hu(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ga(e)}function mu(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ga(e)}function _u(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ga(e)}function gu(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Kt(e,t,n)}function vu(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Yn(e,t).setDynamic(!0)}function yu(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new $n(e,t)}function Au(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Xn(e,t)}function xu(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Zn(e,t)}function Su(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Jn(e,t)}function bu(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Qn(e,t)}function wu(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new er(e,t)}function Eu(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new tr(e,t)}function Pu(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new nr(e,t)}function Cu(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new rr(e,t)}function Tu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),el.call(this,e),this.type="catmullrom",this.closed=!0}function Vu(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),el.call(this,e),this.type="catmullrom"}function Fu(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),el.call(this,e),this.type="catmullrom"}function Du(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new au(e)}function Ou(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new tu(e,t)}function Ru(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ua(new ts(e.geometry),new ja({color:void 0!==t?t:16777215}))}function Mu(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ua(new $a(e.geometry),new ja({color:void 0!==t?t:16777215}))}function Lu(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new js(e)}function Bu(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new zs(e)}qs.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(qs.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(pl.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Kn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Kt(i.x,i.y,i.z||0))}return t}}),Object.assign(fl.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Tu.prototype=Object.create(el.prototype),Vu.prototype=Object.create(el.prototype),Fu.prototype=Object.create(el.prototype),Object.assign(Fu.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),$c.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Hc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Wl.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Cl.extractUrlBase(e)}}),Object.assign(Fl.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Nc.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(_n.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Uc.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Wt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Wt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Wt.ceilPowerOfTwo(e)}}),Object.assign(Yt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(An.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Kt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}}),vn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},qt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Vr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Fr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Fr,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Fr.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Fr.getNormal(e,t,n,r)}}),Object.assign(hl.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new No(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Jo(this,e)}}),Object.assign(Ht.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Kt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(dn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Kn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Gn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Gn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(La.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ka.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ba.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(qs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ha.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ml.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Yn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(sr.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(sr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Uo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Dc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(fr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Vn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===b}}}),Object.defineProperties(fs.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Tr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ca.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Ca.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(la.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(hn.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(pn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Ea.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),sc.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new nc).load(e,function(e){t.setBuffer(e)}),this},cc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ic.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var ku={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function Iu(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ju(){console.error("THREE.CanvasRenderer has been removed")}function Nu(){console.error("THREE.JSONLoader has been removed.")}ln.crossOrigin=void 0,ln.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Hs;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ln.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ws;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ln.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ln.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Uu={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function zu(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(1),a=n(3),o=n(52),s=n(71);t.FORM=function(){function e(){}return e.unpack=function(t){if(t instanceof DataView||(t=new DataView(t)),!e.isForm(t))return null;var n=Object.create(null);n.entries=[];for(var i=8;i<t.byteLength-2;){var a=t.getUint32(i);"HBIN"===(a=r.fromU32(a))&&(i+=4,a+=r.fromU32(t.getUint32(i))),n.entries.push(a),i+=4;var o=t.getUint32(i);i+=4;var s={raw:t.buffer.slice(i,i+o)},l=e.parseType(a,s.raw);l&&(s.parsed=l),n[a]=n[a]||[],n[a].push(s),i+=o+o%2}if(n.BMP1)for(var c=0;c<n.BMP1.length;c++){var u=n.BMP1[c];u.parsed=e.parseBMP(u.raw,n.PAL1)}return n},e.pack=function(t){var n=new ArrayBuffer(e.getByteLength(t)),a=new DataView(n);a.setUint32(0,1179603533),a.setUint32(4,n.byteLength-8);for(var o={},s=8,l=0;l<t.entries.length;l++){var c=t.entries[l],u=o[c]||0;o[c]=u+1;for(var d=r.toCharCodes(c),p=0;p<d.length;p++)a.setUint8(s,d[p]),s++;var f=t[c][u],h=f.raw.byteLength;a.setUint32(s,h),s+=4,i.copyRange(a,f.raw,s,0,h),s+=h+h%2}return n},e.isForm=function(e){return!!e&&(e instanceof DataView||(e=new DataView(e)),1179603533===e.getUint32(0))},e.getByteLength=function(e){var t=0;for(var n in e)if("entries"!==n)for(var r=0;r<e[n].length;r++){var i=e[n][r].raw.byteLength;t+=i+i%2+n.length+4}return t+8},e.parseType=function(t,n){switch(t){case"HBINMODE":return e.parseHBINMODE(n);case"OBJ1":return e.parseOBJ1(n);case"COL1":return e.parseCOL1(n);case"MAT1":return e.parseMAT1(n);case"ATR1":return e.parseATR1(n);case"VTX1":return e.parseVTX1(n);case"FAC1":return e.parseFAC1(n);case"PAL1":return e.parsePAL1(n);case"SKL1":return e.parseSKL1(n);case"STRG":return e.parseSTRG(n)}return null},e.parseHBINMODE=function(e){var t=new DataView(e),n={E:t.getUint8(20),F:t.getUint8(21),G:t.getUint8(22)};return 69===n.E&&70===n.F&&71===n.G||console.warn("HBINMODE unexpected EFG => ",n),n},e.parseOBJ1=function(t){for(var n=new DataView(t),r={objects:[],mystery1:n.getUint16(2)},i=n.getUint16(0),o=4,s=0;s<i;s++){var l=n.getUint16(o),c=n.getUint8(o+2),u=n.getUint16(o+3);o+=5;var d=void 0;switch(c){case 61:d={children:[]};for(var p=n.getUint16(o),f=0;f<p;f++)d.children.push(n.getUint16(o+2+2*f));Object.assign(d,e._parseOBJ1Transforms(n,o+2+2*p));break;case 58:d={mystery1:n.getUint8(o),faceIndex:n.getUint16(o+1),faceCount:n.getUint16(o+3)},Object.assign(d,e._parseOBJ1Transforms(n,o+5));break;case 16:d={skeletonGlobalIndex:n.getUint16(o)},Object.assign(d,e._parseOBJ1Transforms(n,o+2));break;case 59:d={},console.warn("Object type 0x3B");break;case 62:d={};break;case 97:d={},Object.assign(d,e._parseOBJ1Transforms(n,o));break;case 93:d={},console.warn("Object type 0x5D");break;default:console.warn("Unrecognized object type "+a.$$hex(c)),d={}}d.objType=c,d.globalIndex=u,r.objects.push(d),o+=l-3}return r},e._parseOBJ1Transforms=function(e,t){return{posX:e.getFloat32(t),posY:e.getFloat32(t+4),posZ:e.getFloat32(t+8),rotX:e.getFloat32(t+12),rotY:e.getFloat32(t+16),rotZ:e.getFloat32(t+20),scaleX:e.getFloat32(t+24),scaleY:e.getFloat32(t+28),scaleZ:e.getFloat32(t+32)}},e.parseCOL1=function(e){for(var t=new DataView(e),n=[],r=t.getUint16(0),i=2,a=0;a<r;a++)n.push(t.getUint32(i)),i+=4;return n},e.parseMAT1=function(e){for(var t=new DataView(e),n={materials:[]},r=t.getUint16(0),i=2,a=0;a<r;a++){var o={mystery1:t.getUint16(i),colorIndex:t.getUint16(i+2),mystery3:t.getUint16(i+4),mystery4:t.getFloat32(i+6),mystery5:t.getUint16(i+10)};n.materials.push(o),i+=12}return n},e.parseATR1=function(e){for(var t=new DataView(e),n={atrs:[]},r=t.getUint16(0),i=2,a=0;a<r;a++){var o={size:t.getUint16(i),xBehavior:t.getUint8(i+5),yBehavior:t.getUint8(i+6),bmpGlobalIndex:t.getUint16(i+10)};n.atrs.push(o),i+=o.size+2}return n},e.parseVTX1=function(e){for(var t=new DataView(e),n={vertices:[],scale:t.getFloat32(4)},r=t.getUint16(0),i=8,a=0;a<r;a++){var o={x:t.getInt16(i),y:t.getInt16(i+2),z:t.getInt16(i+4),normalX:t.getInt8(i+6),normalY:t.getInt8(i+7),normalZ:t.getInt8(i+8)};n.vertices.push(o),i+=9}return n},e.parseFAC1=function(e){for(var t=new DataView(e),n={faces:[]},r=t.getUint16(0),i=8,o=0;o<r;o++){var s=t.getUint8(i);if(53!==s&&22!==s&&48!==s)throw new Error("Unrecognized faceType in FAC1: "+a.$$hex(s));var l={vtxEntries:[]};if(n.faces.push(l),i+=1,48===s)console.warn("Unsupported face type 0x30"),i+=6;else for(var c=53===s?4:3,u=0;u<c;u++)l.vtxEntries[u]={vertexIndex:t.getUint16(i),materialIndex:t.getInt16(i+2),u:t.getFloat32(i+4),v:t.getFloat32(i+8)},i+=12;l.materialIndex=t.getInt16(i),l.atrIndex=t.getInt16(i+2),l.mystery3=t.getUint8(i+4),54!==l.mystery3&&console.warn("Unsupported FAC1 mystery3 ",a.$$hex(l.mystery3)),i+=5}return n},e.parsePAL1=function(e){var t=new DataView(e),n={colors:[],bpp:0,globalIndex:t.getUint16(0)},r=t.getUint16(2);n.bpp=8*Math.floor((e.byteLength-4)/r);for(var i=4,a=0;a<r;a++){if(32===n.bpp)n.colors.push(t.getUint32(i));else if(16===n.bpp)n.colors.push(t.getUint16(i));else{if(8!==n.bpp)throw"FORM.parseType(PAL1): bpp: "+n.bpp;n.colors.push(t.getUint8(i))}i+=n.bpp/8}return n},e.parseSKL1=function(t){for(var n=new DataView(t),r=n.getUint8(2),i={globalIndex:n.getUint16(0),skls:[]},a=3,o=0;o<r;o++){var s={mystery1:n.getUint8(a),objGlobalIndex:n.getUint16(a+1),nextSiblingRelativeIndex:n.getUint16(a+51),isParentNode:n.getUint16(a+53),mystery2:n.getUint8(a+54)};Object.assign(s,e._parseOBJ1Transforms(n,a+3)),i.skls.push(s),a+=56}return i},e.parseSTRG=function(e){for(var t=new DataView(e),n=[],r=t.getUint16(0),i=2+r,a=0;a<r;a++){for(var o="",s=t.getUint8(2+a),l=0;l<s;l++)o+=String.fromCharCode(t.getUint8(i+l));i+=s,n.push(o)}return n},e.parseBMP=function(e,t){var n=new DataView(e),r=n.getUint16(2),i=n.getUint16(5),l=n.getUint16(7);if(296===r||552===r){if(!t)throw"Palette needed for BMP format "+a.$$hex(r);for(var c=n.getUint16(9),u=n.getUint16(15),d=void 0,p=0;p<t.length;p++)if(t[p].parsed.globalIndex===c){d=t[p].parsed;break}if(!d)throw"Could not locate palette at global index "+c;var f=8/(i*l/u),h=d.bpp,m=new DataView(e,17,u);return{globalIndex:n.getUint16(0),origFormat:r,paletteGlobalIndex:c,width:i,height:l,src:s.BMPtoRGBA(m,d.colors,f,h)}}if(295===r){var _=n.getUint8(4),g=n.getUint16(11);switch(_){case 16:return{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:o.RGBA5551toRGBA32(e.slice(13,13+g),i,l)};case 32:return{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:e.slice(13,13+g)};default:console.warn("BMP1 0x127 had unsupported bpp "+_)}}else{if(294===r){g=n.getUint16(11);var v=new ArrayBuffer(i*l*4),y=new DataView(v);for(p=0;p<g/3;p++){var A=n.getUint8(13+p)<<24|n.getUint8(13+p+1)<<16|n.getUint8(13+p+2)<<8|255,x=4*p;y.setUint32(x,A)}return{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:v}}if(293===r){for(g=n.getUint16(11),v=new ArrayBuffer(4*g),y=new DataView(v),p=0;p<g;p++){var S=240&(w=n.getUint8(13+p))|(240&w)>>>4;A=S<<24|S<<16|S<<8|(15&w|(15&w)<<4),x=4*p;y.setUint32(x,A)}return{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:v}}if(292===r){g=n.getUint16(11),v=new ArrayBuffer(8*g),y=new DataView(v);var b=0;for(p=0;p<g;p++){var w,E=(240&(w=n.getUint8(13+p)))>>>4;E|=240&w,y.setUint32(b,E<<24|E<<16|E<<8|255),b+=4;var P=15&w;P|=P<<4,y.setUint32(b,P<<24|P<<16|P<<8|255),b+=4}return{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:v}}}return console.warn("Could not parse BMP format "+a.$$hex(r)),{globalIndex:n.getUint16(0),origFormat:r,width:i,height:l,src:new ArrayBuffer(i*l*4)}},e.replaceBMP=function(e,t,n,r){i.copyRange(e.BMP1[t].raw,n,17,0,n.byteLength),e.PAL1[t].parsed=r;var a=new DataView(e.PAL1[t].raw).getUint16(0),o=e.PAL1[t].raw=new ArrayBuffer(4+4*r.colors.length),s=new DataView(o);s.setUint16(0,a),s.setUint16(2,r.colors.length);for(var l=4,c=0;c<r.colors.length;c++)s.setUint32(l,r.colors[c]),l+=4},e.getByGlobalIndex=function(e,t,n){if(!e[t])return null;for(var r=[],i=0;i<e[t].length;i++){var a=e[t][i].parsed;if(!a)throw"No parsed value for "+t;if(a.hasOwnProperty("globalIndex"))a.globalIndex===n&&r.push(a);else{var o=a;switch(t){case"OBJ1":o=a.objects}for(var s=0;s<o.length;s++){var l=o[s];if(!l.hasOwnProperty("globalIndex"))throw new Error("globalIndex is not a property of the searched "+t+" array in getByGlobalIndex");l.globalIndex===n&&r.push(l)}}}return r.length?1===r.length?r[0]:r:null},e.getObjectsByType=function(e,t){for(var n=e.OBJ1[0].parsed.objects,r=[],i=0;i<n.length;i++)n[i].objType===t&&r.push(n[i]);return r},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(11),a=n(25),o=n(69),s=n(1),l=n(0),c=n(9),u={};u[l.Game.MP3_USA]={jp:[{upper:61762,lower:61770},{upper:373706,lower:373714}],en:[{upper:373778,lower:373786}],de:[{upper:373802,lower:373810}],es:[{upper:373814,lower:373822}],it:[{upper:373826,lower:373830}],fr:[{upper:373790,lower:373798}]},function(e){function t(e){void 0===e&&(e="en");var t=c.romhandler.getDataView(),i=n(e)[0];if(!i)return null;var a=t.getUint16(i.upper)<<16,o=t.getUint16(i.lower),s=a|o;return 32768&o&&(s-=65536),r.$$log("Strings3.getROMOffset["+e+"] -> "+r.$$hex(s)),s}function n(e){return void 0===e&&(e="en"),u[c.romhandler.getROMGame()][e]}e.getROMOffset=t,e.setROMOffset=function(e,t){for(var a=new DataView(t),o=e,s=f(c.romhandler.getROMGame()),u=0;u<s.length;u++){var d=s[u],p=n(d),h=(4294901760&o)>>>16,m=65535&o;32768&m&&(h+=1);for(var _=0;_<p.length;_++)a.setUint16(p[_].upper,h),a.setUint16(p[_].lower,m);r.$$log("Strings3.setROMOffset["+d+"] -> "+r.$$hex(h<<16|m)),o+=i.makeDivisibleBy(l[d].getByteLength(),16)}},e.getPatchOffsets=n;var l,d=function(){function e(e){this.dirs=this._extract(e)}return e.prototype._extract=function(e){for(var t=this._getDirectoryCountFromView(e),n=new Array(t),r=0;r<t;r++)n[r]=this._readDirFromView(e,r);return n},e.prototype._getDirectoryCountFromView=function(e){return e.getUint32(0)},e.prototype._readDirFromView=function(e,t){var n=this._getDirOffsetFromView(e,t),r=new DataView(e.buffer,e.byteOffset+n),i=this._decompressDir(r);return new a.strings.StringTable(new DataView(i))},e.prototype._decompressDir=function(e){var t=e.getUint32(0),n=e.getUint32(4),r=new DataView(e.buffer,e.byteOffset+8);return o.decompress(n,r,t)},e.prototype._getDirOffsetFromView=function(e,t){return e.getUint32(4*(1+t))},e.prototype.read=function(e,t,n){if(void 0===n&&(n=!1),e<0||e>=this.getDirectoryCount())throw"Requesting non-existent string directory";return this.dirs[e].read(t,n)},e.prototype.write=function(e,t,n){this.dirs[e].write(t,n)},e.prototype.getDirectoryCount=function(){return this.dirs.length},e.prototype.getStringCount=function(e){return this.dirs[e].getStringCount()},e.prototype.getByteLength=function(){var e=0,t=this.dirs.length;e+=4,e+=4*t;for(var n=0;n<t;n++)e+=4,e+=4,e+=this.dirs[n].getByteLength(!0),e=i.makeDivisibleBy(e,2);return e},e.prototype.pack=function(e,t){void 0===t&&(t=0);var n=new DataView(e,t),r=this.getDirectoryCount();n.setUint32(0,r);for(var a=4,o=4+4*r,s=0;s<r;s++)n.setUint32(a,o),a+=4,n.setUint32(o,this.dirs[s].getByteLength()),o+=4,n.setUint32(o,1),o+=4,o=this._packDir(s,n,o),o=i.makeDivisibleBy(o,2);return o},e.prototype._packDir=function(e,t,n){var r=new ArrayBuffer(this.dirs[e].getByteLength());this.dirs[e].pack(r,0);var i=o.compress(1,new DataView(r));s.copyRange(t,i,n,0,i.byteLength);var a=this.dirs[e].getByteLength(!0);if($$debug&&i.byteLength>a)throw"Upper bound guess is wrong _packDir";return n+a},e}();function p(){l={};for(var e=f(c.romhandler.getROMGame()),n=0;n<e.length;n++){var r=e[n],i=c.romhandler.getDataView(t(r));l[r]=new d(i)}return l}function f(e){return Object.keys(u[e])}e.clear=function(){l=null},e.extract=p,e.extractAsync=function(){return new Promise(function(e,t){p(),e()})},e.pack=function(e,t){void 0===t&&(t=0);for(var n=t,r=f(c.romhandler.getROMGame()),a=0;a<r.length;a++){var o=r[a];n+=l[o].pack(e,n),n=i.makeDivisibleBy(n,16)}return n},e.read=function(e,t,n,r){return void 0===r&&(r=!1),l[e].read(t,n,r)},e.write=function(e,t,n,r){l[e].write(t,n,r)},e.getLocales=f,e.getDirectoryCount=function(e){return l[e].getDirectoryCount()},e.getStringCount=function(e,t){return l[e].getStringCount(t)},e.getByteLength=function(){for(var e=0,t=f(c.romhandler.getROMGame()),n=0;n<t.length;n++){var r=t[n];e+=i.makeDivisibleBy(l[r].getByteLength(),16)}return e}}(t.strings3||(t.strings3={}))},function(e,t,n){"use strict";var r=n(5).OrderedMap,i={createFromArray:function(e){return r(e.map(function(e){return[e.getKey(),e]}))}};e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(e.size){var i=0;e.reduce(function(e,a,o){return t(e,a)||(n(e)&&r(i,o),i=o),a}),n(e.last())&&r(i,e.count())}}},function(e,t,n){"use strict";e.exports=function(e){return"handled"===e||!0===e}},function(e,t,n){"use strict";var r=n(15);e.exports=function(e,t,n){var i=e.getSelection(),a=e.getCurrentContent(),o=i;if(i.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return a}else if(e.isSelectionAtStartOfContent())return a;if((o=t(e))===i)return a}return r.removeRange(a,o,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyClick=function(e,t){return t&&(e=e.bind(t)),function(t){13!==t.keyCode&&32!==t.keyCode||(e(t),t.stopPropagation(),t.preventDefault())}}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(343),i=n(344),a=n(167);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function h(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var d=!0,p=0;p<l;p++)if(c(e,a+p)!==c(t,p)){d=!1;break}if(d)return a}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function y(e,t,n,r){return z(N(t,e.length-n),e,n,r)}function A(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return A(e,t,n,r)}function S(e,t,n,r){return z(U(t),e,n,r)}function b(e,t,n,r){return z(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return V(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(r,i),u=e.slice(t,n),d=0;d<s;++d)if(c[d]!==u[d]){a=c[d],o=u[d];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return A(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function V(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=j(e[a]);return i}function F(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,a){return a||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=l.isBuffer(e)?e:N(new l(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var I=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(12))},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(64).Buffer)},function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:n(356),e.exports={Promise:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=Object.create(null),a={id:"",name:"",level:r.ValidationLevel.ERROR,fails:function(e,t){throw"fails not implemented"}};t.createRule=function(e,t,n){var r=Object.create(a);return r.id=e,r.name=t,r.level=n,i[e]=r,r},t.getRule=function(e,t){var n=i[e];return{id:n.id,name:n.name,level:n.level,fails:function(e){return n.fails(e,t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.create(null),i={};t.createBoardInfo=function(e,t){if(r[e])throw"Cannot create an already existing BoardInfo "+e+".";var n=Object.create(i);return t&&Object.assign(n,t),r[e]=n,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=958,a=1024,o=3;function s(e,t,n){for(var r=0,s=0,l=i,c=new ArrayBuffer(a),u=new DataView(c),d=0;s<n;){if(0==(256&d)&&(d=e.getUint8(r),d|=65280,++r),1==(1&d))t.setUint8(s,e.getUint8(r)),u.setUint8(l,e.getUint8(r)),++s,++r,l=(l+1)%a;else{var p=e.getUint8(r),f=e.getUint8(r+1);r+=2;for(var h,m=(192&f)<<2|p,_=(63&f)+o,g=0;g<_;++g)h=u.getUint8(m%a),u.setUint8(l,h),l=(l+1)%a,t.setUint8(s,h),++s,++m}d>>=1}return r}function l(e,t,n){for(var r=0,i=0,a=0,o=0;i<n;){if(0===o&&(a=e.getUint32(r),o=32,r+=4),0!=(2147483648&a))t.setUint8(i,e.getUint8(r)),++i,++r;else{var s=e.getUint8(r),l=e.getUint8(r+1);r+=2;var c,u,d=1+((15&s)<<8|l),p=2+((240&s)>>4);for(2===p&&(p=e.getUint8(r)+18,++r),c=0;c<p&&i<n;++c)u=d>i?0:t.getUint8(i-d),t.setUint8(i,u),++i}a<<=1,--o}return r}function c(e,t,n){for(var r=0,i=0;i<n;){var a=e.getUint8(r);r++;var o=127&a;if(128&a)for(var s=0;s<o;s++){var l=e.getUint8(r);r++,t.setUint8(i,l),i++}else{var c=e.getUint8(r);r++;for(s=0;s<o;s++)t.setUint8(i,c),i++}}return r}t.decompress=function(e,t,n){var i,a=new ArrayBuffer(n),o=new DataView(a);switch(e){case 1:i=s(t,o,n);break;case 2:case 3:case 4:i=l(t,o,n);break;case 5:i=c(t,o,n);break;case 0:i=n;for(var u=0;u<n;u++)o.setUint8(u,t.getUint8(u));break;default:r.$$log("decompression "+e+" not implemented.")}return a.compressedSize=i,a},t.compress=function(e,t){switch(e){case 1:return function(e){for(var t=Math.ceil(e.byteLength/8),n=e.byteLength+t,r=new ArrayBuffer(n),i=new DataView(r),a=0,o=0;a<n;)a&&a%9?(i.setUint8(a,e.getUint8(o)),o++):i.setUint8(a,255),a++;return r}(t);case 2:case 3:case 4:return function(e){for(var t=e.byteLength/32,n=e.byteLength+4*t,r=new ArrayBuffer(n),i=new DataView(r),a=0,o=0;o<n;o+=36,a+=32)i.setUint32(o,4294967295),i.setUint32(o+4,e.getUint32(a)),i.setUint32(o+8,e.getUint32(a+4)),i.setUint32(o+12,e.getUint32(a+8)),i.setUint32(o+16,e.getUint32(a+12)),i.setUint32(o+20,e.getUint32(a+16)),i.setUint32(o+24,e.getUint32(a+20)),i.setUint32(o+28,e.getUint32(a+24)),i.setUint32(o+32,e.getUint32(a+28));return r}(t);case 5:return function(e){for(var t=new ArrayBuffer(3*e.byteLength),n=new DataView(t),r=0,i=0,a=0;i<e.byteLength;)if(e.getUint8(i)===e.getUint8(i+1)){a=0;for(var o=0;o<127;o++){if(e.getUint8(i+o)!==e.getUint8(i+o+1)||i+o>=e.byteLength){a++;break}a++}n.setUint8(r,a),n.setUint8(r+1,e.getUint8(i)),r+=2,i+=a}else{for(a=0,o=0;o<127&&!(e.getUint8(i+o)===e.getUint8(i+o+1)||i+o>=e.byteLength);o++)a++;for(n.setUint8(r,128|a),r+=1,o=0;o<a;o++)n.setUint8(r,e.getUint8(i+o)),r+=1,i+=1}return t.slice(0,r)}(t);case 0:default:return t.buffer.slice(0)}},t.getCompressedSize=function(e,t,n){var i=new ArrayBuffer(n),a=new DataView(i);switch(e){case 1:return s(t,a,n);case 2:case 3:case 4:return l(t,a,n);case 5:return c(t,a,n);case 0:return n;default:r.$$log("getCompressedSize "+e+" not implemented.")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromTiles=function(e,t,n,r,i){for(var a,o,s,l,c,u,d,p,f=t*r,h=n*i,m=new ArrayBuffer(f*h),_=new DataView(m),g=0;g<h;g++){o=g%i,l=Math.floor(g/i)*t,u=o*r,p=g*f;for(var v=0;v<f;v+=4)a=v%r,s=l+Math.floor(v/r),c=u+a,d=p+v,_.setUint32(d,e[s].getUint32(c))}return m},t.toTiles=function(e,t,n,r,i){for(var a,o=t*r,s=n*i,l=[],c=[],u=t*n,d=0;d<u;d++)l.push(new ArrayBuffer(r*i)),c.push(new DataView(l[d]));for(var p=0;p<s;p++){a=Math.floor(p/i)*t;for(var f=0;f<o;f++){var h=p%i*r+f%r,m=p*o+f;c[a+Math.floor(f/r)].setUint8(h,e[m])}}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BMPtoRGBA=function(e,t,n,r){var i=e;i instanceof DataView||(i=new DataView(i));for(var a,o=i.byteLength*(r/n),s=new ArrayBuffer(o),l=new DataView(s),c=0,u=0,d=r/8,p="setUint"+r;u<o;)if(8===n)a=i.getUint8(c),l[p](u,t[a]),c+=1,u+=d;else if(4===n)a=(240&i.getUint8(c))>>4,l[p](u,t[a]),u+=d,a=15&i.getUint8(c),l[p](u,t[a]),u+=d,c+=1;else{if(2!==n)throw"Cannot decode palette with bpp: "+n;a=(192&i.getUint8(c))>>6,l[p](u,t[a]),u+=d,a=(48&i.getUint8(c))>>4,l[p](u,t[a]),u+=d,a=(12&i.getUint8(c))>>2,l[p](u,t[a]),u+=d,a=3&i.getUint8(c),l[p](u,t[a]),u+=d,c+=1}return s},t.BMPfromRGBA=function(e,t,n){var r=e;r instanceof DataView||(r=new DataView(r));for(var i={colors:[],bpp:t},a={},o=t/8,s="getUint"+t,l=0;l<e.byteLength;){var c=r[s](l);a.hasOwnProperty(c.toString(16))?l+=o:(a[c.toString(16)]=i.colors.length,i.colors.push(c),l+=o)}var u=new ArrayBuffer(e.byteLength/o*(n/8)),d=new DataView(u),p="setUint"+n,f=0;for(l=0;f<u.byteLength;){if(8!==n)throw"Cannot encode palette with bpp: "+n;var h=a[(c=r[s](l)).toString(16)];d[p](f,h),l+=o,f++}return[u,i]}},function(module,exports,__webpack_require__){var factory;factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"./node_modules/mips-inst/dist/mipsinst.js":
/*!*************************************************!*\
  !*** ./node_modules/mips-inst/dist/mipsinst.js ***!
  \*************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(typeof self !== \'undefined\' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, \'__esModule\', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === \'object\' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, \'default\', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != \'string\') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = "./src/index.js");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ "./src/bitstrings.js":\n/*!***************************!*\\\n  !*** ./src/bitstrings.js ***!\n  \\***************************/\n/*! exports provided: isBinaryLiteral, compareBits, makeBitMaskFromString, makeBitMask, padBitString */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"isBinaryLiteral\\", function() { return isBinaryLiteral; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"compareBits\\", function() { return compareBits; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"makeBitMaskFromString\\", function() { return makeBitMaskFromString; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"makeBitMask\\", function() { return makeBitMask; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"padBitString\\", function() { return padBitString; });\\nfunction isBinaryLiteral(str) {\\n  return str[0] === \\"0\\" || str[0] === \\"1\\"; // Checking first char is enough for now\\n}\\n\\nfunction compareBits(number, bitString, bitOffset) {\\n  let shifted = (number >>> bitOffset) & makeBitMask(bitString.length);\\n  let mask = makeBitMaskFromString(bitString);\\n  return shifted === mask;\\n}\\n\\nfunction makeBitMaskFromString(bitString) {\\n  let mask = 0;\\n  for (var i = 0; i < bitString.length; i++) {\\n    let bit = bitString[i] === \\"1\\" ? 1 : 0;\\n    mask <<= 1;\\n    mask = mask | bit;\\n  }\\n  return mask;\\n}\\n\\nfunction makeBitMask(len) {\\n  if (len <= 0)\\n    throw new Error(`makeBitMask cannot make mask of length ${len}`);\\n\\n  let mask = 1;\\n  while (--len) {\\n    mask <<= 1;\\n    mask = mask | 1;\\n  }\\n  return mask;\\n}\\n\\nfunction padBitString(str, minLen) {\\n  while (str.length < minLen) {\\n    str = \\"0\\" + str;\\n  }\\n  return str;\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/bitstrings.js?");\n\n/***/ }),\n\n/***/ "./src/immediates.js":\n/*!***************************!*\\\n  !*** ./src/immediates.js ***!\n  \\***************************/\n/*! exports provided: parseImmediate, formatImmediate, makeInt16, getImmFormatDetails */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"parseImmediate\\", function() { return parseImmediate; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"formatImmediate\\", function() { return formatImmediate; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"makeInt16\\", function() { return makeInt16; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getImmFormatDetails\\", function() { return getImmFormatDetails; });\\nfunction parseImmediate(immArr, maxBits, signed, shift) {\\n  let [neg, base, num] = immArr;\\n  base = base.toLowerCase();\\n\\n  let value;\\n  if (base === \\"b\\")\\n    value = parseInt(num, 2);\\n  else if (base === \\"o\\")\\n    value = parseInt(num, 8);\\n  else if (base === \\"x\\")\\n    value = parseInt(num, 16);\\n  else\\n    value = parseInt(num, 10);\\n\\n  if (isNaN(value)) {\\n    return value; // Let the caller decide what to do with NaN.\\n  }\\n\\n  if (shift) {\\n    value >>>= shift;\\n  }\\n\\n  if (maxBits === 16) {\\n    if (signed) {\\n      value = makeInt16(value);\\n    }\\n  }\\n\\n  if (neg)\\n    value = -value;\\n\\n  return value;\\n}\\n\\nfunction formatImmediate(value, maxBits) {\\n  if (maxBits === 16) {\\n    value = (new Uint16Array([value]))[0];\\n  }\\n\\n  return value;\\n}\\n\\nfunction makeInt16(value) {\\n  return (new Int16Array([value]))[0];\\n}\\n\\nfunction getImmFormatDetails(formatVal) {\\n  // Remove optional indicator\\n  if (formatVal[formatVal.length - 1] === \\"?\\")\\n    formatVal = formatVal.substring(0, formatVal.length - 1);\\n\\n  if (formatVal.indexOf(\\"int\\") === -1) {\\n    if (formatVal.substr(0, 2) === \\"cc\\") {\\n      return {\\n        signed: false,\\n        bits: 4,\\n        shift: false,\\n      };\\n    }\\n\\n    return null; // Not an immediate\\n  }\\n\\n  let shift = 0;\\n  const shiftIndex = formatVal.indexOf(\\"shift\\");\\n  if (shiftIndex > 0)\\n    shift = formatVal.substr(shiftIndex).match(/\\\\d+/g);\\n\\n  return {\\n    signed: formatVal[0] !== \\"u\\",\\n    bits: parseInt(formatVal.match(/\\\\d+/g)),\\n    shift: shift,\\n  };\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/immediates.js?");\n\n/***/ }),\n\n/***/ "./src/index.js":\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/*! exports provided: parse, print */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _parse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse */ \\"./src/parse.js\\");\\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \\"parse\\", function() { return _parse__WEBPACK_IMPORTED_MODULE_0__[\\"parse\\"]; });\\n\\n/* harmony import */ var _print__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./print */ \\"./src/print.js\\");\\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \\"print\\", function() { return _print__WEBPACK_IMPORTED_MODULE_1__[\\"print\\"]; });\\n\\n\\n\\n\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/index.js?");\n\n/***/ }),\n\n/***/ "./src/opcodes.js":\n/*!************************!*\\\n  !*** ./src/opcodes.js ***!\n  \\************************/\n/*! exports provided: getOpcodeDetails, getValueBitLength, findMatch */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getOpcodeDetails\\", function() { return getOpcodeDetails; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getValueBitLength\\", function() { return getValueBitLength; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"findMatch\\", function() { return findMatch; });\\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regs */ \\"./src/regs.js\\");\\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bitstrings */ \\"./src/bitstrings.js\\");\\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./immediates */ \\"./src/immediates.js\\");\\n\\n\\n\\n\\nconst rs = \\"rs\\";\\nconst rt = \\"rt\\";\\nconst rd = \\"rd\\";\\nconst fs = \\"fs\\";\\nconst ft = \\"ft\\";\\nconst fd = \\"fd\\";\\nconst fr = \\"fr\\";\\nconst sa = \\"uint5\\";\\nconst uint5 = \\"uint5\\";\\nconst uint10 = \\"uint10\\";\\nconst int16 = \\"int16\\";\\nconst uint16 = \\"uint16\\";\\nconst uint20 = \\"uint20\\";\\nconst uint26 = \\"uint26\\";\\nconst uint26shift2 = \\"uint26shift2\\";\\nconst cc = \\"cc\\";\\nconst cond = \\"cond\\";\\nconst fmt = \\"fmt\\";\\nconst fmt3 = \\"fmt3\\";\\n\\nfunction getOpcodeDetails(opcode) {\\n  return opcodeDetails[opcode.toLowerCase()];\\n}\\n\\nfunction getValueBitLength(str) {\\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"isBinaryLiteral\\"])(str))\\n    return str.length;\\n\\n  str = str.replace(\\"?\\", \\"\\");\\n  switch (str) {\\n    case \\"cc\\":\\n    case \\"fmt3\\":\\n      return 3;\\n\\n    case \\"cond\\":\\n      return 4;\\n\\n    case \\"rs\\":\\n    case \\"rt\\":\\n    case \\"rd\\":\\n    case \\"fs\\":\\n    case \\"ft\\":\\n    case \\"fd\\":\\n    case \\"fr\\":\\n    case \\"sa\\":\\n    case \\"fmt\\":\\n      return 5;\\n  }\\n\\n  const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__[\\"getImmFormatDetails\\"])(str);\\n  if (immDetails) {\\n    return immDetails.bits;\\n  }\\n\\n  throw new Error(`Unrecongized format value: ${str}`);\\n}\\n\\n// returns name\\nfunction findMatch(inst) {\\n  let bestMatch = \\"\\";\\n  let bestMatchScore = 0;\\n  for (let opName in opcodeDetails) {\\n    const format = opcodeDetails[opName].format;\\n    const fmts = opcodeDetails[opName].fmts;\\n    const score = formatMatches(inst, format, fmts);\\n    if (score > bestMatchScore) {\\n      bestMatch = opName;\\n      bestMatchScore = score;\\n    }\\n  }\\n\\n  return bestMatch;\\n}\\n\\n// Returns number of literal bits matched, if the overall format matches.\\nfunction formatMatches(number, format, fmts) {\\n  let score = 0;\\n  let tempScore;\\n  let bitOffset = 0;\\n  for (let i = format.length - 1; i >= 0; i--) {\\n    let bitLength;\\n    let piece = format[i];\\n    if (Array.isArray(piece)) {\\n      let matchedOne = false;\\n      for (let j = 0; j < piece.length; j++) {\\n        tempScore = checkPiece(piece[j], number, bitOffset, fmts);\\n        if (tempScore >= 0) {\\n          matchedOne = true;\\n          score += tempScore;\\n          bitLength = getValueBitLength(piece[j]);\\n          break; // j\\n        }\\n      }\\n      if (!matchedOne)\\n        return 0;\\n    }\\n    else {\\n      tempScore = checkPiece(piece, number, bitOffset, fmts);\\n      if (tempScore >= 0) {\\n        score += tempScore;\\n        bitLength = getValueBitLength(piece);\\n      }\\n      else {\\n        return 0;\\n      }\\n    }\\n\\n    bitOffset += bitLength;\\n  }\\n\\n  return score;\\n}\\n\\nfunction checkPiece(piece, number, bitOffset, fmts) {\\n  if (!Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"isBinaryLiteral\\"])(piece)) {\\n    if (piece === fmt) {\\n      for (let i = 0; i < fmts.length; i++) {\\n        let fmtBitString = Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"padBitString\\"])(Object(_regs__WEBPACK_IMPORTED_MODULE_0__[\\"getFmtBits\\"])(fmts[i]).toString(2), 5);\\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"compareBits\\"])(number, fmtBitString, bitOffset))\\n          return fmtBitString.length;\\n      }\\n      return -1;\\n    }\\n\\n    if (piece === fmt3) {\\n      for (let i = 0; i < fmts.length; i++) {\\n        let fmtBitString = Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"padBitString\\"])(Object(_regs__WEBPACK_IMPORTED_MODULE_0__[\\"getFmt3Bits\\"])(fmts[i]).toString(2), 3);\\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"compareBits\\"])(number, fmtBitString, bitOffset))\\n          return fmtBitString.length;\\n      }\\n      return -1;\\n    }\\n\\n    return 0; // non-literal contributes nothing\\n  }\\n\\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_1__[\\"compareBits\\"])(number, piece, bitOffset))\\n    return piece.length;\\n\\n  return -1;\\n}\\n\\nconst opcodeDetails = {\\n  \\"abs.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"000101\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  add: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000100000\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"add.fmt\\": {\\n    format: [\\"010001\\", fmt, ft, fs, fd, \\"000000\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, ft],\\n  },\\n  addi: {\\n    format: [\\"001000\\", rs, rt, int16],\\n    display: [rt, rs, int16],\\n  },\\n  addiu: {\\n    format: [\\"001001\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n  addu: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000100001\\"],\\n    display: [rd, rs, rt],\\n  },\\n  and: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000100100\\"],\\n    display: [rd, rs, rt],\\n  },\\n  andi: {\\n    format: [\\"001100\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n  bc1f: {\\n    format: [\\"010001\\", \\"01000\\", [cc, \\"000\\"], \\"00\\", int16], // TODO shifting?\\n    display: [\\"cc?\\", int16], // offset\\n  },\\n  bc1fl: {\\n    format: [\\"010001\\", \\"01000\\", [cc, \\"000\\"], \\"10\\", int16],\\n    display: [\\"cc?\\", int16], // offset\\n  },\\n  bc1t: {\\n    format: [\\"010001\\", \\"01000\\", [cc, \\"000\\"], \\"01\\", int16],\\n    display: [\\"cc?\\", int16], // offset\\n  },\\n  bc1tl: {\\n    format: [\\"010001\\", \\"01000\\", [cc, \\"000\\"], \\"11\\", int16],\\n    display: [\\"cc?\\", int16], // offset\\n  },\\n  beq: {\\n    format: [\\"000100\\", rs, rt, uint16],\\n    display: [rs, rt, uint16], // offset\\n  },\\n  beql: {\\n    format: [\\"010100\\", rs, rt, uint16],\\n    display: [rs, rt, uint16], // offset\\n  },\\n  bgez: {\\n    format: [\\"000001\\", rs, \\"00001\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bgezal: {\\n    format: [\\"000001\\", rs, \\"10001\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bgezall: {\\n    format: [\\"000001\\", rs, \\"10011\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bgezl: {\\n    format: [\\"000001\\", rs, \\"00011\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bgtz: {\\n    format: [\\"000111\\", rs, \\"00000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bgtzl: {\\n    format: [\\"010111\\", rs, \\"00000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  blez: {\\n    format: [\\"000110\\", rs, \\"00000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  blezl: {\\n    format: [\\"010110\\", rs, \\"00000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bltz: {\\n    format: [\\"000001\\", rs, \\"00000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bltzal: {\\n    format: [\\"000001\\", rs, \\"10000\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bltzall: {\\n    format: [\\"000001\\", rs, \\"10010\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bltzl: {\\n    format: [\\"000001\\", rs, \\"00010\\", uint16],\\n    display: [rs, uint16], // offset\\n  },\\n  bne: {\\n    format: [\\"000101\\", rs, rt, uint16],\\n    display: [rs, rt, uint16], // offset\\n  },\\n  bnel: {\\n    format: [\\"010101\\", rs, rt, uint16],\\n    display: [rs, rt, uint16], // offset\\n  },\\n  break: {\\n    format: [\\"000000\\", [uint20, \\"00000000000000000000\\"], \\"001101\\"],\\n    display: [\\"uint20?\\"],\\n  },\\n  \\"c.cond.fmt\\": {\\n    format: [\\"010001\\", fmt, ft, fs, [cc, \\"000\\"], \\"00\\", \\"11\\", cond],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [\\"cc?\\", fs, ft],\\n  },\\n  \\"ceil.l.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001010\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"ceil.w.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001110\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  cfc1: {\\n    format: [\\"010001\\", \\"00010\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  ctc1: {\\n    format: [\\"010001\\", \\"00110\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  cop0: {\\n    format: [\\"010000\\", uint26],\\n    display: [uint26], // cop_fun\\n  },\\n  cop1: {\\n    format: [\\"010001\\", uint26],\\n    display: [uint26], // cop_fun\\n  },\\n  cop2: {\\n    format: [\\"010010\\", uint26],\\n    display: [uint26], // cop_fun\\n  },\\n  cop3: {\\n    format: [\\"010011\\", uint26],\\n    display: [uint26], // cop_fun\\n  },\\n  \\"cvt.d.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"100001\\"],\\n    fmts: [\\"S\\", \\"W\\", \\"L\\"],\\n    display: [fd, fs],\\n  },\\n  \\"cvt.l.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"100101\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"cvt.s.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"100000\\"],\\n    fmts: [\\"D\\", \\"W\\", \\"L\\"],\\n    display: [fd, fs],\\n  },\\n  \\"cvt.w.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"100100\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  dadd: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000101100\\"],\\n    display: [rd, rs, rt],\\n  },\\n  daddi: {\\n    format: [\\"011000\\", rs, rt, int16],\\n    display: [rt, rs, int16],\\n  },\\n  daddiu: {\\n    format: [\\"011001\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n  daddu: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000101101\\"],\\n    display: [rd, rs, rt],\\n  },\\n  ddiv: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011110\\"],\\n    display: [rs, rt],\\n  },\\n  ddivu: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011111\\"],\\n    display: [rs, rt],\\n  },\\n  div: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011010\\"],\\n    display: [rs, rt],\\n  },\\n  \\"div.fmt\\": {\\n    format: [\\"010001\\", fmt, ft, fs, fd, \\"000011\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, ft],\\n  },\\n  divu: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011011\\"],\\n    display: [rs, rt],\\n  },\\n  dmfc1: {\\n    format: [\\"010001\\", \\"00001\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  dmult: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011100\\"],\\n    display: [rs, rt],\\n  },\\n  dmultu: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000011101\\"],\\n    display: [rs, rt],\\n  },\\n  dmtc1: {\\n    format: [\\"010001\\", \\"00101\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  dsll: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111000\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsll32: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111100\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsllv: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000010100\\"],\\n    display: [rd, rt, rs],\\n  },\\n  dsra: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111011\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsra32: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111111\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsrav: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000010111\\"],\\n    display: [rd, rt, rs],\\n  },\\n  dsrl: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111010\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsrl32: {\\n    format: [\\"00000000000\\", rt, rd, sa, \\"111110\\"],\\n    display: [rd, rt, sa],\\n  },\\n  dsrlv: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000010110\\"],\\n    display: [rd, rt, rs],\\n  },\\n  dsub: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000101110\\"],\\n    display: [rd, rs, rt],\\n  },\\n  dsubu: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000101111\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"floor.l.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001011\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"floor.w.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001111\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  j: {\\n    format: [\\"000010\\", uint26shift2],\\n    display: [uint26shift2],\\n  },\\n  jal: {\\n    format: [\\"000011\\", uint26shift2],\\n    display: [uint26shift2],\\n  },\\n  jalr: {\\n    format: [\\"000000\\", rs, \\"00000\\", [rd, \\"11111\\"], \\"00000\\", \\"001001\\"],\\n    display: [\\"rd?\\", rs],\\n  },\\n  jr: {\\n    format: [\\"000000\\", rs, \\"000000000000000\\", \\"001000\\"],\\n    display: [rs],\\n  },\\n  lb: {\\n    format: [\\"100000\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lbu: {\\n    format: [\\"100100\\", rs, rt, uint16],\\n    display: [rt, uint16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ld: {\\n    format: [\\"110111\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ldc1: {\\n    format: [\\"110101\\", rs, ft, int16],\\n    display: [ft, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ldc2: {\\n    format: [\\"110110\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ldl: {\\n    format: [\\"011010\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ldr: {\\n    format: [\\"011011\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ldxc1: {\\n    format: [\\"010011\\", rs, rt, \\"00000\\", fd, \\"000001\\"],\\n    display: [fd, rt, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lh: {\\n    format: [\\"100001\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lhu: {\\n    format: [\\"100101\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  ll: {\\n    format: [\\"110000\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lld: {\\n    format: [\\"110100\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lui: {\\n    format: [\\"001111\\", \\"00000\\", rt, uint16],\\n    display: [rt, uint16],\\n  },\\n  lw: {\\n    format: [\\"100011\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwc1: {\\n    format: [\\"110001\\", rs, ft, int16],\\n    display: [ft, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwc2: {\\n    format: [\\"110010\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwc3: {\\n    format: [\\"110011\\" ,rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwl: {\\n    format: [\\"100010\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwr: {\\n    format: [\\"100110\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwu: {\\n    format: [\\"100111\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  lwxc1: {\\n    format: [\\"010011\\", rs, rt, \\"00000\\", fd, \\"000000\\"],\\n    display: [fd, rt, \\"(\\", rs, \\")\\"],\\n  },\\n  \\"madd.fmt\\": {\\n    format: [\\"010011\\", fr, ft, fs, fd, \\"100\\", fmt3],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fr, fs, ft],\\n  },\\n  mfc1: {\\n    format: [\\"010001\\", \\"00000\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  mfhi: {\\n    format: [\\"000000\\", \\"0000000000\\", rd, \\"00000\\", \\"010000\\"],\\n    display: [rd],\\n  },\\n  mflo: {\\n    format: [\\"000000\\", \\"0000000000\\", rd, \\"00000\\", \\"010010\\"],\\n    display: [rd],\\n  },\\n  \\"mov.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"000110\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  movf: {\\n    format: [\\"000000\\", rs, cc, \\"00\\", rd, \\"00000\\", \\"000001\\"],\\n    display: [rd, rs, cc],\\n  },\\n  \\"movf.fmt\\": {\\n    format: [\\"010001\\", fmt, cc, \\"00\\", fs, fd, \\"010001\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, cc],\\n  },\\n  movn: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"001011\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"movn.fmt\\": {\\n    format: [\\"010001\\", fmt, rt, fs, fd, \\"010011\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, rt],\\n  },\\n  movt: {\\n    format: [\\"000000\\", rs, cc, \\"01\\", rd, \\"00000\\", \\"000001\\"],\\n    display: [rd, rs, cc],\\n  },\\n  \\"movt.fmt\\": {\\n    format: [\\"010001\\", fmt, cc, \\"01\\", fs, fd, \\"010001\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, cc],\\n  },\\n  movz: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"001010\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"movz.fmt\\": {\\n    format: [\\"010001\\", fmt, rt, fs, fd, \\"010010\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, rt],\\n  },\\n  \\"msub.fmt\\": {\\n    format: [\\"010011\\", fr, ft, fs, fd, \\"101\\", fmt3],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fr, fs, ft],\\n  },\\n  mtc1: {\\n    format: [\\"010001\\", \\"00100\\", rt, fs, \\"00000000000\\"],\\n    display: [rt, fs],\\n  },\\n  mthi: {\\n    format: [\\"000000\\", rs, \\"000000000000000\\", \\"010001\\"],\\n    display: [rs],\\n  },\\n  mtlo: {\\n    format: [\\"000000\\", rs, \\"000000000000000\\", \\"010011\\"],\\n    display: [rs],\\n  },\\n  \\"mul.fmt\\": {\\n    format: [\\"010001\\", fmt, ft, fs, fd, \\"000010\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, ft],\\n  },\\n  mult: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000\\", \\"011000\\"],\\n    display: [rs, rt],\\n  },\\n  multu: {\\n    format: [\\"000000\\", rs, rt, \\"0000000000\\", \\"011001\\"],\\n    display: [rs, rt],\\n  },\\n  \\"neg.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"000111\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"nmadd.fmt\\": {\\n    format: [\\"010011\\", fr, ft, fs, fd, \\"110\\", fmt3],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fr, fs, ft],\\n  },\\n  \\"nmsub.fmt\\": {\\n    format: [\\"010011\\", fr, ft, fs, fd, \\"111\\", fmt3],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fr, fs, ft],\\n  },\\n  nop: {\\n    format: [\\"00000000000000000000000000000000\\"],\\n    display: [],\\n  },\\n  nor: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"100111\\"],\\n    display: [rd, rs, rt],\\n  },\\n  or: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"100101\\"],\\n    display: [rd, rs, rt],\\n  },\\n  ori: {\\n    format: [\\"001101\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n  pref: {\\n    format: [\\"110011\\", rs, uint5, int16],\\n    display: [uint5, int16, \\"(\\", rs, \\")\\"], // hint, offset, base\\n  },\\n  prefx: {\\n    format: [\\"010011\\", rs, rt, uint5, \\"00000\\", \\"001111\\"],\\n    display: [uint5, rt, \\"(\\", rs, \\")\\"], // hint, index, base\\n  },\\n  \\"recip.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"010101\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"round.l.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001000\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"round.w.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001100\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"rsqrt.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"010110\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  sb: {\\n    format: [\\"101000\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sc: {\\n    format: [\\"111000\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  scd: {\\n    format: [\\"111100\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sd: {\\n    format: [\\"111111\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sdc1: {\\n    format: [\\"111101\\", rs, ft, int16],\\n    display: [ft, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sdc2: {\\n    format: [\\"111110\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sdl: {\\n    format: [\\"101100\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sdr: {\\n    format: [\\"101101\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sdxc1: {\\n    format: [\\"010011\\", rs, uint5, fs, \\"00000\\", \\"001001\\"],\\n    display: [fs, uint5, \\"(\\", rs, \\")\\"],\\n  },\\n  sh: {\\n    format: [\\"101001\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"], // offset\\n  },\\n  sll: {\\n    format: [\\"000000\\", \\"00000\\", rt, rd, sa, \\"000000\\"],\\n    display: [rd, rt, sa],\\n  },\\n  sllv: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"000100\\"],\\n    display: [rd, rt, rs],\\n  },\\n  slt: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"101010\\"],\\n    display: [rd, rs, rt],\\n  },\\n  slti: {\\n    format: [\\"001010\\", rs, rt, int16],\\n    display: [rt, rs, int16],\\n  },\\n  sltiu: {\\n    format: [\\"001011\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n  sltu: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"101011\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"sqrt.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"000100\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  sra: {\\n    format: [\\"000000\\", \\"00000\\", rt, rd, sa, \\"000011\\"],\\n    display: [rd, rt, sa],\\n  },\\n  srav: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"000111\\"],\\n    display: [rd, rt, rs],\\n  },\\n  srl: {\\n    format: [\\"000000\\", \\"00000\\", rt, rd, sa, \\"000010\\"],\\n    display: [rd, rt, sa],\\n  },\\n  srlv: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"000110\\"],\\n    display: [rd, rt, rs],\\n  },\\n  sub: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"100010\\"],\\n    display: [rd, rs, rt],\\n  },\\n  \\"sub.fmt\\": {\\n    format: [\\"010001\\", fmt, ft, fs, fd, \\"000001\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs, ft],\\n  },\\n  subu: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"100011\\"],\\n    display: [rd, rs, rt],\\n  },\\n  sw: {\\n    format: [\\"101011\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swc1: {\\n    format: [\\"111001\\", rs, ft, int16],\\n    display: [ft, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swc2: {\\n    format: [\\"111010\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swc3: {\\n    format: [\\"111011\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swl: {\\n    format: [\\"101010\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swr: {\\n    format: [\\"101110\\", rs, rt, int16],\\n    display: [rt, int16, \\"(\\", rs, \\")\\"],\\n  },\\n  swxc1: {\\n    format: [\\"010011\\", rs, uint5, fs, \\"00000\\", \\"001000\\"],\\n    display: [fs, uint5, \\"(\\", rs, \\")\\"],\\n  },\\n  sync: {\\n    format: [\\"000000\\", \\"000000000000000\\", \\"00000\\", \\"001111\\"],\\n    display: [],\\n  },\\n  syscall: {\\n    format: [\\"000000\\", [uint20, \\"00000000000000000000\\"], \\"001100\\"],\\n    display: [],\\n  },\\n  teq: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110100\\"],\\n    display: [rs, rt],\\n  },\\n  teqi: {\\n    format: [\\"000001\\", rs, \\"01100\\", int16],\\n    display: [rs, int16],\\n  },\\n  tge: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110000\\"],\\n    display: [rs, rt],\\n  },\\n  tgei: {\\n    format: [\\"000001\\", rs, \\"01000\\", int16],\\n    display: [rs, int16],\\n  },\\n  tgeiu: {\\n    format: [\\"000001\\", rs, \\"01001\\", uint16],\\n    display: [rs, uint16],\\n  },\\n  tgeu: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110001\\"],\\n    display: [rs, rt],\\n  },\\n  tlt: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110010\\"],\\n    display: [rs, rt],\\n  },\\n  tlti: {\\n    format: [\\"000001\\", rs, \\"01010\\", int16],\\n    display: [rs, int16],\\n  },\\n  tltiu: {\\n    format: [\\"000001\\", rs, \\"01011\\", uint16],\\n    display: [rs, uint16],\\n  },\\n  tltu: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110011\\"],\\n    display: [rs, rt],\\n  },\\n  tne: {\\n    format: [\\"000000\\", rs, rt, uint10, \\"110110\\"],\\n    display: [rs, rt],\\n  },\\n  tnei: {\\n    format: [\\"000001\\", rs, \\"01110\\", int16],\\n    display: [rs, int16],\\n  },\\n  \\"trunc.l.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001001\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  \\"trunc.w.fmt\\": {\\n    format: [\\"010001\\", fmt, \\"00000\\", fs, fd, \\"001101\\"],\\n    fmts: [\\"S\\", \\"D\\"],\\n    display: [fd, fs],\\n  },\\n  xor: {\\n    format: [\\"000000\\", rs, rt, rd, \\"00000\\", \\"100110\\"],\\n    display: [rd, rs, rt],\\n  },\\n  xori: {\\n    format: [\\"001110\\", rs, rt, uint16],\\n    display: [rt, rs, uint16],\\n  },\\n};\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/opcodes.js?");\n\n/***/ }),\n\n/***/ "./src/parse.js":\n/*!**********************!*\\\n  !*** ./src/parse.js ***!\n  \\**********************/\n/*! exports provided: parse */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"parse\\", function() { return parse; });\\n/* harmony import */ var _opcodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./opcodes */ \\"./src/opcodes.js\\");\\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./immediates */ \\"./src/immediates.js\\");\\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./regs */ \\"./src/regs.js\\");\\n/* harmony import */ var _regex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./regex */ \\"./src/regex.js\\");\\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bitstrings */ \\"./src/bitstrings.js\\");\\n\\n\\n\\n\\n\\n\\n/**\\n * Parses a string MIPS instruction, returning numeric machine code.\\n *\\n * With the `intermediate` option, this can also be used as a convenient base\\n * for an assembler. The object output with `intermediate` can be manipulated\\n * prior to calling `parse` with it again.\\n * @param {String|Array|Object} value MIPS instruction, or intermediate object format.\\n * @param {Object} opts Behavior options\\n * @param {Boolean} opts.intermediate: Output an object intermediate format instead of a number\\n * @returns {Number|Array|Object} Returns a numeric representation of the given\\n * MIPS instruction string.\\n * If multiple values are given (array) then multiple values are returned.\\n * When the `intermediate` option is passed, the return type is an object.\\n */\\nfunction parse(value, opts) {\\n  opts = _getFinalOpts(opts);\\n\\n  if (Array.isArray(value)) {\\n    return value.map(s => _parse(s, opts));\\n  }\\n  if (typeof value === \\"object\\") {\\n    return _parse(value, opts);\\n  }\\n  if (typeof value === \\"string\\") {\\n    const values = value.split(/\\\\r?\\\\n/).filter(v => !!(v.trim()));\\n    if (values.length === 1)\\n      return _parse(values[0], opts);\\n    else\\n      return values.map(s => _parse(s, opts));\\n  }\\n\\n  throw new Error(\\"Unexpected input to parse. Pass a string or array of strings.\\");\\n}\\n\\nfunction _getFinalOpts(givenOpts) {\\n  return Object.assign({\\n    intermediate: false,\\n  }, givenOpts);\\n}\\n\\nfunction _parse(value, opts) {\\n  let opcode, opcodeObj, values;\\n  if (typeof value === \\"string\\") {\\n    opcode = _regex__WEBPACK_IMPORTED_MODULE_3__[\\"getOpcode\\"](value);\\n    if (!opcode)\\n      throw new Error(`Could not parse opcode from ${value}`);\\n\\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getOpcodeDetails\\"])(opcode);\\n    if (!opcodeObj)\\n      throw new Error(`Opcode ${opcode} was not recognized`);\\n\\n    values = _parseValues(opcode, opcodeObj, value);\\n  }\\n  else if (typeof value === \\"object\\") {\\n    opcode = _regex__WEBPACK_IMPORTED_MODULE_3__[\\"getOpcode\\"](value.op);\\n    if (!opcode)\\n      throw new Error(\\"Object input to parse did not contain \'op\'\\");\\n\\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getOpcodeDetails\\"])(opcode);\\n    if (!opcodeObj)\\n      throw new Error(`Opcode ${opcode} was not recognized`);\\n\\n    values = value;\\n  }\\n\\n  if (opts.intermediate)\\n    return values;\\n\\n  return bitsFromFormat(opcodeObj.format, values);\\n}\\n\\nfunction _parseValues(opcode, opcodeObj, value) {\\n  let regex = _regex__WEBPACK_IMPORTED_MODULE_3__[\\"makeRegexForOpcode\\"](opcode, opcodeObj);\\n  let match = regex.exec(value);\\n  if (!match)\\n    throw new Error(`Could not parse instruction: ${value}`);\\n\\n  let values = {\\n    op: opcode\\n  };\\n\\n  if (opcode.indexOf(\\".fmt\\") !== -1 || opcode.indexOf(\\".cond\\") !== -1) {\\n    determineOpcodeValues(match[1], opcode, opcodeObj.fmts, opcodeObj.format, values);\\n  }\\n\\n  const display = opcodeObj.display;\\n  let matchIndex = 2; // 0 is whole match, 1 is opcode - skip both\\n  for (let i = 0; i < display.length; i++, matchIndex++) {\\n    const parsedVal = match[matchIndex];\\n    let displayEntry = display[i];\\n\\n    const optional = displayEntry.endsWith(\\"?\\");\\n    if (optional) {\\n      displayEntry = displayEntry.replace(\\"?\\", \\"\\");\\n    }\\n\\n    switch (displayEntry) {\\n      case \\"(\\":\\n      case \\")\\":\\n        matchIndex--; // Eh\\n        continue;\\n\\n      case \\"rs\\":\\n      case \\"rd\\":\\n      case \\"rt\\": {\\n        const tryReg = Object(_regs__WEBPACK_IMPORTED_MODULE_2__[\\"getRegBits\\"])(parsedVal);\\n        if (tryReg === undefined) {\\n          if (optional)\\n            continue;\\n\\n          throw new Error(`Unrecognized ${displayEntry} register ${parsedVal}`);\\n        }\\n        values[displayEntry] = tryReg;\\n        continue;\\n      }\\n\\n      case \\"fs\\":\\n      case \\"ft\\":\\n      case \\"fd\\":\\n      case \\"fr\\":\\n        values[displayEntry] = parseInt(parsedVal);\\n        if (isNaN(values[displayEntry]))\\n          throw new Error(`Unrecognized ${displayEntry} register ${parsedVal}`);\\n        continue;\\n    }\\n\\n    const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_1__[\\"getImmFormatDetails\\"])(displayEntry);\\n    if (immDetails) {\\n      let value;\\n      const immPieces = [match[matchIndex], match[matchIndex + 1], match[matchIndex + 2]];\\n\\n      if (!optional || immPieces[2]) {\\n        value = Object(_immediates__WEBPACK_IMPORTED_MODULE_1__[\\"parseImmediate\\"])(immPieces, immDetails.bits, immDetails.signed, immDetails.shift);\\n        if (isNaN(value)) {\\n          throw new Error(`Could not parse immediate ${immPieces.join(\\"\\")}`);\\n        }\\n        values[displayEntry] = value;\\n      }\\n\\n      matchIndex += 2;\\n\\n      continue;\\n    }\\n\\n    throw new Error(`Unrecognized opcode display entry ${displayEntry}`);\\n  }\\n\\n  return values;\\n}\\n\\nfunction bitsFromFormat(format, values) {\\n  let output = 0;\\n  let bitOffset = 0;\\n  for (let i = 0; i < format.length; i++) {\\n    let writeResult;\\n    let piece = format[i];\\n    let bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getValueBitLength\\"])(Array.isArray(piece) ? piece[0] : piece);\\n    output = (output << bitLength) >>> 0;\\n    if (Array.isArray(piece)) {\\n      for (let j = 0; j < piece.length; j++) {\\n        writeResult = writeBitsForPiece(piece[j], output, values);\\n        if (writeResult.wrote) {\\n          output = writeResult.output;\\n          break; // j\\n        }\\n      }\\n    }\\n    else {\\n      writeResult = writeBitsForPiece(piece, output, values);\\n      if (writeResult.wrote) {\\n        output = writeResult.output;\\n      }\\n    }\\n\\n    bitOffset += bitLength;\\n  }\\n\\n  if (bitOffset != 32)\\n    throw new Error(\\"Incorrect number of bits written for format \\" + format);\\n\\n  return output;\\n}\\n\\nfunction writeBitsForPiece(piece, output, values) {\\n  let wrote = false;\\n  if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__[\\"isBinaryLiteral\\"])(piece)) {\\n    output |= Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__[\\"makeBitMaskFromString\\"])(piece);\\n    wrote = true;\\n  }\\n  else if (values[piece] !== undefined) {\\n    let value = values[piece] & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_4__[\\"makeBitMask\\"])(Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getValueBitLength\\"])(piece));\\n    wrote = true;\\n    output |= value;\\n  }\\n\\n  return {\\n    wrote: wrote,\\n    output: output >>> 0,\\n  };\\n}\\n\\nfunction determineOpcodeValues(givenOpcode, genericOpcode, allowedFormats, format, values) {\\n  const givenPieces = givenOpcode.split(\\".\\");\\n  const genericPieces = genericOpcode.split(\\".\\");\\n  if (givenPieces.length !== genericPieces.length)\\n    throw new Error(`Given opcode ${givenOpcode} does not have all pieces (${genericOpcode})`);\\n\\n  for (let i = 0; i < genericPieces.length; i++) {\\n    const genericPiece = genericPieces[i];\\n\\n    if (genericPiece === \\"fmt\\" || genericPiece === \\"ftm3\\") {\\n      if (allowedFormats.indexOf(givenPieces[i].toUpperCase()) === -1)\\n        throw new Error(`Format ${givenPieces[i]} is not allowed for ${genericPiece}. Allowed values are ${allowedFormats}`);\\n\\n      if (genericPiece === \\"fmt\\")\\n        values[\\"fmt\\"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__[\\"getFmtBits\\"])(givenPieces[i]);\\n      else if (genericPiece === \\"fmt3\\")\\n        values[\\"fmt3\\"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__[\\"getFmt3Bits\\"])(givenPieces[i]);\\n    }\\n\\n    if (genericPiece === \\"cond\\")\\n      values[\\"cond\\"] = Object(_regs__WEBPACK_IMPORTED_MODULE_2__[\\"getCondBits\\"])(givenPieces[i]);\\n  }\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/parse.js?");\n\n/***/ }),\n\n/***/ "./src/print.js":\n/*!**********************!*\\\n  !*** ./src/print.js ***!\n  \\**********************/\n/*! exports provided: print */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"print\\", function() { return print; });\\n/* harmony import */ var _opcodes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./opcodes */ \\"./src/opcodes.js\\");\\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./regs */ \\"./src/regs.js\\");\\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./immediates */ \\"./src/immediates.js\\");\\n/* harmony import */ var _bitstrings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bitstrings */ \\"./src/bitstrings.js\\");\\n\\n\\n\\n\\n\\n/**\\n * Prints a string representation of a MIPS instruction.\\n *\\n * With the `intermediate` option, this can also be used as a convenient base\\n * for a disassembler. The object output with `intermediate` can be manipulated\\n * prior to calling `print` with it again.\\n * @param {Number|Array|ArrayBuffer|DataView|Object} inst MIPS instruction, or intermediate object format.\\n * @param {Object} opts Behavior options\\n * @param {String} opts.casing \\"toUpperCase\\" (default), \\"toLowerCase\\"\\n * @param {Boolean} opts.commas True to separate values by commas\\n * @param {Boolean} opts.include$ True to prefix registers with dollar sign\\n * @param {Boolean} opts.intermediate: Output an object intermediate format instead of a string\\n * @param {Number} opts.numBase Number format. 16 (hex, default), 10 (decimal)\\n * @returns {String|Array|Object} Returns a string representation of the given\\n * MIPS instruction code(s).\\n * If multiple values are given (array) then multiple values are returned.\\n * When the `intermediate` option is passed, the return type is an object.\\n */\\nfunction print(inst, opts) {\\n  opts = _getFinalOpts(opts);\\n\\n  if (Array.isArray(inst))\\n    return inst.map(i => _print(i, opts));\\n\\n  const isArrayBuffer = inst instanceof ArrayBuffer;\\n  if (isArrayBuffer || inst instanceof DataView) {\\n    const dataView = isArrayBuffer ? new DataView(inst) : inst;\\n    const result = [];\\n    for (let i = 0; i < dataView.byteLength; i += 4) {\\n      result.push(_print(dataView.getUint32(i), opts));\\n    }\\n    return result;\\n  }\\n\\n  const inputType = typeof inst;\\n  if (inputType === \\"number\\" || inputType === \\"object\\")\\n    return _print(inst, opts);\\n\\n  throw new Error(\\"Unexpected input to print.\\");\\n}\\n\\nfunction _getFinalOpts(givenOpts) {\\n  return Object.assign({\\n    casing: \\"toUpperCase\\",\\n    commas: false,\\n    include$: false,\\n    intermediate: false,\\n    numBase: 16\\n  }, givenOpts);\\n}\\n\\nfunction _print(inst, opts) {\\n  let opcodeObj, opName, values;\\n  if (typeof inst === \\"number\\") {\\n    opName = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"findMatch\\"])(inst);\\n    if (!opName)\\n      throw new Error(\\"Unrecognized instruction\\");\\n\\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getOpcodeDetails\\"])(opName);\\n\\n    values = _extractValues(inst, opcodeObj.format);\\n    values.op = opName;\\n  }\\n  else if (typeof inst === \\"object\\") {\\n    if (!inst.op)\\n      throw new Error(\\"Instruction object did not contain op\\");\\n\\n    opcodeObj = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getOpcodeDetails\\"])(inst.op);\\n\\n    values = inst;\\n  }\\n  else\\n    throw new Error(`Unexpected value ${inst}`);\\n\\n  if (!opcodeObj)\\n    throw new Error(\\"Invalid opcode\\");\\n\\n  if (opts.intermediate)\\n    return values;\\n\\n  return _printValues(values, opcodeObj, opts);\\n}\\n\\nfunction _printValues(values, opcodeObj, opts) {\\n  let result = _formatOpcode(values, opts);\\n\\n  function _getRegName(displayEntry) {\\n    switch (displayEntry) {\\n      case \\"rs\\":\\n      case \\"rt\\":\\n      case \\"rd\\":\\n        return Object(_regs__WEBPACK_IMPORTED_MODULE_1__[\\"getRegName\\"])(values[displayEntry]);\\n\\n      case \\"fs\\":\\n      case \\"ft\\":\\n      case \\"fd\\":\\n        return Object(_regs__WEBPACK_IMPORTED_MODULE_1__[\\"getFloatRegName\\"])(values[displayEntry]);\\n    }\\n  }\\n\\n  const display = opcodeObj.display;\\n  for (let i = 0; i < display.length; i++) {\\n    let displayEntry = display[i];\\n\\n    if (displayEntry.endsWith(\\"?\\")) {\\n      displayEntry = displayEntry.replace(\\"?\\", \\"\\");\\n      if (values[displayEntry] === undefined)\\n        continue; // Optional value, not set.\\n    }\\n\\n    let value = values[displayEntry];\\n    if (value === undefined && displayEntry !== \\"(\\" && displayEntry !== \\")\\") {\\n      throw new Error(`Expected ${displayEntry} value, got undefined`);\\n    }\\n\\n    let addComma = opts.commas;\\n\\n    switch (displayEntry) {\\n      case \\"rs\\":\\n      case \\"rt\\":\\n      case \\"rd\\":\\n      case \\"fs\\":\\n      case \\"ft\\":\\n      case \\"fd\\":\\n        if (!result.endsWith(\\"(\\"))\\n          result += \\" \\";\\n        result += _formatReg(_getRegName(displayEntry), opts);\\n        break;\\n\\n      case \\"(\\":\\n      case \\")\\":\\n        addComma = false;\\n        if (result.endsWith(\\",\\"))\\n          result = result.slice(0, -1); // Lop off comma, since we are involved in a parenthesis open/close\\n\\n        result += displayEntry;\\n        break;\\n    }\\n\\n    const immDetails = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__[\\"getImmFormatDetails\\"])(displayEntry);\\n    if (immDetails) {\\n      if (!result.endsWith(\\"(\\"))\\n        result += \\" \\";\\n\\n      if (immDetails.signed && immDetails.bits === 16) {\\n        value = Object(_immediates__WEBPACK_IMPORTED_MODULE_2__[\\"makeInt16\\"])(value);\\n      }\\n      if (immDetails.shift) {\\n        value = value << immDetails.shift;\\n      }\\n\\n      result += _formatNumber(value, opts);\\n    }\\n\\n    if (addComma && (i !== display.length - 1) && !result.endsWith(\\",\\")) {\\n      result += \\",\\";\\n    }\\n  }\\n\\n  return result.trim();\\n}\\n\\nfunction _extractValues(inst, format) {\\n  let values = {};\\n  for (let i = format.length - 1; i >= 0; i--) {\\n    let value, bitLength;\\n    let piece = format[i];\\n    if (Array.isArray(piece)) {\\n      for (let j = piece.length - 1; j >= 0; j--) {\\n        bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getValueBitLength\\"])(piece[j]);\\n        value = inst & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__[\\"makeBitMask\\"])(bitLength);\\n\\n        if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__[\\"isBinaryLiteral\\"])(piece[j])) {\\n          if (piece[j] === Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__[\\"padBitString\\"])(value.toString(2), bitLength)) {\\n            piece = piece[j];\\n            break;\\n          }\\n        }\\n        else {\\n          piece = piece[j];\\n          break;\\n        }\\n      }\\n    }\\n    else {\\n      bitLength = Object(_opcodes__WEBPACK_IMPORTED_MODULE_0__[\\"getValueBitLength\\"])(piece);\\n      value = inst & Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__[\\"makeBitMask\\"])(bitLength);\\n    }\\n\\n    if (Object(_bitstrings__WEBPACK_IMPORTED_MODULE_3__[\\"isBinaryLiteral\\"])(piece)) {\\n      inst >>>= bitLength;\\n      continue;\\n    }\\n\\n    values[piece] = value;\\n\\n    inst >>>= bitLength;\\n  }\\n\\n  return values;\\n}\\n\\nfunction _formatNumber(num, opts) {\\n  if (num === 0)\\n    return num.toString(opts.numBase);\\n\\n  let value = \\"\\";\\n  if (num < 0)\\n    value += \\"-\\";\\n\\n  if (opts.numBase === 16)\\n    value += \\"0x\\";\\n  else if (opts.numBase === 8)\\n    value += \\"0o\\";\\n  else if (opts.numBase === 2)\\n    value += \\"0b\\";\\n\\n  value += _applyCasing(Math.abs(num).toString(opts.numBase), opts.casing);\\n  return value;\\n}\\n\\nfunction _formatReg(regStr, opts) {\\n  let value = \\"\\";\\n  if (opts.include$)\\n    value += \\"$\\";\\n  value += _applyCasing(regStr, opts.casing);\\n  return value;\\n}\\n\\nfunction _formatOpcode(values, opts) {\\n  const pieces = values.op.split(\\".\\");\\n  for (let i = 0; i < pieces.length; i++) {\\n    if (pieces[i] === \\"fmt\\") {\\n      if (values.hasOwnProperty(\\"fmt3\\"))\\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__[\\"getFmt3Name\\"])(values[\\"fmt3\\"]);\\n      else if (values.hasOwnProperty(\\"fmt\\"))\\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__[\\"getFmtName\\"])(values[\\"fmt\\"]);\\n      else\\n        throw new Error(\\"Format value not available\\");\\n    }\\n    else if (pieces[i] === \\"cond\\") {\\n      if (values.hasOwnProperty(\\"cond\\"))\\n        pieces[i] = Object(_regs__WEBPACK_IMPORTED_MODULE_1__[\\"getCondName\\"])(values[\\"cond\\"]);\\n      else\\n        throw new Error(\\"Condition value not available\\");\\n    }\\n  }\\n  let opcode = pieces.join(\\".\\");\\n\\n  return _applyCasing(opcode, opts.casing);\\n}\\n\\nfunction _applyCasing(value, casing) {\\n  switch (casing) {\\n    case \\"toLowerCase\\":\\n      return value.toLowerCase();\\n\\n    case \\"toUpperCase\\":\\n    default:\\n      return value.toUpperCase();\\n  }\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/print.js?");\n\n/***/ }),\n\n/***/ "./src/regex.js":\n/*!**********************!*\\\n  !*** ./src/regex.js ***!\n  \\**********************/\n/*! exports provided: getOpcode, makeRegexForOpcode, isReg, isFloatReg */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getOpcode\\", function() { return getOpcode; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"makeRegexForOpcode\\", function() { return makeRegexForOpcode; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"isReg\\", function() { return isReg; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"isFloatReg\\", function() { return isFloatReg; });\\n/* harmony import */ var _regs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regs */ \\"./src/regs.js\\");\\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./immediates */ \\"./src/immediates.js\\");\\n\\n\\n\\nconst opRegex = \\"([A-Za-z0-3.]+)\\";\\nconst immRegex = \\"(-)?0?([xbo]?)([A-Fa-f0-9]+)\\";\\nconst regRegex = \\"\\\\\\\\$?(\\\\\\\\w+)\\";\\nconst floatRegRegex = \\"\\\\\\\\$?[Ff]([0-9]+)\\";\\n\\nconst opcodeRegex = new RegExp(\\"^\\\\\\\\s*\\" + opRegex);\\n\\nconst _regexCache = Object.create(null);\\n\\n// Gets the op string from a given entire instruction.\\n// This is a general form (.fmt rather than .S, .D, etc.)\\nfunction getOpcode(str) {\\n  const match = opcodeRegex.exec(str);\\n  if (match) {\\n    const pieces = match[1].split(\\".\\"); // Could be .fmt, .cond.fmt, etc\\n    if (pieces.length === 1)\\n      return pieces[0].toLowerCase();\\n\\n    // Loop from the end, as the end has the .fmt for tricky things like .D.W\\n    let result = \\"\\";\\n    let foundFmt = false;\\n    let foundCond = false;\\n    for (let i = pieces.length - 1; i > 0; i--) {\\n      let piece = pieces[i];\\n      if (!foundFmt) {\\n        if (piece === \\"fmt\\" || Object(_regs__WEBPACK_IMPORTED_MODULE_0__[\\"isFmtString\\"])(piece)) {\\n          foundFmt = true;\\n          piece = \\"fmt\\";\\n        }\\n      }\\n\\n      if (!foundCond) {\\n        if (Object(_regs__WEBPACK_IMPORTED_MODULE_0__[\\"isCondString\\"])(piece)) {\\n          foundCond = true;\\n          piece = \\"cond\\";\\n        }\\n      }\\n\\n      result = \\".\\" + piece + result;\\n    }\\n\\n    return (pieces[0] + result).toLowerCase();\\n  }\\n  return null;\\n}\\n\\nfunction makeRegexForOpcode(opcode, opcodeObj) {\\n  if (_regexCache[opcode]) {\\n    return _regexCache[opcode];\\n  }\\n\\n  const parts = [opRegex];\\n  const display = opcodeObj.display;\\n  for (let i = 0; i < display.length; i++) {\\n    const part = display[i];\\n    const optional = part.endsWith(\\"?\\");\\n\\n    let regexPart = \\"\\";\\n    if (optional)\\n      regexPart += \\"(?:[,\\\\\\\\s]+\\";\\n\\n    if (display[i + 1] === \\"(\\") {\\n      if (optional)\\n        throw new Error(\\"Not prepared to generate optional regex with parenthesis\\");\\n\\n      if (display[i + 3] !== \\")\\")\\n        throw new Error(\\"Not prepared to generate regex for multiple values in parenthesis\\"); // Or no closing paren\\n\\n      regexPart += makeParenthesisRegex(getRegexForPart(part), getRegexForPart(display[i + 2]));\\n      i = i + 3;\\n    }\\n    else {\\n      regexPart += getRegexForPart(part);\\n    }\\n\\n    if (optional)\\n      regexPart += \\")?\\";\\n\\n    parts.push(regexPart);\\n  }\\n\\n  let regexStr =\\n    \\"^\\\\\\\\s*\\" +\\n    parts.reduce((str, next, index) => {\\n      if (index === 0 || partIsOptional(next))\\n        return str + next;\\n\\n      return str + \\"[,\\\\\\\\s]+\\" + next;\\n    }, \\"\\") +\\n    \\"\\\\\\\\s*$\\";\\n\\n  const regex = new RegExp(regexStr);\\n  _regexCache[opcode] = regex;\\n  return regex;\\n}\\n\\nfunction getRegexForPart(part) {\\n  if (isReg(part))\\n    return regRegex;\\n  if (isFloatReg(part))\\n    return floatRegRegex;\\n\\n  if (Object(_immediates__WEBPACK_IMPORTED_MODULE_1__[\\"getImmFormatDetails\\"])(part))\\n    return immRegex;\\n\\n  throw new Error(`Unrecognized display entry ${part}`);\\n}\\n\\nfunction makeParenthesisRegex(regex1, regex2) {\\n  return regex1 + \\"\\\\\\\\s*\\" + \\"\\\\\\\\(?\\" + regex2 + \\"\\\\\\\\)?\\";\\n}\\n\\nfunction partIsOptional(partStr) {\\n  return partStr.startsWith(\\"(?:\\");\\n}\\n\\nfunction isReg(entry) {\\n  if (!entry)\\n    return false;\\n\\n  switch (entry.substr(0, 2)) {\\n    case \\"rs\\":\\n    case \\"rt\\":\\n    case \\"rd\\":\\n      return true;\\n  }\\n  return false;\\n}\\n\\nfunction isFloatReg(entry) {\\n  if (!entry)\\n    return false;\\n\\n  switch (entry.substr(0, 2)) {\\n    case \\"fs\\":\\n    case \\"ft\\":\\n    case \\"fd\\":\\n      return true;\\n  }\\n  return false;\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/regex.js?");\n\n/***/ }),\n\n/***/ "./src/regs.js":\n/*!*********************!*\\\n  !*** ./src/regs.js ***!\n  \\*********************/\n/*! exports provided: getRegBits, getRegName, getFloatRegName, getFmtBits, getFmtName, getFmt3Bits, getFmt3Name, isFmtString, getCondBits, getCondName, isCondString */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\neval("__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getRegBits\\", function() { return getRegBits; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getRegName\\", function() { return getRegName; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getFloatRegName\\", function() { return getFloatRegName; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getFmtBits\\", function() { return getFmtBits; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getFmtName\\", function() { return getFmtName; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getFmt3Bits\\", function() { return getFmt3Bits; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getFmt3Name\\", function() { return getFmt3Name; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"isFmtString\\", function() { return isFmtString; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getCondBits\\", function() { return getCondBits; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"getCondName\\", function() { return getCondName; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \\"isCondString\\", function() { return isCondString; });\\nconst regs = {\\n  r0: 0,\\n  zero: 0,\\n  at: 1,\\n  v0: 2,\\n  v1: 3,\\n  a0: 4,\\n  a1: 5,\\n  a2: 6,\\n  a3: 7,\\n  t0: 8,\\n  t1: 9,\\n  t2: 10,\\n  t3: 11,\\n  t4: 12,\\n  t5: 13,\\n  t6: 14,\\n  t7: 15,\\n  s0: 16,\\n  s1: 17,\\n  s2: 18,\\n  s3: 19,\\n  s4: 20,\\n  s5: 21,\\n  s6: 22,\\n  s7: 23,\\n  t8: 24,\\n  t9: 25,\\n  k0: 26,\\n  k1: 27,\\n  gp: 28,\\n  sp: 29,\\n  fp: 30,\\n  ra: 31\\n};\\n\\nfunction getRegBits(reg) {\\n  if (!reg)\\n    return undefined;\\n  return regs[reg.toLowerCase()];\\n}\\n\\nfunction getRegName(bits) {\\n  for (let name in regs) {\\n    if (regs[name] === bits)\\n      return name;\\n  }\\n  return \\"\\";\\n}\\n\\nfunction getFloatRegName(bits) {\\n  if (typeof bits !== \\"number\\")\\n    throw new Error(\\"getFloatRegName encountered non-number\\");\\n\\n  return \\"F\\" + bits;\\n}\\n\\nconst fmts = {\\n  S: 16,\\n  D: 17,\\n  W: 20,\\n  L: 21,\\n};\\n\\nfunction getFmtBits(fmtStr) {\\n  return fmts[fmtStr.toUpperCase()];\\n}\\n\\nfunction getFmtName(bits) {\\n  for (let name in fmts) {\\n    if (fmts[name] === bits)\\n      return name;\\n  }\\n  return \\"\\";\\n}\\n\\nconst fmt3s = {\\n  S: 0,\\n  D: 1,\\n  W: 4,\\n  L: 5,\\n};\\n\\nfunction getFmt3Bits(fmtStr) {\\n  return fmt3s[fmtStr.toUpperCase()];\\n}\\n\\nfunction getFmt3Name(bits) {\\n  for (let name in fmt3s) {\\n    if (fmt3s[name] === bits)\\n      return name;\\n  }\\n  return \\"\\";\\n}\\n\\nfunction isFmtString(fmtStr) {\\n  return fmts.hasOwnProperty(fmtStr.toUpperCase()) || fmt3s.hasOwnProperty(fmtStr.toUpperCase());\\n}\\n\\nconst conds = {\\n  F: 0,\\n  UN: 1,\\n  EQ: 2,\\n  UEQ: 3,\\n  OLT: 4,\\n  ULT: 5,\\n  OLE: 6,\\n  ULE: 7,\\n  SF: 8,\\n  NGLE: 9,\\n  SEQ: 10,\\n  NGL: 11,\\n  LT: 12,\\n  NGE: 13,\\n  LE: 14,\\n  NGT: 15,\\n};\\n\\nfunction getCondBits(condStr) {\\n  return conds[condStr.toUpperCase()];\\n}\\n\\nfunction getCondName(bits) {\\n  for (let name in conds) {\\n    if (conds[name] === bits)\\n      return name;\\n  }\\n  return \\"\\";\\n}\\n\\nfunction isCondString(condStr) {\\n  return conds.hasOwnProperty(condStr.toUpperCase());\\n}\\n\\n\\n//# sourceURL=webpack://MIPSInst/./src/regs.js?");\n\n/***/ })\n\n/******/ });\n});\n\n//# sourceURL=webpack://MIPSAssem/./node_modules/mips-inst/dist/mipsinst.js?')},"./src/assembler.ts":
/*!**************************!*\
  !*** ./src/assembler.ts ***!
  \**************************/
/*! exports provided: assemble */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "assemble", function() { return assemble; });\n/* harmony import */ var mips_inst__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mips-inst */ "./node_modules/mips-inst/dist/mipsinst.js");\n/* harmony import */ var mips_inst__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mips_inst__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n/* harmony import */ var _directives__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directives */ "./src/directives.ts");\n/* harmony import */ var _labels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labels */ "./src/labels.ts");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./symbols */ "./src/symbols.ts");\n/* harmony import */ var _expressions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./expressions */ "./src/expressions.ts");\n/* harmony import */ var _conditionals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./conditionals */ "./src/conditionals.ts");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./state */ "./src/state.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");\n\n\n\n\n\n\n\n\n\n/**\n * Assembles the given input instructions.\n * @param input\n * @param opts\n */\nfunction assemble(input, opts) {\n    opts = opts || {};\n    var arr = normalizeInput(input);\n    var state = Object(_state__WEBPACK_IMPORTED_MODULE_7__["makeNewAssemblerState"])(opts);\n    var outStrs = [];\n    // First pass, calculate label positions.\n    // Not using `arr.map` because `arr` changes mid-processing.\n    var arrNew = [];\n    for (var i = 0; i < arr.length; i++) {\n        var line = arr[i];\n        state.line = line;\n        if (shouldSkipCurrentInstruction(state)) {\n            if (line) {\n                arrNew.push(line);\n            }\n            continue;\n        }\n        line = processLabelsOnCurrentLine(state);\n        var directive = Object(_directives__WEBPACK_IMPORTED_MODULE_2__["getDirectiveToRun"])(state);\n        if (directive) {\n            Object(_expressions__WEBPACK_IMPORTED_MODULE_5__["parseExpressionsOnCurrentLine"])(state);\n            Object(_directives__WEBPACK_IMPORTED_MODULE_2__["handleDirective"])(state, directive);\n            line = state.line; // Directive may change the line.\n        }\n        else {\n            // If !line, then only labels were on the line.\n            if (line) {\n                state.outIndex += 4;\n            }\n        }\n        if (line) {\n            arrNew.push(line);\n        }\n        if ("linesToInsert" in state && state.linesToInsert) {\n            var linesToInsert = normalizeInput(state.linesToInsert);\n            arr.splice.apply(arr, [i + 1, 0].concat(linesToInsert));\n            state.linesToInsert = null;\n        }\n    }\n    ;\n    arr = arrNew;\n    state.buffer = opts.buffer || new ArrayBuffer(state.outIndex);\n    state.dataView = new DataView(state.buffer);\n    state.memPos = 0;\n    state.outIndex = 0;\n    state.currentPass = _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].secondPass;\n    // Second pass, assemble!\n    arr.forEach(function (line) {\n        state.line = line;\n        state.lineExpressions = [];\n        state.evaluatedLineExpressions = [];\n        if (shouldSkipCurrentInstruction(state))\n            return line;\n        var directive = Object(_directives__WEBPACK_IMPORTED_MODULE_2__["getDirectiveToRun"])(state);\n        if (directive) {\n            Object(_expressions__WEBPACK_IMPORTED_MODULE_5__["evaluateExpressionsOnCurrentLine"])(state);\n            Object(_directives__WEBPACK_IMPORTED_MODULE_2__["handleDirective"])(state, directive);\n            return;\n        }\n        // Start a new "area" if we hit a global symbol boundary.\n        var globalSymbol = Object(_symbols__WEBPACK_IMPORTED_MODULE_4__["getSymbolByValue"])(state, state.memPos + state.outIndex);\n        if (globalSymbol !== null) {\n            state.currentLabel = globalSymbol;\n        }\n        // Apply any built-in functions, symbols.\n        line = state.line = Object(_expressions__WEBPACK_IMPORTED_MODULE_5__["evaluateExpressionsOnCurrentLine"])(state);\n        if (opts.text)\n            outStrs.push(line);\n        // At this point, we should be able to parse the instruction.\n        var inst;\n        try {\n            inst = Object(mips_inst__WEBPACK_IMPORTED_MODULE_0__["parse"])(line);\n        }\n        catch (e) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_8__["throwError"])(e, state);\n            return;\n        }\n        state.dataView.setUint32(state.outIndex, inst);\n        state.outIndex += 4;\n    });\n    if (state.ifElseStack.length) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_8__["throwError"])("An if directive was used without an endif directive", state);\n    }\n    if (state.staticSymbolIndices[0] !== 0) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_8__["throwError"])("A beginfile directive was used without an endfile directive", state);\n    }\n    if (opts.text)\n        return outStrs;\n    return state.buffer;\n}\n/** Tests if the current state deems we shouldn\'t execute the current line. */\nfunction shouldSkipCurrentInstruction(state) {\n    if (state.ifElseStack.length) {\n        var ifElseState = state.ifElseStack[state.ifElseStack.length - 1];\n        return !(ifElseState & _conditionals__WEBPACK_IMPORTED_MODULE_6__["IfElseStateFlags"].ExecutingBlock)\n            && !Object(_directives__WEBPACK_IMPORTED_MODULE_2__["isConditionalDirective"])(state.line);\n    }\n    return false;\n}\nfunction processLabelsOnCurrentLine(state) {\n    var parsedLabel;\n    while (parsedLabel = Object(_labels__WEBPACK_IMPORTED_MODULE_3__["parseGlobalLabel"])(state)) {\n        state.line = state.line.substr(parsedLabel.length + 1).trim();\n    }\n    return state.line;\n}\nfunction normalizeInput(input) {\n    var arr = _ensureArray(input);\n    arr = arr.filter(function (s) { return typeof s === "string"; });\n    arr = _stripComments(arr);\n    arr = arr.map(function (s) { return s.trim(); });\n    arr = arr.filter(Boolean);\n    return arr;\n}\n/**\n * Strips single line ; or // comments.\n * This isn\'t perfect, but it does try to detect cases where the comment\n * characters are within a quoted string.\n */\nfunction _stripComments(input) {\n    var withinBlockComment = false;\n    var lines = input.map(function (line) {\n        if (withinBlockComment) {\n            // The only thing that can break us out is the closing block comment.\n            var blockCommentEndIndex = line.indexOf("*/");\n            if (blockCommentEndIndex >= 0) {\n                line = line.substr(blockCommentEndIndex + 2);\n                withinBlockComment = false;\n            }\n        }\n        if (withinBlockComment) {\n            return "";\n        }\n        var blockCommentIndex = line.indexOf("/*");\n        while (blockCommentIndex >= 0) {\n            if (!_appearsSurroundedByQuotes(line, blockCommentIndex)) {\n                var blockCommentEndIndex = line.indexOf("*/", blockCommentIndex + 2);\n                if (blockCommentEndIndex >= 0) {\n                    line = line.substr(0, blockCommentIndex) + line.substr(blockCommentEndIndex + 2);\n                }\n                else {\n                    line = line.substr(0, blockCommentIndex);\n                    withinBlockComment = true;\n                    break;\n                }\n            }\n            else {\n                blockCommentIndex++; // Avoid infinite loop\n            }\n            blockCommentIndex = line.indexOf("/*", blockCommentIndex);\n        }\n        var semicolonIndex = line.indexOf(";");\n        while (semicolonIndex >= 0) {\n            if (!_appearsSurroundedByQuotes(line, semicolonIndex)) {\n                line = line.substr(0, semicolonIndex);\n                // This invalidates any block comment we found earlier this iteration.\n                withinBlockComment = false;\n                break;\n            }\n            semicolonIndex = line.indexOf(";", semicolonIndex + 1);\n        }\n        var slashesIndex = line.indexOf("//");\n        while (slashesIndex >= 0) {\n            if (!_appearsSurroundedByQuotes(line, slashesIndex)) {\n                line = line.substr(0, slashesIndex);\n                // This invalidates any block comment we found earlier this iteration.\n                withinBlockComment = false;\n                break;\n            }\n            slashesIndex = line.indexOf("//", slashesIndex + 2);\n        }\n        return line;\n    });\n    if (withinBlockComment) {\n        throw new Error("Unclosed block comment detected.");\n    }\n    return lines;\n}\nfunction _appearsSurroundedByQuotes(line, position) {\n    return _appearsSurroundedByCharacter(line, position, "\\"")\n        || _appearsSurroundedByCharacter(line, position, "\'");\n}\nfunction _appearsSurroundedByCharacter(line, position, char) {\n    var firstCharIndex = line.indexOf(char);\n    if (firstCharIndex === -1)\n        return false;\n    if (firstCharIndex > position)\n        return false;\n    var afterPosCharIndex = line.indexOf(char, position);\n    if (afterPosCharIndex === -1)\n        return false;\n    return true; // Position seems to be surrounded by character.\n}\nfunction _ensureArray(input) {\n    if (typeof input === "string")\n        return input.split(/\\r?\\n/);\n    if (!Array.isArray(input))\n        throw new Error("Input must be a string or array of strings");\n    return input;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/assembler.ts?')},"./src/conditionals.ts":
/*!*****************************!*\
  !*** ./src/conditionals.ts ***!
  \*****************************/
/*! exports provided: IfElseStateFlags, IfElseBlockStateMask, setIfElseBlockState */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IfElseStateFlags", function() { return IfElseStateFlags; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IfElseBlockStateMask", function() { return IfElseBlockStateMask; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setIfElseBlockState", function() { return setIfElseBlockState; });\n/** States of an if/else/endif level. */\nvar IfElseStateFlags;\n(function (IfElseStateFlags) {\n    /** Unused */\n    IfElseStateFlags[IfElseStateFlags["None"] = 0] = "None";\n    /**\n     * We are within an if block, but haven\'t reached a part we should execute.\n     */\n    IfElseStateFlags[IfElseStateFlags["AcceptingBlock"] = 1] = "AcceptingBlock";\n    /** We are executing code within an if/else block. */\n    IfElseStateFlags[IfElseStateFlags["ExecutingBlock"] = 2] = "ExecutingBlock";\n    /**\n     * We have already executed an if or elseif block, and are passing over\n     * remaining instructions.\n     */\n    IfElseStateFlags[IfElseStateFlags["NoLongerAcceptingBlock"] = 4] = "NoLongerAcceptingBlock";\n    /** Flag set once a plain else directive is encountered. */\n    IfElseStateFlags[IfElseStateFlags["SawElse"] = 8] = "SawElse";\n})(IfElseStateFlags || (IfElseStateFlags = {}));\n/** Mask for checking current block state. */\nvar IfElseBlockStateMask = IfElseStateFlags.AcceptingBlock\n    | IfElseStateFlags.ExecutingBlock\n    | IfElseStateFlags.NoLongerAcceptingBlock;\nfunction setIfElseBlockState(state, newBlockState) {\n    state.ifElseStack[state.ifElseStack.length - 1] &= ~IfElseBlockStateMask;\n    state.ifElseStack[state.ifElseStack.length - 1] |= newBlockState;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/conditionals.ts?')},"./src/directives.ts":
/*!***************************!*\
  !*** ./src/directives.ts ***!
  \***************************/
/*! exports provided: getDirectiveToRun, handleDirective, isConditionalDirective */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDirectiveToRun", function() { return getDirectiveToRun; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleDirective", function() { return handleDirective; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isConditionalDirective", function() { return isConditionalDirective; });\n/* harmony import */ var _directives_definelabel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directives/definelabel */ "./src/directives/definelabel.ts");\n/* harmony import */ var _directives_org__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directives/org */ "./src/directives/org.ts");\n/* harmony import */ var _directives_orga__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directives/orga */ "./src/directives/orga.ts");\n/* harmony import */ var _directives_align__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./directives/align */ "./src/directives/align.ts");\n/* harmony import */ var _directives_skip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./directives/skip */ "./src/directives/skip.ts");\n/* harmony import */ var _directives_fill__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./directives/fill */ "./src/directives/fill.ts");\n/* harmony import */ var _directives_ascii__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./directives/ascii */ "./src/directives/ascii.ts");\n/* harmony import */ var _directives_byte__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./directives/byte */ "./src/directives/byte.ts");\n/* harmony import */ var _directives_halfword__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./directives/halfword */ "./src/directives/halfword.ts");\n/* harmony import */ var _directives_word__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./directives/word */ "./src/directives/word.ts");\n/* harmony import */ var _directives_float__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./directives/float */ "./src/directives/float.ts");\n/* harmony import */ var _directives_if__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./directives/if */ "./src/directives/if.ts");\n/* harmony import */ var _directives_else__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./directives/else */ "./src/directives/else.ts");\n/* harmony import */ var _directives_elseif__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./directives/elseif */ "./src/directives/elseif.ts");\n/* harmony import */ var _directives_endif__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./directives/endif */ "./src/directives/endif.ts");\n/* harmony import */ var _directives_include__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./directives/include */ "./src/directives/include.ts");\n/* harmony import */ var _directives_beginfile__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./directives/beginfile */ "./src/directives/beginfile.ts");\n/* harmony import */ var _directives_endfile__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./directives/endfile */ "./src/directives/endfile.ts");\n/* harmony import */ var _macros_beqz__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./macros/beqz */ "./src/macros/beqz.ts");\n/* harmony import */ var _macros_bnez__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./macros/bnez */ "./src/macros/bnez.ts");\n/* harmony import */ var _macros_bnezl__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./macros/bnezl */ "./src/macros/bnezl.ts");\n/* harmony import */ var _macros_li__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./macros/li */ "./src/macros/li.ts");\n/* harmony import */ var _macros_move__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./macros/move */ "./src/macros/move.ts");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar directives = [\n    _directives_definelabel__WEBPACK_IMPORTED_MODULE_0__["default"],\n    _directives_org__WEBPACK_IMPORTED_MODULE_1__["default"],\n    _directives_orga__WEBPACK_IMPORTED_MODULE_2__["default"],\n    _directives_align__WEBPACK_IMPORTED_MODULE_3__["default"],\n    _directives_skip__WEBPACK_IMPORTED_MODULE_4__["default"],\n    _directives_fill__WEBPACK_IMPORTED_MODULE_5__["default"],\n    _directives_ascii__WEBPACK_IMPORTED_MODULE_6__["ascii"],\n    _directives_ascii__WEBPACK_IMPORTED_MODULE_6__["asciiz"],\n    _directives_byte__WEBPACK_IMPORTED_MODULE_7__["default"],\n    _directives_halfword__WEBPACK_IMPORTED_MODULE_8__["default"],\n    _directives_word__WEBPACK_IMPORTED_MODULE_9__["default"],\n    _directives_float__WEBPACK_IMPORTED_MODULE_10__["default"],\n    _directives_if__WEBPACK_IMPORTED_MODULE_11__["default"],\n    _directives_elseif__WEBPACK_IMPORTED_MODULE_13__["default"],\n    _directives_else__WEBPACK_IMPORTED_MODULE_12__["default"],\n    _directives_endif__WEBPACK_IMPORTED_MODULE_14__["default"],\n    _directives_include__WEBPACK_IMPORTED_MODULE_15__["default"],\n    _directives_beginfile__WEBPACK_IMPORTED_MODULE_16__["default"],\n    _directives_endfile__WEBPACK_IMPORTED_MODULE_17__["default"],\n];\nvar macros = [\n    _macros_beqz__WEBPACK_IMPORTED_MODULE_18__["default"],\n    _macros_bnez__WEBPACK_IMPORTED_MODULE_19__["default"],\n    _macros_bnezl__WEBPACK_IMPORTED_MODULE_20__["default"],\n    _macros_li__WEBPACK_IMPORTED_MODULE_21__["default"],\n    _macros_move__WEBPACK_IMPORTED_MODULE_22__["default"],\n];\n/**\n * Returns a directive function to run for the given state/line.\n * @param state Current assembler state.\n */\nfunction getDirectiveToRun(state) {\n    for (var _i = 0, directives_1 = directives; _i < directives_1.length; _i++) {\n        var directive = directives_1[_i];\n        if (directive.matches(state)) {\n            return directive;\n        }\n    }\n    for (var _a = 0, macros_1 = macros; _a < macros_1.length; _a++) {\n        var macro = macros_1[_a];\n        if (macro.matches(state)) {\n            return macro;\n        }\n    }\n    return null;\n}\n/**\n * Runs a directive, which changes the assembler state.\n * @param state Current assembler state.\n */\nfunction handleDirective(state, directive) {\n    directive(state);\n}\n/**\n * Tests if a line represents a conditional block directive.\n * @param line Line from the pre-assembly input\n */\nfunction isConditionalDirective(line) {\n    var normalized = line.toLowerCase();\n    return startsWith(normalized, ".if")\n        || startsWith(normalized, ".else")\n        || startsWith(normalized, ".endif");\n}\nfunction startsWith(str, search) {\n    return str.substr(0, search.length) === search;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives.ts?')},"./src/directives/align.ts":
/*!*********************************!*\
  !*** ./src/directives/align.ts ***!
  \*********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return align; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n\n/**\n * .align pads zeroes until the output position is aligned\n * with the specified alignment.\n * @param state Current assembler state.\n */\nfunction align(state) {\n    if (state.lineExpressions.length !== 1) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".align requires one power of two number argument", state);\n    }\n    var imm = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["runFunction"])(state.lineExpressions[0], state);\n    if (imm === null)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Could not parse .align immediate " + state.lineExpressions, state);\n    if (typeof imm !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".align requires one power of two number argument", state);\n        return false;\n    }\n    if (imm % 2)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".align directive requires a power of two.", state);\n    if (imm < 0)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".align directive cannot align by a negative value.", state);\n    while (state.outIndex % imm) {\n        if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n            state.dataView.setUint8(state.outIndex, 0);\n        }\n        state.outIndex++;\n    }\n    return true;\n}\nalign.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_3__["basicDirectiveMatcher"])("align");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/align.ts?')},"./src/directives/ascii.ts":
/*!*********************************!*\
  !*** ./src/directives/ascii.ts ***!
  \*********************************/
/*! exports provided: asciiz, ascii */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asciiz", function() { return asciiz; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ascii", function() { return ascii; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n\n/**\n * Writes ascii bytes with a trailing zero.\n *\n * @param state Current assembler state.\n */\nfunction asciiz(state) {\n    return ascii(state, true);\n}\nasciiz.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_3__["basicDirectiveMatcher"])("asciiz");\n/**\n * Writes ascii bytes.\n *\n * .ascii value[,...]\n * .asciiz value[,...]\n *\n * `value` can either be a string or byte value.\n * ex: "string"\n * ex: \'string\'\n * ex: 0x0A\n *\n * @param state Current assembler state.\n */\nfunction ascii(state, appendZero) {\n    var numbers = [];\n    var lineExps = state.lineExpressions;\n    lineExps.forEach(function (expr) {\n        var value = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["runFunction"])(expr, state);\n        if (value === null)\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Could not parse .ascii value " + expr, state);\n        if (typeof value === "number") {\n            numbers.push(value);\n        }\n        else if (typeof value === "string") {\n            for (var i = 0; i < value.length; i++) {\n                numbers.push(value.charCodeAt(i));\n            }\n        }\n    });\n    if (appendZero)\n        numbers.push(0); // Add NULL byte.\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        for (var i = 0; i < numbers.length; i++) {\n            if (numbers[i] < 0)\n                state.dataView.setInt8(state.outIndex + i, numbers[i]);\n            else\n                state.dataView.setUint8(state.outIndex + i, numbers[i]);\n        }\n    }\n    state.outIndex += numbers.length;\n    return true;\n}\nascii.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_3__["basicDirectiveMatcher"])("ascii");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/ascii.ts?')},"./src/directives/beginfile.ts":
/*!*************************************!*\
  !*** ./src/directives/beginfile.ts ***!
  \*************************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return beginfile; });\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbols */ "./src/symbols.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * .beginfile\n *\n * @param state Current assembler state.\n */\nfunction beginfile(state) {\n    if (state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The beginfile directive takes no arguments", state);\n    Object(_symbols__WEBPACK_IMPORTED_MODULE_1__["pushStaticLabelStateLevel"])(state);\n    return true;\n}\nbeginfile.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_0__["basicDirectiveMatcher"])("beginfile", true);\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/beginfile.ts?')},"./src/directives/byte.ts":
/*!********************************!*\
  !*** ./src/directives/byte.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return byte; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * .byte value[,...]\n * .db value[,...]\n * @param state Current assembler state.\n */\nfunction byte(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        if (!state.evaluatedLineExpressions.length) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".byte directive requires arguments", state);\n        }\n        if (state.evaluatedLineExpressions.some(function (v) { return typeof v !== "number"; })) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".byte directive requires numeric arguments", state);\n        }\n        var numbers = state.evaluatedLineExpressions;\n        for (var i = 0; i < numbers.length; i++) {\n            if (numbers[i] < 0)\n                state.dataView.setInt8(state.outIndex + i, numbers[i]);\n            else\n                state.dataView.setUint8(state.outIndex + i, numbers[i]);\n        }\n    }\n    state.outIndex += state.lineExpressions.length;\n    return true;\n}\nvar byteMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("byte");\nvar dbMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("db");\nbyte.matches = function (state) {\n    return byteMatcher(state) || dbMatcher(state);\n};\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/byte.ts?')},"./src/directives/definelabel.ts":
/*!***************************************!*\
  !*** ./src/directives/definelabel.ts ***!
  \***************************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return definelabel; });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../symbols */ "./src/symbols.ts");\n/* harmony import */ var _labels__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../labels */ "./src/labels.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n\n/**\n * .definelabel adds a new symbol.\n * @param state Current assembler state.\n */\nfunction definelabel(state) {\n    if (state.lineExpressions.length !== 2) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])(".definelabel must have two arguments, a label name and value", state);\n    }\n    var name = state.lineExpressions[0];\n    var value = Object(_functions__WEBPACK_IMPORTED_MODULE_2__["runFunction"])(state.lineExpressions[1], state);\n    if (typeof value !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("The value in .definelabel must evaluate to a numeric value", state);\n        return false;\n    }\n    Object(_symbols__WEBPACK_IMPORTED_MODULE_0__["addSymbol"])(state, name, value);\n    return true; // Symbol added\n}\nvar defineLabelRegex = new RegExp("^\\\\.definelabel\\\\s+(" + _labels__WEBPACK_IMPORTED_MODULE_1__["LABEL_REGEX_STR"] + ")[\\\\s,]+([-\\\\w" + _labels__WEBPACK_IMPORTED_MODULE_1__["LABEL_CHARS"] + "]+)$", "i");\ndefinelabel.matches = function (state) {\n    var results = state.line.match(defineLabelRegex);\n    return results !== null;\n};\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/definelabel.ts?')},"./src/directives/directiveHelpers.ts":
/*!********************************************!*\
  !*** ./src/directives/directiveHelpers.ts ***!
  \********************************************/
/*! exports provided: basicDirectiveMatcher, makeBasicDirectiveRegExp, makeNumericExprListRegExp */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "basicDirectiveMatcher", function() { return basicDirectiveMatcher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeBasicDirectiveRegExp", function() { return makeBasicDirectiveRegExp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeNumericExprListRegExp", function() { return makeNumericExprListRegExp; });\n/* harmony import */ var _expressions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../expressions */ "./src/expressions.ts");\n\nfunction basicDirectiveMatcher(directiveAlias, noArgs) {\n    var regex = makeBasicDirectiveRegExp(directiveAlias, noArgs);\n    return function (state) { return !!state.line.match(regex); };\n}\nfunction makeBasicDirectiveRegExp(directiveAlias, noArgs) {\n    return new RegExp("^\\\\." + directiveAlias + (noArgs ? "" : "\\\\s+"), "i");\n}\nfunction makeNumericExprListRegExp(directiveAlias) {\n    return new RegExp("^\\\\." + directiveAlias + "\\\\s+([" + _expressions__WEBPACK_IMPORTED_MODULE_0__["EXPR_CHARS"] + "]+)$", "i");\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/directiveHelpers.ts?')},"./src/directives/else.ts":
/*!********************************!*\
  !*** ./src/directives/else.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return elseblock; });\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _conditionals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../conditionals */ "./src/conditionals.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * .else\n *\n * @param state Current assembler state.\n */\nfunction elseblock(state) {\n    if (state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The else directive cannot take a condition or parameters", state);\n    if (!state.ifElseStack.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("An else directive was reached, but there was no previous if directive", state);\n    var curState = state.ifElseStack[state.ifElseStack.length - 1];\n    if (curState & _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].SawElse)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Encountered another else directive, but an else directive was already passed", state);\n    switch (curState & _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseBlockStateMask"]) {\n        case _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].AcceptingBlock:\n            Object(_conditionals__WEBPACK_IMPORTED_MODULE_1__["setIfElseBlockState"])(state, _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].ExecutingBlock);\n            break;\n        case _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].ExecutingBlock:\n            Object(_conditionals__WEBPACK_IMPORTED_MODULE_1__["setIfElseBlockState"])(state, _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].NoLongerAcceptingBlock);\n            break;\n        case _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].NoLongerAcceptingBlock:\n            break;\n        default:\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Unexpected conditional block state: " + curState.toString(16), state);\n    }\n    state.ifElseStack[state.ifElseStack.length - 1] |= _conditionals__WEBPACK_IMPORTED_MODULE_1__["IfElseStateFlags"].SawElse;\n    return true;\n}\nelseblock.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_0__["basicDirectiveMatcher"])("else", true);\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/else.ts?')},"./src/directives/elseif.ts":
/*!**********************************!*\
  !*** ./src/directives/elseif.ts ***!
  \**********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return elseif; });\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _conditionals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conditionals */ "./src/conditionals.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n\n/**\n * .elseif cond\n *\n * `cond` is met if it evaluates to a non-zero integer.\n *\n * @param state Current assembler state.\n */\nfunction elseif(state) {\n    if (!state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("A condition must be passed to an elseif directive", state);\n    if (state.lineExpressions.length > 1)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Only a single condition can be passed to an elseif directive", state);\n    if (!state.ifElseStack.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("An elseif directive was reached, but there was no previous if directive", state);\n    var curState = state.ifElseStack[state.ifElseStack.length - 1];\n    if (curState & _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].SawElse)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Encountered an elseif after seeing an else directive", state);\n    var value = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["runFunction"])(state.lineExpressions[0], state);\n    if (value === null)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Could not parse .elseif condition", state);\n    if (typeof value !== "number")\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Condition of elseif directive must evaluate to a numeric value, saw: " + value, state);\n    switch (curState & _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseBlockStateMask"]) {\n        case _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].AcceptingBlock:\n            if (value) {\n                Object(_conditionals__WEBPACK_IMPORTED_MODULE_2__["setIfElseBlockState"])(state, _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].ExecutingBlock);\n            }\n            break;\n        case _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].ExecutingBlock:\n            Object(_conditionals__WEBPACK_IMPORTED_MODULE_2__["setIfElseBlockState"])(state, _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].NoLongerAcceptingBlock);\n            break;\n        case _conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].NoLongerAcceptingBlock:\n            break;\n        default:\n            Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Unexpected conditional block state: " + curState.toString(16), state);\n    }\n    return true;\n}\nelseif.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_0__["basicDirectiveMatcher"])("elseif");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/elseif.ts?')},"./src/directives/endfile.ts":
/*!***********************************!*\
  !*** ./src/directives/endfile.ts ***!
  \***********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return beginfile; });\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../symbols */ "./src/symbols.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * .endfile\n *\n * @param state Current assembler state.\n */\nfunction beginfile(state) {\n    if (state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The endfile directive takes no arguments", state);\n    Object(_symbols__WEBPACK_IMPORTED_MODULE_1__["popStaticLabelStateLevel"])(state);\n    return true;\n}\nbeginfile.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_0__["basicDirectiveMatcher"])("endfile", true);\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/endfile.ts?')},"./src/directives/endif.ts":
/*!*********************************!*\
  !*** ./src/directives/endif.ts ***!
  \*********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return endif; });\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n/**\n * .endif\n * Ends the last open if or else block.\n *\n * @param state Current assembler state.\n */\nfunction endif(state) {\n    if (state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])("The endif directive cannot take a condition or parameters", state);\n    if (!state.ifElseStack.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])("An endif directive was reached, but there was no previous if directive", state);\n    state.ifElseStack.pop();\n    return true;\n}\nendif.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_0__["basicDirectiveMatcher"])("endif", true);\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/endif.ts?')},"./src/directives/fill.ts":
/*!********************************!*\
  !*** ./src/directives/fill.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return fill; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n\n/**\n * .fill length[,value]\n * @param state Current assembler state.\n */\nfunction fill(state) {\n    if (!state.lineExpressions.length || state.lineExpressions.length > 2) {\n        throw new Error(".fill directive takes a length and optional value");\n    }\n    var length, value;\n    length = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["runFunction"])(state.lineExpressions[0], state);\n    if (typeof length !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Could not parse .fill length " + state.lineExpressions[0], state);\n        return false;\n    }\n    if (length < 0)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".fill length must be positive.", state);\n    if (state.lineExpressions.length > 1) {\n        value = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["runFunction"])(state.lineExpressions[1], state);\n        if (typeof value !== "number") {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Could not parse .fill value " + state.lineExpressions[1], state);\n            return false;\n        }\n    }\n    else\n        value = 0;\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        for (var i = 0; i < length; i++)\n            state.dataView.setInt8(state.outIndex + i, value);\n    }\n    state.outIndex += length;\n    return true;\n}\nfill.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_3__["basicDirectiveMatcher"])("fill");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/fill.ts?')},"./src/directives/float.ts":
/*!*********************************!*\
  !*** ./src/directives/float.ts ***!
  \*********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return float; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n/**\n * Writes 32-bit float values.\n * .float value[,...]\n * @param state Current assembler state.\n */\nfunction float(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        if (!state.evaluatedLineExpressions.length) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".float directive requires arguments", state);\n        }\n        if (state.evaluatedLineExpressions.some(function (v) { return typeof v !== "number"; })) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".float directive requires numeric arguments", state);\n        }\n        var numbers = state.evaluatedLineExpressions;\n        for (var i = 0; i < numbers.length; i++) {\n            state.dataView.setFloat32(state.outIndex + (i * 4), numbers[i]);\n        }\n    }\n    state.outIndex += 4 * state.lineExpressions.length;\n    return true;\n}\nfloat.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_2__["basicDirectiveMatcher"])("float");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/float.ts?')},"./src/directives/halfword.ts":
/*!************************************!*\
  !*** ./src/directives/halfword.ts ***!
  \************************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return halfword; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * Writes 16-bit values.\n * .halfword value[,...]\n * .dh value[,...]\n * @param state Current assembler state.\n */\nfunction halfword(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        if (!state.evaluatedLineExpressions.length) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".halfword directive requires arguments", state);\n        }\n        if (state.evaluatedLineExpressions.some(function (v) { return typeof v !== "number"; })) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".halfword directive requires numeric arguments", state);\n        }\n        var numbers = state.evaluatedLineExpressions;\n        for (var i = 0; i < numbers.length; i++) {\n            if (numbers[i] < 0)\n                state.dataView.setInt16(state.outIndex + (i * 2), numbers[i]);\n            else\n                state.dataView.setUint16(state.outIndex + (i * 2), numbers[i]);\n        }\n    }\n    state.outIndex += 2 * state.lineExpressions.length;\n    return true;\n}\nvar hwMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("halfword");\nvar dhMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("dh");\nhalfword.matches = function (state) {\n    return hwMatcher(state) || dhMatcher(state);\n};\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/halfword.ts?')},"./src/directives/if.ts":
/*!******************************!*\
  !*** ./src/directives/if.ts ***!
  \******************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ifcond; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _conditionals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conditionals */ "./src/conditionals.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n\n/**\n * .if cond\n *\n * `cond` is met if it evaluates to a non-zero integer.\n *\n * @param state Current assembler state.\n */\nfunction ifcond(state) {\n    if (!state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("A condition must be passed to an if directive", state);\n    if (state.lineExpressions.length > 1)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Only a single condition can be passed to an if directive", state);\n    var value = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(state.lineExpressions[0], state);\n    if (value === null)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Could not parse .if condition", state);\n    if (typeof value !== "number")\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Condition of if directive must evaluate to a numeric value, saw: " + value, state);\n    if (value) {\n        state.ifElseStack.push(_conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].ExecutingBlock);\n    }\n    else {\n        state.ifElseStack.push(_conditionals__WEBPACK_IMPORTED_MODULE_2__["IfElseStateFlags"].AcceptingBlock);\n    }\n    return true;\n}\nifcond.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("if");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/if.ts?')},"./src/directives/include.ts":
/*!***********************************!*\
  !*** ./src/directives/include.ts ***!
  \***********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return include; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n\n/**\n * .include FileName\n *\n * `FileName` is a key in the `files` object passed to `assemble`.\n *\n * @param state Current assembler state.\n */\nfunction include(state) {\n    if (!state.lineExpressions.length)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("A file name must be passed to an include directive", state);\n    if (state.lineExpressions.length > 1)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Only a single file name can be passed to an include directive", state);\n    var filename = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(state.lineExpressions[0], state);\n    if (filename === null)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("Could not parse .include file name", state);\n    if (typeof filename !== "string") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("File name of include directive must evaluate to a string, saw: " + filename, state);\n        return;\n    }\n    var file = state.files[filename];\n    if (typeof file !== "string")\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("The " + filename + " file was not a string", state);\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_2__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_3__["throwError"])("The `include` directive shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    state.linesToInsert =\n        ".beginfile\\n" + file + "\\n.endfile";\n    state.line = ""; // Delete this directive.\n}\ninclude.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("include");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/include.ts?')},"./src/directives/org.ts":
/*!*******************************!*\
  !*** ./src/directives/org.ts ***!
  \*******************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return org; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n/**\n * .org changes the effective memory position.\n * @param state Current assembler state.\n */\nfunction org(state) {\n    if (state.lineExpressions.length !== 1) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".org directive requires one numeric argument", state);\n    }\n    var imm = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(state.lineExpressions[0], state);\n    if (typeof imm !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])("Could not parse .org immediate " + imm, state);\n        return false;\n    }\n    if (imm < 0)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".org directive cannot be negative", state);\n    state.memPos = imm >>> 0; // Better be 32-bit\n    return true;\n}\norg.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_2__["basicDirectiveMatcher"])("org");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/org.ts?')},"./src/directives/orga.ts":
/*!********************************!*\
  !*** ./src/directives/orga.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return orga; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n/**\n * .orga updates the current output buffer index.\n * @param state Current assembler state.\n */\nfunction orga(state) {\n    if (state.lineExpressions.length !== 1) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".orga directive requires one numeric argument", state);\n    }\n    var imm = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(state.lineExpressions[0], state);\n    if (typeof imm !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])("Could not parse .orga immediate " + imm, state);\n        return false;\n    }\n    if (imm < 0)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".orga directive cannot be negative.", state);\n    state.outIndex = imm >>> 0; // Better be 32-bit\n    return true;\n}\norga.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_2__["basicDirectiveMatcher"])("orga");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/orga.ts?')},"./src/directives/skip.ts":
/*!********************************!*\
  !*** ./src/directives/skip.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return skip; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n\n\n\n/**\n * .skip passes over a given amout of bytes without overwriting them.\n * @param state Current assembler state.\n */\nfunction skip(state) {\n    if (state.lineExpressions.length !== 1) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".skip directive requires one numeric argument", state);\n    }\n    var imm = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(state.lineExpressions[0], state);\n    if (typeof imm !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])("Could not parse .skip immediate " + imm, state);\n        return false;\n    }\n    if (imm < 0)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_1__["throwError"])(".skip directive cannot skip a negative length.", state);\n    state.outIndex += imm;\n    return true;\n}\nskip.matches = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_2__["basicDirectiveMatcher"])("skip");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/skip.ts?')},"./src/directives/word.ts":
/*!********************************!*\
  !*** ./src/directives/word.ts ***!
  \********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return word; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _directiveHelpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./directiveHelpers */ "./src/directives/directiveHelpers.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * Writes 32-bit values.\n * .word value[,...]\n * .dw value[,...]\n * @param state Current assembler state.\n */\nfunction word(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].secondPass) {\n        if (!state.evaluatedLineExpressions.length) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".word directive requires arguments", state);\n        }\n        if (state.evaluatedLineExpressions.some(function (v) { return typeof v !== "number"; })) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])(".word directive requires numeric arguments", state);\n        }\n        var numbers = state.evaluatedLineExpressions;\n        for (var i = 0; i < numbers.length; i++) {\n            if (numbers[i] < 0)\n                state.dataView.setInt32(state.outIndex + (i * 4), numbers[i]);\n            else\n                state.dataView.setUint32(state.outIndex + (i * 4), numbers[i]);\n        }\n    }\n    state.outIndex += 4 * state.lineExpressions.length;\n    return true;\n}\nvar wMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("word");\nvar dwMatcher = Object(_directiveHelpers__WEBPACK_IMPORTED_MODULE_1__["basicDirectiveMatcher"])("dw");\nword.matches = function (state) {\n    return wMatcher(state) || dwMatcher(state);\n};\n\n\n//# sourceURL=webpack://MIPSAssem/./src/directives/word.ts?')},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: throwError */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throwError", function() { return throwError; });\nfunction throwError(message, state) {\n    throw new Error(message + "\\nLine: " + state.line);\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/errors.ts?')},"./src/expressions.ts":
/*!****************************!*\
  !*** ./src/expressions.ts ***!
  \****************************/
/*! exports provided: EXPR_CHARS, parseExpressionsOnCurrentLine, evaluateExpressionsOnCurrentLine */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EXPR_CHARS", function() { return EXPR_CHARS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseExpressionsOnCurrentLine", function() { return parseExpressionsOnCurrentLine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "evaluateExpressionsOnCurrentLine", function() { return evaluateExpressionsOnCurrentLine; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functions */ "./src/functions.ts");\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./immediates */ "./src/immediates.ts");\n/* harmony import */ var _labels__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./labels */ "./src/labels.ts");\n\n\n\nvar EXPR_CHARS = ",-\\\\w\\\\s\\\\(\\\\)" + _labels__WEBPACK_IMPORTED_MODULE_2__["LABEL_CHARS"];\nfunction parseExpressionsOnCurrentLine(state) {\n    var line = state.line;\n    var firstSpaceIndex = line.indexOf(" ");\n    if (firstSpaceIndex === -1) {\n        state.lineExpressions = [];\n        return; // Must not have any arguments, there would need to be a space for those.\n    }\n    var exprList = line.substr(firstSpaceIndex + 1);\n    var exprs = splitExpressionList(exprList);\n    state.lineExpressions = exprs;\n}\nfunction evaluateExpressionsOnCurrentLine(state) {\n    var line = state.line;\n    var firstSpaceIndex = line.indexOf(" ");\n    if (firstSpaceIndex === -1)\n        return line; // Must not have any arguments, there would need to be a space for those.\n    var firstPiece = line.substring(0, firstSpaceIndex);\n    var exprList = line.substr(firstSpaceIndex + 1);\n    var exprs = splitExpressionList(exprList);\n    state.lineExpressions = exprs;\n    if (exprs.length > 0) {\n        var evaluatedExprs = exprs.map(function (expr, i) {\n            var evaluated = Object(_functions__WEBPACK_IMPORTED_MODULE_0__["runFunction"])(expr, state);\n            // For the last piece, do extra logic to fix branch values.\n            if (typeof evaluated === "number" && i === exprs.length - 1) {\n                evaluated = _fixBranch(firstPiece, evaluated, state);\n            }\n            return evaluated;\n        });\n        state.evaluatedLineExpressions = evaluatedExprs;\n        line = firstPiece + " " + _formatEvaluatedExprs(evaluatedExprs, exprs).join(" ");\n    }\n    return line;\n}\nfunction _formatEvaluatedExprs(values, originalValues) {\n    return values.map(function (value, i) {\n        if (typeof value === "number") {\n            return Object(_immediates__WEBPACK_IMPORTED_MODULE_1__["formatImmediate"])(value);\n        }\n        if (value === null) {\n            return originalValues[i];\n        }\n        return value;\n    });\n}\n/** Transforms branches from absolute to relative. */\nfunction _fixBranch(inst, offset, state) {\n    if (_instIsBranch(inst)) {\n        var memOffset = state.memPos + state.outIndex;\n        var diff = ((offset - memOffset) / 4) - 1;\n        return diff;\n    }\n    return offset; // Leave as is.\n}\nfunction _instIsBranch(inst) {\n    inst = inst.toLowerCase();\n    if (inst[0] !== "b")\n        return false;\n    switch (inst) {\n        case "bc1f":\n        case "bc1fl":\n        case "bc1t":\n        case "bc1tl":\n        case "beq":\n        case "beql":\n        case "bgez":\n        case "bgezal":\n        case "bgezall":\n        case "bgezl":\n        case "bgtz":\n        case "bgtzl":\n        case "blez":\n        case "blezl":\n        case "bltz":\n        case "bltzal":\n        case "bltzall":\n        case "bltzl":\n        case "bne":\n        case "bnel":\n            return true;\n    }\n    return false;\n}\nfunction splitExpressionList(str) {\n    var pieces = [];\n    var currentPiece = "";\n    var currentStrQuoteChar = ""; // When set, we\'re writing a string\n    var currentParenLevel = 0; // When > 0, we\'re inside a parenthesis grouper\n    var escaped = false;\n    var prevChar = "";\n    function writeToCurrentPiece(char) {\n        currentPiece += char;\n    }\n    function endCurrentPiece() {\n        while (charSplitsExpressions(currentPiece[currentPiece.length - 1])) {\n            currentPiece = currentPiece.slice(0, -1);\n        }\n        currentPiece = currentPiece.trim(); // Sanity check\n        // We actually have only seen white spaces, so don\'t create a separate piece yet.\n        if (!currentPiece)\n            return;\n        pieces.push(currentPiece);\n        currentPiece = "";\n    }\n    function endPieceIfApplicable() {\n        if (currentStrQuoteChar || currentParenLevel)\n            return; // Still need to close a string/group, can\'t end piece.\n        if (!charSplitsExpressions(prevChar))\n            return; // Still writing something.\n        endCurrentPiece();\n    }\n    for (var i = 0; i < str.length; i++) {\n        var char = str[i];\n        endPieceIfApplicable();\n        switch (char) {\n            case "\\\\":\n                if (!escaped) {\n                    escaped = true;\n                }\n                break;\n            case "(":\n                if (!escaped && !currentStrQuoteChar) {\n                    currentParenLevel++;\n                }\n                break;\n            case ")":\n                if (!escaped && !currentStrQuoteChar) {\n                    if (currentParenLevel <= 0) {\n                        throw new Error("Imbalanced parenthesis in expression: " + str);\n                    }\n                    currentParenLevel--;\n                }\n                break;\n            case "\\"":\n            case "\'":\n                if (!escaped) {\n                    if (currentStrQuoteChar) {\n                        if (currentStrQuoteChar === char) { // Ending string\n                            currentStrQuoteChar = "";\n                        }\n                        // Else just writing a quote inside, ex: "assembler\'s"\n                    }\n                    else { // Beginning string\n                        currentStrQuoteChar = char;\n                    }\n                }\n                break;\n        }\n        writeToCurrentPiece(char);\n        if (char !== "\\\\") {\n            escaped = false;\n        }\n        prevChar = char;\n    }\n    if (currentParenLevel > 0)\n        throw new Error("Imbalanced parenthesis in expression: " + str);\n    if (currentStrQuoteChar)\n        throw new Error("Unterminated string: " + currentPiece);\n    endCurrentPiece();\n    return pieces;\n}\nfunction charSplitsExpressions(char) {\n    return char === "," || charIsWhitespace(char);\n}\nfunction charIsWhitespace(char) {\n    return char === " " || char === "\\t";\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/expressions.ts?')},"./src/functions.ts":
/*!**************************!*\
  !*** ./src/functions.ts ***!
  \**************************/
/*! exports provided: runFunction */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "runFunction", function() { return runFunction; });\n/* harmony import */ var _immediates__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./immediates */ "./src/immediates.ts");\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./symbols */ "./src/symbols.ts");\n/* harmony import */ var _strings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings */ "./src/strings.ts");\n/* harmony import */ var _labels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labels */ "./src/labels.ts");\n/* harmony import */ var _functions_abs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functions/abs */ "./src/functions/abs.ts");\n/* harmony import */ var _functions_hi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./functions/hi */ "./src/functions/hi.ts");\n/* harmony import */ var _functions_lo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./functions/lo */ "./src/functions/lo.ts");\n/* harmony import */ var _functions_org__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./functions/org */ "./src/functions/org.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./errors */ "./src/errors.ts");\n\n\n\n\n\n\n\n\n\n/** Runs any built-in functions, and also resolves symbols. */\nfunction runFunction(value, state) {\n    return _runFunction(value, state);\n}\nvar fnRegex = new RegExp("^([-\\\\w]+)\\\\(([\\\\(\\\\),-\\\\w" + _labels__WEBPACK_IMPORTED_MODULE_3__["LABEL_CHARS"] + "]*)\\\\)$", "i");\nfunction _runFunction(value, state) {\n    var results = fnRegex.exec(value);\n    if (results === null) { // Not a function\n        // Number?\n        var imm = Object(_immediates__WEBPACK_IMPORTED_MODULE_0__["parseImmediate"])(value);\n        if (imm !== null) {\n            return imm;\n        }\n        // String?\n        var str = Object(_strings__WEBPACK_IMPORTED_MODULE_2__["unescapeQuotes"])(value);\n        if (typeof str === "string") {\n            return str;\n        }\n        var symbolValue = Object(_symbols__WEBPACK_IMPORTED_MODULE_1__["getSymbolValue"])(state, value);\n        if (symbolValue !== null) {\n            return symbolValue;\n        }\n        return null;\n    }\n    else {\n        var fn = results[1];\n        if (!fns[fn]) {\n            // Did a symbol label accidentally look like a function?\n            var symbolValue = Object(_symbols__WEBPACK_IMPORTED_MODULE_1__["getSymbolValue"])(state, fn);\n            if (symbolValue !== null) {\n                return symbolValue;\n            }\n            return null; // Might have been something like 0x10(V0)\n        }\n        // Parse args slightly different than the regex suggests,\n        // to support lo(label)(V0)\n        var fnArgs = "";\n        var parenLevel = 0;\n        var i = void 0;\n        for (i = fn.length + 1; i < value.length - 1; i++) {\n            var char = value[i];\n            if (char === "(") {\n                parenLevel++;\n            }\n            else if (char === ")") {\n                parenLevel--;\n                if (parenLevel < 0) {\n                    i++;\n                    break;\n                }\n            }\n            fnArgs += char;\n        }\n        var extraStr = "";\n        if (i < value.length - 1) {\n            // There was extra content after the end of the function,\n            // like the (VO) of lo(label)(V0)\n            extraStr = value.substring(i, value.length);\n        }\n        // TODO: Doesn\'t support nested calls, multiple arguments.\n        var arg = 0;\n        if (fnArgs) {\n            arg = _runFunction(fnArgs, state);\n        }\n        if (arg === null) {\n            Object(_errors__WEBPACK_IMPORTED_MODULE_8__["throwError"])("Could not evaluate " + fnArgs, state);\n            return null;\n        }\n        var result = fns[fn](state, arg);\n        if (extraStr) {\n            result = result + extraStr;\n        }\n        return result;\n    }\n}\n/** Built-in functions */\nvar fns = Object.create(null);\nfns.abs = _functions_abs__WEBPACK_IMPORTED_MODULE_4__["abs"];\nfns.hi = _functions_hi__WEBPACK_IMPORTED_MODULE_5__["hi"];\nfns.lo = _functions_lo__WEBPACK_IMPORTED_MODULE_6__["lo"];\nfns.org = _functions_org__WEBPACK_IMPORTED_MODULE_7__["org"];\n\n\n//# sourceURL=webpack://MIPSAssem/./src/functions.ts?')},"./src/functions/abs.ts":
/*!******************************!*\
  !*** ./src/functions/abs.ts ***!
  \******************************/
/*! exports provided: abs */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "abs", function() { return abs; });\n/**\n * Absolute value of the given `value`.\n */\nfunction abs(state, value) {\n    if (typeof value === "string")\n        throw new Error("Assembler function abs cannot be called with string \\"" + value + "\\", value must be a number.");\n    return Math.abs(value);\n}\n;\n\n\n//# sourceURL=webpack://MIPSAssem/./src/functions/abs.ts?')},"./src/functions/hi.ts":
/*!*****************************!*\
  !*** ./src/functions/hi.ts ***!
  \*****************************/
/*! exports provided: hi */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hi", function() { return hi; });\n/**\n * Returns the high half of a 32-bit `value`, adjusted for sign extension of\n * the low half.\n */\nfunction hi(state, value) {\n    if (typeof value === "string")\n        throw new Error("Assembler function hi cannot be called with string \\"" + value + "\\", value must be a number.");\n    var lower = value & 0x0000FFFF;\n    var upper = value >>> 16;\n    if (lower & 0x8000)\n        upper += 1;\n    return upper;\n}\n;\n\n\n//# sourceURL=webpack://MIPSAssem/./src/functions/hi.ts?')},"./src/functions/lo.ts":
/*!*****************************!*\
  !*** ./src/functions/lo.ts ***!
  \*****************************/
/*! exports provided: lo */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lo", function() { return lo; });\n/** Returns the sign-extended low half of a 32-bit `value`. */\nfunction lo(state, value) {\n    if (typeof value === "string")\n        throw new Error("Assembler function lo cannot be called with string \\"" + value + "\\", value must be a number.");\n    return value & 0x0000FFFF;\n}\n;\n\n\n//# sourceURL=webpack://MIPSAssem/./src/functions/lo.ts?')},"./src/functions/org.ts":
/*!******************************!*\
  !*** ./src/functions/org.ts ***!
  \******************************/
/*! exports provided: org */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "org", function() { return org; });\n/** Current memory address */\nfunction org(state, value) {\n    return state.memPos + state.outIndex;\n}\n;\n\n\n//# sourceURL=webpack://MIPSAssem/./src/functions/org.ts?')},"./src/immediates.ts":
/*!***************************!*\
  !*** ./src/immediates.ts ***!
  \***************************/
/*! exports provided: parseImmediate, formatImmediate */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseImmediate", function() { return parseImmediate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatImmediate", function() { return formatImmediate; });\nfunction parseImmediate(value) {\n    if (typeof value !== "string")\n        return null;\n    var negative = value[0] === "-";\n    if (negative)\n        value = value.substr(1);\n    var result;\n    if (value[0] === "b" || value[0] === "0" && value[1] === "b")\n        result = parseInt(value.substr(2), 2);\n    else if (value[0] === "o" || value[0] === "0" && value[1] === "o")\n        result = parseInt(value.substr(2), 8);\n    else if (value[0] === "x" || value[0] === "0" && value[1] === "x")\n        result = parseInt(value.substr(2), 16);\n    else\n        result = parseInt(value, 10);\n    if (isNaN(result))\n        return null;\n    if (negative)\n        result = -result;\n    return result;\n}\n/**\n * Formats a numeric value for use in final assembly.\n * @param value Numeric value\n */\nfunction formatImmediate(value) {\n    var isZero = value === 0;\n    var isNegative = value < 0;\n    var result = value.toString(16).toUpperCase();\n    if (isNegative) {\n        result = result.substr(1); // Remove the negative sign.\n    }\n    return (isNegative ? "-" : "")\n        + (isZero ? "" : "0x")\n        + result;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/immediates.ts?')},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: assemble */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _assembler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assembler */ "./src/assembler.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "assemble", function() { return _assembler__WEBPACK_IMPORTED_MODULE_0__["assemble"]; });\n\n\n\n\n//# sourceURL=webpack://MIPSAssem/./src/index.ts?')},"./src/labels.ts":
/*!***********************!*\
  !*** ./src/labels.ts ***!
  \***********************/
/*! exports provided: LABEL_CHARS, LABEL_REGEX_STR, parseGlobalLabel, isLocalLabel, isStaticLabel */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LABEL_CHARS", function() { return LABEL_CHARS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LABEL_REGEX_STR", function() { return LABEL_REGEX_STR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseGlobalLabel", function() { return parseGlobalLabel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isLocalLabel", function() { return isLocalLabel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isStaticLabel", function() { return isStaticLabel; });\n/* harmony import */ var _symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./symbols */ "./src/symbols.ts");\n\nvar LABEL_CHARS = "\\\\?\\\\!\\\\@";\nvar LABEL_REGEX_STR = "@?@?[\\\\w\\\\?\\\\!]+";\nvar labelRegex = new RegExp("^(" + LABEL_REGEX_STR + ")\\\\:");\n/**\n * Parses a LABEL: expression and adds it to the symbol table.\n * Examples of valid labels:\n *    basicLabel:    excited!Label!:    mystery?Label?:\n *    @@localLabel:  12345:             !?!:\n */\nfunction parseGlobalLabel(state) {\n    var results = state.line.match(labelRegex);\n    if (results === null)\n        return false; // Not a label.\n    var name = results[1];\n    if (!isLocalLabel(name) && !isStaticLabel(name)) {\n        state.currentLabel = name;\n    }\n    Object(_symbols__WEBPACK_IMPORTED_MODULE_0__["addSymbol"])(state, name, getLabelValueFromState(state));\n    return name;\n}\nfunction isLocalLabel(name) {\n    return name.indexOf("@@") === 0;\n}\nfunction isStaticLabel(name) {\n    return name.indexOf("@") === 0 && name[1] !== "@";\n}\nfunction getLabelValueFromState(state) {\n    return (state.memPos + state.outIndex) >>> 0;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/labels.ts?')},"./src/macros/beqz.ts":
/*!****************************!*\
  !*** ./src/macros/beqz.ts ***!
  \****************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return beqz; });\n/* harmony import */ var _macroHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./macroHelpers */ "./src/macros/macroHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * beqz reg,dest\n *\n * @param state Current assembler state.\n */\nfunction beqz(state) {\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `beqz` macro shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    if (state.lineExpressions.length !== 2)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `beqz` macro must take a register and label", state);\n    state.line = ""; // Delete this line.\n    state.linesToInsert = "BEQ " + state.lineExpressions[0] + " R0 " + state.lineExpressions[1];\n}\nbeqz.matches = Object(_macroHelpers__WEBPACK_IMPORTED_MODULE_0__["basicMacroMatcher"])("beqz");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/beqz.ts?')},"./src/macros/bnez.ts":
/*!****************************!*\
  !*** ./src/macros/bnez.ts ***!
  \****************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return bnez; });\n/* harmony import */ var _macroHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./macroHelpers */ "./src/macros/macroHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * bnez reg,dest\n *\n * @param state Current assembler state.\n */\nfunction bnez(state) {\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `bnez` macro shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    if (state.lineExpressions.length !== 2)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `bnez` macro must take a register and label", state);\n    state.line = ""; // Delete this line.\n    state.linesToInsert = "BNE " + state.lineExpressions[0] + " R0 " + state.lineExpressions[1];\n}\nbnez.matches = Object(_macroHelpers__WEBPACK_IMPORTED_MODULE_0__["basicMacroMatcher"])("bnez");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/bnez.ts?')},"./src/macros/bnezl.ts":
/*!*****************************!*\
  !*** ./src/macros/bnezl.ts ***!
  \*****************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return bnezl; });\n/* harmony import */ var _macroHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./macroHelpers */ "./src/macros/macroHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * bnezl reg,dest\n *\n * @param state Current assembler state.\n */\nfunction bnezl(state) {\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `bnezl` macro shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    if (state.lineExpressions.length !== 2)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `bnezl` macro must take a register and label", state);\n    state.line = ""; // Delete this line.\n    state.linesToInsert = "BNEL " + state.lineExpressions[0] + " R0 " + state.lineExpressions[1];\n}\nbnezl.matches = Object(_macroHelpers__WEBPACK_IMPORTED_MODULE_0__["basicMacroMatcher"])("bnezl");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/bnezl.ts?')},"./src/macros/li.ts":
/*!**************************!*\
  !*** ./src/macros/li.ts ***!
  \**************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return li; });\n/* harmony import */ var _macroHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./macroHelpers */ "./src/macros/macroHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../functions */ "./src/functions.ts");\n\n\n\n\n/**\n * li dest,value\n *\n * @param state Current assembler state.\n */\nfunction li(state) {\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `li` macro shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    if (state.lineExpressions.length <= 1)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `li` macro must take a register and immediate", state);\n    var dest = state.lineExpressions[0];\n    var value = Object(_functions__WEBPACK_IMPORTED_MODULE_3__["runFunction"])(state.lineExpressions[1], state);\n    if (value === null)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Could not parse `li` immediate value", state);\n    if (typeof value !== "number") {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("Immediate value of `li` macro must evaluate to a number, saw: " + value, state);\n        return;\n    }\n    state.line = ""; // Delete this line.\n    if (value >= -32768 && value <= 32767) {\n        state.linesToInsert = "ADDIU " + dest + ", R0, " + value;\n    }\n    else if (value > 0 && value <= 65535) {\n        state.linesToInsert = "ORI " + dest + ", R0, " + value;\n    }\n    else if ((value & 0xFFFF) === 0) {\n        state.linesToInsert = "LUI " + dest + ", " + (value >> 16);\n    }\n    else if (value >= -0x80000000 && value <= 0x7FFFFFFF) {\n        var needsSignAdjust = (value & 0x8000) !== 0;\n        state.linesToInsert =\n            "LUI " + dest + ", " + ((value >> 16) + (needsSignAdjust ? 1 : 0)) + "\\nADDIU " + dest + ", " + dest + ", " + (value & 0xFFFF);\n    }\n    else {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("li immediate value " + value + " seems out of range", state);\n    }\n}\nli.matches = Object(_macroHelpers__WEBPACK_IMPORTED_MODULE_0__["basicMacroMatcher"])("li");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/li.ts?')},"./src/macros/macroHelpers.ts":
/*!************************************!*\
  !*** ./src/macros/macroHelpers.ts ***!
  \************************************/
/*! exports provided: basicMacroMatcher, makeMacroRegExp */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "basicMacroMatcher", function() { return basicMacroMatcher; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeMacroRegExp", function() { return makeMacroRegExp; });\nfunction basicMacroMatcher(macroAlias) {\n    var regex = makeMacroRegExp(macroAlias);\n    return function (state) { return !!state.line.match(regex); };\n}\nfunction makeMacroRegExp(macroAlias) {\n    return new RegExp("^" + macroAlias + "\\\\s+", "i");\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/macroHelpers.ts?')},"./src/macros/move.ts":
/*!****************************!*\
  !*** ./src/macros/move.ts ***!
  \****************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return move; });\n/* harmony import */ var _macroHelpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./macroHelpers */ "./src/macros/macroHelpers.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types */ "./src/types.ts");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors */ "./src/errors.ts");\n\n\n\n/**\n * move dest,reg\n *\n * @param state Current assembler state.\n */\nfunction move(state) {\n    if (state.currentPass !== _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `move` macro shouldn\'t be present after the first assembly phase", state);\n        return;\n    }\n    if (state.lineExpressions.length !== 2)\n        Object(_errors__WEBPACK_IMPORTED_MODULE_2__["throwError"])("The `move` macro must take two registers", state);\n    state.line = ""; // Delete this line.\n    state.linesToInsert = "ADDU " + state.lineExpressions[0] + " " + state.lineExpressions[1] + " R0";\n}\nmove.matches = Object(_macroHelpers__WEBPACK_IMPORTED_MODULE_0__["basicMacroMatcher"])("move");\n\n\n//# sourceURL=webpack://MIPSAssem/./src/macros/move.ts?')},"./src/state.ts":
/*!**********************!*\
  !*** ./src/state.ts ***!
  \**********************/
/*! exports provided: makeNewAssemblerState */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeNewAssemblerState", function() { return makeNewAssemblerState; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\nfunction makeNewAssemblerState(opts) {\n    var staticSymbolIndices = [0];\n    staticSymbolIndices.before = Object.create(null);\n    return {\n        buffer: null,\n        dataView: null,\n        line: "",\n        memPos: 0,\n        outIndex: 0,\n        symbols: Object.create(null),\n        symbolsByValue: Object.create(null),\n        symbolOutputMap: opts.symbolOutputMap,\n        currentLabel: null,\n        localSymbols: Object.create(null),\n        staticSymbols: [Object.create(null)],\n        staticSymbolIndices: staticSymbolIndices,\n        currentPass: _types__WEBPACK_IMPORTED_MODULE_0__["AssemblerPhase"].firstPass,\n        lineExpressions: [],\n        evaluatedLineExpressions: null,\n        ifElseStack: [],\n        files: opts.files || Object.create(null),\n        linesToInsert: null,\n    };\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/state.ts?')},"./src/strings.ts":
/*!************************!*\
  !*** ./src/strings.ts ***!
  \************************/
/*! exports provided: unescapeQuotes */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unescapeQuotes", function() { return unescapeQuotes; });\n/**\n * Takes a string like\n * "\\"has quotes\\""\n * and returns\n * "has quotes"\n * @returns Parsed string, or null if could not parse.\n */\nfunction unescapeQuotes(str) {\n    if (str.length < 2)\n        return null;\n    var startQuoteChar = str[0];\n    if (str[str.length - 1] !== startQuoteChar) {\n        return null;\n    }\n    if (startQuoteChar !== "\\"" && startQuoteChar !== "\'") {\n        return null; // Not a string\n    }\n    var output = "";\n    for (var i = 1; i < str.length - 1; i++) {\n        var char = str[i];\n        if (char === "\\\\") {\n            var nextChar = str[i + 1];\n            switch (nextChar) {\n                case "\\\\":\n                case "\\"":\n                case "\'":\n                    output += nextChar;\n                    i++;\n                    continue;\n            }\n        }\n        output += char;\n    }\n    return output;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/strings.ts?')},"./src/symbols.ts":
/*!************************!*\
  !*** ./src/symbols.ts ***!
  \************************/
/*! exports provided: addSymbol, addGlobalSymbol, addLocalSymbol, addStaticLabel, pushStaticLabelStateLevel, popStaticLabelStateLevel, getSymbolValue, getSymbolByValue */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addSymbol", function() { return addSymbol; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addGlobalSymbol", function() { return addGlobalSymbol; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addLocalSymbol", function() { return addLocalSymbol; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addStaticLabel", function() { return addStaticLabel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pushStaticLabelStateLevel", function() { return pushStaticLabelStateLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "popStaticLabelStateLevel", function() { return popStaticLabelStateLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSymbolValue", function() { return getSymbolValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSymbolByValue", function() { return getSymbolByValue; });\n/* harmony import */ var _labels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./labels */ "./src/labels.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\n\n/**\n * Adds a symbol to the symbol table.\n * @param state Assembler state\n * @param name Symbol name\n * @param value Symbol value\n */\nfunction addSymbol(state, name, value) {\n    if (Object(_labels__WEBPACK_IMPORTED_MODULE_0__["isLocalLabel"])(name)) {\n        if (!state.currentLabel) {\n            throw new Error("Local label " + name + " (starts with @@) cannot be used before a global label");\n        }\n        addLocalSymbol(state, name, value);\n    }\n    else if (Object(_labels__WEBPACK_IMPORTED_MODULE_0__["isStaticLabel"])(name)) {\n        addStaticLabel(state, name, value);\n    }\n    else {\n        addGlobalSymbol(state, name, value);\n    }\n}\n/**\n * Adds a global symbol to the symbol table.\n * @param state Assembler state\n * @param name Symbol name\n * @param value Symbol value\n */\nfunction addGlobalSymbol(state, name, value) {\n    state.symbols[name] = value;\n    state.symbolsByValue[value] = name;\n    if (state.symbolOutputMap) {\n        state.symbolOutputMap[name] = state.outIndex;\n    }\n}\n/**\n * Adds a local symbol to the symbol table.\n * @param state Assembler state\n * @param name Local symbol name\n * @param value Local symbol value\n *\n * Assumes !!state.currentLabel\n */\nfunction addLocalSymbol(state, name, value) {\n    var localTable = state.localSymbols[state.currentLabel];\n    if (!localTable) {\n        localTable = state.localSymbols[state.currentLabel] = Object.create(null);\n    }\n    localTable[name] = value;\n}\nfunction addStaticLabel(state, name, value) {\n    var staticsTable = state.staticSymbols[state.staticSymbols.length - 1];\n    staticsTable[name] = value;\n}\nfunction pushStaticLabelStateLevel(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        state.staticSymbols.push(Object.create(null));\n        var prevIndex = state.staticSymbolIndices[state.staticSymbolIndices.length - 1];\n        var newIndex = state.staticSymbols.length - 1;\n        state.staticSymbolIndices.before[newIndex] = prevIndex;\n        state.staticSymbolIndices.push(newIndex);\n    }\n    else {\n        state.staticSymbolIndices.shift();\n    }\n}\nfunction popStaticLabelStateLevel(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        var indices = state.staticSymbolIndices;\n        indices.push(indices.before[indices[indices.length - 1]]);\n    }\n    else {\n        state.staticSymbolIndices.shift();\n    }\n}\nfunction getCurrentStaticSymbols(state) {\n    if (state.currentPass === _types__WEBPACK_IMPORTED_MODULE_1__["AssemblerPhase"].firstPass) {\n        return state.staticSymbols[state.staticSymbolIndices[state.staticSymbolIndices.length - 1]];\n    }\n    else {\n        return state.staticSymbols[state.staticSymbolIndices[0]];\n    }\n}\n/**\n * Retrieves a symbol by name. Works for all: global, static, or local.\n */\nfunction getSymbolValue(state, name) {\n    if (Object(_labels__WEBPACK_IMPORTED_MODULE_0__["isLocalLabel"])(name)) {\n        if (!state.currentLabel) {\n            throw new Error("Local label " + name + " cannot be referenced in the current scope");\n        }\n        var localTable = state.localSymbols[state.currentLabel];\n        if (localTable && Object.prototype.hasOwnProperty.call(localTable, name)) {\n            return localTable[name];\n        }\n        return null;\n    }\n    if (Object(_labels__WEBPACK_IMPORTED_MODULE_0__["isStaticLabel"])(name)) {\n        var staticTable = getCurrentStaticSymbols(state);\n        if (Object.prototype.hasOwnProperty.call(staticTable, name)) {\n            return staticTable[name];\n        }\n        return null;\n    }\n    if (Object.prototype.hasOwnProperty.call(state.symbols, name)) {\n        return state.symbols[name];\n    }\n    return null;\n}\n/**\n * Retrieves a symbol by value from the symbol table.\n * Does not retrieve local labels.\n * TODO: Should do static labels too.\n */\nfunction getSymbolByValue(state, value) {\n    // Don\'t need hasOwnProperty check here, all values in key->value should be truthy strings.\n    return state.symbolsByValue[value] || null;\n}\n\n\n//# sourceURL=webpack://MIPSAssem/./src/symbols.ts?')},"./src/types.ts":
/*!**********************!*\
  !*** ./src/types.ts ***!
  \**********************/
/*! exports provided: AssemblerPhase */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssemblerPhase", function() { return AssemblerPhase; });\nvar AssemblerPhase;\n(function (AssemblerPhase) {\n    AssemblerPhase[AssemblerPhase["firstPass"] = 0] = "firstPass";\n    AssemblerPhase[AssemblerPhase["secondPass"] = 1] = "secondPass";\n})(AssemblerPhase || (AssemblerPhase = {}));\n\n\n//# sourceURL=webpack://MIPSAssem/./src/types.ts?')}})},module.exports=factory()},function(e,t,n){"use strict";var r=n(139),i=n(140);e.exports=function(e,t){var n=t.getStartKey(),a=t.getStartOffset(),o=t.getEndKey(),s=t.getEndOffset(),l=i(e,t).getBlockMap(),c=l.keySeq(),u=c.indexOf(n),d=c.indexOf(o)+1;return r(l.slice(u,d).map(function(e,t){var r=e.getText(),i=e.getCharacterList();return n===o?e.merge({text:r.slice(a,s),characterList:i.slice(a,s)}):t===n?e.merge({text:r.slice(a),characterList:i.slice(a)}):t===o?e.merge({text:r.slice(0,s),characterList:i.slice(0,s)}):e}))}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(144),a=n(5),o=n(6),s=(0,a.Map)(),l=0;function c(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var u={getLastCreatedEntityKey:function(){return c("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),u.__getLastCreatedEntityKey()},create:function(e,t,n){return c("DraftEntity.create","contentState.createEntity"),u.__create(e,t,n)},add:function(e){return c("DraftEntity.add","contentState.addEntity"),u.__add(e)},get:function(e){return c("DraftEntity.get","contentState.getEntity"),u.__get(e)},mergeData:function(e,t){return c("DraftEntity.mergeData","contentState.mergeEntityData"),u.__mergeData(e,t)},replaceData:function(e,t){return c("DraftEntity.replaceData","contentState.replaceEntityData"),u.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+l},__create:function(e,t,n){return u.__add(new i({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++l;return s=s.set(t,e),t},__get:function(e){var t=s.get(e);return t||o(!1),t},__mergeData:function(e,t){var n=u.__get(e),i=r({},n.getData(),t),a=n.set("data",i);return s=s.set(e,a),a},__replaceData:function(e,t){var n=u.__get(e).set("data",t);return s=s.set(e,n),n}};e.exports=u},function(e,t,n){"use strict";var r={encode:function(e,t,n){return e+"-"+t+"-"+n},decode:function(e){var t=e.split("-"),n=t[0],r=t[1],i=t[2];return{blockKey:n,decoratorKey:parseInt(r,10),leafKey:parseInt(i,10)}}};e.exports=r},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.openFile=function(e,t){void 0===e&&(e="");var n=r;n||(n=r={});var i=e||"default",a=n[i];a||((a=n[i]=document.createElement("input")).type="file"),a.accept=e;var o=function(e){t(e),a.removeEventListener("change",o),a.value=null};a.addEventListener("change",o),a.click()}},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}}:e.exports=t}).call(this,n(76))},function(e,t,n){var r=n(64),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){if(t.from&&t.from!==Uint8Array.from)return t.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,n)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var n=new t(e);return n.fill(0),n},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(64).Buffer)},function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),a=/Edge\/(\d+)/.exec(e),o=r||i||a,s=o&&(r?document.documentMode||6:+(a||i)[1]),l=!a&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!a&&/Chrome\//.test(e),d=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),h=/PhantomJS/.test(e),m=!a&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),_=/Android/.test(e),g=m||_||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=m||/Mac/.test(t),y=/\bCrOS\b/.test(e),A=/win/i.test(t),x=d&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(d=!1,l=!0);var S=v&&(c||d&&(null==x||x<12.11)),b=n||o&&s>=9;function w(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var E,P=function(e,t){var n=e.className,r=w(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function C(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function T(e,t){return C(e).appendChild(t)}function V(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)i.appendChild(t[a]);return i}function F(e,t,n,r){var i=V(e,t,n,r);return i.setAttribute("role","presentation"),i}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function O(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function R(e,t){var n=e.className;w(t).test(n)||(e.className+=(n?" ":"")+t)}function M(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!w(n[r]).test(t)&&(t+=" "+n[r]);return t}E=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var L=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function k(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function I(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=r||0,o=i||0;;){var s=e.indexOf("\t",a);if(s<0||s>=t)return o+(t-a);o+=s-a,o+=n-o%n,a=s+1}}m?L=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(L=function(e){try{e.select()}catch(e){}});var j=function(){this.id=null};function N(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}j.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var U=30,z={toString:function(){return"CodeMirror.Pass"}},G={scroll:!1},W={origin:"*mouse"},H={origin:"+move"};function q(e,t,n){for(var r=0,i=0;;){var a=e.indexOf("\t",r);-1==a&&(a=e.length);var o=a-r;if(a==e.length||i+o>=t)return r+Math.min(o,t-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=t)return r}}var K=[""];function Y(e){for(;K.length<=e;)K.push($(K)+" ");return K[e]}function $(e){return e[e.length-1]}function X(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Z(){}function J(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&k(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function ae(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+r}}function se(e,t,r){var i=this;this.input=r,i.scrollbarFiller=V("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=V("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=F("div",null,"CodeMirror-code"),i.selectionDiv=V("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=V("div",null,"CodeMirror-cursors"),i.measure=V("div",null,"CodeMirror-measure"),i.lineMeasure=V("div",null,"CodeMirror-measure"),i.lineSpace=F("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var a=F("div",[i.lineSpace],"CodeMirror-lines");i.mover=V("div",[a],null,"position: relative"),i.sizer=V("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=V("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),i.gutters=V("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=V("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=V("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),o&&s<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&g||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function le(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(t<a){n=i;break}t-=a}return n.lines[t]}function ce(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var a=e.text;i==n.line&&(a=a.slice(0,n.ch)),i==t.line&&(a=a.slice(t.ch)),r.push(a),++i}),r}function ue(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function de(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function pe(e){if(null==e.parent)return null;for(var t=e.parent,n=N(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function fe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],a=i.height;if(t<a){e=i;continue e}t-=a,n+=i.chunkSize()}return n}while(!e.lines);for(var o=0;o<e.lines.length;++o){var s=e.lines[o],l=s.height;if(t<l)break;t-=l}return n+o}function he(e,t){return t>=e.first&&t<e.first+e.size}function me(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function _e(e,t,n){if(void 0===n&&(n=null),!(this instanceof _e))return new _e(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ge(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==ge(e,t)}function ye(e){return _e(e.line,e.ch)}function Ae(e,t){return ge(e,t)<0?t:e}function xe(e,t){return ge(e,t)<0?e:t}function Se(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function be(e,t){if(t.line<e.first)return _e(e.first,0);var n=e.first+e.size-1;return t.line>n?_e(n,le(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?_e(e.line,t):n<0?_e(e.line,0):e}(t,le(e,t.line).text.length)}function we(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=be(e,t[r]);return n}var Ee=!1,Pe=!1;function Ce(e,t,n){this.marker=e,this.from=t,this.to=n}function Te(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Ve(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Fe(e,t){if(t.full)return null;var n=he(e,t.from.line)&&le(e,t.from.line).markedSpans,r=he(e,t.to.line)&&le(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,a=t.to.ch,o=0==ge(t.from,t.to),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],o=a.marker,s=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);if(s||a.from==t&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var l=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);(r||(r=[])).push(new Ce(o,a.from,l?null:a.to))}}return r}(n,i,o),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var a=e[i],o=a.marker,s=null==a.to||(o.inclusiveRight?a.to>=t:a.to>t);if(s||a.from==t&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var l=null==a.from||(o.inclusiveLeft?a.from<=t:a.from<t);(r||(r=[])).push(new Ce(o,l?null:a.from-t,null==a.to?null:a.to-t))}}return r}(r,a,o),c=1==t.text.length,u=$(t.text).length+(c?i:0);if(s)for(var d=0;d<s.length;++d){var p=s[d];if(null==p.to){var f=Te(l,p.marker);f?c&&(p.to=null==f.to?null:f.to+u):p.to=i}}if(l)for(var h=0;h<l.length;++h){var m=l[h];if(null!=m.to&&(m.to+=u),null==m.from){var _=Te(s,m.marker);_||(m.from=u,c&&(s||(s=[])).push(m))}else m.from+=u,c&&(s||(s=[])).push(m)}s&&(s=De(s)),l&&l!=s&&(l=De(l));var g=[s];if(!c){var v,y=t.text.length-2;if(y>0&&s)for(var A=0;A<s.length;++A)null==s[A].to&&(v||(v=[])).push(new Ce(s[A].marker,null,null));for(var x=0;x<y;++x)g.push(v);g.push(l)}return g}function De(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Oe(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Re(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Me(e){return e.inclusiveLeft?-1:0}function Le(e){return e.inclusiveRight?1:0}function Be(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),a=ge(r.from,i.from)||Me(e)-Me(t);if(a)return-a;var o=ge(r.to,i.to)||Le(e)-Le(t);return o||t.id-e.id}function ke(e,t){var n,r=Pe&&e.markedSpans;if(r)for(var i=void 0,a=0;a<r.length;++a)(i=r[a]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Be(n,i.marker)<0)&&(n=i.marker);return n}function Ie(e){return ke(e,!0)}function je(e){return ke(e,!1)}function Ne(e,t){var n,r=Pe&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var a=r[i];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!n||Be(n,a.marker)<0)&&(n=a.marker)}return n}function Ue(e,t,n,r,i){var a=le(e,t),o=Pe&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var c=l.marker.find(0),u=ge(c.from,n)||Me(l.marker)-Me(i),d=ge(c.to,r)||Le(l.marker)-Le(i);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(c.to,n)>=0:ge(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(c.from,r)<=0:ge(c.from,r)<0)))return!0}}}function ze(e){for(var t;t=Ie(e);)e=t.find(-1,!0).line;return e}function Ge(e,t){var n=le(e,t),r=ze(n);return n==r?t:pe(r)}function We(e,t){if(t>e.lastLine())return t;var n,r=le(e,t);if(!He(e,r))return t;for(;n=je(r);)r=n.find(1,!0).line;return pe(r)+1}function He(e,t){var n=Pe&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&qe(e,t,r))return!0}}function qe(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return qe(e,r.line,Te(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,a=0;a<t.markedSpans.length;++a)if((i=t.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&qe(e,t,i))return!0}function Ke(e){e=ze(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var o=0;o<a.children.length;++o){var s=a.children[o];if(s==n)break;t+=s.height}return t}function Ye(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Ie(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=je(r);){var a=t.find(0,!0);n-=r.text.length-a.from.ch,r=a.to.line,n+=r.text.length-a.to.ch}return n}function $e(e){var t=e.display,n=e.doc;t.maxLine=le(n,n.first),t.maxLineLength=Ye(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ye(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Xe=null;function Ze(e,t,n){var r;Xe=null;for(var i=0;i<e.length;++i){var a=e[i];if(a.from<t&&a.to>t)return i;a.to==t&&(a.from!=a.to&&"before"==n?r=i:Xe=i),a.from==t&&(a.from!=a.to&&"before"!=n?r=i:Xe=i)}return null!=r?r:Xe}var Je=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,i=/[LRr]/,a=/[Lb1n]/,o=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(l,c){var u,d="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!n.test(l))return!1;for(var p=l.length,f=[],h=0;h<p;++h)f.push((u=l.charCodeAt(h))<=247?e.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?t.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var m=0,_=d;m<p;++m){var g=f[m];"m"==g?f[m]=_:_=g}for(var v=0,y=d;v<p;++v){var A=f[v];"1"==A&&"r"==y?f[v]="n":i.test(A)&&(y=A,"r"==A&&(f[v]="R"))}for(var x=1,S=f[0];x<p-1;++x){var b=f[x];"+"==b&&"1"==S&&"1"==f[x+1]?f[x]="1":","!=b||S!=f[x+1]||"1"!=S&&"n"!=S||(f[x]=S),S=b}for(var w=0;w<p;++w){var E=f[w];if(","==E)f[w]="N";else if("%"==E){var P=void 0;for(P=w+1;P<p&&"%"==f[P];++P);for(var C=w&&"!"==f[w-1]||P<p&&"1"==f[P]?"1":"N",T=w;T<P;++T)f[T]=C;w=P-1}}for(var V=0,F=d;V<p;++V){var D=f[V];"L"==F&&"1"==D?f[V]="L":i.test(D)&&(F=D)}for(var O=0;O<p;++O)if(r.test(f[O])){var R=void 0;for(R=O+1;R<p&&r.test(f[R]);++R);for(var M="L"==(O?f[O-1]:d),L="L"==(R<p?f[R]:d),B=M==L?M?"L":"R":d,k=O;k<R;++k)f[k]=B;O=R-1}for(var I,j=[],N=0;N<p;)if(a.test(f[N])){var U=N;for(++N;N<p&&a.test(f[N]);++N);j.push(new s(0,U,N))}else{var z=N,G=j.length;for(++N;N<p&&"L"!=f[N];++N);for(var W=z;W<N;)if(o.test(f[W])){z<W&&j.splice(G,0,new s(1,z,W));var H=W;for(++W;W<N&&o.test(f[W]);++W);j.splice(G,0,new s(2,H,W)),z=W}else++W;z<N&&j.splice(G,0,new s(1,z,N))}return"ltr"==c&&(1==j[0].level&&(I=l.match(/^\s+/))&&(j[0].from=I[0].length,j.unshift(new s(0,0,I[0].length))),1==$(j).level&&(I=l.match(/\s+$/))&&($(j).to-=I[0].length,j.push(new s(0,p-I[0].length,p)))),"rtl"==c?j.reverse():j}}();function Qe(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var et=[],tt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(n)}};function nt(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var a=N(i,n);a>-1&&(r[t]=i.slice(0,a).concat(i.slice(a+1)))}}}function it(e,t){var n=nt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function at(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,n||t.type,e,t),dt(t)||t.codemirrorIgnore}function ot(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==N(n,t[r])&&n.push(t[r])}function st(e,t){return nt(e,t).length>0}function lt(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ut(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function dt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function pt(e){ct(e),ut(e)}function ft(e){return e.target||e.srcElement}function ht(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var mt,_t,gt=function(){if(o&&s<9)return!1;var e=V("div");return"draggable"in e||"dragDrop"in e}();function vt(e){if(null==mt){var t=V("span","");T(e,V("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(mt=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&s<8))}var n=mt?V("span",""):V("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function yt(e){if(null!=_t)return _t;var t=T(e,document.createTextNode("AA")),n=E(t,0,1).getBoundingClientRect(),r=E(t,1,2).getBoundingClientRect();return C(e),!(!n||n.left==n.right)&&(_t=r.right-n.right<3)}var At,xt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var a=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),t+=o+1):(n.push(a),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},St=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},bt="oncopy"in(At=V("div"))||(At.setAttribute("oncopy","return;"),"function"==typeof At.oncopy),wt=null,Et={},Pt={};function Ct(e){if("string"==typeof e&&Pt.hasOwnProperty(e))e=Pt[e];else if(e&&"string"==typeof e.name&&Pt.hasOwnProperty(e.name)){var t=Pt[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ct("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ct("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Tt(e,t){t=Ct(t);var n=Et[t.name];if(!n)return Tt(e,"text/plain");var r=n(e,t);if(Vt.hasOwnProperty(t.name)){var i=Vt[t.name];for(var a in i)i.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)r[o]=t.modeProps[o];return r}var Vt={};function Ft(e,t){var n=Vt.hasOwnProperty(e)?Vt[e]:Vt[e]={};k(t,n)}function Dt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ot(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Rt(e,t,n){return!e.startState||e.startState(t,n)}var Mt=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Mt.prototype.eol=function(){return this.pos>=this.string.length},Mt.prototype.sol=function(){return this.pos==this.lineStart},Mt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Mt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Mt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Mt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Mt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Mt.prototype.skipToEnd=function(){this.pos=this.string.length},Mt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Mt.prototype.backUp=function(e){this.pos-=e},Mt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Mt.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Mt.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},a=this.string.substr(this.pos,e.length);if(i(a)==i(e))return!1!==t&&(this.pos+=e.length),!0},Mt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Mt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Mt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Mt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Lt=function(e,t){this.state=e,this.lookAhead=t},Bt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function kt(e,t,n,r){var i=[e.state.modeGen],a={};qt(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},a,r);for(var o=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],l=1,c=0;n.state=!0,qt(e,t.text,s.mode,n,function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var a=i[n+1];i[n+1]=(a?a+" ":"")+"overlay "+t}},a),n.state=o,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function It(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=jt(e,pe(t)),i=t.text.length>e.options.maxHighlightLength&&Dt(e.doc.mode,r.state),a=kt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function jt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Bt(r,!0,t);var a=function(e,t,n){for(var r,i,a=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>o;--s){if(s<=a.first)return a.first;var l=le(a,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof Lt?c.lookAhead:0)<=a.modeFrontier))return s;var u=I(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}(e,t,n),o=a>r.first&&le(r,a-1).stateAfter,s=o?Bt.fromSaved(r,o,a):new Bt(r,Rt(r.mode),a);return r.iter(a,t,function(n){Nt(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function Nt(e,t,n,r){var i=e.doc.mode,a=new Mt(t,e.options.tabSize,n);for(a.start=a.pos=r||0,""==t&&Ut(i,n.state);!a.eol();)zt(i,a,n.state),a.start=a.pos}function Ut(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ot(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function zt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ot(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Bt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Bt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Bt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Bt.fromSaved=function(e,t,n){return t instanceof Lt?new Bt(e,Dt(e.mode,t.state),n,t.lookAhead):new Bt(e,Dt(e.mode,t),n)},Bt.prototype.save=function(e){var t=!1!==e?Dt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Lt(t,this.maxLookAhead):t};var Gt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Wt(e,t,n,r){var i,a=e.doc,o=a.mode;t=be(a,t);var s,l=le(a,t.line),c=jt(e,t.line,n),u=new Mt(l.text,e.options.tabSize,c);for(r&&(s=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=zt(o,u,c.state),r&&s.push(new Gt(u,i,Dt(a.mode,c.state)));return r?s:new Gt(u,i,c.state)}function Ht(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function qt(e,t,n,r,i,a,o){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,d=new Mt(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&Ht(Ut(n,r.state),a);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,o&&Nt(e,t,r,d.pos),d.pos=t.length,l=null):l=Ht(zt(n,d,r.state,p),a),p){var f=p[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||u!=l){for(;c<d.start;)c=Math.min(d.start,c+5e3),i(c,u);u=l}d.start=d.pos}for(;c<d.pos;){var h=Math.min(d.pos,c+5e3);i(h,u),c=h}}var Kt=function(e,t,n){this.text=e,Re(this,t),this.height=n?n(this):1};function Yt(e){e.parent=null,Oe(e)}Kt.prototype.lineNo=function(){return pe(this)},lt(Kt);var $t={},Xt={};function Zt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Xt:$t;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Jt(e,t){var n=F("span",null,null,l?"padding-right: .1px":null),r={pre:F("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,o=void 0;r.pos=0,r.addToken=en,yt(e.display.measure)&&(o=Qe(a,e.doc.direction))&&(r.addToken=tn(r.addToken,o)),r.map=[];var s=t!=e.display.externalMeasured&&pe(a);rn(a,r,It(e,a,s)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=M(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=M(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(vt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=M(r.pre.className,r.textClass||"")),r}function Qt(e){var t=V("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function en(e,t,n,r,i,a,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var a=e.charAt(i);" "!=a||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(a=""),r+=a,n=" "==a}return r}(t,e.trailingSpace):t,d=e.cm.state.specialChars,p=!1;if(d.test(t)){c=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var h=d.exec(t),m=h?h.index-f:t.length-f;if(m){var _=document.createTextNode(u.slice(f,f+m));o&&s<9?c.appendChild(V("span",[_])):c.appendChild(_),e.map.push(e.pos,e.pos+m,_),e.col+=m,e.pos+=m}if(!h)break;f+=m+1;var g=void 0;if("\t"==h[0]){var v=e.cm.options.tabSize,y=v-e.col%v;(g=c.appendChild(V("span",Y(y),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=y}else"\r"==h[0]||"\n"==h[0]?((g=c.appendChild(V("span","\r"==h[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1):((g=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),o&&s<9?c.appendChild(V("span",[g])):c.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),o&&s<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||p||a){var A=n||"";r&&(A+=r),i&&(A+=i);var x=V("span",[c],A,a);if(l)for(var S in l)l.hasOwnProperty(S)&&"style"!=S&&"class"!=S&&x.setAttribute(S,l[S]);return e.content.appendChild(x)}e.content.appendChild(c)}}function tn(e,t){return function(n,r,i,a,o,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var d=void 0,p=0;p<t.length&&!((d=t[p]).to>c&&d.from<=c);p++);if(d.to>=u)return e(n,r,i,a,o,s,l);e(n,r.slice(0,d.to-c),i,a,null,s,l),a=null,r=r.slice(d.to-c),c=d.to}}}function nn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function rn(e,t,n){var r=e.markedSpans,i=e.text,a=0;if(r)for(var o,s,l,c,u,d,p,f=i.length,h=0,m=1,_="",g=0;;){if(g==h){l=c=u=s="",p=null,d=null,g=1/0;for(var v=[],y=void 0,A=0;A<r.length;++A){var x=r[A],S=x.marker;if("bookmark"==S.type&&x.from==h&&S.widgetNode)v.push(S);else if(x.from<=h&&(null==x.to||x.to>h||S.collapsed&&x.to==h&&x.from==h)){if(null!=x.to&&x.to!=h&&g>x.to&&(g=x.to,c=""),S.className&&(l+=" "+S.className),S.css&&(s=(s?s+";":"")+S.css),S.startStyle&&x.from==h&&(u+=" "+S.startStyle),S.endStyle&&x.to==g&&(y||(y=[])).push(S.endStyle,x.to),S.title&&((p||(p={})).title=S.title),S.attributes)for(var b in S.attributes)(p||(p={}))[b]=S.attributes[b];S.collapsed&&(!d||Be(d.marker,S)<0)&&(d=x)}else x.from>h&&g>x.from&&(g=x.from)}if(y)for(var w=0;w<y.length;w+=2)y[w+1]==g&&(c+=" "+y[w]);if(!d||d.from==h)for(var E=0;E<v.length;++E)nn(t,0,v[E]);if(d&&(d.from||0)==h){if(nn(t,(null==d.to?f+1:d.to)-h,d.marker,null==d.from),null==d.to)return;d.to==h&&(d=!1)}}if(h>=f)break;for(var P=Math.min(f,g);;){if(_){var C=h+_.length;if(!d){var T=C>P?_.slice(0,P-h):_;t.addToken(t,T,o?o+l:l,u,h+T.length==g?c:"",s,p)}if(C>=P){_=_.slice(P-h),h=P;break}h=C,u=""}_=i.slice(a,a=n[m++]),o=Zt(n[m++],t.cm.options)}}else for(var V=1;V<n.length;V+=2)t.addToken(t,i.slice(a,a=n[V]),Zt(n[V+1],t.cm.options))}function an(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=je(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?pe($(this.rest))-n+1:1,this.node=this.text=null,this.hidden=He(e,t)}function on(e,t,n){for(var r,i=[],a=t;a<n;a=r){var o=new an(e.doc,le(e.doc,a),a);r=a+o.size,i.push(o)}return i}var sn=null,ln=null;function cn(e,t){var n=nt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:ln?r=ln:(r=ln=[],setTimeout(un,0));for(var a=function(e){r.push(function(){return n[e].apply(null,i)})},o=0;o<n.length;++o)a(o)}}function un(){var e=ln;ln=null;for(var t=0;t<e.length;++t)e[t]()}function dn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var a=t.changes[i];"text"==a?hn(e,t):"gutter"==a?_n(e,t,n,r):"class"==a?mn(e,t):"widget"==a&&gn(e,t,r)}t.changes=null}function pn(e){return e.node==e.text&&(e.node=V("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&s<8&&(e.node.style.zIndex=2)),e.node}function fn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Jt(e,t)}function hn(e,t){var n=t.text.className,r=fn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,mn(e,t)):n&&(t.text.className=n)}function mn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=pn(t);t.background=r.insertBefore(V("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?pn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function _n(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=pn(t);t.gutterBackground=V("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var o=pn(t),s=t.gutter=V("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(V("div",me(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=a.hasOwnProperty(c)&&a[c];u&&s.appendChild(V("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);yn(e,t,n)}function vn(e,t,n,r){var i=fn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),mn(e,t),_n(e,t,n,r),yn(e,t,r),t.node}function yn(e,t,n){if(An(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)An(e,t.rest[r],t,n,!1)}function An(e,t,n,r,i){if(t.widgets)for(var a=pn(n),o=0,s=t.widgets;o<s.length;++o){var l=s[o],c=V("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),xn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),cn(l,"redraw")}}function xn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Sn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),T(t.display.measure,V("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function bn(e,t){for(var n=ft(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function wn(e){return e.lineSpace.offsetTop}function En(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Pn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=T(e.measure,V("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Cn(e){return U-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Cn(e)-e.display.barWidth}function Vn(e){return e.display.scroller.clientHeight-Cn(e)-e.display.barHeight}function Fn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(pe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Dn(e,t,n,r){return Mn(e,Rn(e,t),n,r)}function On(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[cr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Rn(e,t){var n=pe(t),r=On(e,n);r&&!r.text?r=null:r&&r.changes&&(dn(e,r,n,ir(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=pe(t=ze(t)),r=e.display.externalMeasured=new an(e.doc,t,n);r.lineN=n;var i=r.built=Jt(e,r);return r.text=i.pre,T(e.display.lineMeasure,i.pre),r}(e,t));var i=Fn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Mn(e,t,n,r,i){t.before&&(n=-1);var a,l=n+(r||"");return t.cache.hasOwnProperty(l)?a=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var a=t.measure.heights=[];if(r){t.measure.width=i;for(var o=t.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1];Math.abs(l.bottom-c.bottom)>2&&a.push((l.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(a=function(e,t,n,r){var i,a=kn(t.map,n,r),l=a.node,c=a.start,u=a.end,d=a.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&ie(t.line.text.charAt(a.coverStart+c));)--c;for(;a.coverStart+u<a.coverEnd&&ie(t.line.text.charAt(a.coverStart+u));)++u;if((i=o&&s<9&&0==c&&u==a.coverEnd-a.coverStart?l.parentNode.getBoundingClientRect():In(E(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,d="right"}o&&s<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=wt)return wt;var t=T(e,V("span","x")),n=t.getBoundingClientRect(),r=E(t,0,1).getBoundingClientRect();return wt=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var f;c>0&&(d=r="right"),i=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==r?f.length-1:0]:l.getBoundingClientRect()}if(o&&s<9&&!c&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+rr(e.display),top:h.top,bottom:h.bottom}:Bn}for(var m=i.top-t.rect.top,_=i.bottom-t.rect.top,g=(m+_)/2,v=t.view.measure.heights,y=0;y<v.length-1&&!(g<v[y]);y++);var A=y?v[y-1]:0,x=v[y],S={left:("right"==d?i.right:i.left)-t.rect.left,right:("left"==d?i.left:i.right)-t.rect.left,top:A,bottom:x};return i.left||i.right||(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=m,S.rbottom=_),S}(e,t,n,r)).bogus||(t.cache[l]=a)),{left:a.left,right:a.right,top:i?a.rtop:a.top,bottom:i?a.rbottom:a.bottom}}var Ln,Bn={left:0,right:0,top:0,bottom:0};function kn(e,t,n){for(var r,i,a,o,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(i=0,a=1,o="left"):t<l?a=1+(i=t-s):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(a=l-s)-1,t>=l&&(o="right")),null!=i){if(r=e[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(o=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],o="left";if("right"==n&&i==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],o="right";break}return{node:r,start:i,end:a,collapse:o,coverStart:s,coverEnd:l}}function In(e,t){var n=Bn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function jn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Nn(e){e.display.externalMeasure=null,C(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)jn(e.display.view[t])}function Un(e){Nn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function zn(){return u&&_?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Gn(){return u&&_?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Sn(e.widgets[n]));return t}function Hn(e,t,n,r,i){if(!i){var a=Wn(t);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var o=Ke(t);if("local"==r?o+=wn(e.display):o-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==r?0:Gn());var l=s.left+("window"==r?0:zn());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function qn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=zn(),i-=Gn();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function Kn(e,t,n,r,i){return r||(r=le(e.doc,t.line)),Hn(e,r,Dn(e,r,t.ch,i),n)}function Yn(e,t,n,r,i,a){function o(t,o){var s=Mn(e,i,t,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,Hn(e,r,s,n)}r=r||le(e.doc,t.line),i||(i=Rn(e,r));var s=Qe(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return o("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=s[t],i=1==r.level;return o(n?e-1:e,i!=n)}var d=Ze(s,l,c),p=Xe,f=u(l,d,"before"==c);return null!=p&&(f.other=u(l,p,"before"!=c)),f}function $n(e,t){var n=0;t=be(e.doc,t),e.options.lineWrapping||(n=rr(e.display)*t.ch);var r=le(e.doc,t.line),i=Ke(r)+wn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(e,t,n,r,i){var a=_e(e,t,n);return a.xRel=i,r&&(a.outside=!0),a}function Zn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Xn(r.first,0,null,!0,-1);var i=fe(r,n),a=r.first+r.size-1;if(i>a)return Xn(r.first+r.size-1,le(r,a).text.length,null,!0,1);t<0&&(t=0);for(var o=le(r,i);;){var s=tr(e,o,i,t,n),l=Ne(o,s.ch+(s.xRel>0?1:0));if(!l)return s;var c=l.find(1);if(c.line==i)return c;o=le(r,i=c.line)}}function Jn(e,t,n,r){r-=Wn(t);var i=t.text.length,a=oe(function(t){return Mn(e,n,t-1).bottom<=r},i,0);return i=oe(function(t){return Mn(e,n,t).top>r},a,i),{begin:a,end:i}}function Qn(e,t,n,r){n||(n=Rn(e,t));var i=Hn(e,t,Mn(e,n,r),"line").top;return Jn(e,t,n,i)}function er(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function tr(e,t,n,r,i){i-=Ke(t);var a=Rn(e,t),o=Wn(t),s=0,l=t.text.length,c=!0,u=Qe(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?function(e,t,n,r,i,a,o){var s=Jn(e,t,r,o),l=s.begin,c=s.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,p=0;p<i.length;p++){var f=i[p];if(!(f.from>=c||f.to<=l)){var h=1!=f.level,m=Mn(e,r,h?Math.min(c,f.to)-1:Math.max(l,f.from)).right,_=m<a?a-m+1e9:m-a;(!u||d>_)&&(u=f,d=_)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}:function(e,t,n,r,i,a,o){var s=oe(function(s){var l=i[s],c=1!=l.level;return er(Yn(e,_e(n,c?l.to:l.from,c?"before":"after"),"line",t,r),a,o,!0)},0,i.length-1),l=i[s];if(s>0){var c=1!=l.level,u=Yn(e,_e(n,c?l.from:l.to,c?"after":"before"),"line",t,r);er(u,a,o,!0)&&u.top>o&&(l=i[s-1])}return l})(e,t,n,a,u,r,i);c=1!=d.level,s=c?d.from:d.to-1,l=c?d.to:d.from-1}var p,f,h=null,m=null,_=oe(function(t){var n=Mn(e,a,t);return n.top+=o,n.bottom+=o,!!er(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(h=t,m=n),!0)},s,l),g=!1;if(m){var v=r-m.left<m.right-r,y=v==c;_=h+(y?0:1),f=y?"after":"before",p=v?m.left:m.right}else{c||_!=l&&_!=s||_++,f=0==_?"after":_==t.text.length?"before":Mn(e,a,_-(c?1:0)).bottom+o<=i==c?"after":"before";var A=Yn(e,_e(n,_,f),"line",t,a);p=A.left,g=i<A.top||i>=A.bottom}return _=ae(t.text,_,1),Xn(n,_,f,g,r-p)}function nr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ln){Ln=V("pre");for(var t=0;t<49;++t)Ln.appendChild(document.createTextNode("x")),Ln.appendChild(V("br"));Ln.appendChild(document.createTextNode("x"))}T(e.measure,Ln);var n=Ln.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),C(e.measure),n||1}function rr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=V("span","xxxxxxxxxx"),n=V("pre",[t]);T(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function ir(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,a=t.gutters.firstChild,o=0;a;a=a.nextSibling,++o)n[e.options.gutters[o]]=a.offsetLeft+a.clientLeft+i,r[e.options.gutters[o]]=a.clientWidth;return{fixedPos:ar(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ar(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function or(e){var t=nr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/rr(e.display)-3);return function(i){if(He(e.doc,i))return 0;var a=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(a+=i.widgets[o].height);return n?a+(Math.ceil(i.text.length/r)||1)*t:a+t}}function sr(e){var t=e.doc,n=or(e);t.iter(function(e){var t=n(e);t!=e.height&&de(e,t)})}function lr(e,t,n,r){var i=e.display;if(!n&&"true"==ft(t).getAttribute("cm-not-content"))return null;var a,o,s=i.lineSpace.getBoundingClientRect();try{a=t.clientX-s.left,o=t.clientY-s.top}catch(t){return null}var l,c=Zn(e,a,o);if(r&&1==c.xRel&&(l=le(e.doc,c.line).text).length==c.ch){var u=I(l,l.length,e.options.tabSize)-l.length;c=_e(c.line,Math.max(0,Math.round((a-Pn(e.display).left)/rr(e.display))-u))}return c}function cr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function ur(e){e.display.input.showSelection(e.display.input.prepareSelection())}function dr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++)if(t||o!=n.sel.primIndex){var s=n.sel.ranges[o];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&pr(e,s.head,i),l||hr(e,s,a)}}return r}function pr(e,t,n){var r=Yn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(V("div","","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var a=n.appendChild(V("div","","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=r.other.left+"px",a.style.top=r.other.top+"px",a.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function fr(e,t){return e.top-t.top||e.left-t.left}function hr(e,t,n){var r=e.display,i=e.doc,a=document.createDocumentFragment(),o=Pn(e.display),s=o.left,l=Math.max(r.sizerWidth,Tn(e)-r.sizer.offsetLeft)-o.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),a.appendChild(V("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function d(t,n,r){var a,o,d=le(i,t),p=d.text.length;function f(n,r){return Kn(e,_e(t,n),"div",d,r)}function h(t,n,r){var i=Qn(e,d,null,t),a="ltr"==n==("after"==r)?"left":"right",o="after"==r?i.begin:i.end-(/\s/.test(d.text.charAt(i.end-1))?2:1);return f(o,a)[a]}var m=Qe(d,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,a=0;a<e.length;++a){var o=e[a];(o.from<n&&o.to>t||t==n&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr",a),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?p:r,function(e,t,i,d){var _="ltr"==i,g=f(e,_?"left":"right"),v=f(t-1,_?"right":"left"),y=null==n&&0==e,A=null==r&&t==p,x=0==d,S=!m||d==m.length-1;if(v.top-g.top<=3){var b=(c?y:A)&&x,w=(c?A:y)&&S,E=b?s:(_?g:v).left,P=w?l:(_?v:g).right;u(E,g.top,P-E,g.bottom)}else{var C,T,V,F;_?(C=c&&y&&x?s:g.left,T=c?l:h(e,i,"before"),V=c?s:h(t,i,"after"),F=c&&A&&S?l:v.right):(C=c?h(e,i,"before"):s,T=!c&&y&&x?l:g.right,V=!c&&A&&S?s:v.left,F=c?h(t,i,"after"):l),u(C,g.top,T-C,g.bottom),g.bottom<v.top&&u(s,g.bottom,null,v.top),u(V,v.top,F-V,v.bottom)}(!a||fr(g,a)<0)&&(a=g),fr(v,a)<0&&(a=v),(!o||fr(g,o)<0)&&(o=g),fr(v,o)<0&&(o=v)}),{start:a,end:o}}var p=t.from(),f=t.to();if(p.line==f.line)d(p.line,p.ch,f.ch);else{var h=le(i,p.line),m=le(i,f.line),_=ze(h)==ze(m),g=d(p.line,p.ch,_?h.text.length+1:null).end,v=d(f.line,_?0:null,f.ch).start;_&&(g.top<v.top-2?(u(g.right,g.top,null,g.bottom),u(s,v.top,v.left,v.bottom)):u(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&u(s,g.bottom,null,v.top)}n.appendChild(a)}function mr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function _r(e){e.state.focused||(e.display.input.focus(),vr(e))}function gr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))},100)}function vr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),mr(e))}function yr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,P(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ar(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],a=e.options.lineWrapping,l=void 0,c=0;if(!i.hidden){if(o&&s<8){var u=i.node.offsetTop+i.node.offsetHeight;l=u-n,n=u}else{var d=i.node.getBoundingClientRect();l=d.bottom-d.top,!a&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-d.left-1)}var p=i.line.height-l;if((p>.005||p<-.005)&&(de(i.line,l),xr(i.line),i.rest))for(var f=0;f<i.rest.length;f++)xr(i.rest[f]);if(c>e.display.sizerWidth){var h=Math.ceil(c/rr(e.display));h>e.display.maxLineLength&&(e.display.maxLineLength=h,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function xr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Sr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-wn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,a=fe(t,r),o=fe(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<a?(a=s,o=fe(t,Ke(le(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(a=fe(t,Ke(le(t,l))-e.wrapper.clientHeight),o=l)}return{from:a,to:Math.max(o,a+1)}}function br(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=ar(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,a=r+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=a),n[o].gutterBackground&&(n[o].gutterBackground.style.left=a));var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function wr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=me(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(V("div",[V("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,o=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-o)+1,r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e),!0}return!1}function Er(e,t){var n=e.display,r=nr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=Vn(e),o={};t.bottom-t.top>a&&(t.bottom=t.top+a);var s=e.doc.height+En(n),l=t.top<r,c=t.bottom>s-r;if(t.top<i)o.scrollTop=l?0:t.top;else if(t.bottom>i+a){var u=Math.min(t.top,(c?s:t.bottom)-a);u!=i&&(o.scrollTop=u)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,p=Tn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),f=t.right-t.left>p;return f&&(t.right=t.left+p),t.left<10?o.scrollLeft=0:t.left<d?o.scrollLeft=Math.max(0,t.left-(f?0:10)):t.right>p+d-3&&(o.scrollLeft=t.right+(f?0:10)-p),o}function Pr(e,t){null!=t&&(Vr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Cr(e){Vr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Tr(e,t,n){null==t&&null==n||Vr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Vr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=$n(e,t.from),r=$n(e,t.to);Fr(e,n,r,t.margin)}}function Fr(e,t,n,r){var i=Er(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Tr(e,i.scrollLeft,i.scrollTop)}function Dr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Or(e,t,!0),n&&li(e),ri(e,100))}function Or(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Rr(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,br(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Mr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+En(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Cn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Lr=function(e,t,n){this.cm=n;var r=this.vert=V("div",[V("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=V("div",[V("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),tt(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),tt(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Lr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Lr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Lr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Lr.prototype.zeroWidthHack=function(){var e=v&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new j,this.disableVert=new j},Lr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect(),a="vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);a!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Lr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Br=function(){};function kr(e,t){t||(t=Mr(e));var n=e.display.barWidth,r=e.display.barHeight;Ir(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Ar(e),Ir(e,Mr(e)),n=e.display.barWidth,r=e.display.barHeight}function Ir(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Br.prototype.update=function(){return{bottom:0,right:0}},Br.prototype.setScrollLeft=function(){},Br.prototype.setScrollTop=function(){},Br.prototype.clear=function(){};var jr={native:Lr,null:Br};function Nr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new jr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),tt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Rr(e,t):Dr(e,t)},e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Ur=0;function zr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ur},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Gr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{sn=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Wr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&oi(i.cm,i.update);for(var i,a=0;a<t.length;a++)Hr(t[a]);for(var o=0;o<t.length;o++)qr(t[o]);for(var s=0;s<t.length;s++)Kr(t[s])}(e)})}function Wr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Cn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Cn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&$e(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ai(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Hr(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ar(t),e.barMeasure=Mr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Dn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Cn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Rr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==O();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&kr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&mr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&_r(e.cm)}function Kr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&si(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Or(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Rr(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(t=t.ch?_e(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?_e(t.line,t.ch+1,"before"):t);for(var a=0;a<5;a++){var o=!1,s=Yn(e,t),l=n&&n!=t?Yn(e,n):s;i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r};var c=Er(e,i),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(Dr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=c.scrollLeft&&(Rr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(o=!0)),!o)break}return i}(t,be(r,e.scrollToPos.from),be(r,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!at(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!h){var a=V("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-wn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Cn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,i)}var a=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(a)for(var s=0;s<a.length;++s)a[s].lines.length||it(a[s],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&it(o[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Yr(e,t){if(e.curOp)return t();zr(e);try{return t()}finally{Gr(e)}}function $r(e,t){return function(){if(e.curOp)return t.apply(e,arguments);zr(e);try{return t.apply(e,arguments)}finally{Gr(e)}}}function Xr(e){return function(){if(this.curOp)return e.apply(this,arguments);zr(this);try{return e.apply(this,arguments)}finally{Gr(this)}}}function Zr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);zr(t);try{return e.apply(this,arguments)}finally{Gr(t)}}}function Jr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Pe&&Ge(e.doc,t)<i.viewTo&&ei(e);else if(n<=i.viewFrom)Pe&&We(e.doc,n+r)>i.viewFrom?ei(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)ei(e);else if(t<=i.viewFrom){var a=ti(e,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):ei(e)}else if(n>=i.viewTo){var o=ti(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):ei(e)}else{var s=ti(e,t,t,-1),l=ti(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(on(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):ei(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Qr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var a=r.view[cr(e,t)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==N(o,n)&&o.push(n)}}}function ei(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ti(e,t,n,r){var i,a=cr(e,t),o=e.display.view;if(!Pe||n==e.doc.first+e.doc.size)return{index:a,lineN:n};for(var s=e.display.viewFrom,l=0;l<a;l++)s+=o[l].size;if(s!=t){if(r>0){if(a==o.length-1)return null;i=s+o[a].size-t,a++}else i=s-t;t+=i,n+=i}for(;Ge(e.doc,n)!=n;){if(a==(r<0?0:o.length-1))return null;n+=r*o[a-(r<0?1:0)].size,a+=r}return{index:a,lineN:n}}function ni(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=jt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(r.line>=e.display.viewFrom){var o=a.styles,s=a.text.length>e.options.maxHighlightLength?Dt(t.mode,r.state):null,l=kt(e,a,r,!0);s&&(r.state=s),a.styles=l.styles;var c=a.styleClasses,u=l.classes;u?a.styleClasses=u:c&&(a.styleClasses=null);for(var d=!o||o.length!=a.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!d&&p<o.length;++p)d=o[p]!=a.styles[p];d&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=e.options.maxHighlightLength&&Nt(e,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Yr(e,function(){for(var t=0;t<i.length;t++)Qr(e,i[t],"text")})}}var ai=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Sr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=ir(e),this.events=[]};function oi(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return ei(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ni(e))return!1;wr(e)&&(ei(e),t.dims=ir(e));var i=r.first+r.size,a=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),Pe&&(a=Ge(e.doc,a),o=We(e.doc,o));var s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=on(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=on(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(cr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(on(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,cr(e,n)))),r.viewTo=n}(e,a,o),n.viewOffset=Ke(le(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ni(e);if(!s&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=O();if(!t||!D(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&D(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,a=r.lineDiv,o=a.firstChild;function s(t){var n=t.nextSibling;return l&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,d=0;d<c.length;d++){var p=c[d];if(p.hidden);else if(p.node&&p.node.parentNode==a){for(;o!=p.node;)o=s(o);var f=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(N(p.changes,"gutter")>-1&&(f=!1),dn(e,p,u,n)),f&&(C(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(me(e.options,u)))),o=p.node.nextSibling}else{var h=vn(e,p,u,n);a.insertBefore(h,o)}u+=p.size}for(;o;)o=s(o)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=O()&&(e.activeElt.focus(),e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),C(n.cursorDiv),C(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function si(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+En(e.display)-Vn(e),n.top)}),t.visible=Sr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&oi(e,t);r=!1){Ar(e);var i=Mr(e);ur(e),kr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new ai(e,t);if(oi(e,n)){Ar(e),si(e,n);var r=Mr(e);ur(e),kr(e,r),ui(e,r),n.finish()}}function ci(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Cn(e)+"px"}function di(e){var t=e.display.gutters,n=e.options.gutters;C(t);for(var r=0;r<n.length;++r){var i=n[r],a=t.appendChild(V("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=a,a.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ci(e)}function pi(e){var t=N(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ai.prototype.signal=function(e,t){st(e,t)&&this.events.push(arguments)},ai.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var fi=0,hi=null;function mi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function _i(e){var t=mi(e);return t.x*=hi,t.y*=hi,t}function gi(e,t){var r=mi(t),i=r.x,a=r.y,o=e.display,s=o.scroller,c=s.scrollWidth>s.clientWidth,u=s.scrollHeight>s.clientHeight;if(i&&c||a&&u){if(a&&v&&l)e:for(var p=t.target,f=o.view;p!=s;p=p.parentNode)for(var h=0;h<f.length;h++)if(f[h].node==p){e.display.currentWheelTarget=p;break e}if(i&&!n&&!d&&null!=hi)return a&&u&&Dr(e,Math.max(0,s.scrollTop+a*hi)),Rr(e,Math.max(0,s.scrollLeft+i*hi)),(!a||a&&u)&&ct(t),void(o.wheelStartX=null);if(a&&null!=hi){var m=a*hi,_=e.doc.scrollTop,g=_+o.wrapper.clientHeight;m<0?_=Math.max(0,_+m-50):g=Math.min(e.doc.height,g+m+50),li(e,{top:_,bottom:g})}fi<20&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=a,setTimeout(function(){if(null!=o.wheelStartX){var e=s.scrollLeft-o.wheelStartX,t=s.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(hi=(hi*fi+n)/(fi+1),++fi)}},200)):(o.wheelDX+=i,o.wheelDY+=a))}}o?hi=-.53:n?hi=15:u?hi=-.7:p&&(hi=-1/3);var vi=function(e,t){this.ranges=e,this.primIndex=t};vi.prototype.primary=function(){return this.ranges[this.primIndex]},vi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ve(n.anchor,r.anchor)||!ve(n.head,r.head))return!1}return!0},vi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new yi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new vi(e,this.primIndex)},vi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},vi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ge(t,r.from())>=0&&ge(e,r.to())<=0)return n}return-1};var yi=function(e,t){this.anchor=e,this.head=t};function Ai(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(e,t){return ge(e.from(),t.from())}),n=N(t,i);for(var a=1;a<t.length;a++){var o=t[a],s=t[a-1],l=ge(s.to(),o.from());if(r&&!o.empty()?l>0:l>=0){var c=xe(s.from(),o.from()),u=Ae(s.to(),o.to()),d=s.empty()?o.from()==o.head:s.from()==s.head;a<=n&&--n,t.splice(--a,2,new yi(d?u:c,d?c:u))}}return new vi(t,n)}function xi(e,t){return new vi([new yi(e,t||e)],0)}function Si(e){return e.text?_e(e.from.line+e.text.length-1,$(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function bi(e,t){if(ge(e,t.from)<0)return e;if(ge(e,t.to)<=0)return Si(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Si(t).ch-t.to.ch),_e(n,r)}function wi(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new yi(bi(i.anchor,t),bi(i.head,t)))}return Ai(e.cm,n,e.sel.primIndex)}function Ei(e,t,n){return e.line==t.line?_e(n.line,e.ch-t.ch+n.ch):_e(n.line+(e.line-t.line),e.ch)}function Pi(e){e.doc.mode=Tt(e.options,e.doc.modeOption),Ci(e)}function Ci(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&""==$(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Vi(e,t,n,r){function i(e){return n?n[e]:null}function a(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Oe(e),Re(e,n);var i=r?r(e):1;i!=e.height&&de(e,i)}(e,n,i,r),cn(e,"change",e,t)}function o(e,t){for(var n=[],a=e;a<t;++a)n.push(new Kt(c[a],i(a),r));return n}var s=t.from,l=t.to,c=t.text,u=le(e,s.line),d=le(e,l.line),p=$(c),f=i(c.length-1),h=l.line-s.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ti(e,t)){var m=o(0,c.length-1);a(d,d.text,f),h&&e.remove(s.line,h),m.length&&e.insert(s.line,m)}else if(u==d)if(1==c.length)a(u,u.text.slice(0,s.ch)+p+u.text.slice(l.ch),f);else{var _=o(1,c.length-1);_.push(new Kt(p+u.text.slice(l.ch),f,r)),a(u,u.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,_)}else if(1==c.length)a(u,u.text.slice(0,s.ch)+c[0]+d.text.slice(l.ch),i(0)),e.remove(s.line+1,h);else{a(u,u.text.slice(0,s.ch)+c[0],i(0)),a(d,p+d.text.slice(l.ch),f);var g=o(1,c.length-1);h>1&&e.remove(s.line+1,h-1),e.insert(s.line+1,g)}cn(e,"change",e,t)}function Fi(e,t,n){!function e(r,i,a){if(r.linked)for(var o=0;o<r.linked.length;++o){var s=r.linked[o];if(s.doc!=i){var l=a&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,r,l))}}}(e,null,!0)}function Di(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,sr(e),Pi(e),Oi(e),e.options.lineWrapping||$e(e),e.options.mode=t.modeOption,Jr(e)}function Oi(e){("rtl"==e.doc.direction?R:P)(e.display.lineDiv,"CodeMirror-rtl")}function Ri(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Mi(e,t){var n={from:ye(t.from),to:Si(t),text:ce(e,t.from,t.to)};return ji(e,n,t.from.line,t.to.line+1),Fi(e,function(e){return ji(e,n,t.from.line,t.to.line+1)},!0),n}function Li(e){for(;e.length;){var t=$(e);if(!t.ranges)break;e.pop()}}function Bi(e,t,n,r){var i=e.history;i.undone.length=0;var a,o,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(a=function(e,t){return t?(Li(e.done),$(e.done)):e.done.length&&!$(e.done).ranges?$(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),$(e.done)):void 0}(i,i.lastOp==r)))o=$(a.changes),0==ge(t.from,t.to)&&0==ge(t.from,o.to)?o.to=Si(t):a.changes.push(Mi(e,t));else{var l=$(i.done);for(l&&l.ranges||Ii(e.sel,i.done),a={changes:[Mi(e,t)],generation:i.generation},i.done.push(a);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,o||it(e,"historyAdded")}function ki(e,t,n,r){var i=e.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,$(i.done),t))?i.done[i.done.length-1]=t:Ii(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Li(i.undone)}function Ii(e,t){var n=$(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ji(e,t,n,r){var i=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[a]=n.markedSpans),++a})}function Ni(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ui(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ni(n[i]));return r}(e,t),r=Fe(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],o=r[i];if(a&&o)e:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue e;a.push(l)}else o&&(n[i]=o)}return n}function zi(e,t,n){for(var r=[],i=0;i<e.length;++i){var a=e[i];if(a.ranges)r.push(n?vi.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];r.push({changes:s});for(var l=0;l<o.length;++l){var c=o[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&N(t,Number(u[1]))>-1&&($(s)[d]=c[d],delete c[d])}}}return r}function Gi(e,t,n,r){if(r){var i=e.anchor;if(n){var a=ge(t,i)<0;a!=ge(n,i)<0?(i=t,t=n):a!=ge(t,n)<0&&(t=n)}return new yi(i,t)}return new yi(n||t,t)}function Wi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),$i(e,new vi([Gi(e.sel.primary(),t,n,i)],0),r)}function Hi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)r[a]=Gi(e.sel.ranges[a],t[a],null,i);var o=Ai(e.cm,r,e.sel.primIndex);$i(e,o,n)}function qi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,$i(e,Ai(e.cm,i,e.sel.primIndex),r)}function Ki(e,t,n,r){$i(e,xi(t,n),r)}function Yi(e,t,n){var r=e.history.done,i=$(r);i&&i.ranges?(r[r.length-1]=t,Xi(e,t,n)):$i(e,t,n)}function $i(e,t,n){Xi(e,t,n),ki(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xi(e,t,n){(st(e,"beforeSelectionChange")||e.cm&&st(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new yi(be(e,t[n].anchor),be(e,t[n].head))},origin:n&&n.origin};return it(e,"beforeSelectionChange",e,r),e.cm&&it(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Ai(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(ge(t.primary().head,e.sel.primary().head)<0?-1:1);Zi(e,Qi(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Cr(e.cm)}function Zi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ot(e.cm)),cn(e,"cursorActivity",e))}function Ji(e){Zi(e,Qi(e,e.sel,null,!1))}function Qi(e,t,n,r){for(var i,a=0;a<t.ranges.length;a++){var o=t.ranges[a],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],l=ta(e,o.anchor,s&&s.anchor,n,r),c=ta(e,o.head,s&&s.head,n,r);(i||l!=o.anchor||c!=o.head)&&(i||(i=t.ranges.slice(0,a)),i[a]=new yi(l,c))}return i?Ai(e.cm,i,t.primIndex):t}function ea(e,t,n,r,i){var a=le(e,t.line);if(a.markedSpans)for(var o=0;o<a.markedSpans.length;++o){var s=a.markedSpans[o],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(it(l,"beforeCursorEnter"),l.explicitlyCleared)){if(a.markedSpans){--o;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=na(e,c,-r,c&&c.line==t.line?a:null)),c&&c.line==t.line&&(u=ge(c,n))&&(r<0?u<0:u>0))return ea(e,c,t,r,i)}var d=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(d=na(e,d,r,d.line==t.line?a:null)),d?ea(e,d,t,r,i):null}}return t}function ta(e,t,n,r,i){var a=r||1,o=ea(e,t,n,a,i)||!i&&ea(e,t,n,a,!0)||ea(e,t,n,-a,i)||!i&&ea(e,t,n,-a,!0);return o||(e.cantEdit=!0,_e(e.first,0))}function na(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?be(e,_e(t.line-1)):null:n>0&&t.ch==(r||le(e,t.line)).text.length?t.line<e.first+e.size-1?_e(t.line+1,0):null:new _e(t.line,t.ch+n)}function ra(e){e.setSelection(_e(e.firstLine(),0),_e(e.lastLine()),G)}function ia(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,a){t&&(r.from=be(e,t)),n&&(r.to=be(e,n)),i&&(r.text=i),void 0!==a&&(r.origin=a)}),it(e,"beforeChange",e,r),e.cm&&it(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function aa(e,t,n){if(e.cm){if(!e.cm.curOp)return $r(e.cm,aa)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"))||(t=ia(e,t,!0))){var r=Ee&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=N(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],a=0;a<r.length;++a)for(var o=r[a],s=o.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ge(c.to,s.from)<0||ge(c.from,s.to)>0)){var u=[l,1],d=ge(c.from,s.from),p=ge(c.to,s.to);(d<0||!o.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(p>0||!o.inclusiveRight&&!p)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)oa(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else oa(e,t)}}function oa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ge(t.from,t.to)){var n=wi(e,t);Bi(e,t,n,e.cm?e.cm.curOp.id:NaN),ca(e,t,n,Fe(e,t));var r=[];Fi(e,function(e,n){n||-1!=N(r,e.history)||(fa(e.history,t),r.push(e.history)),ca(e,t,null,Fe(e,t))})}}function sa(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,a=e.history,o=e.sel,s="undo"==t?a.done:a.undone,l="undo"==t?a.undone:a.done,c=0;c<s.length&&(i=s[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Ii(i,l),n&&!i.equals(e.sel))return void $i(e,i,{clearRedo:!1});o=i}var u=[];Ii(o,l),l.push({changes:u,generation:a.generation}),a.generation=i.generation||++a.maxGeneration;for(var d=st(e,"beforeChange")||e.cm&&st(e.cm,"beforeChange"),p=function(n){var r=i.changes[n];if(r.origin=t,d&&!ia(e,r,!1))return s.length=0,{};u.push(Mi(e,r));var a=n?wi(e,r):$(s);ca(e,r,a,Ui(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Si(r)});var o=[];Fi(e,function(e,t){t||-1!=N(o,e.history)||(fa(e.history,r),o.push(e.history)),ca(e,r,null,Ui(e,r))})},f=i.changes.length-1;f>=0;--f){var h=p(f);if(h)return h.v}}}}function la(e,t){if(0!=t&&(e.first+=t,e.sel=new vi(X(e.sel.ranges,function(e){return new yi(_e(e.anchor.line+t,e.anchor.ch),_e(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Qr(e.cm,r,"gutter")}}function ca(e,t,n,r){if(e.cm&&!e.cm.curOp)return $r(e.cm,ca)(e,t,n,r);if(t.to.line<e.first)la(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);la(e,i),t={from:_e(e.first,0),to:_e(t.to.line+i,t.to.ch),text:[$(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:_e(a,le(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),n||(n=wi(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,a=t.from,o=t.to,s=!1,l=a.line;e.options.lineWrapping||(l=pe(ze(le(r,a.line))),r.iter(l,o.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ot(e),Vi(r,t,n,or(e)),e.options.lineWrapping||(r.iter(l,a.line+t.text.length,function(e){var t=Ye(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=le(e,r).stateAfter;if(i&&(!(i instanceof Lt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,a.line),ri(e,400);var c=t.text.length-(o.line-a.line)-1;t.full?Jr(e):a.line!=o.line||1!=t.text.length||Ti(e.doc,t)?Jr(e,a.line,o.line+1,c):Qr(e,a.line,"text");var u=st(e,"changes"),d=st(e,"change");if(d||u){var p={from:a,to:o,text:t.text,removed:t.removed,origin:t.origin};d&&cn(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,r):Vi(e,t,r),Xi(e,n,G)}}function ua(e,t,n,r,i){var a;r||(r=n),ge(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof t&&(t=e.splitLines(t)),aa(e,{from:n,to:r,text:t,origin:i})}function da(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function pa(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i],o=!0;if(a.ranges){a.copied||((a=e[i]=a.deepCopy()).copied=!0);for(var s=0;s<a.ranges.length;s++)da(a.ranges[s].anchor,t,n,r),da(a.ranges[s].head,t,n,r)}else{for(var l=0;l<a.changes.length;++l){var c=a.changes[l];if(n<c.from.line)c.from=_e(c.from.line+r,c.from.ch),c.to=_e(c.to.line+r,c.to.ch);else if(t<=c.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}}function fa(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;pa(e.done,n,r,i),pa(e.undone,n,r,i)}function ha(e,t,n,r){var i=t,a=t;return"number"==typeof t?a=le(e,Se(e,t)):i=pe(t),null==i?null:(r(a,i)&&e.cm&&Qr(e.cm,i,n),a)}function ma(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function _a(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}yi.prototype.from=function(){return xe(this.anchor,this.head)},yi.prototype.to=function(){return Ae(this.anchor,this.head)},yi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ma.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Yt(i),cn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},_a.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var a=Math.min(t,i-e),o=r.height;if(r.removeInner(e,a),this.height-=o-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ma))){var s=[];this.collapse(s),this.children=[new ma(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var o=i.lines.length%25+25,s=o;s<i.lines.length;){var l=new ma(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,o),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new _a(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=N(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new _a(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var o=Math.min(t,a-e);if(i.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=a}}};var ga=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function va(e,t,n){Ke(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pr(e,n)}ga.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=pe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var a=Sn(this);de(n,Math.max(0,n.height-a)),e&&(Yr(e,function(){va(e,n,-a),Qr(e,r,"widget")}),cn(e,"lineWidgetCleared",e,this,r))}},ga.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=Sn(this)-t;i&&(He(this.doc,r)||de(r,r.height+i),n&&Yr(n,function(){n.curOp.forceUpdate=!0,va(n,r,i),cn(n,"lineWidgetChanged",n,e,pe(r))}))},lt(ga);var ya=0,Aa=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ya};function xa(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=k(r)).shared=!1;var a=[xa(e,t,n,r,i)],o=a[0],s=r.widgetNode;return Fi(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),a.push(xa(e,be(e,t),be(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=$(a)}),new Sa(a,o)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return $r(e.cm,xa)(e,t,n,r,i);var a=new Aa(e,i),o=ge(t,n);if(r&&k(r,a,!1),o>0||0==o&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=F("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Ue(e,t.line,t,n,a)||t.line!=n.line&&Ue(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Pe=!0}a.addToHistory&&Bi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&a.collapsed&&!c.options.lineWrapping&&ze(e)==c.display.maxLine&&(s=!0),a.collapsed&&l!=t.line&&de(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Ce(a,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),a.collapsed&&e.iter(t.line,n.line+1,function(t){He(e,t)&&de(t,0)}),a.clearOnEnter&&tt(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(Ee=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ya,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)Jr(c,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var u=t.line;u<=n.line;u++)Qr(c,u,"text");a.atomic&&Ji(c.doc),cn(c,"markerAdded",c,a)}return a}Aa.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&zr(e),st(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=Te(o.markedSpans,this);e&&!this.collapsed?Qr(e,pe(o),"text"):e&&(null!=s.to&&(i=pe(o)),null!=s.from&&(r=pe(o))),o.markedSpans=Ve(o.markedSpans,s),null==s.from&&this.collapsed&&!He(this.doc,o)&&e&&de(o,nr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=ze(this.lines[l]),u=Ye(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&cn(e,"markerCleared",e,this,r,i),t&&Gr(e),this.parent&&this.parent.clear()}},Aa.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var a=this.lines[i],o=Te(a.markedSpans,this);if(null!=o.from&&(n=_e(t?a:pe(a),o.from),-1==e))return n;if(null!=o.to&&(r=_e(t?a:pe(a),o.to),1==e))return r}return n&&{from:n,to:r}},Aa.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Yr(r,function(){var i=t.line,a=pe(t.line),o=On(r,a);if(o&&(jn(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!He(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=Sn(n)-s;l&&de(i,i.height+l)}cn(r,"markerChanged",r,e)})},Aa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=N(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Aa.prototype.detachLine=function(e){if(this.lines.splice(N(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},lt(Aa);var Sa=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ba(e){return e.findMarks(_e(e.first,0),e.clipPos(_e(e.lastLine())),function(e){return e.parent})}function wa(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Fi(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var a=n.markers[i];-1==N(r,a.doc)&&(a.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}Sa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},Sa.prototype.find=function(e,t){return this.primary.find(e,t)},lt(Sa);var Ea=0,Pa=function(e,t,n,r,i){if(!(this instanceof Pa))return new Pa(e,t,n,r,i);null==n&&(n=0),_a.call(this,[new ma([new Kt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=_e(n,0);this.sel=xi(a),this.history=new Ri(null),this.id=++Ea,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Vi(this,{from:a,to:a,text:e}),$i(this,xi(a),G)};Pa.prototype=J(_a.prototype,{constructor:Pa,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ue(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Zr(function(e){var t=_e(this.first,0),n=this.first+this.size-1;aa(this,{from:t,to:_e(n,le(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Tr(this.cm,0,0),$i(this,xi(t),G)}),replaceRange:function(e,t,n,r){t=be(this,t),n=n?be(this,n):t,ua(this,e,t,n,r)},getRange:function(e,t,n){var r=ce(this,be(this,e),be(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(he(this,e))return le(this,e)},getLineNumber:function(e){return pe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=le(this,e)),ze(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return be(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Zr(function(e,t,n){Ki(this,be(this,"number"==typeof e?_e(e,t||0):e),null,n)}),setSelection:Zr(function(e,t,n){Ki(this,be(this,e),be(this,t||e),n)}),extendSelection:Zr(function(e,t,n){Wi(this,be(this,e),t&&be(this,t),n)}),extendSelections:Zr(function(e,t){Hi(this,we(this,e),t)}),extendSelectionsBy:Zr(function(e,t){var n=X(this.sel.ranges,e);Hi(this,we(this,n),t)}),setSelections:Zr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new yi(be(this,e[i].anchor),be(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),$i(this,Ai(this.cm,r,t),n)}}),addSelection:Zr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new yi(be(this,e),be(this,t||e))),$i(this,Ai(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ce(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Zr(function(e,t,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var o=i.ranges[a];r[a]={from:o.from(),to:o.to(),text:this.splitLines(e[a]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var r=[],i=_e(e.first,0),a=i,o=0;o<t.length;o++){var s=t[o],l=Ei(s.from,i,a),c=Ei(Si(s),i,a);if(i=s.to,a=c,"around"==n){var u=e.sel.ranges[o],d=ge(u.head,u.anchor)<0;r[o]=new yi(d?c:l,d?l:c)}else r[o]=new yi(l,l)}return new vi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)aa(this,r[l]);s?Yi(this,s):this.cm&&Cr(this.cm)}),undo:Zr(function(){sa(this,"undo")}),redo:Zr(function(){sa(this,"redo")}),undoSelection:Zr(function(){sa(this,"undo",!0)}),redoSelection:Zr(function(){sa(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Ri(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:zi(this.history.done),undone:zi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ri(this.history.maxGeneration);t.done=zi(e.done.slice(0),null,!0),t.undone=zi(e.undone.slice(0),null,!0)},setGutterMarker:Zr(function(e,t,n){return ha(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Zr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ha(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!he(this,e))return null;if(t=e,!(e=le(this,e)))return null}else if(null==(t=pe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Zr(function(e,t,n){return ha(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(w(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Zr(function(e,t,n){return ha(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var a=i.match(w(n));if(!a)return!1;var o=a.index+a[0].length;e[r]=i.slice(0,a.index)+(a.index&&o!=i.length?" ":"")+i.slice(o)||null}return!0})}),addLineWidget:Zr(function(e,t,n){return function(e,t,n,r){var i=new ga(e,n,r),a=e.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),ha(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,a&&!He(e,t)){var r=Ke(t)<e.scrollTop;de(t,t.height+Sn(i)),r&&Pr(a,i.height),a.curOp.forceUpdate=!0}return!0}),a&&cn(a,"lineWidgetAdded",a,i,"number"==typeof t?t:pe(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return xa(this,be(this,e),be(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return xa(this,e=be(this,e),e,n,"bookmark")},findMarksAt:function(e){e=be(this,e);var t=[],n=le(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=be(this,e),t=be(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var a=i.text.length+r;if(a>e)return t=e,!0;e-=a,++n}),be(this,_e(n,t))},indexFromPos:function(e){var t=(e=be(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Pa(ue(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Pa(ue(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),a=e.clipPos(i.from),o=e.clipPos(i.to);if(ge(a,o)){var s=xa(e,a,o,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,ba(this)),r},unlinkDoc:function(e){if(e instanceof wo&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),wa(ba(this));break}}if(e.history==this.history){var r=[e.id];Fi(e,function(e){return r.push(e.id)},!0),e.history=new Ri(null),e.history.done=zi(this.history.done,r),e.history.undone=zi(this.history.undone,r)}},iterLinkedDocs:function(e){Fi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Zr(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Yr(t=this.cm,function(){Oi(t),Jr(t)}))})}),Pa.prototype.eachLine=Pa.prototype.iter;var Ca=0;function Ta(e){var t=this;if(Va(t),!at(t,e)&&!bn(t.display,e)){ct(e),o&&(Ca=+new Date);var n=lr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),s=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=N(t.options.allowDropFileTypes,e.type)){var o=new FileReader;o.onload=$r(t,function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),a[r]=e,++s==i){var l={from:n=be(t.doc,n),to:n,text:t.doc.splitLines(a.join(t.doc.lineSeparator())),origin:"paste"};aa(t.doc,l),Yi(t.doc,xi(n,Si(l)))}}),o.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),Xi(t.doc,xi(n,n)),d)for(var p=0;p<d.length;++p)ua(t.doc,"",d[p].anchor,d[p].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Va(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Fa(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Da=!1;function Oa(){var e;Da||(tt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Fa(Ra)},100))}),tt(window,"blur",function(){return Fa(yr)}),Da=!0)}function Ra(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ma={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},La=0;La<10;La++)Ma[La+48]=Ma[La+96]=String(La);for(var Ba=65;Ba<=90;Ba++)Ma[Ba]=String.fromCharCode(Ba);for(var ka=1;ka<=12;ka++)Ma[ka+111]=Ma[ka+63235]="F"+ka;var Ia={};function ja(e){var t,n,r,i,a=e.split(/-(?!$)/);e=a[a.length-1];for(var o=0;o<a.length-1;o++){var s=a[o];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Na(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=X(n.split(" "),ja),a=0;a<i.length;a++){var o=void 0,s=void 0;a==i.length-1?(s=i.join(" "),o=r):(s=i.slice(0,a+1).join(" "),o="...");var l=t[s];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+s)}else t[s]=o}delete e[n]}for(var c in t)e[c]=t[c];return e}function Ua(e,t,n,r){var i=(t=Ha(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ua(e,t.fallthrough,n,r);for(var a=0;a<t.fallthrough.length;a++){var o=Ua(e,t.fallthrough[a],n,r);if(o)return o}}}function za(e){var t="string"==typeof e?e:Ma[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ga(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(S?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(S?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Wa(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Ma[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ga(n,e,t))}function Ha(e){return"string"==typeof e?Ia[e]:e}function qa(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=t(n[i]);r.length&&ge(a.from,$(r).to)<=0;){var o=r.pop();if(ge(o.from,a.from)<0){a.from=o.from;break}}r.push(a)}Yr(e,function(){for(var t=r.length-1;t>=0;t--)ua(e.doc,"",r[t].from,r[t].to,"+delete");Cr(e)})}function Ka(e,t,n){var r=ae(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Ya(e,t,n){var r=Ka(e,t.ch,n);return null==r?null:new _e(t.line,r,n<0?"after":"before")}function $a(e,t,n,r,i){if(e){var a=Qe(n,t.doc.direction);if(a){var o,s=i<0?$(a):a[0],l=i<0==(1==s.level),c=l?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=Rn(t,n);o=i<0?n.text.length-1:0;var d=Mn(t,u,o).top;o=oe(function(e){return Mn(t,u,e).top==d},i<0==(1==s.level)?s.from:s.to-1,o),"before"==c&&(o=Ka(n,o,1))}else o=i<0?s.to:s.from;return new _e(r,o,c)}}return new _e(r,i<0?n.text.length:0,i<0?"before":"after")}Ia.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ia.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ia.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ia.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ia.default=v?Ia.macDefault:Ia.pcDefault;var Xa={selectAll:ra,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),G)},killLine:function(e){return qa(e,function(t){if(t.empty()){var n=le(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:_e(t.head.line+1,0)}:{from:t.head,to:_e(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qa(e,function(t){return{from:_e(t.from().line,0),to:be(e.doc,_e(t.to().line+1,0))}})},delLineLeft:function(e){return qa(e,function(e){return{from:_e(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return qa(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return qa(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(_e(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(_e(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Za(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ja(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=le(e.doc,t),r=function(e){for(var t;t=je(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=pe(r)),$a(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},H)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},H)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Ja(e,t.head):r},H)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),o=I(e.getLine(a.line),a.ch,r);t.push(Y(r-o%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Yr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,a=le(e.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new _e(i.line,i.ch-1)),i.ch>0)i=new _e(i.line,i.ch+1),e.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),_e(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=le(e.doc,i.line-1).text;o&&(i=new _e(i.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),_e(i.line-1,o.length-1),i,"+transpose"))}n.push(new yi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Yr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Cr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Za(e,t){var n=le(e.doc,t),r=ze(n);return r!=n&&(t=pe(r)),$a(!0,e,r,t,1)}function Ja(e,t){var n=Za(e,t.line),r=le(e.doc,n.line),i=Qe(r,e.doc.direction);if(!i||0==i[0].level){var a=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=a&&t.ch;return _e(n.line,o?0:a,n.sticky)}return n}function Qa(e,t,n){if("string"==typeof t&&!(t=Xa[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=z}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var eo=new j;function to(e,t,n,r){var i=e.state.keySeq;if(i){if(za(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:eo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),no(e,i+" "+t,n,r))return!0}return no(e,t,n,r)}function no(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Ua(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Ua(t,e.options.extraKeys,n,e)||Ua(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&cn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(ct(n),mr(e)),!!i}function ro(e,t){var n=Wa(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?to(e,"Shift-"+n,t,function(t){return Qa(e,t,!0)})||to(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Qa(e,t)}):to(e,n,t,function(t){return Qa(e,t)}))}var io=null;function ao(e){var t=this;if(t.curOp.focus=O(),!at(t,e)){o&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ro(t,e);d&&(io=r?n:null,!r&&88==n&&!bt&&(v?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(P(t,"CodeMirror-crosshair"),rt(document,"keyup",n),rt(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n)}(t)}}function oo(e){16==e.keyCode&&(this.doc.sel.shift=!1),at(this,e)}function so(e){var t=this;if(!(bn(t.display,e)||at(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(d&&n==io)return io=null,void ct(e);if(!d||e.which&&!(e.which<10)||!ro(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return to(e,"'"+n+"'",t,function(t){return Qa(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var lo,co,uo=function(e,t,n){this.time=e,this.pos=t,this.button=n};function po(e){var t=this,n=t.display;if(!(at(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,bn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!mo(t,e)){var r=lr(t,e),i=ht(e),a=r?function(e,t){var n=+new Date;return co&&co.compare(n,e,t)?(lo=co=null,"triple"):lo&&lo.compare(n,e,t)?(co=new uo(n,e,t),lo=null,"double"):(lo=new uo(n,e,t),co=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),to(e,Ga(a=(1==t?"Left":2==t?"Middle":"Right")+a,i),i,function(t){if("string"==typeof t&&(t=Xa[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=z}finally{e.state.suppressEdits=!1}return r})}(t,i,r,a,e)||(1==i?r?function(e,t,n,r){o?setTimeout(B(_r,e),0):e.curOp.focus=O();var i,a=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var a=y?n.shiftKey&&n.metaKey:n.altKey;i.unit=a?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=v?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&gt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(ge((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(ge(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,a=!1,c=$r(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,rt(i.wrapper.ownerDocument,"mouseup",c),rt(i.wrapper.ownerDocument,"mousemove",u),rt(i.scroller,"dragstart",d),rt(i.scroller,"drop",c),a||(ct(t),r.addNew||Wi(e.doc,n,null,null,r.extend),l||o&&9==s?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return a=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),tt(i.wrapper.ownerDocument,"mouseup",c),tt(i.wrapper.ownerDocument,"mousemove",u),tt(i.scroller,"dragstart",d),tt(i.scroller,"drop",c),gr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,a):function(e,t,n,r){var i=e.display,a=e.doc;ct(t);var o,s,l=a.sel,c=l.ranges;if(r.addNew&&!r.extend?(s=a.sel.contains(n),o=s>-1?c[s]:new yi(n,n)):(o=a.sel.primary(),s=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(o=new yi(n,n)),n=lr(e,t,!0,!0),s=-1;else{var u=fo(e,n,r.unit);o=r.extend?Gi(o,u.anchor,u.head,r.extend):u}r.addNew?-1==s?(s=c.length,$i(a,Ai(e,c.concat([o]),s),{scroll:!1,origin:"*mouse"})):c.length>1&&c[s].empty()&&"char"==r.unit&&!r.extend?($i(a,Ai(e,c.slice(0,s).concat(c.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=a.sel):qi(a,s,o,W):(s=0,$i(a,new vi([o],0),W),l=a.sel);var d=n;function p(t){if(0!=ge(d,t))if(d=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=I(le(a,n.line).text,n.ch,c),p=I(le(a,t.line).text,t.ch,c),f=Math.min(u,p),h=Math.max(u,p),m=Math.min(n.line,t.line),_=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=_;m++){var g=le(a,m).text,v=q(g,f,c);f==h?i.push(new yi(_e(m,v),_e(m,v))):g.length>v&&i.push(new yi(_e(m,v),_e(m,q(g,h,c))))}i.length||i.push(new yi(n,n)),$i(a,Ai(e,l.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y,A=o,x=fo(e,t,r.unit),S=A.anchor;ge(x.anchor,S)>0?(y=x.head,S=xe(A.from(),x.anchor)):(y=x.anchor,S=Ae(A.to(),x.head));var b=l.ranges.slice(0);b[s]=function(e,t){var n=t.anchor,r=t.head,i=le(e.doc,n.line);if(0==ge(n,r)&&n.sticky==r.sticky)return t;var a=Qe(i);if(!a)return t;var o=Ze(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,c=o+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==a.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Ze(a,r.ch,r.sticky),d=u-o||(r.ch-n.ch)*(1==s.level?-1:1);l=u==c-1||u==c?d<0:d>0}var p=a[c+(l?-1:0)],f=l==(1==p.level),h=f?p.from:p.to,m=f?"after":"before";return n.ch==h&&n.sticky==m?t:new yi(new _e(n.line,h,m),r)}(e,new yi(be(a,S),y)),$i(a,Ai(e,b,s),W)}}var f=i.wrapper.getBoundingClientRect(),h=0;function m(t){e.state.selectingText=!1,h=1/0,ct(t),i.input.focus(),rt(i.wrapper.ownerDocument,"mousemove",_),rt(i.wrapper.ownerDocument,"mouseup",g),a.history.lastSelOrigin=null}var _=$r(e,function(t){0!==t.buttons&&ht(t)?function t(n){var o=++h,s=lr(e,n,!0,"rectangle"==r.unit);if(s)if(0!=ge(s,d)){e.curOp.focus=O(),p(s);var l=Sr(i,a);(s.line>=l.to||s.line<l.from)&&setTimeout($r(e,function(){h==o&&t(n)}),150)}else{var c=n.clientY<f.top?-20:n.clientY>f.bottom?20:0;c&&setTimeout($r(e,function(){h==o&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),g=$r(e,m);e.state.selectingText=g,tt(i.wrapper.ownerDocument,"mousemove",_),tt(i.wrapper.ownerDocument,"mouseup",g)}(e,r,t,a)}(t,r,a,e):ft(e)==n.scroller&&ct(e):2==i?(r&&Wi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(b?t.display.input.onContextMenu(e):gr(t)))}}function fo(e,t,n){if("char"==n)return new yi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new yi(_e(t.line,0),be(e.doc,_e(t.line+1,0)));var r=n(e,t);return new yi(r.from,r.to)}function ho(e,t,n,r){var i,a;if(t.touches)i=t.touches[0].clientX,a=t.touches[0].clientY;else try{i=t.clientX,a=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var o=e.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!st(e,n))return dt(t);a-=s.top-o.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=fe(e.doc,a),d=e.options.gutters[l];return it(e,n,e,u,d,t),dt(t)}}}function mo(e,t){return ho(e,t,"gutterClick",!0)}function _o(e,t){bn(e.display,t)||function(e,t){return!!st(e,"gutterContextMenu")&&ho(e,t,"gutterContextMenu",!1)}(e,t)||at(e,t,"contextmenu")||b||e.display.input.onContextMenu(t)}function go(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Un(e)}uo.prototype.compare=function(e,t,n){return this.time+400>e&&0==ge(t,this.pos)&&n==this.button};var vo={toString:function(){return"CodeMirror.Init"}},yo={},Ao={};function xo(e){di(e),Jr(e),br(e)}function So(e,t,n){var r=n&&n!=vo;if(!t!=!r){var i=e.display.dragFunctions,a=t?tt:rt;a(e.display.scroller,"dragstart",i.start),a(e.display.scroller,"dragenter",i.enter),a(e.display.scroller,"dragover",i.over),a(e.display.scroller,"dragleave",i.leave),a(e.display.scroller,"drop",i.drop)}}function bo(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(P(e.display.wrapper,"CodeMirror-wrap"),$e(e)),sr(e),Jr(e),Un(e),setTimeout(function(){return kr(e)},100)}function wo(e,t){var n=this;if(!(this instanceof wo))return new wo(e,t);this.options=t=t?k(t):{},k(yo,t,!1),pi(t);var r=t.value;"string"==typeof r?r=new Pa(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new wo.inputStyles[t.inputStyle](this),a=this.display=new se(e,r,i);for(var c in a.wrapper.CodeMirror=this,di(this),go(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Nr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},t.autofocus&&!g&&a.input.focus(),o&&s<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;tt(t.scroller,"mousedown",$r(e,po)),tt(t.scroller,"dblclick",o&&s<11?$r(e,function(t){if(!at(e,t)){var n=lr(e,t);if(n&&!mo(e,t)&&!bn(e.display,t)){ct(t);var r=e.findWordAt(n);Wi(e.doc,r.anchor,r.head)}}}):function(t){return at(e,t)||ct(t)}),tt(t.scroller,"contextmenu",function(t){return _o(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function a(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}tt(t.scroller,"touchstart",function(i){if(!at(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!mo(e,i)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),tt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),tt(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!bn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!r.prev||a(r,r.prev)?new yi(s,s):!r.prev.prev||a(r,r.prev.prev)?e.findWordAt(s):new yi(_e(s.line,0),be(e.doc,_e(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),ct(n)}i()}),tt(t.scroller,"touchcancel",i),tt(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Dr(e,t.scroller.scrollTop),Rr(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),tt(t.scroller,"mousewheel",function(t){return gi(e,t)}),tt(t.scroller,"DOMMouseScroll",function(t){return gi(e,t)}),tt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){at(e,t)||pt(t)},over:function(t){at(e,t)||(function(e,t){var n=lr(e,t);if(n){var r=document.createDocumentFragment();pr(e,n,r),e.display.dragCursor||(e.display.dragCursor=V("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),T(e.display.dragCursor,r)}}(e,t),pt(t))},start:function(t){return function(e,t){if(o&&(!e.state.draggingText||+new Date-Ca<100))pt(t);else if(!at(e,t)&&!bn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=V("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:$r(e,Ta),leave:function(t){at(e,t)||Va(e)}};var l=t.input.getField();tt(l,"keyup",function(t){return oo.call(e,t)}),tt(l,"keydown",$r(e,ao)),tt(l,"keypress",$r(e,so)),tt(l,"focus",function(t){return vr(e,t)}),tt(l,"blur",function(t){return yr(e,t)})}(this),Oa(),zr(this),this.curOp.forceUpdate=!0,Di(this,r),t.autofocus&&!g||this.hasFocus()?setTimeout(B(vr,this),20):yr(this),Ao)Ao.hasOwnProperty(c)&&Ao[c](n,t[c],vo);wr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Eo.length;++u)Eo[u](n);Gr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}wo.defaults=yo,wo.optionHandlers=Ao;var Eo=[];function Po(e,t,n,r){var i,a=e.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?i=jt(e,t).state:n="prev");var o=e.options.tabSize,s=le(a,t),l=I(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((c=a.mode.indent(i,s.text.slice(u.length),s.text))==z||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>a.first?I(le(a,t-1).text,null,o):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",p=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/o);f;--f)p+=o,d+="\t";if(p<c&&(d+=Y(c-p)),d!=u)return ua(a,d,_e(t,0),_e(t,u.length),"+input"),s.stateAfter=null,!0;for(var h=0;h<a.sel.ranges.length;h++){var m=a.sel.ranges[h];if(m.head.line==t&&m.head.ch<u.length){var _=_e(t,u.length);qi(a,h,new yi(_,_));break}}}wo.defineInitHook=function(e){return Eo.push(e)};var Co=null;function To(e){Co=e}function Vo(e,t,n,r,i){var a=e.doc;e.display.shift=!1,r||(r=a.sel);var o=+new Date-200,s="paste"==i||e.state.pasteIncoming>o,l=xt(t),c=null;if(s&&r.ranges.length>1)if(Co&&Co.text.join("\n")==t){if(r.ranges.length%Co.text.length==0){c=[];for(var u=0;u<Co.text.length;u++)c.push(a.splitLines(Co.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,function(e){return[e]}));for(var d=e.curOp.updateInput,p=r.ranges.length-1;p>=0;p--){var f=r.ranges[p],h=f.from(),m=f.to();f.empty()&&(n&&n>0?h=_e(h.line,h.ch-n):e.state.overwrite&&!s?m=_e(m.line,Math.min(le(a,m.line).text.length,m.ch+$(l).length)):s&&Co&&Co.lineWise&&Co.text.join("\n")==t&&(h=m=_e(h.line,0)));var _={from:h,to:m,text:c?c[p%c.length]:l,origin:i||(s?"paste":e.state.cutIncoming>o?"cut":"+input")};aa(e.doc,_),cn(e,"inputRead",e,_)}t&&!s&&Do(e,t),Cr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Fo(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Yr(t,function(){return Vo(t,n,0,null,"paste")}),!0}function Do(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=e.getModeAt(i.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(t.indexOf(a.electricChars.charAt(s))>-1){o=Po(e,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(le(e.doc,i.head.line).text.slice(0,i.head.ch))&&(o=Po(e,i.head.line,"smart"));o&&cn(e,"electricInput",e,i.head.line)}}}function Oo(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,a={anchor:_e(i,0),head:_e(i+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function Ro(e,t,n,r){e.setAttribute("autocorrect",!!n),e.setAttribute("autocapitalize",!!r),e.setAttribute("spellcheck",!!t)}function Mo(){var e=V("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=V("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ro(e),t}function Lo(e,t,n,r,i){var a=t,o=n,s=le(e,t.line);function l(r){var a,o;if(null==(a=i?function(e,t,n,r){var i=Qe(t,e.doc.direction);if(!i)return Ya(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Ze(i,n.ch,n.sticky),o=i[a];if("ltr"==e.doc.direction&&o.level%2==0&&(r>0?o.to>n.ch:o.from<n.ch))return Ya(t,n,r);var s,l=function(e,n){return Ka(t,e instanceof _e?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||Rn(e,t),Qn(e,t,s,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==o.level){var d=1==o.level==r<0,p=l(n,d?1:-1);if(null!=p&&(d?p<=o.to&&p<=u.end:p>=o.from&&p>=u.begin)){var f=d?"before":"after";return new _e(n.line,p,f)}}var h=function(e,t,r){for(var a=function(e,t){return t?new _e(n.line,l(e,1),"before"):new _e(n.line,e,"after")};e>=0&&e<i.length;e+=t){var o=i[e],s=t>0==(1!=o.level),c=s?r.begin:l(r.end,-1);if(o.from<=c&&c<o.to)return a(c,s);if(c=s?o.from:l(o.to,-1),r.begin<=c&&c<r.end)return a(c,s)}},m=h(a+r,r,u);if(m)return m;var _=r>0?u.end:l(u.begin,-1);return null==_||r>0&&_==t.text.length||!(m=h(r>0?0:i.length-1,r,c(_)))?null:m}(e.cm,s,t,n):Ya(s,t,n))){if(r||((o=t.line+n)<e.first||o>=e.first+e.size||(t=new _e(o,t.ch,t.sticky),!(s=le(e,o)))))return!1;t=$a(i,e.cm,s,t.line,n)}else t=a;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,d=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||l(!p);p=!1){var f=s.text.charAt(t.ch)||"\n",h=te(f,d)?"w":u&&"\n"==f?"n":!u||/\s/.test(f)?null:"p";if(!u||p||h||(h="s"),c&&c!=h){n<0&&(n=1,l(),t.sticky="after");break}if(h&&(c=h),n>0&&!l(!p))break}var m=ta(e,t,a,o,!0);return ve(a,m)&&(m.hitSide=!0),m}function Bo(e,t,n,r){var i,a,o=e.doc,s=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*nr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(a=Zn(e,s,i)).outside;){if(n<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*n}return a}var ko=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Io(e,t){var n=On(e,t.line);if(!n||n.hidden)return null;var r=le(e.doc,t.line),i=Fn(n,r,t.line),a=Qe(r,e.doc.direction),o="left";if(a){var s=Ze(a,t.ch);o=s%2?"right":"left"}var l=kn(i.map,t.ch,o);return l.offset="right"==l.collapse?l.end:l.start,l}function jo(e,t){return t&&(e.bad=!0),e}function No(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return jo(e.clipPos(_e(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var a=e.display.view[i];if(a.node==r)return Uo(a,t,n)}}function Uo(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!D(r,t))return jo(_e(pe(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var a=e.rest?$(e.rest):e.line;return jo(_e(pe(a),a.text.length),i)}var o=3==t.nodeType?t:null,s=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,n&&(n=o.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var a=i<0?l.map:c[i],o=0;o<a.length;o+=3){var s=a[o+2];if(s==t||s==n){var u=pe(i<0?e.line:e.rest[i]),d=a[o]+r;return(r<0||s!=t)&&(d=a[o+(r?1:0)]),_e(u,d)}}}var d=u(o,s,n);if(d)return jo(d,i);for(var p=s.nextSibling,f=o?o.nodeValue.length-n:0;p;p=p.nextSibling){if(d=u(p,p.firstChild,0))return jo(_e(d.line,d.ch-f),i);f+=p.textContent.length}for(var h=s.previousSibling,m=n;h;h=h.previousSibling){if(d=u(h,h.firstChild,-1))return jo(_e(d.line,d.ch+m),i);m+=h.textContent.length}}ko.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function a(e){if(!at(r,e)){if(r.somethingSelected())To({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Oo(r);To({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,G),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var a=Co.text.join("\n");if(e.clipboardData.setData("Text",a),e.clipboardData.getData("Text")==a)return void e.preventDefault()}var o=Mo(),s=o.firstChild;r.display.lineSpace.insertBefore(o,r.display.lineSpace.firstChild),s.value=Co.text.join("\n");var l=document.activeElement;L(s),setTimeout(function(){r.display.lineSpace.removeChild(o),l.focus(),l==i&&n.showPrimarySelection()},50)}}Ro(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),tt(i,"paste",function(e){at(r,e)||Fo(e,r)||s<=11&&setTimeout($r(r,function(){return t.updateFromDOM()}),20)}),tt(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),tt(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(i,"touchstart",function(){return n.forceCompositionEnd()}),tt(i,"input",function(){t.composing||t.readFromDOMSoon()}),tt(i,"copy",a),tt(i,"cut",a)},ko.prototype.prepareSelection=function(){var e=dr(this.cm,!1);return e.focus=this.cm.state.focused,e},ko.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},ko.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ko.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),a=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||a.line<t.display.viewFrom)e.removeAllRanges();else{var o=No(t,e.anchorNode,e.anchorOffset),s=No(t,e.focusNode,e.focusOffset);if(!o||o.bad||!s||s.bad||0!=ge(xe(o,s),i)||0!=ge(Ae(o,s),a)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Io(t,i)||{node:l[0].measure.map[2],offset:0},u=a.line<t.display.viewTo&&Io(t,a);if(!u){var d=l[l.length-1].measure,p=d.maps?d.maps[d.maps.length-1]:d.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var f,h=e.rangeCount&&e.getRangeAt(0);try{f=E(c.node,c.offset,u.offset,u.node)}catch(e){}f&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),h&&null==e.anchorNode?e.addRange(h):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},ko.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},ko.prototype.showMultipleSelections=function(e){T(this.cm.display.cursorDiv,e.cursors),T(this.cm.display.selectionDiv,e.selection)},ko.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},ko.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},ko.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ko.prototype.blur=function(){this.div.blur()},ko.prototype.getField=function(){return this.div},ko.prototype.supportsTouch=function(){return!0},ko.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Yr(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},ko.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},ko.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(_&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=No(t,e.anchorNode,e.anchorOffset),r=No(t,e.focusNode,e.focusOffset);n&&r&&Yr(t,function(){$i(t.doc,xi(n,r),G),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},ko.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,a=r.doc.sel.primary(),o=a.from(),s=a.to();if(0==o.ch&&o.line>r.firstLine()&&(o=_e(o.line-1,le(r.doc,o.line-1).length)),s.ch==le(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=_e(s.line+1,0)),o.line<i.viewFrom||s.line>i.viewTo-1)return!1;o.line==i.viewFrom||0==(e=cr(r,o.line))?(t=pe(i.view[0].line),n=i.view[0].node):(t=pe(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=cr(r,s.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=pe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var d=r.doc.splitLines(function(e,t,n,r,i){var a="",o=!1,s=e.doc.lineSeparator(),l=!1;function c(){o&&(a+=s,l&&(a+=s),o=l=!1)}function u(e){e&&(c(),a+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var a,p=t.getAttribute("cm-marker");if(p){var f=e.findMarks(_e(r,0),_e(i+1,0),(_=+p,function(e){return e.id==_}));return void(f.length&&(a=f[0].find(0))&&u(ce(e.doc,a.from,a.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var h=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;h&&c();for(var m=0;m<t.childNodes.length;m++)d(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),h&&(o=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var _}for(;d(t),t!=n;)t=t.nextSibling,l=!1;return a}(r,n,c,t,l)),p=ce(r.doc,_e(t,0),_e(l,le(r.doc,l).text.length));d.length>1&&p.length>1;)if($(d)==$(p))d.pop(),p.pop(),l--;else{if(d[0]!=p[0])break;d.shift(),p.shift(),t++}for(var f=0,h=0,m=d[0],_=p[0],g=Math.min(m.length,_.length);f<g&&m.charCodeAt(f)==_.charCodeAt(f);)++f;for(var v=$(d),y=$(p),A=Math.min(v.length-(1==d.length?f:0),y.length-(1==p.length?f:0));h<A&&v.charCodeAt(v.length-h-1)==y.charCodeAt(y.length-h-1);)++h;if(1==d.length&&1==p.length&&t==o.line)for(;f&&f>o.ch&&v.charCodeAt(v.length-h-1)==y.charCodeAt(y.length-h-1);)f--,h++;d[d.length-1]=v.slice(0,v.length-h).replace(/^\u200b+/,""),d[0]=d[0].slice(f).replace(/\u200b+$/,"");var x=_e(t,f),S=_e(l,p.length?$(p).length-h:0);return d.length>1||d[0]||ge(x,S)?(ua(r.doc,d,x,S,"+input"),!0):void 0},ko.prototype.ensurePolled=function(){this.forceCompositionEnd()},ko.prototype.reset=function(){this.forceCompositionEnd()},ko.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ko.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},ko.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Yr(this.cm,function(){return Jr(e.cm)})},ko.prototype.setUneditable=function(e){e.contentEditable="false"},ko.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||$r(this.cm,Vo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},ko.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},ko.prototype.onContextMenu=function(){},ko.prototype.resetPosition=function(){},ko.prototype.needsContentAttribute=!0;var zo=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null};zo.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function a(e){if(!at(r,e)){if(r.somethingSelected())To({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Oo(r);To({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,G):(n.prevInput="",i.value=t.text.join("\n"),L(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),tt(i,"input",function(){o&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),tt(i,"paste",function(e){at(r,e)||Fo(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())}),tt(i,"cut",a),tt(i,"copy",a),tt(e.scroller,"paste",function(t){if(!bn(e,t)&&!at(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var a=new Event("paste");a.clipboardData=t.clipboardData,i.dispatchEvent(a)}}),tt(e.lineSpace,"selectstart",function(t){bn(e,t)||ct(t)}),tt(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),tt(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},zo.prototype.createField=function(e){this.wrapper=Mo(),this.textarea=this.wrapper.firstChild},zo.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=dr(e);if(e.options.moveInputWithCursor){var i=Yn(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-a.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-a.left))}return r},zo.prototype.showSelection=function(e){var t=this.cm,n=t.display;T(n.cursorDiv,e.cursors),T(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},zo.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&L(this.textarea),o&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",o&&s>=9&&(this.hasSelection=null))}},zo.prototype.getField=function(){return this.textarea},zo.prototype.supportsTouch=function(){return!1},zo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!g||O()!=this.textarea))try{this.textarea.focus()}catch(e){}},zo.prototype.blur=function(){this.textarea.blur()},zo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},zo.prototype.receivedFocus=function(){this.slowPoll()},zo.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},zo.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var r=t.poll();r||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},zo.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||St(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=i.charCodeAt(0);if(8203!=a||r||(r=""),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Yr(t,function(){Vo(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},zo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},zo.prototype.onKeyPress=function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},zo.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=lr(n,e),c=r.scroller.scrollTop;if(a&&!d){var u=n.options.resetSelectionOnContextMenu;u&&-1==n.doc.sel.contains(a)&&$r(n,$i)(n.doc,xi(a),G);var p,f=i.style.cssText,h=t.wrapper.style.cssText,m=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(p=window.scrollY),r.input.focus(),l&&window.scrollTo(null,p),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=v,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),o&&s>=9&&g(),b){pt(e);var _=function(){rt(window,"mouseup",_),setTimeout(v,20)};tt(window,"mouseup",_)}else setTimeout(v,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),a=""+(e?i.value:"");i.value="",i.value=a,t.prevInput=e?"":"",i.selectionStart=1,i.selectionEnd=a.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,i.style.cssText=f,o&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!o||o&&s<9)&&g();var e=0,a=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&""==t.prevInput?$r(n,ra)(n):e++<10?r.detectingSelectAll=setTimeout(a,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(a,200)}}},zo.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},zo.prototype.setUneditable=function(){},zo.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,a){e.defaults[n]=r,i&&(t[n]=a?function(e,t,n){n!=vo&&i(e,t,n)}:i)}e.defineOption=n,e.Init=vo,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Pi(e)},!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Ci(e),Un(e),Jr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var a=e.text.indexOf(t,i);if(-1==a)break;i=a+t.length,n.push(_e(r,a))}r++});for(var i=n.length-1;i>=0;i--)ua(e.doc,t,n[i],_e(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=vo&&e.refresh()}),n("specialCharPlaceholder",Qt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",g?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),n("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),n("rtlMoveVisually",!A),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){go(e),xo(e)},!0),n("keyMap","default",function(e,t,n){var r=Ha(t),i=n!=vo&&Ha(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,bo,!0),n("gutters",[],function(e){pi(e.options),xo(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?ar(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return kr(e)},!0),n("scrollbarStyle","native",function(e){Nr(e),kr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){pi(e.options),xo(e)},!0),n("firstLineNumber",1,xo,!0),n("lineNumberFormatter",function(e){return e},xo,!0),n("showCursorWhenSelecting",!1,ur,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(yr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,So),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,ur,!0),n("singleCursorHeightPerLine",!0,ur,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ci,!0),n("addModeClass",!1,Ci,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Ci,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(wo),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&$r(this,t[e])(this,n,i),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ha(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Xr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Jr(this)}),removeOverlay:Xr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Jr(this)}}),indentLine:Xr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),he(this.doc,e)&&Po(this,e,t,n)}),indentSelection:Xr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Po(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Cr(this));else{var a=i.from(),o=i.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;l<n;++l)Po(this,l,e);var c=this.doc.sel.ranges;0==a.ch&&t.length==c.length&&c[r].from().ch>0&&qi(this.doc,r,new yi(a,c[r].to()),G)}}}),getTokenAt:function(e,t){return Wt(this,e,t)},getLineTokens:function(e,t){return Wt(this,_e(e),t,!0)},getTokenTypeAt:function(e){e=be(this.doc,e);var t,n=It(this,le(this.doc,e.line)),r=0,i=(n.length-1)/2,a=e.ch;if(0==a)t=n[2];else for(;;){var o=r+i>>1;if((o?n[2*o-1]:0)>=a)i=o;else{if(!(n[2*o+1]<a)){t=n[2*o+2];break}r=o+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],a=this.getModeAt(e);if("string"==typeof a[t])i[a[t]]&&r.push(i[a[t]]);else if(a[t])for(var o=0;o<a[t].length;o++){var s=i[a[t][o]];s&&r.push(s)}else a.helperType&&i[a.helperType]?r.push(i[a.helperType]):i[a.name]&&r.push(i[a.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(a,this)&&-1==N(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return jt(this,(e=Se(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Yn(this,null==e?n.head:"object"==typeof e?be(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Kn(this,be(this.doc,e),t||"page")},coordsChar:function(e,t){return Zn(this,(e=qn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=qn(this,{top:e,left:0},t||"page").top,fe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,i=!0),r=le(this.doc,e)}else r=e;return Hn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ke(r):0)},defaultTextHeight:function(){return nr(this.display)},defaultCharWidth:function(){return rr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var a,o,s,l=this.display,c=(e=Yn(this,be(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var d=Math.max(l.wrapper.clientHeight,this.doc.height),p=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>d)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=d&&(c=e.bottom),u+t.offsetWidth>p&&(u=p-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(a=this,o={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(s=Er(a,o)).scrollTop&&Dr(a,s.scrollTop),null!=s.scrollLeft&&Rr(a,s.scrollLeft))},triggerOnKeyDown:Xr(ao),triggerOnKeyPress:Xr(so),triggerOnKeyUp:oo,triggerOnMouseDown:Xr(po),execCommand:function(e){if(Xa.hasOwnProperty(e))return Xa[e].call(null,this)},triggerElectric:Xr(function(e){Do(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var a=be(this.doc,e),o=0;o<t&&!(a=Lo(this.doc,a,i,n,r)).hitSide;++o);return a},moveH:Xr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Lo(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},H)}),deleteH:Xr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):qa(this,function(n){var i=Lo(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,a=r;t<0&&(i=-1,t=-t);for(var o=be(this.doc,e),s=0;s<t;++s){var l=Yn(this,o,"div");if(null==a?a=l.left:l.left=a,(o=Bo(this,l,i,n)).hitSide)break}return o},moveV:Xr(function(e,t){var n=this,r=this.doc,i=[],a=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(o){if(a)return e<0?o.from():o.to();var s=Yn(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),i.push(s.left);var l=Bo(n,s,e,t);return"page"==t&&o==r.sel.primary()&&Pr(n,Kn(n,l,"div").top-s.top),l},H),i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),findWordAt:function(e){var t=this.doc,n=le(t,e.line).text,r=e.ch,i=e.ch;if(n){var a=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=n.length||!r?++i:--r;for(var o=n.charAt(r),s=te(o,a)?function(e){return te(e,a)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new yi(_e(e.line,r),_e(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):P(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xr(function(e,t){Tr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Cn(this)-this.display.barHeight,width:e.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:Vn(this),clientWidth:Tn(this)}},scrollIntoView:Xr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:_e(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Vr(e),e.curOp.scrollToPos=t}(this,e):Fr(this,e.from,e.to,e.margin)}),setSize:Xr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Nn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Qr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return Yr(this,e)},startOperation:function(){return zr(this)},endOperation:function(){return Gr(this)},refresh:Xr(function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,Un(this),Tr(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this),(null==e||Math.abs(e-nr(this.display))>.5)&&sr(this),it(this,"refresh",this)}),swapDoc:Xr(function(e){var t=this.doc;return t.cm=null,Di(this,e),Un(this),this.display.input.reset(),Tr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lt(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,a){e.registerHelper(t,r,a),n[t]._global.push({pred:i,val:a})}}(wo);var Go="iter insert remove copy getEditor constructor".split(" ");for(var Wo in Pa.prototype)Pa.prototype.hasOwnProperty(Wo)&&N(Go,Wo)<0&&(wo.prototype[Wo]=function(e){return function(){return e.apply(this.doc,arguments)}}(Pa.prototype[Wo]));return lt(Pa),wo.inputStyles={textarea:zo,contenteditable:ko},wo.defineMode=function(e){wo.defaults.mode||"null"==e||(wo.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Et[e]=t}.apply(this,arguments)},wo.defineMIME=function(e,t){Pt[e]=t},wo.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),wo.defineMIME("text/plain","null"),wo.defineExtension=function(e,t){wo.prototype[e]=t},wo.defineDocExtension=function(e,t){Pa.prototype[e]=t},wo.fromTextArea=function(e,t){if((t=t?k(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=O();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(tt(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var o=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=o}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(rt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var s=wo(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},function(e){e.off=rt,e.on=tt,e.wheelEventPixels=_i,e.Doc=Pa,e.splitLines=xt,e.countColumn=I,e.findColumn=q,e.isWordChar=ee,e.Pass=z,e.signal=it,e.Line=Kt,e.changeEnd=Si,e.scrollbarModel=jr,e.Pos=_e,e.cmpPos=ge,e.modes=Et,e.mimeModes=Pt,e.resolveMode=Ct,e.getMode=Tt,e.modeExtensions=Vt,e.extendMode=Ft,e.copyState=Dt,e.startState=Rt,e.innerMode=Ot,e.commands=Xa,e.keyMap=Ia,e.keyName=Wa,e.isModifierKey=za,e.lookupKey=Ua,e.normalizeKeyMap=Na,e.StringStream=Mt,e.SharedTextMarker=Sa,e.TextMarker=Aa,e.LineWidget=ga,e.e_preventDefault=ct,e.e_stopPropagation=ut,e.e_stop=pt,e.addClass=R,e.contains=D,e.rmClass=P,e.keyNames=Ma}(wo),wo.version="5.45.0",wo}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(51),a=n(41),o=n(18),s=n(53),l=n(2),c=n(50),u=n(117),d=n(0),p=n(3),f=n(54),h=n(16),m=n(32),_=n(225),g=n(226),v=n(23),y=n(37),A=n(11),x=n(28),S=n(72),b=n(24),w=n(55),E=n(52),P=n(36),C=n(1),T=n(19),V=n(84),F=n(56),D=n(118),O=n(85),R=n(42),M=n(131),L=function(){function e(){this.EVENT_MEM_SIZE=327680,this.EVENT_RAM_LOC=(2147483648|8388608-this.EVENT_MEM_SIZE)>>>0,this.EVENT_HEADER_SIZE=16}return e.prototype.loadBoards=function(){for(var e=[],t=i.getBoardInfos(r.romhandler.getROMGame()),n=0;n<t.length;n++){$$debug&&console.group("Board "+n);var l=t[n],c=l.bgDir,f=a.hvqfs.readBackground(c),h=void 0,m=this._pullBoardFromRom(l);if(m)(h=m).bg=f,h.otherbg={};else{var _={game:this.gameVersion,type:l.type||d.BoardType.NORMAL,bg:f,otherbg:{},events:{}},g=o.mainfs.get(this.boardDefDirectory,l.boardDefFile),v=(h=u.parse(g,_))._chains;delete h._chains,p.$$log("Board "+n+" chains: ",v),this.onChangeBoardSpaceTypesFromGameSpaceTypes(h,v),this._applyPerspective(h),this._cleanLoadedBoard(h),this._parseAudio(h,l),this._findEventTableLocations(l),this._extractEvents(l,h,n,v),this._extractStarGuardians(h,l),this._extractBoos(h,l)}this.onParseStrings(h,l),h.name||(h.name=l.name||""),this.onParseBoardSelectImg(h,l),this.onParseBoardLogoImg(h,l),l.onLoad&&l.onLoad(h),this.onLoad&&this.onLoad(h,l,!!m),e.push(h),$$debug&&console.groupEnd()}if($$debug){var y=s.audio.getPatchInfo().length;for(n=0;n<y;n++)s.audio.getROMOffset(n)}return e},e.prototype.overwriteBoard=function(e,t){var n=c.copyObject(t),s=i.getBoardInfoByIndex(r.romhandler.getROMGame(),e),p=u.determineChains(n);u.padChains(n,p);var f=l.addSpace(n.bg.width+150,n.bg.height+100,d.Space.OTHER,void 0,n);n._deadSpace=f,this.onChangeGameSpaceTypesFromBoardSpaceTypes(n),this._reversePerspective(n);var m=u.create(n,p);o.mainfs.write(this.boardDefDirectory,s.boardDefFile,m),this._createGateEvents(n,s,p);var _="";if(this.writeFullOverlay)_=this._writeNewBoardOverlay(n,s);else{var g=h.scenes.getDataView(s.sceneIndex),v=s.eventASMStart,y=s.eventASMEnd;if(v&&y)for(var A=v;A<y;A+=4)g.setUint32(A,0);this._writeStarInfo(n,s),this._writeBoos(n,s),this.onWriteAudio(n,s,e)}this.onWriteStrings(n,s),this.onCreateChainEvents(n,p),this._createStarEvents(n),s.onWriteEvents&&s.onWriteEvents(n),this.onWriteEvents&&this.onWriteEvents(n),this._writeEvents(n,s,e,p,_),this._clearOtherBoardNames(e),this._stashBoardIntoRom(t,s),a.hvqfs.updateMetadata(s.bgDir,n.bg),s.onAfterOverwrite&&s.onAfterOverwrite(n);var x=r.romhandler.getDataView();return this.onAfterOverwrite&&this.onAfterOverwrite(x,n,s),this.onOverwritePromises(t,s,e)},e.prototype._writeNewBoardOverlay=function(e,t){var n=this.onCreateBoardOverlay(e,t),i=r.romhandler.getROMGame(),a="\n        "+V.makeGameSymbolLabels(i,!0).join("\n")+"\n\n        "+n+"\n      ";p.$$log(a);var o=Object.create(null),s=S.assemble(a,{symbolOutputMap:o}),l=h.scenes.getInfo(t.sceneIndex),c=this._makeSymbolsForEventAssembly(o,l);return h.scenes.replace(t.sceneIndex,s.slice(0,o.bss),{code_end:l.code_start+o.rodata,rodata_start:l.code_start+o.rodata,rodata_end:l.code_start+o.bss,bss_start:l.code_start+o.bss,bss_end:l.code_start+s.byteLength}),c},e.prototype.onCreateBoardOverlay=function(e,t){throw new Error("Adapter does not implement onCreateBoardOverlay")},e.prototype.onAfterSave=function(e){},e.prototype.onOverwritePromises=function(e,t,n){throw"Adapter does not implement onOverwritePromises"},e.prototype.hydrateSpace=function(e,t){throw"hydrateSpace not implemented"},e.prototype.onParseStrings=function(e,t){p.$$log("Adapter does not implement onParseStrings")},e.prototype.onWriteStrings=function(e,t){p.$$log("Adapter does not implement onWriteStrings")},e.prototype._applyPerspective=function(e){var t=e.bg,n=[t.width,t.height],r=n[0],i=n[1],a=new F.PerspectiveCamera(t.fov,r/i,1,1e4);1===e.game?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new F.Vector3(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(var o=0;o<e.spaces.length;o++){var s=e.spaces[o],l=new F.Vector3(s.x,s.y,s.z);2!==e.game&&3!==e.game||(l.x*=t.scaleFactor/1.2,l.y*=t.scaleFactor/1.2,l.z*=t.scaleFactor/1.2);var c=l.project(a),u=r/2,d=i/2;s.x=Math.round(c.x*u+u),s.y=Math.round(-c.y*d+d),s.z=0}},e.prototype._reversePerspective=function(e){var t=e.bg,n=[t.width,t.height],r=n[0],i=n[1],a=new F.PerspectiveCamera(t.fov,r/i,1,1e4);1===e.game?a.position.set(t.cameraEyePosX,t.cameraEyePosY,t.cameraEyePosZ):a.position.set(t.cameraEyePosX/1.2,t.cameraEyePosY/1.2,t.cameraEyePosZ/1.2),a.lookAt(new F.Vector3(t.lookatPointX,t.lookatPointY,t.lookatPointZ)),a.scale.y=-1,a.updateMatrix(),a.updateMatrixWorld(!0),a.updateProjectionMatrix();for(var o=0;o<e.spaces.length;o++){var s=e.spaces[o],l=new F.Vector3(s.x/r*2-1,-s.y/i*2+1,.5);l.unproject(a),l.sub(a.position).normalize();var c=-a.position.z/l.z,u=new F.Vector3;u.copy(a.position).add(l.multiplyScalar(c)),2!==e.game&&3!==e.game||(u.x/=t.scaleFactor/1.2,u.y/=t.scaleFactor/1.2,u.z/=t.scaleFactor/1.2),s.x=u.x,s.y=u.y,s.z=u.z}},e.prototype.onGetGameCoordsFromBoardCoords=function(e,t,n,r){return p.$$log("Adapter does not implement onGetGameCoordsFromBoardCoords"),[e,t,n]},e.prototype.onChangeBoardSpaceTypesFromGameSpaceTypes=function(e,t){p.$$log("Adapter does not implement onChangeBoardSpaceTypesFromGameSpaceTypes")},e.prototype.onChangeGameSpaceTypesFromBoardSpaceTypes=function(e){p.$$log("Adapter does not implement onChangeGameSpaceTypesFromBoardSpaceTypes")},e.prototype._offsetToAddr=function(e,t){if("number"==typeof t.sceneIndex&&t.sceneIndex>=0){var n=h.scenes.getInfo(t.sceneIndex);return e<n.rom_start?(2147483647&n.ram_start)+e:(2147483647&n.ram_start)-(n.rom_start-e)}throw new Error("How do I _offsetToAddr?")},e.prototype._offsetToAddrBase=function(e,t){return t+e>>>0},e.prototype._addrToOffsetBase=function(e,t){return(2147483647&e)-(2147483647&t)>>>0},e.prototype._stashBoardIntoRom=function(e,t){if(t.mainfsBoardFile){var n=c.copyObject(e);delete n.bg,delete n.otherbg,delete n.animbg;var r=y.stringToArrayBuffer(JSON.stringify(n)),i=t.mainfsBoardFile,a=i[0],s=i[1];o.mainfs.write(a,s,r)}},e.prototype._pullBoardFromRom=function(e){if(!e.mainfsBoardFile)return null;var t=e.mainfsBoardFile,n=t[0],r=t[1];if(!o.mainfs.has(n,r))return null;var i=o.mainfs.get(n,r);return JSON.parse(y.stringFromArrayBuffer(i))},e.prototype._cleanLoadedBoard=function(e){var t=e.spaces.length-1,n=e.spaces[e.spaces.length-1];n&&n.x>e.bg.width+50&&n.y>e.bg.height+50&&(p.$$log("Pruning dead space",n),e.spaces.splice(t,1))},e.prototype._findEventTableLocations=function(e){if(!("number"!=typeof e.sceneIndex||e.sceneIndex<0)){var t=r.romhandler.getROMGame(),n=f.getSymbol(t,"EventTableHydrate"),i=h.scenes.getInfo(e.sceneIndex),a=h.scenes.getCodeDataView(e.sceneIndex),o=m.findCalls(a,n),s=[];e.spaceEventTables||(e.spaceEventTables=s);for(var l=0;l<o.length;l++){var c=o[l],u=a.getUint32(c-4),d=a.getUint32(c+4),_=m.getRegSetAddress(u,d),g=this._addrToOffsetBase(_,i.ram_start);p.$$log("Found event table "+p.$$hex(_)+" (ROM "+p.$$hex(g)+")"),s.push({tableOffset:g})}}},e.prototype._extractEvents=function(e,t,n,i){var a=this;if(e.spaceEventTables&&e.sceneIndex){var s,c,u=new _.SpaceEventTable;if(e.mainfsEventFile){var f=e.mainfsEventFile,y=f[0],A=f[1];o.mainfs.has(y,A)&&(s=o.mainfs.get(y,A),c=new DataView(s),u.parse(s,16))}var x=h.scenes.getInfo(e.sceneIndex);s||(c=h.scenes.getDataView(e.sceneIndex),s=c.buffer,e.spaceEventTables.forEach(function(e){var t;if(e.tableOffset)t=e.tableOffset;else{var n=c.getUint32(e.upper),r=c.getUint32(e.lower);if(!n&&!r)return;var i=m.getRegSetAddress(n,r);t=a._addrToOffsetBase(i,x.ram_start)}u.parse(s,t)})),u.forEach(function(o){var u,f=o.spaceIndex,m=2147483647&o.address;u=m>(2147483647&a.EVENT_RAM_LOC)?a._addrToOffsetBase(m,a.EVENT_RAM_LOC):a._addrToOffsetBase(m,x.ram_start);var _=new g.SpaceEventList;_.parse(s,u),_.forEach(function(o){var s,u,m=2147483647&o.address;m>(2147483647&a.EVENT_RAM_LOC)?(s=a._addrToOffsetBase(m,a.EVENT_RAM_LOC),u=c):(s=a._addrToOffsetBase(m,x.ram_start),u=h.scenes.getDataView(e.sceneIndex));var _=v.parse(u,{addr:m,offset:s,board:t,boardIndex:n,curSpace:f,curSpaceIndex:f,chains:i,game:r.romhandler.getROMGame(),gameVersion:a.gameVersion});_&&!0!==_&&(_.activationType=o.activationType,_.executionType=o.executionType,l.addEventByIndex(t,f,_)),$$debug&&Object.values&&-1===Object.values(d.EventActivationType).indexOf(o.activationType)&&p.$$log("Unknown event activation type "+p.$$hex(o.activationType)+", boardIndex: "+n+", spaceIndex: "+p.$$hex(f))})})}},e.prototype.onCreateChainEvents=function(e,t){for(var n=function(n){var i=t[n],o=i[i.length-1],s=l.getConnections(o,e),c=void 0;if(s.length>1){var u=[];if(s.forEach(function(e){u.push(a(e))}),1===r.gameVersion){if(s.length>2)throw new Error("Encountered branch with "+s.length+" directions, only 2 are supported currently");c=v.createSpaceEvent(D.ChainSplit1,{parameterValues:{left_space:s[0],right_space:s[1],chains:u}})}else{if(2!==r.gameVersion)throw new Error("Unexpected code path for MP3");c=v.createSpaceEvent(M.ChainSplit2,{inlineArgs:s.concat(65535),parameterValues:{chains:u}})}}else c=v.createSpaceEvent(O.ChainMerge,{parameterValues:{chain:a(s[0])}});l.addEventByIndex(e,o,c,!0)},r=this,i=0;i<t.length;i++)n(i);function a(e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n}},e.prototype._createStarEvents=function(e){for(var t=0;t<e.spaces.length;t++){var n=e.spaces[t];if(n&&n.star)(n.events||[]).some(function(e){return"STAR"===e.id})||l.addEventToSpace(e,n,v.createSpaceEvent(R.StarEvent))}},e.prototype._createGateEvents=function(e,t,n){for(var r=0,i=0;i<e.spaces.length;i++){var a=e.spaces[i];if(a&&a.subtype===d.SpaceSubtype.GATE){var o=A(i),s=e.spaces[o];if(!s)throw"Gate did not have entry space";var c=A(o);if(!e.spaces[c])throw"Gate did not have previous space";var u=S(c),p=n[u].indexOf(c),f=x(i),h=e.spaces[f];if(!h)throw"Gate did not have exit space";var m=x(f);if(!e.spaces[m])throw"Gate did not have next space";var _=S(m),g=n[_].indexOf(m),y=v.createSpaceEvent(R.Gate,{parameterValues:{gatePrevChain:[u,p],gateEntryIndex:o,gateSpaceIndex:i,gateExitIndex:f,gateNextChain:[_,g]}});l.addEventToSpace(e,s,y),l.addEventToSpace(e,h,y),l.addEventToSpace(e,a,v.createSpaceEvent(R.GateClose,{parameterValues:{gateIndex:r}})),r++}}function A(t){for(var n in e.links)for(var r=l.getConnections(parseInt(n),e),i=0;i<r.length;i++)if(r[i]===t)return Number(n);return-1}function x(t){return l.getConnections(t,e)[0]}function S(e){for(var t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t}},e.prototype._getArgsSize=function(e){return 2*e+(4-2*e%4)},e.prototype._writeEvents=function(e,t,n,r,i){t.mainfsEventFile&&(2!==this.gameVersion?this._writeEventsNew2(e,t,n,r,i):this._writeEventsNew(e,t,n,r),this.writeFullOverlay||this._writeEventAsmHook(t,n))},e.prototype._writeEventsNew=function(e,t,n,i){if(!t.mainfsEventFile)throw"No MainFS file specified to place board ASM for board "+n+".";var a=new ArrayBuffer(this.EVENT_MEM_SIZE),s=new DataView(a),l=this.EVENT_HEADER_SIZE;s.setUint32(0,y.toU32("PP64")),s.setUint32(4,this.EVENT_RAM_LOC);for(var c=new _.SpaceEventTable,u=[],d=0;d<e.spaces.length;d++){if((E=e.spaces[d]).events&&E.events.length){c.add(d,0);for(var p=new g.SpaceEventList,f=0;f<E.events.length;f++){var h=E.events[f];p.add(h.activationType,h.executionType||h.mystery,0)}u.push(p)}}var m=A.makeDivisibleBy(c.byteLength(),16),x=u.reduce(function(e,t){return e+t.byteLength()},0);l+=m+(x=A.makeDivisibleBy(x,16));var S={},b=0,w=this.EVENT_HEADER_SIZE+m;for(d=0;d<e.spaces.length;d++){var E;if((E=e.spaces[d]).events&&E.events.length){for(p=u[b],f=0;f<E.events.length;f++){var P=E.events[f],C=S[P.id]||{},T={boardIndex:n,board:e,curSpaceIndex:d,curSpace:E,chains:i,offset:l,addr:this._offsetToAddrBase(l,this.EVENT_RAM_LOC),game:r.romhandler.getROMGame(),gameVersion:this.gameVersion},V=v.write(a,P,T,C),F=V[0],D=V[1];S[P.id]=C;var O=void 0;O=F>this.EVENT_MEM_SIZE?2147483648|this._offsetToAddr(F,t):this._offsetToAddrBase(F,this.EVENT_RAM_LOC),p.setAddress(f,O),l+=D}var R=this._offsetToAddrBase(w,this.EVENT_RAM_LOC);c.add(d,R),w+=p.write(a,w),b++}}c.write(a,this.EVENT_HEADER_SIZE),s.setUint32(8,l),a=a.slice(0,l);var M=t.mainfsEventFile,L=M[0],B=M[1];o.mainfs.write(L,B,a)},e.prototype._writeEventsNew2=function(e,t,n,i,a){if(!t.mainfsEventFile)throw"No MainFS file specified to place board ASM for board "+n+".";for(var s=r.romhandler.getROMGame(),l=new _.SpaceEventTable,c=[],u=[],d={},f={},h=0;h<e.spaces.length;h++){var m=e.spaces[h];if(m.events&&m.events.length){l.add(h,0);for(var y=new g.SpaceEventList(h),A=0;A<m.events.length;A++){var x=m.events[A];y.add(x.activationType,x.executionType||x.mystery,0);var b=d[x.id]||{},w={boardIndex:n,board:e,curSpaceIndex:h,curSpace:m,chains:i,game:s,gameVersion:this.gameVersion},E=v.write(new ArrayBuffer(0),x,w,b);if(d[x.id]=b,"string"!=typeof E)throw new Error("Event "+x.id+" did not return a string to assemble");var P=v.getEvent(x.id,e);u.push(V.prepSingleEventAsm(E,P,x,w,!f[x.id],A)),f[x.id]=!0}c.push(y)}}var C,T="\n      .org "+p.$$hex(this.EVENT_RAM_LOC)+'\n      .ascii "PP64"\n      .word '+p.$$hex(this.EVENT_RAM_LOC)+"\n      .word 0 // Populated with buffer size later\n      .align 16\n\n      "+a+"\n\n      "+V.makeGameSymbolLabels(s,!1).join("\n")+"\n\n      "+l.getAssembly()+"\n      "+c.map(function(e){return e.getAssembly()}).join("\n")+"\n      "+u.join("\n")+"\n    ";p.$$log(T);try{C=S.assemble(T)}catch(A){throw new Error("Error during board assembly: "+A+"\nContext: "+T)}var F=new DataView(C);if(C.byteLength>this.EVENT_MEM_SIZE)throw new Error("Event code exceeded available memory space ("+C.byteLength+"/"+this.EVENT_MEM_SIZE+")");F.setUint32(8,C.byteLength);var D=t.mainfsEventFile,O=D[0],R=D[1];o.mainfs.write(O,R,C)},e.prototype._writeEventAsmHook=function(e,t){if(!e.eventASMStart)throw new Error("eventASMStart is not specified for board "+t);var n=this._offsetToAddr(e.eventASMStart,e),r=x.parse("JAL "+n),i=h.scenes.getDataView(e.sceneIndex);this._clearSpaceEventTableCalls(i,e);var a=e.spaceEventTables[0].upper;i.setUint32(a,r),p.$$log("Installed event hook at ROM "+p.$$hex(a)+", JAL "+n);var o=e.mainfsEventFile,s=o[0],l=o[1],c="\n      .orga "+e.eventASMStart+"\n\n      // Set up the stack (this is a legit function call)\n      ADDIU SP SP 0xFFE8\n      SW RA, 0x0010(SP)\n\n      // Call for the MainFS to read in the ASM blob.\n      LUI A0 "+s+"\n      JAL "+this.MAINFS_READ_ADDR+"\n      ADDIU A0 A0 "+l+"\n\n      // Now, V0 has the location that the MainFSRead put the blob... it isn't\n      // where we want it, it is in the heap somewhere, so we will move it.\n\n      // This is a pretty simple copy loop\n      // T4 = Copy of V0, Current source RAM location\n      // T0 = Current dest RAM location\n      // T1 = Size of buffer remaining to copy\n      // T2 = Temp word register to do the copy\n      ADDU T4 V0 R0 // Copy V0 -> T4\n      LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]\n      LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]\n    loop_start:\n      LW T2 0(T4)\n      SW T2 0(T0)\n      ADDIU T4 T4 4\n      ADDIU T0 T0 4\n      ADDIU T1 T1 -4\n      BGTZ T1 loop_start\n      NOP\n\n      // Now we can hydrate the table.\n      // T9 = V0 copy (least likely to be overwritten by an uncontrolled JAL)\n      // T4 = Dest buffer addr + 0x10, where the table really starts\n      ADDU T9 V0 R0 // Copy V0 -> T9\n      LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]\n      JAL "+this.TABLE_HYDRATE_ADDR+'\n      ADDIU A0 T4 16 // ADDIU A0, T4, 16\n\n      // Well, we copied the buffer... now we should "free" it with this magic JAL...\n      // Free our T9 reference, which theoretically could be corrupted, but in practice not.\n      JAL '+this.HEAP_FREE_ADDR+"\n      ADDU A0 T9 R0\n\n      // End the call stack\n      LW RA 0x10(SP)\n      JR RA\n      ADDIU SP SP 0x18\n    ";S.assemble(c,{buffer:i.buffer})},e.prototype._clearSpaceEventTableCalls=function(e,t){t.spaceEventTables.forEach(function(t){for(var n=t.upper;n<=t.lower;n+=4)e.setUint32(n,0)})},e.prototype._makeSymbolsForEventAssembly=function(e,t){var n="";for(var r in e)0===r.indexOf("__PP64_INTERNAL")&&(n+=".definelabel "+r+","+p.$$hex(t.ram_start+e[r])+"\n");return n},e.prototype.onWriteEventAsmHook=function(e,t,n){throw"Adapter does not implement onWriteEventAsmHook"},e.prototype._extractStarGuardians=function(e,t){if(t.sceneIndex){var n=h.scenes.getDataView(t.sceneIndex);if(t.toadSpaceInst){var r=n.getUint16(t.toadSpaceInst+2);e.spaces[r]&&(e.spaces[r].subtype=d.SpaceSubtype.TOAD)}if(t.starSpaceCount){var i=t.starSpaceArrOffset;Array.isArray(i)&&(i=i[0]);for(var a=0;a<t.starSpaceCount;a++){var o=n.getUint16(i+2*a);e.spaces[o]&&(e.spaces[o].star=!0)}for(a=0;a<t.starSpaceCount;a++){var s=t.toadSpaceArrOffset;Array.isArray(s)&&(s=s[0]);r=n.getUint16(s+2*a);e.spaces[r]&&(e.spaces[r].subtype=d.SpaceSubtype.TOAD)}}}},e.prototype._writeStarInfo=function(e,t){var n=t.starSpaceCount;if(n){for(var r=h.scenes.getDataView(t.sceneIndex),i=[],a=0;a<e.spaces.length;a++)e.spaces[a].star&&i.push(a);var o=t.starSpaceArrOffset;Array.isArray(o)||(o=[o]);for(a=0;a<o.length;a++)for(var s=o[a],c=0;c<n;c++){var u=c<i.length?c:i.length-1;r.setUint16(s+2*c,i[u])}var p=l.getSpacesOfSubType(d.SpaceSubtype.TOAD,e),f=t.toadSpaceArrOffset;Array.isArray(f)||(f=[f]);for(a=0;a<f.length;a++)for(s=f[a],c=0;c<n;c++){u=c<i.length?c:i.length-1;for(var m=e.spaces[i[u]],_=Number.MAX_VALUE,g=i[u],v=0;v<p.length;v++){var y=p[v],x=e.spaces[y],S=A.distance(m.x,m.y,x.x,x.y);S<_&&(_=S,g=y)}r.setUint16(s+2*c,g)}}},e.prototype._extractBoos=function(e,t){if(t.sceneIndex){var n,r=h.scenes.getDataView(t.sceneIndex);if(t.boosLoopFnOffset){var i=t.boosLoopFnOffset,a=r.getUint16(i+42);if(436273148===r.getUint32(i+40)&&(a=1),0===a)return;i=t.boosReadbackFnOffset;var o=r.getInt16(i+210);o=1048576+o;for(var s=h.scenes.getInfo(t.sceneIndex),l=this._addrToOffsetBase(o,s.ram_start),c=0;c<a;c++)n=r.getUint16(l+2*c),e.spaces[n]&&(e.spaces[n].subtype=d.SpaceSubtype.BOO)}else if(t.booSpaceInst)n=r.getUint16(t.booSpaceInst+2),e.spaces[n]&&(e.spaces[n].subtype=d.SpaceSubtype.BOO);else if(t.booCount)for(var u=t.booArrOffset,p=0;p<u.length;p++){var f=u[p];for(c=0;c<t.booCount;c++){var m=r.getUint16(f);e.spaces[m]&&(e.spaces[m].subtype=d.SpaceSubtype.BOO),f+=2}}}},e.prototype._writeBoos=function(e,t){if(t.sceneIndex){var n=l.getSpacesOfSubType(d.SpaceSubtype.BOO,e),r=h.scenes.getDataView(t.sceneIndex);if(t.boosLoopFnOffset){var i=t.boosLoopFnOffset,a=r.getUint16(i+42);if(436273148===r.getUint32(i+40)?a=1:n.length&&a>n.length&&r.setUint16(i+42,n.length),0===a)return;i=t.boosReadbackFnOffset;var o=r.getInt16(i+210);o=1048576+o;for(var s=h.scenes.getInfo(t.sceneIndex),c=this._addrToOffsetBase(o,s.ram_start),u=0;u<a;u++){var p=void 0===n[u]?e._deadSpace:n[u];r.setUint16(c+2*u,p)}}else if(t.booSpaceInst){p=void 0===n[0]?e._deadSpace:n[0];r.setUint16(t.booSpaceInst+2,p)}else if(t.booCount)for(var f=t.booArrOffset,m=0;m<f.length;m++){var _=f[m];for(u=0;u<t.booCount;u++){p=void 0===n[u]?e._deadSpace:n[u];r.setUint16(_,p),_+=2}}}},e.prototype._extractBanks=function(e,t){if(t.bankCount&&t.sceneIndex){for(var n=h.scenes.getDataView(t.sceneIndex),r=t.bankArrOffset,i=0;i<r.length;i++)for(var a=r[i],o=0;o<t.bankCount;o++){var s=n.getUint16(a);e.spaces[s]&&(e.spaces[s].subtype=d.SpaceSubtype.BANK),a+=2}for(i=0;i<t.bankCoinArrOffset.length;i++){var l=t.bankCoinArrOffset[i];for(o=0;o<t.bankCount;o++){var c=n.getUint16(l);e.spaces[c]&&(e.spaces[c].subtype=d.SpaceSubtype.BANKCOIN),l+=2}}}},e.prototype._writeBanks=function(e,t){if(t.bankCount&&t.sceneIndex){for(var n=h.scenes.getDataView(t.sceneIndex),r=l.getSpacesOfSubType(d.SpaceSubtype.BANK,e),i=t.bankArrOffset,a=0;a<i.length;a++)for(var o=i[a],s=0;s<t.bankCount;s++){var c=void 0===r[s]?e._deadSpace:r[s];n.setUint16(o,c),o+=2}var u=l.getSpacesOfSubType(d.SpaceSubtype.BANKCOIN,e);for(a=0;a<t.bankCoinArrOffset.length;a++){var p=t.bankCoinArrOffset[a];for(s=0;s<t.bankCount;s++){var f=void 0===u[s]?e._deadSpace:u[s];n.setUint16(p,f),p+=2}}}},e.prototype._extractItemShops=function(e,t){if(t.itemShopCount&&t.sceneIndex)for(var n=h.scenes.getDataView(t.sceneIndex),r=0;r<t.itemShopArrOffset.length;r++)for(var i=t.itemShopArrOffset[r],a=0;a<t.itemShopCount;a++){var o=n.getUint16(i);e.spaces[o]&&(e.spaces[o].subtype=d.SpaceSubtype.ITEMSHOP),i+=2}},e.prototype._writeItemShops=function(e,t){if(t.itemShopCount&&t.sceneIndex)for(var n=h.scenes.getDataView(t.sceneIndex),r=l.getSpacesOfSubType(d.SpaceSubtype.ITEMSHOP,e),i=0;i<t.itemShopArrOffset.length;i++)for(var a=t.itemShopArrOffset[i],o=0;o<t.itemShopCount;o++){var s=void 0===r[o]?e._deadSpace:r[o];n.setUint16(a,s),a+=2}},e.prototype._writeGates=function(e,t){if(t.gateCount&&t.sceneIndex){for(var n=h.scenes.getDataView(t.sceneIndex),r=[],i=0;i<e.spaces.length;i++)e.spaces[i].subtype===d.SpaceSubtype.GATE&&r.push(i);for(var a=t.gateArrOffset,o=0;o<a.length;o++){var s=a[o];for(i=0;i<t.gateCount;i++){var l=void 0===r[i]?e._deadSpace:r[i];n.setUint16(s,l),s+=2}}}},e.prototype._writeBackground=function(e,t,n,r){return new Promise(function(i,o){var s=b.createContext(n,r),l=new Image,c=setTimeout(function(){return o("Failed to write bg "+e)},45e3);l.onload=function(){s.drawImage(l,0,0,n,r);var t=s.getImageData(0,0,n,r);a.hvqfs.writeBackground(e,t,n,r),clearTimeout(c),i()},l.src=t})},e.prototype.onParseBoardSelectImg=function(e,t){p.$$log("Adapter does not implement onParseBoardSelectImg")},e.prototype.onWriteBoardSelectImg=function(e,t){return p.$$log("Adapter does not implement onWriteBoardSelectImg"),new Promise(function(e,t){e()})},e.prototype.onParseBoardLogoImg=function(e,t){p.$$log("Adapter does not implement onParseBoardLogoImg")},e.prototype.onWriteBoardLogoImg=function(e,t){return p.$$log("Adapter does not implement onWriteBoardLogoImgs"),new Promise(function(e,t){e()})},e.prototype._brandBootSplashscreen=function(){var e=this;return new Promise(function(t,n){if(T.get(T.$setting.writeBranding)){if(!e.nintendoLogoFSEntry||!e.hudsonLogoFSEntry)return p.$$log("Adapter cannot write branding"),void t();var r=new Image,i=setTimeout(function(){return n("Failed to overwrite boot logo")},45e3);r.onload=function(){e._combineSplashcreenLogos();var n=w.toArrayBuffer(r,320,240),a=[{src:E.RGBA5551fromRGBA32(n,320,240),width:320,height:240,bpp:16}],s=P.toPack(a,16,8);o.mainfs.write(e.hudsonLogoFSEntry[0],e.hudsonLogoFSEntry[1],s),clearTimeout(i),t()},r.src="img/bootsplash.png"}else t()})},e.prototype._combineSplashcreenLogos=function(){var e=o.mainfs.get(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1]);if(32===new Uint8Array(e)[26]){var t=o.mainfs.get(this.hudsonLogoFSEntry[0],this.hudsonLogoFSEntry[1]),n=P.fromPack(e)[0],r=P.fromPack(t)[0],i=new Uint8Array(n.src),a=new Uint8Array(r.src),s=b.createContext(320,240);s.fillStyle="black",s.fillRect(0,0,320,240);for(var l=s.getImageData(0,0,320,240),c=112640;c<197120;c++)l.data[c-51200]=i[c];for(c=112640;c<197120;c++)l.data[c+64e3]=a[c];var u=[{src:E.RGBA5551fromRGBA32(l.data.buffer,320,240),width:320,height:240,bpp:16}],d=P.toPack(u,16,8);o.mainfs.write(this.nintendoLogoFSEntry[0],this.nintendoLogoFSEntry[1],d)}},e.prototype._clearOtherBoardNames=function(e){p.$$log("Adapter does not implement _clearOtherBoardNames")},e.prototype._readPackedFromMainFS=function(e,t){var n=o.mainfs.get(e,t),r=P.fromPack(n);if(r&&r.length)return r.map(function(e){return new DataView(e.src)})},e.prototype._readImgsFromMainFS=function(e,t){var n=o.mainfs.get(e,t),r=P.fromPack(n);if(r&&r.length)return r},e.prototype._readImgInfoFromMainFS=function(e,t,n){return this._readImgsFromMainFS(e,t)[n||0]},e.prototype._readImgFromMainFS=function(e,t,n){var r=this._readImgInfoFromMainFS(e,t,n);return C.arrayBufferToDataURL(r.src,r.width,r.height)},e.prototype._parseAudio=function(e,t){if(t.audioIndexOffset&&t.sceneIndex){var n=h.scenes.getDataView(t.sceneIndex);e.audioIndex=n.getUint16(t.audioIndexOffset)}},e.prototype.onWriteAudio=function(e,t,n){if(t.audioIndexOffset&&t.sceneIndex){var r=h.scenes.getDataView(t.sceneIndex),i=e.audioIndex||0;r.setUint16(t.audioIndexOffset,i)}},e.prototype.getAudioMap=function(){return p.$$log("Adapter does not implement getAudioMap"),[]},e.prototype.getSoundEffectMap=function(e){return p.$$log("Adapter does not implement getSoundEffectMap"),[]},e.prototype.getCharacterMap=function(){return p.$$log("Adapter does not implement getCharacterMap"),{}},e}();t.AdapterBase=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(213),a=n(216),o=function(){function e(e,t){this.__type="ALWave",this._extract(e,t)}return e.prototype._extract=function(e,t){if(this.waveBase=e.getUint32(t),this.waveLen=e.getUint32(t+4),this.type=e.getUint8(t+8),this.flags=e.getUint8(t+9),this.type===r.AL_ADPCM_WAVE)this.adpcmWave=new i.ALADPCMWaveInfo(e,t+12);else{if(this.type!==r.AL_RAW16_WAVE)throw new Error("Unrecognized ALWaveTable type "+this.type);this.rawWave=new a.ALRAWWaveInfo(e,t+12)}},e}();t.ALWaveTable=o,function(e){e[e.AL_ADPCM_WAVE=0]="AL_ADPCM_WAVE",e[e.AL_RAW16_WAVE=1]="AL_RAW16_WAVE",e[e.AL_VOX_WAVE=2]="AL_VOX_WAVE",e[e.AL_MUSYX_WAVE=3]="AL_MUSYX_WAVE"}(r=t.ALWaveType||(t.ALWaveType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54),i=n(117),a=n(0),o=n(3);function s(e,t){var n=r.getSymbols(e).map(function(e){return".definelabel "+e.name+",0x"+e.addr.toString(16)});switch(e){case a.Game.MP3_USA:t?(n.push(".definelabel GetBasicPromptSelection,0"),n.push(".definelabel ViewBoardMap,0")):(n.push(".definelabel GetBasicPromptSelection,__PP64_INTERNAL_BASIC_MESSAGE_CHOICE"),n.push(".definelabel ViewBoardMap,__PP64_INTERNAL_VIEW_MAP"))}return n}function l(e,t,n){var r=[],o=e.parameters,s=t.parameterValues;return o&&o.length&&s&&o.forEach(function(e){var t=s[e.name];switch(e.type){case a.EventParameterType.Boolean:r.push(".definelabel "+e.name+","+(t?1:0));break;case a.EventParameterType.Space:if(r.push(".definelabel "+e.name+","+t),n.chains){var o=i.getChainIndexValuesFromAbsoluteIndex(n.chains,t);r.push(".definelabel "+e.name+"_chain_index,"+o[0]),r.push(".definelabel "+e.name+"_chain_space_index,"+o[1])}else r.push(".definelabel "+e.name+"_chain_index,-1"),r.push(".definelabel "+e.name+"_chain_space_index,-1");break;case a.EventParameterType.Number:"number"==typeof t&&r.push(".definelabel "+e.name+","+t);break;case a.EventParameterType.NumberArray:break;default:null!=t&&r.push(".definelabel "+e.name+","+t)}}),r}function c(e,t){var n=e.split("\n").map(function(e){return e.trim()}),r=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)if(".beginstatic"!==e[i])if(".endstatic"!==e[i])n||r.push(e[i]);else{if(!n)throw new Error("Saw .endstatic without .beginstatic");n=!1}else{if(n)throw new Error("Cannot repeat .beginstatic within a static section");n=!0,t||r.push("; omitted statics")}if(n)throw new Error("Saw .beginstatic without .endstatic");return r}(n,t),i=function(e){var t=/^\.definelabel\s+([^,]+)/i,n=/^([@\w\!\?]+):/i,r=[];return e.forEach(function(e){var i=t.exec(e);if(i)r.push(i[1]);else for(;i=n.exec(e);)r.push(i[1]),e=e.substr(i[0].length)}),r=r.filter(u)}(r);e=t?function(e){for(var t=[],n=0;n<e.length;n++)".beginstatic"===e[n]?t.push("; .beginstatic"):".endstatic"===e[n]?t.push("; .endstatic"):t.push(e[n]);return t.join("\n")}(n):r.join("\n");var a=/[@\w\!\?]/;return i.forEach(function(t){var n=-1;do{if((n=e.indexOf(t,n))>=0){if(n>0){var r=e[n-1];if(a.test(r)){n+=t.length;continue}}if(n+t.length<e.length){var i=e[n+t.length];if(a.test(i)){n+=t.length;continue}}e=e.slice(0,n)+"@"+e.slice(n),n+=t.length+1}}while(n>=0)}),e}function u(e){return!(e.indexOf("__PP64_INTERNAL")>=0)&&"@"!==e[0]}t.prepAsm=function(e,t,n,r){var i=".org "+o.$$hex(r.addr),a=s(r.game,!0),c=l(t,n,r);return[i].concat(a,c,[e,".align 4"]).join("\n")},t.prepSingleEventAsm=function(e,t,n,r,i,a){return c("\n    .beginfile ; Scopes static labels\n    __PP64_INTERNAL_EVENT_"+r.curSpaceIndex+"_"+a+":\n    "+l(t,n,r).join("\n")+"\n    "+e+"\n    .align 4\n    .endfile\n  ",i)},t.makeGameSymbolLabels=s,t.makeParameterSymbolLabels=l,t.scopeLabelsStaticByDefault=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(2),o=n(84),s=n(72),l=n(10);t.ChainMerge={id:"CHAINMERGE",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,parameters:[{name:"prevSpace",type:r.EventParameterType.Number},{name:"chain",type:r.EventParameterType.Number},{name:"spaceIndex",type:r.EventParameterType.Number}],fakeEvent:!0,supportedGames:[r.Game.MP1_USA,r.Game.MP2_USA],parse:function(e,t){var n,r,o="d218c758ea3247b6e5ec2ae0c3568a92",s="560c69d6e851f4a22984b74c660e8536",l="BABAF76D201027AE882BEB58BB38B4EB";return i.hashEqual([e.buffer,t.offset,12],o)&&i.hashEqual([e.buffer,t.offset+24,12],s)?(n=(n=e.getUint16(t.offset+14))>1e3?0:n,r=0===e.getUint16(t.offset+20)?t.chains[n][0]:t.chains[n][e.getUint16(t.offset+22)],isNaN(r)||a.addConnection(t.curSpace,r,t.board),!0):!(!i.hashEqual([e.buffer,t.offset,24],l)||!i.hashEqual([e.buffer,t.offset+36,12],s))&&(n=(n=e.getUint16(t.offset+26))>1e3?0:n,"number"==typeof(r=0===e.getUint16(t.offset+32)?t.chains[n][0]:t.chains[n][e.getUint16(t.offset+34)])&&a.addConnection(t.curSpace,r,t.board),!0)},write:function(e,n,r,a){var l="\n      ADDIU SP, SP, -0x18\n      SW    RA, 0x10(SP)\n      ADDIU A0, R0, -1\n      ADDIU A1, R0, "+n.parameterValues.chain+"\n      JAL   SetNextChainAndSpace\n      ADDIU A2, R0, "+(n.parameterValues.spaceIndex||0)+"\n      LW    RA, 0x10(SP)\n      JR    RA\n      ADDIU SP, SP, 0x18\n    ";if(2!==r.gameVersion)return l;var c=s.assemble(o.prepAsm(l,t.ChainMerge,n,r));return i.copyRange(e,c,0,0,c.byteLength),[r.offset,c.byteLength]}},l.addEventToLibrary(t.ChainMerge)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),i=n(28),a=n(27),o=function(){function e(){}return e.prototype.apply=function(e){throw new Error("apply not implemented, is that OK?")},e.prototype.writeHookCode=function(e){var t=a.getROMAdapter(),n=t&&t.MAINFS_READ_ADDR;if(!n)throw new Error("Cheats were being applied, but the ROM adapter had no MAINFS_READ_ADDR");var o=this.HOOK_ROM_START_OFFSET+4,s=r.getRegSetUpperAndLower(this.HOOK_RAM_START_OFFSET);e.setUint32(o,i.parse("LUI A1 "+(32768|s[0]))),e.setUint32(o+=4,i.parse("ADDIU A1 A1 "+s[1])),e.setUint32(o+=4,i.parse("LW A1 0(A1)")),e.setUint32(o+=4,i.parse("LUI A2 "+(this.HOOK_CACHE_DEFAULT_VALUE>>>16))),e.setUint32(o+=4,i.parse("ADDIU A2 A2 "+(65535&this.HOOK_CACHE_DEFAULT_VALUE))),e.setUint32(o+=4,i.parse("BNE A1 A2 11")),e.setUint32(o+=4,i.parse("ADDU T9 V0 R0")),e.setUint32(o+=4,i.parse("ADDU S7 RA R0")),e.setUint32(o+=4,i.parse("LUI A0 "+this.MAINFS_CHEAT_FILE[0])),e.setUint32(o+=4,i.parse("JAL "+n)),e.setUint32(o+=4,i.parse("ADDIU A0 A0 "+this.MAINFS_CHEAT_FILE[1])),e.setUint32(o+=4,i.parse("LUI A1 "+(32768|s[0]))),e.setUint32(o+=4,i.parse("ADDIU A1 A1 "+s[1])),e.setUint32(o+=4,i.parse("SW V0 0(A1)")),e.setUint32(o+=4,i.parse("ADDU A1 V0 R0")),e.setUint32(o+=4,i.parse("ADDU V0 T9 R0")),e.setUint32(o+=4,i.parse("ADDU RA S7 R0")),e.setUint32(o+=4,i.parse("JR A1")),e.setUint32(o+=4,0)},e}();t.HookBase=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i={},a={},o=0;function s(e,t){a[e]=t,i[e]=new Image,o+=1,i[e].onload=l}function l(){(o-=1)||r.render()}for(var c in s("toadImg","img/editor/toad.png"),s("mstarImg","img/editor/mstar.png"),s("bowserImg","img/editor/bowser.png"),s("koopaImg","img/editor/koopa.png"),s("booImg","img/editor/boo.png"),s("goombaImg","img/editor/goomba.png"),s("eventImg","img/editor/event.png"),s("eventErrorImg","img/editor/eventerrors.png"),s("starImg","img/editor/star.png"),s("bank2Img","img/editor/bank2.png"),s("bank3Img","img/editor/bank.png"),s("bankcoinImg","img/editor/bankcoin.png"),s("itemShop2Img","img/editor/itemshop2.png"),s("itemShop3Img","img/editor/itemshop.png"),s("gateImg","img/editor/gate.png"),s("spaceBowser","img/editor/spaces/bowser.png"),s("spaceItem2","img/editor/spaces/item2.png"),s("spaceBlue3","img/editor/spaces/blue3.png"),s("spaceRed3","img/editor/spaces/red3.png"),s("spaceHappening3","img/editor/spaces/happening3.png"),s("spaceChance3","img/editor/spaces/chance3.png"),s("spaceBowser3","img/editor/spaces/bowser3.png"),s("spaceItem3","img/editor/spaces/item3.png"),s("spaceBattle3","img/editor/spaces/battle3.png"),s("spaceBank3","img/editor/spaces/bank3.png"),s("spaceGameGuy3","img/editor/spaces/gameguy.png"),s("spaceDuelBasic3","img/editor/spaces/basic3.png"),s("spaceDuelPowerup3","img/editor/spaces/powerup3.png"),s("spaceDuelReverse3","img/editor/spaces/reverse3.png"),s("spaceGameGuyDuel3","img/editor/spaces/gameguyduel.png"),s("spaceMiniGameDuel3","img/editor/spaces/minigameduel3.png"),s("spaceHappeningDuel3","img/editor/spaces/happeningduel3.png"),s("targetImg","img/events/target.png"),a)if(a.hasOwnProperty(c)){var u=a[c];i[c].src=u}a=null,t.getImage=function(e){return i[e]}},function(e,t,n){"use strict";function r(){document.getElementById("dragZone").ondrop=null}var i;Object.defineProperty(t,"__esModule",{value:!0}),t.showDragZone=function(){var e=document.getElementById("dragZone");e.style.display="inline-block",e.ondragover||(e.ondragover=function(e){e.preventDefault()}),e.ondragenter||(e.ondragenter=function(t){e.className="hover"}),e.ondragleave||(e.ondragleave=function(t){e.className=""})},t.hideDragZone=function(){var e=document.getElementById("dragZone");e.style.display="none",e.className="",r()},t.setDropHandler=function(e){document.getElementById("dragZone").ondrop=e},t.clearHandlers=r,t.setEventParamDropHandler=function(e){i=e},t.getEventParamDropHandler=function(){return i}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o,s,l,c=n(248),u=n(4),d=n(37),p=c.Editor,f=c.EditorState,h=c.ContentState,m=c.SelectionState,_=c.Modifier,g=c.RichUtils,v=(c.Entity,c.CompositeDecorator);!function(e){e[e.Light=0]="Light",e[e.Dark=1]="Dark"}(o=t.MPEditorTheme||(t.MPEditorTheme={})),function(e){e[e.Edit=0]="Edit",e[e.Readonly=1]="Readonly",e[e.Display=2]="Display"}(s=t.MPEditorDisplayMode||(t.MPEditorDisplayMode={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(l=t.MPEditorToolbarPlacement||(t.MPEditorToolbarPlacement={}));var y=function(e){function n(n){var r,i=e.call(this,n)||this;i.componentWillReceiveProps=function(e){if(t.MPEditorStringAdapter.editorStateToString(i.state.editorState,{theme:i.state.theme})!==e.value){var n=t.MPEditorStringAdapter.stringToEditorState(e.value);i.setState({editorState:n})}},i.focus=function(){i.editor.focus()},i.onChange=function(e){i.setState({editorState:e}),i.setState(function(e,n){n.onValueChange&&n.onValueChange(n.id,t.MPEditorStringAdapter.editorStateToString(e.editorState,{theme:e.theme}))})},i.handleReturn=function(e,t){if(i.props.maxlines&&t.getCurrentContent().getPlainText().split("\n").length>=i.props.maxlines)return"handled";return"not-handled"},i.onFocus=function(e){i.props.onFocus&&i.props.onFocus(e)},i.onBlur=function(e){i.props.onBlur&&i.props.onBlur(e)},i.onToolbarClick=function(e){switch(e.type){case"COLOR":i.toggleColor(e.key);break;case"IMAGE":i.addImage(e.char);break;case"ACTION":switch(e.key){case"DARKLIGHT":var t=i.state.theme===o.Light?o.Dark:o.Light;i.setState({theme:t})}}setTimeout(function(){i.focus()},0)},i.toggleColor=function(e){var t=i.state.editorState,n=t.getSelection(),r=t.getCurrentContent(),a=Object.keys(A).reduce(function(e,t){return _.removeInlineStyle(e,n,t)},r),o=f.push(t,a,"change-inline-style"),s=t.getCurrentInlineStyle();n.isCollapsed()&&(o=s.reduce(function(e,t){return g.toggleInlineStyle(e,t)},o)),s.has(e)||(o=g.toggleInlineStyle(o,e)),i.onChange(o)},i.addImage=function(e){var t=i.state.editorState,n=t.getSelection(),r=_.replaceText(t.getCurrentContent(),n,e),a=f.push(t,r,"insert-characters");i.onChange(a)},r=n.value?t.MPEditorStringAdapter.stringToEditorState(n.value):f.createEmpty();var a=n.theme;return"number"!=typeof n.theme&&(a=n.value&&n.value.indexOf("WHITE")>=0?o.Dark:o.Light),i.state={editorState:r,theme:a},i}return i(n,e),n.prototype.render=function(){var e,t=this,n=this.state.editorState,r=this.props.displayMode||s.Edit;this.props.showToolbar&&r===s.Edit&&(e=u.createElement(E,{onItemClick:this.onToolbarClick,itemBlacklist:this.props.itemBlacklist}));var i=this.props.toolbarPlacement||l.Top,a="mpEditor";return r===s.Display&&(a+=" mpDisplay"),this.state.theme===o.Light&&(a+=" mpEditorLight"),this.state.theme===o.Dark&&(a+=" mpEditorDark"),e&&(i===l.Bottom?a+=" mpEditorShowToolbarBottom":a+=" mpEditorShowToolbarTop"),u.createElement("div",{className:a},i===l.Top&&e,u.createElement("div",{className:"mpEditorWrapper"},u.createElement(p,{ref:function(e){t.editor=e},editorState:n,stripPastedStyles:!0,readOnly:r!==s.Edit,customStyleMap:A,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,handleReturn:this.handleReturn})),i===l.Bottom&&e)},n}(u.Component);t.MPEditor=y;t.MPCompositeDecorator=new v([{strategy:function(e,t){for(var n=e.getText(),r=0;r<n.length;r++)S[n.charAt(r)]&&t(r,r+1)},component:function(e){var t=e.children[0].props.text,n="mpImage";n+=" mpImageKey-"+S[t];var r=a({},e);return delete r.contentState,delete r.decoratedText,delete r.entityKey,delete r.offsetKey,u.createElement("span",a({},r,{className:n}),u.createElement("span",{className:"mpImageTextWrapper"},e.children))}}]);var A={DEFAULT:{color:"#200E71"},BLACK:{color:"#000000"},WHITE:{color:"#FFFFFF"},RED:{color:"#E70014"},GREEN:{color:"#00AB29"},BLUE:{color:"#003EF9"},PURPLE:{color:"#E847CD"},YELLOW:{color:"#FFEA38"}},x=[{key:"COLOR",type:"SUBMENU",icon:"img/richtext/default.png",desc:"Font color",items:[{key:"DEFAULT",type:"COLOR",icon:"img/richtext/default.png",desc:"Default"},{key:"BLACK",type:"COLOR",icon:"img/richtext/black.png",desc:"Black"},{key:"WHITE",type:"COLOR",icon:"img/richtext/white.png",desc:"White"},{key:"RED",type:"COLOR",icon:"img/richtext/red.png",desc:"Red"},{key:"GREEN",type:"COLOR",icon:"img/richtext/green.png",desc:"Green"},{key:"BLUE",type:"COLOR",icon:"img/richtext/blue.png",desc:"Blue"},{key:"PURPLE",type:"COLOR",icon:"img/richtext/purple.png",desc:"Purple"},{key:"YELLOW",type:"COLOR",icon:"img/richtext/yellow.png",desc:"Yellow"}]},{key:"IMAGE",type:"SUBMENU",icon:"img/richtext/A.png",desc:"Insert image",items:[{key:"A",type:"IMAGE",icon:"img/richtext/A.png",desc:"A button",char:""},{key:"B",type:"IMAGE",icon:"img/richtext/B.png",desc:"B button",char:""},{key:"S",type:"IMAGE",icon:"img/richtext/S.png",desc:"Start button",char:""},{key:"CUP",type:"IMAGE",icon:"img/richtext/Cup.png",desc:"C-up button",char:""},{key:"CDOWN",type:"IMAGE",icon:"img/richtext/Cdown.png",desc:"C-down button",char:""},{key:"CLEFT",type:"IMAGE",icon:"img/richtext/Cleft.png",desc:"C-left button",char:""},{key:"CRIGHT",type:"IMAGE",icon:"img/richtext/Cright.png",desc:"C-right button",char:""},{key:"Z",type:"IMAGE",icon:"img/richtext/Z.png",desc:"Z button",char:""},{key:"R",type:"IMAGE",icon:"img/richtext/R.png",desc:"R button",char:""},{key:"ANALOG",type:"IMAGE",icon:"img/richtext/analog.png",desc:"Analog stick",char:""},{key:"COIN",type:"IMAGE",icon:"img/richtext/coin.png",desc:"Coin",char:""},{key:"STAR",type:"IMAGE",icon:"img/richtext/star.png",desc:"Star",char:""}]},{key:"ADVANCED",type:"SUBMENU",icon:"img/richtext/pause.png",desc:"Advanced text features",items:[{key:"PAUSE",type:"IMAGE",icon:"img/richtext/pause.png",desc:"Pause to continue",char:""},{key:"FEED",type:"IMAGE",icon:"img/richtext/feed.png",desc:"Feed new page",char:""}]},{key:"DARKLIGHT",type:"ACTION",icon:"img/richtext/darklight.png",desc:"Toggle background color (has no effect on actual game)"}],S={},b={};function w(e,t){switch(e.type){case"SUBMENU":return u.createElement(P,{key:e.key,item:e,onItemClick:t,items:e.items});default:return u.createElement(C,{key:e.key,item:e,onItemClick:t})}}x.forEach(function e(t){t.items&&t.items.forEach(e);t.char&&(S[t.char]=t.key,b[t.key]=t.char)});var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onItemClick=function(e){t.props.onItemClick&&t.props.onItemClick(e)},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.props.itemBlacklist,n=x.map(function(n){return t&&-1!==t.indexOf(n.key)?null:w(n,e.onItemClick)});return u.createElement("div",{className:"mpEditorToolbar"},n)},t}(u.Component),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expMenu=null,t.state={expanded:!1},t.onBlur=function(){t.setState({expanded:!1})},t.onClick=function(){t.setState({expanded:!t.state.expanded})},t.onItemClick=function(e){t.props.onItemClick&&t.props.onItemClick(e)},t}return i(t,e),t.prototype.render=function(){var e,t=this,n=this.props.item;if(this.state.expanded){var r=this.props.items.map(function(e){return w(e,t.onItemClick)});e=u.createElement("div",{ref:function(e){t.expMenu=e},className:"mpEditorToolbarSubmenuExp",tabIndex:-1,onBlur:this.onBlur},r)}return u.createElement("div",{className:"mpEditorToolbarButton",title:n.desc,onClick:this.onClick},u.createElement("img",{src:n.icon,alt:n.desc}),u.createElement("img",{src:"img/richtext/divot.png"}),e)},t.prototype.componentDidMount=function(){this.state.expanded&&this.expMenu.focus()},t.prototype.componentDidUpdate=function(){this.state.expanded&&this.expMenu.focus()},t}(u.Component),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onClick=function(){t.props.onItemClick(t.props.item)},t}return i(t,e),t.prototype.render=function(){var e=this.props.item;return u.createElement("div",{className:"mpEditorToolbarButton",title:e.desc,onClick:this.onClick},u.createElement("img",{src:e.icon,alt:e.desc}))},t}(u.Component);!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}i(t,e),t.prototype.render=function(){return u.createElement("div",{className:"mpEditorToolbarSeparator"})}}(u.Component);function T(e){for(var t=0;t<e.length;){var n=e.indexOf("<",t)+1;if(!n)return[];var r=e.indexOf(">",n);if(-1===r)return[];var i=e.substring(n,r);if(A[i])return[i,n-1,r+1];t=n}return[]}t.MPEditorStringAdapter=new(function(){function e(){}return e.prototype.editorStateToString=function(e,t){var n=e.getCurrentContent(),r=[],i=t.theme===o.Light?"DEFAULT":"WHITE",a=n.getBlockMap(),s=-1;return a.forEach(function(e){var t,n;s++;var a={};e.findStyleRanges(function(e){var r=e.getStyle().find(function(e){return!!A[e]});return r?n=!1:(n=!0,r=i),t=r,!0},function(e,r){n&&0===e&&0===s||(a[e]="<"+t+">")});var o=0,l=e.getText();for(var c in a){var u=o+parseInt(c);l=d.splice(l,u,0,a[c]),o+=a[c].length}r.push(l)}),r.join("\n")},e.prototype.stringToEditorState=function(e){for(var n=h.createFromText(e||""),r=n.getBlocksAsArray(),i=0;i<r.length;i++)for(var a=r[i],o=a.getText(),s=T(o),l=s[0],c=s[1],u=s[2],d=function(){var e,t=a.getKey(),s=m.createEmpty(a.getKey());s=s.merge({anchorOffset:c,focusKey:t,focusOffset:u}),n=_.replaceText(n,s,""),r=n.getBlocksAsArray(),a=r[i],o=a.getText();var d=r[r.length-1];s=s.merge({focusKey:d.getKey(),focusOffset:d.getText().length}),n=Object.keys(A).reduce(function(e,t){return _.removeInlineStyle(e,s,t)},n),n=_.applyInlineStyle(n,s,l),r=n.getBlocksAsArray(),a=r[i],e=T(o=a.getText()),l=e[0],c=e[1],u=e[2]};l;)d();return f.createWithContent(n,t.MPCompositeDecorator)},e}())},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var r=n(59),i=n(17),a=n(38),o=n(20),s=n(74),l=n(33),c=n(5),u=n(45),d=n(31),p=n(92),f=c.List,h=c.Record,m=c.Repeat,_=l.draft_tree_data_support?o:a,g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getEntityMap=function(){return s},t.prototype.getBlockMap=function(){return this.get("blockMap")},t.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},t.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},t.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},t.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.prototype.getFirstBlock=function(){return this.getBlockMap().first()},t.prototype.getLastBlock=function(){return this.getBlockMap().last()},t.prototype.getPlainText=function(e){return this.getBlockMap().map(function(e){return e?e.getText():""}).join(e||"\n")},t.prototype.getLastCreatedEntityKey=function(){return s.__getLastCreatedEntityKey()},t.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0},t.prototype.createEntity=function(e,t,n){return s.__create(e,t,n),this},t.prototype.mergeEntityData=function(e,t){return s.__mergeData(e,t),this},t.prototype.replaceEntityData=function(e,t){return s.__replaceData(e,t),this},t.prototype.addEntity=function(e){return s.__add(e),this},t.prototype.getEntity=function(e){return s.__get(e)},t.createFromBlockArray=function(e,n){var i=Array.isArray(e)?e:e.contentBlocks,a=r.createFromArray(i),o=a.isEmpty()?new u:u.createEmpty(a.first().getKey());return new t({blockMap:a,entityMap:n||s,selectionBefore:o,selectionAfter:o})},t.createFromText=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(n).map(function(e){return e=p(e),new _({key:d(),text:e,type:"unstyled",characterList:f(m(i.EMPTY,e.length))})});return t.createFromBlockArray(r)},t}(h({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}));e.exports=g},function(e,t,n){"use strict";var r=new RegExp("\r","g");e.exports=function(e){return e.replace(r,"")}},function(e,t,n){"use strict";var r=n(6),i="LTR",a="RTL",o=null;function s(e){return e===i||e===a}function l(e){return s(e)||r(!1),e===i?"ltr":"rtl"}function c(e){o=e}var u={NEUTRAL:"NEUTRAL",LTR:i,RTL:a,isStrong:s,getHTMLDir:l,getHTMLDirIfDifferent:function(e,t){return s(e)||r(!1),s(t)||r(!1),e===t?null:l(e)},setGlobalDir:c,initGlobalDir:function(){c(i)},getGlobalDir:function(){return o||this.initGlobalDir(),o||r(!1),o}};e.exports=u},function(e,t,n){"use strict";var r=n(5).Map,i=n(4),a=n(46),o=r({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:i.createElement("ul",{className:a("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:i.createElement("ol",{className:a("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:i.createElement("pre",{className:a("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=o},function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},function(e,t,n){"use strict";function r(e,t){return t&&"MUTABLE"===e.__get(t).getMutability()?t:null}e.exports=function(e,t){var n;if(t.isCollapsed()){var i=t.getAnchorKey(),a=t.getAnchorOffset();return a>0?(n=e.getBlockForKey(i).getEntityAt(a-1))!==e.getBlockForKey(i).getEntityAt(a)?null:r(e.getEntityMap(),n):null}var o=t.getStartKey(),s=t.getStartOffset(),l=e.getBlockForKey(o);return n=s===l.getLength()?null:l.getEntityAt(s),r(e.getEntityMap(),n)}},function(e,t,n){"use strict";var r=n(280);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";function r(e,t){var n=i.get(e,t);return"auto"===n||"scroll"===n}var i={get:n(282),getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=i},function(e,t,n){"use strict";var r=n(287),i=n(288);e.exports=function(e){var t=r(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=i(e),a=e===t?e.ownerDocument.documentElement:e,o=e.scrollWidth-a.clientWidth,s=e.scrollHeight-a.clientHeight;return n.x=Math.max(0,Math.min(n.x,o)),n.y=Math.max(0,Math.min(n.y,s)),n}},function(e,t,n){"use strict";var r=n(152);e.exports=function(e){for(var t=e;t&&t!==document.documentElement;){var n=r(t);if(null!=n)return n;t=t.parentNode}return null}},function(e,t,n){"use strict";var r=n(26).isPlatform("Mac OS X"),i={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return r&&e.altKey},hasCommandModifier:function(e){return r?!!e.metaKey&&!e.altKey:i.isCtrlKeyCommand(e)}};e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.getSelection(),r=e.getCurrentContent(),i=n.getStartKey(),a=n.getStartOffset(),o=i,s=0;if(t>a){var l=r.getKeyBefore(i);null==l?o=i:(o=l,s=r.getBlockForKey(l).getText().length)}else s=a-t;return n.merge({focusKey:o,focusOffset:s,isBackward:!0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isMtnx=function(e){return!!e&&(e instanceof DataView||(e=new DataView(e)),1297370712===e.getUint32(0))},e.unpack=function(t){if(t instanceof DataView||(t=new DataView(t)),!e.isMtnx(t))return null;var n=Object.create(null);n.totalFrames=t.getUint16(10),n.tracks=[];for(var r=t.getUint16(8),i=t.getUint32(12),a=t.getUint32(16),o=t.getUint32(20),s=new DataView(t.buffer,t.byteOffset+i),l=new DataView(t.buffer,t.byteOffset+a),c=new DataView(t.buffer,t.byteOffset+o),u=0;u<r;u++){var d=t.getUint32(24+4*u),p=new DataView(t.buffer,t.byteOffset+d);n.tracks.push(e.parseTrack(p,u,s,l,c))}return n},e.parseTrack=function(t,n,r,i,a){var o=Object.create(null);o.type=t.getUint8(0),o.dimension=t.getUint8(1),o.mystery1=t.getUint8(2),o.mystery2=t.getUint8(3),o.mystery3=t.getUint16(4),o.totalFrames=t.getUint16(6),o.mystery4=t.getUint8(8),o.objIndex=t.getUint8(9),o.keyframeCount=t.getUint16(14),o.d=r.getUint8(n);var s=t.getUint16(10),l=t.getUint16(12);o.keyframes=Object.create(null);for(var c=0;c<o.keyframeCount;c++){var u=i.getUint16(2*s+2*c);o.keyframes[u]=e.parseData(a,l,c)}return o},e.parseData=function(e,t,n){var r=Object.create(null);return r.value1=e.getFloat32(4*t+12*n),r.value2=e.getFloat32(4*t+12*n+4),r.value3=e.getFloat32(4*t+12*n+8),r},e}();t.MTNX=r,function(e){!function(e){e[e.X=69]="X",e[e.Y=70]="Y",e[e.Z=71]="Z"}(e.Dimension||(e.Dimension={})),function(e){e[e.Transform=23]="Transform",e[e.Rotation=76]="Rotation",e[e.Scale=27]="Scale"}(e.TrackType||(e.TrackType={}))}(r=t.MTNX||(t.MTNX={})),t.MTNX=r},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(c=n.slice()).length,l=0;l<o;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(t=e.exports=n(169)).Stream=t,t.Readable=t,t.Writable=n(106),t.Duplex=n(40),t.Transform=n(174),t.PassThrough=n(350)},function(e,t,n){"use strict";(function(t,r,i){var a=n(78);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;v.WritableState=g;var c=n(65);c.inherits=n(49);var u={deprecate:n(349)},d=n(170),p=n(79).Buffer,f=i.Uint8Array||function(){};var h,m=n(171);function _(){}function g(e,t){s=s||n(40),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),w(e,t))}(e,n,r,t,i);else{var o=S(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?l(A,e,n,o,i):A(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(e){if(s=s||n(40),!(h.call(v,this)||this instanceof s))return new v(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function y(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function A(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),w(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,y(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),w(e,t)})}function w(e,t){var n=S(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(b,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,d),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===v&&(e&&e._writableState instanceof g)}})):h=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,p.isBuffer(r)||r instanceof f);return s&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=_),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,r,i,a);return l}(this,i,s,e,t,n)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(76),n(172).setImmediate,n(12))},function(e,t,n){"use strict";var r=n(66),i=n(178),a=n(179),o=n(180);a=n(179);function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},e.exports=s},function(e,t,n){"use strict";var r=n(8);var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),s=n(0),l=n(44),c=n(380),u=n(47),d=n(13),p=n(2),f=n(10),h=null,m="; NAME:\n; GAMES:\n; EXECUTION: Direct\n\nADDIU SP SP -4\nSW RA 0(SP)\n\n; Your code here\n\nLW RA 0(SP)\nJR RA\nADDIU SP SP 4",_=function(e){function t(t){var n=e.call(this,t)||this;n._codemirror=null,n.onEventNameChange=function(e){var t=a({},n.state,{eventName:e});n.setState({eventName:e}),n.syncTextToStateVars(t,n.state.asm)},n.onAsmChange=function(e){n.setState({asm:e}),n.syncStateVarsToText(e)},n.onGameToggleClicked=function(e,t){var r,i=n.state.supportedGames,o=i.indexOf(e);-1===o&&t?(n.setState({supportedGames:i.concat([e])}),(r=a({},n.state)).supportedGames=i.concat([e])):o>=0&&!t&&(i.splice(o,1),n.setState({supportedGames:i}),(r=a({},n.state)).supportedGames=i),r&&n.syncTextToStateVars(r,n.state.asm)},n.onExecTypeToggleClicked=function(e,t){var r=a({},n.state);r.executionType=e,n.setState({executionType:e}),n.syncTextToStateVars(r,n.state.asm)},n.onAddEventParameter=function(e){var t=a({},n.state);t.parameters=n.state.parameters.concat([e]),n.setState(t),n.syncTextToStateVars(t,n.state.asm)},n.onRemoveEventParameter=function(e){var t=a({},n.state);t.parameters=n.state.parameters.filter(function(t){return t.name!==e.name}),n.setState(t),n.syncTextToStateVars(t,n.state.asm)},n.getEventName=function(){return n.state.eventName},n.getSupportedGames=function(){return n.state.supportedGames},n.getExecutionType=function(){return n.state.executionType},n.getEventAsm=function(){return n.state.asm},n.syncTextToStateVars=function(e,t){var r=n.__clearDiscreteProperties(t,["NAME","GAMES","EXECUTION","PARAM"]);r="\n"+r,r=n.__writeDiscretePropertyArray(r,"PARAM",e.parameters.map(function(e){return e.type+"|"+e.name})),r=n.__writeDiscreteProperty(r,"EXECUTION",s.getExecutionTypeName(e.executionType)),r=n.__writeDiscreteProperty(r,"GAMES",e.supportedGames.map(s.getGameName).join(",")),(r=n.__writeDiscreteProperty(r,"NAME",e.eventName.trim()))!==t&&n.setState({asm:r})},n.syncStateVarsToText=function(e){var t=n.__readDiscreteProperty(e,"NAME");null!==t&&n.setState({eventName:(t||"").trim()}),null!==(t=l.CustomAsmHelper.readSupportedGames(e))&&n.setState({supportedGames:t}),(t=l.CustomAsmHelper.readExecutionType(e))&&n.setState({executionType:t}),(t=l.CustomAsmHelper.readParameters(e))&&n.setState({parameters:t})},n.promptExit=function(){var e=n.state.asm,t=n.state.originalAsm;return!(!t||t!==e)||!!window.confirm("Are you sure you want to exit without saving the event?")};var r=d.getCurrentEvent();return n.state=r?{eventName:r.name,supportedGames:r.supportedGames,executionType:r.executionType,asm:r.asm,parameters:r.parameters,originalAsm:r.asm}:{eventName:"",supportedGames:[],executionType:s.EventExecutionType.DIRECT,asm:m,parameters:[]},n}return i(t,e),t.prototype.render=function(){var e=this;return this.state.hasError?o.createElement("p",null,"An error was encountered."):o.createElement("div",{className:"createEventViewContainer"},o.createElement(c.CodeMirrorWrapper,{ref:function(t){e._codemirror=t},className:"eventcodemirror",value:this.state.asm,onChange:this.onAsmChange}),o.createElement(g,{name:this.state.eventName,onEventNameChange:this.onEventNameChange,supportedGames:this.state.supportedGames,onGameToggleClicked:this.onGameToggleClicked,executionType:this.state.executionType,onExecTypeToggleClicked:this.onExecTypeToggleClicked,parameters:this.state.parameters,onAddEventParameter:this.onAddEventParameter,onRemoveEventParameter:this.onRemoveEventParameter}))},t.prototype.componentDidMount=function(){h=this},t.prototype.componentWillUnmount=function(){h=null},t.prototype.__clearDiscreteProperties=function(e,t){return t.forEach(function(t){var n=new RegExp("^\\s*[;\\/]+\\s*"+t+":.*[\r\n]*","gim");e=e.replace(n,"")}),e},t.prototype.__writeDiscreteProperty=function(e,t,n){return"; "+t+": "+n+"\n"+e},t.prototype.__writeDiscretePropertyArray=function(e,t,n){for(var r=n.length-1;r>=0;r--)e="; "+t+": "+n[r]+"\n"+e;return e},t.prototype.__readDiscreteProperty=function(e,t){return l.CustomAsmHelper.readDiscreteProperty(e,t)},t}(o.Component);t.CreateEventView=_;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEventNameChange=function(e){t.props.onEventNameChange(e.target.value)},t._gameSupported=function(e){return t.props.supportedGames.indexOf(e)>=0},t}return i(t,e),t.prototype.render=function(){var e=[{id:s.Game.MP1_USA,text:"MP1 USA",selected:this._gameSupported(s.Game.MP1_USA)},{id:s.Game.MP2_USA,text:"MP2 USA",selected:this._gameSupported(s.Game.MP2_USA)},{id:s.Game.MP3_USA,text:"MP3 USA",selected:this._gameSupported(s.Game.MP3_USA)},{id:s.Game.MP1_JPN,text:"MP1 JPN",selected:this._gameSupported(s.Game.MP1_JPN)},{id:s.Game.MP2_JPN,text:"MP2 JPN",selected:this._gameSupported(s.Game.MP2_JPN)},{id:s.Game.MP3_JPN,text:"MP3 JPN",selected:this._gameSupported(s.Game.MP3_JPN)},{id:s.Game.MP1_PAL,text:"MP1 PAL",selected:this._gameSupported(s.Game.MP1_PAL)},{id:s.Game.MP2_PAL,text:"MP2 PAL",selected:this._gameSupported(s.Game.MP2_PAL)},{id:s.Game.MP3_PAL,text:"MP3 PAL",selected:this._gameSupported(s.Game.MP3_PAL)}],t=[{id:1,text:"Direct",title:"The game will execute the event function directly",selected:this.props.executionType===s.EventExecutionType.DIRECT},{id:2,text:"Process",title:"The game will use its process system when executing the event function",selected:this.props.executionType===s.EventExecutionType.PROCESS}];return o.createElement("div",{className:"createEventForm"},o.createElement("label",null,"Name:"),o.createElement("input",{value:this.props.name,onChange:this.onEventNameChange}),o.createElement("br",null),o.createElement("br",null),o.createElement("label",null,"Supported Games:"),o.createElement(u.ToggleGroup,{items:e,groupCssClass:"createEventGameToggles",onToggleClick:this.props.onGameToggleClicked}),o.createElement("br",null),o.createElement("label",null,"Execution Type:"),o.createElement(u.ToggleGroup,{items:t,allowDeselect:!1,onToggleClick:this.props.onExecTypeToggleClicked}),o.createElement("br",null),o.createElement("label",null,"Parameters:"),o.createElement(v,{parameters:this.props.parameters,onAddEventParameter:this.props.onAddEventParameter,onRemoveEventParameter:this.props.onRemoveEventParameter}))},t}(o.Component),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this,t=this.props.parameters.map(function(t){return o.createElement(y,{entry:t,key:t.name,onRemoveEntry:e.props.onRemoveEventParameter})});return o.createElement("div",{className:"eventParametersList"},o.createElement("table",null,o.createElement("tbody",null,t)),o.createElement(A,{onAddEntry:this.props.onAddEventParameter}))},t}(o.Component),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDeleteClick=function(){t.props.onRemoveEntry(t.props.entry)},t}return i(t,e),t.prototype.render=function(){var e=this.props.entry,t=e.type,n=e.name;return o.createElement("tr",{className:"eventParameterEntry"},o.createElement("td",{className:"eventParameterEntryType"},t),o.createElement("td",{className:"eventParameterEntryName",title:n},n),o.createElement("td",{className:"eventParameterEntryDelete"},o.createElement("img",{src:"img/events/delete.png",alt:"Delete",onClick:this.onDeleteClick})))},t}(o.Component),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedType:"",name:""},t.onNameChange=function(e){var n=e.target.value;n.match(l.CustomAsmHelper.validParameterNameRegex)&&t.setState({name:n})},t.onTypeChange=function(e){t.setState({selectedType:e.target.value})},t.onAddClick=function(){t.state.name&&t.state.selectedType&&(t.props.onAddEntry({name:t.state.name,type:t.state.selectedType}),t.setState({name:"",selectedType:""}))},t}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:"eventParameterAddNewEntry"},o.createElement("select",{value:this.state.selectedType,onChange:this.onTypeChange},o.createElement("option",null),o.createElement("option",{value:s.EventParameterType.Boolean},"Boolean"),o.createElement("option",{value:s.EventParameterType.Number},"Number"),o.createElement("option",{value:s.EventParameterType.PositiveNumber},"Positive Number"),o.createElement("option",{value:s.EventParameterType.Space},"Space")),o.createElement("input",{type:"text",placeholder:"Name",value:this.state.name,onChange:this.onNameChange}),o.createElement(u.Button,{onClick:this.onAddClick},"Add"))},t}(o.Component);t.saveEvent=function(){var e=h.getEventName(),t=h.getSupportedGames(),n=(h.getExecutionType(),h.getEventAsm());if(e){var r=f.getEventFromLibrary(e);if(!r||r.custom)if(t.length)if(n){try{if(d.getCurrentEventIsBoardEvent())p.addEventToBoard(p.getCurrentBoard(),e,n);else{var i=l.createCustomEvent(n,!0);f.addEventToLibrary(i)}}catch(e){d.showMessage(e.toString())}h&&h.setState({originalAsm:n})}else d.showMessage("No assembly code was provided.");else d.showMessage("At least one game must be supported.");else d.showMessage("The event name collides with a reserved event name from the original boards.")}else d.showMessage("An event name must be specified.")},t.createEventPromptExit=function(){if(h)return h.promptExit()},t.getActiveEditorSupportedGames=function(){return h?h.getSupportedGames():[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(9),o=n(44),s=n(23),l=n(67);l.createRule("HASSTART","Has start space",i.ValidationLevel.ERROR).fails=function(e,t){return r.getStartSpaceIndex(e)<0&&"No start space found on board."},l.createRule("GAMEVERSION","Game version mismatch",i.ValidationLevel.ERROR).fails=function(e,t){var n=a.romhandler.getGameVersion();return n!==e.game&&"Board is for MP"+e.game+", but ROM is MP"+n},l.createRule("DEADEND","No dead ends",i.ValidationLevel.WARNING).fails=function(e,t){var n=r.getDeadEnds(e),i=r.getStartSpaceIndex(e);return!(i<0)&&(n.indexOf(i)>=0?"Start space does not lead anywhere.":!!n.length&&"There is a dead end on the board.")},l.createRule("TOOMANYSPACES","Too many spaces",i.ValidationLevel.ERROR).fails=function(e,t){return e.spaces.length>65535&&"There is a hard limit of 65535 spaces."},l.createRule("OVERRECOMMENDEDSPACES","Over recommended spaces",i.ValidationLevel.WARNING).fails=function(e,t){var n=e.spaces.length;return n>t.max&&n+" spaces present, more than "+t.max+" spaces can be unstable."};var c=function(e,t){l.createRule("TOOMANY"+t.toUpperCase().replace(/\s+/g,""),"Too many "+t,i.ValidationLevel.ERROR).fails=function(n,r){void 0===r&&(r={});var i=r.limit||0,a=n.spaces.filter(function(t){return t&&t.subtype===e}).length;return a>i&&"There are "+a+" "+t+", but the limit is "+i+" for this board."}};c(i.SpaceSubtype.BOO,"Boos"),c(i.SpaceSubtype.BOWSER,"Bowsers"),c(i.SpaceSubtype.KOOPA,"Koopas"),c(i.SpaceSubtype.BANK,"Banks"),c(i.SpaceSubtype.ITEMSHOP,"Item Shops"),c(i.SpaceSubtype.GATE,"Gates");l.createRule("BADSTARCOUNT","Bad star count",i.ValidationLevel.ERROR).fails=function(e,t){void 0===t&&(t={});var n=t.low||1,r=t.high||1,i=e.spaces.filter(function(e){return e&&e.star}).length;return(i<n||i>r)&&(n!==r?"There are "+i+" stars, but the range is "+n+"-"+r+" for this board.":"There are "+i+" stars, but the count must be "+n+" for this board.")};var u=function(e,t){l.createRule("TOOFEW"+t.toUpperCase().replace(/\s+/g,"")+"SPACES","Too few "+t+" spaces",i.ValidationLevel.ERROR).fails=function(n,r){void 0===r&&(r={});var i=r.low||0,a=n.spaces.filter(function(t){return t&&t.type===e}).length;return a<i&&"There are "+a+" "+t+" spaces, need at least "+i+" spaces of this type."}};u(i.Space.BLUE,"Blue"),u(i.Space.RED,"Red"),l.createRule("TOOMANYOFEVENT","Too many of event",i.ValidationLevel.ERROR).fails=function(e,t){var n=0;e.spaces.forEach(function(e){e&&e.events&&e.events.forEach(function(e){e.id===t.event.id&&n++})});var r=t.low||0,i=t.high||0;if(n<r||n>i){if(r&&i)return"There are "+n+" of event "+t.event.name+", but the range is "+r+"-"+i+" for this board.";if(r)return"There are "+n+" of event "+t.event.name+", but there must be at least "+r+" for this board.";if(i)return"There are "+n+" of event "+t.event.name+", but there can be at most "+i+" for this board."}return!1},l.createRule("UNRECOGNIZEDEVENTS","Unrecognized events",i.ValidationLevel.ERROR).fails=function(e,t){var n=Object.create(null);e.spaces.forEach(function(t){t&&t.events&&t.events.forEach(function(t){s.getEvent(t.id,e)||(n[t.id]=!0)})});var r=[];for(var i in n)r.push(i);if(!r.length)return!1;var a="The following events were unrecognized:\n";return r.forEach(function(e){a+="\t"+e+"\n"}),a},l.createRule("UNSUPPORTEDEVENTS","Unsupported events",i.ValidationLevel.ERROR).fails=function(e,t){var n=Object.create(null),r=a.romhandler.getROMGame();e.spaces.forEach(function(t){t&&t.events&&t.events.forEach(function(t){var i=s.getEvent(t.id,e);i&&s.isUnsupported(i,r)&&(n[t.id]=!0)})});var i=[];for(var o in n)i.push(o);if(!i.length)return!1;var l="The following events cannot be written to this ROM:\n";return i.forEach(function(e){l+="\t"+e+"\n"}),l},l.createRule("CUSTOMEVENTFAIL","Custom event errors",i.ValidationLevel.ERROR).fails=function(e,t){var n=Object.create(null),i=a.romhandler.getROMGame();e.spaces.forEach(function(t){t&&t.events&&t.events.forEach(function(t){if(t&&t.custom)try{var a=s.getEvent(t.id,e),l=r.getBoardEventAsm(e,t.id);o.CustomAsmHelper.testAssemble(l,a.parameters,{game:i})}catch(e){console.error(e.toString()),n[t.id]||(n[t.id]=!0)}})});var l=[];for(var c in n)l.push(c);if(!l.length)return!1;var u="The following custom events fail to assemble:\n";return l.forEach(function(e){u+="\t"+e+"\n"}),u},l.createRule("CUSTOMEVENTBADPARAMS","Custom event parameter issues",i.ValidationLevel.ERROR).fails=function(e,t){var n=Object.create(null);e.spaces.forEach(function(t){t&&t.events&&t.events.forEach(function(t){if(t&&t.custom){var r=s.getEvent(t.id,e).parameters;r&&r.length&&r.forEach(function(e){t.parameterValues&&t.parameterValues.hasOwnProperty(e.name)||(n[e.name]||(n[e.name]=0),n[e.name]++)})}})});var r=[];for(var i in n){var a=n[i];a&&r.push("\t"+a+" "+i+" event parameter"+(a>1?"s are ":" is ")+"not set")}return!!r.length&&"Some event parameters need to be set:\n"+r.join("\n")},l.createRule("TOOMANYPATHOPTIONS","Too many path options",i.ValidationLevel.ERROR).fails=function(e,t){void 0===t&&(t={});var n=t.limit||2;for(var r in e.links){var i=e.links[r];if(Array.isArray(i)&&i.length>n)return"A space branches in "+i.length+" directions, but the maximum is "+n+"."}return!1},l.createRule("CHARACTERSONPATH","Characters are on path",i.ValidationLevel.WARNING).fails=function(e,t){for(var n in void 0===t&&(t={}),e.links){var r=e.spaces[n];if(r.hasOwnProperty("subtype")&&r.subtype!==i.SpaceSubtype.GATE)return"Characters and objects <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#special-charactersobjects' target='_blank'>should not be on the player path</a>."}return!1},l.createRule("SPLITATNONINVISIBLESPACE","Split at non-invisible space",i.ValidationLevel.WARNING).fails=function(e,t){void 0===t&&(t={});var n=[i.Space.OTHER,i.Space.STAR,i.Space.START,i.Space.BLACKSTAR,i.Space.ARROW];for(var a in e.links){if(r.getConnections(parseInt(a),e).length>1){var o=e.spaces[a];if(-1===n.indexOf(o.type))return"There is a <a href='https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board#board-flow' target='_blank'>non-conventional path split</a>."}}return!1},l.createRule("TOOMANYARROWROTATIONS","Too many arrow rotations",i.ValidationLevel.WARNING).fails=function(e,t){void 0===t&&(t={});var n=0;return e.spaces.forEach(function(e){e&&"number"==typeof e.rotation&&n++}),n>t.limit&&"Only "+t.limit+" arrows will be rotated in-game."},l.createRule("GATESETUP","Incorrect gate setup",i.ValidationLevel.ERROR).fails=function(e,t){void 0===t&&(t={});for(var n=r.getSpacesOfSubType(i.SpaceSubtype.GATE,e),a=0;a<n.length;a++){var o=n[a];if(e.spaces[o].type!==i.Space.OTHER)return"Only invisible spaces can have gates.";var s=r.getConnections(o,e);if(1!==s.length)return"A single path should leave a gate space.";var l=s[0],c=e.spaces[l];if(!c||c.type!==i.Space.OTHER)return"Space after a gate space must be invisible.";if(c.subtype===i.SpaceSubtype.GATE)return"Gate spaces must be 2 or more spaces apart.";if(1!==m(l).length)return"A single path should connect to the space after a gate space.";var u=r.getConnections(l,e);if(1!==u.length)return"A single path should leave the space after a gate space";var d=u[0];if(e.spaces[d].subtype===i.SpaceSubtype.GATE)return"Gate spaces must be 2 or more spaces apart.";var p=m(o);if(1!==p.length)return"A single path should connect to a gate space.";var f=p[0],h=e.spaces[f];if(!h||h.type!==i.Space.OTHER)return"Space before a gate space must be invisible.";if(h.subtype===i.SpaceSubtype.GATE)return"Gate spaces must be 2 or more spaces apart.";if(1!==m(f).length)return"A single path should connect to the space before a gate space."}function m(t){var n=[],i=function(i){r.getConnections(parseInt(i),e).forEach(function(e){e===t&&n.push(Number(i))})};for(var a in e.links)i(a);return n}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(83),i=n(414),a=8,o=24,s=8,l=68;function c(e,t,n){var c=t.wave,u=new DataView(e,c.waveBase);if(c.type===r.ALWaveType.AL_RAW16_WAVE){var d=a+4+o+s+(c.waveLen-2)+l,p=new ArrayBuffer(d);(y=new DataView(p)).setUint32(0,1380533830);var f=d-8;y.setUint32(4,f,!0),y.setUint32(8,1463899717),y.setUint32(12,1718449184),y.setUint32(16,16,!0),y.setUint16(20,1,!0),y.setUint16(22,1,!0),y.setUint32(24,n,!0),y.setUint32(28,2*n,!0),y.setUint16(32,2,!0),y.setUint16(34,16,!0),y.setUint32(36,1684108385);var h=c.waveLen-2;y.setUint32(40,h,!0);for(var m=44,_=0;_<h;_++,m++)y.setUint8(m,u.getUint8(_+1));y.setUint32(m,1936552044),m+=4,y.setUint32(m,60,!0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4;var g=60;return t.keymap&&0!==t.keymap.keyBase&&(g=t.keymap.keyBase),y.setUint32(m,g,!0),m+=4,null!==c.rawWave.loop&&(y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,1,!0),m+=4,y.setUint32(m,0),m+=4,c.rawWave.loop.count>0&&(y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,c.rawWave.loop.start,!0),m+=4,y.setUint32(m,c.rawWave.loop.end,!0),m+=4,y.setUint32(m,0),m+=4,4294967295===c.rawWave.loop.count?y.setUint32(m,0):y.setUint32(m,c.rawWave.loop.count,!0),m+=4)),p}if(c.type===r.ALWaveType.AL_ADPCM_WAVE){var v=c.adpcmWave;if(!v||!v.book)throw new Error("Cannot decode AL_ADPCM_WAVE without book");var y,A=new ArrayBuffer(4*c.waveLen*2),x=i.decodeVADPCM(u,A,c.waveLen,v.book,48==(48&c.flags));d=a+4+o+s+2*x+l,p=new ArrayBuffer(d);(y=new DataView(p)).setUint32(0,1380533830);f=d-a;y.setUint32(4,f,!0),y.setUint32(8,1463899717),y.setUint32(12,1718449184),y.setUint32(16,o-8,!0),y.setUint16(20,1,!0),y.setUint16(22,1,!0),y.setUint32(24,n,!0),y.setUint32(28,2*n,!0),y.setUint16(32,2,!0),y.setUint16(34,16,!0),y.setUint32(36,1684108385);h=2*x;y.setUint32(40,h,!0);for(var S=new DataView(A),b=(m=44,0);b<2*x;b++,m++)y.setUint8(m,S.getUint8(b));y.setUint32(m,1936552044),m+=4,y.setUint32(m,60,!0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4;g=60;return t.keymap&&0!==t.keymap.keyBase&&(g=t.keymap.keyBase),y.setUint32(m,g,!0),m+=4,null!==v.loop&&(y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,1,!0),m+=4,y.setUint32(m,0),m+=4,v.loop.count>0&&(y.setUint32(m,0),m+=4,y.setUint32(m,0),m+=4,y.setUint32(m,v.loop.start,!0),m+=4,y.setUint32(m,v.loop.end,!0),m+=4,y.setUint32(m,0),m+=4,4294967295===v.loop.count?y.setUint32(m,0):y.setUint32(m,v.loop.count,!0),m+=4)),p}throw new Error("Unsupported wave type "+c.type)}t.extractWavSound=function(e,t,n,r){if(n>=t.instruments.length||!t.instruments.length)throw new Error("Invalid bank instrument index"+n);var i=t.instruments[n];if(r>=i.sounds.length||!i.sounds.length)throw new Error("Invalid sound instrument index"+r);return c(e,i.sounds[r],t.sampleRate)},t.extractWavFromSound=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSavedBoards=function(){var e=window.localStorage&&localStorage.getItem("boards");return e&&(e=JSON.parse(e)),e&&e.length?e:null},t.getSavedEvents=function(){var e=window.localStorage&&localStorage.getItem("events");return e&&(e=JSON.parse(e)),e&&e.length?e:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(209),i=function(){function e(e){if(this.__type="B1",this.banks=[],16945!==e.getUint16(0))throw"B1 constructor encountered non-B1 structure";this._extract(e)}return e.prototype._extract=function(e){for(var t=e.getUint16(2),n=0;n<t;n++){var i=e.getUint32(4+4*n);this.banks.push(new r.ALBank(e,i))}},e}();t.B1=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.__type="ALEnv",this.__smallVolumes=n,this._extract(e,t)}return e.prototype._extract=function(e,t){this.attackTime=e.getInt32(t),this.decayTime=e.getInt32(t+4),this.releaseTime=e.getInt32(t+8),this.__smallVolumes?(this.attackVolume=e.getUint8(t+12),this.decayVolume=e.getUint8(t+13)):(this.attackVolume=e.getInt16(t+12),this.decayVolume=e.getInt16(t+14))},e}();t.ALEnvelope=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),i=n(83),a=function(){function e(e,t){this.__type="ALSoundSimple",this._extract(e,t)}return e.prototype._extract=function(e,t){var n=e.getUint32(t);this.env=new r.ALEnvelope(e,n),this.sampleRate=e.getUint32(t+4);var a=e.getUint32(t+8);this.wave=new i.ALWaveTable(e,a),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)},e}();t.ALSoundSimple=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(11),o=n(3),s=n(50),l=n(9);function c(e){var t=new DataView(e),n=l.romhandler.getGameVersion();switch(n){case 1:return{spaceCount:t.getUint16(0),chainCount:t.getUint16(4),spaceStartOffset:t.getUint16(6),linkStartOffset:t.getUint16(10)};case 2:case 3:return{spaceCount:t.getUint16(0),chainCount:t.getUint16(2),spaceStartOffset:t.getUint16(4),linkStartOffset:t.getUint16(6)}}throw new Error("Unrecongized game "+n)}function u(){var e,t=l.romhandler.getGameVersion();switch(t){case 1:e=12;break;case 2:case 3:e=8;break;default:throw"_boardDefHeaderSize: unknown game version "+t}return e}function d(e){var t=(e=s.copyObject(e)).spaces,n=e.links,i=[];function a(e){for(var r,s=[],l=e;!t[l]._seen;){if(t[l]._seen=!0,s.push(l),r=n[l],Array.isArray(r))return i.push(s),void r.forEach(function(e){a(e)});if("number"!=typeof r)return console.warn("determineChains.parseChain hit a dead end at "+o.$$hex(l)+" ("+l+")"),void i.push(s);if(p(r,l))return i.push(s),void a(r);l=r}s.length&&i.push(s)}for(var l={},c=0;c<t.length;c++)t[c]&&(l[c]=[]);var u=function(t){r.getConnections(parseInt(t,10),e).forEach(function(e){l[e].push(Number(t))})};for(var d in n)u(d);function p(e,t){return void 0===t?!!l[e].length:!!l[e].length&&(-1===l[e].indexOf(Number(t))||l[e].length>1)}a(r.getStartSpaceIndex(e));for(c=0;c<t.length;c++)t[c]&&(t[c]._seen||!p(c)&&r.hasConnection(c,"*",e)&&a(c));for(c=0;c<t.length;c++)t[c]&&!t[c]._seen&&r.hasConnection(c,"*",e)&&a(c);return o.$$log("chains: ",i),i}t.parse=function(e,t){var n=c(e);t.spaces=function(e,t){for(var n=new DataView(e,t.spaceStartOffset),r=[],i=0,a=0;a<t.spaceCount;a++)r.push({type:n.getUint8(i+3),x:n.getFloat32(i+4),y:n.getFloat32(i+12),z:n.getFloat32(i+8)}),i+=16;return r}(e,n);var r=function(e,t){for(var n=new Array(t.chainCount),r={},i=new DataView(e,t.linkStartOffset),a=0;a<t.chainCount;a++){var o=i.getUint16(2*a),s=new DataView(e,t.linkStartOffset+o),l=s.getUint16(0);if(n[a]=[],1===l)n[a].push(s.getUint16(2));else for(var c=1;c<l;c++){var u=s.getUint16(2*c),d=s.getUint16(2*(c+1));r.hasOwnProperty(u)?(Array.isArray(r[u])||(r[u]=[r[u]]),-1===r[u].indexOf(d)&&r[u].push(d)):r[u]=d,n[a].push(u),c+1===l&&n[a].push(d)}}return{links:r,chains:n}}(e,n);return t.links=r.links,t._chains=r.chains,o.$$log("Parsing board def, "+o.$$hex(n.spaceCount)+" ("+n.spaceCount+") spaces"),t},t.create=function(e,t){void 0===t&&(t=d(e));var n=new ArrayBuffer(function(e,t){var n,r,i;return n=u(),r=16*e.spaces.length,i=2*t.length,t.forEach(function(e){i+=2*(e.length+1)}),n+r+i}(e,t));return function(e,t,n){var r=new DataView(e),i=l.romhandler.getGameVersion(),a=u()+16*t.spaces.length;switch(i){case 1:r.setUint16(0,t.spaces.length),r.setUint16(4,n.length),r.setUint16(6,12),r.setUint16(8,a),r.setUint16(10,a);break;case 2:case 3:r.setUint16(0,t.spaces.length),r.setUint16(2,n.length),r.setUint16(4,8),r.setUint16(6,a)}}(n,e,t),function(e,t){var n=new DataView(e),r=u();t.forEach(function(e){n.setUint32(r,e.type),n.setFloat32(r+4,e.x),n.setFloat32(r+8,e.z),n.setFloat32(r+12,e.y),r+=16})}(n,e.spaces),function(e,t){var n,r,i=new DataView(e);n=r=c(e).linkStartOffset;for(var a=2*t.length,o=0;o<t.length;o++){i.setUint16(r,a),i.setUint16(n+a,t[o].length),a+=2;for(var s=0;s<t[o].length;s++)i.setUint16(n+a,t[o][s]),a+=2;r+=2}}(n,t),n},t.determineChains=d,t.padChains=function(e,t){for(var n=e.spaces,s=e.links,l=0;l<t.length;l++){var c=t[l];if(1===c.length){var u=c[0],d=n[u],p=s[u],f=void 0,h=void 0;if(Array.isArray(p))if(1===p.length){var m=n[p[0]];f=(A=a.midpoint(d.x,d.y,m.x,m.y)).x,h=A.y}else if(2===p.length){var _=n[p[0]],g=n[p[1]],v=a.midpoint(_.x,_.y,g.x,g.y),y=.01/a.distance(d.x,d.y,v.x,v.y);f=(1-y)*d.x+y*v.x,h=(1-y)*d.y+y*v.y,o.$$log("Padding branch x: "+d.x+", y: "+d.y+", padX: "+f+", padY: "+h)}else f=d.x,h=d.y;else if("number"==typeof p){var A;m=n[p],f=(A=a.midpoint(d.x,d.y,m.x,m.y)).x,h=A.y}if("number"==typeof f&&"number"==typeof h){var x=r.addSpace(f,h,i.Space.OTHER,void 0,e);c.push(x),s[u]=x,s[x]=p}}}},t.trimChains=function(e,t){},t.getChainIndexValuesFromAbsoluteIndex=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].indexOf(t);if(r>=0)return[n,r]}return[-1,-1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(2),o=n(10);t.ChainSplit1={id:"CHAINSPLIT1",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,parameters:[{name:"left_space",type:r.EventParameterType.Space},{name:"right_space",type:r.EventParameterType.Space},{name:"chains",type:r.EventParameterType.NumberArray}],fakeEvent:!0,supportedGames:[r.Game.MP1_USA],parse:function(e,t){var n="597324F65BC9A4D0BCA9527477258625",r="24FBEBD7FA3B256016D536690EF70AD8",o="F153076BBD19ECBB4967EFC92CD738DF";if(i.hashEqual([e.buffer,t.offset,44],n)&&i.hashEqual([e.buffer,t.offset+76,28],r)&&i.hashEqual([e.buffer,t.offset+224,40],o)){var s=e.getUint16(t.offset+218),l=e.getUint16(t.offset+222),c=t.chains[s][0],u=t.chains[l][0];return a.addConnection(t.curSpace,c,t.board),a.addConnection(t.curSpace,u,t.board),!0}return!1},write:function(e,t,n,r){var i=t.parameterValues.chains;return"\n        ADDIU SP SP 0xFFD8\n        SW RA 0x24(SP)\n        SW S2 0x20(SP)\n        SW S1 0x1C(SP)\n        SW S0 0x18(SP)\n\n        ; Change player to standing animation?\n        ADDIU A0 R0 -1\n        ADDIU A1 R0 -1\n        JAL 0x80052BE8\n        ADDIU A2 R0 2\n\n        JAL SleepVProcess\n        NOP\n        JAL chainsplit_1_setup_arrows\n        NOP\n        LUI S0 0x800F\n        ADDIU S0 S0 0xD5DC ; 0x800ED5DC\n        LH A0 0(S0)\n        LUI A1 hi(indices)\n        JAL 0x8003C218\n        ADDIU A1 A1 lo(indices)\n        ADDU S2 V0 R0\n        ADDU A0 S2 R0\n        LH A1 0(S0)\n        JAL 0x8003C060\n        ADDU A2 R0 R0\n        JAL PlayerIsCPU\n        ADDIU A0 R0 -1\n        BEQ V0 R0 do_direction_prompt\n        NOP\n        LUI A0 hi(ai_logic)\n        ADDIU A0 A0 lo(ai_logic)\n        JAL 0x8003E9B0\n        ADDU S0 R0 R0\n        SLL V0 V0 0x10\n        SRA S1 V0 0x10\n        BLEZ S1 choice_neg\n        ADDU A0 S2 R0\n      choice_pos:\n        JAL 0x8003BE84\n        ADDIU A1 R0 0xFFFE\n        ADDIU S0 S0 1\n        SLT V0 S0 S1\n        BNE V0 R0 choice_pos\n        ADDU A0 S2 R0\n      choice_neg:\n        JAL 0x8003BE84\n        ADDIU A1 R0 0xFFFC\n      do_direction_prompt:\n        JAL 0x8003C14C ; DirectionPrompt\n        ADDU A0 S2 R0\n        ADDU S0 V0 R0\n        JAL 0x8003B908\n        ADDU A0 S2 R0\n        JAL chainsplit_1_hide_arrows\n        NOP\n        BNE S0 R0 set_chain_right\n        ADDIU A0 R0 -1\n        J set_chain\n        ADDIU A1 R0 "+i[0]+"\n      set_chain_right:\n        ADDIU A1 R0 "+i[1]+"\n      set_chain:\n        JAL SetNextChainAndSpace\n        ADDU A2 R0 R0 ; 0th space of the chain\n        JAL 0x8005DD90\n        ADDU A0 R0 R0\n        LW RA 0x24(SP)\n        LW S2 0x20(SP)\n        LW S1 0x1C(SP)\n        LW S0 0x18(SP)\n        JR RA\n        ADDIU SP SP 0x28\n\n      ; Choose randomly\n      ai_logic:\n        .word 0x00000000, 0x00000000, 0x00003232\n\n      indices:\n        .halfword left_space\n        .halfword right_space\n        .halfword 0xFFFF\n        .align 4\n\n    .beginstatic\n      .definelabel CORE_800EE320,0x800EE320\n\n      chainsplit_1_setup_arrows:\n        addiu SP, SP, -0x18\n        sw    RA, 0x10(SP)\n      @@setup_arrows_loop1:\n        jal 0x8004B850 ; waiting for this to signal\n        NOP\n        beq V0, R0, @@setup_arrows_loop1_exit\n        NOP\n        jal SleepVProcess\n        NOP\n        j @@setup_arrows_loop1\n        NOP\n      @@setup_arrows_loop1_exit:\n        jal SleepVProcess\n        NOP\n        addu  A0, R0, R0\n        addiu A1, R0, 146\n        jal   0x80045D84\n        addiu A2, R0, 1\n        lui   AT, hi(chainsplit_1_memval1)\n        sw    V0, lo(chainsplit_1_memval1)(AT)\n        addiu A0, R0, 1\n        addiu A1, R0, 160\n        jal   0x80045D84\n        addiu A2, R0, 1\n        lui   AT, hi(chainsplit_1_memval2)\n        sw    V0, lo(chainsplit_1_memval2)(AT)\n        addiu A0, R0, 3\n        addiu A1, R0, 174\n        jal   0x80045D84\n        addiu A2, R0, 1\n        lui   AT, hi(chainsplit_1_memval3)\n        sw    V0, lo(chainsplit_1_memval3)(AT)\n        addiu A0, R0, 11\n        addiu A1, R0, 188\n        jal   0x80045D84\n        addiu A2, R0, 1\n        lui   AT, hi(chainsplit_1_memval4)\n        sw    V0, lo(chainsplit_1_memval4)(AT)\n        jal   SleepProcess\n        addiu A0, R0, 3\n        addiu V0, R0, 1\n        lui   AT, hi(CORE_800EE320)\n        sh    V0, lo(CORE_800EE320)(AT)\n        lw    RA, 0x10(SP)\n        jr    RA\n        addiu SP, SP, 0x18\n\n      chainsplit_1_hide_arrows:\n        addiu SP, SP, -0x18\n        sw    RA, 0x10(SP)\n        lui   AT, hi(CORE_800EE320)\n        sh    R0, lo(CORE_800EE320)(AT)\n        lui   A0, hi(chainsplit_1_memval1)\n        jal   0x80045E6C\n        lw    A0, lo(chainsplit_1_memval1)(A0)\n        lui   A0, hi(chainsplit_1_memval2)\n        jal   0x80045E6C\n        lw    A0, lo(chainsplit_1_memval2)(A0)\n        lui   A0, hi(chainsplit_1_memval3)\n        jal   0x80045E6C\n        lw    A0, lo(chainsplit_1_memval3)(A0)\n        lui   A0, hi(chainsplit_1_memval4)\n        jal   0x80045E6C\n        lw    A0, lo(chainsplit_1_memval4)(A0)\n        lw    RA, 0x10(SP)\n        jr    RA\n        addiu SP, SP, 0x18\n\n      chainsplit_1_memval1:\n        .word 0\n      chainsplit_1_memval2:\n        .word 0\n      chainsplit_1_memval3:\n        .word 0\n      chainsplit_1_memval4:\n        .word 0\n    .endstatic\n    "}},o.addEventToLibrary(t.ChainSplit1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1);t.StarEvent1={id:"STAR1",name:"Buy star",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,fakeEvent:!0,supportedGames:[r.Game.MP1_USA],parse:function(e,t){var n="14A3FD0F13B034F8C90659FF589A17DB",r="B48ABB1B1FDBF7B5EF9765FD61C3940E",a="5FEE3364FDCA8B0E9247BFB37A391358";return!!(i.hashEqual([e.buffer,t.offset,20],n)&&i.hashEqual([e.buffer,t.offset+24,16],r)&&i.hashEqual([e.buffer,t.offset+48,52],a))},write:function(e,t,n,r){return"\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n      jal   GetCurrentSpaceIndex\n      NOP\n      sll   V0, V0, 0x10\n      jal   __PP64_INTERNAL_STAR_SPACE\n      sra   A0, V0, 0x10\n      sll   V0, V0, 0x10\n      sra   V0, V0, 0x10\n      addiu V1, R0, 1\n      bne   V0, V1, L800F9700 ; test if player bought star?\n      addiu A0, R0, 68\n      addu  A1, R0, R0\n      jal   0x800587EC\n      addiu A2, R0, 2\n      jal   __PP64_INTERNAL_GET_NEXT_TOAD_INDEX\n      NOP\n      sll   V0, V0, 0x10\n      addiu A0, R0, -1\n      addiu A1, R0, 8\n      jal   0x8004D2A4\n      sra   A2, V0, 0x10\n    L800F9700:\n      lw    RA, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x18\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.BooEvent1={parse:function(e,t){var n="DAD5E635FE90ED982D02B3F1D5C0CE21",i="FF104A680C0ECE615B5A24AD95A908CC",a="94A87B51D2478E81AAC34F7D3C5C37F2";return r.hashEqual([e.buffer,t.offset+28,24],i)&&r.hashEqual([e.buffer,t.offset,20],n)?101===e.getUint16(t.offset+26):!(!r.hashEqual([e.buffer,t.offset+84,24],i)||!r.hashEqual([e.buffer,t.offset,40],a))},write:function(e,t,n,r){return"\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n\n      ; TODO: Face player towards Boo\n      ;jal   GetCurrentSpaceIndex\n      ;NOP\n      ;sll   V0, V0, 0x10\n      ;sra   V1, V0, 0x10\n      ;addiu    V0, R0, 10 ; bottom left boo invisible space index\n      ;beq   V1, V0, boo_space_event_passing_bottom_boo\n      ;addiu    V0, R0, 129 ; upper middle boo invisible space index\n      ;bne   V1, V0, boo_space_event_goto_boo_scene\n      ;addiu    A0, R0, 101 ; Boo overlay index\n      ;addiu    A0, R0, -1\n      ;addiu    A1, R0, 8\n      ;j     L800F97E0\n      ;addiu    A2, R0, 111 ; upper middle boo standing space index\n    ;boo_space_event_passing_bottom_boo:\n      ;addiu    A0, R0, -1\n      ;addiu    A1, R0, 8\n      ;addiu    A2, R0, 98 ; bottom left boo standing space index\n    ;L800F97E0:\n      ;jal   0x8004D2A4\n      ;NOP\n\n      addiu A0, R0, 101 ; Boo overlay index\n    boo_space_event_goto_boo_scene:\n      addu  A1, R0, R0\n      jal   0x800587EC  ; 0x800587BC wrapper, A3 = 0 default\n      addiu A2, R0, 1\n      lw    RA, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x18\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(32);t.GateClose3={id:"GATECLOSE3",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,parameters:[{name:"gateIndex",type:r.EventParameterType.Number}],fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){if(28!==i.getFunctionLength(e,t.offset))return!1;return e.getUint32(t.offset+8)===[201597626][t.boardIndex]},write:function(e,t,n,r){return"\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n      jal   __PP64_INTERNAL_GATE_CLOSE_EVENT\n       li    A0, "+t.parameterValues.gateIndex+"\n      lw    RA, 0x10(SP)\n      jr    RA\n       addiu SP, SP, 0x18\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.Gate3={id:"GATE3",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,parameters:[{name:"gateEntryIndex",type:r.EventParameterType.Number},{name:"gateSpaceIndex",type:r.EventParameterType.Number},{name:"gateExitIndex",type:r.EventParameterType.Number},{name:"gatePrevChain",type:r.EventParameterType.NumberArray},{name:"gateNextChain",type:r.EventParameterType.NumberArray}],fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){if(0===t.boardIndex){if(3274312!==t.offset)return!1;if(e.getUint16(t.offset+98)===t.curSpaceIndex)return t.board.spaces[e.getUint16(t.offset+262)].subtype=r.SpaceSubtype.GATE,!0;if(e.getUint16(t.offset+106)===t.curSpaceIndex)return t.board.spaces[e.getUint16(t.offset+270)].subtype=r.SpaceSubtype.GATE,!0}return!1},write:function(e,t,n,r){return"\n      J __PP64_INTERNAL_GATE_EVENT\n      NOP\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(11),o=n(16);t.BooEvent2={parse:function(e,t){var n=!1;if(0===t.boardIndex){if(2755864!==t.offset)return!1;n=!0}return!!n},write:function(e,t,n,s){var l=s.curBoo=s.curBoo||1;s.curBoo++;for(var c=r.getSpacesOfSubType(i.SpaceSubtype.BOO,n.board),u=n.curSpace,d=Number.MAX_VALUE,p=n.curSpaceIndex,f=0;f<c.length;f++){var h=c[f],m=n.board.spaces[h],_=a.distance(u.x,u.y,m.x,m.y);_<d&&(d=_,p=h)}if(0===n.boardIndex){var g=o.scenes.getDataView(62);return 1===l?(g.setUint16(37578,n.curSpaceIndex),g.setUint16(37614,p)):2===l&&(g.setUint16(37586,n.curSpaceIndex),g.setUint16(37622,p)),[2755864,0]}throw"Can't write Boo to board index "+n.boardIndex}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32);t.BooEvent3={parse:function(e,t){var n=!1;if(0===t.boardIndex){if(3291628!==t.offset)return!1;if(201568050!==e.getUint32(t.offset+76))return!1;n=4564===r.getFunctionLength(e,t.offset)}return!!n},write:function(e,t,n,r){return"\n      J __PP64_INTERNAL_BOO_SPACE_EVENT\n      NOP\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.StarEvent2={parse:function(e,t){return!!r.hashEqual([e.buffer,t.offset,2112],"D52AD53C2FED642C3001C3579B4299C3")},write:function(e,t,n,r){return[2744540,0]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.StarEvent3={parse:function(e,t){return!!r.hashEqual([e.buffer,t.offset,956],"E9B6C28983AAE724AC187EA8E0CBC79D")},write:function(e,t,n,r){return"\n      J __PP64_INTERNAL_STAR_SPACE_EVENT ; star_space_event\n      NOP\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(11),o=n(16);t.BankEvent2={parse:function(e,t){var n=!1;if(0===t.boardIndex){if(2746652!==t.offset)return!1;n=!0}return!!n},write:function(e,t,n,s){var l=s.curBank=s.curBank||1;s.curBank++;for(var c=r.getSpacesOfSubType(i.SpaceSubtype.BANK,n.board),u=n.curSpace,d=Number.MAX_VALUE,p=n.curSpaceIndex,f=0;f<c.length;f++){var h=c[f],m=n.board.spaces[h],_=a.distance(u.x,u.y,m.x,m.y);_<d&&(d=_,p=h)}if(0===n.boardIndex){var g=o.scenes.getDataView(62);return 1===l?(g.setUint16(28342,n.curSpaceIndex),g.setUint16(28382,p)):2===l&&(g.setUint16(28350,n.curSpaceIndex),g.setUint16(28370,p)),[2746652,0]}throw"Can't write Bank to board index "+n.boardIndex}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.BankEvent3={parse:function(e,t){return!!r.hashEqual([e.buffer,t.offset,180],"FCA0025616E8B2BE4CD60F47EE60DC30")},write:function(e,t,n,r){return"\n      J __PP64_INTERNAL_BANK_SPACE_EVENT\n      NOP\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(11),a=n(16),o=n(0);t.ItemShopEvent2={parse:function(e,t){var n=!1;if(0===t.boardIndex){if(2747904!==t.offset)return!1;n=!0}return!!n},write:function(e,t,n,s){var l=s.curItemShop=s.curItemShop||1;s.curItemShop++;for(var c=r.getSpacesOfSubType(o.SpaceSubtype.ITEMSHOP,n.board),u=n.curSpace,d=Number.MAX_VALUE,p=n.curSpaceIndex,f=0;f<c.length;f++){var h=c[f],m=n.board.spaces[h],_=i.distance(u.x,u.y,m.x,m.y);_<d&&(d=_,p=h)}if(0===n.boardIndex){var g=a.scenes.getDataView(62);return 1===l&&g.setUint16(29586,p),[2747904,0]}throw"Can't write Item Shop to board index "+n.boardIndex}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemShopEvent3={parse:function(e,t){var n=!1;if(0===t.boardIndex){if(3281356!==t.offset)return!1;if(201574479!==e.getUint32(t.offset+68))return!1;n=!0}return!!n},write:function(e,t,n,r){return"\n      J __PP64_INTERNAL_ITEM_SHOP_EVENT\n      NOP\n    "}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(2),o=n(32),s=n(227),l=n(10);t.ChainSplit2={id:"CHAINSPLIT2",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,parameters:[{name:"chains",type:r.EventParameterType.NumberArray}],fakeEvent:!0,supportedGames:[r.Game.MP2_USA],parse:function(e,n){var r="0C01A009C54E209652DA667F464FB7C0",l="FC606B8F8BD2C8D39BB9581B0E4D8398",c="2F3A0045D0AC927FF23ACD73B5B62E1C";if(i.hashEqual([e.buffer,n.offset,44],r)&&i.hashEqual([e.buffer,n.offset+76,28],l)&&i.hashEqual([e.buffer,n.offset+240,40],c)){var u=e.getUint16(n.offset+234),d=e.getUint16(n.offset+238),p=n.chains[u][0],f=n.chains[d][0];a.addConnection(n.curSpace,p,n.board),a.addConnection(n.curSpace,f,n.board);var h=s.EventCache.get(t.ChainSplit2.id);if(h||(h={}),h[n.game]||(h[n.game]={}),!h[n.game].asm){h[n.game].asm=e.buffer.slice(n.offset,n.offset+280);var m=new DataView(h[n.game].asm);m.setUint32(44,0),m.setUint32(212,0),m.setUint32(64,0),m.setUint32(72,0),m.setUint16(228,0),m.setUint16(234,0),m.setUint16(238,0)}if(!h[n.game].helper1){h[n.game].helper1=[];var _=e.getUint32(n.offset+44),g=o.getJALAddr(_),v=n.offset-(n.addr-g);h[n.game].helper1[n.boardIndex]=e.buffer.slice(v,v+208),h[n.game].helper2=[];var y=e.getUint32(n.offset+212),A=o.getJALAddr(y),x=n.offset-(n.addr-A);h[n.game].helper2[n.boardIndex]=e.buffer.slice(x,x+96)}return s.EventCache.set(t.ChainSplit2.id,h),!0}return!1},write:function(e,n,r,a){var l=s.EventCache.get(t.ChainSplit2.id);if(!(l&&l[r.game]&&l[r.game].asm&&l[r.game].helper1&&l[r.game].helper2))throw"Cannot write "+t.ChainSplit2.id+", missing cache entry values.";var c=0,u=2147483647&r.addr,d=l[r.game].asm;if(i.copyRange(e,d,c,0,d.byteLength),c+=d.byteLength,!a.helper1addr){var p=l[r.game].helper1[r.boardIndex];if(!p)throw"Cannot write "+t.ChainSplit2.id+", missing helper1["+r.boardIndex+"].";i.copyRange(e,p,c,0,p.byteLength),a.helper1addr=u+c,c+=p.byteLength}if(!a.helper2addr){var f=l[r.game].helper2[r.boardIndex];if(!f)throw"Cannot write "+t.ChainSplit2.id+", missing helper2["+r.boardIndex+"].";i.copyRange(e,f,c,0,f.byteLength),a.helper2addr=u+c,c+=f.byteLength}var h=65535&r.argsAddr,m=r.argsAddr>>>16;32768&h&&(m+=1);var _=n.parameterValues.chains;return e.setUint32(44,o.makeInst("JAL",a.helper1addr)),e.setUint32(64,o.makeInst("LUI",o.REG.A1,m)),e.setUint32(72,o.makeInst("ADDIU",o.REG.A1,o.REG.A1,h)),e.setUint32(212,o.makeInst("JAL",a.helper2addr)),e.setUint32(228,o.makeInst("J",u+240)),e.setUint16(234,_[0]),e.setUint16(238,_[1]),[r.offset,c]}},l.addEventToLibrary(t.ChainSplit2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.ChanceTime={id:"CHANCETIME",name:"Chance Time",activationType:r.EventActivationType.LANDON,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP1_USA],parse:function(e,t){return!!i.hashEqual([e.buffer,t.offset,108],"18F44B4AA1F4AAAA839C100E3B0FD863")},write:function(e,t,n,r){return"\n      ADDIU SP SP 0xFFE0\n      SW RA 0x18(SP)\n      SW S1 0x14(SP)\n      SW S0 0x10(SP)\n      ADDU S1 R0 R0\n    loop:\n      JAL GetPlayerStruct\n      ADDU A0 S1 R0\n      JAL GetCurrentPlayerIndex\n      ADDU S0 V0 R0\n      SLL V0 V0 0x10\n      SRA V0 V0 0x10\n      XOR V0 S1 V0\n      SLTU V0 R0 V0\n      SB V0 0(S0)\n      ADDIU S1 S1 1\n      SLTI V0 S1 4\n      BNE V0 R0 loop\n      ADDIU A0 R0 1\n      ADDU A1 R0 R0\n      ADDIU A2 R0 5\n      JAL 0x800587BC\n      ADDIU A3 R0 1\n      LW RA 0x18(SP)\n      LW S1 0x14(SP)\n      LW S0 0x10(SP)\n      JR RA\n      ADDIU SP SP 0x20\n    "}},a.addEventToLibrary(t.ChanceTime)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.StarChanceEvent={id:"STARCHANCE",name:"Chance Time from old star space",activationType:r.EventActivationType.LANDON,executionType:r.EventExecutionType.DIRECT,fakeEvent:!0,supportedGames:[r.Game.MP1_USA],parse:function(e,t){return!!i.hashEqual([e.buffer,t.offset,140],"7E32BF9C855085A03CF3A8D208A6AB94")},write:function(e,t,n,r){return"\n      addiu SP, SP, -0x20\n      sw    RA, 0x18(SP)\n      sw    S1, 0x14(SP)\n      jal   GetCurrentSpaceIndex\n      sw    S0, 0x10(SP)\n      sll   V0, V0, 0x10\n      jal   __PP64_INTERNAL_STAR_SPACE\n      sra   A0, V0, 0x10\n      sll   V0, V0, 0x10\n      sra   V0, V0, 0x10\n      addiu  V1, R0, 2\n      bne   V0, V1, L800F9784\n      addu  S1, R0, R0\n    L800F9740:\n      jal   GetPlayerStruct\n      addu  A0, S1, R0\n      jal   GetCurrentPlayerIndex\n      addu  S0, V0, R0\n      sll   V0, V0, 0x10\n      sra   V0, V0, 0x10\n      xor   V0, S1, V0\n      sltu  V0, R0, V0\n      sb    V0, 0(S0)\n      addiu S1, S1, 1\n      slti  V0, S1, 4 ; total players\n      bne  V0, R0, L800F9740\n      addiu    A0, R0, 1\n      addu  A1, R0, R0\n      addiu    A2, R0, 5\n      jal   0x800587BC\n      addiu    A3, R0, 1\n    L800F9784:\n      lw    RA, 0x18(SP)\n      lw    S1, 0x14(SP)\n      lw    S0, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x20\n    "}},a.addEventToLibrary(t.StarChanceEvent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(69),a=n(70),o=n(52),s=n(1),l=n(24),c=n(11),u=n(0),d=n(9),p={};p[u.Game.MP2_USA]=[{upper:345798,lower:345802}],function(e){function t(){var e=d.romhandler.getDataView(),t=n();if(!t)return null;var i=t[0],a=e.getUint16(i.upper)<<16,o=e.getUint16(i.lower),s=a|o;return 32768&o&&(s-=65536),r.$$log("AnimationFS.getROMOffset -> "+r.$$hex(s)),s}function n(){return p[d.romhandler.getROMGame()]}function u(e,t,n,r){var a=i.compress(3,new DataView(n));m[e]||(m[e]=[]),m[e][t]||(m[e][t]={}),m[e][t][r]={compressionType:3,decompressed:n,compressed:a}}function f(e,t,n){for(var r=t/64,i=n/48,s=a.toTiles(e.data,r,i,256,48).map(function(e){return o.RGBA5551fromRGBA32(e,64,48)}),l=[],c=i-1;c>=0;c--)for(var u=0;u<r;u++)l.push(s[c*r+u]);return l}function h(e,t,n,r,i){for(var s=[],c=0;c<n.length;c++)m[e][t].hasOwnProperty(c+1)?s.push(new DataView(m[e][t][c+1].decompressed)):s.push(new DataView(n[c]));var u=r/64,d=i/48;s=function(e,t,n){for(var r=[],i=n-1;i>=0;i--)for(var a=0;a<t;a++)r.push(e[i*t+a]);return r}(s,u,d);var p=a.fromTiles(s,u,d,128,48),f=o.RGBA5551toRGBA32(p,r,i),h=new Uint8Array(f),_=l.createContext(r,i),g=_.createImageData(r,i);for(c=0;c<h.byteLength;c++)g.data[c]=h[c];return _.putImageData(g,0,0),_.canvas.toDataURL()}var m;function _(){var e=t(),n=d.romhandler.getDataView();return m=function(e,t){for(var n=[],r=e.getUint32(t)-1,i=0;i<r;i++){var a=e.getUint32(t+4+4*i);n.push(g(e,t+a))}return n}(n,e)}function g(e,t){for(var n=[],r=e.getUint32(t),i=0;i<r;i++){var a=e.getUint32(t+4+4*i);n.push(v(e,t+a))}return n}function v(e,t){for(var n={},r=e.getUint32(t)-1,i=0;i<r;i++){var a=e.getUint32(t+4+4*i),o=y(e,t+a);n[o.index]={compressionType:o.compressionType,compressed:o.compressed,decompressed:o.decompressed}}return n}function y(e,t){var n=e.getUint32(t),r=e.getUint32(t+4),a=e.getUint32(t+8),o=e.buffer,s=t+12,l=new DataView(o,s),c=i.getCompressedSize(r,l,a);return{index:n,compressionType:r,compressed:o.slice(s,s+c),decompressed:i.decompress(r,l,a)}}function A(e,t,n){var r=w(e);t.setUint32(n,r);for(var i=n+4,a=n+4+4*r,o=0;o<r;o++)t.setUint32(i,a-n),i+=4,a=x(e,o,t,a),a=c.makeDivisibleBy(a,4);return a}function x(e,t,n,r){var i=P(e,t);n.setUint32(r,i+1);var a=r+4,o=r+4+4*(i+1);for(var s in m[e][t])m[e][t].hasOwnProperty(s)&&(n.setUint32(a,o-r),a+=4,o=S(e,t,s,n,o),o=c.makeDivisibleBy(o,4));return n.setUint32(a,o-r),o}function S(e,t,n,r,i){var a=m[e][t][n];return r.setUint32(i,parseInt(n)),r.setUint32(i+4,3),r.setUint32(i+8,a.decompressed.byteLength),s.copyRange(r,a.compressed,i+12,0,a.compressed.byteLength),i+12+a.compressed.byteLength}function b(){return m.length}function w(e){return m[e].length}function E(e,t){return m[e][t]={}}function P(e,t){return Object.keys(m[e][t]).length}e.getROMOffset=t,e.setROMOffset=function(e,t){var i=new DataView(t),a=n();if(a){var o=(4294901760&e)>>>16,s=65535&e;32768&s&&(o+=1);for(var l=0;l<a.length;l++)i.setUint16(a[l].upper,o),i.setUint16(a[l].lower,s);r.$$log("AnimationFS.setROMOffset -> "+r.$$hex(o<<16|s))}},e.getPatchOffsets=n,e.get=function(e,t,n){return m[e][t][n].decompressed},e.write=u,e.writeAnimationBackground=function(e,t,n,i,a,o){r.$$log("AnimationFS.writeAnimationBackground, set: "+e+", entry: "+t+", img is "+a+"x"+o);var l=f(n,a,o),c=f(i,a,o);E(e,t);for(var d=0;d<c.length;d++)s.arrayBuffersEqual(l[d],c[d])||u(e,t,c[d],d+1)},e.readAnimationBackgrounds=function(e,t,n,r){for(var i=w(e),a=f(t,n,r),o=[],s=0;s<i;s++)o.push(h(e,s,a,n,r));return o},e.clearCache=function(){m=null},e.extract=_,e.extractAsync=function(){return new Promise(function(e,t){_(),e()})},e.pack=function(e,t){void 0===t&&(t=0);var n=new DataView(e,t),r=b();n.setUint32(0,r+1);for(var i=4,a=4+4*(r+1),o=0;o<r;o++)n.setUint32(i,a),i+=4,a=A(o,n,a),a=c.makeDivisibleBy(a,4);return n.setUint32(i,a),a},e.getSetCount=b,e.getSetEntryCount=w,e.setSetEntryCount=function(e,t){return m[e].length=t},e.clearSetEntry=E,e.getSetEntryTileCount=P,e.getByteLength=function(){var e=0,t=b();e+=4,e+=4*(t+1);for(var n=0;n<t;n++){var r=w(n);e+=4,e+=4*r;for(var i=0;i<r;i++){var a=P(n,i);for(var o in e+=4,e+=4*(a+1),m[n][i])m[n][i].hasOwnProperty(o)&&(e+=4,e+=4,e+=4,e+=m[n][i][o].compressed.byteLength,e=c.makeDivisibleBy(e,4))}}return e}}(t.animationfs||(t.animationfs={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(2),o=n(10);t.ChainSplit3={id:"CHAINSPLIT3",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,parameters:[{name:"spaceIndexArgs",type:r.EventParameterType.NumberArray},{name:"chainArgs",type:r.EventParameterType.NumberArray},{name:"reverse",type:r.EventParameterType.Boolean},{name:"hasgate",type:r.EventParameterType.Boolean},{name:"prevSpace",type:r.EventParameterType.Number},{name:"altChain",type:r.EventParameterType.NumberArray}],fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){var n="16092DD153432852C141C78807ECCBF0",r="6FF6DF70CDC85862F8F129303009A544";if(i.hashEqual([e.buffer,t.offset,8],n)&&i.hashEqual([e.buffer,t.offset+36,20],r)){var o=2147483647&(e.getUint16(t.offset+10)<<16|e.getUint16(t.offset+14));32768&o&&(o-=65536);for(var s=t.offset-(t.addr-o),l=e.getUint16(s);65535!==l;)a.addConnection(t.curSpace,l,t.board),s+=2,l=e.getUint16(s);return!0}return!1},write:function(e,t,n,r){var i=t.parameterValues.spaceIndexArgs,a=t.parameterValues.chainArgs,o=t.parameterValues.altChain||[];return"\n    .if reverse\n      revSplitMain:\n        addiu SP, SP, -0x18\n        sw    RA, 0x10(SP)\n        jal   GetPlayerStruct\n        li    A0, -1\n        lbu   V0, 0x17(V0)\n        andi  V0, V0, 0x80\n        beq   V0, R0, revSplitExit\n        NOP\n        lui   V0, hi(cur_player_spaces_remaining)\n        lw    V0, lo(cur_player_spaces_remaining)(V0)\n        beq   V0, R0, revSplitExit\n        NOP\n        jal   chain_split_3_main\n        NOP\n      revSplitExit:\n        lw    RA, 0x10(SP)\n        jr    RA\n        addiu SP, SP, 0x18\n    .endif\n\n    .if hasgate\n      addiu SP, SP, -0x18\n      sw    RA, 0x14(SP)\n      sw    S0, 0x10(SP)\n      jal   GetPlayerStruct\n      li    A0, -1\n      move  S0, V0\n      lbu   A0, 0x15(S0)\n      sll   A0, A0, 0x18\n      sra   A0, A0, 0x18\n      lbu   A1, 0x16(S0)\n      sll   A1, A1, 0x18\n      sra   A1, A1, 0x18\n      andi  A0, A0, 0xffff\n      jal   GetAbsSpaceIndexFromChainSpaceIndex\n      andi  A1, A1, 0xffff\n      sll   V0, V0, 0x10\n      sra   V0, V0, 0x10\n      ; Check for the previous space being the gate chain's first space.\n      li    V1, "+(t.parameterValues.prevSpace||0)+"\n      bne   V0, V1, do_chain_split\n      NOP\n      lbu   V0, 0x17(S0)\n      andi  V0, V0, 0x80\n      bnez  V0, do_chain_split\n      ; Send player to other chain if coming from gate.\n      li    A1, "+(o[0]||0)+" ; Chain index\n      li    A0, -1\n      jal   SetNextChainAndSpace\n      li   A2, "+(o[1]||0)+" ; Index in chain\n      lbu   V0, 0x17(S0)\n      andi  V0, V0, 0xfe\n      j     exit_chain_split\n      sb    V0, 0x17(S0)\n\n    .else\n\n    chain_split_3_main:\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n\n    .endif\n\n    do_chain_split:\n      lui   A0, hi(space_index_args)\n      addiu A0, A0, lo(space_index_args)\n      lui   A1, hi(chain_args)\n      addiu A1, A1, lo(chain_args)\n      lui   A2, hi(ai_logic)\n      jal   chain_split_3_helper\n       addiu A2, A2, lo(ai_logic)\n    .if reverse\n    exit_chain_split:\n    .else\n    exit_chain_split:\n      jal   EndProcess\n       move  A0, R0\n    .endif\n    .if hasgate\n      lw    RA, 0x14(SP)\n      lw    S0, 0x10(SP)\n    .else\n      lw    RA, 0x10(SP)\n    .endif\n      jr    RA\n       addiu SP, SP, 0x18\n\n    space_index_args:\n      .halfword "+i.join(", ")+"\n\n    chain_args:\n      .halfword "+a.join(", ")+"\n\n    ; Choose randomly\n    ai_logic:\n      .word ai_random_choice, ai_random_choice, ai_random_choice\n    ai_random_choice:\n      .word 0x00000000, 0x00000000, 0x064C9932\n\n  .beginstatic\n    chain_split_3_helper:\n      addiu SP, SP, -0x38\n      sw    RA, 0x30(SP)\n      sw    S5, 0x2c(SP)\n      sw    S4, 0x28(SP)\n      sw    S3, 0x24(SP)\n      sw    S2, 0x20(SP)\n      sw    S1, 0x1c(SP)\n      sw    S0, 0x18(SP)\n      move  S2, A0\n      move  S3, A1\n      move  S5, A2\n      li    A0, -1\n      li    A1, -1\n      jal   0x800F2304\n       li    A2, 2\n      jal   SleepVProcess\n       move  S1, R0\n      jal   chainsplit_setup_arrows\n       NOP\n      lui   A0, hi(current_player_index)\n      jal   GetPlayerStruct\n       lb    A0, lo(current_player_index)(A0)\n      move  S4, V0\n      lbu   A0, 0x15(S4)\n      sll   A0, A0, 0x18\n      sra   A0, A0, 0x18\n      lbu   A1, 0x16(S4)\n      sll   A1, A1, 0x18\n      sra   A1, A1, 0x18\n      andi  A0, A0, 0xffff\n      jal   GetAbsSpaceIndexFromChainSpaceIndex\n       andi  A1, A1, 0xffff\n      sll   V0, V0, 0x10\n      sra   A1, V0, 0x10\n      li    A2, 2\n      move  V1, R0\n    L80116514:\n      sll   V0, S1, 1\n      addu  V0, V0, S1\n      sll   V0, V0, 1\n      addu  A0, V0, S2\n      sll   V0, V1, 1\n    L80116528:\n      addu  V0, V0, A0\n      lh    V0, 0(V0)\n      beq   V0, A1, L80116548\n       NOP\n      addiu V1, V1, 1\n      slti  V0, V1, 2\n      bnez  V0, L80116528\n       sll   V0, V1, 1\n    L80116548:\n      beq   V1, A2, L80116564\n       sll   V0, S1, 1\n      addiu S1, S1, 1\n      slti  V0, S1, 3\n      bnez  V0, L80116514\n       move  V1, R0\n      sll   V0, S1, 1\n    L80116564:\n      addu  V0, V0, S1\n      sll   A1, V0, 1\n      sll   V0, V0, 2\n      addu  S3, S3, V0\n      lui   S0, hi(current_player_index)\n      addiu S0, S0, lo(current_player_index)\n      lb    A0, 0(S0)\n      jal   0x800D76A0\n       addu  A1, S2, A1\n      move  S2, V0\n      move  A0, S2\n      lb    A1, 0(S0)\n      jal   0x800D742C\n       move  A2, R0\n      jal   PlayerIsCPU\n       li    A0, -1\n      beq  V0, R0, L801165EC\n       sll   V0, S1, 2\n      addu  V0, V0, S5\n      lw    A0, 0(V0)\n      jal   0x800DA190\n        move  S0, R0\n      sll   V0, V0, 0x10\n      sra   S1, V0, 0x10\n      blez  S1, L801165E4\n       move  A0, S2\n    L801165CC:\n      jal   0x800D7250\n       li    A1, -2\n      addiu S0, S0, 1\n      slt   V0, S0, S1\n      bnez  V0, L801165CC\n        move  A0, S2\n    L801165E4:\n      jal   0x800D7250\n        li    A1, -4\n    L801165EC:\n      jal   0x800D7518\n       move  A0, S2\n      move  S0, V0\n      jal   0x800D6CA0\n       move  A0, S2\n      jal   chainsplit_hide_arrows\n       NOP\n      bnezl S0, L80116610\n       addiu S3, S3, 6\n    L80116610:\n      lh    A1, 0(S3)\n      lh    A2, 2(S3)\n      jal   SetNextChainAndSpace\n       li    A0, -1\n      lh    A1, 4(S3)\n      beq  A1, R0, L80116640\n       NOP\n      li    V0, 1\n      beq   A1, V0, L8011664C\n       NOP\n      j     L80116658\n       NOP\n    L80116640:\n      lbu   V0, 0x17(S4)\n      j     L80116654\n       andi  V0, V0, 0xfe\n    L8011664C:\n      lbu   V0, 0x17(S4)\n      ori   V0, V0, 1\n    L80116654:\n      sb    V0, 0x17(S4)\n    L80116658:\n      lw    RA, 0x30(SP)\n      lw    S5, 0x2c(SP)\n      lw    S4, 0x28(SP)\n      lw    S3, 0x24(SP)\n      lw    S2, 0x20(SP)\n      lw    S1, 0x1c(SP)\n      lw    S0, 0x18(SP)\n      jr    RA\n       addiu SP, SP, 0x38\n\n    .definelabel CORE_800CDD58,0x800CDD58\n    .definelabel CORE_800D51F8,0x800D51F8\n\n    chainsplit_setup_arrows:\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n    L8010704C:\n      jal   0x800E9AE0\n       NOP\n      beq  V0, R0, L8010706C\n       NOP\n      jal   SleepVProcess\n       NOP\n      j     L8010704C\n       NOP\n    L8010706C:\n      jal   SleepVProcess\n       NOP\n      move  A0, R0\n      li    A1, 146\n      jal   0x800E210C\n       li    A2, 1\n      lui   AT, hi(chainsplit_arrow_memval1)\n      sw    V0, lo(chainsplit_arrow_memval1)(AT)\n      li    A0, 1\n      li    A1, 160\n      jal   0x800E210C\n       li    A2, 1\n      lui   AT, hi(chainsplit_arrow_memval2)\n      sw    V0, lo(chainsplit_arrow_memval2)(AT)\n      li    A0, 13\n      li    A1, 174\n      jal   0x800E210C\n       li    A2, 1\n      lui   AT, hi(chainsplit_arrow_memval3)\n      sw    V0, lo(chainsplit_arrow_memval3)(AT)\n      li    A0, 3\n      li    A1, 188\n      jal   0x800E210C\n       li    A2, 1\n      lui   AT, hi(chainsplit_arrow_memval4)\n      sw    V0, lo(chainsplit_arrow_memval4)(AT)\n      li    A0, 11\n      li    A1, 202\n      jal   0x800E210C\n       li    A2, 1\n      lui   AT, hi(chainsplit_arrow_memval5)\n      sw    V0, lo(chainsplit_arrow_memval5)(AT)\n      jal   SleepProcess\n       li    A0, 3\n      li    V0, 1\n      lui   AT, hi(CORE_800CDD58)\n      sh    V0, lo(CORE_800CDD58)(AT)\n      lui   AT, hi(CORE_800D51F8)\n      sh    V0, lo(CORE_800D51F8)(AT)\n      lw    RA, 0x10(SP)\n      jr    RA\n       addiu SP, SP, 0x18\n\n    chainsplit_hide_arrows:\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n      lui   AT, hi(CORE_800CDD58)\n      sh    R0, lo(CORE_800CDD58)(AT)\n      lui   AT, hi(CORE_800D51F8)\n      sh    R0, lo(CORE_800D51F8)(AT)\n      lui   A0, hi(chainsplit_arrow_memval1)\n      jal   0x800E21F4\n       lw    A0, lo(chainsplit_arrow_memval1)(A0)\n      lui   A0, hi(chainsplit_arrow_memval2)\n      jal   0x800E21F4\n       lw    A0, lo(chainsplit_arrow_memval2)(A0)\n      lui   A0, hi(chainsplit_arrow_memval3)\n      jal   0x800E21F4\n       lw    A0, lo(chainsplit_arrow_memval3)(A0)\n      lui   A0, hi(chainsplit_arrow_memval4)\n      jal   0x800E21F4\n       lw    A0, lo(chainsplit_arrow_memval4)(A0)\n      lui   A0, hi(chainsplit_arrow_memval5)\n      jal   0x800E21F4\n       lw    A0, lo(chainsplit_arrow_memval5)(A0)\n      lw    RA, 0x10(SP)\n      jr    RA\n       addiu SP, SP, 0x18\n\n      .align 4\n      chainsplit_arrow_memval1:\n        .word 0\n      chainsplit_arrow_memval2:\n        .word 0\n      chainsplit_arrow_memval3:\n        .word 0\n      chainsplit_arrow_memval4:\n        .word 0\n      chainsplit_arrow_memval5:\n        .word 0\n  .endstatic\n    "}},o.addEventToLibrary(t.ChainSplit3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(2),o=n(10);t.ChainMerge3={id:"CHAINMERGE3",name:"",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,parameters:[{name:"prevSpace",type:r.EventParameterType.Number},{name:"chain",type:r.EventParameterType.Number},{name:"spaceIndex",type:r.EventParameterType.Number}],fakeEvent:!0,supportedGames:[r.Game.MP3_USA],parse:function(e,t){var n,r,o="16092DD153432852C141C78807ECCBF0",s="0855E7309F121915D7A762AB85A7FDB6";if(i.hashEqual([e.buffer,t.offset,8],o)&&[201569894,201597703].indexOf(e.getUint32(t.offset+16))>=0&&i.hashEqual([e.buffer,t.offset+24,8],s)){if(n=(n=e.getUint16(t.offset+14))>1e3?0:n,r=0===e.getUint16(t.offset+20)?t.chains[n][0]:t.chains[n][e.getUint16(t.offset+22)],!isNaN(r)){if(t.board.links.hasOwnProperty(t.curSpace))return!1;a.addConnection(t.curSpace,r,t.board)}return!0}return!1},write:function(e,t,n,r){return"\n      ADDIU SP, SP, -0x18\n      SW    RA, 0x10(SP)\n      ADDIU A0, R0, "+t.parameterValues.prevSpace+"\n      ADDIU A1, R0, "+(t.parameterValues.chain||0)+"\n      JAL   func_80108C1C\n      ADDIU A2, R0, "+(t.parameterValues.spaceIndex||0)+"\n      LW    RA, 0x10(SP)\n      JR    RA\n      ADDIU SP, SP, 0x18\n\n  .beginstatic\n    func_80108C1C:\n      addiu SP, SP, -0x20\n      sw    RA, 0x1c(SP)\n      sw    S2, 0x18(SP)\n      sw    S1, 0x14(SP)\n      sw    S0, 0x10(SP)\n      move  S0, A0\n      move  S1, A1\n      move  S2, A2\n      jal   GetPlayerStruct\n        li    A0, -1\n      lbu   A0, 0x15(V0)\n      sll   A0, A0, 0x18\n      sra   A0, A0, 0x18\n      lbu   A1, 0x16(V0)\n      sll   A1, A1, 0x18\n      sra   A1, A1, 0x18\n      andi  A0, A0, 0xffff\n      jal   GetAbsSpaceIndexFromChainSpaceIndex\n        andi  A1, A1, 0xffff\n      sll   V0, V0, 0x10\n      sra   V0, V0, 0x10\n      bne   V0, S0, func_80108C1C_exit\n        sll   A1, S1, 0x10\n      sll   A2, S2, 0x10\n      li    A0, -1\n      sra   A1, A1, 0x10\n      jal   SetNextChainAndSpace\n        sra   A2, A2, 0x10\n      func_80108C1C_exit:\n      lw    RA, 0x1c(SP)\n      lw    S2, 0x18(SP)\n      lw    S1, 0x14(SP)\n      lw    S0, 0x10(SP)\n      jr    RA\n        addiu SP, SP, 0x20\n  .endstatic\n    "}},o.addEventToLibrary(t.ChainMerge3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(233),a=n(236),o=n(237),s=n(0),l=n(9),c=n(43);t.applyHook=function(e){var t=c.currentCheats.length;if(t){switch(l.romhandler.getROMGame()){case s.Game.MP1_USA:i.MP1UHook.apply(e);break;case s.Game.MP2_USA:a.MP2UHook.apply(e);break;case s.Game.MP3_USA:o.MP3UHook.apply(e);break;case s.Game.MP1_JPN:default:return void console.warn("Cannot write cheats for this game")}r.$$log("Applied "+t+" Gameshark cheats")}},t.romSupportsCheats=function(){switch(l.romhandler.getROMGame()){case s.Game.MP1_USA:case s.Game.MP2_USA:case s.Game.MP3_USA:return!0;case s.Game.MP1_JPN:default:return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[[166,189,215],[128,62,117],[255,179,0],[0,83,138],[255,104,0],[129,112,102],[193,0,32],[206,162,98],[0,125,52],[246,118,142],[255,122,92],[83,55,122],[255,142,0],[179,40,81],[244,200,0],[127,24,13],[147,170,0],[89,51,21],[241,58,19],[35,44,22]];t.getDistinctColor=function(e){return r[e%r.length]}},function(e,t,n){"use strict";var r=n(20),i=n(5),a=n(31),o=i.OrderedMap;e.exports=function(e){return e.first()instanceof r?function(e){var t={},n=void 0;return o(e.withMutations(function(e){e.forEach(function(r,i){var o=r.getKey(),s=r.getNextSiblingKey(),l=r.getPrevSiblingKey(),c=r.getChildKeys(),u=r.getParentKey(),d=a();if(t[o]=d,s&&(e.get(s)?e.setIn([s,"prevSibling"],d):e.setIn([o,"nextSibling"],null)),l&&(e.get(l)?e.setIn([l,"nextSibling"],d):e.setIn([o,"prevSibling"],null)),u&&e.get(u)){var p=e.get(u).getChildKeys();e.setIn([u,"children"],p.set(p.indexOf(r.getKey()),d))}else e.setIn([o,"parent"],null),n&&(e.setIn([n.getKey(),"nextSibling"],d),e.setIn([o,"prevSibling"],t[n.getKey()])),n=e.get(o);c.forEach(function(t){e.get(t)?e.setIn([t,"parent"],d):e.setIn([o,"children"],r.getChildKeys().filter(function(e){return e!==t}))})})}).toArray().map(function(e){return[t[e.getKey()],e.set("key",t[e.getKey()])]}))}(e):function(e){return o(e.toArray().map(function(e){var t=a();return[t,e.set("key",t)]}))}(e)}},function(e,t,n){"use strict";var r=n(17),i=n(60),a=n(6);function o(e,t,n){var o=t.getCharacterList(),s=n>0?o.get(n-1):void 0,l=n<o.count()?o.get(n):void 0,c=s?s.getEntity():void 0,u=l?l.getEntity():void 0;if(u&&u===c&&"MUTABLE"!==e.__get(u).getMutability()){for(var d,p=function(e,t,n){var r;return i(e,function(e,t){return e.getEntity()===t.getEntity()},function(e){return e.getEntity()===t},function(e,t){e<=n&&t>=n&&(r={start:e,end:t})}),"object"!=typeof r&&a(!1),r}(o,u,n),f=p.start,h=p.end;f<h;)d=o.get(f),o=o.set(f,r.applyEntity(d,null)),f++;return t.set("characterList",o)}return t}e.exports=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),i={},a=t.getStartKey(),s=t.getStartOffset(),l=n.get(a),c=o(r,l,s);c!==l&&(i[a]=c);var u=t.getEndKey(),d=t.getEndOffset(),p=n.get(u);a===u&&(p=c);var f=o(r,p,d);return f!==p&&(i[u]=f),Object.keys(i).length?e.merge({blockMap:n.merge(i),selectionAfter:t}):e.set("selectionAfter",t)}},function(e,t,n){"use strict";e.exports=function(e,t,n){if(n===e.count())t.forEach(function(t){e=e.push(t)});else if(0===n)t.reverse().forEach(function(t){e=e.unshift(t)});else{var r=e.slice(0,n),i=e.slice(n);e=r.concat(t,i).toList()}return e}},function(e,t,n){"use strict";var r=n(20);e.exports=function(e,t){if(!(e instanceof r))return null;var n=e.getNextSiblingKey();if(n)return n;var i=e.getParentKey();if(!i)return null;for(var a=t.get(i);a&&!a.getNextSiblingKey();){var o=a.getParentKey();a=o?t.get(o):null}return a?a.getNextSiblingKey():null}},function(e,t,n){"use strict";var r=n(5),i=n(90),a=n(60),o=r.List,s=r.Repeat,l=r.Record,c=i.thatReturnsTrue,u=l({start:null,end:null}),d=l({start:null,end:null,decoratorKey:null,leaves:null}),p={generate:function(e,t,n){var r=t.getLength();if(!r)return o.of(new d({start:0,end:0,decoratorKey:null,leaves:o.of(new u({start:0,end:0}))}));var i=[],l=n?n.getDecorations(t,e):o(s(null,r)),p=t.getCharacterList();return a(l,h,c,function(e,t){i.push(new d({start:e,end:t,decoratorKey:l.get(e),leaves:f(p.slice(e,t).toList(),e)}))}),o(i)},getFingerprint:function(e){return e.map(function(e){var t=e.get("decoratorKey");return(null!==t?t+"."+(e.get("end")-e.get("start")):"")+"."+e.get("leaves").size}).join("-")}};function f(e,t){var n=[],r=e.map(function(e){return e.getStyle()}).toList();return a(r,h,c,function(e,r){n.push(new u({start:e+t,end:r+t}))}),o(n)}function h(e,t){return e===t}e.exports=p},function(e,t,n){"use strict";var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}((0,n(5).Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object}));e.exports=r},function(e,t,n){"use strict";var r=n(93),i=n(6),a="----------------------",o="------------------------------",s=new RegExp("["+"A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"+a+o+"]"),l=new RegExp("["+a+o+"]");function c(e){var t=s.exec(e);return null==t?null:t[0]}function u(e){var t=c(e);return null==t?r.NEUTRAL:l.exec(t)?r.RTL:r.LTR}function d(e,t){if(t=t||r.NEUTRAL,!e.length)return t;var n=u(e);return n===r.NEUTRAL?t:n}function p(e,t){return t||(t=r.getGlobalDir()),r.isStrong(t)||i(!1),d(e,t)}var f={firstStrongChar:c,firstStrongCharDir:u,resolveBlockDir:d,getDirection:p,isDirectionLTR:function(e,t){return p(e,t)===r.LTR},isDirectionRTL:function(e,t){return p(e,t)===r.RTL}};e.exports=f},function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),i=t.getStartOffset(),a=!1;return r.some(function(e){return i===e.get("start")?(a=!0,!0):i<e.get("end")&&e.get("leaves").some(function(e){var t=e.get("start");return i===t&&(a=!0,!0)})}),a}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n(270),a=n(75),o=n(4),s=n(30),l=n(150),c=n(98),u=n(145),d=n(93),p=n(46),f=n(285),h=n(99),m=n(289),_=n(6),g=n(22),v=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||v(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=s.findDOMNode(this),r=c.getScrollParent(n),i=h(r),a=void 0;if(r===window){var o=f(n);(a=o.y+o.height-m().height)>0&&window.scrollTo(i.x,i.y+a+10)}else{n instanceof HTMLElement||_(!1),(a=n.offsetHeight+n.offsetTop-(r.offsetHeight+i.y))>0&&l.setTop(r,l.getTop(r)+a+10)}}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),s=t.getText(),l=this.props.tree.size-1,c=v(this.props.selection,n);return this.props.tree.map(function(p,f){var h=p.get("leaves"),m=h.size-1,_=h.map(function(r,u){var d=a.encode(n,f,u),p=r.get("start"),h=r.get("end");return o.createElement(i,{key:d,offsetKey:d,block:t,start:p,selection:c?e.props.selection:null,forceSelection:e.props.forceSelection,text:s.slice(p,h),styleSet:t.getInlineStyleAt(p),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:f===l&&u===m})}).toArray(),v=p.get("decoratorKey");if(null==v)return _;if(!e.props.decorator)return _;var y=g(e.props.decorator),A=y.getComponentForKey(v);if(!A)return _;var x=y.getPropsForKey(v),S=a.encode(n,f,0),b=s.slice(h.first().get("start"),h.last().get("end")),w=d.getHTMLDirIfDifferent(u.getDirection(b),e.props.direction);return o.createElement(A,r({},x,{contentState:e.props.contentState,decoratedText:b,dir:w,key:S,entityKey:t.getEntityAt(p.get("start")),offsetKey:S}),_)}).toArray()},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.offsetKey,r=p({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return o.createElement("div",{"data-offset-key":n,className:r},this._renderChildren())},t}(o.Component);e.exports=y},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";function r(e,t){return!!t&&(e===t.documentElement||e===t.body)}var i={getTop:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=i},function(e,t,n){"use strict";var r=n(292),i=n(293),a=n(90),o=new RegExp("\r\n","g"),s={"text/rtf":1,"text/html":1};function l(e){if("file"==e.kind)return e.getAsFile()}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.types=t.types?i(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some(function(e){return s[e]})},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(o,"\n"):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some(function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")})},e.prototype.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},e.prototype.isImage=function(){var e=this.types.some(function(e){return-1!=e.indexOf("application/x-moz-file")});if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var i=t[n].type;if(!r.isImage(i))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(l).filter(a.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=c},function(e,t,n){"use strict";e.exports=function e(t){if(t instanceof Element){var n=t.getAttribute("data-offset-key");if(n)return n;for(var r=0;r<t.childNodes.length;r++){var i=e(t.childNodes[r]);if(i)return i}}return null}},function(e,t,n){"use strict";(function(t){var r=n(6),i=/\.textClipping$/,a={"text/plain":!0,"text/html":!0,"text/rtf":!0},o=5e3;e.exports=function(e,n){var s=0,l=[];e.forEach(function(c){!function(e,n){if(t.FileReader&&(!e.type||e.type in a)){if(""===e.type){var o="";return i.test(e.name)&&(o=e.name.replace(i,"")),void n(o)}var s=new FileReader;s.onload=function(){var e=s.result;"string"!=typeof e&&r(!1),n(e)},s.onerror=function(){n("")},s.readAsText(e)}else n("")}(c,function(t){s++,t&&l.push(t.slice(0,o)),s==e.length&&n(l.join("\r"))})})}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(75),i=n(22);e.exports=function(e,t,n,a,o){var s=i(e.getSelection()),l=r.decode(t),c=l.blockKey,u=e.getBlockTree(c).getIn([l.decoratorKey,"leaves",l.leafKey]),d=r.decode(a),p=d.blockKey,f=e.getBlockTree(p).getIn([d.decoratorKey,"leaves",d.leafKey]),h=u.get("start"),m=f.get("start"),_=u?h+n:null,g=f?m+o:null;if(s.getAnchorKey()===c&&s.getAnchorOffset()===_&&s.getFocusKey()===p&&s.getFocusOffset()===g)return s;var v=!1;if(c===p){var y=u.get("end"),A=f.get("end");v=m===h&&A===y?o<n:m<h}else v=e.getCurrentContent().getBlockMap().keySeq().skipUntil(function(e){return e===c||e===p}).first()===p;return s.merge({anchorKey:c,anchorOffset:_,focusKey:p,focusOffset:g,isBackward:v})}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,l=1,c={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,r(l),l++},p.clearImmediate=f}function f(e){delete c[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(12),n(76))},function(e,t,n){"use strict";var r=n(73);e.exports=function(e){var t=e.getSelection();return t.isCollapsed()?null:r(e.getCurrentContent(),t)}},function(e,t,n){"use strict";var r=n(26),i=n(6);var a=r.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var a=r===e.commonAncestorContainer;a?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var o,s=Array.from(t.getClientRects());if(n.push(s),a)return n.reverse(),(o=[]).concat.apply(o,n);t.setEndBefore(r)}i(!1)}:function(e){return Array.from(e.getClientRects())};e.exports=a},function(e,t,n){"use strict";var r=n(100),i=n(152),a=n(154),o=n(6),s=n(22);function l(e,t,n){var a=t,l=r(a);if(null!=l||e&&(e===a||e.firstChild===a)||o(!1),e===a&&((a=a.firstChild)instanceof Element&&"true"===a.getAttribute("data-contents")||o(!1),n>0&&(n=a.childNodes.length)),0===n){var u=null;if(null!=l)u=l;else{var d=function(e){for(;e.firstChild&&(e.firstChild instanceof Element&&"true"===e.firstChild.getAttribute("data-blocks")||i(e.firstChild));)e=e.firstChild;return e}(a);u=s(i(d))}return{key:u,offset:0}}var p=a.childNodes[n-1],f=null,h=null;if(i(p)){var m=function(e){for(;e.lastChild&&(e.lastChild instanceof Element&&"true"===e.lastChild.getAttribute("data-blocks")||i(e.lastChild));)e=e.lastChild;return e}(p);f=s(i(m)),h=c(m)}else f=s(l),h=c(p);return{key:f,offset:h}}function c(e){var t=e.textContent;return"\n"===t?0:t.length}e.exports=function(e,t,n,i,o,c){var u=n.nodeType===Node.TEXT_NODE,d=o.nodeType===Node.TEXT_NODE;if(u&&d)return{selectionState:a(e,s(r(n)),i,s(r(o)),c),needsRecovery:!1};var p=null,f=null,h=!0;return u?(p={key:s(r(n)),offset:i},f=l(t,o,c)):d?(f={key:s(r(o)),offset:c},p=l(t,n,i)):(p=l(t,n,i),f=l(t,o,c),n===o&&i===c&&(h=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:a(e,p.key,p.offset,f.key,f.offset),needsRecovery:h}}},function(e,t,n){"use strict";var r="\\s|(?![_])"+n(310).getPunctuation(),i=new RegExp("^(?:"+r+")*(?:[']|(?!"+r+").)*(?:(?!"+r+").)"),a=new RegExp("(?:(?!"+r+").)(?:[']|(?!"+r+").)*(?:"+r+")*$");function o(e,t){var n=t?a.exec(e):i.exec(e);return n?n[0]:e}var s={getBackward:function(e){return o(e,!0)},getForward:function(e){return o(e,!1)}};e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t){var n,r=e.getSelection(),i=r.getStartKey(),a=r.getStartOffset(),o=e.getCurrentContent(),s=i;return t>o.getBlockForKey(i).getText().length-a?(s=o.getKeyAfter(i),n=0):n=a+t,r.merge({focusKey:s,focusOffset:n})}},function(e,t,n){"use strict";var r,i=a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(14);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(17),l=n(38),c=n(20),u=n(94),d=n(74),p=n(33),f=n(5),h=n(5).Set,m=n(321),_=n(46),g=n(31),v=n(162),y=n(6),A=n(92),x=p.draft_tree_data_support,S=f.List,b=f.OrderedSet,w=new RegExp("\r","g"),E=new RegExp("\n","g"),P=new RegExp("&nbsp;","g"),C=new RegExp("&#13;?","g"),T=new RegExp("&#8203;?","g"),V=["bold","bolder","500","600","700","800","900"],F=["light","lighter","100","200","300","400"],D={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},O=(o(r={},_("public/DraftStyleDefault/depth0"),0),o(r,_("public/DraftStyleDefault/depth1"),1),o(r,_("public/DraftStyleDefault/depth2"),2),o(r,_("public/DraftStyleDefault/depth3"),3),o(r,_("public/DraftStyleDefault/depth4"),4),r),R=["className","href","rel","target","title"],M=["alt","className","height","src","width"],L=void 0,B={text:"",inlines:[],entities:[],blocks:[]},k={children:S(),depth:0,key:"",type:""},I=function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null},j=function(e,t,n){var r=n.filter(function(t){return t.element===e||t.wrapper===e||t.aliasedElements&&t.aliasedElements.some(function(t){return t===e})}).keySeq().toSet().toArray().sort();switch(r.length){case 0:return"unstyled";case 1:return r[0];default:return function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}return null}(e,t,[I])||"unstyled"}},N=function(e,t,n){var r=e.text.slice(-1),i=t.text.slice(0,1);if("\r"!==r||"\r"!==i||n||(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===r){if(" "===t.text||"\n"===t.text)return e;" "!==i&&"\n"!==i||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}},U=function(e){e instanceof HTMLAnchorElement||y(!1);var t=e.protocol;return"http:"===t||"https:"===t||"mailto:"===t},z=function(e){var t=new Array(1);return e&&(t[0]=e),i({},B,{text:" ",inlines:[b()],entities:t})},G=function(){return i({},B,{text:"\n",inlines:[b()],entities:new Array(1)})},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i({},k,e)},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{text:"\r",inlines:[b()],entities:new Array(1),blocks:[W({parent:n,key:g(),type:e,depth:Math.max(0,Math.min(4,t))})]}},q=function e(t,n,r,a,o,s,l,c,u,p){var f=L,h=n.nodeName.toLowerCase(),_=t,g="unstyled",v=!1,y=o&&j(o,a,c),A=i({},B),S=void 0;if("#text"===h){var b=n.textContent,w=b.trim();if(a&&""===w&&n.parentElement){var P=n.parentElement.nodeName.toLowerCase();if("ol"===P||"ul"===P)return{chunk:i({},B),entityMap:t}}return""===w&&"pre"!==o?{chunk:z(u),entityMap:t}:("pre"!==o&&(b=b.replace(E," ")),L=h,{chunk:{text:b,inlines:Array(b.length).fill(r),entities:Array(b.length).fill(u),blocks:[]},entityMap:t})}if(L=h,"br"===h)return"br"!==f||o&&"unstyled"!==y?{chunk:G(),entityMap:t}:{chunk:H("unstyled",l,p),entityMap:t};if("img"===h&&n instanceof HTMLImageElement&&n.attributes.getNamedItem("src")&&n.attributes.getNamedItem("src").value){var C=n,T={};M.forEach(function(e){var t=C.getAttribute(e);t&&(T[e]=t)}),n.textContent="",u=d.__create("IMAGE","MUTABLE",T||{})}r=function(e,t,n){var r=D[e];if(r)n=n.add(r).toOrderedSet();else if(t instanceof HTMLElement){var i=t;n=n.withMutations(function(e){var t=i.style.fontWeight,n=i.style.fontStyle,r=i.style.textDecoration;V.indexOf(t)>=0?e.add("BOLD"):F.indexOf(t)>=0&&e.remove("BOLD"),"italic"===n?e.add("ITALIC"):"normal"===n&&e.remove("ITALIC"),"underline"===r&&e.add("UNDERLINE"),"line-through"===r&&e.add("STRIKETHROUGH"),"none"===r&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}).toOrderedSet()}return n}(h,n,r),"ul"!==h&&"ol"!==h||(a&&(l+=1),a=h),!x&&"li"===h&&n instanceof HTMLElement&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(O).some(function(n){e.classList.contains(n)&&(t=O[n])}),t}(n,l));var k=j(h,a,c),I=a&&"li"===o&&"li"===h,W=(!o||x)&&-1!==s.indexOf(h);(I||W)&&(S=(A=H(k,l,p)).blocks[0].key,o=h,v=!x),I&&(g="ul"===a?"unordered-list-item":"ordered-list-item");var q=n.firstChild;null!=q&&(h=q.nodeName.toLowerCase());for(var K=null;q;){q instanceof HTMLAnchorElement&&q.href&&U(q)?function(){var e=q,t={};R.forEach(function(n){var r=e.getAttribute(n);r&&(t[n]=r)}),t.url=new m(e.href).toString(),K=d.__create("LINK","MUTABLE",t||{})}():K=void 0;var Y=e(_,q,r,a,o,s,l,c,K||u,x?S:null),$=Y.chunk;_=Y.entityMap,A=N(A,$,x);var X=q.nextSibling;!p&&X&&s.indexOf(h)>=0&&o&&(A=N(A,G())),X&&(h=X.nodeName.toLowerCase()),q=X}return v&&(A=N(A,H(g,l,p))),{chunk:A,entityMap:_}},K=function(e,t,n,r){e=e.trim().replace(w,"").replace(P," ").replace(C,"").replace(T,"");var a=function(e){var t=e.get("unstyled").element,n=h([]);return e.forEach(function(e){e.aliasedElements&&e.aliasedElements.forEach(function(e){n=n.add(e)}),n=n.add(e.element)}),n.filter(function(e){return e&&e!==t}).toArray().sort()}(n),o=t(e);if(!o)return null;L=null;var s=function(e,t){return t.some(function(t){return-1!==e.indexOf("<"+t)})}(e,a)?a:["div"],l=q(r,o,b(),"ul",null,s,-1,n),c=l.chunk,u=l.entityMap;return 0===c.text.indexOf("\r")&&(c={text:c.text.slice(1),inlines:c.inlines.slice(1),entities:c.entities.slice(1),blocks:c.blocks}),"\r"===c.text.slice(-1)&&(c.text=c.text.slice(0,-1),c.inlines=c.inlines.slice(0,-1),c.entities=c.entities.slice(0,-1),c.blocks.pop()),0===c.blocks.length&&c.blocks.push(i({},B,{type:"unstyled",depth:0})),c.text.split("\r").length===c.blocks.length+1&&c.blocks.unshift({type:"unstyled",depth:0}),{chunk:c,entityMap:u}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,r=K(e,t,n,d);if(null==r)return null;var i=r.chunk,a=r.entityMap;return{contentBlocks:function(e){if(!e||!e.text||!Array.isArray(e.blocks))return null;var t=0,n=e.blocks,r=e.inlines,i=e.entities,a=x?c:l;return e.text.split("\r").reduce(function(e,o,l){o=A(o);var u=n[l],d=t+o.length,p=r.slice(t,d),f=i.slice(t,d),h=S(p.map(function(e,t){var n={style:e,entity:null};return f[t]&&(n.entity=f[t]),s.create(n)}));t=d+1;var m=u.depth,_=u.type,v=u.parent,y=u.key||g(),x=null;if(v){var b=e.cacheRef[v],w=e.contentBlocks[b];if(w.getChildKeys().isEmpty()&&w.getText()){var E=w.getCharacterList(),P=w.getText();x=g();var C=new c({key:x,text:P,characterList:E,parent:v,nextSibling:y});e.contentBlocks.push(C),w=w.withMutations(function(e){e.set("characterList",S()).set("text","").set("children",w.children.push(C.getKey()))})}e.contentBlocks[b]=w.set("children",w.children.push(y))}var T=new a({key:y,parent:v,type:_,depth:m,text:o,characterList:h,prevSibling:x||(0===l||n[l-1].parent!==v?null:n[l-1].key),nextSibling:l===n.length-1||n[l+1].parent!==v?null:n[l+1].key});return e.contentBlocks.push(T),e.cacheRef[T.key]=l,e},{cacheRef:{},contentBlocks:[]}).contentBlocks}(i),entityMap:a}}},function(e,t,n){"use strict";var r=n(26),i=n(6),a=r.isBrowser("IE <= 9");e.exports=function(e){var t,n=null;return!a&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||i(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}},function(e,t,n){"use strict";var r=n(15),i=n(7),a=(n(45),n(322)),o=n(22),s={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return s.toggleInlineStyle(e,"BOLD");case"italic":return s.toggleInlineStyle(e,"ITALIC");case"underline":return s.toggleInlineStyle(e,"UNDERLINE");case"code":return s.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return s.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return s.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=r.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=i.push(e,t,"insert-characters");return i.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),a=n.getBlockBefore(r);if(a&&"atomic"===a.getType()){var o=n.getBlockMap().delete(a.getKey()),l=n.merge({blockMap:o,selectionAfter:t});if(l!==n)return i.push(e,l,"remove-range")}var c=s.tryToRemoveBlockStyle(e);return c?i.push(e,c,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),a=t.getStartKey(),o=n.getBlockForKey(a).getLength();if(t.getStartOffset()<o)return null;var s=n.getBlockAfter(a);if(!s||"atomic"!==s.getType())return null;var l=t.merge({focusKey:s.getKey(),focusOffset:s.getLength()}),c=r.removeRange(n,l,"forward");return c!==n?i.push(e,c,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),o=r.getAnchorKey();if(o!==r.getFocusKey())return t;var s=t.getCurrentContent(),l=s.getBlockForKey(o),c=l.getType();if("unordered-list-item"!==c&&"ordered-list-item"!==c)return t;e.preventDefault();var u=s.getBlockBefore(o);if(!u)return t;var d=u.getType();if("unordered-list-item"!==d&&"ordered-list-item"!==d)return t;var p=l.getDepth();if(!e.shiftKey&&p===n)return t;n=Math.min(u.getDepth()+1,n);var f=a(s,r,e.shiftKey?-1:1,n);return i.push(t,f,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),a=n.getStartKey(),s=n.getEndKey(),l=e.getCurrentContent(),c=n;if(a!==s&&0===n.getEndOffset()){var u=o(l.getBlockBefore(s));s=u.getKey(),c=c.merge({anchorKey:a,anchorOffset:n.getStartOffset(),focusKey:s,focusOffset:u.getLength(),isBackward:!1})}if(l.getBlockMap().skipWhile(function(e,t){return t!==a}).reverse().skipWhile(function(e,t){return t!==s}).some(function(e){return"atomic"===e.getType()}))return e;var d=l.getBlockForKey(a).getType()===t?"unstyled":t;return i.push(e,r.setBlockType(l,c,d),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?s.toggleBlockType(e,"code-block"):s.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),a=e.getCurrentInlineStyle();if(n.isCollapsed())return i.setInlineStyleOverride(e,a.has(t)?a.remove(t):a.add(t));var o,s=e.getCurrentContent();return o=a.has(t)?r.removeInlineStyle(s,n,t):r.applyInlineStyle(s,n,t),i.push(e,o,"change-inline-style")},toggleLink:function(e,t,n){var a=r.applyEntity(e.getCurrentContent(),t,n);return i.push(e,a,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var i=t.getAnchorKey(),a=e.getCurrentContent(),o=a.getBlockForKey(i),s=a.getFirstBlock();if(o.getLength()>0&&o!==s)return null;var l=o.getType(),c=a.getBlockBefore(i);if("code-block"===l&&c&&"code-block"===c.getType()&&0!==c.getLength())return null;if("unstyled"!==l)return r.setBlockType(a,t,"unstyled")}return null}};e.exports=s},function(e,t,n){"use strict";var r=n(101),i=n(95),a=n(26),o=a.isPlatform("Mac OS X"),s=a.isPlatform("Windows"),l=o&&a.isBrowser("Firefox < 29"),c=r.hasCommandModifier,u=r.isCtrlKeyCommand;function d(e){return o&&e.altKey||u(e)}e.exports=function(e){switch(e.keyCode){case 66:return c(e)?"bold":null;case 68:return u(e)?"delete":null;case 72:return u(e)?"backspace":null;case 73:return c(e)?"italic":null;case 74:return c(e)?"code":null;case 75:return!s&&u(e)?"secondary-cut":null;case 77:case 79:return u(e)?"split-block":null;case 84:return o&&u(e)?"transpose-characters":null;case 85:return c(e)?"underline":null;case 87:return o&&u(e)?"backspace-word":null;case 89:return u(e)?s?"redo":"secondary-paste":null;case 90:return function(e){return c(e)?e.shiftKey?"redo":"undo":null}(e)||null;case i.RETURN:return"split-block";case i.DELETE:return function(e){return s&&e.shiftKey?null:d(e)?"delete-word":"delete"}(e);case i.BACKSPACE:return function(e){return c(e)&&o?"backspace-to-start-of-line":d(e)?"backspace-word":"backspace"}(e);case i.LEFT:return l&&c(e)?"move-selection-to-start-of-block":null;case i.RIGHT:return l&&c(e)?"move-selection-to-end-of-block":null;default:return null}}},function(e,t,n){"use strict";var r={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=r},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}r.prototype=n(342),r.prototype.loadAsync=n(374),r.support=n(34),r.defaults=n(177),r.version="3.2.0",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=n(66),e.exports=r},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(345)},function(e,t,n){"use strict";(function(t,r){var i=n(78);e.exports=y;var a,o=n(167);y.ReadableState=v;n(104).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=n(170),c=n(79).Buffer,u=t.Uint8Array||function(){};var d=n(65);d.inherits=n(49);var p=n(346),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var h,m=n(347),_=n(171);d.inherits(y,l);var g=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(a=a||n(40));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=n(173).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function y(e){if(a=a||n(40),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function A(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,w(e)}(e,o)):(i||(a=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?x(e,o,t,!1):P(e,o)):x(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),P(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=_.destroy,y.prototype._undestroy=_.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),A(this,e,t,!1,n)},y.prototype.unshift=function(e){return A(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return h||(h=n(173).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};var S=8388608;function b(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function w(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){f("emit readable"),e.emit("readable"),F(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function T(e){f("readable nexttick read 0"),e.read(0)}function V(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):w(this),null;if(0===(e=b(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=b(n,t))),null===(r=e>0?D(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,t);var l=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:y;function c(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",_),e.removeListener("unpipe",c),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",m),p=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){f("onend"),e.end()}a.endEmitted?i.nextTick(l):n.once("end",l),e.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,F(e))}}(n);e.on("drain",d);var p=!1;var h=!1;function m(t){f("ondata"),h=!1,!1!==e.write(t)||h||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==M(a.pipes,e))&&!p&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function _(t){f("onerror",t),y(),e.removeListener("error",_),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),y()}function v(){f("onfinish"),e.removeListener("close",g),y()}function y(){f("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",_),e.once("close",g),e.once("finish",v),e.emit("pipe",n),a.flowing||(f("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=M(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):i.nextTick(T,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(V,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<g.length;a++)e.on(g[a],this.emit.bind(this,g[a]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=D}).call(this,n(12),n(76))},function(e,t,n){e.exports=n(104).EventEmitter},function(e,t,n){"use strict";var r=n(78);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(155),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(12))},function(e,t,n){"use strict";var r=n(79).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=o;var r=n(40),i=n(65);function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){l(e,t,n)}):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(49),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";var r=n(8),i=n(34),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,i,o,s,l,c,u=[],d=0,p=e.length,f=p,h="string"!==r.getTypeOf(e);d<e.length;)f=p-d,h?(t=e[d++],n=d<p?e[d++]:0,i=d<p?e[d++]:0):(t=e.charCodeAt(d++),n=d<p?e.charCodeAt(d++):0,i=d<p?e.charCodeAt(d++):0),o=t>>2,s=(3&t)<<4|n>>4,l=f>1?(15&n)<<2|i>>6:64,c=f>2?63&i:64,u.push(a.charAt(o)+a.charAt(s)+a.charAt(l)+a.charAt(c));return u.join("")},t.decode=function(e){var t,n,r,o,s,l,c=0,u=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&p--,e.charAt(e.length-2)===a.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(o=a.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(l=a.indexOf(e.charAt(c++))),d[u++]=t,64!==s&&(d[u++]=n),64!==l&&(d[u++]=r);return d}},function(e,t,n){"use strict";(function(t){var r=n(8),i=n(358),a=n(21),o=n(175),s=n(34),l=n(66),c=null;if(s.nodestream)try{c=n(359)}catch(e){}function u(e,n){return new l.Promise(function(i,a){var s=[],l=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",function(e,t){s.push(e),n&&n(t)}).on("error",function(e){s=[],a(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(c,function(e,n){var r,i=0,a=null,o=0;for(r=0;r<n.length;r++)o+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(o),r=0;r<n.length;r++)a.set(n[r],i),i+=n[r].length;return a;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,s),u);i(e)}catch(e){a(e)}s=[]}).resume()})}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=d}).call(this,n(64).Buffer)},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";var r=n(8),i=n(21);function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=a},function(e,t,n){"use strict";var r=n(8),i=n(21);function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},e.exports=a},function(e,t,n){"use strict";var r=n(21),i=n(108);function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(8).inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=a},function(e,t,n){"use strict";var r=n(21);t.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n(362)},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var r=n(35),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,i,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=0,a=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,a,s=t||e.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if((a=o[i])>4)c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+o[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,n){"use strict";var r=n(8),i=n(34),a=n(189),o=n(376),s=n(377),l=n(191);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},function(e,t,n){"use strict";var r=n(190);function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}n(8).inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(8);function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},function(e,t,n){"use strict";var r=n(189);function i(e){r.call(this,e)}n(8).inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(0),s=n(4),l=n(23),c=n(44),u=n(13),d=n(2),p=n(10),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onEditEvent=function(e){u.changeCurrentEvent(e),u.changeView(o.View.CREATEEVENT)},n.onEditBoardEvent=function(e){u.changeCurrentEvent(e,n.props.board),u.changeView(o.View.CREATEEVENT)},n.onDeleteEvent=function(e){window.confirm("Are you sure you want to delete "+e.name+"?")&&(p.removeEventFromLibrary(e.id),n.forceUpdate())},n.onDeleteBoardEvent=function(e){window.confirm("Are you sure you want to delete "+e.name+"?")&&(d.removeEventFromBoard(n.props.board,e.id),n.forceUpdate())},n.onCopyToBoard=function(e,t){var r=!0;t&&(r=window.confirm("Are you sure you want to overwrite the board's copy of "+e.id+"? The two copies are different.")),r&&(d.addEventToBoard(n.props.board,e.id,e.asm),n.forceUpdate())},n.onCopyToLibrary=function(e,t){var r=!0;t&&(r=window.confirm("Are you sure you want to overwrite the library's copy of "+e.id+"? The two copies are different.")),r&&(p.addEventToLibrary(e),n.forceUpdate())},n.state={hasError:!1},n}return i(t,e),t.prototype.render=function(){var e=this;if(this.state.hasError)return s.createElement("p",null,"An error was encountered.");var t=null,n=this.props.board,r=l.getCustomEvents();t=r.length?r.map(function(t){var r=function(e,t){return!!(t.events&&e.id in t.events)&&t.events[e.id]!==e.asm}(t,n),i=_(t,n);return s.createElement(g,{key:t.id,event:t,onEditEvent:e.onEditEvent,onDeleteEvent:e.onDeleteEvent,isDestructiveCopy:r,onCopyToBoard:i?void 0:e.onCopyToBoard})}):s.createElement("tr",null,s.createElement("td",null,"No custom events present  load or create your own!"));var i=[];for(var a in n.events){var o=c.createCustomEvent(n.events[a]),u=m(o),d=_(o,n);i.push(s.createElement(g,{key:a,event:o,onEditEvent:this.onEditBoardEvent,onDeleteEvent:this.onDeleteBoardEvent,isDestructiveCopy:u,onCopyToLibrary:d?void 0:this.onCopyToLibrary}))}return s.createElement("div",{className:"eventsViewContainer"},s.createElement("h3",null,"Events for ",this.props.board.name),i.length?s.createElement(h,{listing:i}):s.createElement("p",null,"No events are associated with this board."),s.createElement("h3",null,s.createElement("img",{src:"img/events/library.png",className:"eventsViewHeaderIcon"})," ","Event Library"),s.createElement(h,{listing:t}))},t.prototype.componentDidMount=function(){a=this},t.prototype.componentWillUnmount=function(){a=null},t.prototype.componentDidCatch=function(e){this.setState({hasError:!0}),console.error(e)},t}(s.Component);function h(e){return s.createElement("table",{className:"eventsViewTable"},Array.isArray(e.listing)?s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{className:"eventsViewTableIconColumn"}),s.createElement("th",{className:"eventsViewTableIconColumn"}),s.createElement("th",{className:"eventsViewTableIconColumn"}),s.createElement("th",null))):null,s.createElement("tbody",null,e.listing))}function m(e){var t=p.getEventFromLibrary(e.id);return!!t&&t.asm!==e.asm}function _(e,t){if(!(t.events&&e.id in t.events))return!1;var n=p.getEventFromLibrary(e.id);return!!n&&t.events[e.id]===n.asm}t.EventsView=f;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExportEvent=function(){var e=t.props.event,n=new Blob([e.asm]);saveAs(n,e.id+".s")},t}return i(t,e),t.prototype.render=function(){var e,t=this;return e=this.props.onCopyToLibrary?s.createElement("td",null,s.createElement("img",{src:"img/events/copytolibrary"+(this.props.isDestructiveCopy?"_destructive":"")+".png",alt:"Copy this event into the local library",title:"Copy this event into the local library",onClick:function(){return t.props.onCopyToLibrary(t.props.event,t.props.isDestructiveCopy)}})):this.props.onCopyToBoard?s.createElement("td",null,s.createElement("img",{src:"img/events/copytoboard"+(this.props.isDestructiveCopy?"_destructive":"")+".png",alt:"Copy this event into the board file",title:"Copy this event into the board file",onClick:function(){return t.props.onCopyToBoard(t.props.event,t.props.isDestructiveCopy)}})):s.createElement("td",null,s.createElement("img",{src:"img/events/nocopyoption.png",className:"eventRowIconNoAction",alt:"The event is the same in both the board and library",title:"The event is the same in both the board and library"})),s.createElement("tr",{className:"eventTableRow"},s.createElement("td",null,s.createElement("img",{src:"img/events/delete.png",alt:"Delete event",title:"Delete event",onClick:function(){t.props.onDeleteEvent(t.props.event)}})),s.createElement("td",null,s.createElement("img",{src:"img/events/export.png",alt:"Download event code",title:"Download event code",onClick:this.onExportEvent})),e,s.createElement("td",{className:"eventNameTableCell",onClick:function(){return t.props.onEditEvent(t.props.event)}},s.createElement("span",{className:"eventNameText"},this.props.event.name),s.createElement("img",{src:"img/events/edit.png",className:"eventEditCellIcon",alt:"Edit event",title:"Edit event"})))},t}(s.Component);t.refreshEventsView=function(){a&&a.forceUpdate()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(81).defineMode("mips-pp64",function(){var e=/\.(ascii|asciiz|align|beginstatic|byte|definelabel|else|elseif|endif|endstatic|fill|float|halfword|if|skip|word)\b/i,t=/\$?(a([0-3]|t)|f(p)|g(p)|k([0-1])|r(0|a)|s([0-8]|p)|t(\d)|v([0-1])|zero)\b/i,n=/\b(abs\.s|abs\.d|add|add\.s|add\.d|addi|addiu|addu|and|andi|bc1f|bc1fl|bc1t|bc1tl|beq|beql|beqz|bgez|bgezal|bgezall|bgezl|bgtz|bgtzl|blez|blezl|bltz|bltzal|bltzall|bltzl|bne|bnel|bnez|bnezl|break|c\.f\.s|c\.un\.s|c\.eq\.s|c\.ueq\.s|c\.olt\.s|c\.ult\.s|c\.ole\.s|c\.ule\.s|c\.sf\.s|c\.ngle\.s|c\.seq\.s|c\.ngl\.s|c\.lt\.s|c\.nge\.s|c\.le\.s|c\.ngt\.s|c\.f\.d|c\.un\.d|c\.eq\.d|c\.ueq\.d|c\.olt\.d|c\.ult\.d|c\.ole\.d|c\.ule\.d|c\.sf\.d|c\.ngle\.d|c\.seq\.d|c\.ngl\.d|c\.lt\.d|c\.nge\.d|c\.le\.d|c\.ngt\.d|ceil\.l\.s|ceil\.l\.d|ceil\.w\.s|ceil\.w\.d|cfc1|ctc1|cop0|cop1|cop2|cop3|cvt\.d\.s|cvt\.d\.w|cvt\.d\.l|cvt\.l\.d|cvt\.l\.d|cvt\.s\.d|cvt\.s\.w|cvt\.s\.l|cvt\.w\.s|cvt\.w\.d|dadd|daddi|daddiu|daddu|ddiv|ddivu|div|div\.s|div\.d|divu|dmfc1|dmult|dmultu|dmtc1|dsll|dsll32|dsllv|dsra|dsra32|dsrav|dsrl|dsrl32|dsrlv|dsub|dsubu|floor\.l\.s|floor\.l\.d|floor\.w\.s|floor\.w\.d|j|jal|jalr|jr|lb|lbu|ld|ldc1|ldc2|ldl|ldr|lh|lhu|li|ll|lld|lui|lw|lwc1|lwc2|lwc3|lwl|lwr|lwu|madd\.s|madd\.d|mfc1|mfhi|mflo|mov\.s|mov\.d|move|movt|msub\.s|msub\.d|mtc1|mthi|mtlo|mul\.s|mul\.d|mult|multu|neg\.s|neg\.d|nop|nor|or|ori|round\.l\.s|round\.l\.d|round\.w\.s|round\.w\.d|sb|sc|scd|sd|sdc1|sdc2|sdl|sdr|sh|sll|sllv|slt|slti|sltiu|sltu|sqrt\.s|sqrt\.d|sra|srav|srl|srlv|sub|sub\.s|sub\.d|subu|sw|swc1|swc2|swc3|swl|swr|sync|syscall|teq|teqi|tge|tgei|tgeiu|tgeu|tlt|tlti|tltiu|tltu|tne|tnei|trunc\.l\.s|trunc\.l\.d|trunc\.w\.s|trunc\.w\.d|xor|xori)\b/i,r=/\b(0x[\da-f]+|o[0-7]+|b[0-1]+|\d+)\b/i;return{startState:function(){return{context:0}},token:function(i,a){if(i.eatSpace())return null;var o;if(i.eat(";")||i.match("//"))return i.skipToEnd(),"comment";if(i.eat('"')){for(;(o=i.next())&&'"'!=o;);return"string"}if(i.eat(".")){if(i.eatWhile(/\w/))return o=i.current(),e.test(o)?"def":null}else if(i.eatWhile(/[\$\w\.]/)){if(o=i.current(),n.test(o)){var s="keyword";return"nop"===o.toLowerCase()&&(s+=" nop"),s}if(t.test(o))return"atom";if(r.test(o))return"number"}return i.next(),null}}})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(4);!function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Blue=2]="Blue"}(a=t.NotificationColor||(t.NotificationColor={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCloseClick=function(){t.props.onClose&&t.props.onClose()},t}return i(t,e),t.prototype.render=function(){var e="notification "+this.getColorClass(this.props.color);return o.createElement("div",{className:e},o.createElement("div",{className:"notificationContent"},this.props.children),o.createElement("div",{className:"notificationClose",role:"button",tabIndex:0,onClick:this.onCloseClick}))},t.prototype.getColorClass=function(e){switch(e){case a.Red:return"notificationRed";case a.Green:return"notificationGreen";case a.Blue:return"notificationBlue"}},t}(o.Component);t.Notification=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e={};return o.Children.count(this.props.children)||(e.display="none"),o.createElement("div",{className:"notificationBar",style:e},this.props.children)},t}(o.Component);t.NotificationBar=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("button",{className:"notificationButton",onClick:this.props.onClick},this.props.children)},t}(o.Component);t.NotificationButton=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=68;function i(e,t,n){for(var r=0,i=0;;){if(null!==t.altPattern)i=t.altPattern[t.altOffset],t.altOffset++,t.altOffset===t.altLength&&(t.altPattern=null,t.altOffset=0,t.altLength=0);else{i=e.getUint8(t.position),t.position++;var a=e.getUint8(t.position);if(n&&254===i){if(254!==a){var o=a;t.position++;var s=o<<8|e.getUint8(t.position);t.position++;var l=e.getUint8(t.position);t.position++,t.altPattern=new Array(l);for(var c=t.position-4-s,u=c+l,d=c;d<u;d++)t.altPattern[d-c]=e.getUint8(d);t.altOffset=0,t.altLength=l,i=t.altPattern[t.altOffset],t.altOffset++}else t.position++;t.altOffset===t.altLength&&null!==t.altPattern&&(t.altPattern=null,t.altOffset=0,t.altLength=0)}}if(i>>7!=1){r+=i;break}r+=i,r<<=8}t.original=r;for(var p=0,f=0,h=0;p+=(r>>f&127)<<h,24!=f;f+=8,h+=7);return p}function a(e,t,n){var r;if(null!==t.altPattern)r=t.altPattern[t.altOffset],t.altOffset++;else if(r=e.getUint8(t.position),t.position++,n&&254===r){var i=e.getUint8(t.position);if(254!==i){var a=i;t.position++;var o=a<<8|e.getUint8(t.position);t.position++;var s=e.getUint8(t.position);t.position++,t.altPattern=new Array(s);for(var l=t.position-4-o,c=l+s,u=l;u<c;u++)t.altPattern[u-l]=e.getUint8(u);t.altOffset=0,t.altLength=s,r=t.altPattern[t.altOffset],t.altOffset++}else t.position++}return t.altOffset===t.altLength&&null!==t.altPattern&&(t.altPattern=null,t.altOffset=0,t.altLength=0),r}function o(e,t,n,r,i){var a;return 1===r?(a=255&n,e.setUint8(t,a),t+=1):2===r?(a=n>>8&255,e.setUint8(t,a),t+=1,a=255&n,e.setUint8(t,a),t+=1):3===r?(a=n>>16&255,e.setUint8(t,a),t+=1,a=n>>8&255,e.setUint8(t,a),t+=1,a=255&n,e.setUint8(t,a),t+=1):(a=n>>24&255,e.setUint8(t,a),t+=1,a=n>>8&255,e.setUint8(t,a),t+=1,a=255&n,e.setUint8(t,a),t+=1),t}function s(e){var t=e>>21&127,n=e>>14&127,r=e>>7&127,i=e>>0&127;if(t>0){var a=2155905024;return a|=t<<24,a|=n<<16,a|=r<<8,a|=i,length=4,[a,length]}if(n>0){a=8421376;return a|=n<<16,a|=r<<8,a|=i,length=3,[a,length]}if(r>0){a=32768;return a|=r<<8,a|=i,length=2,[a,length]}return length=1,[e,length]}t.parseGameMidi=function(e,t){var n=new ArrayBuffer(1e5),c=new DataView(n);!function(e,t,n){e.setUint32(0,1297377380),e.setUint32(4,6),e.setUint16(8,1),e.setUint16(10,t),e.setUint16(12,n)}(c,function(e){for(var t=0,n=0;n<r-4;n+=4){var i=e.getUint32(n);0!==i&&t++}return t}(e),e.getUint32(64));for(var u=14,d=0,p=0,f=0;f<r-4;f+=4){var h=0;if(0!==(I=e.getUint32(f)))for(var m=0,_=new Map,g={altPattern:null,altOffset:0,altLength:0,position:I,original:-1},v=!1;g.position<t&&!v;){g.position,g.original=-1,(h+=z=i(e,g,!0))>p&&(p=h);var y=(U=a(e,g,!0))<128;if(255===U||y&&255===m){var A=void 0;if(81==(A=y?U:a(e,g,!0)))var x=(a(e,g,!0)<<8|a(e,g,!0))<<8|a(e,g,!0);else if(45==A){var S=a(e,g,!0),b=(a(e,g,!0),((a(e,g,!1)<<8|a(e,g,!1))<<8|a(e,g,!1))<<8|a(e,g,!1));if(255==S||0==S)break;var w=_.get(g.position);_.has(g.position)?0===(G=w)?_.delete(g.position):_.set(g.position,G-1):_.set(g.position,S-1),null===g.altPattern?g.position=g.position-b:_.delete(g.position)}else if(46==A){var E=a(e,g,!0);a(e,g,!0)}else 47==A&&(v=!0);y||(m=U)}else if(U>=144&&U<160||y&&m>=144&&m<160){var P=void 0;P=y?U:a(e,g,!0);var C=a(e,g,!0),T=i(e,g,!0);y||(m=U)}else if(U>=176&&U<192||y&&m>=176&&m<192){var V=void 0;V=y?U:a(e,g,!0);var F=a(e,g,!0);y||(m=U)}else if(U>=192&&U<208||y&&m>=192&&m<208){var D=void 0;D=y?U:a(e,g,!0),y||(m=U)}else if(U>=208&&U<224||y&&m>=208&&m<224){var O=void 0;O=y?U:a(e,g,!0),y||(m=U)}else if(U>=224&&U<240||y&&m>=224&&m<240){var R=void 0;R=y?U:a(e,g,!0);var M=a(e,g,!0);y||(m=U)}}}for(f=0;f<r-4;f+=4){h=0;for(var L=0,B=new Array(196608),k=0;k<196608;k++)B[k]=new l;var I;if(0!=(I=e.getUint32(f))){c.setUint32(u,1297379947),u+=4,m=0,_=new Map;var j=[];for(g={altPattern:null,altOffset:0,altLength:0,position:I,original:-1},v=!1;g.position<t&&!v;){if(L>=196608){for(var N=0;N<L;N++)null!=B[N].contents&&(B[N].contents=null);return console.error("Overflow? trackEventCountSub >= 0x30000"),n}g.position,g.original=-1;var U,z=i(e,g,!0);if(B[L].deltaTime+=z,h+=z,B[L].absoluteTime=h,y=(U=a(e,g,!0))<128,255==U||y&&255==m){if(A=void 0,81==(A=y?U:a(e,g,!0)))x=(a(e,g,!0)<<8|a(e,g,!0))<<8|a(e,g,!0),B[L].type=255,B[L].contentSize=5,B[L].contents=new Array(5),B[L].contents[0]=81,B[L].contents[1]=3,B[L].contents[2]=x>>16&255,B[L].contents[3]=x>>8&255,B[L].contents[4]=x>>0&255,L++;else if(45==A){var G;if(E=0,j.length>0&&(E=j.pop()),B[L].type=176|f/4&15,B[L].contentSize=2,B[L].contents=new Array(2),B[L].contents[0]=103,B[L].contents[1]=E,L++,S=a(e,g,!0),a(e,g,!0),b=((a(e,g,!1)<<8|a(e,g,!1))<<8|a(e,g,!1))<<8|a(e,g,!1),255==S||0==S);else w=_.get(g.position),_.has(g.position)?0==(G=w)?_.delete(g.position):_.set(g.position,G-1):_.set(g.position,S-1),null===g.altPattern?g.position=g.position-b:_.delete(g.position)}else 46==A?(E=a(e,g,!0),a(e,g,!0),B[L].type=176|f/4&15,B[L].contentSize=2,B[L].contents=new Array(2),B[L].contents[0]=102,B[L].contents[1]=E,L++,j.push(E)):47==A&&(B[L].type=255,B[L].contentSize=2,B[L].contents=new Array(2),B[L].contents[0]=47,B[L].contents[1]=0,L++,v=!0);y||(m=U)}else U>=144&&U<160||y&&m>=144&&m<160?(P=void 0,y?(B[L].type=m,P=U):(B[L].type=U,P=a(e,g,!0)),C=a(e,g,!0),T=i(e,g,!0),B[L].durationTime=T,B[L].contentSize=2,B[L].contents=new Array(2),B[L].contents[0]=P,B[L].contents[1]=C,L++,y||(m=U)):U>=176&&U<192||y&&m>=176&&m<192?(V=void 0,y?(V=U,B[L].type=m):(V=a(e,g,!0),B[L].type=U),F=a(e,g,!0),B[L].contentSize=2,B[L].contents=new Array(2),B[L].contents[0]=V,B[L].contents[1]=F,L++,y||(m=U)):U>=192&&U<208||y&&m>=192&&m<208?(D=void 0,y?(D=U,B[L].type=m):(D=a(e,g,!0),B[L].type=U),B[L].contentSize=1,B[L].contents=[D],D>=d&&(d=D+1),L++,y||(m=U)):U>=208&&U<224||y&&m>=208&&m<224?(O=void 0,y?(O=U,B[L].type=m):(O=a(e,g,!0),B[L].type=U),B[L].contentSize=1,B[L].contents=[O],L++,y||(m=U)):U>=224&&U<240||y&&m>=224&&m<240?(R=void 0,y?(R=U,B[L].type=m):(R=a(e,g,!0),B[L].type=U),M=a(e,g,!0),B[L].contentSize=2,B[L].contents=[R,M],L++,y||(m=U)):254==U||console.error(U+" ERROR MISSING PARSE OF TYPE")}for(N=0;N<L;N++){if(L>=196608){for(var W=0;W<L;W++)null!==B[W].contents&&(B[W].contents=null);return console.error("Overflow 2? trackEventCountSub >= 0x30000"),n}if((J=B[N]).type>=144&&J.type<160&&J.durationTime>0){var H=J.absoluteTime+J.durationTime;if(N!=L-1)for(var q=N+1;q<L;q++){if(B[q].absoluteTime>=H&&q!=L-1){for(k=L-1;k>=q;k--){B[k+1].absoluteTime=B[k].absoluteTime,B[k+1].contentSize=B[k].contentSize,null!==B[k+1].contents&&(B[k+1].contents=null),B[k+1].contents=new Array(B[k].contentSize);for(var K=0;K<B[k].contentSize;K++)B[k+1].contents[K]=B[k].contents[K];B[k+1].deltaTime=B[k].deltaTime,B[k+1].durationTime=B[k].durationTime,B[k+1].obsoleteEvent=B[k].obsoleteEvent,B[k+1].type=B[k].type}B[q].type=B[N].type,B[q].absoluteTime=H,B[q].deltaTime=B[q].absoluteTime-B[q-1].absoluteTime,B[q].contentSize=B[N].contentSize,B[q].durationTime=0,B[q].contents=new Array(B[q].contentSize),B[q].contents[0]=B[N].contents[0],B[q].contents[1]=0,B[q+1].deltaTime=B[q+1].absoluteTime-B[q].absoluteTime,B[q].deltaTime,L++;break}if(q==L-1){for(B[q+1].absoluteTime=H,B[q+1].contentSize=B[q].contentSize,null!==B[q+1].contents&&(B[q+1].contents=null),B[q+1].contents=new Array(B[q].contentSize),K=0;K<B[q].contentSize;K++)B[q+1].contents[K]=B[q].contents[K];B[q+1].deltaTime=B[q].deltaTime,B[q+1].durationTime=B[q].durationTime,B[q+1].obsoleteEvent=B[q].obsoleteEvent,B[q+1].type=B[q].type,B[q].type=B[N].type,B[q].absoluteTime=H,B[q].deltaTime=B[q].absoluteTime-B[q-1].absoluteTime,B[q].contentSize=B[N].contentSize,B[q].durationTime=0,B[q].contents=new Array(B[q].contentSize),B[q].contents[0]=B[N].contents[0],B[q].contents[1]=0,B[q+1].deltaTime=B[q+1].absoluteTime-B[q].absoluteTime,L++;break}}else{for(B[N+1].absoluteTime=H,B[N+1].contentSize=B[N].contentSize,null!==B[N+1].contents&&(B[N+1].contents=null),B[N+1].contents=new Array(B[N].contentSize),K=0;K<B[N].contentSize;K++)B[N+1].contents[K]=B[N].contents[K];B[N+1].deltaTime=B[N].deltaTime,B[N+1].durationTime=B[N].durationTime,B[N+1].obsoleteEvent=B[N].obsoleteEvent,B[N+1].type=B[N].type,B[N].type=B[N].type,B[N].absoluteTime=H,B[N].absoluteTime,B[N-1].absoluteTime,B[N].deltaTime=B[N].absoluteTime-B[N-1].absoluteTime,B[N].contentSize=B[N].contentSize,B[N].durationTime=0,B[N].contents=new Array(B[N].contentSize),B[N].contents[0]=B[N].contents[0],B[N].contents[1]=0,B[N+1].deltaTime=B[N+1].absoluteTime-B[N].absoluteTime,B[N].deltaTime,L++}}}var Y=0,$=0,X=0;for(k=0;k<L;k++)if((J=B[k]).obsoleteEvent)Y+=J.deltaTime;else{var Z=s(J.deltaTime+Y);Z[0],Y=0,$+=Z[1],J.type===X&&255!==J.type||($+=1),$+=J.contentSize,X=J.type}for(c.setUint32(u,$),u+=4,Y=0,X=0,N=0;N<L;N++){var J;if((J=B[N]).obsoleteEvent)Y+=J.deltaTime;else{var Q=s(J.deltaTime+Y);Y=0,u=o(c,u,Q[0],Q[1],!0),J.type==X&&255!=J.type||(c.setUint8(u,J.type),u++);for(var ee=0;ee<J.contentSize;ee++)c.setUint8(u,J.contents[ee]),u++;X=J.type}}}for(N=0;N<L;N++)null!==B[N].contents&&(B[N].contents=null)}return n.slice(0,u)};var l=function(){return function(){this.obsoleteEvent=!1,this.deltaTime=0,this.durationTime=0,this.absoluteTime=0,this.type=0,this.contents=null,this.contentSize=0}}()},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var i=!1;function a(e){i=e}t.getAudioContext=function(){return r||(r=new AudioContext),r},t.getIsPlaying=function(){return i},t.setIsPlaying=a;var o=function(){function e(e){var t=this;this._player=e,this._onFinishedCallbacks=[],this._player.on("endOfFile",function(){t._onFinishedCallbacks.forEach(function(e){return e()})})}return e.prototype.stop=function(){this._player&&(this._player.stop(),a(!1),this._onFinishedCallbacks.forEach(function(e){return e()}))},e.prototype.addOnFinished=function(e){this._onFinishedCallbacks.push(e)},e}();t.AudioPlayerController=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(4),l=n(239),c=n(29),u=n(246),d=n(19),p=n(337),f=n(338),h=n(192),m=n(110),_=n(383),g=n(43),v=n(384),y=n(194),A=n(386),x=n(394),S=n(395),b=n(396),w=n(397),E=n(30);n(398),n(42),n(399),n(404),n(405);var P=n(13);n(408);var C=n(409),T=n(411),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentView:a.View.EDITOR,boards:o.getBoards(),currentBoard:o.getCurrentBoard(),currentEvent:null,currentEventIsBoardEvent:!1,romLoaded:!1,currentAction:a.Action.MOVE,selectedSpaces:null,showingAIToolbox:!1,blocked:!1,message:"",messageHTML:"",updateExists:!1,updateHideNotification:!1,notifications:[],error:null,errorInfo:null},t._onUpdateCheckHasUpdate=function(){t.setState({updateExists:!0})},t._onUpdateNotificationClosed=function(){t.setState({updateHideNotification:!0})},t._onUpdateNotificationInstallClicked=function(){(t.setState({updateHideNotification:!0,blocked:!0}),isElectron)&&window.require("electron").ipcRenderer.send("update-check-doupdate")},t}return i(t,e),t.prototype.render=function(){var e,t,n,r=this;if(this.state.error)return s.createElement(O,{error:this.state.error,errorInfo:this.state.errorInfo,onClearError:function(){r.setState({error:null,errorInfo:null})}});switch(l.updateWindowTitle(this.state.currentBoard.name),this.state.currentView){case a.View.EDITOR:e=s.createElement(c.Editor,{board:this.state.currentBoard,selectedSpaces:this.state.selectedSpaces});break;case a.View.DETAILS:e=s.createElement(u.Details,{board:this.state.currentBoard});break;case a.View.SETTINGS:e=s.createElement(d.Settings,null);break;case a.View.ABOUT:e=s.createElement(p.About,null);break;case a.View.MODELS:e=s.createElement(f.ModelViewer,null);break;case a.View.EVENTS:e=s.createElement(h.EventsView,{board:this.state.currentBoard});break;case a.View.CREATEEVENT:e=s.createElement(m.CreateEventView,null);break;case a.View.STRINGS:e=s.createElement(_.StringsViewer,null);break;case a.View.PATCHES:e=s.createElement(g.GamesharkView,null);break;case a.View.DEBUG:e=s.createElement(C.DebugView,null);break;case a.View.AUDIO:e=s.createElement(T.AudioViewer,null)}switch(this.state.currentView){case a.View.EDITOR:case a.View.DETAILS:case a.View.EVENTS:t=s.createElement("div",{className:"sidebar"},s.createElement(v.BoardMenu,{boards:this.state.boards}))}if(this.state.blocked){var i=void 0;if(this.state.message||this.state.messageHTML){var o=void 0;o=this.state.message?s.createElement("span",{className:"loadingMsgTxt selectable"},this.state.message):s.createElement("span",{className:"loadingMsgTxt selectable",dangerouslySetInnerHTML:{__html:this.state.messageHTML}}),i=s.createElement("div",{className:"loadingMsg"},o,s.createElement("br",null),s.createElement("br",null),s.createElement("button",{onClick:function(){P.showMessage()}},"OK"))}else i=s.createElement("img",{className:"loadingGif swing",src:"img/pencil.png",alt:"Loading"});n=s.createElement("div",{className:"loading"},s.createElement("img",{className:"loadingLogo",src:"img/logoloading.png",alt:"Loading"}),s.createElement("br",null),i)}var E="body";return this.state.currentAction===a.Action.ERASE&&(E+=" eraser"),s.createElement("div",{className:E},s.createElement(y.NotificationBar,null,this.getNotifications()),s.createElement(A.Header,{view:this.state.currentView,romLoaded:this.state.romLoaded,board:this.state.currentBoard}),s.createElement("div",{className:"content"},t,s.createElement("div",{className:"main"},e,s.createElement("div",{className:"mainOverlay"},s.createElement(x.ToolWindow,{name:"Toolbox",position:"TopRight",visible:this.state.currentView===a.View.EDITOR},s.createElement(S.Toolbar,{currentAction:this.state.currentAction,gameVersion:this.state.currentBoard.game,boardType:this.state.currentBoard.type})),s.createElement(x.ToolWindow,{name:"Space Properties",position:"BottomRight",visible:this.state.currentView===a.View.EDITOR},s.createElement(b.SpaceProperties,{selectedSpaces:this.state.selectedSpaces,gameVersion:this.state.currentBoard.game,boardType:this.state.currentBoard.type})),s.createElement(x.ToolWindow,{name:"Board Properties",position:"BottomLeft",visible:this.state.currentView===a.View.EDITOR},s.createElement(w.BoardProperties,{currentBoard:this.state.currentBoard})),this.state.showingAIToolbox&&s.createElement(x.ToolWindow,{name:"AI Decision Tree",position:"TopLeft",visible:this.state.currentView===a.View.EDITOR,canClose:!0,onCloseClick:function(){return r.setState({showingAIToolbox:!1})}},"Contents here")),s.createElement("div",{id:"dragZone"}))),n)},t.prototype.componentDidCatch=function(e,t){D(this,e,t)},t.prototype.componentDidMount=function(){if(isElectron)try{var e=window.require("electron").ipcRenderer;e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate),e.send("update-check-start")}catch(e){console.error("Auto update failed in componentDidMount: ",e)}},t.prototype.componentWillUnmount=function(){if(isElectron)try{window.require("electron").ipcRenderer.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}catch(e){console.error("Auto update failed in componentWillUnmount: ",e)}},t.prototype.getNotifications=function(){var e=this.state.notifications.slice();return this.state.updateExists&&!this.state.updateHideNotification&&e.push(s.createElement(y.Notification,{key:"update",color:y.NotificationColor.Blue,onClose:this._onUpdateNotificationClosed},"An update is available.",s.createElement(y.NotificationButton,{onClick:this._onUpdateNotificationInstallClicked},"Install"))),e},t}(s.Component);t.PP64App=V,window.onerror=function(e,t,n,r,i){var a=window._PP64instance;i&&(a?D(a,i,null):alert(i))};var F=document.getElementById("body");function D(e,t,n){e.setState({error:t,errorInfo:n}),console.error(t,n)}function O(e){var t=e.errorInfo&&e.errorInfo.componentStack;return s.createElement("div",{className:"errorDiv selectable"},s.createElement("h2",null,"Hey, it seeems like something's wrong in",s.createElement("span",{className:"errorStrikeoutText"},"Mushroom Village")," PartyPlanner64."),s.createElement("p",null,"Please ",s.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank"},"file an issue")," with the following details, and refresh the page. Or ",s.createElement("a",{href:"#",onClick:e.onClearError},"click here")," to dismiss this error, but you may be in a bad state."),s.createElement("pre",null,e.error.toString()),e.error.stack?s.createElement(s.Fragment,null,s.createElement("div",null,"Stack Error Details:"),s.createElement("pre",null,e.error.stack)):null,s.createElement("div",null,"Component Stack Error Details:"),s.createElement("pre",null,t||"N/A"))}window._PP64instance=E.render(s.createElement(V,null),F)},function(e,t,n){e.exports=function(e){"use strict";var t=function(e,t){return e+t&4294967295},n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,n,r,i,a,o){return n=t(t(n,e),t(i,o)),t(n<<a|n>>>32-a,r)}function i(e,t,n,i,a,o,s){return r(t&n|~t&i,e,t,a,o,s)}function a(e,t,n,i,a,o,s){return r(t&i|n&~i,e,t,a,o,s)}function o(e,t,n,i,a,o,s){return r(t^n^i,e,t,a,o,s)}function s(e,t,n,i,a,o,s){return r(n^(t|~i),e,t,a,o,s)}function l(e,n){var r=e[0],l=e[1],c=e[2],u=e[3];r=i(r,l,c,u,n[0],7,-680876936),u=i(u,r,l,c,n[1],12,-389564586),c=i(c,u,r,l,n[2],17,606105819),l=i(l,c,u,r,n[3],22,-1044525330),r=i(r,l,c,u,n[4],7,-176418897),u=i(u,r,l,c,n[5],12,1200080426),c=i(c,u,r,l,n[6],17,-1473231341),l=i(l,c,u,r,n[7],22,-45705983),r=i(r,l,c,u,n[8],7,1770035416),u=i(u,r,l,c,n[9],12,-1958414417),c=i(c,u,r,l,n[10],17,-42063),l=i(l,c,u,r,n[11],22,-1990404162),r=i(r,l,c,u,n[12],7,1804603682),u=i(u,r,l,c,n[13],12,-40341101),c=i(c,u,r,l,n[14],17,-1502002290),l=i(l,c,u,r,n[15],22,1236535329),r=a(r,l,c,u,n[1],5,-165796510),u=a(u,r,l,c,n[6],9,-1069501632),c=a(c,u,r,l,n[11],14,643717713),l=a(l,c,u,r,n[0],20,-373897302),r=a(r,l,c,u,n[5],5,-701558691),u=a(u,r,l,c,n[10],9,38016083),c=a(c,u,r,l,n[15],14,-660478335),l=a(l,c,u,r,n[4],20,-405537848),r=a(r,l,c,u,n[9],5,568446438),u=a(u,r,l,c,n[14],9,-1019803690),c=a(c,u,r,l,n[3],14,-187363961),l=a(l,c,u,r,n[8],20,1163531501),r=a(r,l,c,u,n[13],5,-1444681467),u=a(u,r,l,c,n[2],9,-51403784),c=a(c,u,r,l,n[7],14,1735328473),l=a(l,c,u,r,n[12],20,-1926607734),r=o(r,l,c,u,n[5],4,-378558),u=o(u,r,l,c,n[8],11,-2022574463),c=o(c,u,r,l,n[11],16,1839030562),l=o(l,c,u,r,n[14],23,-35309556),r=o(r,l,c,u,n[1],4,-1530992060),u=o(u,r,l,c,n[4],11,1272893353),c=o(c,u,r,l,n[7],16,-155497632),l=o(l,c,u,r,n[10],23,-1094730640),r=o(r,l,c,u,n[13],4,681279174),u=o(u,r,l,c,n[0],11,-358537222),c=o(c,u,r,l,n[3],16,-722521979),l=o(l,c,u,r,n[6],23,76029189),r=o(r,l,c,u,n[9],4,-640364487),u=o(u,r,l,c,n[12],11,-421815835),c=o(c,u,r,l,n[15],16,530742520),l=o(l,c,u,r,n[2],23,-995338651),r=s(r,l,c,u,n[0],6,-198630844),u=s(u,r,l,c,n[7],10,1126891415),c=s(c,u,r,l,n[14],15,-1416354905),l=s(l,c,u,r,n[5],21,-57434055),r=s(r,l,c,u,n[12],6,1700485571),u=s(u,r,l,c,n[3],10,-1894986606),c=s(c,u,r,l,n[10],15,-1051523),l=s(l,c,u,r,n[1],21,-2054922799),r=s(r,l,c,u,n[8],6,1873313359),u=s(u,r,l,c,n[15],10,-30611744),c=s(c,u,r,l,n[6],15,-1560198380),l=s(l,c,u,r,n[13],21,1309151649),r=s(r,l,c,u,n[4],6,-145523070),u=s(u,r,l,c,n[11],10,-1120210379),c=s(c,u,r,l,n[2],15,718787259),l=s(l,c,u,r,n[9],21,-343485551),e[0]=t(r,e[0]),e[1]=t(l,e[1]),e[2]=t(c,e[2]),e[3]=t(u,e[3])}function c(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function u(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function d(e){var t,n,r,i,a,o,s=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(u,c(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(l(u,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=a,r[15]=o,l(u,r),u}function p(e){var t,r="";for(t=0;t<4;t+=1)r+=n[e>>8*t+4&15]+n[e>>8*t&15];return r}function f(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")}function h(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function m(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==f(d("hello"))&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return this.appendBinary(h(e)),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)l(this._hash,c(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),n=e?this._hash:f(this._hash),this.reset(),n},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},m.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(e,t){var n,r,i,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(l(this._hash,e),a=0;a<16;a+=1)e[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,l(this._hash,e)},m.hash=function(e,t){return m.hashBinary(h(e),t)},m.hashBinary=function(e,t){var n=d(e);return t?n:f(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n,r,i,a,o=(n=this._buff.buffer,r=e,i=!0,(a=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),a.set(new Uint8Array(r),n.byteLength),i?a:a.buffer),s=o.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)l(this._hash,u(o.subarray(t-64,t)));return this._buff=t-64<s?o.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r[t]<<(t%4<<3);return this._finish(a,i),n=e?this._hash:f(this._hash),this.reset(),n},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var e,t=m.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},m.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),a=new Uint8Array(i);for(n=0;n<r;n++)a[n]=e.charCodeAt(n);return t?a:i}(e.buff,!0),m.prototype.setState.call(this,e)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(e,t){t=t||{};var n=function(e){var t,n,r,i,a,o,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)l(c,u(e.subarray(t-64,t)));for(e=t-64<s?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(l(c,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=a,r[15]=o,l(c,r),c}(new Uint8Array(e,t.start||0,t.length));return t.raw?n:f(n)},m}()},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(82),o=n(2),s=n(0),l=n(23),c=n(28),u=n(25),d=n(1),p=n(70),f=n(57),h=n(18),m=n(24),_=n(71),g=n(55),v=n(36),y=n(72),A=n(16),x=n(228),S=n(132),b=n(133);t.MP1=new(function(e){function t(){var t=e.call(this)||this;return t.gameVersion=1,t.nintendoLogoFSEntry=[9,110],t.hudsonLogoFSEntry=[9,111],t.boardDefDirectory=10,t.MAINFS_READ_ADDR=83376,t.HEAP_FREE_ADDR=83760,t.TABLE_HYDRATE_ADDR=313600,t.SCENE_TABLE_ROM=796788,t.writeFullOverlay=!0,t}return i(t,e),t.prototype.hydrateSpace=function(e,t){e.type===s.Space.STAR?e.star=!0:e.type===s.Space.CHANCE&&o.addEventToSpace(t,e,l.createSpaceEvent(S.ChanceTime))},t.prototype.onLoad=function(e,t,n){n||(this._extractKoopa(e,t),this._extractBowser(e,t),this._extractGoomba(e,t))},t.prototype.onCreateBoardOverlay=function(e,t){return x.createBoardOverlay(e,t)},t.prototype.onAfterOverwrite=function(e,t,n){e.setUint16(245602,32832),e.setUint16(245610,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(245622,32),e.setUint16(390134,32);e.setUint32(307156,c.parse("J 832464"));y.assemble('\n      .orga 835536\n      LW S5, 0x0(A0)\n      LUI S6, 0x4856 // "HV"\n      ADDIU S6, S6, 0x5120 // "Q "\n      BEQ S5, S6, call_hvq_decode\n      NOP\n      ADDU S5, R0, A1\n      ADDIU S6, S5, 0x1800 // (64 x 48 tile)\n      ADDU S7, R0, A0\n      LW GP, 0(S7)\n      SW GP, 0(S5)\n      ADDIU S5, S5, 4\n      ADDIU S7, S7, 4\n      BEQ S5, S6, ret_to_hook\n      NOP\n      J 832496 // J back to LW\n      NOP\n    call_hvq_decode:\n      ADDU S5, R0, R0\n      ADDU S6, R0, R0\n      ADDU S7, R0, R0\n      ADDU GP, R0, R0\n      JAL 0x7F54C // JAL HVQDecode\n      NOP\n    ret_to_hook:\n      ADDU S5, R0, R0\n      ADDU S6, R0, R0\n      ADDU S7, R0, R0\n      ADDU GP, R0, R0\n      J 0x4A3DC // J back into original function, skipping HVQDecode\n      NOP\n    ',{buffer:e.buffer})},t.prototype.onOverwritePromises=function(e,t,n){var r=t.bgDir,i=[this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen(),this._writeBackground(r,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(t.pauseBgDir,e.bg.src,320,240)];switch(n){case 0:i=i.concat([this._writeBackground(r+1,e.otherbg.largescene,320,240),this._writeBackground(r+2,e.otherbg.conversation,320,240),this._writeBackground(r+3,e.otherbg.conversation,320,240),this._writeBackground(r+5,e.bg.src,320,240),this._writeBackground(r+6,e.otherbg.splashscreen,320,240)]);break;case 1:i=i.concat([this._writeBackground(r+1,e.otherbg.largescene,320,240),this._writeBackground(r+2,e.otherbg.conversation,320,240),this._writeBackground(r+3,e.otherbg.conversation,320,240),this._writeBackground(r+4,e.otherbg.conversation,320,240),this._writeBackground(r+5,e.otherbg.conversation,320,240),this._writeBackground(r+6,e.otherbg.largescene,320,240),this._writeBackground(r+8,e.bg.src,320,240),this._writeBackground(r+9,e.bg.src,320,240),this._writeBackground(r+10,e.otherbg.splashscreen,320,240)]);break;case 2:i=i.concat([this._writeBackground(r+1,e.otherbg.largescene,320,240),this._writeBackground(r+2,e.otherbg.conversation,320,240),this._writeBackground(r+3,e.otherbg.conversation,320,240),this._writeBackground(r+4,e.otherbg.conversation,320,240),this._writeBackground(r+5,e.otherbg.conversation,320,240),this._writeBackground(r+6,e.bg.src,320,240),this._writeBackground(r+8,e.otherbg.splashscreen,320,240)]);break;case 3:i=i.concat([this._writeBackground(r+1,e.otherbg.largescene,320,240),this._writeBackground(r+2,e.otherbg.conversation,320,240),this._writeBackground(r+3,e.otherbg.conversation,320,240),this._writeBackground(r+4,e.otherbg.conversation,320,240),this._writeBackground(r+5,e.otherbg.conversation,320,240),this._writeBackground(r+6,e.bg.src,320,240),this._writeBackground(r+7,e.otherbg.conversation,320,240),this._writeBackground(r+8,e.otherbg.conversation,320,240),this._writeBackground(r+10,e.otherbg.conversation,320,240),this._writeBackground(r+11,e.otherbg.splashscreen,320,240)])}return Promise.all(i)},t.prototype.onWriteEvents=function(e){for(var t=e.spaces,n=0;n<t.length;n++){var r=e.spaces[n];if(r&&r.star)(r.events||[]).some(function(e){return"STARCHANCE"===e.id})||o.addEventToSpace(e,r,l.createSpaceEvent(b.StarChanceEvent))}},t.prototype.onWriteEventAsmHook=function(e,t,n){},t.prototype.onParseStrings=function(e,t){var n=t.str||{};if(n.boardSelect){var r=n.boardSelect;Array.isArray(r)&&(r=r[0]);var i=u.strings.read(r),a=i.split("\n"),o=a[0].indexOf(">")+1,s=a[0].indexOf("<",o);e.name=a[0].substring(o,s),e.description=[a[1],a[2]].join("\n");for(var l=0,c=i.indexOf(this.getCharacterMap()[42],0);-1!==c;)l++,c=i.indexOf(this.getCharacterMap()[42],c+1);e.difficulty=l}},t.prototype.onWriteStrings=function(e,t){var n=t.str||{};if(n.boardSelect){(o=[]).push(11),o.push(5),(o=o.concat(u.strings._strToBytes(e.name||""))).push(2),o.push(10),(o=o.concat(u.strings._strToBytes(e.description||""))).push(10),(o=o.concat([16,16,16,16,16,16])).push(6),o=o.concat(u.strings._strToBytes("Map Difficulty  "));if(e.difficulty>5||e.difficulty<1)o.push(42),(o=o.concat(u.strings._strToBytes(" "))).push(62),o=o.concat(u.strings._strToBytes(" "+e.difficulty.toString()));else for(var r=0;r<e.difficulty;r++)o.push(42);o.push(2),o.push(0);var i=d.arrayToArrayBuffer(o),a=n.boardSelect;if(Array.isArray(a))for(r=0;r<a.length;r++)u.strings.write(a[r],i);else u.strings.write(a,i)}if(n.koopaIntro){(o=(o=[]).concat(u.strings._strToBytes("Welcome, everybody!\nI am your guide,\nKoopa Troopa."))).push(255),o.push(11),(o=o.concat(u.strings._strToBytes("Now then,\nlet's decide turn order."))).push(255),o.push(0);i=d.arrayToArrayBuffer(o);u.strings.write(n.koopaIntro,i)}if(n.starComments){var o;(o=(o=[]).concat(u.strings._strToBytes("Good luck!\nWith enough stars, you\ncould be the superstar!"))).push(255),o.push(0);for(i=d.arrayToArrayBuffer(o),r=0;r<n.starComments.length;r++)u.strings.write(n.starComments[r],i)}},t.prototype.onChangeBoardSpaceTypesFromGameSpaceTypes=function(e,t){},t.prototype.onChangeGameSpaceTypesFromBoardSpaceTypes=function(e){},t.prototype._extractKoopa=function(e,t){if(t.koopaSpaceInst&&t.sceneIndex){var n=A.scenes.getDataView(t.sceneIndex).getUint16(t.koopaSpaceInst+2);e.spaces[n]&&(e.spaces[n].subtype=s.SpaceSubtype.KOOPA)}},t.prototype._writeKoopa=function(e,t){if(t.koopaSpaceInst&&t.sceneIndex){for(var n,r=0;r<e.spaces.length;r++)if(e.spaces[r].subtype===s.SpaceSubtype.KOOPA){n=r;break}n=void 0===n?e._deadSpace:n,A.scenes.getDataView(t.sceneIndex).setUint16(t.koopaSpaceInst+2,n)}},t.prototype._extractBowser=function(e,t){if(t.bowserSpaceInst&&t.sceneIndex){var n=A.scenes.getDataView(t.sceneIndex).getUint16(t.bowserSpaceInst+2);e.spaces[n]&&(e.spaces[n].subtype=s.SpaceSubtype.BOWSER)}},t.prototype._writeBowser=function(e,t){if(t.bowserSpaceInst&&t.sceneIndex){for(var n,r=0;r<e.spaces.length;r++)if(e.spaces[r].subtype===s.SpaceSubtype.BOWSER){n=r;break}n=void 0===n?e._deadSpace:n,A.scenes.getDataView(t.sceneIndex).setUint16(t.bowserSpaceInst+2,n)}},t.prototype._extractGoomba=function(e,t){if(t.goombaSpaceInst&&t.sceneIndex){var n=A.scenes.getDataView(t.sceneIndex).getUint16(t.goombaSpaceInst+2);e.spaces[n]&&(e.spaces[n].subtype=s.SpaceSubtype.GOOMBA)}},t.prototype.onParseBoardSelectImg=function(e,t){if(t.img.boardSelectImg){var n=h.mainfs.get(9,t.img.boardSelectImg),r=f.FORM.unpack(n),i=[new DataView(r.BMP1[0].parsed.src),new DataView(r.BMP1[1].parsed.src),new DataView(r.BMP1[2].parsed.src),new DataView(r.BMP1[3].parsed.src)],a=p.fromTiles(i,2,2,256,32);e.otherbg.boardselect=d.arrayBufferToDataURL(a,128,64)}},t.prototype.onWriteBoardSelectImg=function(e,t){return new Promise(function(n,r){var i=t.img.boardSelectImg;if(i){var a=[128,64],o=a[0],s=a[1],l=m.createContext(o,s),c=new Image,u=setTimeout(function(){return r("Failed to write boardselect for "+t.name)},45e3);c.onload=function(){l.drawImage(c,0,0,o,s);for(var e=l.getImageData(0,0,o,s),t=p.toTiles(e.data,2,2,o/2*4,s/2).map(function(e){return _.BMPfromRGBA(e,32,8)}),r=h.mainfs.get(9,i),a=f.FORM.unpack(r),d=0;d<4;d++){for(var m=t[d][1];m.colors.length<17;)m.colors.push(0);f.FORM.replaceBMP(a,d,t[d][0],m)}var g=f.FORM.pack(a);h.mainfs.write(9,i,g),clearTimeout(u),n()},c.src=e.otherbg.boardselect}else n()})},t.prototype.onParseBoardLogoImg=function(e,t){t.img.pauseLogoImg&&(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.pauseLogoImg,0))},t.prototype.onWriteBoardLogoImg=function(e,t){return new Promise(function(n,r){var i=t.img.introLogoImg,a=t.img.pauseLogoImg;if(i||a){var o=t.img.introLogoImgDimens,s=o[0],l=o[1],c=new Image,u=setTimeout(function(){return r("Failed to write logos for "+t.name)},45e3);c.onload=function(){if(i){var e=g.toArrayBuffer(c,s,l);Array.isArray(i)||(i=[i]);for(var t=0;t<i.length;t++){var r=i[t],o=h.mainfs.get(10,r),d=[{src:e,width:s,height:l,bpp:32}],p=v.toPack(d,16,0,o);h.mainfs.write(10,r,p)}}if(a){e=g.toArrayBuffer(c,200,82),o=h.mainfs.get(10,a),d=[{src:e,width:200,height:82,bpp:32}],p=v.toPack(d,16,0,o);h.mainfs.write(10,a,p)}clearTimeout(u),n()},c.src=e.otherbg.boardlogo}else n()})},t.prototype._clearOtherBoardNames=function(e){var t=h.mainfs.get(10,406+e);new Uint8Array(t).fill(0,44),h.mainfs.write(10,406+e,t)},t.prototype.getAudioMap=function(){return["","Mario Party Theme","Peaceful Mushroom Village","Traveling the Warp Pipe","Mushroom Bank","Option House Theme","Mushroom Shop Theme","Mini-Game House Theme","DK's Jungle Adventure Theme","Peach's Birthday Cake Theme","Yoshi's Tropical Island Theme","Wario's Battle Canyon Theme","Luigi's Engine Room Theme","Mario's Rainbow Castle Theme","Magma Mountain Theme","Eternal Star Theme","Outcome of Adventure","Adventure Begins","Bowser Meeting","Last 5 Turns","","Play A Mini-Game","Results","","Move to the Mambo","Wide, Wide Ocean","Mushroom Forest","Ducking and Dodging","Full of Danger","Coins of the World","Taking Coins","The Room Underground","Slowly, Slowly","Dodging Danger","Let's Limbo!","Let's Go Lightly","Chance Time","Can It Be Done","Faster Than All","Saving Courage","","","Playing the Game","Where Have The Stars Gone?","","","","The Stolen Star","Bowser's Chance Game","Mini-Game Stadium","","","","","","","","","","","","","","","After the Victory","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island","Mini-Game Island (Bowser)","Mini-Game Island","Mini-Game Island (Aquatic)","","","","","","","",""]},t.prototype.getCharacterMap=function(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:"\n",11:"",12:"",13:"\t",14:"\t",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"",34:"",35:"",36:"",37:"",38:"",39:"",40:"",41:"",42:"",43:"",44:"",58:"",59:"",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"",130:",",131:"",133:".",192:"",193:"",194:"!",195:"?",255:""}},t}(a.AdapterBase))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),i=n(41),a=n(25),o=n(1),s=n(16),l=n(36),c=n(18),u=r.createBoardInfo("MP1_USA_DK",{name:"DK's Jungle Adventure",canOverwrite:!0,boardDefFile:69,bgDir:0,pauseBgDir:4,sceneIndex:54,mainfsEventFile:[10,422],mainfsBoardFile:[10,423],koopaSpaceInst:3412,bowserSpaceInst:3256,boosLoopFnOffset:4568,boosReadbackFnOffset:4304,starSpaceArrOffset:13088,starSpaceCount:7,toadSpaceArrOffset:[13104,13128],audioIndexOffset:3006,str:{boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]},img:{boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],introLogoImgDimens:[272,112],titleScreenImg:385},onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(u.bgDir+1).src,e.otherbg.conversation=i.hvqfs.readBackground(u.bgDir+2).src,e.otherbg.splashscreen=i.hvqfs.readBackground(u.bgDir+6).src},onAfterOverwrite:function(){var e=s.scenes.getDataView(98);e.setUint32(28824,3313106944),e.setUint32(28828,0),e.setUint32(28832,0);var t=[];(t=t.concat(a.strings._strToBytes("You're looking for Stars?\nHow about this instead..."))).push(255),t.push(0);var n=o.arrayToArrayBuffer(t);a.strings.write(396,n),a.strings.write(399,n),a.strings.write(402,n)}}),d=r.createBoardInfo("MP1_USA_PEACH",{name:"Peach's Birthday Cake",canOverwrite:!0,boardDefFile:70,bgDir:7,pauseBgDir:14,str:{boardSelect:653,koopaIntro:572},img:{boardSelectImg:20,pauseLogoImg:277,introLogoImg:[359],introLogoImgDimens:[284,126],titleScreenImg:382},sceneIndex:55,mainfsEventFile:[10,424],mainfsBoardFile:[10,425],eventASMStart:0,koopaSpaceInst:1984,bowserSpaceInst:2440,goombaSpaceInst:2304,onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(d.bgDir+1).src,e.otherbg.conversation=i.hvqfs.readBackground(d.bgDir+2).src,e.otherbg.splashscreen=i.hvqfs.readBackground(d.bgDir+10).src},onAfterOverwrite:function(e){var t=c.mainfs.get(10,360),n=[{src:new ArrayBuffer(5e4),width:250,height:50,bpp:32}],r=l.toPack(n,16,0,t);c.mainfs.write(10,360,r)}}),p=r.createBoardInfo("MP1_USA_YOSHI",{name:"Yoshi's Tropical Island",canOverwrite:!0,boardDefFile:71,bgDir:18,pauseBgDir:25,str:{boardSelect:654,koopaIntro:573},img:{boardSelectImg:18,pauseLogoImg:278,introLogoImg:[362],introLogoImgDimens:[270,120],titleScreenImg:383},sceneIndex:56,mainfsEventFile:[10,426],mainfsBoardFile:[10,427],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(p.bgDir+1).src,e.otherbg.conversation=i.hvqfs.readBackground(p.bgDir+2).src,e.otherbg.splashscreen=i.hvqfs.readBackground(p.bgDir+8).src},onAfterOverwrite:function(e){var t=c.mainfs.get(10,363),n=[{src:new ArrayBuffer(33280),width:208,height:40,bpp:32}],r=l.toPack(n,16,0,t);c.mainfs.write(10,363,r)}}),f=r.createBoardInfo("MP1_USA_WARIO",{name:"Wario's Battle Canyon",canOverwrite:!0,boardDefFile:72,bgDir:27,pauseBgDir:36,str:{boardSelect:655,koopaIntro:574},img:{boardSelectImg:19,pauseLogoImg:279,introLogoImg:[365],introLogoImgDimens:[290,114],titleScreenImg:384},sceneIndex:57,mainfsEventFile:[10,428],mainfsBoardFile:[10,429],koopaSpaceInst:3792,bowserSpaceInst:3496,boosLoopFnOffset:4508,boosReadbackFnOffset:4244,starSpaceArrOffset:12864,starSpaceCount:7,toadSpaceArrOffset:[12880,12912],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(f.bgDir+1).src,e.otherbg.conversation=i.hvqfs.readBackground(f.bgDir+2).src,e.otherbg.splashscreen=i.hvqfs.readBackground(f.bgDir+11).src},onAfterOverwrite:function(e){var t=c.mainfs.get(10,366),n=[{src:new ArrayBuffer(85120),width:280,height:76,bpp:32}],r=l.toPack(n,16,0,t);c.mainfs.write(10,366,r)}}),h=r.createBoardInfo("MP1_USA_LUIGI");h.name="Luigi's Engine Room",h.boardDefFile=73,h.bgDir=39,h.str={boardSelect:656,koopaIntro:575},h.img={boardSelectImg:21,pauseLogoImg:280,introLogoImg:[368],introLogoImgDimens:[276,128],titleScreenImg:381},h.sceneIndex=58,h.eventASMStart=0,h.starSpaceArrOffset=12128,h.starSpaceCount=7,h.toadSpaceArrOffset=[12144,12276];var m=r.createBoardInfo("MP1_USA_MARIO");m.name="Mario's Rainbow Castle",m.boardDefFile=74,m.bgDir=47,m.str={boardSelect:657,koopaIntro:576},m.img={boardSelectImg:22,pauseLogoImg:281,introLogoImg:[371],introLogoImgDimens:[270,96],titleScreenImg:380},m.sceneIndex=59,m.eventASMStart=0;var _=r.createBoardInfo("MP1_USA_BOWSER");_.name="Bowser's Magma Mountain",_.boardDefFile=75,_.bgDir=56,_.str={boardSelect:658,koopaIntro:577},_.img={boardSelectImg:23,pauseLogoImg:282,introLogoImg:[374],introLogoImgDimens:[270,106]},_.sceneIndex=60,_.eventASMStart=0,_.starSpaceArrOffset=8856,_.starSpaceCount=7,_.toadSpaceArrOffset=[8872,8904];var g=r.createBoardInfo("MP1_USA_ETERNALSTAR");g.name="Eternal Star",g.boardDefFile=76,g.bgDir=68,g.str={boardSelect:[659,660],koopaIntro:578},g.img={boardSelectImg:24,pauseLogoImg:283,introLogoImg:[378]},g.sceneIndex=61,g.eventASMStart=0,g.bowserSpaceInst=3548,g.starSpaceArrOffset=9712,g.starSpaceCount=7,g.toadSpaceArrOffset=9728;var v=r.createBoardInfo("MP1_USA_TRAINING");v.name="Training",v.boardDefFile=77,v.bgDir=77,v.str={},v.img={},v.sceneIndex=62,v.eventASMStart=0,v.bowserSpaceInst=812,v.toadSpaceInst=364,v.koopaSpaceInst=500,v.booSpaceInst=676;var y=r.createBoardInfo("MP1_USA_STADIUM");y.name="Mini-Game Stadium",y.boardDefFile=83,y.bgDir=99,y.str={},y.img={};var A=r.createBoardInfo("MP1_USA_ISLAND");A.name="Mini-Game Island",A.boardDefFile=78,A.bgDir=79,A.str={},A.img={},A.sceneIndex=114,A.eventASMStart=0,t.getBoardInfos=function(){return[u,d,p,f,h,m,_,g,v,A,y]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),i=n(1),a=n(9),o=null;t.decode=function(e){var t=e.getUint32(0),n=1213616384==(4294967040&t);if(3===t){var i=new DataView(e.buffer,8),a=e.getUint32(4);return r.decompress(3,i,a)}if(!n)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(!o){o=new ArrayBuffer(6144);for(var s=new DataView(o),l=0;l<3072;l++)s.setUint16(2*l,1)}return o},t.encode=function(e,t,n){var o=a.romhandler.getGameVersion();if(null===o)throw"HVQ encode not implemented";if(o>1){var s=r.compress(3,new DataView(e)),l=new ArrayBuffer(s.byteLength+8),c=new DataView(l);return c.setUint32(0,3),c.setUint32(4,e.byteLength),i.copyRange(c,s,8,0,s.byteLength),l}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GrayscaleToRGBA32=function(e,t,n,r){for(var i=new ArrayBuffer(t*n*4),a=new Uint8Array(i),o=new DataView(e),s=0,l=0;l<t*n;l++){var c;if(8===r)c=o.getUint8(l);else{if(4!==r)throw"bpp must be 4 or 8";c=o.getUint8(l/2)&(l%2?15:240),l%2==0&&(c>>=4,c&=15),c=c/15*255}a[s]=c,a[s+1]=c,a[s+2]=c,a[s+3]=255,s+=4}return i},t.GrayscaleFromRGBA32=function(e,t,n,r){throw"Grayscale.fromRGBA32 not implemented"}},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(14),i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,_=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A={};function x(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||y}function S(){}function b(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=x.prototype;var w=b.prototype=new S;w.constructor=b,r(w,x.prototype),w.isPureReactComponent=!0;var E={current:null},P={current:null},C=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function V(e,t,n){var r=void 0,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:P.current}}function F(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var D=/\/+/g,O=[];function R(e,t,n,r){if(O.length){var i=O.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function L(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case a:case o:l=!0}}if(l)return r(i,t,""===n?"."+B(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+B(s=t[c],c);l+=e(s,u,r,i)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=g&&t[g]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,u=n+B(s,c++),r,i);else"object"===s&&v("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return l}(e,"",t,n)}function B(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function k(e,t){e.func.call(e.context,t,e.count++)}function I(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,r,n,function(e){return e}):null!=e&&(F(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n)),r.push(e))}function j(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(D,"$&/")+"/"),L(e,I,t=R(t,a,r,i)),M(t)}function N(){var e=E.current;return null===e&&v("321"),e}var U={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return j(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,k,t=R(null,null,t,n)),M(t)},count:function(e){return L(e,function(){return null},null)},toArray:function(e){var t=[];return j(e,t,null,function(e){return e}),t},only:function(e){return F(e)||v("143"),e}},createRef:function(){return{current:null}},Component:x,PureComponent:b,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:_,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return N().useCallback(e,t)},useContext:function(e,t){return N().useContext(e,t)},useEffect:function(e,t){return N().useEffect(e,t)},useImperativeHandle:function(e,t,n){return N().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return N().useLayoutEffect(e,t)},useMemo:function(e,t){return N().useMemo(e,t)},useReducer:function(e,t,n){return N().useReducer(e,t,n)},useRef:function(e){return N().useRef(e)},useState:function(e){return N().useState(e)},Fragment:s,StrictMode:l,Suspense:h,createElement:V,cloneElement:function(e,t,n){null==e&&v("267",e);var i=void 0,o=r({},e.props),s=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=P.current),void 0!==t.key&&(s=""+t.key);var u=void 0;for(i in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)C.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==u?u[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){u=Array(i);for(var d=0;d<i;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:a,type:e.type,key:s,ref:l,props:o,_owner:c}},createFactory:function(e){var t=V.bind(null,e);return t.type=e,t},isValidElement:F,version:"16.8.6",unstable_ConcurrentMode:p,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentOwner:P,assign:r}},z={default:U},G=z&&U||z;e.exports=G.default||G},function(e,t,n){var r;!function(i,a){"use strict";var o=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,n,r){return 1===arguments.length?t.get(e):t.set(e,n,r)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var n=t._cache[t._cacheKeyPrefix+e];return void 0===n?void 0:decodeURIComponent(n)},t.set=function(e,n,r){return(r=t._getExtendedOptions(r)).expires=t._getExpiresDate(void 0===n?-1:r.expires),t._document.cookie=t._generateCookieString(e,n,r),t},t.expire=function(e,n){return t.set(e,void 0,n)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&void 0!==e.secure?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){if(n=n||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(n.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){var r=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return r+=(n=n||{}).path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":""},t._getCacheFromString=function(e){for(var n={},r=e?e.split("; "):[],i=0;i<r.length;i++){var a=t._getKeyValuePairFromCookieString(r[i]);void 0===n[t._cacheKeyPrefix+a.key]&&(n[t._cacheKeyPrefix+a.key]=a.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var n,r=e.substr(0,t);try{n=decodeURIComponent(r)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+r+'"',e)}return{key:n,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="1"===t.set("cookies.js",1).get("cookies.js");return t.expire("cookies.js"),e},t.enabled=t._areEnabled(),t},s=i&&"object"==typeof i.document?o(i):o;void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}("undefined"==typeof window?this:window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68).createBoardInfo("MP1_JPN_DK");r.name="DK's Jungle Adventure",r.boardDefFile=69,r.bgDir=0,r.str={boardSelect:652,koopaIntro:571,starComments:[286,287,288,289,290,291,292]},r.img={boardSelectImg:17,pauseLogoImg:276,introLogoImg:[356,357],titleScreenImg:385},r.eventASMStart=0,r.eventASMEnd=0,t.getBoardInfos=function(){return[r]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),i=n(41),a=n(25),o=n(18),s=n(1),l=n(36),c=n(16),u=r.createBoardInfo("MP2_WESTERN",{name:"Western Land",canOverwrite:!0,boardDefFile:64,bgDir:2,animBgSet:0,str:{boardSelect:197,boardNames:[190,210],boardGreeting:[1248,1249],boardWinner:707,boardPlayCount:1327},img:{introLogoImg:406,pauseLogoImg:380,boardSelectImg:30,boardSelectIconCoords:[39,20],boardSelectIconMask:20},mainfsEventFile:[10,682],mainfsBoardFile:[10,683],sceneIndex:62,eventASMStart:54096,eventASMEnd:60132,spaceEventTables:[{upper:13292,lower:13300},{upper:13304,lower:13312,primary:!0},{upper:13316,lower:13324}],starSpaceArrOffset:[61828,61940],starSpaceCount:7,toadSpaceArrOffset:[61844,62020],bankArrOffset:[62344],bankCoinArrOffset:[62060],bankCount:2,itemShopArrOffset:[62348],itemShopCount:1,booArrOffset:[62056],booCount:2,audioIndexOffset:13226,onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(u.bgDir+2).src},onAfterOverwrite:function(e){var t=c.scenes.getDataView(62);t.setUint32(13160,0),t.setUint32(13184,0),c.scenes.getDataView(82).setUint16(11790,81);var n=[];n.push(11),(n=n.concat(a.strings._strToBytes("Don't listen to Toad!"))).push(10),(n=n.concat(a.strings._strToBytes("I've got the results. Follow me!"))).push(0),a.strings.write(697,s.arrayToArrayBuffer(n));for(var r=2;r<=7;r++)o.mainfs.write(r,212,o.mainfs.get(r,211)),o.mainfs.write(r,213,o.mainfs.get(r,209));for(var i=0;i<6;i++)o.mainfs.write(10,612+i,o.mainfs.get(10,642+i)),o.mainfs.write(10,648+i,o.mainfs.get(10,666+i));var u=o.mainfs.get(10,410),d=[{src:new ArrayBuffer(73728),width:144,height:128,bpp:32}],p=l.toPack(d,16,0,u);o.mainfs.write(10,410,p),u=o.mainfs.get(10,411),d=[{src:new ArrayBuffer(2048),width:32,height:16,bpp:32}],p=l.toPack(d,16,0,u),o.mainfs.write(10,411,p),u=o.mainfs.get(10,412),d=[{src:new ArrayBuffer(16384),width:64,height:64,bpp:32}],p=l.toPack(d,16,0,u),o.mainfs.write(10,412,p);var f=o.mainfs.get(10,394),h=new DataView(f);h.setUint16(508,0),h.setUint16(4358,0),o.mainfs.write(10,394,f),f=o.mainfs.get(10,395),(h=new DataView(f)).setUint16(516,0),h.setUint16(1558,0),o.mainfs.write(10,395,f)}}),d=r.createBoardInfo("MP2_PIRATE");d.name="Pirate Land",d.boardDefFile=65,d.bgDir=10,d.animBgSet=1,d.str={boardSelect:198},d.img={introLogoImg:422,pauseLogoImg:381,boardSelectImg:31,boardSelectIconCoords:[35,61]},d.arrowRotStartOffset=0,d.arrowRotEndOffset=0;var p=r.createBoardInfo("MP2_HORROR");p.name="Horror Land",p.boardDefFile=66,p.bgDir=21,p.animBgSet=2,p.str={boardSelect:201},p.img={introLogoImg:581,pauseLogoImg:382,boardSelectImg:32,boardSelectIconCoords:[133,60]},p.sceneIndex=67,p.eventASMStart=0,p.eventASMEnd=0,p.spaceEventTables=[{upper:14420,lower:14428},{upper:14432,lower:14440},{upper:14488,lower:14496},{upper:14500,lower:14504}];var f=r.createBoardInfo("MP2_SPACE");f.name="Space Land",f.boardDefFile=67,f.bgDir=24,f.animBgSet=3,f.str={boardSelect:199,boardNames:[193,212]},f.img={introLogoImg:500,pauseLogoImg:383,boardSelectImg:33,boardSelectIconCoords:[93,10]};var h=r.createBoardInfo("MP2_MYSTERY");h.name="Mystery Land",h.boardDefFile=68,h.bgDir=16,h.str={boardSelect:200},h.img={introLogoImg:502,pauseLogoImg:384,boardSelectImg:34,boardSelectIconCoords:[139,19]};var m=r.createBoardInfo("MP2_BOWSER");m.name="Bowser Land",m.boardDefFile=69,m.bgDir=37,m.animBgSet=4,m.str={boardSelect:202},m.img={introLogoImg:547,pauseLogoImg:385,boardSelectImg:35},t.getBoardInfos=function(){return[u,d,p,f,h,m]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),i=n(41),a=n(0),o=r.createBoardInfo("MP3_CHILLY",{name:"Chilly Waters",canOverwrite:!0,boardDefFile:570,bgDir:3,pauseBgDir:5,str:{boardSelect:[[21,30],[26,17]],boardGreeting:[24,12],boardGreetingDuel:[24,0],boardNames:[[49,39],[83,43]]},img:{boardSelectImg:72,splashLogoImg:22,splashLogoTextImg:28,pauseLogoImg:125,gateImg:354},sceneIndex:72,mainfsEventFile:[19,618],mainfsBoardFile:[19,619],eventASMStart:84720,eventASMEnd:93164,spaceEventTables:[{upper:9896,lower:9904},{upper:9908,lower:9916},{upper:9932,lower:9940}],starSpaceArrOffset:[96528,96640],starSpaceCount:8,toadSpaceArrOffset:[96544,96732],bankArrOffset:[97124],bankCoinArrOffset:[96768],bankCount:2,itemShopArrOffset:[97128],itemShopCount:2,booArrOffset:[96764],booCount:1,gateNeighborsOffset:[96724],gateArrOffset:[96892],gateCount:2,arrowRotStartOffset:9112,arrowRotEndOffset:9280,audioIndexOffset:9858,onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(o.bgDir+1).src}}),s=r.createBoardInfo("MP3_BLOOBER",{name:"Deep Bloober Sea",canOverwrite:!0,boardDefFile:571,bgDir:6,pauseBgDir:8,str:{boardSelect:[[21,31],[26,18]],boardGreeting:[24,13],boardGreetingDuel:[24,2],boardNames:[[49,40],[83,44]]},img:{boardSelectImg:73,splashLogoImg:23,splashLogoTextImg:29,pauseLogoImg:126,gateImg:359},sceneIndex:73,mainfsEventFile:[19,620],mainfsBoardFile:[19,621],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(s.bgDir+1).src}}),l=r.createBoardInfo("MP3_SPINY",{name:"Spiny Desert",canOverwrite:!0,boardDefFile:572,bgDir:9,pauseBgDir:11,str:{boardSelect:[[21,32],[26,19]],boardGreeting:[24,14],boardGreetingDuel:[24,4],boardNames:[[49,41],[83,45]]},img:{boardSelectImg:74,splashLogoImg:24,splashLogoTextImg:30,pauseLogoImg:127,gateImg:366},sceneIndex:74,mainfsEventFile:[19,622],mainfsBoardFile:[19,623],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(l.bgDir+1).src}}),c=r.createBoardInfo("MP3_WOODY",{name:"Woody Woods",canOverwrite:!0,boardDefFile:573,bgDir:12,pauseBgDir:14,str:{boardSelect:[[21,33],[26,20]],boardGreeting:[24,15],boardGreetingDuel:[24,6],boardNames:[[49,42],[83,46]]},img:{boardSelectImg:75,splashLogoImg:25,splashLogoTextImg:31,pauseLogoImg:128,gateImg:373},sceneIndex:75,mainfsEventFile:[19,624],mainfsBoardFile:[19,625],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(c.bgDir+1).src}}),u=r.createBoardInfo("MP3_CAVERN",{name:"Creepy Cavern",canOverwrite:!0,boardDefFile:574,bgDir:15,pauseBgDir:17,str:{boardSelect:[[21,34],[26,21]],boardGreeting:[24,16],boardGreetingDuel:[24,8],boardNames:[[49,43],[83,47]]},img:{boardSelectImg:76,splashLogoImg:26,splashLogoTextImg:32,pauseLogoImg:129,gateImg:383},sceneIndex:76,mainfsEventFile:[19,626],mainfsBoardFile:[19,627],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(u.bgDir+1).src}}),d=r.createBoardInfo("MP3_WALUIGI",{name:"Waluigi's Land",canOverwrite:!0,boardDefFile:575,bgDir:18,pauseBgDir:20,str:{boardSelect:[[21,35],[26,22]],boardGreeting:[24,17],boardGreetingDuel:[24,10],boardNames:[[49,44],[83,48]]},img:{boardSelectImg:77,splashLogoImg:27,splashLogoTextImg:33,pauseLogoImg:130,gateImg:387},sceneIndex:77,mainfsEventFile:[19,628],mainfsBoardFile:[19,629],onLoad:function(e){e.otherbg.largescene=i.hvqfs.readBackground(d.bgDir+1).src}}),p=r.createBoardInfo("MP3U_GATEGUY");p.name="Gate Guy",p.type=a.BoardType.DUEL,p.boardDefFile=577,p.bgDir=24,p.img={boardSelectImg:81,splashLogoImg:34,splashLogoTextImg:40,miniMapWithBg:279,miniMapDots:280},p.sceneIndex=91,p.spaceEventTables=[{upper:33052,lower:33060},{upper:33064,lower:33072}],p.onAfterOverwrite=function(e){};var f=r.createBoardInfo("MP3U_ARROWHEAD");f.name="Arrowhead",f.type=a.BoardType.DUEL,f.boardDefFile=578,f.bgDir=25,f.img={boardSelectImg:82,splashLogoImg:35,splashLogoTextImg:41,miniMapWithBg:310,miniMapDots:311};var h=r.createBoardInfo("MP3U_PIPESQUEAK");h.name="Pipesqueak",h.type=a.BoardType.DUEL,h.boardDefFile=579,h.bgDir=26,h.img={boardSelectImg:83,splashLogoImg:36,splashLogoTextImg:42,miniMapWithBg:312,miniMapDots:313};var m=r.createBoardInfo("MP3U_BLOWHARD");m.name="Blowhard",m.type=a.BoardType.DUEL,m.boardDefFile=580,m.bgDir=27,m.img={boardSelectImg:84,splashLogoImg:37,splashLogoTextImg:43,miniMapWithBg:315,miniMapDots:316};var _=r.createBoardInfo("MP3U_MRMOVER");_.name="Mr. Mover",_.type=a.BoardType.DUEL,_.boardDefFile=581,_.bgDir=28,_.img={boardSelectImg:85,splashLogoImg:38,splashLogoTextImg:44,miniMapWithBg:317,miniMapDots:318};var g=r.createBoardInfo("MP3U_BACKTRACK");g.name="Backtrack",g.type=a.BoardType.DUEL,g.boardDefFile=582,g.bgDir=29,g.img={boardSelectImg:86,splashLogoImg:39,splashLogoTextImg:45,miniMapWithBg:319,miniMapDots:320},t.getBoardInfos=function(){return[o,s,l,c,u,d,p,f,h,m,_,g]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=function(){function e(e){if(this.__type="S2",this.midis=[],21298!==e.getUint16(0))throw"S2 constructor encountered non-S2 structure";this._extract(e)}return e.prototype._extract=function(e){for(var t=e.getUint16(2),n=4+8*t,i=0;i<t;i++){var a=e.getUint32(4+4*i*2),o=e.getUint32(8+4*i*2),s=e.byteOffset+a;this.midis.push({buffer:e.buffer.slice(s,s+o),soundbankIndex:e.getUint8(n+16*i)})}var l=e.getUint32(n+12),c=e.getUint32(4);this.tbl=e.buffer.slice(e.byteOffset+l,e.byteOffset+c);var u=e.getUint32(n+4),d=new DataView(e.buffer,e.byteOffset+u);this.soundbanks=new r.B1(d)},e}();t.S2=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(210),i=function(){function e(e,t){this.__type="ALBank",this.instruments=[],this._extract(e,t)}return e.prototype._extract=function(e,t){if(this.flags=e.getUint8(t+2),this.pad=e.getUint8(t+3),this.sampleRate=e.getInt32(t+4),e.getUint32(t+8))throw"Need to parse percussion at bank offset 0x"+(e.byteOffset+t).toString(16);for(var n=e.getUint16(t),i=0;i<n;i++){var a=e.getUint32(t+12+4*i);this.instruments.push(new r.ALInst(e,a))}},e}();t.ALBank=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(211),i=function(){function e(e,t){this.__type="ALInst",this.sounds=[],this._extract(e,t)}return e.prototype._extract=function(e,t){this.volume=e.getUint8(t),this.pan=e.getUint8(t+1),this.priority=e.getUint8(t+2),this.flags=e.getUint8(t+3),this.tremType=e.getUint8(t+4),this.tremRate=e.getUint8(t+5),this.tremDepth=e.getUint8(t+6),this.tremDelay=e.getUint8(t+7),this.vibType=e.getUint8(t+8),this.vibRate=e.getUint8(t+9),this.vibDepth=e.getUint8(t+10),this.vibDelay=e.getUint8(t+11),this.bendRange=e.getInt16(t+12);for(var n=e.getInt16(t+14),i=0;i<n;i++){var a=e.getUint32(t+16+4*i);this.sounds.push(new r.ALSound(e,a))}},e}();t.ALInst=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115),i=n(212),a=n(83),o=function(){function e(e,t){this.__type="ALSound",this._extract(e,t)}return e.prototype._extract=function(e,t){var n=e.getUint32(t);this.env=new r.ALEnvelope(e,n);var o=e.getUint32(t+4);this.keymap=new i.ALKeyMap(e,o);var s=e.getUint32(t+8);this.wave=new a.ALWaveTable(e,s),this.samplePan=e.getUint8(t+12),this.sampleVolume=e.getUint8(t+13),this.flags=e.getUint8(t+14)},e}();t.ALSound=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.__type="ALKey",this._extract(e,t)}return e.prototype._extract=function(e,t){this.velocityMin=e.getUint8(t),this.velocityMax=e.getUint8(t+1),this.keyMin=e.getUint8(t+2),this.keyMax=e.getUint8(t+3),this.keyBase=e.getUint8(t+4),this.detune=e.getInt8(t+5)},e}();t.ALKeyMap=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(214),i=n(215),a=function(){function e(e,t){this.__type="ALADPCMWaveInfo",this.loop=null,this.book=null,this._extract(e,t)}return e.prototype._extract=function(e,t){var n=e.getUint32(t);0!==n&&(this.loop=new r.ALADPCMLoop(e,n));var a=e.getUint32(t+4);0!==a&&(this.book=new i.ALADPCMBook(e,a))},e}();t.ALADPCMWaveInfo=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.__type="ALADPCMLoop",this._extract(e,t)}return e.prototype._extract=function(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8),this.state=[];for(var n=0;n<16;n++)this.state[n]=e.getUint16(t+12+2*n)},e}();t.ALADPCMLoop=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.__type="ALADPCMBook",this._extract(e,t)}return e.prototype._extract=function(e,t){this.order=e.getInt32(t),this.npredictors=e.getInt32(t+4);var n=this.order*this.npredictors*8;this.predictors=new Array(n);for(var r=0;r<n;r++)this.predictors[r]=e.getInt16(t+8+2*r)},e}();t.ALADPCMBook=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(217),i=function(){function e(e,t){this.__type="ALRAWWaveInfo",this.loop=null,this._extract(e,t)}return e.prototype._extract=function(e,t){var n=e.getUint32(t);0!==n&&(this.loop=new r.ALRawLoop(e,t+n))},e}();t.ALRAWWaveInfo=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.__type="ALRAWWaveInfo",this._extract(e,t)}return e.prototype._extract=function(e,t){this.start=e.getUint32(t),this.end=e.getUint32(t+4),this.count=e.getUint32(t+8)},e}();t.ALRawLoop=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=function(){function e(e){if(this.__type="MBF0",this.midis=[],1296188976!==e.getUint32(0))throw"MBF0 constructor encountered non-MBF0 structure";this._extract(e)}return e.prototype._extract=function(e){for(var t=e.getUint32(4),n=0;n<t;n++){var i=e.getUint32(72+16*n),a=e.getUint32(76+16*n);this.midis.push({buffer:e.buffer.slice(e.byteOffset+i,e.byteOffset+i+a),soundbankIndex:e.getUint8(66+16*n)})}var o=64+16*t,s=e.getUint32(o),l=e.getUint32(o+4),c=e.getUint32(o+8),u=c+e.getUint32(o+12);this.tbl=e.buffer.slice(e.byteOffset+c,e.byteOffset+u);var d=new DataView(e.buffer,e.byteOffset+s,l);this.soundbanks=new r.B1(d)},e}();t.MBF0=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(3),a=function(){function e(e){if(this.__type="SBF0",this.sounds=[],1396852272!==e.getUint32(0))throw"SBF0 constructor encountered non-SBF0 structure";this._extract(e)}return e.prototype._extract=function(e){var t=e.getUint32(68);if(0===t)throw new Error("Does soundCount === 0?");for(var n=new DataView(e.buffer,e.byteOffset+116),a=0;a<t;a++)this.sounds.push(new r.ALSoundSimple(n,16*a));var o=e.getUint32(84),s=o+e.getUint32(88);if(this.tbl=e.buffer.slice(e.byteOffset+o,e.byteOffset+s),$$debug){var l="",c=e.getUint32(4),u=s;for(a=0;a<c;a++)for(var d=e.getUint32(u+4*a),p=e.getUint8(u+d),f=u+d+8,h=0;h<p;h++){var m=e.getUint32(f+8*h+4),_=void 0,g=e.getUint8(u+m);switch(g){case 146:case 147:_=e.getUint16(u+m+1);break;case 18:case 19:_=e.getUint16(u+m+2);break;case 1:case 160:continue;default:throw new Error("Unrecongized soundFxInfoType "+i.$$hex(g)+" at "+i.$$hex(e.byteOffset+u+m))}l+="\n"+i.$$hex(a)+": "+i.$$hex(_)}i.$$log(l)}},e}();t.SBF0=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=function(){function e(e){if(this.__type="T3",this.sounds=[],21555!==e.getUint16(0))throw"T3 constructor encountered non-T3 structure";this._extract(e)}return e.prototype._extract=function(e){for(var t=e.getUint16(2),n=[],i=0;i<t;i++)n.push({rawSound:4095&e.getUint16(4+8*i+4),sampleRate:e.getUint16(4+8*i+6)});var a=e.getUint32(4+8*t+4),o=4+8*t+44,s=new DataView(e.buffer,e.byteOffset+o);for(i=0;i<a;i++){for(var l=new r.ALSoundSimple(s,16*i),c=0,u=n;c<u.length;c++){var d=u[c];if(d.rawSound===i){l.sampleRate=d.sampleRate;break}}l.sampleRate||(console.warn("Unknown sample rate for raw sound "+i+", guessing..."),l.sampleRate=22050),this.sounds.push(l)}console.log(this.sounds);var p=e.getUint32(4+8*t+12),f=p+e.getUint32(4+8*t+20);this.tbl=e.buffer.slice(e.byteOffset+p,e.byteOffset+f)},e}();t.T3=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){if(this.__type="FXD0",1180189744!==e.getUint32(0))throw"FXD0 constructor encountered non-FXD0 structure";this._extract(e)}return e.prototype._extract=function(e){this.hunks=[];for(var t=e.getUint32(4),n=16,r=0;r<t;r++,n+=520){var i=n+520;this.hunks.push(e.buffer.slice(e.byteOffset+n,e.byteOffset+i))}},e}();t.FXD0=r},function(e,t,n){var r;void 0===(r=function(e,t){t.default=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147567024,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147567408,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147578972,type:"code",name:"DMA",desc:"A0=rom_addr"},{addr:2147579176,type:"code",name:"LoadFormFile",desc:"A0=main_fs_DDDDFFFF"},{addr:2147579276,type:"code",name:"GetRandomByte"},{addr:2147579328,type:"code",name:"LoadOverlay",desc:"A0=overlay_index"},{addr:2147584272,type:"code",name:"InitSprite",desc:"A0=u32 file_id DDDDFFFF"},{addr:2147585104,type:"code",name:"ShowBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585148,type:"code",name:"HideBasicSprite",desc:"A0=u16 basic_sprite_index"},{addr:2147585232,type:"code",name:"SetBasicSpritePos",desc:"A0=u16 basic_sprite_index"},{addr:2147585816,type:"code",name:"SetBasicSpriteSize",desc:"A0=u16 basic_sprite_index"},{addr:2147586144,type:"code",name:"InitBasicSprite",desc:"A0=short sprite_index"},{addr:2147594896,type:"code",name:"ParseObjType10",desc:"Parse OBJ1 type 0x10"},{addr:2147599080,type:"code",name:"FindFormEntry",desc:'Finds a FORM entry. A0=entry type (like "OBJ1")'},{addr:2147603008,type:"code",name:"InitCameras",desc:"A0=int cameras count"},{addr:2147604788,type:"code",name:"Convert3DTo2D",desc:"A0=3 point vector"},{addr:2147630100,type:"code",name:"LoadFormBinary",desc:"A0=form_addr"},{addr:2147726976,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147727012,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147727048,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147727184,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147727220,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147727256,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147729740,type:"code",name:"DirectionPrompt",desc:"Prompts player to choose path at branch"},{addr:2147768184,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147787668,type:"code",name:"HVQDecode",desc:"HVQ image decoder"},{addr:2147795436,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147795460,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2147795504,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2147795532,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2147796108,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2147797248,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147797804,type:"code",name:"SetCurrentSpaceIndex",desc:"A0=space_index"},{addr:2147797816,type:"code",name:"GetCurrentSpaceIndex"},{addr:2147798640,type:"code",name:"SwapPlayerLocationData",desc:"A0=player_index_1"},{addr:2147798848,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2147798856,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2147798864,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2147798896,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2147798976,type:"code",name:"RNGPercentChance",desc:"A0=percent chance the call returns true"},{addr:2147799048,type:"code",name:"GetTurnsRemaining",desc:"Subtracts elapsed turns from total turns"},{addr:2147801048,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2147801156,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2147801392,type:"code",name:"CreateTextWindow",desc:"creates a text window based on upper left x and y coordinate"},{addr:2147801560,type:"code",name:"ShowTextWindow"},{addr:2147801808,type:"code",name:"HideTextWindow"},{addr:2147802724,type:"code",name:"WaitForTextConfirmation"},{addr:2147822208,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147822220,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147822284,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147822368,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147822408,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147822520,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147823648,type:"code",name:"ClearPlayer0x20",desc:"clears all 0x20 entries in player structs"},{addr:2147834208,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147845968,type:"code",name:"ExecBoardScene",desc:"A0=board_fns"},{addr:2147850136,type:"code",name:"IsBoardFeatureDisabled",desc:"A0=0xD:bowser"},{addr:2147850204,type:"code",name:"SetBoardFeatureEnabled",desc:"A0=feature"},{addr:2147850284,type:"code",name:"SetBoardFeatureDisabled",desc:"A0=feature"},{addr:2147850368,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147850400,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147850540,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147851008,type:"code",name:"Ensure16",desc:"A0=num"},{addr:2147858488,type:"code",name:"FreeString",desc:"A0=*str"},{addr:2147864368,type:"code",name:"InitObjectSystem",desc:"A0=int max_objects"},{addr:2147867688,type:"code",name:"InitProcess",desc:"A0=fn"},{addr:2147868048,type:"code",name:"EndProcess"},{addr:2147877548,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147885756,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147890512,type:"code",name:"SleepProcess"},{addr:2147890612,type:"code",name:"SleepVProcess"},{addr:2147932120,type:"code",name:"LoadStringIntoWindow",desc:"A0=window_id"},{addr:2147934320,type:"code",name:"SetTextCharsPerFrame",desc:"A0=window_id"},{addr:2148005196,type:"code",name:"HVQDecodeInner",desc:"HVQ image decoder"},{addr:2148007236,type:"code",name:"__leoCommand"},{addr:2148010448,type:"code",name:"__leoAnalize_asic_status"},{addr:2148011632,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148011688,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148012004,type:"code",name:"__leoRecal_w"},{addr:2148012144,type:"code",name:"__leoSeek_w"},{addr:2148012288,type:"code",name:"__leoChk_err_retry"},{addr:2148012560,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148012832,type:"code",name:"__LEOrw_flags"},{addr:2148012834,type:"code",name:"__LEOdma_que"},{addr:2148012858,type:"code",name:"__LEOPiDmaParam"},{addr:2148012882,type:"code",name:"__LEOtgt_param"},{addr:2148012894,type:"code",name:"__LEOPiInfo"},{addr:2148012898,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148012902,type:"code",name:"__leoSet_mseq"},{addr:2148013268,type:"code",name:"__leoClr_reset"},{addr:2148013380,type:"code",name:"__LEOcommand_que"},{addr:2148013404,type:"code",name:"__leoClr_queue"},{addr:2148013552,type:"code",name:"__leoLba_to_phys"},{addr:2148014484,type:"code",name:"LeoReadDiskID"},{addr:2148014580,type:"code",name:"LeoReadWrite"},{addr:2148017600,type:"code",name:"osLeoDiskInit"},{addr:2148017756,type:"code",name:"__osDiskHandle"},{addr:2148017760,type:"code",name:"__LeoDiskHandle"},{addr:2148018112,type:"code",name:"LeoDriveExist"},{addr:2148029872,type:"code",name:"sqrtf",desc:"of F0 and F12"},{addr:2148029888,type:"code",name:"cosf"},{addr:2148030224,type:"code",name:"guLookAt",desc:"Calculate a 'lookat' view matrix."},{addr:2148031124,type:"code",name:"guLookAtF",desc:"Calculate a 'lookat' view matrix (floating point)"},{addr:2148032032,type:"code",name:"guLookAtReflect"},{addr:2148032140,type:"code",name:"guLookAtReflectF"},{addr:2148033552,type:"code",name:"guLookAtHilite"},{addr:2148033764,type:"code",name:"guLookAtHiliteF"},{addr:2148036208,type:"code",name:"guMtxF2L"},{addr:2148036360,type:"code",name:"guMtxL2F"},{addr:2148036448,type:"code",name:"guMtxIdentF"},{addr:2148036528,type:"code",name:"guMtxIdentF"},{addr:2148036696,type:"code",name:"guMtxF2L"},{addr:2148036848,type:"code",name:"guMtxXFMF"},{addr:2148037020,type:"code",name:"guMtxCatF"},{addr:2148037068,type:"code",name:"guMtxXFMF"},{addr:2148037248,type:"code",name:"guMtxXFML"},{addr:2148037388,type:"code",name:"guMtxCatL"},{addr:2148037504,type:"code",name:"guOrtho",desc:"Calculate a positive projection matrix."},{addr:2148037836,type:"code",name:"guOrthoF",desc:"Calculate a positive projection matrix (floating point)"},{addr:2148038144,type:"code",name:"guPerspective",desc:"Calculate a perspective drawing projection matrix."},{addr:2148038600,type:"code",name:"guPerspectiveF",desc:"Calculate a perspective drawing projection matrix (floating point)"},{addr:2148039040,type:"code",name:"guRotate"},{addr:2148039416,type:"code",name:"guRotateF"},{addr:2148039776,type:"code",name:"guRotateRPY"},{addr:2148040172,type:"code",name:"guRotateRPYF"},{addr:2148040576,type:"code",name:"guScale"},{addr:2148040700,type:"code",name:"guScaleF"},{addr:2148040800,type:"code",name:"sinf"},{addr:2148041216,type:"code",name:"guTranslate"},{addr:2148041328,type:"code",name:"guTranslateF"},{addr:2148041424,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148041472,type:"code",name:"osInvalDCache"},{addr:2148041872,type:"code",name:"osSetIntMask"},{addr:2148042096,type:"code",name:"osWritebackDCache"},{addr:2148042272,type:"code",name:"osCreateMesgQueue"},{addr:2148042320,type:"code",name:"osCreateThread"},{addr:2148042736,type:"code",name:"osGetThreadPri"},{addr:2148042768,type:"code",name:"osGetTime"},{addr:2148042912,type:"code",name:"osJamMesg"},{addr:2148043232,type:"code",name:"osRecvMesg"},{addr:2148043536,type:"code",name:"osSendMesg"},{addr:2148043840,type:"code",name:"osSetThreadPri"},{addr:2148044048,type:"code",name:"osStartThread"},{addr:2148044336,type:"code",name:"osStopThread"},{addr:2148044528,type:"code",name:"__osDequeueThread"},{addr:2148044580,type:"code",name:"__osFaultedThread"},{addr:2148044584,type:"code",name:"__osRunningThread"},{addr:2148044588,type:"code",name:"__osActiveQueue"},{addr:2148044592,type:"code",name:"__osRunQueue"},{addr:2148044596,type:"code",name:"__osThreadTail"},{addr:2148044992,type:"code",name:"__osSetTimerIntr"},{addr:2148045088,type:"code",name:"__osInsertTimer"},{addr:2148045360,type:"code",name:"osVirtualToPhysical",desc:"Translates between CPU virtual address/physical memory address"},{addr:2148045472,type:"code",name:"alBnkfNew",desc:"Initializes a bank file"},{addr:2148045620,type:"code",name:"alSeqFileNew"},{addr:2148045684,type:"code",name:"__bnkf_o_0098"},{addr:2148045856,type:"code",name:"__bnkf_o_0118"},{addr:2148046004,type:"code",name:"__bnkf_o_01D8"},{addr:2148046092,type:"code",name:"__bnkf_o_0258"},{addr:2148046192,type:"code",name:"alEvtqFlushType"},{addr:2148046316,type:"code",name:"alEvtqNextEvent"},{addr:2148046368,type:"code",name:"alEvtqFlushstring_num",desc:"returns pointer"},{addr:2148046468,type:"code",name:"alEvtqPostEvent"},{addr:2148046488,type:"code",name:"alEvtqPostEvent"},{addr:2148046756,type:"code",name:"alEvtqNextEvent"},{addr:2148046856,type:"code",name:"alEvtqFlushType"},{addr:2148046908,type:"code",name:"alEvtqNew"},{addr:2148047132,type:"code",name:"alLink"},{addr:2148047164,type:"code",name:"alUnlink"},{addr:2148047216,type:"code",name:"alHeapInit"},{addr:2148047280,type:"code",name:"alHeapDBAlloc"},{addr:2148047360,type:"code",name:"alCopy"},{addr:2148047424,type:"code",name:"alCSeqGetLoc"},{addr:2148047540,type:"code",name:"alCSeqSetLoc"},{addr:2148047656,type:"code",name:"alCSeqNewMarker"},{addr:2148047692,type:"code",name:"alCSeqNextEvent"},{addr:2148047936,type:"code",name:"__alCSeqNextDelta"},{addr:2148048064,type:"code",name:"__cseq_o_0194"},{addr:2148048320,type:"code",name:"alCSeqGetTicks"},{addr:2148048328,type:"code",name:"alCSeqSecToTicks"},{addr:2148048488,type:"code",name:"alCSeqTicksToSec"},{addr:2148048612,type:"code",name:"__alCSeqNextDelta"},{addr:2148048740,type:"code",name:"alCSeqNextEvent"},{addr:2148048984,type:"code",name:"alCSeqNew"},{addr:2148049876,type:"code",name:"__cseq_o_02A4"},{addr:2148050060,type:"code",name:"__cseq_o_0088"},{addr:2148050176,type:"code",name:"alSeqpDelete"},{addr:2148050208,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148050240,type:"code",name:"alSeqpGetChlPan"},{addr:2148050272,type:"code",name:"alSeqpGetChlVol"},{addr:2148050304,type:"code",name:"alSeqpGetChlProgram"},{addr:2148050432,type:"code",name:"alCSPGetTempo"},{addr:2148050480,type:"code",name:"alSeqpGetState"},{addr:2148050496,type:"code",name:"alSeqpPlay"},{addr:2148050544,type:"code",name:"alSeqpSetBank"},{addr:2148050592,type:"code",name:"alSeqpSetChlFXMix"},{addr:2148050672,type:"code",name:"alSeqpSetSeq"},{addr:2148050720,type:"code",name:"alSeqpSetTempo"},{addr:2148050800,type:"code",name:"alSeqpSetVol"},{addr:2148050848,type:"code",name:"alSeqpStop"},{addr:2148050896,type:"code",name:"alSndpDelete"},{addr:2148050944,type:"code",name:"alSndpAllocate"},{addr:2148051136,type:"code",name:"alSndpDeallocate"},{addr:2148051216,type:"code",name:"alSndpSetSound"},{addr:2148051232,type:"code",name:"alSndpPlay"},{addr:2148051328,type:"code",name:"alSndpGetSound"},{addr:2148051344,type:"code",name:"alSndpStop"},{addr:2148051424,type:"code",name:"alSndpGetState"},{addr:2148051456,type:"code",name:"alSndpSetPitch"},{addr:2148051536,type:"code",name:"alSndpSetPriority"},{addr:2148051584,type:"code",name:"alSndpSetVol"},{addr:2148051664,type:"code",name:"alSndpSetPan"},{addr:2148051744,type:"code",name:"alSndpSetFXMix"},{addr:2148051824,type:"code",name:"alSynDelete"},{addr:2148051840,type:"code",name:"alSynAddPlayer"},{addr:2148051920,type:"code",name:"alSynRemovePlayer"},{addr:2148052080,type:"code",name:"alSynFreeVoice"},{addr:2148052240,type:"code",name:"_allocatePVoice"},{addr:2148052424,type:"code",name:"alSynAllocVoice"},{addr:2148052536,type:"code",name:"__synallocvoice_o_0048"},{addr:2148052720,type:"code",name:"alSynStopVoice"},{addr:2148052848,type:"code",name:"alSynStartVoice"},{addr:2148053008,type:"code",name:"alSynSetPitch"},{addr:2148053152,type:"code",name:"alSynSetVol"},{addr:2148053344,type:"code",name:"alCents2Ratio"},{addr:2148053440,type:"code",name:"osAiGetLength"},{addr:2148053616,type:"code",name:"osSpTaskStartGo"},{addr:2148053660,type:"code",name:"osSpTaskLoad"},{addr:2148054192,type:"code",name:"osSpTaskYield"},{addr:2148054224,type:"code",name:"osSpTaskYielded"},{addr:2148054304,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148054432,type:"code",name:"osViSetEvent"},{addr:2148054528,type:"code",name:"osViSetMode"},{addr:2148054608,type:"code",name:"osViSwapBuffer"},{addr:2148054688,type:"code",name:"osViBlack"},{addr:2148055664,type:"code",name:"__osPfsGetInitData"},{addr:2148055844,type:"code",name:"__osPfsRequestData"},{addr:2148056008,type:"code",name:"__osPfsPifRam"},{addr:2148056044,type:"code",name:"__pfsisplug_o_004C"},{addr:2148056072,type:"code",name:"osPfsIsPlug"},{addr:2148056208,type:"code",name:"__pfsisplug_o_0094"},{addr:2148056400,type:"code",name:"osEepromLongWrite"},{addr:2148056640,type:"code",name:"osEepromLongRead"},{addr:2148056752,type:"code",name:"osEPiStartDma"},{addr:2148056912,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148056952,type:"code",name:"__osPiGetAccess"},{addr:2148056996,type:"code",name:"__osPiGetAccess"},{addr:2148057060,type:"code",name:"__osPiAccessQueue"},{addr:2148057084,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148057104,type:"code",name:"__osPiRelAccess"},{addr:2148057152,type:"code",name:"bcopy"},{addr:2148057952,type:"code",name:"bzero",desc:"Writes all zeroes"},{addr:2148058112,type:"code",name:"strchr"},{addr:2148058204,type:"code",name:"memcpy"},{addr:2148058168,type:"code",name:"strlen"},{addr:2148058256,type:"code",name:"sprintf",desc:"A0=out_addr"},{addr:2148058400,type:"code",name:"rmonPrintf",desc:"no-op in release"},{addr:2148058420,type:"code",name:"osSyncPrintf",desc:"no-op in release"},{addr:2148058564,type:"code",name:"alCSPNew"},{addr:2148065316,type:"code",name:"alSeqpNew"},{addr:2148065496,type:"code",name:"__seqplayer_o_03EC"},{addr:2148067584,type:"code",name:"__seqplayer_o_0400"},{addr:2148067692,type:"code",name:"__seqplayer_o_0A54"},{addr:2148067772,type:"code",name:"__seqplayer_o_0244"},{addr:2148067872,type:"code",name:"__seqplayer_o_0D18"},{addr:2148067956,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148068168,type:"code",name:"__seqplayer_o_0284"},{addr:2148068280,type:"code",name:"__seqplayer_o_0320"},{addr:2148068308,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148068376,type:"code",name:"__seqplayer_o_04F8"},{addr:2148068668,type:"code",name:"__seqplayer_o_04E0"},{addr:2148068844,type:"code",name:"__seqplayer_o_0600"},{addr:2148069016,type:"code",name:"__seqplayer_o_107C"},{addr:2148069100,type:"code",name:"__seqplayer_o_167C"},{addr:2148069228,type:"code",name:"__seqplayer_o_00BC"},{addr:2148069408,type:"code",name:"__seqplayer_o_0238"},{addr:2148069648,type:"code",name:"__seqplayer_o_05D8"},{addr:2148069712,type:"code",name:"alSynSetFXMix"},{addr:2148070164,type:"code",name:"alAudioFrame"},{addr:2148070596,type:"code",name:"alSynNew"},{addr:2148071472,type:"code",name:"osAiSetFrequency"},{addr:2148071760,type:"code",name:"__CartRomHandle"},{addr:2148071876,type:"code",name:"osCartRomInit"},{addr:2148072144,type:"code",name:"osEepromProbe"},{addr:2148072272,type:"code",name:"osEepromRead"},{addr:2148072680,type:"code",name:"__conteepread_o_00A8"},{addr:2148072816,type:"code",name:"osEepromWrite"},{addr:2148073176,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148073344,type:"code",name:"__osEepStatus"},{addr:2148073760,type:"code",name:"osContGetReadData"},{addr:2148073916,type:"code",name:"osContStartReadData"},{addr:2148074052,type:"code",name:"__contreaddata_o_0028"},{addr:2148074736,type:"code",name:"osEPiReadIo"},{addr:2148074832,type:"code",name:"osEPiWriteIo"},{addr:2148074928,type:"code",name:"osMotorInit"},{addr:2148075512,type:"code",name:"__osMotorAccess"},{addr:2148075840,type:"code",name:"__osPfsDeclearPage"},{addr:2148076120,type:"code",name:"osPfsAllocateFile"},{addr:2148076620,type:"code",name:"__pfsallocatefile_o_0178"},{addr:2148076912,type:"code",name:"__osPfsReleasePages"},{addr:2148077016,type:"code",name:"osPfsDeleteFile"},{addr:2148077340,type:"code",name:"__pfsdeletefile_o_00EC"},{addr:2148077436,type:"code",name:"alHeapCheck"},{addr:2148077856,type:"code",name:"osPfsFreeBlocks"},{addr:2148078128,type:"code",name:"osPfsInitPak"},{addr:2148078632,type:"code",name:"__pfsinitpak_o_0050"},{addr:2148080192,type:"code",name:"osPfsRepairId"},{addr:2148080288,type:"code",name:"osPfsFindFile"},{addr:2148080704,type:"code",name:"__osPfsSelectBank"},{addr:2148080816,type:"code",name:"osCreatePiManager"},{addr:2148081216,type:"code",name:"__osPiRawStartDma"},{addr:2148081224,type:"code",name:"__osPiTable"},{addr:2148081228,type:"code",name:"__osPiDevMgr"},{addr:2148081332,type:"code",name:"__Dom1SpeedParam"},{addr:2148081424,type:"code",name:"__osSiRawStartDma"},{addr:2148081448,type:"code",name:"__osCurrentHandle"},{addr:2148081456,type:"code",name:"__osPiTable"},{addr:2148081460,type:"code",name:"__osPiDevMgr"},{addr:2148081600,type:"code",name:"__osSpRawStartDma"},{addr:2148082576,type:"code",name:"osViSetSpecialFeatures"},{addr:2148082944,type:"code",name:"__osViSwapContext"},{addr:2148083728,type:"code",name:"osAfterPreNMI"},{addr:2148085420,type:"code",name:"__osEnqueueAndYield"},{addr:2148085756,type:"code",name:"__osPopThread"},{addr:2148086176,type:"code",name:"osGetMemSize"},{addr:2148087072,type:"code",name:"__osDisableInt"},{addr:2148087184,type:"code",name:"__osRestoreInt"},{addr:2148087216,type:"code",name:"osSetEventMesg"},{addr:2148087392,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148087680,type:"code",name:"osGetCount"},{addr:2148087712,type:"code",name:"__osProbeTLB"},{addr:2148088096,type:"code",name:"osSetTimer"},{addr:2148088256,type:"code",name:"alLoadParam"},{addr:2148088684,type:"code",name:"alRaw16Pull"},{addr:2148089608,type:"code",name:"alAdpcmPull"},{addr:2148090272,type:"code",name:"alLoadParam"},{addr:2148090700,type:"code",name:"__load_o_0108"},{addr:2148091088,type:"code",name:"alAuxBusParam"},{addr:2148091136,type:"code",name:"alAuxBusPull"},{addr:2148091308,type:"code",name:"alAuxBusParam"},{addr:2148091360,type:"code",name:"alMainBusParam"},{addr:2148091408,type:"code",name:"alMainBusPull"},{addr:2148091680,type:"code",name:"alMainBusParam"},{addr:2148091728,type:"code",name:"alResampleParam"},{addr:2148091920,type:"code",name:"alResamplePull"},{addr:2148092220,type:"code",name:"alResampleParam"},{addr:2148092416,type:"code",name:"alSeqGetLoc"},{addr:2148092480,type:"code",name:"alSeqNewMarker"},{addr:2148092648,type:"code",name:"__seq_o_044C"},{addr:2148092756,type:"code",name:"alSeqSecToTicks"},{addr:2148092900,type:"code",name:"alSeqTicksToSec"},{addr:2148093008,type:"code",name:"__alSeqNextDelta"},{addr:2148093108,type:"code",name:"alSeqNextEvent"},{addr:2148093468,type:"code",name:"alSeqNew"},{addr:2148093644,type:"code",name:"alSeqSetLoc"},{addr:2148093700,type:"code",name:"__seq_o_011C"},{addr:2148093720,type:"code",name:"__seq_o_0040"},{addr:2148093768,type:"code",name:"__seq_o_0020"},{addr:2148093848,type:"code",name:"__seq_o_0104"},{addr:2148093936,type:"code",name:"alSynSetPriority"},{addr:2148093952,type:"code",name:"alSynAllocFX"},{addr:2148094112,type:"code",name:"__osAiDeviceBusy"},{addr:2148094144,type:"code",name:"__osSpDeviceBusy"},{addr:2148094176,type:"code",name:"__osSpGetStatus"},{addr:2148094192,type:"code",name:"__osSpSetStatus"},{addr:2148094208,type:"code",name:"__osSpSetPc"},{addr:2148094628,type:"code",name:"__osSiGetAccess"},{addr:2148094736,type:"code",name:"__osSiRelAccess"},{addr:2148094784,type:"code",name:"osPiGetCmdQueue"},{addr:2148097860,type:"code",name:"alFxNew"},{addr:2148099036,type:"code",name:"alEnvmixerNew"},{addr:2148099220,type:"code",name:"alLoadNew"},{addr:2148099396,type:"code",name:"alResampleNew"},{addr:2148099536,type:"code",name:"alAuxBusNew"},{addr:2148099628,type:"code",name:"alMainBusNew"},{addr:2148099720,type:"code",name:"alSaveNew"},{addr:2148099792,type:"code",name:"_ldexpf",desc:"multiply floating-point number by integral power of 2"},{addr:2148099828,type:"code",name:"_frexpf",desc:"convert floating-point number to fractional and integral components"},{addr:2148100052,type:"code",name:"alEnvmixerParam"},{addr:2148100264,type:"code",name:"alEnvmixerPull"},{addr:2148101072,type:"code",name:"alEnvmixerParam"},{addr:2148101284,type:"code",name:"__env_o_01E0"},{addr:2148102268,type:"code",name:"__env_o_0718"},{addr:2148102908,type:"code",name:"__env_o_027C"},{addr:2148103040,type:"code",name:"_doModFunc"},{addr:2148103180,type:"code",name:"alFxParamHdl"},{addr:2148103676,type:"code",name:"alFxParam"},{addr:2148103696,type:"code",name:"_filterBuffer"},{addr:2148103852,type:"code",name:"_loadOutputBuffer"},{addr:2148103924,type:"code",name:"alFxParam"},{addr:2148104388,type:"code",name:"_loadBuffer"},{addr:2148104440,type:"code",name:"__reverb_o_0178"},{addr:2148104756,type:"code",name:"_saveBuffer"},{addr:2148104976,type:"code",name:"__reverb_o_0154"},{addr:2148105124,type:"code",name:"alFxPull"},{addr:2148105344,type:"code",name:"__reverb_o_00C4"},{addr:2148105712,type:"code",name:"__reverb_o_024C"},{addr:2148105868,type:"code",name:"__reverb_o_05D0"},{addr:2148106016,type:"code",name:"alSaveParam"},{addr:2148106056,type:"code",name:"alSavePull"},{addr:2148106184,type:"code",name:"alSaveParam"},{addr:2148106224,type:"code",name:"__osPfsInodeCache"},{addr:2148106276,type:"code",name:"__osIdCheckSum"},{addr:2148106344,type:"code",name:"__osRepairPackId"},{addr:2148106480,type:"code",name:"__osPfsRWInode"},{addr:2148107092,type:"code",name:"__osCheckPackId"},{addr:2148107304,type:"code",name:"__osCheckId"},{addr:2148107448,type:"code",name:"__osGetId"},{addr:2148107488,type:"code",name:"__osGetId"},{addr:2148107908,type:"code",name:"__osCheckId"},{addr:2148107948,type:"code",name:"__osCheckPackId"},{addr:2148108092,type:"code",name:"__osPfsRWInode"},{addr:2148108304,type:"code",name:"__osRepairPackId"},{addr:2148108928,type:"code",name:"__osContRamRead"},{addr:2148109052,type:"code",name:"__osIdCheckSum"},{addr:2148109120,type:"code",name:"__osSumcalc"},{addr:2148109172,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148109173,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148109440,type:"code",name:"__osContRamWrite"},{addr:2148109984,type:"code",name:"__osContDataCrc"},{addr:2148110108,type:"code",name:"__osContAddressCrc"},{addr:2148110224,type:"code",name:"__osDevMgrMain"},{addr:2148111184,type:"code",name:"__osEPiRawReadIo"},{addr:2148111552,type:"code",name:"__osEPiRawWriteIo"},{addr:2148111920,type:"code",name:"osPfsChecker"},{addr:2148113744,type:"code",name:"__osPfsGetStatus"},{addr:2148113872,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148113984,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148114020,type:"code",name:"__osPfsGetStatus"},{addr:2148114132,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148114272,type:"code",name:"__osSpRawReadIo"},{addr:2148114352,type:"code",name:"__osSpRawWriteIo"},{addr:2148114432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148114512,type:"code",name:"__osSetGlobalIntMask"},{addr:2148114576,type:"code",name:"osYieldThread"},{addr:2148114656,type:"code",name:"alFilterNew"},{addr:2148114688,type:"code",name:"__osSpDeviceBusy"},{addr:2148277364,type:"data",name:"dma_table"},{addr:2148282356,type:"data",name:"rng_seed"},{addr:2148287312,type:"data",name:"model_info"},{addr:2148292986,type:"u16",name:"cur_board_scene_state",desc:"Determines how the board scene starts up when (re)loaded"},{addr:2148313792,type:"data",name:"jt_ai_logic",desc:"Jump table for 8003E9B0"},{addr:2148315232,type:"data",name:"jt_spacetype_to_turneffect",desc:"Jump table for space type to turn effect"},{addr:2148330124,type:"data",name:"__ALSndPlayer*sndp"},{addr:2148340464,type:"data",name:"main_fs_rom_location"},{addr:2148340468,type:"data",name:"main_fs_dir_count",desc:"Number of directories in main filesystem"},{addr:2148340480,type:"data",name:"main_fs_cur_dir_file_count",desc:"Count of files in directory being accessed"},{addr:2148360240,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148360256,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148368648,type:"data",name:"space_data",desc:"pointer to space data parsed from board def file"},{addr:2148368656,type:"data",name:"chain_data_addr",desc:"pointer to array of chain lengths and indices"},{addr:2148453156,type:"data",name:"debug_font_color",desc:"16 color values"},{addr:2148454722,type:"u16",name:"bank_coins",desc:"Coins in bank"},{addr:2148454724,type:"u16",name:"bank_stars",desc:"Stars in bank"},{addr:2148454728,type:"u16",name:"enabled_feature_flags"},{addr:2148455760,type:"u16",name:"max_objects",desc:"set from InitObjectSystem"},{addr:2148455878,type:"u16",name:"total_turns",desc:"Total game turns"},{addr:2148455880,type:"u16",name:"elapsed_turns",desc:"Elapsed turns"},{addr:2148455900,type:"u16",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148469236,type:"u32",name:"scene",desc:"Current scene"},{addr:2148478172,type:"u16",name:"hidden_block_space_index",desc:"Space index of hidden block"},{addr:2148479665,type:"u8",name:"p1_cpu_difficulty_1",desc:"Player 1 CPU difficulty"},{addr:2148479666,type:"u8",name:"p1_cpu_difficulty_2",desc:"Player 1 CPU difficulty"},{addr:2148479668,type:"u8",name:"p1_char",desc:"Player 1 character"},{addr:2148479672,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148479674,type:"s16",name:"p1_minigame_coins",desc:"Player 1 coins in current Mini-Game"},{addr:2148479676,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148479678,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148479680,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148479682,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148479684,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148479686,type:"u8",name:"p1_poisoned",desc:"Player 1 poisoned boolean"},{addr:2148479687,type:"u8",name:"p1_turn_status",desc:"Color based on type of space landed on"},{addr:2148479700,type:"u16",name:"p1_total_minigame_coins",desc:"Player 1 total Mini-Game coins collected"},{addr:2148479702,type:"u16",name:"p1_total_coins",desc:"Player 1 total coins collected"},{addr:2148479704,type:"u8",name:"p1_total_happening_spaces",desc:"Player 1 total number of Happening Spaces landed on"},{addr:2148479705,type:"u8",name:"p1_total_red_spaces",desc:"Player 1 total number of red spaces landed on"},{addr:2148479706,type:"u8",name:"p1_total_blue_spaces",desc:"Player 1 total number of blue spaces landed on"},{addr:2148479707,type:"u8",name:"p1_total_minigame_spaces",desc:"Player 1 total number of Mini-Game spaces landed on"},{addr:2148479708,type:"u8",name:"p1_total_chance_spaces",desc:"Player 1 total number of Chance Time spaces landed on"},{addr:2148479709,type:"u8",name:"p1_total_mushroom_spaces",desc:"Player 1 total number of Mushroom spaces landed on"},{addr:2148479710,type:"u8",name:"p1_total_bowser_spaces",desc:"Player 1 total number of Bowser spaces landed on"},{addr:2148479713,type:"u8",name:"p2_cpu_difficulty_1",desc:"Player 2 CPU difficulty"},{addr:2148479714,type:"u8",name:"p2_cpu_difficulty_2",desc:"Player 2 CPU difficulty"},{addr:2148479716,type:"u8",name:"p2_char",desc:"Player 2 character"},{addr:2148479720,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148479722,type:"s16",name:"p2_minigame_coins",desc:"Player 2 coins in current Mini-Game"},{addr:2148479724,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148479726,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148479728,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148479730,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148479732,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148479734,type:"u8",name:"p2_poisoned",desc:"Player 2 poisoned boolean"},{addr:2148479735,type:"u8",name:"p2_turn_status",desc:"Color based on type of spaced landed on"},{addr:2148479748,type:"u16",name:"p2_total_minigame_coins",desc:"Player 2 total Mini-Game coins collected"},{addr:2148479750,type:"u16",name:"p2_total_coins",desc:"Player 2 total coins collected"},{addr:2148479752,type:"u8",name:"p2_total_happening_spaces",desc:"Player 2 total number of Happening spaces landed on"},{addr:2148479753,type:"u8",name:"p2_total_red_spaces",desc:"Player 2 total number of red spaces landed on"},{addr:2148479754,type:"u8",name:"p2_total_blue_spaces",desc:"Player 2 total number of blue spaces landed on"},{addr:2148479755,type:"u8",name:"p2_total_minigame_spaces",desc:"Player 2 total number of Mini-Game spaces landed on"},{addr:2148479756,type:"u8",name:"p2_total_chance_spaces",desc:"Player 2 total number of Chance Time spaces landed on"},{addr:2148479757,type:"u8",name:"p2_total_mushroom_spaces",desc:"Player 2 total number of Mushroom spaces landed on"},{addr:2148479758,type:"u8",name:"p2_total_bowser_spaces",desc:"Player 2 total number of Bowser spaces landed on"},{addr:2148479761,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479762,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479764,type:"u8",name:"p3_char",desc:"Player 3 character"},{addr:2148479768,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148479770,type:"s16",name:"p3_minigame_coins",desc:"Player 3 coins in current Mini-Game"},{addr:2148479772,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148479774,type:"u16",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148479776,type:"u16",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148479778,type:"u16",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148479780,type:"u16",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148479782,type:"u8",name:"p3_poisoned",desc:"Player 3 poisoned boolean"},{addr:2148479783,type:"u8",name:"p3_turn_status",desc:"Color based on type of space landed on"},{addr:2148479796,type:"u16",name:"p3_total_minigame_coins",desc:"Player 3 total Mini-Game coins collected"},{addr:2148479798,type:"u16",name:"p3_total_coins",desc:"Player 3 total coins collected"},{addr:2148479800,type:"u8",name:"p3_total_happening_spaces",desc:"Player 3 total number of Happening spaces landed on"},{addr:2148479801,type:"u8",name:"p3_total_red_spaces",desc:"Player 3 total number of red spaces landed on"},{addr:2148479802,type:"u8",name:"p3_total_blue_spaces",desc:"Player 3 total number of blue spaces landed on"},{addr:2148479803,type:"u8",name:"p3_total_minigame_spaces",desc:"Player 3 total number of Mini-Game spaces landed on"},{addr:2148479804,type:"u8",name:"p3_total_chance_spaces",desc:"Player 3 total number of Chance Time spaces landed on"},{addr:2148479805,type:"u8",name:"p3_total_mushroom_spaces",desc:"Player 3 total number of Mushroom spaces landed on"},{addr:2148479806,type:"u8",name:"p3_total_bowser_spaces",desc:"Player 3 total number of Bowser spaces landed on"},{addr:2148479809,type:"u8",name:"p3_cpu_difficulty_1",desc:"Player 3 CPU difficulty"},{addr:2148479810,type:"u8",name:"p3_cpu_difficulty_2",desc:"Player 3 CPU difficulty"},{addr:2148479812,type:"u8",name:"p4_char",desc:"Player 4 character"},{addr:2148479816,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148479818,type:"s16",name:"p4_minigame_coins",desc:"Player 4 coins in current Mini-Game"},{addr:2148479820,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148479822,type:"u16",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148479824,type:"u16",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148479826,type:"u16",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148479828,type:"u16",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148479830,type:"u8",name:"p4_poisoned",desc:"Player 4 poisoned boolean"},{addr:2148479831,type:"u8",name:"p4_turn_status",desc:"Color based on type of space landed on"},{addr:2148479844,type:"u16",name:"p4_total_minigame_coins",desc:"Player 4 total Mini-Game coins collected"},{addr:2148479846,type:"u16",name:"p4_total_coins",desc:"Player 4 total coins collected"},{addr:2148479848,type:"u8",name:"p4_total_happening_spaces",desc:"Player 4 total number of Happening spaces landed on"},{addr:2148479849,type:"u8",name:"p4_total_red_spaces",desc:"Player 4 total number of red spaces landed on"},{addr:2148479850,type:"u8",name:"p4_total_blue_spaces",desc:"Player 4 total number of blue spaces landed on"},{addr:2148479851,type:"u8",name:"p4_total_minigame_spaces",desc:"Player 4 total number of Mini-Game spaces landed on"},{addr:2148479852,type:"u8",name:"p4_total_chance_spaces",desc:"Player 4 total number of Chance Time spaces landed on"},{addr:2148479853,type:"u8",name:"p4_total_mushroom_spaces",desc:"Player 4 total number of Mushroom spaces landed on"},{addr:2148479854,type:"u8",name:"p4_total_bowser_spaces",desc:"Player 4 total number of Bowser spaces landed on"}]}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){t.default=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147579520,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147579904,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147584764,type:"code",name:"GetRandomByte"},{addr:2147749248,type:"code",name:"MakePermHeap",desc:"A0=heap_addr"},{addr:2147749284,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147749320,type:"code",name:"FreePerm",desc:"A0=addr"},{addr:2147749456,type:"code",name:"MakeTempHeap",desc:"A0=heap_addr"},{addr:2147749492,type:"code",name:"MallocTemp",desc:"A0=size"},{addr:2147749528,type:"code",name:"FreeTemp",desc:"A0=addr"},{addr:2147797556,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2147828328,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2147830668,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2147833484,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2147840844,type:"code",name:"SetNextChainAndSpace"},{addr:2147867696,type:"code",name:"GetCurrentPlayerIndex"},{addr:2147867708,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2147867780,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2147867808,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2147867848,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2147867960,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2147882164,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2147910752,type:"code",name:"MakeHeap",desc:"A0=addr"},{addr:2147910784,type:"code",name:"Malloc",desc:"A0=heap pointer (main or temp)"},{addr:2147910924,type:"code",name:"Free",desc:"A0=allocated heap pointer"},{addr:2147998176,type:"code",name:"SleepProcess"},{addr:2147998276,type:"code",name:"SleepVProcess"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Permanent heap pointer"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Temporary heap address"},{addr:2148084464,type:"code",name:"alSynStartVoiceParams"},{addr:2148084880,type:"code",name:"alSynSetPan"},{addr:2148101828,type:"code",name:"__leoCommand"},{addr:2148105040,type:"code",name:"__leoAnalize_asic_status"},{addr:2148106224,type:"code",name:"__leoSend_asic_cmd_w"},{addr:2148106280,type:"code",name:"__leoSend_asic_cmd_w_nochkDiskChange"},{addr:2148106596,type:"code",name:"__leoRecal_w"},{addr:2148106736,type:"code",name:"__leoSeek_w"},{addr:2148106880,type:"code",name:"__leoChk_err_retry"},{addr:2148107152,type:"code",name:"__leoChk_cur_drvmode"},{addr:2148107424,type:"code",name:"__LEOrw_flags"},{addr:2148107426,type:"code",name:"__LEOdma_que"},{addr:2148107450,type:"code",name:"__LEOPiDmaParam"},{addr:2148107474,type:"code",name:"__LEOtgt_param"},{addr:2148107490,type:"code",name:"__LEOasic_seq_ctl_shadow"},{addr:2148107494,type:"code",name:"__leoSet_mseq"},{addr:2148107860,type:"code",name:"__leoClr_reset"},{addr:2148107972,type:"code",name:"__LEOcommand_que"},{addr:2148107996,type:"code",name:"__leoClr_queue"},{addr:2148108144,type:"code",name:"__leoLba_to_phys"},{addr:2148108736,type:"code",name:"LeoDriveExist"},{addr:2148109280,type:"code",name:"__leoActive"},{addr:2148109284,type:"code",name:"LeoReadDiskID"},{addr:2148109376,type:"code",name:"__leoActive"},{addr:2148109380,type:"code",name:"LeoReadWrite"},{addr:2148109524,type:"code",name:"__LEO_country_code"},{addr:2148109528,type:"code",name:"__osShutdown"},{addr:2148109836,type:"code",name:"__LeoBootGame2"},{addr:2148110360,type:"code",name:"LeoBootGame"},{addr:2148110672,type:"code",name:"__LeoBootGame3"},{addr:2148117912,type:"code",name:"__leoInquiry"},{addr:2148118084,type:"code",name:"__leoMode_sel"},{addr:2148118260,type:"code",name:"__leoStart_stop"},{addr:2148118496,type:"code",name:"__LEORAM_BYTE"},{addr:2148118524,type:"code",name:"__LEOdisk_type"},{addr:2148118525,type:"code",name:"__LEORAM_START_LBA"},{addr:2148118543,type:"code",name:"__leoRd_capacity"},{addr:2148119508,type:"code",name:"__LEOtgt_param"},{addr:2148119520,type:"code",name:"leoRezero"},{addr:2148119668,type:"code",name:"leoSeek"},{addr:2148119860,type:"code",name:"__leoTest_unit_rdy"},{addr:2148123936,type:"code",name:"__osPiTable"},{addr:2148123940,type:"code",name:"osLeoDiskInit"},{addr:2148124092,type:"code",name:"__osDiskHandle"},{addr:2148124096,type:"code",name:"__LeoDiskHandle"},{addr:2148124448,type:"code",name:"osEepromWrite"},{addr:2148124808,type:"code",name:"__conteepwrite_o_00AC"},{addr:2148124976,type:"code",name:"__osEepStatus"},{addr:2148125392,type:"code",name:"osEepromProbe"},{addr:2148125520,type:"code",name:"osEepromLongWrite"},{addr:2148125760,type:"code",name:"osEepromLongRead"},{addr:2148127548,type:"code",name:"__osEnqueueAndYield"},{addr:2148127884,type:"code",name:"__osPopThread"},{addr:2148128304,type:"code",name:"__osDisableInt"},{addr:2148128416,type:"code",name:"__osRestoreInt"},{addr:2148128448,type:"code",name:"osSetIntMask"},{addr:2148128608,type:"code",name:"__osSetHWIntrRoutine"},{addr:2148128704,type:"code",name:"osCreatePiManager"},{addr:2148129104,type:"code",name:"__Dom2SpeedParam"},{addr:2148129112,type:"code",name:"__osPiTable"},{addr:2148129116,type:"code",name:"__osPiDevMgr"},{addr:2148129220,type:"code",name:"__Dom1SpeedParam"},{addr:2148129336,type:"code",name:"__osCurrentHandle"},{addr:2148129344,type:"code",name:"__osPiTable"},{addr:2148129348,type:"code",name:"__osPiDevMgr"},{addr:2148129600,type:"code",name:"osEPiWriteIo"},{addr:2148129696,type:"code",name:"osEPiReadIo"},{addr:2148129792,type:"code",name:"osEPiStartDma"},{addr:2148129952,type:"code",name:"__CartRomHandle"},{addr:2148130068,type:"code",name:"osCartRomInit"},{addr:2148130336,type:"code",name:"__osDevMgrMain"},{addr:2148131296,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131336,type:"code",name:"__osPiGetAccess"},{addr:2148131380,type:"code",name:"__osPiGetAccess"},{addr:2148131444,type:"code",name:"__osPiAccessQueue"},{addr:2148131468,type:"code",name:"__osPiCreateAccessQueue"},{addr:2148131488,type:"code",name:"__osPiRelAccess"},{addr:2148131536,type:"code",name:"osAiGetLength"},{addr:2148131552,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2148132e3,type:"code",name:"alBnkfNew"},{addr:2148132148,type:"code",name:"alSeqFileNew"},{addr:2148132212,type:"code",name:"__bnkf_o_0098"},{addr:2148132384,type:"code",name:"__bnkf_o_0118"},{addr:2148132532,type:"code",name:"__bnkf_o_01D8"},{addr:2148132620,type:"code",name:"__bnkf_o_0258"},{addr:2148132720,type:"code",name:"alEvtqFlushType"},{addr:2148132844,type:"code",name:"alEvtqNextEvent"},{addr:2148132896,type:"code",name:"alEvtqFlush"},{addr:2148132996,type:"code",name:"alEvtqPostEvent"},{addr:2148133016,type:"code",name:"alEvtqPostEvent"},{addr:2148133284,type:"code",name:"alEvtqNextEvent"},{addr:2148133384,type:"code",name:"alEvtqFlushType"},{addr:2148133436,type:"code",name:"alEvtqNew"},{addr:2148133660,type:"code",name:"alLink"},{addr:2148133692,type:"code",name:"alUnlink"},{addr:2148133744,type:"code",name:"alHeapInit"},{addr:2148133808,type:"code",name:"alHeapDBAlloc"},{addr:2148133888,type:"code",name:"alCopy"},{addr:2148133952,type:"code",name:"alCSeqGetLoc"},{addr:2148134068,type:"code",name:"alCSeqSetLoc"},{addr:2148134184,type:"code",name:"alCSeqNewMarker"},{addr:2148134220,type:"code",name:"alCSeqNextEvent"},{addr:2148134464,type:"code",name:"__alCSeqNextDelta"},{addr:2148134592,type:"code",name:"__cseq_o_0194"},{addr:2148135140,type:"code",name:"__alCSeqNextDelta"},{addr:2148135512,type:"code",name:"alCSeqNew"},{addr:2148136404,type:"code",name:"__cseq_o_02A4"},{addr:2148136588,type:"code",name:"__cseq_o_0088"},{addr:2148136704,type:"code",name:"alSeqpDelete"},{addr:2148136736,type:"code",name:"alSeqpGetChlFXMix"},{addr:2148136768,type:"code",name:"alSeqpGetChlPan"},{addr:2148136800,type:"code",name:"alSeqpGetChlVol"},{addr:2148136832,type:"code",name:"alSeqpGetChlProgram"},{addr:2148136960,type:"code",name:"alCSPGetTempo"},{addr:2148137008,type:"code",name:"alSeqpGetState"},{addr:2148137024,type:"code",name:"alSeqpPlay"},{addr:2148137072,type:"code",name:"alSeqpSetBank"},{addr:2148137120,type:"code",name:"alSeqpSetSeq"},{addr:2148137168,type:"code",name:"alSeqpSetTempo"},{addr:2148137248,type:"code",name:"alSeqpSetVol"},{addr:2148137296,type:"code",name:"alSeqpStop"},{addr:2148137344,type:"code",name:"__CSPPostNextSeqEvent"},{addr:2148137460,type:"code",name:"alCSPNew"},{addr:2148138936,type:"code",name:"__csplayer_o_046C"},{addr:2148139052,type:"code",name:"__csplayer_o_01D0"},{addr:2148139308,type:"code",name:"__csplayer_o_03E0"},{addr:2148141448,type:"code",name:"__csplayer_o_03F4"},{addr:2148141848,type:"code",name:"__csplayer_o_115C"},{addr:2148141992,type:"code",name:"__csplayer_o_05B4"},{addr:2148142048,type:"code",name:"alSndpDelete"},{addr:2148142096,type:"code",name:"alSndpAllocate"},{addr:2148142288,type:"code",name:"alSndpDeallocate"},{addr:2148142368,type:"code",name:"alSndpSetSound"},{addr:2148142384,type:"code",name:"alSndpPlay"},{addr:2148142480,type:"code",name:"alSndpStop"},{addr:2148142560,type:"code",name:"alSndpGetState"},{addr:2148142592,type:"code",name:"alSndpSetPitch"},{addr:2148142672,type:"code",name:"alSndpSetPriority"},{addr:2148142720,type:"code",name:"alSndpSetVol"},{addr:2148142800,type:"code",name:"alSndpSetPan"},{addr:2148142880,type:"code",name:"alSndpSetFXMix"},{addr:2148143252,type:"code",name:"alAudioFrame"},{addr:2148143684,type:"code",name:"alSynNew"},{addr:2148144176,type:"code",name:"__synthesizer_o_0440"},{addr:2148144324,type:"code",name:"__synthesizer_o_0370"},{addr:2148144472,type:"code",name:"__synthesizer_o_032C"},{addr:2148144560,type:"code",name:"alSynDelete"},{addr:2148144576,type:"code",name:"alSynAddPlayer"},{addr:2148144656,type:"code",name:"alSynRemovePlayer"},{addr:2148144816,type:"code",name:"alSynFreeVoice"},{addr:2148144976,type:"code",name:"alSynAllocVoice"},{addr:2148145160,type:"code",name:"alSynAllocVoice"},{addr:2148145272,type:"code",name:"__synallocvoice_o_0048"},{addr:2148145456,type:"code",name:"alSynStopVoice"},{addr:2148145584,type:"code",name:"alSynStartVoice"},{addr:2148145744,type:"code",name:"alSynSetPitch"},{addr:2148145888,type:"code",name:"alSynSetVol"},{addr:2148146080,type:"code",name:"alSynSetFXMix"},{addr:2148146240,type:"code",name:"alSynAllocFX"},{addr:2148146400,type:"code",name:"alCents2Ratio"},{addr:2148146496,type:"code",name:"osInvalDCache"},{addr:2148146672,type:"code",name:"osInvalICache"},{addr:2148146800,type:"code",name:"osWritebackDCache"},{addr:2148146928,type:"code",name:"osWritebackDCacheAll"},{addr:2148146976,type:"code",name:"osContGetReadData"},{addr:2148147132,type:"code",name:"osContStartReadData"},{addr:2148147268,type:"code",name:"__contreaddata_o_0028"},{addr:2148148336,type:"code",name:"osVirtualToPhysical"},{addr:2148148432,type:"code",name:"cosf"},{addr:2148148768,type:"code",name:"guLookAt"},{addr:2148149668,type:"code",name:"guLookAtF"},{addr:2148150576,type:"code",name:"guLookAtHilite"},{addr:2148150788,type:"code",name:"guLookAtHiliteF"},{addr:2148153232,type:"code",name:"guLookAtReflect"},{addr:2148153340,type:"code",name:"guLookAtReflectF"},{addr:2148154924,type:"code",name:"guMtxCatF"},{addr:2148155152,type:"code",name:"guMtxXFML"},{addr:2148155292,type:"code",name:"guMtxCatL"},{addr:2148155408,type:"code",name:"guMtxF2L"},{addr:2148155560,type:"code",name:"guMtxL2F"},{addr:2148155648,type:"code",name:"guMtxIdentF"},{addr:2148155728,type:"code",name:"guMtxIdentF"},{addr:2148156048,type:"code",name:"guOrtho"},{addr:2148156380,type:"code",name:"guOrthoF"},{addr:2148156688,type:"code",name:"guPerspective"},{addr:2148157144,type:"code",name:"guPerspectiveF"},{addr:2148157584,type:"code",name:"guRandom",desc:"Generates a pseudo-random number"},{addr:2148157632,type:"code",name:"guRotate"},{addr:2148158008,type:"code",name:"guRotateF"},{addr:2148158368,type:"code",name:"guRotateRPY"},{addr:2148158764,type:"code",name:"guRotateRPYF"},{addr:2148159168,type:"code",name:"guScale"},{addr:2148159292,type:"code",name:"guScaleF"},{addr:2148159392,type:"code",name:"sinf"},{addr:2148159808,type:"code",name:"guTranslate"},{addr:2148159920,type:"code",name:"guTranslateF"},{addr:2148160016,type:"code",name:"bcopy"},{addr:2148160816,type:"code",name:"bzero"},{addr:2148160976,type:"code",name:"memcpy"},{addr:2148161016,type:"code",name:"strlen"},{addr:2148161040,type:"code",name:"strlen"},{addr:2148161052,type:"code",name:"strchr"},{addr:2148161076,type:"code",name:"memcpy"},{addr:2148161120,type:"code",name:"sprintf"},{addr:2148161264,type:"code",name:"rmonPrintf",desc:"no-op in released ROM"},{addr:2148161284,type:"code",name:"osSyncPrintf",desc:"no-op in released ROM"},{addr:2148161312,type:"code",name:"osCreateMesgQueue"},{addr:2148161360,type:"code",name:"osJamMesg"},{addr:2148161680,type:"code",name:"osRecvMesg"},{addr:2148161984,type:"code",name:"osSendMesg"},{addr:2148162288,type:"code",name:"osSetEventMesg"},{addr:2148162464,type:"code",name:"__osSetCause"},{addr:2148162480,type:"code",name:"__osSetCompare"},{addr:2148162496,type:"code",name:"__osSetCount"},{addr:2148162512,type:"code",name:"__osSetSR"},{addr:2148162528,type:"code",name:"osSpTaskStartGo"},{addr:2148162572,type:"code",name:"osSpTaskLoad"},{addr:2148163104,type:"code",name:"osSpTaskYield"},{addr:2148163136,type:"code",name:"osSpTaskYielded"},{addr:2148163216,type:"code",name:"__osSiRawStartDma"},{addr:2148163476,type:"code",name:"__osSiGetAccess"},{addr:2148163584,type:"code",name:"__osSiRelAccess"},{addr:2148163632,type:"code",name:"osCreateThread"},{addr:2148164064,type:"code",name:"osGetThreadPri"},{addr:2148164096,type:"code",name:"osSetThreadPri"},{addr:2148164304,type:"code",name:"osStartThread"},{addr:2148164592,type:"code",name:"osStopThread"},{addr:2148164784,type:"code",name:"__osDequeueThread"},{addr:2148164836,type:"code",name:"__osFaultedThread"},{addr:2148164840,type:"code",name:"__osRunningThread"},{addr:2148164844,type:"code",name:"__osActiveQueue"},{addr:2148164848,type:"code",name:"osYieldThread"},{addr:2148164852,type:"code",name:"__osThreadTail"},{addr:2148164928,type:"code",name:"osGetTime"},{addr:2148165072,type:"code",name:"osSetTimer"},{addr:2148165632,type:"code",name:"__osSetTimerIntr"},{addr:2148165728,type:"code",name:"__osInsertTimer"},{addr:2148166e3,type:"code",name:"__osProbeTLB"},{addr:2148166192,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2148167152,type:"code",name:"osViSetEvent"},{addr:2148167248,type:"code",name:"osViSetMode"},{addr:2148167328,type:"code",name:"osViSetSpecialFeatures"},{addr:2148167696,type:"code",name:"osViSetYScale"},{addr:2148167776,type:"code",name:"osViSwapBuffer"},{addr:2148167856,type:"code",name:"__osViSwapContext"},{addr:2148168640,type:"code",name:"osViBlack"},{addr:2148168736,type:"code",name:"osMotorInit"},{addr:2148169320,type:"code",name:"__osMotorAccess"},{addr:2148169648,type:"code",name:"__osPfsSelectBank"},{addr:2148169760,type:"code",name:"__osContRamRead"},{addr:2148170248,type:"code",name:"__osPfsLastChannel"},{addr:2148170256,type:"code",name:"__osContRamWrite"},{addr:2148170880,type:"code",name:"osAfterPreNMI"},{addr:2148170912,type:"code",name:"osGetMemSize"},{addr:2148171824,type:"code",name:"osEepromRead"},{addr:2148172232,type:"code",name:"__conteepread_o_00A8"},{addr:2148172368,type:"code",name:"__osSetGlobalIntMask"},{addr:2148172432,type:"code",name:"__osResetGlobalIntMask"},{addr:2148172512,type:"code",name:"__osPiRawStartDma"},{addr:2148172720,type:"code",name:"osPiGetCmdQueue"},{addr:2148172752,type:"code",name:"__osEPiRawReadIo"},{addr:2148173104,type:"code",name:"alHeapCheck"},{addr:2148173120,type:"code",name:"__osEPiRawWriteIo"},{addr:2148173488,type:"code",name:"__osAiDeviceBusy"},{addr:2148173520,type:"code",name:"_init_lpfilter"},{addr:2148173684,type:"code",name:"alFxNew"},{addr:2148174860,type:"code",name:"alEnvmixerNew"},{addr:2148175044,type:"code",name:"alLoadNew"},{addr:2148175220,type:"code",name:"alResampleNew"},{addr:2148175360,type:"code",name:"alAuxBusNew"},{addr:2148175452,type:"code",name:"alMainBusNew"},{addr:2148175544,type:"code",name:"alSaveNew"},{addr:2148175616,type:"code",name:"alLoadParam"},{addr:2148176044,type:"code",name:"alRaw16Pull"},{addr:2148176968,type:"code",name:"alAdpcmPull"},{addr:2148177632,type:"code",name:"alLoadParam"},{addr:2148178060,type:"code",name:"__load_o_0108"},{addr:2148178448,type:"code",name:"alAuxBusParam"},{addr:2148178496,type:"code",name:"alAuxBusPull"},{addr:2148178668,type:"code",name:"alAuxBusParam"},{addr:2148178720,type:"code",name:"_ldexpf"},{addr:2148178756,type:"code",name:"_frexpf"},{addr:2148178980,type:"code",name:"alEnvmixerParam"},{addr:2148179192,type:"code",name:"alEnvmixerPull"},{addr:214818e4,type:"code",name:"alEnvmixerParam"},{addr:2148180212,type:"code",name:"__env_o_01E0"},{addr:2148181196,type:"code",name:"__env_o_0718"},{addr:2148181836,type:"code",name:"__env_o_027C"},{addr:2148181968,type:"code",name:"alFilterNew"},{addr:2148182e3,type:"code",name:"alMainBusParam"},{addr:2148182048,type:"code",name:"alMainBusPull"},{addr:2148182320,type:"code",name:"alMainBusParam"},{addr:2148182368,type:"code",name:"alResampleParam"},{addr:2148182560,type:"code",name:"alResamplePull"},{addr:2148182860,type:"code",name:"alResampleParam"},{addr:2148183056,type:"code",name:"_doModFunc"},{addr:2148183196,type:"code",name:"alFxParamHdl"},{addr:2148183692,type:"code",name:"alFxParam"},{addr:2148183712,type:"code",name:"_filterBuffer"},{addr:2148183868,type:"code",name:"_loadOutputBuffer"},{addr:2148183940,type:"code",name:"alFxParam"},{addr:2148184404,type:"code",name:"_loadBuffer"},{addr:2148184456,type:"code",name:"__reverb_o_0178"},{addr:2148184772,type:"code",name:"_saveBuffer"},{addr:2148184992,type:"code",name:"__reverb_o_0154"},{addr:2148185140,type:"code",name:"alFxPull"},{addr:2148185360,type:"code",name:"__reverb_o_00C4"},{addr:2148185728,type:"code",name:"__reverb_o_024C"},{addr:2148185884,type:"code",name:"__reverb_o_05D0"},{addr:2148186032,type:"code",name:"alSaveParam"},{addr:2148186072,type:"code",name:"alSavePull"},{addr:2148186200,type:"code",name:"alSaveParam"},{addr:2148186240,type:"code",name:"__resetPerfChanState"},{addr:2148186368,type:"code",name:"__setInstChanState"},{addr:2148186452,type:"code",name:"__lookupVoice"},{addr:2148186536,type:"code",name:"__vsPan"},{addr:2148186604,type:"code",name:"__mapVoice"},{addr:2148186684,type:"code",name:"__lookupSoundQuick"},{addr:2148186896,type:"code",name:"__initFromBank"},{addr:2148187068,type:"code",name:"__seqpReleaseVoice"},{addr:2148187360,type:"code",name:"__voiceNeedsNoteKill"},{addr:2148187536,type:"code",name:"__postNextSeqEvent"},{addr:2148187744,type:"code",name:"__vsDelta"},{addr:2148187772,type:"code",name:"__vsVol"},{addr:2148187864,type:"code",name:"__seqplayer_o_0420"},{addr:2148187884,type:"code",name:"__unmapVoice"},{addr:2148187984,type:"code",name:"__seqpStopOsc"},{addr:2148188072,type:"code",name:"__seqplayer_o_01DC"},{addr:2148188224,type:"code",name:"__initChanState"},{addr:2148188404,type:"code",name:"alSeqpNew"},{addr:2148188584,type:"code",name:"__seqplayer_o_03EC"},{addr:2148190672,type:"code",name:"__seqplayer_o_0400"},{addr:2148190780,type:"code",name:"__seqplayer_o_0A54"},{addr:2148190860,type:"code",name:"__seqplayer_o_0244"},{addr:2148190960,type:"code",name:"__seqplayer_o_0D18"},{addr:2148191044,type:"code",name:"__seqplayer_o_0A1C"},{addr:2148191256,type:"code",name:"__seqplayer_o_0284"},{addr:2148191368,type:"code",name:"__seqplayer_o_0320"},{addr:2148191396,type:"code",name:"__seqplayer_o_0C7C"},{addr:2148191464,type:"code",name:"__seqplayer_o_04F8"},{addr:2148191756,type:"code",name:"__seqplayer_o_04E0"},{addr:2148191932,type:"code",name:"__seqplayer_o_0600"},{addr:2148192104,type:"code",name:"__seqplayer_o_107C"},{addr:2148192188,type:"code",name:"__seqplayer_o_167C"},{addr:2148192316,type:"code",name:"__seqplayer_o_00BC"},{addr:2148192496,type:"code",name:"__seqplayer_o_0238"},{addr:2148192736,type:"code",name:"__seqplayer_o_05D8"},{addr:2148192800,type:"code",name:"alSynSetPriority"},{addr:2148192816,type:"code",name:"sqrtf",desc:"SQRT.S F0"},{addr:2148195664,type:"code",name:"osGetCount"},{addr:2148195728,type:"code",name:"__osSpDeviceBusy"},{addr:2148195760,type:"code",name:"__osSpGetStatus"},{addr:2148195776,type:"code",name:"__osSpSetStatus"},{addr:2148195792,type:"code",name:"__osSpSetPc"},{addr:2148195840,type:"code",name:"__osSpRawStartDma"},{addr:2148195984,type:"code",name:"__osSpRawReadIo"},{addr:2148196064,type:"code",name:"__osSpRawWriteIo"},{addr:2148196144,type:"code",name:"__osContDataCrc"},{addr:2148196252,type:"code",name:"__osContDataCrc"},{addr:2148196268,type:"code",name:"__osContAddressCrc"},{addr:2148196848,type:"code",name:"__osPfsGetInitData"},{addr:2148197028,type:"code",name:"__osPfsRequestData"},{addr:2148197192,type:"code",name:"__osPfsPifRam"},{addr:2148197228,type:"code",name:"__pfsisplug_o_004C"},{addr:2148197256,type:"code",name:"osPfsIsPlug"},{addr:2148197392,type:"code",name:"__pfsisplug_o_0094"},{addr:2148197584,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148197712,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148197824,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148197860,type:"code",name:"__osPfsGetStatus"},{addr:2148197972,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148198112,type:"code",name:"__osPfsInodeCache"},{addr:2148198232,type:"code",name:"__contpfs_o_0598"},{addr:2148198368,type:"code",name:"__osPfsRWInode"},{addr:2148198980,type:"code",name:"__contpfs_o_0578"},{addr:2148199192,type:"code",name:"__osCheckId"},{addr:2148199376,type:"code",name:"__osGetId"},{addr:2148199836,type:"code",name:"__osCheckPackId"},{addr:2148200192,type:"code",name:"__osRepairPackId"},{addr:2148202608,type:"code",name:"_Litob"},{addr:2148203200,type:"code",name:"_Ldtob"},{addr:2148204300,type:"code",name:"__xldtob_o_0080"},{addr:2148204452,type:"code",name:"__xldtob_o_0414"},{addr:2148205904,type:"code",name:"__osSpDeviceBusy"},{addr:2148209696,type:"code",name:"__divdi3"},{addr:2148210064,type:"code",name:"__udivdi3"},{addr:2148210096,type:"code",name:"__umoddi3"},{addr:2148397008,type:"data",name:"perm_heap_addr",desc:"Address of permanent heap"},{addr:2148397024,type:"data",name:"temp_heap_addr",desc:"Address of temporary heap"},{addr:2148407504,type:"u16",name:"num_board_spaces"},{addr:2148407506,type:"u16",name:"num_chains"},{addr:2148407508,type:"u32",name:"hydrated_space_data"},{addr:2148407512,type:"u32",name:"hydrated_chains"},{addr:2148407616,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148407648,type:"u32",name:"num_arrow_angles"},{addr:2148509246,type:"u16",name:"scene",desc:"Current scene number"},{addr:2148520648,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148520654,type:"u16",name:"p1_stars",desc:"Player 1 star count"},{addr:2148520656,type:"u16",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148520658,type:"u16",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148520660,type:"u16",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148520662,type:"u16",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148520665,type:"u8",name:"p1_item",desc:"Player 1 item"},{addr:2148520666,type:"u16",name:"p1_turn_status",desc:"Player 1 turn status"},{addr:2148520700,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148520706,type:"u16",name:"p2_stars",desc:"Player 2 star count"},{addr:2148520708,type:"u16",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148520710,type:"u16",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148520712,type:"u16",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148520714,type:"u16",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148520717,type:"u8",name:"p2_item",desc:"Player 2 item"},{addr:2148520718,type:"u16",name:"p2_turn_status",desc:"Player 2 turn status"},{addr:2148520752,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148520758,type:"u16",name:"p3_stars",desc:"Player 3 star count"},{addr:2148520769,type:"u8",name:"p3_item",desc:"Player 3 item"},{addr:2148520770,type:"u16",name:"p3_turn_statu",desc:"Player 3 turn status"},{addr:2148520804,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148520810,type:"u16",name:"p4_stars",desc:"Player 4 star count"},{addr:2148520821,type:"u8",name:"p4_item",desc:"Player 4 item"},{addr:2148520822,type:"u16",name:"p4_turn_status",desc:"Player 4 turn status"},{addr:2148520984,type:"u16",name:"hidden_space_primary",desc:"space index of primary hidden space"}]}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){t.default=[{addr:2147484416,type:"u32",name:"osTvType",desc:"0=PAL"},{addr:2147484420,type:"u32",name:"osRomType",desc:"0=cart"},{addr:2147484424,type:"data",name:"osRomBase",desc:"B0000000=cart"},{addr:2147484428,type:"data",name:"osResetType",desc:"0=cold reset"},{addr:2147484440,type:"data",name:"osMemSize",desc:"Size of RDRAM"},{addr:2147523600,type:"code",name:"ReadMainFS",desc:"Reads file from MainFS"},{addr:2147524204,type:"code",name:"FreeMainFS",desc:"Free's an allocated MainFS file pointer"},{addr:2147529068,type:"code",name:"GetRandomByte"},{addr:2147530808,type:"code",name:"LoadGraphics"},{addr:2147532780,type:"code",name:"InitEspriteSlot"},{addr:2147533188,type:"code",name:"CloseEsprite"},{addr:2147557920,type:"code",name:"InitCameras",desc:"A0=num_cameras"},{addr:2147614240,type:"code",name:"InitAnimations",desc:"A0=1"},{addr:2147702884,type:"code",name:"MallocPerm",desc:"A0=size"},{addr:2147774816,type:"code",name:"InitObjSys"},{addr:2147778208,type:"code",name:"InitProcess"},{addr:2147778568,type:"code",name:"EndProcess"},{addr:2147778856,type:"code",name:"LoadOverlay",desc:"A0=num"},{addr:2147789448,type:"code",name:"PlaySound",desc:"A0=index"},{addr:2147802492,type:"code",name:"DrawDebugText",desc:"A0=x_pos"},{addr:2147807248,type:"code",name:"SleepProcess"},{addr:2147807348,type:"code",name:"SleepVProcess",desc:"Sleep 1 frame"},{addr:2147808676,type:"code",name:"SaveFileEncode",desc:"A0=start addr of data to encode"},{addr:2147809868,type:"code",name:"SaveFileDecode",desc:"A0=start addr of portion to decode"},{addr:2147833456,type:"code",name:"FreeGraphics"},{addr:2147833872,type:"code",name:"ImgPackParse"},{addr:2147885032,type:"code",name:"InitFadeIn",desc:"A0=fade_type"},{addr:2147885136,type:"code",name:"InitFadeOut",desc:"A0=fade_type"},{addr:2147885244,type:"code",name:"GetFadeStatus",desc:"returns 0 when fade action is finished"},{addr:2147902720,type:"code",name:"setjmp"},{addr:2147902820,type:"code",name:"longjmp"},{addr:2147930096,type:"code",name:"alSeqpGetChlVol"},{addr:2147930128,type:"code",name:"alSeqpGetChlFXMix"},{addr:2147930160,type:"code",name:"alSeqpGetChlPan"},{addr:2147930192,type:"code",name:"alSeqpGetChlProgram"},{addr:2147930320,type:"code",name:"alSeqpGetState"},{addr:2147930336,type:"code",name:"alCSPGetTempo"},{addr:2147930384,type:"code",name:"alSeqpPlay"},{addr:2147930432,type:"code",name:"alSeqpSetBank"},{addr:2147930480,type:"code",name:"alSeqpSetSeq"},{addr:2147930528,type:"code",name:"alSeqpSetTempo"},{addr:2147930608,type:"code",name:"alSeqpSetVol"},{addr:2147930656,type:"code",name:"alSeqpStop"},{addr:2147933812,type:"code",name:"alEvtqPostEvent"},{addr:2147950624,type:"code",name:"osEepromWrite"},{addr:2147951228,type:"code",name:"__osEepStatus"},{addr:2147951776,type:"code",name:"osEepromLongWrite"},{addr:2147952016,type:"code",name:"osEepromLongRead"},{addr:2147952128,type:"code",name:"osSetIntMask"},{addr:2147952288,type:"code",name:"osCreatePiManager"},{addr:2147952748,type:"code",name:"__Dom2SpeedParam"},{addr:2147952756,type:"code",name:"__osPiTable"},{addr:2147952760,type:"code",name:"__osPiDevMgr"},{addr:2147952864,type:"code",name:"__Dom1SpeedParam"},{addr:2147952976,type:"code",name:"__osEPiRawStartDma"},{addr:2147952980,type:"code",name:"__osCurrentHandle"},{addr:2147952988,type:"code",name:"__osPiTable"},{addr:2147952992,type:"code",name:"__osPiDevMgr"},{addr:2147953472,type:"code",name:"osEPiStartDma"},{addr:2147953632,type:"code",name:"__CartRomHandle"},{addr:2147953748,type:"code",name:"osCartRomInit"},{addr:2147954016,type:"code",name:"__osDevMgrMain"},{addr:2147954976,type:"code",name:"__osPiRelAccess"},{addr:2147955016,type:"code",name:"__osPiGetAccess"},{addr:2147955060,type:"code",name:"__osPiGetAccess"},{addr:2147955124,type:"code",name:"__osPiAccessQueue"},{addr:2147955148,type:"code",name:"__osPiCreateAccessQueue"},{addr:2147955168,type:"code",name:"__osPiRelAccess"},{addr:2147955216,type:"code",name:"osAiGetLength"},{addr:2147955232,type:"code",name:"__osPiAccessQueueEnabled"},{addr:2147955680,type:"code",name:"_init_lpfilter"},{addr:2147955844,type:"code",name:"alFxNew"},{addr:2147957020,type:"code",name:"alEnvmixerNew"},{addr:2147957204,type:"code",name:"alLoadNew"},{addr:2147957380,type:"code",name:"alResampleNew"},{addr:2147957520,type:"code",name:"alAuxBusNew"},{addr:2147957612,type:"code",name:"alMainBusNew"},{addr:2147957704,type:"code",name:"alSaveNew"},{addr:2147957776,type:"code",name:"alLoadParam"},{addr:2147958204,type:"code",name:"alRaw16Pull"},{addr:2147959128,type:"code",name:"alAdpcmPull"},{addr:2147959792,type:"code",name:"alLoadParam"},{addr:2147960220,type:"code",name:"__load_o_0108"},{addr:2147960608,type:"code",name:"alAuxBusParam"},{addr:2147960656,type:"code",name:"alAuxBusPull"},{addr:2147960828,type:"code",name:"alAuxBusParam"},{addr:2147960880,type:"code",name:"alBnkfNew"},{addr:2147961028,type:"code",name:"alSeqFileNew"},{addr:2147961092,type:"code",name:"__bnkf_o_0098"},{addr:2147961264,type:"code",name:"__bnkf_o_0118"},{addr:2147961412,type:"code",name:"__bnkf_o_01D8"},{addr:2147961500,type:"code",name:"__bnkf_o_0258"},{addr:2147961600,type:"code",name:"_ldexpf"},{addr:2147961636,type:"code",name:"_frexpf"},{addr:2147961860,type:"code",name:"alEnvmixerParam"},{addr:2147962072,type:"code",name:"alEnvmixerPull"},{addr:2147962880,type:"code",name:"alEnvmixerParam"},{addr:2147963092,type:"code",name:"__env_o_01E0"},{addr:2147964076,type:"code",name:"__env_o_0718"},{addr:2147964716,type:"code",name:"__env_o_027C"},{addr:2147964848,type:"code",name:"alEvtqFlushType"},{addr:2147965024,type:"code",name:"alEvtqFlush"},{addr:2147965144,type:"code",name:"alEvtqPostEvent"},{addr:2147965412,type:"code",name:"alEvtqNextEvent"},{addr:2147965564,type:"code",name:"alEvtqNew"},{addr:2147965696,type:"code",name:"alFilterNew"},{addr:2147965728,type:"code",name:"alMainBusParam"},{addr:2147965776,type:"code",name:"alMainBusPull"},{addr:2147966048,type:"code",name:"alMainBusParam"},{addr:2147966096,type:"code",name:"alResampleParam"},{addr:2147966288,type:"code",name:"alResamplePull"},{addr:2147966588,type:"code",name:"alResampleParam"},{addr:2147971580,type:"code",name:"alLink"},{addr:2147971612,type:"code",name:"alUnlink"},{addr:2147971664,type:"code",name:"alHeapInit"},{addr:2147971728,type:"code",name:"alHeapDBAlloc"},{addr:2147971808,type:"code",name:"alCopy"},{addr:2147971872,type:"code",name:"alCSeqGetLoc"},{addr:2147971988,type:"code",name:"alCSeqSetLoc"},{addr:2147972104,type:"code",name:"alCSeqNewMarker"},{addr:2147972384,type:"code",name:"__alCSeqNextDelta"},{addr:2147972512,type:"code",name:"__cseq_o_0194"},{addr:2147972768,type:"code",name:"alCSeqGetTicks"},{addr:2147972776,type:"code",name:"alCSeqSecToTicks"},{addr:2147972936,type:"code",name:"alCSeqTicksToSec"},{addr:2147973060,type:"code",name:"__alCSeqNextDelta"},{addr:2147973188,type:"code",name:"alCSeqNextEvent"},{addr:2147973432,type:"code",name:"alCSeqNew"},{addr:2147974324,type:"code",name:"__cseq_o_02A4"},{addr:2147974508,type:"code",name:"__cseq_o_0088"},{addr:2147974916,type:"code",name:"alAudioFrame"},{addr:2147975348,type:"code",name:"alSynNew"},{addr:2147975840,type:"code",name:"__synthesizer_o_0440"},{addr:2147975988,type:"code",name:"__synthesizer_o_0370"},{addr:2147976136,type:"code",name:"__synthesizer_o_032C"},{addr:2147976224,type:"code",name:"alSynDelete"},{addr:2147976240,type:"code",name:"alSynAddPlayer"},{addr:2147976320,type:"code",name:"alSynFreeVoice"},{addr:2147976664,type:"code",name:"alSynAllocVoice"},{addr:2147976776,type:"code",name:"__synallocvoice_o_0048"},{addr:2147976960,type:"code",name:"alSynStopVoice"},{addr:2147977088,type:"code",name:"alSynStartVoice"},{addr:2147977248,type:"code",name:"alSynSetPitch"},{addr:2147977392,type:"code",name:"alSynSetVol"},{addr:2147977584,type:"code",name:"alSynSetFXMix"},{addr:2147977744,type:"code",name:"alSynSetPan"},{addr:2147977888,type:"code",name:"alSynAllocFX"},{addr:2147978048,type:"code",name:"alCents2Ratio"},{addr:2147978144,type:"code",name:"osInvalDCache"},{addr:2147978320,type:"code",name:"osInvalICache"},{addr:2147978448,type:"code",name:"osWritebackDCache"},{addr:2147978624,type:"code",name:"osContGetReadData"},{addr:2147978780,type:"code",name:"osContStartReadData"},{addr:2147978916,type:"code",name:"__contreaddata_o_0028"},{addr:2147979984,type:"code",name:"osVirtualToPhysical"},{addr:2147980080,type:"code",name:"cosf"},{addr:2147980416,type:"code",name:"guLookAt"},{addr:2147981316,type:"code",name:"guLookAtF"},{addr:2147982224,type:"code",name:"guLookAtHilite"},{addr:2147982436,type:"code",name:"guLookAtHiliteF"},{addr:2147984880,type:"code",name:"guLookAtReflect"},{addr:2147984988,type:"code",name:"guLookAtReflectF"},{addr:2147986400,type:"code",name:"guOrtho"},{addr:2147986732,type:"code",name:"guOrthoF"},{addr:2147987040,type:"code",name:"guPerspective"},{addr:2147987496,type:"code",name:"guPerspectiveF"},{addr:2147987936,type:"code",name:"guRandom"},{addr:2147987984,type:"code",name:"guRotateRPY"},{addr:2147988380,type:"code",name:"guRotateRPYF"},{addr:2147988784,type:"code",name:"sinf"},{addr:2147989200,type:"code",name:"__osRdbSend"},{addr:2147989736,type:"code",name:"__osRdb_IP6_Empty"},{addr:2147989744,type:"code",name:"__osRdb_IP6_CurSend"},{addr:2147989748,type:"code",name:"__osRdb_IP6_CurWrite"},{addr:2147989752,type:"code",name:"__osRdb_IP6_Ct"},{addr:2147989756,type:"code",name:"__osRdb_IP6_Size"},{addr:2147989760,type:"code",name:"__osRdb_IP6_Data"},{addr:2147989764,type:"code",name:"osInitRdb"},{addr:2147989872,type:"code",name:"bcopy"},{addr:2147990672,type:"code",name:"bzero"},{addr:2147990832,type:"code",name:"memcpy"},{addr:2147990896,type:"code",name:"strlen"},{addr:2147990976,type:"code",name:"sprintf"},{addr:2147991120,type:"code",name:"rmonPrintf",desc:"disabled behind flag"},{addr:2147991168,type:"code",name:"osSyncPrintf",desc:"disabled behind flag"},{addr:2147991296,type:"code",name:"osCreateMesgQueue"},{addr:2147991344,type:"code",name:"osJamMesg"},{addr:2147991664,type:"code",name:"osRecvMesg"},{addr:2147991968,type:"code",name:"osSendMesg"},{addr:2147992272,type:"code",name:"__osEventStateTab"},{addr:2147992392,type:"code",name:"osSetEventMesg"},{addr:2147992456,type:"code",name:"osSetEventMesg"},{addr:2147992512,type:"code",name:"osSpTaskStartGo"},{addr:2147992556,type:"code",name:"osSpTaskLoad"},{addr:2147993088,type:"code",name:"osSpTaskYield"},{addr:2147993120,type:"code",name:"osSpTaskYielded"},{addr:2147993200,type:"code",name:"__osSiRawStartDma"},{addr:2147993460,type:"code",name:"__osSiGetAccess"},{addr:2147993568,type:"code",name:"__osSiRelAccess"},{addr:2147993616,type:"code",name:"osCreateThread"},{addr:2147994096,type:"code",name:"osGetThreadPri"},{addr:2147994128,type:"code",name:"osSetThreadPri"},{addr:2147994336,type:"code",name:"osStartThread"},{addr:2147994624,type:"code",name:"__osDequeueThread"},{addr:2147994676,type:"code",name:"__osFaultedThread"},{addr:2147994680,type:"code",name:"__osRunningThread"},{addr:2147994684,type:"code",name:"__osActiveQueue"},{addr:2147994688,type:"code",name:"osYieldThread"},{addr:2147994692,type:"code",name:"__osThreadTail"},{addr:2147994768,type:"code",name:"osGetTime"},{addr:2147994912,type:"code",name:"osSetTimer"},{addr:2147995784,type:"code",name:"__osSetTimerIntr"},{addr:2147995912,type:"code",name:"__osInsertTimer"},{addr:2147996176,type:"code",name:"__osProbeTLB"},{addr:2147996368,type:"code",name:"osViGetCurrentFramebuffer"},{addr:2147997328,type:"code",name:"osViSetEvent"},{addr:2147997424,type:"code",name:"osViSetMode"},{addr:2147997504,type:"code",name:"osViSetSpecialFeatures"},{addr:2147997872,type:"code",name:"osViSetYScale"},{addr:2147997952,type:"code",name:"osViSwapBuffer"},{addr:2147998032,type:"code",name:"__osViSwapContext"},{addr:2147998816,type:"code",name:"osViBlack"},{addr:2147998912,type:"code",name:"guMtxIdentF"},{addr:2147999008,type:"code",name:"guMtxF2L"},{addr:2147999136,type:"code",name:"guMtxL2F"},{addr:2147999264,type:"code",name:"guMtxCatF"},{addr:2147999808,type:"code",name:"guMtxCatL"},{addr:2147999936,type:"code",name:"guRotate"},{addr:2148000312,type:"code",name:"guRotateF"},{addr:2148000672,type:"code",name:"osMotorInit"},{addr:2148001256,type:"code",name:"__osMotorAccess"},{addr:2148001584,type:"code",name:"__osPfsSelectBank"},{addr:2148001696,type:"code",name:"__osContRamRead"},{addr:2148002184,type:"code",name:"__osPfsLastChannel"},{addr:2148002192,type:"code",name:"__osContRamWrite"},{addr:2148002816,type:"code",name:"osAfterPreNMI"},{addr:2148002848,type:"code",name:"osGetMemSize"},{addr:2148004048,type:"code",name:"__checkHardware_kmc"},{addr:2148004108,type:"code",name:"__osInitialize_kmc"},{addr:2148005024,type:"code",name:"__checkHardware_msp"},{addr:2148005072,type:"code",name:"__osInitialize_msp"},{addr:2148005984,type:"code",name:"__osInitialize_emu"},{addr:2148006112,type:"code",name:"__osEepromRead16K"},{addr:2148006116,type:"code",name:"__osEepPifRam"},{addr:2148006180,type:"code",name:"osEepromRead"},{addr:2148006536,type:"code",name:"__conteepread_o_00B8"},{addr:2148009500,type:"code",name:"__osEnqueueAndYield"},{addr:2148009844,type:"code",name:"__osPopThread"},{addr:2148010304,type:"code",name:"__osDisableInt"},{addr:2148010416,type:"code",name:"__osRestoreInt"},{addr:2148010448,type:"code",name:"__osSetGlobalIntMask"},{addr:2148010512,type:"code",name:"__osResetGlobalIntMask"},{addr:2148010592,type:"code",name:"__osPiRawStartDma"},{addr:2148010800,type:"code",name:"osPiGetCmdQueue"},{addr:2148010832,type:"code",name:"__osEPiRawReadIo"},{addr:2148011184,type:"code",name:"alHeapCheck"},{addr:2148011200,type:"code",name:"__osEPiRawWriteIo"},{addr:2148011568,type:"code",name:"osPiWriteIo"},{addr:2148011648,type:"code",name:"osPiReadIo"},{addr:2148011728,type:"code",name:"__osAiDeviceBusy"},{addr:2148011760,type:"code",name:"__osThreadSave"},{addr:2148012464,type:"code",name:"__osThprofStack"},{addr:2148012468,type:"code",name:"__osThprofHeap"},{addr:2148012608,type:"code",name:"sqrtf"},{addr:2148012624,type:"code",name:"__osRdb_Read_Data_Ct"},{addr:2148012628,type:"code",name:"__osRdb_Read_Data_Buf"},{addr:2148012632,type:"code",name:"osReadHost"},{addr:2148014272,type:"code",name:"MonitorInitBreak"},{addr:2148014304,type:"code",name:"__isExp"},{addr:2148014628,type:"code",name:"__isExpJP"},{addr:2148015540,type:"code",name:"__osThprofCount"},{addr:2148015544,type:"code",name:"__osThprofLastTimer"},{addr:2148015548,type:"code",name:"osThreadProfileCallback"},{addr:2148015680,type:"code",name:"__osThprofFunc"},{addr:2148015684,type:"code",name:"__osThprofFlag"},{addr:2148017296,type:"code",name:"__osGetCause"},{addr:2148017312,type:"code",name:"osGetCount"},{addr:2148017376,type:"code",name:"__rmonSendFault"},{addr:2148017380,type:"code",name:"rmonRdbReadBuf"},{addr:2148017808,type:"code",name:"__osSpDeviceBusy"},{addr:2148017840,type:"code",name:"__osSpGetStatus"},{addr:2148017856,type:"code",name:"__osSpSetStatus"},{addr:2148017872,type:"code",name:"__osSpSetPc"},{addr:2148017920,type:"code",name:"__osSpRawStartDma"},{addr:2148018064,type:"code",name:"__osSpRawReadIo"},{addr:2148018144,type:"code",name:"__osSpRawWriteIo"},{addr:2148018224,type:"code",name:"__osContDataCrc"},{addr:2148018332,type:"code",name:"__osContDataCrc"},{addr:2148018348,type:"code",name:"__osContAddressCrc"},{addr:2148019040,type:"code",name:"__osPfsGetInitData"},{addr:2148019220,type:"code",name:"__osPfsRequestData"},{addr:2148019384,type:"code",name:"__osPfsPifRam"},{addr:2148019420,type:"code",name:"__pfsisplug_o_004C"},{addr:2148019428,type:"code",name:"__rmonIOhandler"},{addr:2148019448,type:"code",name:"osPfsIsPlug"},{addr:2148019584,type:"code",name:"__pfsisplug_o_0094"},{addr:2148019604,type:"code",name:"__rmonIOputw"},{addr:2148019696,type:"code",name:"__rmonIOflush"},{addr:2148019756,type:"code",name:"__rmonSendFault"},{addr:2148019776,type:"code",name:"__osPfsGetOneChannelData"},{addr:2148019904,type:"code",name:"__osPfsRequestOneChannel"},{addr:2148020016,type:"code",name:"__pfsgetstatus_o_0030"},{addr:2148020052,type:"code",name:"__osPfsGetStatus"},{addr:2148020164,type:"code",name:"__pfsgetstatus_o_0084"},{addr:2148020304,type:"code",name:"__osPfsInodeCache"},{addr:2148020424,type:"code",name:"__contpfs_o_0598"},{addr:2148020560,type:"code",name:"__osPfsRWInode"},{addr:2148021172,type:"code",name:"__contpfs_o_0578"},{addr:2148021384,type:"code",name:"__osCheckId"},{addr:2148021568,type:"code",name:"__osGetId"},{addr:2148022028,type:"code",name:"__osCheckPackId"},{addr:2148022384,type:"code",name:"__osRepairPackId"},{addr:2148023008,type:"code",name:"__osPiRawReadIo"},{addr:2148023088,type:"code",name:"__osPiRawWriteIo"},{addr:2148023132,type:"code",name:"__osIdCheckSum"},{addr:2148023168,type:"code",name:"osEPiWriteIo"},{addr:2148023200,type:"code",name:"__osSumcalc"},{addr:2148023252,type:"code",name:"__osPfsInodeCacheBank"},{addr:2148023253,type:"code",name:"__osPfsInodeCacheChannel"},{addr:2148023632,type:"code",name:"_Litob"},{addr:2148024224,type:"code",name:"_Ldtob"},{addr:2148025324,type:"code",name:"__xldtob_o_0080"},{addr:2148025476,type:"code",name:"__xldtob_o_0414"},{addr:2148026928,type:"code",name:"__rmonExecute"},{addr:2148027072,type:"code",name:"__rmonWriteWordTo"},{addr:2148027136,type:"code",name:"__rmonReadWordAt"},{addr:2148027248,type:"code",name:"__rmonCopyWords"},{addr:2148027464,type:"code",name:"__rmonGetRegionCount"},{addr:2148027548,type:"code",name:"__rmonGetExeName"},{addr:2148027736,type:"code",name:"__rmonLoadProgram"},{addr:2148027744,type:"code",name:"__rmonListProcesses"},{addr:2148027832,type:"code",name:"__rmonWriteMem"},{addr:2148028380,type:"code",name:"__rmonUtilityBuffer"},{addr:2148028636,type:"code",name:"__rmonReadMem"},{addr:2148028976,type:"code",name:"__rmonSetComm"},{addr:2148029004,type:"code",name:"__rmonCopyWords"},{addr:2148029032,type:"code",name:"__rmonPanic"},{addr:2148029040,type:"code",name:"__rmonMQ"},{addr:2148029052,type:"code",name:"__rmonMemcpy"},{addr:2148029064,type:"code",name:"__rmonInit"},{addr:2148029100,type:"code",name:"__rmonReadWordAt"},{addr:2148029164,type:"code",name:"__rmonWriteWordTo"},{addr:2148029272,type:"code",name:"__rmonSetFault"},{addr:2148029312,type:"code",name:"__rmonGetRegisterContents"},{addr:2148029432,type:"code",name:"__rmonSetVRegs"},{addr:2148029868,type:"code",name:"__rmonGetVRegs"},{addr:2148030048,type:"code",name:"__rmonregs_o_0AA4"},{addr:2148030340,type:"code",name:"__rmonSetSRegs"},{addr:2148030704,type:"code",name:"__rmonGetSRegs"},{addr:2148031112,type:"code",name:"__rmonSetFRegisters"},{addr:2148031252,type:"code",name:"__rmonGetFRegisters"},{addr:2148031392,type:"code",name:"__rmonSetGRegisters"},{addr:2148031632,type:"code",name:"__rmonGetGRegisters"},{addr:2148031940,type:"code",name:"__rmonGetRegisterContents"},{addr:2148032064,type:"code",name:"__rmonMaskIdleThreadInts"},{addr:2148032168,type:"code",name:"__rmonGetTCB"},{addr:2148032268,type:"code",name:"__rmonStopUserThreads"},{addr:2148032752,type:"code",name:"__rmonGetThreadStatus"},{addr:2148034320,type:"code",name:"__rmonSendHeader"},{addr:2148034424,type:"code",name:"__rmonSendReply"},{addr:2148034608,type:"code",name:"__rmonSendData"},{addr:2148035248,type:"code",name:"__osSpRawReadIo"},{addr:2148035328,type:"code",name:"__osSpRawWriteIo"},{addr:2148035408,type:"code",name:"__osSpDeviceBusy"},{addr:2148035440,type:"code",name:"osStopThread"},{addr:2148035632,type:"code",name:"__osGetActiveQueue"},{addr:2148036096,type:"code",name:"__rmonRCPrunning"},{addr:2148036200,type:"code",name:"__rmonStepRCP"},{addr:2148036256,type:"code",name:"__rmonHitCpuFault"},{addr:2148036300,type:"code",name:"__rmonRcpAtBreak"},{addr:2148036301,type:"code",name:"__rmonHitSpBreak"},{addr:2148036441,type:"code",name:"__rmonHitBreak"},{addr:2148036661,type:"code",name:"__rmonGetExceptionStatus"},{addr:2148036721,type:"code",name:"__rmonSetSingleStep"},{addr:2148037149,type:"code",name:"__rmonGetBranchTarget"},{addr:2148037533,type:"code",name:"__rmonClearBreak"},{addr:2148037817,type:"code",name:"__rmonListBreak"},{addr:2148037825,type:"code",name:"__rmonSetBreak"},{addr:2148040448,type:"code",name:"__divdi3"},{addr:2148040816,type:"code",name:"__udivdi3"},{addr:2148040848,type:"code",name:"__umoddi3"},{addr:2148047536,type:"code",name:"midpoint",desc:"A0=output_xyz"},{addr:2148103760,type:"u32",name:"rng_seed"},{addr:2148146544,type:"data",name:"generic_save_data_decode_table",desc:"44 bytes"},{addr:2148317348,type:"u32",name:"debug_font_color",desc:"Used with DrawDebugText"},{addr:2148323418,type:"u8",name:"total_turns"},{addr:2148323419,type:"u8",name:"current_turn"},{addr:2148323431,type:"u8",name:"current_player_index",desc:"Player who's turn is active"},{addr:2148323508,type:"u16",name:"bank_coin_total",desc:"Number of coins in bank"},{addr:2148327938,type:"u16",name:"current_scene"},{addr:2148339976,type:"data",name:"player_structs"},{addr:2148339977,type:"u8",name:"p1_cpu_difficulty"},{addr:2148339978,type:"u8",name:"p1_controller"},{addr:2148339979,type:"u8",name:"p1_char",desc:"Mario=0"},{addr:2148339986,type:"u16",name:"p1_coins",desc:"Player 1 coin count"},{addr:2148339990,type:"u8",name:"p1_stars",desc:"Player 1 star count"},{addr:2148339991,type:"u8",name:"p1_cur_chain_index",desc:"Player 1 current chain index"},{addr:2148339992,type:"u8",name:"p1_cur_space_index",desc:"Player 1 current space index"},{addr:2148339993,type:"u8",name:"p1_next_chain_index",desc:"Player 1 next chain index"},{addr:2148339994,type:"u8",name:"p1_next_space_index",desc:"Player 1 next space index"},{addr:2148339999,type:"u8",name:"p1_status_flags",desc:"0x80 (reset effect you land)"},{addr:214834e4,type:"u8",name:"p1_item1",desc:"Player 1 first item"},{addr:2148340001,type:"u8",name:"p1_item2",desc:"Player 1 second item"},{addr:2148340002,type:"u8",name:"p1_item3",desc:"Player 1 third item"},{addr:2148340033,type:"u8",name:"p2_cpu_difficulty"},{addr:2148340034,type:"u8",name:"p2_controller"},{addr:2148340035,type:"u8",name:"p2_char"},{addr:2148340042,type:"u16",name:"p2_coins",desc:"Player 2 coin count"},{addr:2148340046,type:"u8",name:"p2_stars",desc:"Player 2 star count"},{addr:2148340047,type:"u8",name:"p2_cur_chain_index",desc:"Player 2 current chain index"},{addr:2148340048,type:"u8",name:"p2_cur_space_index",desc:"Player 2 current space index"},{addr:2148340049,type:"u8",name:"p2_next_chain_index",desc:"Player 2 next chain index"},{addr:2148340050,type:"u8",name:"p2_next_space_index",desc:"Player 2 next space index"},{addr:2148340055,type:"u8",name:"p2_status_flags",desc:"see p1 notes"},{addr:2148340056,type:"u8",name:"p2_item1",desc:"Player 2 first item"},{addr:2148340057,type:"u8",name:"p2_item2",desc:"Player 2 second item"},{addr:2148340058,type:"u8",name:"p2_item3",desc:"Player 2 third item"},{addr:2148340089,type:"u8",name:"p3_cpu_difficulty"},{addr:2148340090,type:"u8",name:"p3_controller"},{addr:2148340091,type:"u8",name:"p3_char"},{addr:2148340098,type:"u16",name:"p3_coins",desc:"Player 3 coin count"},{addr:2148340102,type:"u8",name:"p3_stars",desc:"Player 3 star count"},{addr:2148340103,type:"u8",name:"p3_cur_chain_index",desc:"Player 3 current chain index"},{addr:2148340104,type:"u8",name:"p3_cur_space_index",desc:"Player 3 current space index"},{addr:2148340105,type:"u8",name:"p3_next_chain_index",desc:"Player 3 next chain index"},{addr:2148340106,type:"u8",name:"p3_next_space_index",desc:"Player 3 next space index"},{addr:2148340111,type:"u8",name:"p3_status_flags",desc:"see p1 notes"},{addr:2148340112,type:"u8",name:"p3_item1",desc:"Player 3 first item"},{addr:2148340113,type:"u8",name:"p3_item2",desc:"Player 3 second item"},{addr:2148340114,type:"u8",name:"p3_item3",desc:"Player 3 third item"},{addr:2148340145,type:"u8",name:"p4_cpu_difficulty"},{addr:2148340146,type:"u8",name:"p4_controller"},{addr:2148340147,type:"u8",name:"p4_char"},{addr:2148340154,type:"u16",name:"p4_coins",desc:"Player 4 coin count"},{addr:2148340158,type:"u8",name:"p4_stars",desc:"Player 4 star count"},{addr:2148340159,type:"u8",name:"p4_cur_chain_index",desc:"Player 4 current chain index"},{addr:2148340160,type:"u8",name:"p4_cur_space_index",desc:"Player 4 current space index"},{addr:2148340161,type:"u8",name:"p4_next_chain_index",desc:"Player 4 next chain index"},{addr:2148340162,type:"u8",name:"p4_next_space_index",desc:"Player 4 next space index"},{addr:2148340167,type:"u8",name:"p4_status_flags",desc:"see p1 notes"},{addr:2148340168,type:"u8",name:"p4_item1",desc:"Player 4 first item"},{addr:2148340169,type:"u8",name:"p4_item2",desc:"Player 4 second item"},{addr:2148340170,type:"u8",name:"p4_item3",desc:"Player 4 third item"},{addr:2148352448,type:"u32",name:"cur_player_spaces_remaining"},{addr:2148409160,type:"code",name:"ShowPlayerCoinChange",desc:"A0=player_index"},{addr:2148419960,type:"code",name:"PlayerHasItem",desc:"A0=player_index"},{addr:2148420060,type:"code",name:"PlayerHasEmptyItemSlot",desc:"A0=player_index"},{addr:2148420104,type:"code",name:"FixUpPlayerItemSlots",desc:"A0=player_index"},{addr:2148443744,type:"code",name:"AddArrowAngle",desc:"F0=degree_rot_of_arrow"},{addr:2148446560,type:"code",name:"GetSpaceData",desc:"A0=space_index"},{addr:2148446596,type:"code",name:"GetAbsSpaceIndexFromChainSpaceIndex",desc:"A0=chain_index"},{addr:2148446640,type:"code",name:"GetChainLength",desc:"A0=chain_index"},{addr:2148446668,type:"code",name:"GetChainSpaceIndexFromAbsSpaceIndex",desc:"A0=abs_space_index"},{addr:2148448240,type:"code",name:"SetSpaceType",desc:"A0=space_index"},{addr:2148448864,type:"code",name:"EventTableHydrate",desc:"Moves event table data into the space data"},{addr:2148449480,type:"code",name:"GetCurrentSpaceIndex"},{addr:2148453208,type:"code",name:"GetAngleBetweenSpaces",desc:"A0=space_1_data[0x8]"},{addr:2148453916,type:"code",name:"SetPlayerBlue",desc:"Sets the player's turn state blue"},{addr:2148453924,type:"code",name:"SetPlayerRed",desc:"Sets the player's turn state red"},{addr:2148453932,type:"code",name:"SetPlayerGreen",desc:"Sets the player's turn state green"},{addr:2148453964,type:"code",name:"GetSumOfPlayerStars",desc:"sums the star count of all players"},{addr:2148454044,type:"code",name:"RNGPercentChance",desc:"A0=percent_chance"},{addr:2148454116,type:"code",name:"GetTurnsElapsed"},{addr:2148456732,type:"code",name:"SetPlayerOntoChain",desc:"A0=player_index"},{addr:2148456856,type:"code",name:"SetNextChainAndSpace",desc:"A0=player_index"},{addr:2148456952,type:"code",name:"SetPrevChainAndSpace",desc:"A0=player_index"},{addr:2148475184,type:"code",name:"GetCurrentPlayerIndex"},{addr:2148475196,type:"code",name:"GetPlayerStruct",desc:"A0=player_index pass -1 to get current player's struct"},{addr:2148475260,type:"code",name:"PlayerIsCurrent",desc:"A0=player_index tests if A0 is the current player"},{addr:2148475288,type:"code",name:"PlayerIsCPU",desc:"A0=player_index"},{addr:2148475328,type:"code",name:"AdjustPlayerCoins",desc:"A0=player_index"},{addr:2148475440,type:"code",name:"PlayerHasCoins",desc:"A0=player_index"},{addr:2148490564,type:"code",name:"AdjustPlayerCoinsGradual",desc:"A0=player_index"},{addr:2148492272,type:"code",name:"RefreshHUD",desc:"A0=player_index"},{addr:2148553232,type:"u16",name:"num_board_spaces"},{addr:2148553234,type:"u16",name:"num_chains"},{addr:2148553236,type:"u32",name:"hydrated_space_data"},{addr:2148553240,type:"u32",name:"hydrated_chains"},{addr:2148553360,type:"data",name:"arrow_angles",desc:"f32[8]"},{addr:2148553392,type:"u32",name:"num_arrow_angles"},{addr:2148555168,type:"data",name:"overlay_base",desc:"Overlay starting location"}]}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._entries={}}return e.prototype.parse=function(e,t){var n;n=e instanceof ArrayBuffer?new DataView(e,t):e;for(var r,i,a=0;65535!==(r=n.getUint16(a));)i=n.getUint32(a+4),this.add(r,i),a+=8},e.prototype.write=function(e,t){var n=new DataView(e,t),r=0;for(var i in this._entries)this._writeEntry(n,r,parseInt(i),this._entries[i]),r+=8;return this._writeEntry(n,r,65535,0),r+=8},e.prototype.getAssembly=function(){var e="__PP64_INTERNAL_SPACE_TABLE:\n";for(var t in this._entries)e+=".halfword "+parseInt(t)+", 0\n       .word __PP64_INTERNAL_SPACE_LIST_"+t+"\n";return e+=".halfword 0xFFFF, 0, 0, 0\n"},e.prototype._writeEntry=function(e,t,n,r){if(e.setUint16(t,n),e.setUint16(t+2,0),!r&&65535!==n)throw"Tried to write null address from SpaceEventTable at space index "+n+".";e.setUint32(t+4,r)},e.prototype.add=function(e,t){void 0===t&&(t=0),this._entries[e]=t},e.prototype.forEach=function(e){for(var t in this._entries){e({spaceIndex:Number(t),address:this._entries[t]})}},e.prototype.byteLength=function(){return 8*Object.keys(this._entries).length+8},e}();t.SpaceEventTable=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._spaceIndex=e,this._entries=[]}return e.prototype.parse=function(e,t){var n;n=e instanceof ArrayBuffer?new DataView(e,t):e;for(var r,i,a,o=0;0!==(r=n.getUint16(o));)i=n.getUint16(o+2),a=n.getUint32(o+4),this.add(r,i,a),o+=8},e.prototype.write=function(e,t){var n=this,r=new DataView(e,t),i=0;return this.forEach(function(e){n._writeEntry(r,i,e.activationType,e.executionType,e.address),i+=8}),this._writeEntry(r,i,0,0),i+=8},e.prototype.getAssembly=function(){var e=this,t="__PP64_INTERNAL_SPACE_LIST_"+this._spaceIndex+":\n";return this.forEach(function(n,r){t+=".halfword "+n.activationType+", "+n.executionType+"\n       .word __PP64_INTERNAL_EVENT_"+e._spaceIndex+"_"+r+"\n"}),t+=".word 0, 0\n"},e.prototype._writeEntry=function(e,t,n,r,i){if(void 0===i&&(i=0),e.setUint16(t,n),e.setUint16(t+2,r),!i&&(n||r))throw"Tried to write null address from SpaceEventList.";e.setUint32(t+4,i)},e.prototype.add=function(e,t,n){void 0===n&&(n=0),this._entries.push(new i(e,t,n))},e.prototype.setAddress=function(e,t){void 0===t&&(t=0),this._entries[e].address=t>>>0},e.prototype.forEach=function(e){this._entries.forEach(e)},e.prototype.byteLength=function(){return 8*this._entries.length+8},e.byteLength=function(e){return 8*e+8},e}();t.SpaceEventList=r;var i=function(){return function(e,t,n){this.activationType=e,this.executionType=t,this.address=n}}();t.SpaceEventListEntry=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.create(null);t.EventCache={get:function(e){return r[e]},set:function(e,t){r[e]=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(11),o=n(54);t.createBoardOverlay=function(e,t){for(var n=t.mainfsEventFile,s=n[0],l=n[1],c=r.getSpacesOfSubType(i.SpaceSubtype.BOO,e),u=r.getSpacesOfSubType(i.SpaceSubtype.KOOPA,e),d=u.length?u[0]:e._deadSpace,p=r.getSpacesOfSubType(i.SpaceSubtype.BOWSER,e),f=p.length?p[0]:e._deadSpace,h=[],m=0;m<e.spaces.length;m++)e.spaces[m].star&&h.push(m);for(var _=r.getSpacesOfSubType(i.SpaceSubtype.TOAD,e),g=[],v=0;v<h.length;v++){for(var y=e.spaces[h[v]],A=Number.MAX_VALUE,x=h[v],S=0;S<_.length;S++){var b=_[S],w=e.spaces[b],E=a.distance(y.x,y.y,w.x,w.y);E<A&&(A=E,x=b)}g.push(x)}return"\n.org 0x800F65E0\n\n.definelabel CORE_800C597A,0x800C597A\n.definelabel CORE_800ED154,0x800ED154\n.definelabel CORE_800ED156,0x800ED156\n.definelabel CORE_800ED158,0x800ED158\n.definelabel CORE_800ED172,0x800ED172\n.definelabel CORE_800ED192,0x800ED192\n.definelabel CORE_800ED5C0,0x800ED5C0\n.definelabel CORE_800ED5C2,0x800ED5C2\n.definelabel CORE_800ED5CA,0x800ED5CA\n.definelabel CORE_800ED5CC,0x800ED5CC\n.definelabel CORE_800ED5D8,0x800ED5D8\n.definelabel CORE_800EE320,0x800EE320\n.definelabel CORE_800F2B7C,0x800F2B7C\n\n.definelabel STAR_COUNT,"+h.length+"\n.definelabel BOO_COUNT,"+c.length+'\n\nmain:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  lui   A0, hi(overlaycalls)\n  addiu A0, A0, lo(overlaycalls)\n  lui   A1, hi(CORE_800C597A)\n  jal   ExecBoardScene\n   lh    A1, lo(CORE_800C597A)(A1)\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n  NOP\n  NOP\n\n__PP64_INTERNAL_GET_NEXT_TOAD_INDEX:\n  lui   V0, hi(CORE_800ED5CA)\n  addiu V0, V0, lo(CORE_800ED5CA)\n  lh    V1, 0(V0)\n  sll   V1, V1, 1\n  addu  V0, V0, V1\n  lh    V0, 2(V0) ; get next toad index?\n  sll   V0, V0, 1\n  lui   AT, hi(toad_space_indices)\n  addu  AT, AT, V0\n  jr    RA\n   lh    V0, lo(toad_space_indices)(AT)\n\nfunc_800F663C:\n  addiu SP, SP, -0x30\n  sw    RA, 0x28(SP)\n  sw    S5, 0x24(SP)\n  sw    S4, 0x20(SP)\n  sw    S3, 0x1c(SP)\n  sw    S2, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   S5, hi(CORE_800ED5C0)\n  addiu S5, S5, lo(CORE_800ED5C0)\n  addu  S1, R0, R0\n  lui S4, 0x2492\n  ori S4, S4, 0x4925\n  lui   S3, hi(func_800F663C_data1)\n  addiu S3, S3, lo(func_800F663C_data1)\n  lui   S2, hi(func_800F663C_data0)\n  addiu S2, S2, lo(func_800F663C_data0)\nL800F6680:\n  jal   GetRandomByte\n  NOP\n  andi  V0, V0, 0xFF\n  multu V0, S4\n  mfhi  A0\n  subu  V1, V0, A0\n  srl   V1, V1, 1\n  addu  A0, A0, V1\n  srl   A0, A0, 2\n  sll   V1, A0, 3\n  subu  V1, V1, A0\n  subu  V0, V0, V1\n  jal   GetRandomByte\n   andi  S0, V0, 0xFF\n  andi  V0, V0, 0xFF\n  multu V0, S4\n  mfhi  A0\n  subu  V1, V0, A0\n  srl   V1, V1, 1\n  addu  A0, A0, V1\n  srl   A0, A0, 2\n  sll   V1, A0, 3\n  subu  V1, V1, A0\n  subu  V0, V0, V1\n  andi  A0, V0, 0xff\n  beq   S0, A0, L800F6740\n   sll   V1, A0, 1\n  addu  A3, V1, S3\n  lh    V0, 0(A3)\n  slt   V0, S0, V0\n  bnel V0, R0, L800F6744\n   addiu S1, S1, 1\n  sll   A1, S0, 1\n  addu  A2, A1, S3\n  lh    V0, 0(A2)\n  slt   V0, A0, V0\n  bnel V0, R0, L800F6744\n   addiu S1, S1, 1\n  addu  A0, A1, S2\n  lh    A1, 0(A0)\n  addu  V1, V1, S2\n  lhu   V0, 0(V1)\n  sh    V0, 0(A0)\n  sh    A1, 0(V1)\n  lh    A1, 0(A2)\n  lhu   V0, 0(A3)\n  sh    V0, 0(A2)\n  sh    A1, 0(A3)\nL800F6740:\n  addiu S1, S1, 1\nL800F6744:\n  slti  V0, S1, 0x1e\n  bne  V0, R0, L800F6680\n   NOP\n  addu  S1, R0, R0\n  lui   A0, hi(func_800F663C_data0)\n  addiu A0, A0, lo(func_800F663C_data0)\n  sll   V0, S1, 1\nL800F6760:\n  addu  V1, V0, S5\n  addu  V0, V0, A0\n  lhu   V0, 0(V0)\n  sh    V0, 0xc(V1)\n  addiu S1, S1, 1\n  slti  V0, S1, STAR_COUNT\n  bne  V0, R0, L800F6760\n   sll   V0, S1, 1\n  lw    RA, 0x28(SP)\n  lw    S5, 0x24(SP)\n  lw    S4, 0x20(SP)\n  lw    S3, 0x1c(SP)\n  lw    S2, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x30\n\nfunc_800F67A4:\n  addiu SP, SP, -0x18\n  sw    RA, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   V0, hi(CORE_800ED5CA)\n  lhu   V0, lo(CORE_800ED5CA)(V0)\n  addiu V0, V0, 1\n  lui   AT, hi(CORE_800ED5CA)\n  sh    V0, lo(CORE_800ED5CA)(AT)\n  sll   V0, V0, 0x10\n  sra   V0, V0, 0x10\n  slti  V0, V0, STAR_COUNT\n  bne  V0, R0, L800F6820\n   NOP\n  lui   S0, hi(CORE_800ED5D8)\n  lh    S0, lo(CORE_800ED5D8)(S0)\n  lui   AT, hi(CORE_800ED5CA)\n  sh    R0, lo(CORE_800ED5CA)(AT)\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 68\n  jal   func_800F663C\n   NOP\n  lui   V1, hi(CORE_800ED5CC)\n  lh    V1, lo(CORE_800ED5CC)(V1)\n  bne   S0, V1, L800F6820\n   NOP\n  lui   V0, hi(CORE_800ED5D8)\n  lhu   V0, lo(CORE_800ED5D8)(V0)\n  lui   AT, hi(CORE_800ED5CC)\n  sh    V0, lo(CORE_800ED5CC)(AT)\n  lui   AT, hi(CORE_800ED5D8)\n  sh    V1, lo(CORE_800ED5D8)(AT)\nL800F6820:\n  lw    RA, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\n; Ensures star space shows a star, past stars are chance time\ndraw_star_space_state:\n  addiu SP, SP, -0x30\n  sw    RA, 0x2c(SP)\n  sw    S4, 0x28(SP)\n  sw    S3, 0x24(SP)\n  sw    S2, 0x20(SP)\n  sw    S1, 0x1c(SP)\n  sw    S0, 0x18(SP)\n  lui   S2, hi(CORE_800ED5C0)\n  addiu S2, S2, lo(CORE_800ED5C0)\n  addu  S1, R0, R0\n  lui   S4, hi(star_space_indices)\n  addiu S4, S4, lo(star_space_indices)\n  lui   S3, hi(data_mystery_40s_list)\n  addiu S3, S3, lo(data_mystery_40s_list)\n  sll   S0, S1, 1\nL800F686C:\n  addu  V0, S0, S4\n  lh    A0, 0(V0)\n  jal   SetSpaceType\n   addiu    A1, R0, 1\n  addu  S0, S0, S3\n  lh    A0, 0(S0)\n  jal   SetBoardFeatureEnabled\n   addiu S1, S1, 1\n  slti  V0, S1, STAR_COUNT\n  bnel V0, R0, L800F686C\n   sll   S0, S1, 1\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 68\n  bne  V0, R0, L800F68AC\n   addiu    S0, R0, STAR_COUNT\n  lh    S0, 0xa(S2)\nL800F68AC:\n  blez  S0, L800F68EC\n   addu  S1, R0, R0\n  lui   S3, hi(star_space_indices)\n  addiu S3, S3, lo(star_space_indices)\n  sll   V0, S1, 1\nL800F68C0:\n  addu  V0, V0, S2\n  lh    V0, 0xc(V0)\n  sll   V0, V0, 1\n  addu  V0, V0, S3\n  lh    A0, 0(V0)\n  jal   SetSpaceType\n   addiu    A1, R0, 6 ; Chance\n  addiu S1, S1, 1\n  slt   V0, S1, S0\n  bne  V0, R0, L800F68C0\n   sll   V0, S1, 1\nL800F68EC:\n  lh    V0, 0xa(S2)\n  sll   V0, V0, 1\n  addu  V0, V0, S2\n  lh    V0, 0xc(V0)\n  sll   V0, V0, 1\n  lui   A0, hi(star_space_indices)\n  addu  A0, A0, V0\n  lh    A0, lo(star_space_indices)(A0)\n  jal   SetSpaceType\n   addiu    A1, R0, 5 ; Star\n  lh    V0, 0xa(S2)\n  sll   V0, V0, 1\n  addu  V0, V0, S2\n  lh    V0, 0xc(V0)\n  sll   V0, V0, 1\n  lui   A0, hi(data_mystery_40s_list)\n  addu  A0, A0, V0\n  jal   SetBoardFeatureDisabled\n   lh    A0, lo(data_mystery_40s_list)(A0)\n  lw    RA, 0x2c(SP)\n  lw    S4, 0x28(SP)\n  lw    S3, 0x24(SP)\n  lw    S2, 0x20(SP)\n  lw    S1, 0x1c(SP)\n  lw    S0, 0x18(SP)\n  jr    RA\n   addiu SP, SP, 0x30\n\n__PP64_INTERNAL_STAR_SPACE:\n  addiu SP, SP, -0x28\n  sw    RA, 0x20(SP)\n  sw    S1, 0x1c(SP)\n  sw    S0, 0x18(SP)\n  lui   S1, hi(CORE_800ED5C0)\n  addiu S1, S1, lo(CORE_800ED5C0)\n  addu  S0, R0, R0\n  lui   A1, hi(star_space_indices)\n  addiu A1, A1, lo(star_space_indices)\n  sll   A0, A0, 0x10\n  sra   A0, A0, 0x10\n  lui   A2, hi(data_mystery_40s_list)\n  addiu A2, A2, lo(data_mystery_40s_list)\n  sll   V1, S0, 1\nL800F6990:\n  addu  V0, V1, A1\n  lh    V0, 0(V0)\n  bnel  A0, V0, L800F6A14\n   addiu S0, S0, 1\n  lh    V0, 0xa(S1)\n  sll   V0, V0, 1\n  addu  V0, V0, S1\n  lh    V0, 0xc(V0)\n  bne   S0, V0, L800F69C8\n   addu  V0, V1, A2\n  lhu   V0, 0(V0)\n  sh    V0, 0x1a(S1)\n  j     L800F6A24\n   addiu    V0, R0, 1\nL800F69C8:\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 68\n  bne  V0, R0, L800F69DC\n   addiu    A0, R0, STAR_COUNT\n  lh    A0, 0xa(S1)\nL800F69DC:\n  blez  A0, L800F6A20\n   addu  V1, R0, R0\n  sll   V0, V1, 1\nL800F69E8:\n  addu  V0, V0, S1\n  lh    V0, 0xc(V0)\n  bne   S0, V0, L800F6A00\n   addiu V1, V1, 1\n  j     L800F6A24\n   addiu    V0, R0, 2\nL800F6A00:\n  slt   V0, V1, A0\n  bne  V0, R0, L800F69E8\n   sll   V0, V1, 1\n  j     L800F6A24\n   addu  V0, R0, R0\nL800F6A14:\n  slti  V0, S0, STAR_COUNT\n  bne  V0, R0, L800F6990\n   sll   V1, S0, 1\nL800F6A20:\n  addu  V0, R0, R0\nL800F6A24:\n  lw    RA, 0x20(SP)\n  lw    S1, 0x1c(SP)\n  lw    S0, 0x18(SP)\n  jr    RA\n   addiu SP, SP, 0x28\n\nshow_next_star_spot_process:\n  addiu SP, SP, -0x50\n  sw    RA, 0x1c(SP)\n  sw    S2, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  sdc1  F30, 0x48(SP)\n  sdc1  F28, 0x40(SP)\n  sdc1  F26, 0x38(SP)\n  sdc1  F24, 0x30(SP)\n  sdc1  F22, 0x28(SP)\n  jal   0x800633A8\n   sdc1  F20, 0x20(SP)\n  lw    S0, 0x8c(V0)\n  jal   PlaySound\n   addiu    A0, R0, 109\n  addiu    A0, R0, 64\n  jal   0x8003DBE0\n   addu  A1, R0, R0\n  addu  S1, V0, R0\n  lhu   V0, 0xa(S1)\n  ori   V0, V0, 4\n  sh    V0, 0xa(S1)\n  jal   0x8004CDCC\n   addu  A0, S1, R0\n  addiu A0, S1, 0xc\n  jal   0x800A0D50 ; posmodel\n   addiu A1, S0, 4\n  lui    AT, 0x43FA ; 500.000000\n  mtc1  AT, F0\n  NOP\n  swc1  F0, 0x30(S1)\n  addu  A0, S1, R0\n  jal   0x80042728\n   addu  A1, R0, R0\n  addu  S2, V0, R0\n  mtc1  R0, F20\n  addu  S0, R0, R0\n  lui   AT, 0x3ECC\n  ori   AT, AT, 0xCCCD\n  mtc1  AT, F22\nL800F6AD8:\n  mfc1  A1, F20\n  mfc1  A2, F20\n  mfc1  A3, F20\n  NOP\n  jal   0x800A0D00\n   addiu A0, S1, 0x24\n  jal   SleepVProcess\n   ADD.S F20, F20, F22\n  addiu S0, S0, 1\n  slti  V0, S0, 6\n  bne  V0, R0, L800F6AD8\n   NOP\n  addu  S0, R0, R0\n  lui   AT, 0x3ECC\n  ori   AT, AT, 0xCCCD\n  mtc1  AT, F22\nL800F6B18:\n  mfc1  A1, F20\n  mfc1  A2, F20\n  mfc1  A3, F20\n  NOP\n  jal   0x800A0D00\n   addiu A0, S1, 0x24\n  jal   SleepVProcess\n   SUB.S F20, F20, F22\n  addiu S0, S0, 1\n  slti  V0, S0, 3\n  bne  V0, R0, L800F6B18\n   NOP\n  jal   SleepProcess\n   addiu    A0, R0, 30\n  jal   PlaySound\n   addiu    A0, R0, 68\n  mtc1  R0, F22\n  lui   AT, 0x41A0 ; 20.000000\n  mtc1  AT, F30\n  lui   AT, 0x3CA3\n  ori AT, AT, 0xd70a\n  mtc1  AT, F28\n  mtc1  R0, F26\n  lui   AT, 0x40C0 ; 6.000000\n  mtc1  AT, F24\nL800F6B7C:\n  lw    V0, 0x3c(S1)\n  lw    V0, 0x40(V0)\n  lh    V0, 0(V0)\n  sll   A0, V0, 1\n  addu  A0, A0, V0\n  sll   A0, A0, 6\n  lui   V0, hi(CORE_800F2B7C)\n  lw    V0, lo(CORE_800F2B7C)(V0)  ; gets a pointer\n  addu  A0, A0, V0\n  mfc1  A1, F22\n  NOP\n  jal   0x800A40D0\n   addiu A0, A0, 0x7c\n  SUB.S F20, F20, F28\n  C.LT.S F20, F26\n  NOP\n  NOP\n  bc1t  L800F6BF8\n   ADD.S F22, F22, F30\n  mfc1  A1, F20\n  mfc1  A2, F20\n  mfc1  A3, F20\n  NOP\n  jal   0x800A0D00\n   addiu A0, S1, 0x24\n  lwc1  F0, 0x30(S1)\n  SUB.S F0, F0, F24\n  jal   SleepVProcess\n   swc1  F0, 0x30(S1)\n  j     L800F6B7C\n   NOP\nL800F6BF8:\n  jal   0x800427D4\n   addu  A0, S2, R0\n  jal   SleepProcess\n   addiu    A0, R0, 30\n  jal   0x8003E694\n   addu  A0, S1, R0\n  jal   EndProcess\n   addu  A0, R0, R0\n  lw    RA, 0x1c(SP)\n  lw    S2, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  ldc1  F30, 0x48(SP)\n  ldc1  F28, 0x40(SP)\n  ldc1  F26, 0x38(SP)\n  ldc1  F24, 0x30(SP)\n  ldc1  F22, 0x28(SP)\n  ldc1  F20, 0x20(SP)\n  jr    RA\n   addiu SP, SP, 0x50\n\nshow_next_star_spot_inner:\n  addiu SP, SP, -0x18\n  sw    RA, 0x14(SP)\n  sw    S0, 0x10(SP)\n  addu  S0, A0, R0\n  lw    V0, 0(S0)\n  lui   AT, 0x41A0 ; 20.000000\n  mtc1  AT, F0\n  NOP\n  swc1  F0, 0x34(V0)\n  lui   AT, 0xC040 ; -3.000000\n  mtc1  AT, F0\n  NOP\n  swc1  F0, 0x38(V0)\n  lw    A0, 0(S0)\n  addu  A1, R0, R0\n  jal   0x8003E81C\n   addu  A2, R0, R0\n  jal   SleepProcess\n   addiu    A0, R0, 3\nL800F6C94:\n  lw    A0, 0(S0)\n  jal   0x8003E940\n   NOP\n  andi  V0, V0, 0xffff\n  bne  V0, R0, L800F6CBC\n   addiu    A1, R0, -1\n  jal   SleepVProcess\n   NOP\n  j     L800F6C94\n   NOP\nL800F6CBC:\n  lw    A0, 0(S0)\n  jal   0x8003E81C\n   addiu    A2, R0, 2\n  lw    RA, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nshow_next_star_spot:\n  addiu SP, SP, -0x20\n  sw    RA, 0x1c(SP)\n  sw    S2, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   S2, hi(CORE_800ED5C0)\n  addiu S2, S2, lo(CORE_800ED5C0)\n  jal   0x80060128\n   addiu    A0, R0, 43\n  lui   A0, hi(data_star_related_800F9920)\n  jal   0x80048224\n   addiu A0, A0, lo(data_star_related_800F9920)\n  addu  S0, V0, R0\n  addiu    A0, R0, 2\n  jal   0x80072644\n   addiu    A1, R0, 16\nL800F6D18:\n  jal   0x80072718\n   NOP\n  beq  V0, R0, L800F6D38\n   NOP\n  jal   SleepVProcess\n   NOP\n  j     L800F6D18\n   NOP\nL800F6D38:\n  jal   0x8004A520\n   NOP\n  lui   AT, 0x4040  ; 3.000000\n  mtc1  AT, F12\n  jal   0x8004B5C4\n   NOP\n  jal   show_next_star_spot_inner\n   addu  A0, S0, R0\n  lh    V0, 0xa(S2)\n  bne  V0, R0, L800F6D78\n   addiu    A1, R0, 1258\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 68\n  bnel V0, R0, L800F6D78\n   addiu    A1, R0, 1258 ; "Let me show you where to find the next Star."\n  addiu    A1, R0, 1256 ; "Let me show you where to find the first Star."\nL800F6D78:\n  lh    A0, 8(S0)\n  addiu    A2, R0, -1\n  jal   LoadStringIntoWindow\n   addiu    A3, R0, -1\n  lh    A0, 8(S0)\n  jal   0x80071C8C\n   addiu    A1, R0, 1\n  jal   PlaySound\n   addiu    A0, R0, 1125\n  lh    A0, 8(S0)\n  jal   WaitForTextConfirmation\n   NOP\n  lh    A0, 8(S0)\n  jal   0x80071E80\n   addiu    A1, R0, 1\n  lh    A0, 8(S0)\n  jal   0x8006EB40\n   NOP\n  lh    V0, 0xa(S2)\n  sll   V0, V0, 1\n  addu  V0, V0, S2\n  lh    V0, 0xc(V0)\n  sll   V0, V0, 1\n  lui   A0, hi(toad_space_indices)\n  addu  A0, A0, V0\n  jal   GetSpaceData\n   lh    A0, lo(toad_space_indices)(A0)\n  addu  S1, V0, R0\n  jal   0x8004B5DC\n   addiu A0, S1, 4\n  lui    AT, 0x40A0 ; 5.000000\n  mtc1  AT, F12\n  jal   0x8004B838\n   NOP\n  jal   SleepProcess\n   addiu    A0, R0, 5\nL800F6E08:\n  jal   0x8004B850\n   NOP\n  beq  V0, R0, L800F6E28\n   NOP\n  jal   SleepVProcess\n   NOP\n  j     L800F6E08\n   NOP\nL800F6E28:\n  jal   SleepProcess\n   addiu    A0, R0, 5\n  lui   A0, hi(show_next_star_spot_process)\n  addiu A0, A0, lo(show_next_star_spot_process)\n  addiu    A1, R0, 18432\n  addu  A2, R0, R0\n  jal   InitProcess\n   addu  A3, R0, R0\n  sw    S1, 0x8c(V0)\n  jal   SleepProcess\n   addiu    A0, R0, 30\n  lh    V0, 0xa(S2)\n  bne  V0, R0, L800F6E74\n   addiu    A1, R0, 1259\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 68\n  bnel V0, R0, L800F6E74\n   addiu    A1, R0, 1259 ; "This is the star spot. Get the star by giving Toad 20 coins"\n  addiu    A1, R0, 1257 ; same?: "This is the star spot. Get the star by giving Toad 20 coins"\nL800F6E74:\n  lh    A0, 8(S0)\n  addiu    A2, R0, -1\n  jal   LoadStringIntoWindow\n   addiu    A3, R0, -1\n  lh    A0, 8(S0)\n  jal   0x80071C8C\n   addiu    A1, R0, 1\n  lh    A0, 8(S0)\n  jal   WaitForTextConfirmation\n   NOP\n  lh    A0, 8(S0)\n  jal   0x80071E80\n   addiu    A1, R0, 1\n  jal   0x800601D4\n   addiu    A0, R0, 90\n  jal   SleepProcess\n   addiu    A0, R0, 30\n  addiu    A0, R0, 2\n  jal   0x800726AC\n   addiu    A1, R0, 16\n  jal   SleepProcess\n   addiu    A0, R0, 17\n  jal   0x8004847C\n   addu  A0, S0, R0\n  jal   0x80056AF4\n   NOP\n  jal   0x8005DFB8\n   addiu    A0, R0, 1\n  jal   0x8005E3A8\n   NOP\n  jal   SleepVProcess\n   NOP\n  lw    RA, 0x1c(SP)\n  lw    S2, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x20\n\noverlaycall0:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  lui   AT, hi(CORE_800ED5C2)\n  sh    R0, lo(CORE_800ED5C2)(AT)\n  addiu    A0, R0, 10 ; max_objects\n  jal   InitObjectSystem\n   addu  A1, R0, R0 ; max_processes\n  addiu    A0, R0, 53\n  addu  A1, R0, R0\n  jal   0x8005E044\n   addiu    A2, R0, 146\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\noverlaycall1:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  addiu    A0, R0, 10\n  jal   InitObjectSystem\n   addu  A1, R0, R0\n; Set players at starting chain\n  addu  A0, R0, R0\n  addu  A1, R0, R0\n  jal   SetPlayerOntoChain\n   addu  A2, R0, R0\n  addiu    A0, R0, 1\n  addu  A1, R0, R0\n  jal   SetPlayerOntoChain\n   addu  A2, R0, R0\n  addiu    A0, R0, 2\n  addu  A1, R0, R0\n  jal   SetPlayerOntoChain\n   addu  A2, R0, R0\n  addiu    A0, R0, 3\n  addu  A1, R0, R0\n  jal   SetPlayerOntoChain\n   addu  A2, R0, R0\n  lui   V1, hi(CORE_800ED5C0)\n  lh    V1, lo(CORE_800ED5C0)(V1)\n  beq  V1, R0, L800F6FB8\n   addiu    V0, R0, 1\n  beq   V1, V0, L800F6FD8\n   NOP\n  j     L800F6FEC\n   NOP\nL800F6FB8:\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 0x46\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 0x47\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 0x49\n  j     L800F6FE4\n   addiu    A0, R0, 0x4B\nL800F6FD8:\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 0x47\n  addiu    A0, R0, 0x49\nL800F6FE4:\n  jal   SetBoardFeatureEnabled\n   NOP\nL800F6FEC:\n  jal   SetBoardFeatureEnabled\n   addiu    A0, R0, 0x43\n  jal   func_800F663C\n   NOP\n  ; Clear board-specific persistent state values\n  lui   V0, hi(CORE_800ED154)\n  addiu V0, V0, lo(CORE_800ED154)\n  sh    R0, 0(V0)\n  sh    R0, 2(V0)\n  sh    R0, 4(V0)\n  jal   0x8005DFB8\n   addiu    A0, R0, 1\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\n; called from multiple places\nsetup_routine:\n  addiu SP, SP, -0x20\n  sw    RA, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  addiu    A0, R0, 80\n  jal   InitObjectSystem\n   addiu    A1, R0, 40\n  jal   0x80060088\n   addu  S1, R0, R0\n  jal   0x80023448\n   addiu    A0, R0, 1\n  addu  A0, R0, R0\n  addiu    A1, R0, 120\n  addiu    A2, R0, 120\n  jal   0x800234B8\n   addiu    A3, R0, 120\n  addiu    A0, R0, 1\n  addiu    A1, R0, 64\n  addiu    A2, R0, 64\n  jal   0x800234B8\n   addiu    A3, R0, 96\n  lui   A1, 0xc2c8 ; -100.0\n  lui   A2, 0x42c8 ; 100.0\n  lui   A3, 0x4396 ; 300.0\n  jal   0x80023504\n   addiu    A0, R0, 1\n\n  addiu  A0, R0, '+t.bgDir+"\n  addiu  A1, R0, "+t.boardDefFile+"\n  addiu  A2, R0, "+t.pauseBgDir+"\n  jal   0x80056A08 ; setup board?\n   addu  A3, R0, R0\n\n  jal   0x80052E84 ; reset animations for characters?\n   addu  A0, R0, R0\n  jal   0x80052E84\n   addiu    A0, R0, 1\n  jal   0x80052E84\n   addiu    A0, R0, 2\n  jal   0x80052E84\n   addiu    A0, R0, 3\nL800F70C0:\n  jal   GetPlayerStruct\n   addu  A0, S1, R0\n  addu  S0, V0, R0\n  lw    A0, 0x20(S0)\n  jal   0x8003E174\n   addiu S1, S1, 1\n  lw    V1, 0x20(S0)\n  lhu   V0, 0xa(V1)\n  ori   V0, V0, 2\n  sh    V0, 0xa(V1)\n  slti  V0, S1, 4\n  bne  V0, R0, L800F70C0\n   NOP\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 78\n  beq  V0, R0, L800F7114\n   NOP\n  jal   SetBoardFeatureDisabled\n   addiu    A0, R0, 78\n  jal   func_800F67A4\n   NOP\nL800F7114:\n  jal   draw_star_space_state\n   NOP\n  jal   draw_toads_outer\n   NOP\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 14\n  bne  V0, R0, L800F714C\n   NOP\n  jal   koopa_draw_outer\n   NOP\nL800F714C:\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 15\n  bne  V0, R0, L800F7164\n   NOP\n.if BOO_COUNT\n  jal   boo_draw_outer\n.endif\n   NOP\nL800F7164:\n  jal   IsBoardFeatureDisabled\n   addiu    A0, R0, 13\n  bne  V0, R0, L800F717C\n   NOP\n  jal   bowser_draw_outer\n   NOP\nL800F717C:\n  lw    RA, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x20\n\noverlaycall2:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  jal   0x80060128\n   addiu A0, R0, "+(e.audioIndex||0)+"\n  jal   0x8001D240\n   addiu A0, R0, 2\n  jal   setup_routine\n   NOP\n  JAL hydrate_events\n   NOP\n\n; TODO: Support the disabled koopa, boo, bowser setting with split event tables\n;  jal   IsBoardFeatureDisabled\n;   addiu A0, R0, 14\n;  bne  V0, R0, L800F71D8\n;   NOP\n;  lui   A0, hi(koopa_event_table)\n;  jal   EventTableHydrate\n;   addiu A0, A0, lo(koopa_event_table)\n;L800F71D8:\n;  jal   IsBoardFeatureDisabled\n;   addiu A0, R0, 15\n;  bne  V0, R0, L800F71F4\n;   NOP\n;  lui   A0, hi(boo_event_table)\n;  jal   EventTableHydrate\n;   addiu A0, A0, lo(boo_event_table)\n;L800F71F4:\n;  jal   IsBoardFeatureDisabled\n;   addiu A0, R0, 13\n;  bne  V0, R0, L800F7210\n;   NOP\n;  lui   A0, hi(bowser_event_table)\n;  jal   EventTableHydrate\n;   addiu A0, A0, lo(bowser_event_table)\nL800F7210:\n  jal   0x800584F0\n   addu  A0, R0, R0\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\noverlaycall3:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  jal   0x8001D240\n   addiu A0, R0, 1\n  jal   setup_routine\n   NOP\n  jal   0x800584F0\n   addiu A0, R0, 1\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nbowser_draw_inner:\n  addiu SP, SP, -0x18\n  sw    RA, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   V0, hi(bss_bowser_model)\n  lw    V0, lo(bss_bowser_model)(V0)\n  bne  V0, R0, L800F72BC\n   addiu A0, R0, 59 ; bowser model model_info index\n  jal   0x8003DBE0\n   addu  A1, R0, R0\n  addu  S0, V0, R0\n  jal   0x8003E174\n   addu  A0, S0, R0\n  lui   AT, hi(bss_bowser_model)\n  sw    S0, lo(bss_bowser_model)(AT)\n  lhu   V0, 0xa(S0)\n  ori   V0, V0, 2\n  sh    V0, 0xa(S0)\n  jal   GetSpaceData\n   addiu A0, R0, "+f+"\n  addiu A0, S0, 0xc\n  jal   0x800A0D50 ; posmodel\n   addiu A1, V0, 4\n  addiu    A0, R0, 7\n  addu  A1, S0, R0\n  addiu    A2, R0, -2\n  jal   0x8003C314\n   addu  A3, R0, R0\nL800F72BC:\n  lw    RA, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nbowser_draw_outer:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  lui   AT, hi(bss_bowser_model)\n  jal   bowser_draw_inner\n   sw    R0, lo(bss_bowser_model)(AT)\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nkoopa_draw_inner:\n  addiu SP, SP, -0x18\n  sw    RA, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   V0, hi(bss_koopa_model)\n  lw    V0, lo(bss_koopa_model)(V0)\n  bne   V0, R0, L800F7358\n   addiu A0, R0, 57 ; koopa model model_info index\n  jal   0x8003DBE0 ; loads model\n   addu  A1, R0, R0\n  addu  S0, V0, R0\n  jal   0x8003E174\n   addu  A0, S0, R0\n  lui   AT, hi(bss_koopa_model)\n  sw    S0, lo(bss_koopa_model)(AT)\n  lhu   V0, 0xa(S0)\n  ori   V0, V0, 2\n  sh    V0, 0xa(S0)\n  jal   GetSpaceData\n   addiu A0, R0, "+d+"\n  addiu A0, S0, 0xc\n  jal   0x800A0D50 ; posmodel\n   addiu A1, V0, 4\n  addiu A0, R0, 9\n  addu  A1, S0, R0\n  addiu A2, R0, -1\n  jal   0x8003C314\n   addiu A3, R0, -3\nL800F7358:\n  lw    RA, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nkoopa_draw_outer:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  lui   AT, hi(bss_koopa_model)\n  jal   koopa_draw_inner\n   sw    R0, lo(bss_koopa_model)(AT)\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\ndraw_toads_inner:\n  addiu SP, SP, -0x20\n  sw    RA, 0x1c(SP)\n  sw    S2, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  addu  S0, A0, R0\n  sll   A0, A0, 0x10\n  sra   A0, A0, 0xe\n  lui   V0, hi(bss_toad_instances)\n  addu  V0, V0, A0\n  lw    V0, lo(bss_toad_instances)(V0)\n  bne  V0, R0, L800F7474\n   NOP\n  lui   V0, hi(bss_toad_model)\n  lw    V0, lo(bss_toad_model)(V0)\n  bne  V0, R0, L800F73F4\n   NOP\n  addiu    A0, R0, 58 ; Toads model_info index\n  jal   0x8003DBE0\n   addu  A1, R0, R0\n  addu  S2, V0, R0\n  jal   0x8003E174\n   addu  A0, S2, R0\n  lui   AT, hi(bss_toad_model)\n  sw    S2, lo(bss_toad_model)(AT)\n  j     L800F7408\n   sll   S0, S0, 0x10\nL800F73F4:\n  lui   A0, hi(bss_toad_model)\n  lw    A0, lo(bss_toad_model)(A0)\n  jal   0x8003E320\n   sll   S0, S0, 0x10\n  addu  S2, V0, R0\nL800F7408:\n  sra   S0, S0, 0x10\n  sll   S1, S0, 2\n  lui   AT, hi(bss_toad_instances)\n  addu  AT, AT, S1\n  sw    S2, lo(bss_toad_instances)(AT)\n  lhu   V0, 0xa(S2)\n  ori   V0, V0, 2\n  sh    V0, 0xa(S2)\n  jal   0x8004CDCC\n   addu  A0, S2, R0\n  sll   S0, S0, 1\n  lui   A0, hi(toad_space_indices_repeat)\n  addu  A0, A0, S0\n  jal   GetSpaceData\n   lh    A0, lo(toad_space_indices_repeat)(A0)\n  addiu A0, S2, 0xc\n  jal   0x800A0D50 ; posmodel\n   addiu A1, V0, 4\n  addiu    A0, R0, 6\n  lui   A2, hi(RO_800F9948)\n  addu  A2, A2, S1\n  lh    A2, lo(RO_800F9948)(A2)\n  lui   A3, hi(RO_800F994A)\n  addu  A3, A3, S1\n  lh    A3, lo(RO_800F994A)(A3)\n  jal   0x8003C314\n   addu  A1, S2, R0\nL800F7474:\n  lw    RA, 0x1c(SP)\n  lw    S2, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x20\n\ndraw_toads_outer:\n  addiu SP, SP, -0x20\n  sw    RA, 0x1c(SP)\n  sw    S2, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  lui   AT, hi(bss_toad_model)\n  sw    R0, lo(bss_toad_model)(AT)\n  addu  S0, R0, R0\n  lui   S2, hi(bss_toad_instances)\n  addiu S2, S2, lo(bss_toad_instances)\n  lui   S1, hi(data_mystery_40s_list_2)\n  addiu S1, S1, lo(data_mystery_40s_list_2)\n  sll   V0, S0, 2\nL800F74C0:\n  addu  V0, V0, S2\n  sw    R0, 0(V0)\n  sll   V0, S0, 1\n  addu  V0, V0, S1\n  jal   IsBoardFeatureDisabled\n   lh    A0, 0(V0)\n  bnel V0, R0, L800F74F0\n   addiu S0, S0, 1\n  sll   A0, S0, 0x10\n  jal   draw_toads_inner\n   sra   A0, A0, 0x10\n  addiu S0, S0, 1\nL800F74F0:\n  slti  V0, S0, STAR_COUNT\n  bne  V0, R0, L800F74C0\n   sll   V0, S0, 2\n  lw    RA, 0x1c(SP)\n  lw    S2, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x20\n\n.if BOO_COUNT\nboo_draw_inner:\n  ; A0 = index of boo to draw\n  addiu SP, SP, -0x20\n  sw    RA, 0x18(SP)\n  sw    S1, 0x14(SP)\n  sw    S0, 0x10(SP)\n  addu  S0, A0, R0\n  ; V0 = bss_boo_instances[A0]\n  sll   A0, A0, 0x10\n  sra   A0, A0, 0xe\n  lui   V0, hi(bss_boo_instances)\n  addu  V0, V0, A0\n  lw    V0, lo(bss_boo_instances)(V0)\n  ; If we have a non-zero in bss_boo_instances[A0], exit.\n  bne  V0, R0, boo_draw_inner_exit\n   NOP\n  ; V0 = bss_boo_model\n  lui   V0, hi(bss_boo_model)\n  lw    V0, lo(bss_boo_model)(V0)\n  ; If we have already loaded the boo model, jump ahead\n  bne  V0, R0, L800F7714\n   addiu    A0, R0, 106 ; Boo model_info index\n  jal   0x8003DBE0\n   addu  A1, R0, R0\n  addu  S1, V0, R0\n  jal   0x8003E174\n   addu  A0, S1, R0\n  lui   AT, hi(bss_boo_model)\n  sw    S1, lo(bss_boo_model)(AT)\n  j     L800F7728\n   sll   S0, S0, 0x10\nL800F7714:\n  ; A0 = bss_boo_model\n  lui   A0, hi(bss_boo_model)\n  lw    A0, lo(bss_boo_model)(A0)\n  jal   0x8003E320\n   sll   S0, S0, 0x10\n  addu  S1, V0, R0\nL800F7728:\n  sra   S0, S0, 0x10\n  sll   V0, S0, 2\n  ; bss_boo_instances[original index] = S1\n  lui   AT, hi(bss_boo_instances)\n  addu  AT, AT, V0\n  sw    S1, lo(bss_boo_instances)(AT)\n  lhu   V0, 0xa(S1)\n  ori   V0, V0, 2\n  sh    V0, 0xa(S1)\n  addiu A0, S1, 0x24\n  lui A1, 0x3f19\n  ori A1, A1, 0x999a ; 0.6\n  addu  A2, A1, R0 ; 0.6\n  jal   0x800A0D00\n   addu  A3, A1, R0 ; 0.6\n  lui   AT, 0x42C8 ; 100.000000\n  mtc1  AT, F0\n  NOP\n  swc1  F0, 0x30(S1)\n  ; Get the space data for boo_space_indices[original index]\n  sll   S0, S0, 1\n  lui   A0, hi(boo_space_indices)\n  addu  A0, A0, S0\n  jal   GetSpaceData\n   lh    A0, lo(boo_space_indices)(A0)\n  addiu A0, S1, 0xc\n  jal   0x800A0D50 ; posmodel\n   addiu A1, V0, 4\n  addiu    A0, R0, 8\n  addu  A1, S1, R0\n  addu  A2, R0, R0\n  jal   0x8003C314\n   addu  A3, R0, R0\nboo_draw_inner_exit:\n  lw    RA, 0x18(SP)\n  lw    S1, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x20\n\nboo_draw_outer:\n  addiu SP, SP, -0x18\n  sw    RA, 0x14(SP)\n  sw    S0, 0x10(SP)\n  ; bss_boo_model = 0\n  lui   AT, hi(bss_boo_model)\n  sw    R0, lo(bss_boo_model)(AT)\n  addu  S0, R0, R0\n  sll   A0, S0, 0x10\nboo_draw_outer_loop:\n  jal   boo_draw_inner\n   sra   A0, A0, 0x10\n  addiu S0, S0, 1\n  slti  V0, S0, BOO_COUNT\n  bne  V0, R0, boo_draw_outer_loop\n   sll   A0, S0, 0x10\n  lw    RA, 0x14(SP)\n  lw    S0, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n.endif ; BOO_COUNT\n\noverlaycall4:\n  addiu SP, SP, -0x18\n  sw    RA, 0x10(SP)\n  jal   InitCameras\n   addiu    A0, R0, 2 ; camera count\n  lui   A1, hi(data_screen_dimensions)\n  addiu A1, A1, lo(data_screen_dimensions)\n  jal   0x8001D4D4\n   addiu    A0, R0, 1\n  jal   setup_routine\n   NOP\n  jal   0x800584F0\n   addiu    A0, R0, 2\n  lui   A0, hi(show_next_star_spot)\n  addiu A0, A0, lo(show_next_star_spot)\n  addiu    A1, R0, 4101\n  addu  A2, R0, R0\n  jal   InitProcess\n   addu  A3, R0, R0\n  lw    RA, 0x10(SP)\n  jr    RA\n   addiu SP, SP, 0x18\n\nhydrate_events:\n  ADDIU SP SP 0xFFE8\n  SW RA, 0x0010(SP)\n\n  // Call for the MainFS to read in the ASM blob.\n  LUI A0 "+s+"\n  JAL "+o.getSymbol(i.Game.MP1_USA,"ReadMainFS")+"\n  ADDIU A0 A0 "+l+"\n\n  // Now, V0 has the location that the MainFSRead put the blob... it isn't\n  // where we want it, it is in the heap somewhere, so we will move it.\n\n  // This is a pretty simple copy loop\n  // T4 = Copy of V0, Current source RAM location\n  // T0 = Current dest RAM location\n  // T1 = Size of buffer remaining to copy\n  // T2 = Temp word register to do the copy\n  ADDU T4 V0 R0 // Copy V0 -> T4\n  LW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]\n  LW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]\nhydrate_events_loop_start:\n  LW T2 0(T4)\n  SW T2 0(T0)\n  ADDIU T4 T4 4\n  ADDIU T0 T0 4\n  ADDIU T1 T1 -4\n  BGTZ T1 hydrate_events_loop_start\n  NOP\n\n  // Now we can hydrate the table.\n  // T9 = V0 copy\n  // T4 = Dest buffer addr + 0x10, where the table really starts\n  ADDU T9 V0 R0 // Copy V0 -> T9\n  LW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]\n  JAL "+o.getSymbol(i.Game.MP1_USA,"EventTableHydrate")+'\n  ADDIU A0 T4 16 // ADDIU A0, T4, 16\n\n  // Well, we copied the buffer... now we should "free" it with this magic JAL...\n  // Free our T9 reference, which theoretically could be corrupted, but in practice not.\n  JAL '+o.getSymbol(i.Game.MP1_USA,"FreeMainFS")+"\n  ADDU A0 T9 R0\n\n  LW RA 0x10(SP)\n  JR RA\n  ADDIU SP SP 0x18\n.align 16\n\n; 800F9890\nrodata:\noverlaycalls:\n.word 0x00000000, overlaycall0\n.word 0x00010000, overlaycall1\n.word 0x00020000, overlaycall2\n.word 0x00030000, overlaycall3\n.word 0x00040000, overlaycall4\n.word 0xFFFF0000, 0\n\ndata_screen_dimensions:\n.word 0x00000000\n.word 0x00000000\n.word 0x43A00000 ; 320\n.word 0x43700000 ; 240\n\nfunc_800F663C_data0:\n.word 0x00030005, 0x00060000, 0x00010002, 0x00040000\n\nfunc_800F663C_data1:\n.word 0x00000000, 0x00000001, 0x00010001, 0x00030000\n\ndata_mystery_40s_list:\n.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0\n\n.align 4\nstar_space_indices:\n.halfword "+h.join(",")+"\n\n.align 4\ntoad_space_indices:\n.halfword "+g.join(",")+"\n\n.align 4\ndata_star_related_800F9920:\n.word 0x00000001, 0x00070003\n\n.align 4\ntoad_space_indices_repeat:\n.halfword "+g.join(",")+"\n\n.align 4\ndata_mystery_40s_list_2:\n.halfword 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0\n\nRO_800F9948:\n.halfword 6\nRO_800F994A:\n.halfword 0\n.word 0x0000FFFD, 0x0000FFF8, 0xFFFD0000, 0xFFFE0000, 0xFFFE0000, 0xFFFD0000\n\n.if BOO_COUNT\nboo_space_indices:\n.halfword "+c.join(",")+"\n.endif\n\n.align 16\n\nbss:\nbss_bowser_model: .word 0\n\nbss_koopa_model: .word 0\n\nbss_toad_model: .word 0\nbss_toad_instances: .word "+g.map(function(){return 0}).join(",")+"\n\n.if BOO_COUNT\nbss_boo_model: .word 0\nbss_boo_instances: .word "+c.map(function(){return 0}).join(",")+"\n.endif\n\n.align 16\n\n"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(82),o=n(2),s=n(134),l=n(0),c=n(23),u=n(25),d=n(1),p=n(41),f=n(24),h=n(3),m=n(55),_=n(18),g=n(36),v=n(42);t.MP2=new(function(e){function t(){var t=e.call(this)||this;return t.gameVersion=2,t.nintendoLogoFSEntry=[9,1],t.hudsonLogoFSEntry=[9,2],t.boardDefDirectory=10,t.MAINFS_READ_ADDR=95872,t.HEAP_FREE_ADDR=96256,t.TABLE_HYDRATE_ADDR=349836,t.SCENE_TABLE_ROM=824436,t.writeFullOverlay=!1,t}return i(t,e),t.prototype.onLoad=function(e,t,n){n||(this._extractBanks(e,t),this._extractItemShops(e,t)),this._parseBoardSelectIcon(e,t),this._readAnimationBackgrounds(e,t)},t.prototype.onAfterOverwrite=function(e,t,n){this._writeBanks(t,n),this._writeItemShops(t,n),this._writeGates(t,n),e.setUint16(267778,32832),e.setUint16(267786,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(267798,26),e.setUint16(493214,26),"number"==typeof n.animBgSet&&s.animationfs.setSetEntryCount(n.animBgSet,0)},t.prototype.onOverwritePromises=function(e,t,n){var r=t.bgDir,i=[this._writeBackground(r,e.bg.src,e.bg.width,e.bg.height),this._writeAnimationBackgrounds(t.animBgSet,e.bg.src,e.animbg,e.bg.width,e.bg.height),this._writeBackground(r+2,e.otherbg.largescene,320,240),this._writeOverviewBackground(r+6,e.bg.src),this.onWriteBoardSelectImg(e,t),this._writeBoardSelectIcon(e,t),this.onWriteBoardLogoImg(e,t),this._brandBootSplashscreen()];return Promise.all(i)},t.prototype.onWriteEvents=function(e){},t.prototype.hydrateSpace=function(e,t){e.type===l.Space.BANK&&o.addEventToSpace(t,e,c.createSpaceEvent(v.BankEvent))},t.prototype.onParseStrings=function(e,t){var n=t.str||{};if(n.boardSelect){var r=n.boardSelect,i=u.strings.read(r),a=i.split("\n"),o=a[0].indexOf(">")+1,s=a[0].indexOf("",o);e.name=a[0].substring(o,s),e.description=[a[1],a[2]].join("\n");for(var l=0,c=i.indexOf(this.getCharacterMap()[59],0);-1!==c;)l++,c=i.indexOf(this.getCharacterMap()[59],c+1);e.difficulty=l}},t.prototype.onWriteStrings=function(e,t){var n=t.str||{};if(n.boardSelect){(o=[]).push(11),o.push(6),(o=o.concat(u.strings._strToBytes(e.name||""))).push(25),o.push(4),(o=(o=o.concat([14,14])).concat(u.strings._strToBytes("Difficulty"))).push(25),o=o.concat(u.strings._strToBytes(" : "));if(e.difficulty>5||e.difficulty<1)o.push(59),(o=o.concat(u.strings._strToBytes(" "))).push(62),o=o.concat(u.strings._strToBytes(" "+e.difficulty.toString()));else for(var r=0;r<e.difficulty;r++)o.push(59);o.push(10),(o=o.concat(u.strings._strToBytes(e.description||""))).push(0);var i=d.arrayToArrayBuffer(o),a=n.boardSelect;u.strings.write(a,i)}if(n.boardNames&&n.boardNames.length){(o=[]).push(11),o.push(6),(o=o.concat(u.strings._strToBytes(e.name||""))).push(25),o.push(0);for(i=d.arrayToArrayBuffer(o),r=0;r<n.boardNames.length;r++){a=n.boardNames[r];u.strings.write(a,i)}}if(n.boardGreeting&&n.boardGreeting.length){(o=[]).push(11),(o=o.concat(u.strings._strToBytes("We're here, everyone!"))).push(10),(o=o.concat(u.strings._strToBytes("This is "))).push(6),o.push(15),(o=o.concat(u.strings._strToBytes((e.name||"")+"!!!"))).push(22),o.push(25),o.push(255),o.push(0);i=d.arrayToArrayBuffer(o);u.strings.write(n.boardGreeting[0],i),(o=[]).push(11),(o=o.concat(u.strings._strToBytes("Now, before this adventure begins,"))).push(10),(o=o.concat(u.strings._strToBytes("we must decide turn order."))).push(255),o.push(0),i=d.arrayToArrayBuffer(o),u.strings.write(n.boardGreeting[1],i)}if(n.boardWinner){(o=[]).push(11),(o=o.concat(u.strings._strToBytes("Well done, "))).push(17),(o=o.concat(u.strings._strToBytes("!"))).push(10),(o=o.concat(u.strings._strToBytes("You are the "))).push(7),o.push(15),(o=o.concat(u.strings._strToBytes("Super Star"))).push(22),o.push(25),o.push(10),(o=o.concat(u.strings._strToBytes("of "))).push(6),o.push(15),(o=o.concat(u.strings._strToBytes((e.name||"")+"!!!"))).push(22),o.push(25),o.push(0);i=d.arrayToArrayBuffer(o);u.strings.write(n.boardWinner,i)}if(n.boardPlayCount){var o;(o=[]).push(11),(o=(o=o.concat(u.strings._strToBytes(e.name||""))).concat([14,14,14,14,14,14])).push(17),(o=o.concat(u.strings._strToBytes(" Time(s)"))).push(0);i=d.arrayToArrayBuffer(o);u.strings.write(n.boardPlayCount,i)}},t.prototype.onChangeBoardSpaceTypesFromGameSpaceTypes=function(e,t){var n={0:l.Space.OTHER,3:l.Space.OTHER,5:l.Space.CHANCE,6:l.Space.ITEM,7:l.Space.BANK,8:l.Space.OTHER,9:l.Space.BATTLE,12:l.Space.BOWSER,14:l.Space.STAR,15:l.Space.BLACKSTAR,16:l.Space.OTHER,17:l.Space.OTHER};if(e.spaces.forEach(function(e){var t=e.type,r=n[t];void 0!==r&&(e.type=r)}),t.length){var r=t[0][0];isNaN(r)||(e.spaces[r].type=l.Space.START)}},t.prototype.onChangeGameSpaceTypesFromBoardSpaceTypes=function(e){var t,n=((t={})[l.Space.OTHER]=0,t[l.Space.BLUE]=1,t[l.Space.RED]=2,t[l.Space.MINIGAME]=0,t[l.Space.HAPPENING]=4,t[l.Space.STAR]=14,t[l.Space.CHANCE]=5,t[l.Space.START]=0,t[l.Space.SHROOM]=0,t[l.Space.BOWSER]=12,t[l.Space.ITEM]=6,t[l.Space.BATTLE]=9,t[l.Space.BANK]=7,t[l.Space.ARROW]=13,t[l.Space.BLACKSTAR]=15,t[l.Space.GAMEGUY]=0,t[l.Space.DUEL_BASIC]=0,t[l.Space.DUEL_START_BLUE]=0,t[l.Space.DUEL_START_RED]=0,t[l.Space.DUEL_POWERUP]=0,t[l.Space.DUEL_REVERSE]=0,t);e.spaces.forEach(function(e){var t=n[e.type];void 0!==t&&(e.type=t)})},t.prototype._readAnimationBackgrounds=function(e,t){if("number"==typeof t.animBgSet&&t.bgDir){var n=p.hvqfs.readBackgroundImgData(t.bgDir),r=s.animationfs.readAnimationBackgrounds(t.animBgSet,n,e.bg.width,e.bg.height);r&&r.length&&(e.animbg=r)}},t.prototype._writeAnimationBackgrounds=function(e,t,n,r,i){return new Promise(function(a,o){if(!isNaN(e)&&n&&n.length){for(var l,c=setTimeout(function(){return o("Failed to write animations")},45e3),u=new Array(n.length),d=[new Promise(function(e,n){var a=f.createContext(r,i),o=new Image;o.onload=function(){a.drawImage(o,0,0,r,i),l=a.getImageData(0,0,r,i),e()},o.src=t})],p=function(e){var t=new Promise(function(t){var a=f.createContext(r,i),o=new Image;o.onload=function(){a.drawImage(o,0,0,r,i),u[this.index]=a.getImageData(0,0,r,i),t()}.bind({index:e}),o.src=n[e]});d.push(t)},m=0;m<n.length;m++)p(m);Promise.all(d).then(function(t){for(var n=0;n<u.length;n++)s.animationfs.writeAnimationBackground(e,n,l,u[n],r,i);h.$$log("Wrote animations"),clearTimeout(c),a()},function(e){h.$$log("Error writing animations: "+e),o()})}else a()})},t.prototype.onParseBoardSelectImg=function(e,t){t.img.boardSelectImg&&(e.otherbg.boardselect=this._readImgFromMainFS(9,t.img.boardSelectImg,0))},t.prototype.onWriteBoardSelectImg=function(e,t){return new Promise(function(n,r){var i=t.img.boardSelectImg;if(i){var a=new Image,o=setTimeout(function(){return r("Failed to write board select for "+t.name)},45e3);a.onload=function(){var e=m.toArrayBuffer(a,64,48),t=_.mainfs.get(9,i),r=[{src:e,width:64,height:48,bpp:32}],s=g.toPack(r,16,0,t);_.mainfs.write(9,i,s),clearTimeout(o),n()},a.src=e.otherbg.boardselect}else n()})},t.prototype._parseBoardSelectIcon=function(e,t){if(t.img.boardSelectIconCoords){var n=this._readImgInfoFromMainFS(9,15,0),r=t.img.boardSelectIconCoords,i=r[0],a=r[1],o=m.cutFromWhole(n.src,n.width,n.height,32,i,a,32,32),s=d.arrayBufferToDataURL(o,32,32);e.otherbg.boardselecticon=s}},t.prototype._writeBoardSelectIcon=function(e,t){var n=this;return new Promise(function(r,i){if(t.img.boardSelectIconCoords){var a=e.otherbg.boardselecticon;if(a){var o,s,l=setTimeout(function(){return i("Failed to write board select icon for "+t.name)},45e3),c=[new Promise(function(e,t){(o=new Image).onload=function(){e()},o.src="img/details/mp2boardselectblank1.png"}),new Promise(function(e,t){(s=new Image).onload=function(){e()},s.src=a})];Promise.all(c).then(function(e){var i=n._readImgInfoFromMainFS(9,15,0),a=f.createContext(i.width,i.height),c=d.arrayBufferToImageData(i.src,i.width,i.height);a.putImageData(c,0,0);var u=t.img.boardSelectIconCoords,p=u[0],m=u[1];a.drawImage(o,p,m,32,32),a.drawImage(s,p,m,32,32);var v=a.getImageData(0,0,i.width,i.height).data.buffer,y=_.mainfs.get(9,15),A=[{src:v,width:i.width,height:i.height,bpp:32}],x=g.toPack(A,16,0,y);if(_.mainfs.write(9,15,x),t.img.boardSelectIconMask){var S=n._createBoardSelectIconHoverMask(s),b=_.mainfs.get(9,t.img.boardSelectIconMask),w=[{src:S,width:32,height:32,bpp:32}],E=g.toPack(w,16,0,b);_.mainfs.write(9,t.img.boardSelectIconMask,E)}h.$$log("Wrote board select icon"),clearTimeout(l),r()},function(e){h.$$log("Error writing board select icon: "+e),i()})}else r()}else r()})},t.prototype._createBoardSelectIconHoverMask=function(e){for(var t=m.toArrayBuffer(e,32,32),n=new ArrayBuffer(t.byteLength),r=new DataView(t),i=new DataView(n),a=!1,o=0;o<n.byteLength;o+=4)0===r.getUint32(o)?(i.setUint32(o,0),a=!0):i.setUint32(o,3149642751);return a?n:new ArrayBuffer(t.byteLength)},t.prototype.onParseBoardLogoImg=function(e,t){t.img.introLogoImg&&(e.otherbg.boardlogo=this._readImgFromMainFS(10,t.img.introLogoImg,0))},t.prototype.onWriteBoardLogoImg=function(e,t){return new Promise(function(n,r){var i=t.img.introLogoImg;if(i){var a=new Image,o=setTimeout(function(){return r("Failed to write logos for "+t.name)},45e3);a.onload=function(){var e=m.toArrayBuffer(a,260,120),t=_.mainfs.get(10,i),r=[{src:e,width:260,height:120,bpp:32}],s=g.toPack(r,16,0,t);_.mainfs.write(10,i,s),clearTimeout(o),n()},a.src=e.otherbg.boardlogo;var s=t.img.pauseLogoImg;if(s){var l=_.mainfs.get(10,s),c=[{src:new ArrayBuffer(31200),width:130,height:60,bpp:32}],u=g.toPack(c,16,0,l);_.mainfs.write(10,s,u)}}else n()})},t.prototype._writeOverviewBackground=function(e,t){return new Promise(function(n,r){var i=f.createContext(320,240),a=new Image,o=setTimeout(function(){return r("Failed to write bg "+e)},45e3);a.onload=function(){i.drawImage(a,0,-10,320,240);var t=i.getImageData(0,0,320,240);p.hvqfs.writeBackground(e,t,320,240),clearTimeout(o),n()},a.src=t})},t.prototype.getAudioMap=function(){return["","Story One","Go Lucky","Welcome to Mario Land","Laboratory","Rules Land","Credits","In the Pipe","Western Land","Pirate Land","Space Land","Horror Land","Mystery Land","Bowser Land","Adventure Begins","The Adventure Ends","Ending","Star Spot","Bowser's Theme","A Ways to Go","How Many","Take the Coin","Let the Game Begin","","","","","Going for the Coins","Not Gonna Lose","Keepin' on the Path","Couldn't be Better","Know What I Mean?","That's All of It","Let's Have Some Fun","The Blue Skies Yonder","Chance Time","Going Somewhere","Duel!","No Fright, No Fear","Don't Look Back","Got an Item","This Way That","Walking Underwater","Spinning Polka","Spinning Polka 2","Spinning Polka 3","","","","","Mini-Game Land","Woody","Mini-Game Park","Battle Start","Mini-Game Stadium","","Coaster","","The Way to Play","The Star Appears","Bowser Appears","I Can Do It!","Bowser's Parade","Ending","Story Intro 2","Story Intro 3","Mini-Game Coaster Results","Drum Roll","Win (One Winner)","Lose","","Know What I Mean","Instant Replay","Coaster (Double Mix)","Coaster (Single Mix)","Coaster (Hip Hip Mix)","Coaster (Duo Mix)","Coaster (Hermit Mix)","Coaster (Speed Mix)","Coaster (Survival Mix)"]},t.prototype.getCharacterMap=function(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:"\n",11:"",12:"",13:"\t",14:"\t",16:" ",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",33:"",34:"",35:"",36:"",37:"",38:"",39:"",40:"",41:"",42:"",43:"",44:"",58:"",59:"",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",128:'"',129:"",130:",",131:"",133:".",192:"",193:"",194:"!",195:"?",255:""}},t}(a.AdapterBase))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(82),o=n(2),s=n(0),l=n(3),c=n(23),u=n(25),d=n(1),p=n(58),f=n(55),h=n(18),m=n(36),_=n(24),g=n(71),v=n(57),y=n(16),A=n(135),x=n(136),S=n(85),b=n(42),w=n(231),E=n(232);t.MP3=new(function(e){function t(){var t=e.call(this)||this;return t.gameVersion=3,t.nintendoLogoFSEntry=[17,1],t.hudsonLogoFSEntry=[17,2],t.boardDefDirectory=19,t.MAINFS_READ_ADDR=39952,t.HEAP_FREE_ADDR=40556,t.TABLE_HYDRATE_ADDR=965216,t.SCENE_TABLE_ROM=618228,t.writeFullOverlay=!0,t}return i(t,e),t.prototype.onLoad=function(e,t,n){n||(this._extractBanks(e,t),this._extractItemShops(e,t))},t.prototype.onCreateBoardOverlay=function(e,t){return w.createBoardOverlay(e,t)},t.prototype.onAfterOverwrite=function(e,t,n){e.setUint16(221422,32832),e.setUint16(221430,4194304-this.EVENT_MEM_SIZE>>>16),e.setUint16(221442,26),e.setUint16(300502,26);var r=y.scenes.getDataView(120);r.setUint32(48736,604110849),r.setUint32(48768,604110849);for(var i=y.scenes.getDataView(128),a=0,o=0,c=0;c<t.spaces.length;c++){var u=t.spaces[c];u.type===s.Space.BLUE&&a++,u.type===s.Space.RED&&o++}(a<14||o<1)&&(i.setUint32(154164,268435589),l.$$log("Patching for low space count."))},t.prototype.onOverwritePromises=function(e,t,n){var r=t.bgDir,i=[this._writeBackground(r,e.bg.src,e.bg.width,e.bg.height),this._writeBackground(r+1,e.otherbg.largescene,320,240),this._writeBackground(r+2,e.bg.src,320,240),this.onWriteBoardSelectImg(e,t),this.onWriteBoardLogoImg(e,t),this.onWriteBoardLogoTextImg(e,t),this._onWriteGateImg(e,t),this._brandBootSplashscreen()];return Promise.all(i)},t.prototype.onAfterSave=function(e){e.setUint32(52928,0),e.setUint32(523352,0),e.setUint32(523360,0)},t.prototype.onWriteEvents=function(e){},t.prototype.hydrateSpace=function(e,t){e.type===s.Space.BANK&&o.addEventToSpace(t,e,c.createSpaceEvent(b.BankEvent))},t.prototype.onChangeBoardSpaceTypesFromGameSpaceTypes=function(e,t){var n,r=!e.type||e.type===s.BoardType.NORMAL;if(r)n={0:s.Space.OTHER,3:s.Space.OTHER,5:s.Space.CHANCE,6:s.Space.ITEM,7:s.Space.BANK,8:s.Space.OTHER,9:s.Space.BATTLE,12:s.Space.BOWSER,14:s.Space.STAR,15:s.Space.GAMEGUY,16:s.Space.OTHER,17:s.Space.OTHER};else{if(e.type!==s.BoardType.DUEL)throw new Error("Unrecongized board type: "+e.type);n={1:s.Space.OTHER,2:s.Space.HAPPENING,3:s.Space.GAMEGUY,4:s.Space.OTHER,5:s.Space.DUEL_REVERSE,6:s.Space.DUEL_BASIC,7:s.Space.DUEL_START_RED,8:s.Space.MINIGAME,9:s.Space.DUEL_START_BLUE,10:s.Space.DUEL_POWERUP}}if(e.spaces.forEach(function(e){var t=n[e.type];void 0!==t&&(e.type=t)}),r&&t.length){var i=t[0][0];isNaN(i)||(e.spaces[i].type=s.Space.START)}},t.prototype.onChangeGameSpaceTypesFromBoardSpaceTypes=function(e){var t,n=((t={})[s.Space.OTHER]=0,t[s.Space.BLUE]=1,t[s.Space.RED]=2,t[s.Space.MINIGAME]=0,t[s.Space.HAPPENING]=4,t[s.Space.STAR]=14,t[s.Space.CHANCE]=5,t[s.Space.START]=0,t[s.Space.SHROOM]=0,t[s.Space.BOWSER]=12,t[s.Space.ITEM]=6,t[s.Space.BATTLE]=9,t[s.Space.BANK]=7,t[s.Space.ARROW]=13,t[s.Space.GAMEGUY]=15,t[s.Space.BLACKSTAR]=0,t[s.Space.DUEL_BASIC]=0,t[s.Space.DUEL_START_BLUE]=0,t[s.Space.DUEL_START_RED]=0,t[s.Space.DUEL_POWERUP]=0,t[s.Space.DUEL_REVERSE]=0,t);e.spaces.forEach(function(e){var t=n[e.type];void 0!==t&&(e.type=t)})},t.prototype.onCreateChainEvents=function(e,t){for(var n=function(n){var r,a=t[n],u=a[0],d=a[1],p=a[a.length-1],f=a[a.length-2],h=o.getConnections(p,e),m=void 0;if(h.length>1){if(h.length>2)throw"MP3 cannot support more than 2 split directions";var _=[];h.forEach(function(e){_.push(i(e))}),(b=[]).push(h[0]),b.push(h[1]),b.push(65535),b.push(f),b.push(h[1]),b.push(65535),b.push(f),b.push(h[0]),b.push(65535),b.push(0),(w=[]).push(_[0]),w.push(0),w.push(0),w.push(_[1]),w.push(0),w.push(0),w.push(n),w.push(a.length-2),w.push(1),w.push(_[1]),w.push(0),w.push(0),w.push(n),w.push(a.length-2),w.push(1),w.push(_[0]),w.push(0),w.push(0);var g=(r=null,_.forEach(function(n){"number"==typeof t[n].find(function(t){return e.spaces[t].subtype===s.SpaceSubtype.GATE})&&(r=n)}),r);m=null!=g?c.createSpaceEvent(A.ChainSplit3,{parameterValues:{spaceIndexArgs:b,chainArgs:w,hasgate:!0,prevSpace:t[g][0],altChain:[_.find(function(e){return e!==g}),0]}}):c.createSpaceEvent(A.ChainSplit3,{parameterValues:{spaceIndexArgs:b,chainArgs:w}}),o.addEventByIndex(e,p,m,!0)}else m=c.createSpaceEvent(x.ChainMerge3,{parameterValues:{chain:i(h[0]),prevSpace:f}}),o.addEventByIndex(e,p,m,!0);var v=function(t){for(var n=[],r=0;r<e.spaces.length;r++){var i=o.getConnections(r,e);i.indexOf(t)>=0&&n.push(r)}return n}(u);if(v.length){var y=[];v.forEach(function(e){y.push(i(e))});var b,w,E=[];if(y.forEach(function(e){E.push(t[e])}),v.length>=2)(b=[]).push(d),b.push(v[0]),b.push(65535),b.push(v[1]),b.push(v[0]),b.push(65535),b.push(v[1]),b.push(d),b.push(65535),b.push(0),(w=[]).push(n),w.push(1),w.push(0),w.push(y[0]),w.push(E[0].length-1),w.push(1),w.push(y[1]),w.push(E[1].length-1),w.push(1),w.push(y[0]),w.push(E[0].length-1),w.push(1),w.push(y[1]),w.push(E[1].length-1),w.push(1),w.push(n),w.push(1),w.push(0),m=c.createSpaceEvent(A.ChainSplit3,{parameterValues:{spaceIndexArgs:b,chainArgs:w,reverse:!0},executionType:s.EventExecutionType.DIRECT}),o.addEventByIndex(e,u,m,!0);else 1===v.length&&(m=c.createSpaceEvent(x.ChainMerge3,{parameterValues:{chain:y[0],spaceIndex:E[0].length-1,prevSpace:d}}),o.addEventByIndex(e,u,m,!0))}else{o.getConnections(u,e).length>1?l.$$log("FIXME: branching isolated chain?"):((m=c.createSpaceEvent(S.ChainMerge,{parameterValues:{chain:n,spaceIndex:1}})).activationType=s.EventActivationType.BEGINORWALKOVER,o.addEventByIndex(e,u,m,!0))}},r=0;r<t.length;r++)n(r);function i(e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n}},t.prototype.onParseStrings=function(e,t){var n=t.str||{};if(n.boardSelect){if(!Array.isArray(n.boardSelect))throw new Error("Expected number[][]");var r=n.boardSelect[0],i=p.strings3.read("en",r[0],r[1]),a=i.split("\n"),o=a[0].indexOf(">")+2,s=a[0].indexOf("{",o);e.name=a[0].substring(o,s),e.description=[a[1],a[2]].join("\n");for(var l=0,c=i.indexOf(this.getCharacterMap()[59],0);-1!==c;)l++,c=i.indexOf(this.getCharacterMap()[59],c+1);e.difficulty=l}},t.prototype.onWriteStrings=function(e,t){var n=t.str||{},r=n.boardSelect;if(r&&r.length){(s=[]).push(11),s.push(5),s.push(15),(s=s.concat(u.strings._strToBytes(e.name||""))).push(22),s.push(25),s.push(15),(s=s.concat([32,32,32,32])).push(22),s.push(3),s.push(15),s=s.concat(u.strings._strToBytes("Difficulty: "));if(e.difficulty>5||e.difficulty<1)s.push(59),(s=s.concat(u.strings._strToBytes(" "))).push(62),s=s.concat(u.strings._strToBytes(" "+e.difficulty.toString()));else for(var i=0;i<e.difficulty;i++)s.push(59);s.push(22),s.push(25),s.push(10),(s=s.concat(u.strings._strToBytes(e.description||""))).push(0);var a=d.arrayToArrayBuffer(s),o=r[0];p.strings3.write("en",o[0],o[1],a),s.pop(),s.push(25),s.push(255),s.push(0),a=d.arrayToArrayBuffer(s),o=r[1],p.strings3.write("en",o[0],o[1],a)}if(n.boardGreeting){(s=[]).push(11),(s=s.concat(u.strings._strToBytes("You're all here!"))).push(10),(s=s.concat(this._createBoardGreetingBase(e.name))).push(11),(s=s.concat(u.strings._strToBytes("Now, before we begin, we need\nto determine the turn order."))).push(25),s.push(255),s.push(0);a=d.arrayToArrayBuffer(s);p.strings3.write("en",n.boardGreeting[0],n.boardGreeting[1],a)}if(n.boardGreetingDuel){(s=[]).push(11),(s=s.concat(u.strings._strToBytes("I've been waiting for you, "))).push(17),s.push(194),s.push(10),(s=s.concat(this._createBoardGreetingBase(e.name))).push(11),(s=s.concat(u.strings._strToBytes("And just as promised, if you win here..."))).push(25),s.push(255),s.push(0);a=d.arrayToArrayBuffer(s);p.strings3.write("en",n.boardGreetingDuel[0],n.boardGreetingDuel[1],a)}if(n.boardNames&&n.boardNames.length){var s;(s=[]).push(11),(s=s.concat(u.strings._strToBytes(e.name))).push(0);for(a=d.arrayToArrayBuffer(s),i=0;i<n.boardNames.length;i++){o=n.boardNames[i];p.strings3.write("en",o[0],o[1],a)}}},t.prototype._createBoardGreetingBase=function(e){var t=u.strings._strToBytes("Welcome to the legendary ");return t.push(5),t.push(15),(t=t.concat(u.strings._strToBytes(e))).push(22),t.push(25),t.push(194),t.push(25),t.push(255),t.push(11),(t=t.concat(u.strings._strToBytes("Here, you'll battle to become\nthe Superstar."))).push(25),t.push(255),t},t.prototype.onParseBoardSelectImg=function(e,t){t.img&&t.img.boardSelectImg&&(e.otherbg.boardselect=this._readImgFromMainFS(20,t.img.boardSelectImg,0))},t.prototype.onWriteBoardSelectImg=function(e,t){return new Promise(function(n,r){var i=t.img&&t.img.boardSelectImg;if(i){var a=new Image,o=setTimeout(function(){return r("Failed to write board select for "+t.name)},45e3);a.onload=function(){var e=f.toArrayBuffer(a,64,64),t=h.mainfs.get(20,i),r=[{src:e,width:64,height:64,bpp:32}],s=m.toPack(r,16,0,t);h.mainfs.write(20,i,s),clearTimeout(o),n()},a.src=e.otherbg.boardselect}else n()})},t.prototype.onParseBoardLogoImg=function(e,t){t.img&&t.img.splashLogoImg&&(e.otherbg.boardlogo=this._readImgFromMainFS(19,t.img.splashLogoImg,0),e.otherbg.boardlogotext=this._readImgFromMainFS(19,t.img.splashLogoTextImg,0))},t.prototype.onWriteBoardLogoImg=function(e,t){return new Promise(function(n,r){var i=t.img&&t.img.splashLogoImg;if(i){var a=new Image,o=setTimeout(function(){return r("Failed to write logos for "+t.name)},45e3);a.onload=function(){var e=f.toArrayBuffer(a,226,120),t=h.mainfs.get(19,i),r=[{src:e,width:226,height:120,bpp:32}],s=m.toPack(r,16,0,t);h.mainfs.write(19,i,s),clearTimeout(o),n()},a.src=e.otherbg.boardlogo;var s=t.img.pauseLogoImg;if(s){var l=h.mainfs.get(19,s),c=[{src:new ArrayBuffer(3e4),width:150,height:50,bpp:32}],u=m.toPack(c,16,0,l);h.mainfs.write(19,s,u)}}else n()})},t.prototype.onWriteBoardLogoTextImg=function(e,t){return new Promise(function(n,r){var i=t.img&&t.img.splashLogoTextImg;if(i){var a=new Image,o=setTimeout(function(){return r("Failed to write logo text for "+t.name)},45e3);a.onload=function(){var e=f.toArrayBuffer(a,226,36),t=h.mainfs.get(19,i),r=[{src:e,width:226,height:36,bpp:32}],s=m.toPack(r,16,0,t);h.mainfs.write(19,i,s),clearTimeout(o),n()},a.src=e.otherbg.boardlogotext}else n()})},t.prototype._onWriteGateImg=function(e,t){return new Promise(function(e,n){var r=t.img&&t.img.gateImg;if(r){var i=[64,64],a=i[0],o=i[1],s=_.createContext(a,o),l=new Image,c=setTimeout(function(){return n("Failed to write gate image for "+t.name)},45e3);l.onload=function(){s.drawImage(l,0,0,a,o);var t=s.getImageData(0,0,a,o),n=g.BMPfromRGBA(t.data.buffer,32,8),i=h.mainfs.get(19,366),u=v.FORM.unpack(i);v.FORM.replaceBMP(u,0,n[0],n[1]);var d=v.FORM.pack(u);h.mainfs.write(19,r,d),clearTimeout(c),e()},l.src="img/assets/genericgate.png"}else e()})},t.prototype.onWriteAudio=function(t,n,r){if(e.prototype.onWriteAudio.call(this,t,n,r),n.audioIndexOffset&&n.sceneIndex){var i=y.scenes.getDataView(n.sceneIndex),a=t.audioIndex;i.setUint16(n.audioIndexOffset+4,a),i.setUint16(n.audioIndexOffset+20,a)}},t.prototype.getAudioMap=function(){return["Opening","Opening Demo","Title Screen","Select File","Castle Grounds","","Staff Roll","Inside the Castle","Free-Play Room","Star Lift","Preparations","Rules Map","","The Adventure Begins","","The Adventure Ends","Begin Mini-Game","","Here's the Star","Still Going","Mini-Game End 1","Mini-Game End 2","Mini-Game End 3","Commence Attack!","Chilly Waters","Deep Bloober Sea","Spiny Desert","Woody Woods","Creepy Cavern","Waluigi","Good Luck!","The Winner is... Me!","A Winner is ME!","Foolish Bowser","","","Bowser Event","","Bring it On!","","Waluigi Appears!","VS Millennium Star!","Peaceful song, bells","","Defeat...","Aim","Don't Hurry","Panic!","Fighting Spirit","Got It?","Let's Get a Move On","Looking Ahead","Big Trouble!","What To Do!?!","Mustn't Panic","Nice and Easy","On Your Toes","Prologue 1","Prologue 2","Prologue 3","Genie's Theme","Jeanie's Theme","Start Battle","Bang Out a Drum Intro","Bang Out a Drum Fill","Stardust Battle","Chance Time","Game Guy Mini-Game","Item Mini-Game","Mushroom Power-Up!","Game Guy Winner!","Game Guy Loser!","Game Guy Dance","Drum Roll","Sound Config","","Battle Room","Gamble Room","Murmur","Tension Drums","","","","","",""]},t.prototype.getSoundEffectMap=function(e){return E.getSoundEffectMapMP3(e)},t.prototype.getCharacterMap=function(){return{0:"",1:"<BLACK>",2:"<DEFAULT>",3:"<RED>",4:"<PURPLE>",5:"<GREEN>",6:"<BLUE>",7:"<YELLOW>",8:"<WHITE>",9:"<SEIZURE>",10:"\n",11:"",12:"",13:"\t",14:"\t",17:"{0}",18:"{1}",19:"{2}",20:"{3}",21:"{4}",22:"{5}",32:" ",33:"",34:"",35:"",36:"",37:"",38:"",39:"",40:"",41:"",42:"",43:"",44:"",58:"",59:"",60:"+",61:"-",62:"x",63:"->",91:'"',92:"'",93:"(",94:")",95:"/",123:":",126:"&",128:'"',129:"",130:",",131:"",133:".",192:"",193:"",194:"!",195:"?",255:""}},t}(a.AdapterBase))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(11),o=n(54),s=n(42),l=n(51),c=n(3);t.createBoardOverlay=function(e,t){var n=t.mainfsEventFile,u=n[0],d=n[1],p=r.getSpacesOfSubType(i.SpaceSubtype.BOO,e),f=p.length?p[0]:e._deadSpace,h=r.getSpacesWithEvent(s.BooEvent.id,e);h.length||(h=[e._deadSpace]);for(var m=[],_=0;_<e.spaces.length;_++)e.spaces[_].star&&m.push(_);for(var g=r.getSpacesOfSubType(i.SpaceSubtype.TOAD,e),v=[],y=0;y<m.length;y++){for(var A=e.spaces[m[y]],x=Number.MAX_VALUE,S=m[y],b=0;b<g.length;b++){var w=g[b],E=e.spaces[w],P=a.distance(A.x,A.y,E.x,E.y);P<x&&(x=P,S=w)}v.push(S)}var C=r.getSpacesOfSubType(i.SpaceSubtype.BANKCOIN,e);for(_=0;_<2;_++)C.length<2&&C.push(e._deadSpace);var T=r.getSpacesOfSubType(i.SpaceSubtype.BANK,e),V=r.getSpacesWithEvent(s.BankEvent.id,e),F=[];for(V.forEach(function(t){for(var n=e.spaces[t],r=Number.MAX_VALUE,i=e._deadSpace,o=0;o<T.length;o++){var s=T[o],l=e.spaces[s],c=a.distance(n.x,n.y,l.x,l.y);c<r&&(r=c,i=s)}F.push(i)}),T.length||T.push(e._deadSpace),_=0;_<2;_++)V.length<2&&V.push(e._deadSpace);for(_=0;_<2;_++)F.length<2&&F.push(e._deadSpace);var D=r.getSpacesOfSubType(i.SpaceSubtype.ITEMSHOP,e),O=r.getSpacesWithEvent(s.ItemShopEvent.id,e),R=[];for(O.forEach(function(t){for(var n=e.spaces[t],r=Number.MAX_VALUE,i=e._deadSpace,o=0;o<D.length;o++){var s=D[o],l=e.spaces[s],c=a.distance(n.x,n.y,l.x,l.y);c<r&&(r=c,i=s)}R.push(i)}),D.length||D.push(e._deadSpace),_=0;_<2;_++)O.length<2&&O.push(e._deadSpace);for(_=0;_<2;_++)R.length<2&&R.push(e._deadSpace);var M=r.getSpacesWithEvent(s.Gate.id,e),L=[];for(M.forEach(function(t){var n=e.spaces[t];r.forEachEvent(e,function(e,t){if(e.id===s.Gate.id&&t===n&&!function(e){var t=!1;return L.forEach(function(n){n.gateSpaceIndex===e&&(t=!0)}),t}(e.parameterValues.gateSpaceIndex)){var r=e.parameterValues,i=r.gateEntryIndex,a=r.gateSpaceIndex,o=r.gateExitIndex,l=r.gatePrevChain,c=r.gateNextChain;L.push({gateEntryIndex:i,gateSpaceIndex:a,gateExitIndex:o,gatePrevChain:l,gateNextChain:c})}})}),_=0;_<2;_++)L.length<2&&L.push({gateEntryIndex:e._deadSpace,gateSpaceIndex:e._deadSpace,gateExitIndex:e._deadSpace,gatePrevChain:[0,0],gateNextChain:[0,0]});var B=[];for(_=0;_<e.spaces.length;_++)e.spaces[_].type===i.Space.ARROW&&B.push(e.spaces[_].rotation||0);var k=o.getSymbol(i.Game.MP3_USA,"AddArrowAngle"),I=l.getArrowRotationLimit(t),j=[],N=Math.min(I,B.length);for(_=0;_<N;_++)j.push("LUI A0 hi("+c.$$hex(a.getRawFloat32Format(B[_]))+")"),j.push("JAL "+k),j.push("MTC1 A0 F12");return'\n.org 0x801059A0\n\n; Symbols that are used, but unknown\n.definelabel CORE_800A0550,0x800A0550\n.definelabel CORE_800A12D0,0x800A12D0\n.definelabel CORE_800A12D4,0x800A12D4\n.definelabel CORE_800A12D8,0x800A12D8\n.definelabel CORE_800A1764,0x800A1764\n.definelabel CORE_800C9520,0x800C9520\n.definelabel CORE_800C9930,0x800C9930\n.definelabel CORE_800CB99C,0x800CB99C\n.definelabel CORE_800CCF58,0x800CCF58\n.definelabel CORE_800CD058,0x800CD058\n.definelabel CORE_800CD059,0x800CD059\n.definelabel CORE_800CD05D,0x800CD05D\n.definelabel CORE_800CD05E,0x800CD05E\n.definelabel CORE_800CD065,0x800CD065\n.definelabel CORE_800CD06D,0x800CD06D\n.definelabel CORE_800CD096,0x800CD096\n.definelabel CORE_800CD098,0x800CD098\n.definelabel CORE_800CD0A8,0x800CD0A8\n.definelabel CORE_800CD0AA,0x800CD0AA\n.definelabel CORE_800CD0AC,0x800CD0AC\n.definelabel CORE_800CD0AE,0x800CD0AE\n.definelabel CORE_800CD0B2,0x800CD0B2\n.definelabel CORE_800CDBC8,0x800CDBC8\n.definelabel CORE_800CDD58,0x800CDD58\n.definelabel CORE_800CE198,0x800CE198\n.definelabel CORE_800D037C,0x800D037C\n.definelabel CORE_800D03F8,0x800D03F8\n.definelabel CORE_800D110C,0x800D110C ; v & 1 == player is CPU, holds other bits?\n.definelabel CORE_800D110E,0x800D110E ; u16, holds coins temporarily\n.definelabel CORE_800D1123,0x800D1123 ; bool bowser suit. set at 800E3234\n.definelabel CORE_800D112C,0x800D112C ; points to player "object"\n.definelabel CORE_800D51F8,0x800D51F8\n.definelabel CORE_80100F94,0x80100F94\n.definelabel CORE_80100F95,0x80100F95\n.definelabel CORE_80100F9F,0x80100F9F\n.definelabel CORE_80100FA8,0x80100FA8\n.definelabel CORE_80100FF4,0x80100FF4\n.definelabel CORE_80101040,0x80101040\n.definelabel CORE_801011FC,0x801011FC\n.definelabel CORE_801014A0,0x801014A0\n.definelabel CORE_80101734,0x80101734\n.definelabel CORE_8010197C,0x8010197C\n.definelabel CORE_80101980,0x80101980\n.definelabel CORE_801019C4,0x801019C4\n.definelabel CORE_80105702_window_id,0x80105702\n.definelabel CORE_8010570C,0x8010570C\n\n; Item constants\n.definelabel ITEM_SKELETON_KEY,0x1\n.definelabel ITEM_CELLULAR_SHOPPER,0x4\n.definelabel ITEM_LUCKY_LAMP,0x9\n.definelabel ITEM_BOO_REPELLANT,0xC\n.definelabel ITEM_KOOPA_CARD,0xF\n.definelabel ITEM_LUCKY_CHARM,0x11\n\n.definelabel MAX_PLAYER_STAR_COUNT,0x63\n\n; CORE_800CD096\n; CORE_800CD098 ; persistent storage area?\n\n.definelabel BANK_COUNT,'+T.length+"\n.definelabel SHOP_COUNT,"+D.length+"\n.definelabel GATE_COUNT,"+L.length+"\n.definelabel STAR_COUNT,"+m.length+"\n.definelabel BOO_COUNT,"+p.length+'\n\nmain:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nlui   A0, hi(overlaycalls)\naddiu A0, A0, lo(overlaycalls)\nlui   A1, hi(CORE_800A1764)\njal   0x800359E0\n lh    A1, lo(CORE_800A1764)(A1)\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n      NOP\n      NOP\n\nfunc_80105E80:\nlui   V0, hi(CORE_800CD05D)\nlb    V0, lo(CORE_800CD05D)(V0)\nlui   AT, hi(CORE_800CD05E)\naddu  AT, AT, V0\nlb    V0, lo(CORE_800CD05E)(AT)\nsll   V0, V0, 1\nlui   AT, hi(D_8011D2C0)\naddu  AT, AT, V0\njr    RA\n lh    V0, lo(D_8011D2C0)(AT)\n\nfunc_80105EA8:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   S4, hi(CORE_800CD058)\naddiu S4, S4, lo(CORE_800CD058)\nmove  S1, R0\nlui   S3, hi(D_8011D290)\naddiu S3, S3, lo(D_8011D290)\nlui   S2, hi(D_8011D280)\naddiu S2, S2, lo(D_8011D280)\nL80105EE0:\njal   GetRandomByte\n       NOP\njal   GetRandomByte\n andi  S0, V0, 7\nandi  A0, V0, 7\nbeq   S0, A0, L80105F50\n sll   V1, A0, 1\naddu  A3, V1, S3\nlh    V0, 0(A3)\nslt   V0, S0, V0\nbnezl V0, L80105F54\n addiu S1, S1, 1\nsll   A1, S0, 1\naddu  A2, A1, S3\nlh    V0, 0(A2)\nslt   V0, A0, V0\nbnezl V0, L80105F54\n addiu S1, S1, 1\naddu  A0, A1, S2\nlh    A1, 0(A0)\naddu  V1, V1, S2\nlhu   V0, 0(V1)\nsh    V0, 0(A0)\nsh    A1, 0(V1)\nlh    A1, 0(A2)\nlhu   V0, 0(A3)\nsh    V0, 0(A2)\nsh    A1, 0(A3)\nL80105F50:\naddiu S1, S1, 1\nL80105F54:\nslti  V0, S1, 0x3c\nbnez  V0, L80105EE0\n       NOP\nmove  S1, R0\nlui   A0, hi(D_8011D280)\naddiu A0, A0, lo(D_8011D280)\naddu  V1, S4, S1\nL80105F70:\nsll   V0, S1, 1\naddu  V0, V0, A0\nlbu   V0, 1(V0)\nsb    V0, 6(V1)\naddiu S1, S1, 1\nslti  V0, S1, 8\nbnez  V0, L80105F70\n addu  V1, S4, S1\nlw    RA, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\nfunc_80105FB0:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   V0, hi(CORE_800CD05D)\nlbu   V0, lo(CORE_800CD05D)(V0)\naddiu V0, V0, 1\nlui   AT, hi(CORE_800CD05D)\nsb    V0, lo(CORE_800CD05D)(AT)\nsll   V0, V0, 0x18\nsra   V0, V0, 0x18\nslti  V0, V0, 8\nbnez  V0, L8010602C\n       NOP\nlui   S0, hi(CORE_800CD065)\nlb    S0, lo(CORE_800CD065)(S0)\nlui   AT, hi(CORE_800CD05D)\nsb    R0, lo(CORE_800CD05D)(AT)\njal   0x80035FDC\n li    A0, 4\njal   func_80105EA8\n       NOP\nlui   V1, hi(CORE_800CD05E)\nlb    V1, lo(CORE_800CD05E)(V1)\nbne   S0, V1, L8010602C\n       NOP\nlui   V0, hi(CORE_800CD065)\nlbu   V0, lo(CORE_800CD065)(V0)\nlui   AT, hi(CORE_800CD05E)\nsb    V0, lo(CORE_800CD05E)(AT)\nlui   AT, hi(CORE_800CD065)\nsb    V1, lo(CORE_800CD065)(AT)\nL8010602C:\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\ndraw_star_space_state:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\nmove  S0, R0\nlui   S2, hi(D_8011D2A0)\naddiu S2, S2, lo(D_8011D2A0)\nsll   V0, S0, 1\nL80106068:\naddu  V0, V0, S2\nlh    A0, 0(V0)\njal   0x80035FDC\n addiu S0, S0, 1\nslti  V0, S0, STAR_COUNT\nbnez  V0, L80106068\n sll   V0, S0, 1\nlb    V0, 5(S1)\naddu  V0, S1, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(star_space_indices)\naddu  A0, A0, V0\nlh    A0, lo(star_space_indices)(A0)\njal   SetSpaceType\n li    A1, 14 ; Star space type\nlb    V0, 5(S1)\naddu  V0, S1, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(D_8011D2A0)\naddu  A0, A0, V0\njal   0x8003602C ; board feature enabled?\n lh    A0, lo(D_8011D2A0)(A0)\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_801060E0:\nlui   A2, hi(CORE_800CD058)\naddiu A2, A2, lo(CORE_800CD058)\nmove  V1, R0\nlui   A3, hi(star_space_indices)\naddiu A3, A3, lo(star_space_indices)\nsll   A0, A0, 0x10\nsra   A0, A0, 0x10\nlui   T0, hi(D_8011D2A0)\naddiu T0, T0, lo(D_8011D2A0)\nsll   A1, V1, 1\nL80106108:\naddu  V0, A1, A3\nlh    V0, 0(V0)\nbnel  A0, V0, L8010613C\n addiu V1, V1, 1\nlb    V0, 5(A2)\naddu  V0, A2, V0\nlb    V0, 6(V0)\nbne   V1, V0, L80106148\n addu  V0, A1, T0\nlbu   V0, 1(V0)\nsb    V0, 0xe(A2)\nj     L8010614C\n li    V0, 1\nL8010613C:\nslti  V0, V1, STAR_COUNT\nbnez  V0, L80106108\n sll   A1, V1, 1\nL80106148:\nmove  V0, R0\nL8010614C:\njr    RA\n       NOP\n\nfunc_80106154:\naddiu SP, SP, -0x50\nsw    RA, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F28, 0x48(SP)\nsdc1  F26, 0x40(SP)\nsdc1  F24, 0x38(SP)\nsdc1  F22, 0x30(SP)\njal   0x8004EE68\n sdc1  F20, 0x28(SP)\nlw    S0, 0x8c(V0)\njal   PlaySound\n li    A0, 283\nli    A0, 58\njal   0x800D90C8\n move  A1, R0\nlui   AT, hi(D_8011FABC)\nsw    V0, lo(D_8011FABC)(AT)\nmove  S1, V0\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\njal   0x800461B4\n lh    A0, 0(V0)\nlhu   V0, 0xa(S1)\nori   V0, V0, 4\nsh    V0, 0xa(S1)\njal   0x800ECC54\n move  A0, S1\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, S0, 8\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S1)\nlui A0, 0xB\nori A0, A0, 4\njal   0x8000CED8\n li    A1, 2729\nsll   V0, V0, 0x10\nsra   S3, V0, 0x10\nmove  S0, S3\nlui   A1, 0x4000\nlui   A2, 0x41a0\nlui   A3, 0x3f80\njal   0x8000CD00\n move  A0, S0\nlui   A1, 0x41f0\njal   0x8000D018\n move  A0, S0\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n move  A0, S0\nmove  A0, S0\njal   0x8001C8A8\n li    A1, 1\nmtc1  R0, F20\nmove  S0, R0\nli    AT, 0x3F000000 ; 0.500000\nmtc1  AT, F24\nsll   S2, S3, 0x10\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F22\nL8010626C:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nadd.s F20, F20, F24\nmul.s F4, F20, F22\nmfc1  A1, F4\n      NOP\njal   0x8000D018\n sra   A0, S2, 0x10\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 6\nbnez  V0, L8010626C\n       NOP\nmove  S0, R0\nli    AT, 0x3ECC0000 ; 0.398438\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nsll   S2, S3, 0x10\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F22\nL801062CC:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nsub.s F20, F20, F24\nmul.s F4, F20, F22\nmfc1  A1, F4\n      NOP\njal   0x8000D018\n sra   A0, S2, 0x10\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L801062CC\n       NOP\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\n      NOP\nmul.s F0, F20, F0\nmfc1  A1, F0\n      NOP\njal   0x8000D018\n move  A0, S3\njal   SleepProcess\n li    A0, 30\njal   PlaySound\n li    A0, 306\nmtc1  R0, F22\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F28\nli    AT, 0x3F190000 ; 0.597656\nori   AT, AT, 0x999a\nmtc1  AT, F26\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F24\nmove  S0, S3\nfunc_80106364:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A2A0\n addiu A0, A0, 0x74\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F0\n      NOP\nadd.s F22, F22, F0\nc.le.s F28, F22\n      NOP\n      NOP\nbc1tl L801063BC\n sub.s F22, F22, F28\nL801063BC:\nc.lt.s F26, F20\n      NOP\nbc1f  L801063E0\n       NOP\nli    AT, 0x3D230000 ; 0.039795\nori   AT, AT, 0xd70a\nmtc1  AT, F0\n      NOP\nsub.s F20, F20, F0\nL801063E0:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nlwc1  F2, 0x30(S1)\nc.lt.s F24, F2\n      NOP\nbc1f  L80106424\n       NOP\nli    AT, 0x3F990000 ; 1.195312\nori   AT, AT, 0x999a\nmtc1  AT, F0\n      NOP\nsub.s F0, F2, F0\nswc1  F0, 0x30(S1)\nL80106424:\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\n      NOP\nmul.s F0, F20, F0\nmfc1  A1, F0\n      NOP\njal   0x8000D018\n move  A0, S0\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n move  A0, S0\nlwc1  F0, 0x30(S1)\nc.le.s F0, F24\n      NOP\n      NOP\nbc1t  L80106480\n li    V0, 1\nmove  V0, R0\nL80106480:\nc.le.s F20, F26\n      NOP\n      NOP\nbc1t  L80106498\n li    V1, 1\nmove  V1, R0\nL80106498:\nand   V0, V0, V1\nbeqz  V0, L801064BC\n       NOP\nmtc1  R0, F0\n      NOP\nc.eq.s F22, F0\n      NOP\nbc1t  L801064CC\n       NOP\nL801064BC:\njal   SleepVProcess\n       NOP\nj     func_80106364\n       NOP\nL801064CC:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\naddiu A0, A0, 0x74\njal   0x8008A2A0\n move  A1, R0\njal   0x8000D044\n move  A0, S3\nlui   AT, hi(D_8011FAB8)\nsw    R0, lo(D_8011FAB8)(AT)\njal   EndProcess\n move  A0, R0\nlw    RA, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F28, 0x48(SP)\nldc1  F26, 0x40(SP)\nldc1  F24, 0x38(SP)\nldc1  F22, 0x30(SP)\nldc1  F20, 0x28(SP)\njr    RA\n addiu SP, SP, 0x50\n\nfunc_80106544:\naddiu SP, SP, -0x20\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F20, 0x18(SP)\nlw    S0, 0(A0)\nli    AT, 0x40800000 ; 4.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x34(S0)\nli    AT, 0xBF190000 ; -0.597656\nori   AT, AT, 0x999a\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x38(S0)\njal   SleepProcess\n li    A0, 3\nmtc1  R0, F2\nlwc1  F0, 0x38(S0)\nc.eq.s F0, F2\n      NOP\nbc1t  L801065BC\n       NOP\nmtc1  R0, F20\nL801065A0:\njal   SleepVProcess\n       NOP\nlwc1  F0, 0x38(S0)\nc.eq.s F0, F20\n      NOP\nbc1f  L801065A0\n       NOP\nL801065BC:\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F20, 0x18(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_801065D0:\naddiu SP, SP, -0x30\nsw    RA, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nlui   S2, hi(CORE_800CD058)\naddiu S2, S2, lo(CORE_800CD058)\nlui   AT, hi(CORE_800A12D4)\nsw    R0, lo(CORE_800A12D4)(AT)\nmove  A0, R0\njal   0x800E5DD4\n move  A1, R0\nmove  S1, V0\njal   0x8004A520\n li    A0, 18 ; Here\'s the Star audio track\nlw    A0, 0(S1)\nli    A1, 2\nlui   A3, hi(tumble_face_tex_grin)\nlw    A3, lo(tumble_face_tex_grin)(A3)\njal   0x800EEFEC\n li    A2, 15\njal   0x800FFF44\n       NOP\nlb    V0, 5(S2)\nlui   AT, hi(CORE_800CD05E)\naddu  AT, AT, V0\nlb    V0, lo(CORE_800CD05E)(AT)\nsll   V0, V0, 2\nlui   A0, hi(D_8011FA78)\naddu  A0, A0, V0\njal   0x800D9B24\n lw    A0, lo(D_8011FA78)(A0)\nli    A0, 2\njal   InitFadeIn\n li    A1, 16\nL80106660:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L80106680\n       NOP\njal   SleepVProcess\n       NOP\nj     L80106660\n       NOP\nL80106680:\njal   0x800E6FCC\n       NOP\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F12\njal   0x800E9730\n       NOP\njal   func_80106544\n move  A0, S1\nlb    V0, 5(S2)\nbnez  V0, L801066D8\n       NOP\njal   0x80035F98\n li    A0, 4\nbnez  V0, L801066D8\n       NOP\nlb    V0, 1(S2)\nxori  V0, V0, 2\nsltiu V0, V0, 1\nsubu  V0, R0, V0\nandi  V0, V0, 0x5e09\nj     L801066F0\n ori   A1, V0, 0x5e00\nL801066D8:\nlb    V0, 1(S2)\nxori  V0, V0, 2\nsltiu V0, V0, 1\nsubu  V0, R0, V0\nandi  V0, V0, 0x5e09\nori   A1, V0, 0x5e01\nL801066F0:\nlh    A0, 8(S1)\nli    A2, -1\njal   0x8005B43C\n li    A3, -1\nlh    A0, 8(S1)\njal   0x80060C14\n li    A1, 1\njal   PlaySound\n li    A0, 679\nlh    A0, 8(S1)\njal   0x800EE2C0\n li    S0, 2\nsw    S0, 0x10(SP)\nlw    A0, 0(S1)\nli    A1, -1\nmove  A2, R0\njal   0x800D9D84\n li    A3, 6\nlh    A0, 8(S1)\njal   0x80060EA8\n li    A1, 1\nlw    V0, 0(S1)\nlw    V0, 0x3c(V0)\nlw    V0, 0x40(V0)\njal   0x8001FDE8\n lh    A0, 0(V0)\nlb    V0, 1(S2)\nbne   V0, S0, L80106778\n       NOP\njal   GetRandomByte\n       NOP\nandi  V0, V0, 1\nbeqz  V0, L8010679C\n       NOP\nL80106778:\nlb    V0, 5(S2)\naddu  V0, S2, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(D_8011D2C0)\naddu  A0, A0, V0\njal   GetSpaceData\n lh    A0, lo(D_8011D2C0)(A0)\nmove  S3, V0\nL8010679C:\njal   0x800E9748\n addiu A0, S3, 8\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F12\njal   0x800E9AC8\n       NOP\njal   SleepProcess\n li    A0, 5\nL801067BC:\njal   0x800E9AE0\n       NOP\nbeqz  V0, L801067DC\n       NOP\njal   SleepVProcess\n       NOP\nj     L801067BC\n       NOP\nL801067DC:\njal   SleepProcess\n li    A0, 5\nli    AT, 0x40E00000 ; 7.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nmove  S0, V0\nsll   V0, S0, 2\nlw    A0, 0(S1)\nlui   A1, hi(D_8011D2D0)\naddu  A1, A1, V0\njal   0x800EF070\n lw    A1, lo(D_8011D2D0)(A1)\nlw    A0, 0(S1)\nli    A1, -1\njal   0x800D9CE8\n li    A2, 2\nlb    V1, 1(S2)\nli    V0, 2\nbeq   V1, V0, L80106860\n move  A2, R0\nlui   A0, hi(func_80106154)\naddiu A0, A0, lo(func_80106154)\nli    A1, 18432\njal   InitProcess\n move  A3, R0\nlui   AT, hi(D_8011FAB8)\nsw    V0, lo(D_8011FAB8)(AT)\nsw    S3, 0x8c(V0)\njal   SleepProcess\n li    A0, 30\nj     L8010686C\n sll   V0, S0, 2\nL80106860:\nlui   AT, hi(D_8011FAB8)\nsw    R0, lo(D_8011FAB8)(AT)\nsll   V0, S0, 2\nL8010686C:\nlh    A0, 8(S1)\nlui   A1, hi(D_8011D2EC)\naddu  A1, A1, V0\nlw    A1, lo(D_8011D2EC)(A1)\nli    A2, -1\njal   0x8005B43C\n li    A3, -1\nlh    A0, 8(S1)\njal   0x80060C14\n li    A1, 1\nlh    A0, 8(S1)\njal   0x800EE2C0\n       NOP\nli    V0, 2\nsw    V0, 0x10(SP)\nlw    A0, 0(S1)\nli    A1, -1\nmove  A2, R0\njal   0x800D9D84\n li    A3, 6\nlh    A0, 8(S1)\njal   0x80060EA8\n li    A1, 1\njal   0x8004A994\n li    A0, 90\njal   SleepProcess\n li    A0, 30\nli    A0, 2\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 17\nli    V0, 1\nlui   AT, hi(CORE_800A12D4)\njal   0x80100130\n sw    V0, lo(CORE_800A12D4)(AT)\nlui   V0, hi(D_8011FABC)\nlw    V0, lo(D_8011FABC)(V0)\nlw    V0, 0x3c(V0)\nlw    V0, 0x40(V0)\njal   0x80046558\n lh    A0, 0(V0)\nlui   A0, hi(D_8011FABC)\njal   0x800D9B54\n lw    A0, lo(D_8011FABC)(A0)\nlui   V0, hi(CORE_800CD05D)\nlb    V0, lo(CORE_800CD05D)(V0)\nlui   AT, hi(CORE_800CD05E)\naddu  AT, AT, V0\nlb    V0, lo(CORE_800CD05E)(AT)\nsll   V0, V0, 2\nlui   A0, hi(D_8011FA78)\naddu  A0, A0, V0\njal   0x800D9AA4\n lw    A0, lo(D_8011FA78)(A0)\njal   0x800E60D8\n move  A0, S1\njal   0x800F8C74\n       NOP\njal   0x8004819C\n li    A0, 1\njal   0x8004849C\n       NOP\njal   SleepVProcess\n       NOP\nlw    RA, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x30\n\n; separate process that does "star get" celebration.\nfunc_8010698C:\naddiu SP, SP, -0x60\nsw    RA, 0x34(SP)\nsw    S4, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F28, 0x58(SP)\nsdc1  F26, 0x50(SP)\nsdc1  F24, 0x48(SP)\nsdc1  F22, 0x40(SP)\njal   0x8004EE68\n sdc1  F20, 0x38(SP)\nlw    S2, 0x8c(V0)\njal   GetPlayerStruct\n li    A0, -1\nmove  S4, V0\njal   PlaySound\n li    A0, 283\nli    A0, 26\njal   0x800D90C8\n move  A1, R0\nmove  S1, V0\nlhu   V0, 0xa(S1)\nori   V0, V0, 4\nsh    V0, 0xa(S1)\njal   0x800ECC54\n move  A0, S1\njal   GetPlayerStruct\n li    A0, -1\nlbu   S0, 0xf(V0)\nsll   S0, S0, 0x18\nsra   S0, S0, 0x18\nandi  S0, S0, 0xffff\njal   GetPlayerStruct\n li    A0, -1\nlbu   A1, 0x10(V0)\nsll   A1, A1, 0x18\nsra   A1, A1, 0x18\nmove  A0, S0\njal   GetAbsSpaceIndexFromChainSpaceIndex\n andi  A1, A1, 0xffff\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nli    V1, 146\nbne   V0, V1, L80106A9C\n       NOP\nlwc1  F2, 0x10(S2)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F0\nlw    A1, 0xc(S2)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S2)\njal   0x80089A10\n addiu A0, S1, 0xc\nlui   V0, hi(CORE_800A0550)\nlw    V0, lo(CORE_800A0550)(V0)\nlw    A1, 0x10(V0)\nlw    A2, 0x14(V0)\nlw    A3, 0x18(V0)\njal   0x80089A10\n addiu A0, SP, 0x10\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F0\n      NOP\nj     L80106B00\n swc1  F0, 0x30(S1)\nL80106A9C:\nlwc1  F6, 0x10(S2)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F2\nlwc1  F4, 0x14(S2)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\nlw    A1, 0xc(S2)\nadd.s F2, F6, F2\nmfc1  A2, F2\nadd.s F0, F4, F0\nmfc1  A3, F0\n      NOP\njal   0x80089A10\n addiu A0, S1, 0xc\nlui   V0, hi(CORE_800A0550)\nlw    V0, lo(CORE_800A0550)(V0)\nlw    A1, 0x10(V0)\nlw    A2, 0x14(V0)\nlw    A3, 0x18(V0)\njal   0x80089A10\n addiu A0, SP, 0x10\nli    AT, 0x420C0000 ; 35.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S1)\nL80106B00:\nlui A0, 0xb\nori A0, A0, 4\njal   0x8000CED8\n li    A1, 2729\nsll   V0, V0, 0x10\nsra   S3, V0, 0x10\nmove  S0, S3\nmove  A0, S0\nlui   A1, 0x3f80\nlui   A2, 0x41a0\njal   0x8000CD00\n move  A3, A1\nlui   A1, 0x4170\njal   0x8000D018\n move  A0, S0\nmove  A0, S0\njal   0x8001C8A8\n li    A1, 1\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n move  A0, S0\nmtc1  R0, F20\nmove  S0, R0\nli    AT, 0x3F000000 ; 0.500000\nmtc1  AT, F24\nsll   S2, S3, 0x10\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F22\nL80106B84:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nadd.s F20, F20, F24\nmul.s F8, F20, F22\nmfc1  A1, F8\n      NOP\njal   0x8000D018\n sra   A0, S2, 0x10\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 6\nbnez  V0, L80106B84\n       NOP\nmove  S0, R0\nli    AT, 0x3ECC0000 ; 0.398438\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nsll   S2, S3, 0x10\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F22\nL80106BE4:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nsub.s F20, F20, F24\nmul.s F8, F20, F22\nmfc1  A1, F8\n      NOP\njal   0x8000D018\n sra   A0, S2, 0x10\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L80106BE4\n       NOP\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F0\n      NOP\nmul.s F0, F20, F0\nmfc1  A1, F0\n      NOP\njal   0x8000D018\n move  A0, S3\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 306\nmtc1  R0, F22\nlw    V0, 0x24(S4)\nlwc1  F2, 0x10(V0)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F0\nlw    A1, 0xc(V0)\nsub.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(V0)\njal   0x80089A10\n addiu A0, SP, 0x10\naddiu A2, S1, 0xc\nmove  A0, A2\naddiu A1, SP, 0x10\njal   0x800ED35C\n li    A3, 40\nmove  S0, R0\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nli    AT, 0x3D4C0000 ; 0.049805\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nmtc1  R0, F24\nmove  S2, S3\nL80106CB8:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A2A0\n addiu A0, A0, 0x74\nsub.s F20, F20, F26\nc.lt.s F20, F24\n      NOP\n      NOP\nbc1f  L80106D08\n add.s F22, F22, F28\nmov.s F20, F24\nL80106D08:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S1, 0x24\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F0\n      NOP\nmul.s F0, F20, F0\nmfc1  A1, F0\n      NOP\njal   0x8000D018\n move  A0, S2\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n move  A0, S2\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x28\nbnez  V0, L80106CB8\n       NOP\njal   0x800D9B54\n move  A0, S1\njal   0x8000D044\n move  A0, S3\nlw    A0, 0x24(S4)\njal   0x800ECC0C\n addiu A0, A0, 0x18\nli    A0, -1\njal   0x800FF900\n li    A1, 5\nlui   V0, hi(D_8011D308)\nlw    V0, lo(D_8011D308)(V0)\nbeqz  V0, L80106DBC\n       NOP\njal   0x8004A670\n li    A0, 14\nj     L80106DC4\n       NOP\nL80106DBC:\njal   0x8004A520\n li    A0, 111 ; Fanfare audio track\nL80106DC4:\nlui   A0, hi(current_player_index)\naddiu A0, A0, lo(current_player_index)\nlb    V0, 0(A0)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlbu   V0, lo(p1_stars)(V0)\naddiu V0, V0, 1 ; add 1 star\nlui   AT, hi(p1_stars)\naddu  AT, AT, V1\nsb    V0, lo(p1_stars)(AT)\nlb    V1, 0(A0)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V1, V0, 3\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlb    V0, lo(p1_stars)(V0)\nslti  V0, V0, 0x64\nbnez  V0, L80106E30\n li    A0, -1\nli    V0, 99\nlui   AT, hi(p1_stars)\naddu  AT, AT, V1\nsb    V0, lo(p1_stars)(AT)\nL80106E30:\nli    A1, 6\njal   0x800F2304\n move  A2, R0\nlui   A1, hi(current_player_index)\nlb    A1, lo(current_player_index)(A1)\njal   0x8004ACE0\n li    A0, 610\nlui   V0, hi(D_8011D308)\nlw    V0, lo(D_8011D308)(V0)\nbeqz  V0, L80106EA8\n       NOP\njal   SleepProcess\n li    A0, 16\nlui   A0, hi(CORE_800CDBC8)\njal   0x80003A70\n lh    A0, lo(CORE_800CDBC8)(A0)\njal   0x8004A918\n li    A0, 111\njal   0x8004A880\n move  A0, R0\njal   SleepProcess\n li    A0, 110\nlui   A0, hi(CORE_800CDBC8)\nlh    A0, lo(CORE_800CDBC8)(A0)\njal   0x80003B70\n move  A1, R0\njal   0x8004A72C\n li    A0, 15\nj     L80106EB0\n       NOP\nL80106EA8:\njal   SleepProcess\n li    A0, 60\nL80106EB0:\njal   EndProcess\n move  A0, R0\nlw    RA, 0x34(SP)\nlw    S4, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F28, 0x58(SP)\nldc1  F26, 0x50(SP)\nldc1  F24, 0x48(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x60\n\nfunc_80106EEC:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S1, A0\nlui   AT, hi(CORE_800D037C)\nsh    R0, lo(CORE_800D037C)(AT)\nlui   A0, hi(func_8010698C)\naddiu A0, A0, lo(func_8010698C)\nli    A1, 18432\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\njal   0x8004EE68\n sw    S1, 0x8c(S0)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S0\njal   0x8004EE18\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800D037C)\nsh    V0, lo(CORE_800D037C)(AT)\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\n; View map handling?\n__PP64_INTERNAL_VIEW_MAP:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nli    S0, 1\nlui   AT, hi(CORE_800CDD58)\nsh    S0, lo(CORE_800CDD58)(AT) ; set 1 to indicate map is being viewed?\nlui   AT, hi(CORE_800D037C)\njal   0x8004EE68\n sh    R0, lo(CORE_800D037C)(AT)\nmove  A0, V0\njal   0x80047B80\n li    A1, 128\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   A0, hi(p1_controller)\naddu  A0, A0, V0\njal   0x8010067C\n lbu   A0, lo(p1_controller)(A0)\njal   0x8004EE68\n       NOP\nmove  A0, V0\njal   0x80047BAC\n li    A1, 128\nlui   AT, hi(CORE_800CDD58)\nsh    R0, lo(CORE_800CDD58)(AT)\nlui   AT, hi(CORE_800D037C)\nsh    S0, lo(CORE_800D037C)(AT)\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n; Could this be executed when returning to the board, from "view map" or other modes?\nfunc_80106FE8:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nlui   AT, hi(CORE_800D037C)\njal   0x8004EE68\n sh    R0, lo(CORE_800D037C)(AT)\nmove  A0, V0\njal   0x80047B80\n li    A1, 128\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   A0, hi(p1_controller)\naddu  A0, A0, V1\njal   0x8010067C\n lbu   A0, lo(p1_controller)(A0)\nli    V0, 1\nlui   AT, hi(CORE_800D037C)\nsh    V0, lo(CORE_800D037C)(AT)\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n; Helper for choosing an item from the item shop message box\nfunc_80107174:\naddiu SP, SP, -0x48\nsw    RA, 0x40(SP)\nsw    S5, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nmove  S5, A0\nmove  S2, R0\nlui   A1, hi(D_8011F8D0)\naddiu A1, A1, lo(D_8011F8D0)\nlwl   V0, 0(A1)\nlwr   V0, 3(A1)\nswl   V0, 0x20(SP)\nswr   V0, 0x23(SP)\nmove  S1, R0\nlui   S4, hi(current_player_index)\naddiu S4, S4, lo(current_player_index)\naddiu S3, SP, 0x18\nL801071C4:\nlb    V0, 0(S4)\nbne   S1, V0, L80107278\n sll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(CORE_800D110C)\naddu  AT, AT, V0\nlbu   V0, lo(CORE_800D110C)(AT)\nandi  V0, V0, 1\nbeqz  V0, L8010722C\n sll   S0, S1, 3\njal   func_8011CE94\n addiu S1, S1, 1\nmove  S2, V0\nlb    V1, 0(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, 1024\nj     L8010729C\n sh    V1, 0(V0)\nL8010722C:\nsubu  S0, S0, S1\nsll   S0, S0, 3\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\naddu  V0, SP, V0\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nlbu   A1, 0x20(V0)\njal   0x8005FE54\n addiu S1, S1, 1\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, -1\nj     L8010729C\n sh    V1, 0(V0)\nL80107278:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nsh    R0, 0(V0)\naddiu S1, S1, 1\nL8010729C:\nslti  V0, S1, 4\nbnez  V0, L801071C4\n       NOP\nbeqz  S2, L80107354\n li    A1, 2\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8005B63C\n li    A2, 2\nmove  S0, R0\naddiu S1, SP, 0x18\nL801072C8:\naddiu S2, S2, -1\nbnez  S2, L80107304\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S1\nli    V1, -32768\nsh    V1, 0(V0)\nL80107304:\nbnez  S0, L8010732C\n li    V0, 5\njal   0x800EDC40\n       NOP\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nj     L8010733C\n andi  V0, V0, 0xff\nL8010732C:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nL8010733C:\njal   0x8005F698\n sw    V0, 0x10(SP)\nbnez  S2, L801072C8\n addiu S0, S0, 1\nj     L8010736C\n move  S1, R0\nL80107354:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\njal   0x8005F744\n move  S1, R0\nL8010736C:\naddu  V0, S5, S1\nL80107370:\nlbu   V0, 0(V0)\nbnezl V0, L80107394\n addiu S1, S1, 1\nsll   A1, S1, 0x10\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8006010C\n sra   A1, A1, 0x10\naddiu S1, S1, 1\nL80107394:\nslti  V0, S1, 9\nbnez  V0, L80107370\n addu  V0, S5, S1\nmove  S1, R0\nli    S0, -1\nsll   A1, S1, 0x10\nL801073AC:\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nsra   A1, A1, 0x10\njal   0x8005E1D8\n move  A2, R0\nmove  S1, V0\nbeq   S1, S0, L801073E0\n addu  V0, S5, S1\nlbu   V0, 0(V0)\nbeqz  V0, L801073AC\n sll   A1, S1, 0x10\nj     L801073E4\n move  V0, S1\nL801073E0:\nli    V0, -1\nL801073E4:\nlw    RA, 0x40(SP)\nlw    S5, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x48\n\n; Helper for choosing an item from the item shop message box\nfunc_80107408:\naddiu SP, SP, -0x48\nsw    RA, 0x40(SP)\nsw    S5, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nmove  S2, R0\nlui   A1, hi(D_8011F8D0)\naddiu A1, A1, lo(D_8011F8D0)\nlwl   V0, 0(A1)\nlwr   V0, 3(A1)\nswl   V0, 0x20(SP)\nswr   V0, 0x23(SP)\nmove  S1, R0\naddiu S3, SP, 0x18\nli    S5, 1024\naddiu S4, SP, 0x20\nL80107454:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   S1, V0, L801074F8\n sll   V0, S1, 3\nsubu  V0, V0, S1\nsll   S0, V0, 3\nlui   V0, hi(CORE_800D110C)\naddu  V0, V0, S0\nlbu   V0, lo(CORE_800D110C)(V0)\nandi  V0, V0, 1\nbeql  V0, R0, L801074AC\n sll   S0, S1, 3\njal   func_8011D1F8\n addiu S1, S1, 1\nmove  S2, V0\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S3\nj     L8010751C\n sh    S5, 0(V0)\nL801074AC:\nsubu  S0, S0, S1\nsll   S0, S0, 3\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\naddu  V0, S4, V0\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nlbu   A1, 0(V0)\njal   0x8005FE54\n addiu S1, S1, 1\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, -1\nj     L8010751C\n sh    V1, 0(V0)\nL801074F8:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nsh    R0, 0(V0)\naddiu S1, S1, 1\nL8010751C:\nslti  V0, S1, 4\nbnez  V0, L80107454\n       NOP\nbeqz  S2, L801075D4\n li    A1, 2\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8005B63C\n li    A2, 2\nmove  S0, R0\naddiu S1, SP, 0x18\nL80107548:\naddiu S2, S2, -1\nbnez  S2, L80107584\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S1\nli    V1, -32768\nsh    V1, 0(V0)\nL80107584:\nbnez  S0, L801075AC\n li    V0, 5\njal   0x800EDC40\n       NOP\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nj     L801075BC\n andi  V0, V0, 0xff\nL801075AC:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nL801075BC:\njal   0x8005F698\n sw    V0, 0x10(SP)\nbnez  S2, L80107548\n addiu S0, S0, 1\nj     L801075E8\n       NOP\nL801075D4:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\njal   0x8005F744\n lh    A3, 0x1e(SP)\nL801075E8:\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nmove  A1, R0\njal   0x8005E1D8\n li    A2, 1\nlw    RA, 0x40(SP)\nlw    S5, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x48\n\nfunc_80107620:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   S1, hi(current_player_index)\nlb    S1, lo(current_player_index)(S1)\nmove  V1, R0\nL8010763C:\nbeq   V1, S1, L80107660\n sll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_stars)\naddu  AT, AT, V0\nlb    V0, lo(p1_stars)(AT)\nbnez  V0, L80107670\n li    V0, 4\nL80107660:\naddiu V1, V1, 1\nslti  V0, V1, 4\nbnez  V0, L8010763C\n li    V0, 4\nL80107670:\nbeq   V1, V0, L801076E4\n sll   V0, S1, 3\nsubu  V0, V0, S1\nsll   S0, V0, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, S0\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 0x32\nbnez  V0, L801076E8\n move  V1, R0\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nlui   V1, hi(p1_coins)\naddu  V1, V1, S0\nlh    V1, lo(p1_coins)(V1)\naddiu V1, V1, 0xa\nslt   V0, V0, V1\nbeqz  V0, L801076E4\n li    V0, 1\nlui   AT, hi(D_8011FAD4)\nsw    V0, lo(D_8011FAD4)(AT)\nlui   V0, hi(p1_stars)\naddu  V0, V0, S0\nlb    V0, lo(p1_stars)(V0)\nslti  V0, V0, MAX_PLAYER_STAR_COUNT\nbnez  V0, L8010773C\n       NOP\nL801076E4:\nmove  V1, R0\nL801076E8:\nbeq   V1, S1, L80107710\n sll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslti  V0, V0, 5\nbeqz  V0, L80107720\n li    V0, 4\nL80107710:\naddiu V1, V1, 1\nslti  V0, V1, 4\nbnez  V0, L801076E8\n li    V0, 4\nL80107720:\nbeq   V1, V0, L80107734\n li    V0, 2\nlui   AT, hi(D_8011FAD4)\nj     L8010773C\n sw    R0, lo(D_8011FAD4)(AT)\nL80107734:\nlui   AT, hi(D_8011FAD4)\nsw    V0, lo(D_8011FAD4)(AT)\nL8010773C:\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_80107750:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   S3, hi(current_player_index)\nlb    S3, lo(current_player_index)(S3)\nmove  S0, R0\naddiu V1, SP, 0x10\nli    A0, -1\nsll   V0, S0, 2\nL80107780:\naddu  V0, V0, V1\nsw    A0, 0(V0)\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L80107780\n sll   V0, S0, 2\nmove  S0, R0\naddiu S1, SP, 0x10\nli    S2, -1\nL801077A4:\njal   0x800EEA58\n move  A0, S0\nmove  V1, V0\nL801077B0:\nsll   V0, V1, 2\naddu  V0, V0, S1\nlw    V0, 0(V0)\nbeq   V0, S2, L801077CC\n sll   V0, V1, 2\nj     L801077B0\n addiu V1, V1, 1\nL801077CC:\naddu  V0, V0, S1\nsw    S0, 0(V0)\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L801077A4\n       NOP\njal   func_80107620\n       NOP\nlui   V1, hi(D_8011FAD4)\nlw    V1, lo(D_8011FAD4)(V1)\nli    V0, 1\nbne   V1, V0, L8010785C\n addiu A0, SP, 0x10\nmove  S0, R0\nsll   V0, S0, 2\nL80107808:\naddu  V0, V0, A0\nlw    V1, 0(V0)\nbeq   V1, S3, L80107834\n sll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_stars)\naddu  AT, AT, V0\nlb    V0, lo(p1_stars)(AT)\nbnez  V0, L8010784C\n       NOP\nL80107834:\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L80107808\n sll   V0, S0, 2\nj     L801078BC\n li    V0, 4\nL8010784C:\nlui   AT, hi(D_8011FAD8)\nsw    V1, lo(D_8011FAD8)(AT)\nj     L801078BC\n li    V0, 4\nL8010785C:\nlui   V0, hi(D_8011FAD4)\nlw    V0, lo(D_8011FAD4)(V0)\nbnez  V0, L801078BC\n li    V0, 4\nmove  S0, R0\naddiu A0, SP, 0x10\nsll   V0, S0, 2\nL80107878:\naddu  V0, V0, A0\nlw    V1, 0(V0)\nbeq   V1, S3, L801078A8\n sll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslti  V0, V0, 5\nbeqz  V0, L8010784C\n       NOP\nL801078A8:\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L80107878\n sll   V0, S0, 2\nli    V0, 4\nL801078BC:\nbne   S0, V0, L801078CC\n li    V0, 2\nlui   AT, hi(D_8011FAD4)\nsw    V0, lo(D_8011FAD4)(AT)\nL801078CC:\nlw    RA, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nfunc_801078E8:\naddiu SP, SP, -0x48\nsw    RA, 0x44(SP)\nsw    S6, 0x40(SP)\nsw    S5, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nmove  S5, A0\nmove  S6, A1\nmove  S4, A2\nmove  S2, R0\nlui   A1, hi(D_8011F8D0)\naddiu A1, A1, lo(D_8011F8D0)\nlwl   V0, 0(A1)\nlwr   V0, 3(A1)\nswl   V0, 0x20(SP)\nswr   V0, 0x23(SP)\nmove  S1, R0\naddiu S3, SP, 0x18\nL8010793C:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   S1, V0, L80107A18\n sll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(CORE_800D110C)\naddu  AT, AT, V0\nlbu   V0, lo(CORE_800D110C)(AT)\nandi  V0, V0, 1\nbeqz  V0, L801079CC\n sll   S0, S1, 3\nbnez  S6, L8010798C\n       NOP\njal   func_80107750\n       NOP\nlui   V0, hi(D_8011FAD4)\nlw    V0, lo(D_8011FAD4)(V0)\nj     L80107998\n addiu S2, V0, 1\nL8010798C:\nlui   V0, hi(D_8011FAD8)\nlw    V0, lo(D_8011FAD8)(V0)\naddiu S2, V0, 1\nL80107998:\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, 1024\nj     L80107A38\n sh    V1, 0(V0)\nL801079CC:\nsubu  S0, S0, S1\nsll   S0, S0, 3\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\naddu  V0, SP, V0\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nlbu   A1, 0x20(V0)\njal   0x8005FE54\n addiu S1, S1, 1\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, -1\nj     L80107A3C\n sh    V1, 0(V0)\nL80107A18:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nsh    R0, 0(V0)\nL80107A38:\naddiu S1, S1, 1\nL80107A3C:\nslti  V0, S1, 4\nbnez  V0, L8010793C\n       NOP\nbeqz  S2, L80107AF4\n li    A1, 2\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8005B63C\n li    A2, 2\nmove  S0, R0\naddiu S1, SP, 0x18\nL80107A68:\naddiu S2, S2, -1\nbnez  S2, L80107AA4\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S1\nli    V1, -32768\nsh    V1, 0(V0)\nL80107AA4:\nbnez  S0, L80107ACC\n li    V0, 5\njal   0x800EDC40\n       NOP\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nj     L80107ADC\n andi  V0, V0, 0xff\nL80107ACC:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nL80107ADC:\njal   0x8005F698\n sw    V0, 0x10(SP)\nbnez  S2, L80107A68\n addiu S0, S0, 1\nj     L80107B0C\n move  S1, R0\nL80107AF4:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\njal   0x8005F744\n move  S1, R0\nL80107B0C:\naddu  V0, S5, S1\nL80107B10:\nlbu   V0, 0(V0)\nbnezl V0, L80107B34\n addiu S1, S1, 1\nsll   A1, S1, 0x10\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8006010C\n sra   A1, A1, 0x10\naddiu S1, S1, 1\nL80107B34:\nslti  V0, S1, 4\nbnez  V0, L80107B10\n addu  V0, S5, S1\nmove  S1, R0\nli    S0, -1\nsll   A1, S1, 0x10\nL80107B4C:\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nsra   A1, A1, 0x10\njal   0x8005E1D8\n move  A2, S4\nbnez  S4, L80107B78\n move  S1, V0\nbne   S1, S0, L80107B7C\n addu  V0, S5, S1\nj     L80107B8C\n li    V0, -1\nL80107B78:\naddu  V0, S5, S1\nL80107B7C:\nlbu   V0, 0(V0)\nbeqz  V0, L80107B4C\n sll   A1, S1, 0x10\nmove  V0, S1\nL80107B8C:\nlw    RA, 0x44(SP)\nlw    S6, 0x40(SP)\nlw    S5, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x48\n\nfunc_80107BB4:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nmove  A1, R0\njal   func_801078E8\n li    A2, 1\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_80107BD4:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nli    A1, 1\njal   func_801078E8\n move  A2, R0\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\noverlaycall0:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nlui   AT, hi(CORE_800CD059)\nsb    R0, lo(CORE_800CD059)(AT)\nli    A0, 10\njal   InitObjSys\n move  A1, R0\nli    A0, 71\nmove  A1, R0\njal   0x80048228\n li    A2, 402\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n; does setup that only occurs once per board game\noverlaycall1:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nli    A0, 10\njal   InitObjSys\n move  A1, R0\n; set players onto the 0 chain\nmove  A0, R0\nmove  A1, R0\njal   SetPlayerOntoChain\n move  A2, R0\nli    A0, 1\nmove  A1, R0\njal   SetPlayerOntoChain\n move  A2, R0\nli    A0, 2\nmove  A1, R0\njal   SetPlayerOntoChain\n move  A2, R0\nli    A0, 3\nmove  A1, R0\njal   SetPlayerOntoChain\n move  A2, R0\njal   0x80035FDC\n li    A0, 3\njal   func_80105EA8\n       NOP\njal   0x8003602C\n li    A0, 18\nlui   V0, hi(bank_coin_total)\naddiu V0, V0, lo(bank_coin_total)\nsh    R0, 0(V0) ; clear the bank coins\nsh    R0, -6(V0)\nsh    R0, -8(V0)\nsh    R0, -0x1c(V0) ; 800CD098\njal   0x8004819C\n li    A0, 1\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nsetup_routine:\naddiu SP, SP, -0x38\nsw    RA, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F20, 0x30(SP)\nli    A0, 160\njal   InitObjSys\n li    A1, 40\nli    A0, 1\nli    A1, 255\nli    A2, 255\njal   0x80019514\n li    A3, 255\nli    A0, 2\nli    A1, 200\nli    A2, 200\njal   0x80019514\n li    A3, 200\nli    A0, '+t.bgDir+"\nli    A1, "+t.boardDefFile+"\nli    A2, "+t.pauseBgDir+"\njal   0x800F89D0 ; setup board?\n move  A3, R0\nlui   A0, hi(D_8011D31C)\njal   0x800EBCFC\n addiu A0, A0, lo(D_8011D31C)\nlui   A0, hi(D_8011D320)\njal   0x800EBD54\n addiu A0, A0, lo(D_8011D320)\n\n; begin arrow rotation\n"+j.join("\n")+"\n; end arrow rotation\n\nlui   A1, hi(boo_event)\naddiu A1, A1, lo(boo_event)\njal   0x800E2960\n move  A0, R0\nlui   A1, hi(func_8010F2FC)\naddiu A1, A1, lo(func_8010F2FC)\njal   0x800E2960\n li    A0, 1\nlui   A1, hi(func_8010F6C4)\naddiu A1, A1, lo(func_8010F6C4)\njal   0x800E2960\n li    A0, 9\nlui   A1, hi(func_8010F730)\naddiu A1, A1, lo(func_8010F730)\njal   0x800E2960\n li    A0, 2\nlui   A1, hi(D_80117C60)\naddiu A1, A1, lo(D_80117C60)\njal   0x800E2960\n li    A0, 3\nlui   A1, hi(D_8011093C)\naddiu A1, A1, lo(D_8011093C)\njal   0x800E2960\n li    A0, 4\nlui   A1, hi(D_80110BC8)\naddiu A1, A1, lo(D_80110BC8)\njal   0x800E2960\n li    A0, 5\nlui   A1, hi(D_8010FC24)\naddiu A1, A1, lo(D_8010FC24)\njal   0x800E2960\n li    A0, 6\nlui   A1, hi(D_80110194)\naddiu A1, A1, lo(D_80110194)\njal   0x800E2960\n li    A0, 7\nlui   A1, hi(D_801104E0)\naddiu A1, A1, lo(D_801104E0)\njal   0x800E2960\n li    A0, 8\nlui   A1, hi(D_80116F5C)\naddiu A1, A1, lo(D_80116F5C)\njal   0x800E2960\n li    A0, 10\nlui   A1, hi(D_801177DC)\naddiu A1, A1, lo(D_801177DC)\njal   0x800E2960\n li    A0, 11\nlui   A1, hi(D_80111018)\naddiu A1, A1, lo(D_80111018)\njal   0x800E2960\n li    A0, 14\nlui   A1, hi(D_801112D8)\naddiu A1, A1, lo(D_801112D8)\njal   0x800E2960\n li    A0, 15\nlui   A1, hi(D_80111678)\naddiu A1, A1, lo(D_80111678)\njal   0x800E2960\n li    A0, 16\nlui   A1, hi(D_80112074)\naddiu A1, A1, lo(D_80112074)\njal   0x800E2960\n li    A0, 17\nlui   A1, hi(D_80112BCC)\naddiu A1, A1, lo(D_80112BCC)\njal   0x800E2960\n li    A0, 18\nlui   A1, hi(barter_box_item_code)\naddiu A1, A1, lo(barter_box_item_code)\njal   0x800E2960\n li    A0, 19\nlui   A1, hi(game_guy_lucky_charm)\naddiu A1, A1, lo(game_guy_lucky_charm)\njal   0x800E2960\n li    A0, 20\nlui   A1, hi(D_80115B80)\naddiu A1, A1, lo(D_80115B80)\njal   0x800E2960\n li    A0, 21\nlui   A1, hi(D_80116DAC)\naddiu A1, A1, lo(D_80116DAC)\njal   0x800E2960\n li    A0, 12\nlui   A1, hi(D_801176A4)\naddiu A1, A1, lo(D_801176A4)\njal   0x800E2960\n li    A0, 13\nlui   A0, hi(D_8011C88C)\naddiu A0, A0, lo(D_8011C88C)\njal   0x800DA748\n move  S0, R0\nlui   S1, hi(D_8011D2C0)\naddiu S1, S1, lo(D_8011D2C0)\nsll   V0, S0, 1\nL80107F5C:\naddu  V0, V0, S1\nlh    A1, 0(V0)\njal   0x800EA6E0\n move  A0, S0\naddiu S0, S0, 1\nslti  V0, S0, 8\nbnez  V0, L80107F5C\n sll   V0, S0, 1\njal   0x80035F98\n li    A0, 14\nbeqz  V0, L80107F9C\n       NOP\njal   0x8003602C\n li    A0, 14\njal   func_80105FB0\n       NOP\n; drawing things\nL80107F9C:\njal   draw_star_space_state\n       NOP\njal   draw_millenium_stars\n       NOP\njal   draw_boo\n       NOP\njal   draw_bank_coins\n       NOP\njal   draw_gates_outer\n       NOP\njal   func_80108B24 ; bank?\n       NOP\njal   func_80108BA4\n       NOP\njal   func_80116AA0\n       NOP\njal   0x800EBDAC\n       NOP\nlw    RA, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F20, 0x30(SP)\njr    RA\n addiu SP, SP, 0x38\n\noverlaycall2:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\njal   0x8004A520\n li    A0, "+(e.audioIndex||0)+"\nli    V0, 24 ; TODO: Are these also the audio index?\nlui   AT, hi(CORE_800CE198)\nsh    V0, lo(CORE_800CE198)(AT)\njal   0x800F8D6C\n li    A0, 24\njal   InitCameras\n li    A0, 2\njal   setup_routine\n       NOP\n\nJAL hydrate_events\n NOP\n\n; Sets up shared happening space code.\nlui   A0, hi(shared_happening_event)\njal   0x800F8D48\naddiu A0, A0, lo(shared_happening_event)\n\n; Sets up necessary per turn events\nlui   A0, hi(D_8011E4D8_event_table)\njal   EventTableHydrate\naddiu A0, A0, lo(D_8011E4D8_event_table)\n\njal   0x800FF41C\n move  A0, R0\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nhydrate_events:\nADDIU SP SP 0xFFE8\nSW RA, 0x0010(SP)\n\n// Call for the MainFS to read in the ASM blob.\nLUI A0 "+u+"\nJAL "+o.getSymbol(i.Game.MP3_USA,"ReadMainFS")+"\nADDIU A0 A0 "+d+"\n\n// Now, V0 has the location that the MainFSRead put the blob... it isn't\n// where we want it, it is in the heap somewhere, so we will move it.\n\n// This is a pretty simple copy loop\n// T4 = Copy of V0, Current source RAM location\n// T0 = Current dest RAM location\n// T1 = Size of buffer remaining to copy\n// T2 = Temp word register to do the copy\nADDU T4 V0 R0 // Copy V0 -> T4\nLW T0 0x4(T4) // LW T0, 0x4(T4) [RAM dest]\nLW T1 0x8(T4) // LW T1, 0x8(T4) [Buffer size]\nhydrate_events_loop_start:\nLW T2 0(T4)\nSW T2 0(T0)\nADDIU T4 T4 4\nADDIU T0 T0 4\nADDIU T1 T1 -4\nBGTZ T1 hydrate_events_loop_start\nNOP\n\n// Now we can hydrate the table.\n// T9 = V0 copy\n// T4 = Dest buffer addr + 0x10, where the table really starts\nADDU T9 V0 R0 // Copy V0 -> T9\nLW T4 4(T9) // LW T4, 0x4(T9) [RAM dest]\nJAL "+o.getSymbol(i.Game.MP3_USA,"EventTableHydrate")+'\nADDIU A0 T4 16 // ADDIU A0, T4, 16\n\n// Well, we copied the buffer... now we should "free" it with this magic JAL...\n// Free our T9 reference, which theoretically could be corrupted, but in practice not.\nJAL '+o.getSymbol(i.Game.MP3_USA,"FreeMainFS")+"\nADDU A0 T9 R0\n\nLW RA 0x10(SP)\nJR RA\nADDIU SP SP 0x18\n\noverlaycall3:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\njal   InitCameras\n li    A0, 1\njal   setup_routine\n       NOP\njal   0x800FF41C\n li    A0, 1\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\ndraw_millenium_star_inner:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nsll   A0, A0, 0x10\nsra   A0, A0, 0xe\nlui   V0, hi(D_8011FA78)\naddu  V0, V0, A0\nlw    V0, lo(D_8011FA78)(V0)\nbnez  V0, L801081D4\n li    A0, 58\njal   0x800D90C8\n move  A1, R0\nmove  S2, V0\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\njal   0x800461B4\n lh    A0, 0(V0)\nlui   V0, hi(D_8011FA70)\nlw    V0, lo(D_8011FA70)(V0)\nbnez  V0, L8010812C\n sll   S0, S0, 0x10\nlui   AT, hi(D_8011FA70)\nsw    S2, lo(D_8011FA70)(AT)\nL8010812C:\nsra   S0, S0, 0x10\nsll   S1, S0, 2\nlui   AT, hi(D_8011FA78)\naddu  AT, AT, S1\nsw    S2, lo(D_8011FA78)(AT)\nlhu   V0, 0xa(S2)\nori   V0, V0, 2\nsh    V0, 0xa(S2)\naddiu A0, S2, 0x24\nlui   A1, 0x3f19\nori   A1, A1, 0x999a\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S2)\nlui   A1, 0x40c0\nlui   A2, 0x4000\njal   0x800EDB98\n move  A0, S2\nlui   AT, hi(D_8011FA98)\naddu  AT, AT, S1\nsw    V0, lo(D_8011FA98)(AT)\nsll   S0, S0, 1\nlui   A0, hi(D_8011D37C)\naddu  A0, A0, S0\njal   GetSpaceData\n lh    A0, lo(D_8011D37C)(A0)\naddiu A0, S2, 0xc\njal   0x80089A20\n addiu A1, V0, 8\nli    A0, 11\nlui   A2, hi(D_8011D334)\naddu  A2, A2, S1\nlh    A2, lo(D_8011D334)(A2)\nlui   A3, hi(D_8011D336)\naddu  A3, A3, S1\nlh    A3, lo(D_8011D336)(A3)\njal   0x800D771C\n move  A1, S2\nL801081D4:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_801081EC:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, R0\nlui   S2, hi(D_8011FA98)\naddiu S2, S2, lo(D_8011FA98)\nsll   V0, S0, 2\nL80108210:\naddu  S1, V0, S2\nlw    A0, 0(S1)\nbeqz  A0, L8010822C\n addiu S0, S0, 1\njal   EndProcess\n       NOP\nsw    R0, 0(S1)\nL8010822C:\nslti  V0, S0, 8\nbnez  V0, L80108210\n sll   V0, S0, 2\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\ndraw_millenium_stars:\naddiu SP, SP, -0x28\nsw    RA, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   AT, hi(D_8011FA70)\nsw    R0, lo(D_8011FA70)(AT)\nmove  S0, R0\nlui   S3, hi(D_8011FA78)\naddiu S3, S3, lo(D_8011FA78)\nlui   S2, hi(D_8011FA98)\naddiu S2, S2, lo(D_8011FA98)\nlui   S1, hi(D_8011D38C)\naddiu S1, S1, lo(D_8011D38C)\nsll   V1, S0, 2\nL80108290:\naddu  V0, V1, S3\nsw    R0, 0(V0)\naddu  V1, V1, S2\nlui   A0, hi(func_801081EC)\naddiu A0, A0, lo(func_801081EC)\njal   0x800F8D60\n sw    R0, 0(V1)\nsll   V0, S0, 1\naddu  V0, V0, S1\njal   0x80035F98\n lh    A0, 0(V0)\nbnezl V0, L801082D4\n addiu S0, S0, 1\nsll   A0, S0, 0x10\njal   draw_millenium_star_inner\n sra   A0, A0, 0x10\naddiu S0, S0, 1\nL801082D4:\nslti  V0, S0, STAR_COUNT ; or M-star count?\nbnez  V0, L80108290\n sll   V1, S0, 2\nlw    RA, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\ndraw_boo_inner:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nsll   A0, A0, 0x10\nsra   A0, A0, 0xe\nlui   V0, hi(D_8011FB0C)\naddu  V0, V0, A0\nlw    V0, lo(D_8011FB0C)(V0)\nbnez  V0, L80108408\n       NOP\nlui   V0, hi(D_8011FB08)\nlw    V0, lo(D_8011FB08)(V0)\nbnez  V0, L80108378\n       NOP\nli    A0, 10\njal   0x800D90C8\n move  A1, R0\nmove  S1, V0\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\njal   0x8001FA68\n lh    A0, 0(V0)\nlw    V0, 0x40(S1)\nlw    V0, 0x40(V0)\njal   0x8001FA68\n lh    A0, 0(V0)\nlui   AT, hi(D_8011FB08)\nj     L80108388\n sw    S1, lo(D_8011FB08)(AT)\nL80108378:\nlui   A0, hi(D_8011FB08)\njal   0x800D975C\n lw    A0, lo(D_8011FB08)(A0)\nmove  S1, V0\nL80108388:\njal   0x800D9B24\n move  A0, S1\nsll   V1, S0, 0x10\nsra   V1, V1, 0x10\nsll   S0, V1, 2\nlui   AT, hi(D_8011FB0C)\naddu  AT, AT, S0\nsw    S1, lo(D_8011FB0C)(AT)\nlhu   V0, 0xa(S1)\nori   V0, V0, 2\nsh    V0, 0xa(S1)\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S1)\nsll   V1, V1, 1\nlui   A0, hi(boo_space_indices)\naddu  A0, A0, V1\njal   GetSpaceData\n lh    A0, lo(boo_space_indices)(A0)\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, V0, 8\nli    A0, 10\nlui   A2, hi(D_8011D354)\naddu  A2, A2, S0\nlh    A2, lo(D_8011D354)(A2)\nlui   A3, hi(D_8011D356)\naddu  A3, A3, S0\nlh    A3, lo(D_8011D356)(A3)\njal   0x800D771C\n move  A1, S1\nL80108408:\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\ndraw_boo:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   AT, hi(D_8011FB08)\nsw    R0, lo(D_8011FB08)(AT)\nmove  S0, R0\nlui   S1, hi(D_8011FB0C)\naddiu S1, S1, lo(D_8011FB0C)\nsll   V0, S0, 2\nL80108444:\naddu  V0, V0, S1\nsw    R0, 0(V0)\nsll   A0, S0, 0x10\njal   draw_boo_inner\n sra   A0, A0, 0x10\naddiu S0, S0, 1\nblez  S0, L80108444 ; TODO: Consider BOO_COUNT here\n sll   V0, S0, 2\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_80108478:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nmove  S3, R0\nlui S5, 0x6666\nori S5, S5, 0x6667\nlui   S4, hi(D_8011FB18)\naddiu S4, S4, lo(D_8011FB18)\nL801084AC:\nlui   V0, hi(bank_coin_total)\nlh    V0, lo(bank_coin_total)(V0)\naddiu V0, V0, 9\nmult  V0, S5\nmfhi  A1\nsra   V1, A1, 2\nsra   V0, V0, 0x1f\nsubu  S1, V1, V0\nslti  V0, S1, 6\nbeql  V0, R0, L801084D8\n li    S1, 5\nL801084D8:\nblez  S1, L8010850C\n move  S0, R0\nsll   V0, S3, 2\naddu  S2, V0, S3\naddu  V0, S2, S0\nL801084EC:\nsll   V0, V0, 2\naddu  V0, V0, S4\nlw    A0, 0(V0)\njal   0x800D9AA4\n addiu S0, S0, 1\nslt   V0, S0, S1\nbnez  V0, L801084EC\n addu  V0, S2, S0\nL8010850C:\nslti  V0, S0, 5\nbeqz  V0, L80108540\n sll   V0, S3, 2\naddu  S1, V0, S3\naddu  V0, S1, S0\nL80108520:\nsll   V0, V0, 2\naddu  V0, V0, S4\nlw    A0, 0(V0)\njal   0x800D9B24\n addiu S0, S0, 1\nslti  V0, S0, 5\nbnez  V0, L80108520\n addu  V0, S1, S0\nL80108540:\naddiu S3, S3, 1\nslti  V0, S3, 2\nbnez  V0, L801084AC\n       NOP\nlw    RA, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x38\n\ndraw_bank_coins_inner:\naddiu SP, SP, -0x28\nsw    RA, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nsll   A0, A0, 0x10\nsra   A0, A0, 0xe\nlui   V0, hi(D_8011FB18)\naddu  V0, V0, A0\nlw    V0, lo(D_8011FB18)(V0)\nbnez  V0, L801086C4\n       NOP\nlui   V0, hi(D_8011FB10)\nlw    V0, lo(D_8011FB10)(V0)\nbnez  V0, L801085E4\n       NOP\nli    A0, 30\njal   0x800D90C8\n move  A1, R0\nmove  S3, V0\njal   0x800D9714\n move  A0, S3\nlui   AT, hi(D_8011FB10)\nsw    S3, lo(D_8011FB10)(AT)\nj     L801085F8\n sll   V1, S0, 0x10\nL801085E4:\nlui   A0, hi(D_8011FB10)\njal   0x800D975C\n lw    A0, lo(D_8011FB10)(A0)\nmove  S3, V0\nsll   V1, S0, 0x10\nL801085F8:\nsra   S1, V1, 0x10\nsll   V0, S1, 2\nlui   AT, hi(D_8011FB18)\naddu  AT, AT, V0\nsw    S3, lo(D_8011FB18)(AT)\nlhu   V0, 0xa(S3)\nori   V0, V0, 2\nsh    V0, 0xa(S3)\nlui V0, 0x6666\nori V0, V0, 0x6667\nmult  S1, V0\nmfhi  A3\nsra   S0, A3, 1\nsra   V1, V1, 0x1f\nsubu  S0, S0, V1\nsll   V0, S0, 0x10\nsra   V0, V0, 0xf\nlui   A0, hi(bank_coin_space_indices)\naddu  A0, A0, V0\nlh    A0, lo(bank_coin_space_indices)(A0)\njal   GetSpaceData\n addiu S2, S3, 0xc\nmove  A0, S2\njal   0x80089A20\n addiu A1, V0, 8\nsll   V0, S0, 2\naddu  V0, V0, S0\nsubu  S1, S1, V0\nsll   S1, S1, 0x10\nsra   S1, S1, 0x10\nsll   S0, S1, 1\naddu  S0, S0, S1\nsll   S0, S0, 2\nlui   A1, hi(D_8011D3A4)\naddiu A1, A1, lo(D_8011D3A4)\nmove  A0, S2\naddu  A1, S0, A1\njal   0x80089A70\n move  A2, S2\nlw    V0, 0x3c(S3)\nlui   AT, hi(D_8011D3E0)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011D3E0)(AT)\nswc1  F0, 0x24(V0)\nlw    V0, 0x3c(S3)\nlui   AT, hi(D_8011D3E8)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011D3E8)(AT)\nswc1  F0, 0x2c(V0)\njal   0x800D9B24\n move  A0, S3\nL801086C4:\nlw    RA, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\ndraw_bank_coins:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   AT, hi(D_8011FB10)\nsw    R0, lo(D_8011FB10)(AT)\nmove  S0, R0\nlui   S1, hi(D_8011FB18)\naddiu S1, S1, lo(D_8011FB18)\nsll   V0, S0, 2\nL80108708:\naddu  V0, V0, S1\nsw    R0, 0(V0)\nsll   A0, S0, 0x10\njal   draw_bank_coins_inner\n sra   A0, A0, 0x10\naddiu S0, S0, 1\nslti  V0, S0, 0xa\nbnez  V0, L80108708\n sll   V0, S0, 2\njal   func_80108478\n       NOP\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\n;draw gates inner\nfunc_80108748:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nmove  S0, A0\nsll   A0, A0, 0x10\nsra   A0, A0, 0xe\nlui   V0, hi(D_8011FB44)\naddu  V0, V0, A0\nlw    V0, lo(D_8011FB44)(V0)\nbnez  V0, L8010889C\n       NOP\nlui   V0, hi(D_8011FB40)\nlw    V0, lo(D_8011FB40)(V0)\nbnez  V0, L801087D8\n       NOP\nlui   V0, hi(CORE_800CD059)\nlb    V0, lo(CORE_800CD059)(V0) ; getting board index?\nsll   V1, V0, 1\nsll   V0, V0, 2\n;li    V0, 0 ; TODO: Hard code board index to 0, so we always use the same gate animation/sound/file.\nlui   A0, hi(D_8011D421)\naddu  A0, A0, V1\nlbu   A0, lo(D_8011D421)(A0)\nlui   A1, hi(D_8011D45C)\naddu  A1, A1, V0\nlw    A1, lo(D_8011D45C)(A1)\njal   0x800D90C8\n sll   S0, S0, 0x10\nmove  S2, V0\njal   0x800D9714\n move  A0, S2\nlui   AT, hi(D_8011FB40)\nsw    S2, lo(D_8011FB40)(AT)\nj     L801087F0\n sra   S0, S0, 0x10\nL801087D8:\nlui   A0, hi(D_8011FB40)\nlw    A0, lo(D_8011FB40)(A0)\njal   0x800D975C\n sll   S0, S0, 0x10\nmove  S2, V0\nsra   S0, S0, 0x10\nL801087F0:\nsll   S1, S0, 2\nlui   AT, hi(D_8011FB44)\naddu  AT, AT, S1\nsw    S2, lo(D_8011FB44)(AT)\nlhu   V0, 0xa(S2)\nori   V0, V0, 2\nsh    V0, 0xa(S2)\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 2\njal   0x8001C814\n li    A2, 1\nsll   S0, S0, 1\nlui   A0, hi(gate_spaces)\naddu  A0, A0, S0\njal   GetSpaceData\n lh    A0, lo(gate_spaces)(A0)\naddiu A0, S2, 0xc\njal   0x80089A20\n addiu A1, V0, 8\nlui   A0, hi(gate_entrance_spaces)\naddu  A0, A0, S1\njal   GetSpaceData\n lh    A0, lo(gate_entrance_spaces)(A0)\nlui   A0, hi(gate_exit_spaces)\naddu  A0, A0, S1\nlh    A0, lo(gate_exit_spaces)(A0)\njal   GetSpaceData\n move  S0, V0\naddiu A0, V0, 8\naddiu A1, S0, 8\njal   GetAngleBetweenSpaces\n addiu A2, S2, 0x18\nli    A0, 12\nlui   A2, hi(D_8011D36C)\naddu  A2, A2, S1\nlh    A2, lo(D_8011D36C)(A2)\nlui   A3, hi(D_8011D36E)\naddu  A3, A3, S1\nlh    A3, lo(D_8011D36E)(A3)\njal   0x800D771C\n move  A1, S2\nL8010889C:\nlw    RA, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x28\n\ndraw_gates_outer:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   AT, hi(D_8011FB40)\nsw    R0, lo(D_8011FB40)(AT)\nmove  S0, R0\nlui   S1, hi(D_8011FB44)\naddiu S1, S1, lo(D_8011FB44)\nsll   V0, S0, 2\n__draw_gates_outer_loop:\naddu  V0, V0, S1\nsw    R0, 0(V0)\nsll   A0, S0, 0x10\njal   func_80108748\n sra   A0, A0, 0x10\naddiu S0, S0, 1\nslti  V0, S0, GATE_COUNT\nbnez  V0, __draw_gates_outer_loop\n sll   V0, S0, 2\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nD_80108914:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   S0, hi(CORE_800CD059)\naddiu S0, S0, lo(CORE_800CD059)\nlb    V0, 0(S0)\nsll   V0, V0, 2\nlui   A0, hi(D_8011D4BC)\naddu  A0, A0, V0\njal   SleepProcess\n lw    A0, lo(D_8011D4BC)(A0)\nlb    V0, 0(S0)\nsll   V0, V0, 2\nlui   A0, hi(D_8011D49A)\naddu  A0, A0, V0\njal   PlaySound\n lh    A0, lo(D_8011D49A)(A0)\njal   EndProcess\n move  A0, R0\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_gate_80108970:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   V0, hi(D_8011FB44)\naddiu V0, V0, lo(D_8011FB44)\nsll   S0, A0, 2\naddu  S0, S0, V0\naddiu A1, A1, -1\nsll   A1, A1, 0x10\nlw    A0, 0(S0)\nsra   A1, A1, 0x10\njal   0x800D9CE8\n move  A2, R0\nlw    V0, 0(S0)\nlw    V0, 0x3c(V0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 5\njal   0x8001C814\n move  A2, R0\nlui   V0, hi(CORE_800CD059)\nlb    V0, lo(CORE_800CD059)(V0)\nlui   V1, hi(D_8011D474)\naddiu V1, V1, lo(D_8011D474)\nsll   V0, V0, 2\naddu  A0, V0, V1\nlw    V1, 0(A0)\nli    V0, -1\nbeq   V1, V0, L801089F0\n       NOP\njal   PlaySound\n lh    A0, 2(A0)\nL801089F0:\nlui   V0, hi(CORE_800CD059)\nlb    V0, lo(CORE_800CD059)(V0)\nsll   V0, V0, 2\nlui   V1, hi(D_8011D498)\naddu  V1, V1, V0\nlw    V1, lo(D_8011D498)(V1)\nli    V0, -1\nbeq   V1, V0, L80108A28\n li    A1, 4096\nlui   A0, hi(D_80108914)\naddiu A0, A0, lo(D_80108914)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nL80108A28:\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\ngate_spaces_event_process:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\njal   0x8004EE68\n sw    S0, 0x10(SP)\nlw    S0, 0x8c(V0)\nlui   V1, hi(CORE_800CD06D)\nlb    V1, lo(CORE_800CD06D)(V1)\nbeqz  V1, L80108A6C\n li    V0, 1\nbeq   V1, V0, L80108A70\n li    A0, 10\nj     L80108A70\n li    A0, 15\nL80108A6C:\nli    A0, 5\nL80108A70:\njal   SleepProcess\n       NOP\nsll   V0, S0, 2\nlui   AT, hi(D_8011FB44)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB44)(AT)\nlw    V0, 0x3c(V0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 1\njal   0x8001C814\n li    A2, 4\nlui   V0, hi(CORE_800CD059)\nlb    V0, lo(CORE_800CD059)(V0)\nlui   V1, hi(D_8011D4E0)\naddiu V1, V1, lo(D_8011D4E0)\nsll   V0, V0, 2\naddu  A0, V0, V1\nlw    V1, 0(A0)\nli    V0, -1\nbeq   V1, V0, L80108AD0\n       NOP\njal   PlaySound\n lh    A0, 2(A0)\nL80108AD0:\njal   EndProcess\n move  A0, R0\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n__PP64_INTERNAL_GATE_CLOSE_EVENT:\ngate_spaces_event:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nlui   A0, hi(gate_spaces_event_process)\naddiu A0, A0, lo(gate_spaces_event_process)\nli    A1, 4096\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S0, 0x8c(V0)\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n; draw bank outer?\nfunc_80108B24:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   AT, hi(D_8011FB40)\nsw    R0, lo(D_8011FB40)(AT)\nmove  S0, R0\nlui   S1, hi(bank_model_space_indices)\naddiu S1, S1, lo(bank_model_space_indices)\nsll   V0, S0, 1\nL80108B4C:\naddu  V0, V0, S1\njal   GetSpaceData\n lh    A0, 0(V0)\nsll   V1, S0, 2\nli    A0, 8\nlui   A2, hi(D_8011D35C)\naddu  A2, A2, V1\nlh    A2, lo(D_8011D35C)(A2)\nlui   A3, hi(D_8011D35E)\naddu  A3, A3, V1\nlh    A3, lo(D_8011D35E)(A3)\njal   0x800D7790\n addiu A1, V0, 8\naddiu S0, S0, 1\nslti  V0, S0, BANK_COUNT\nbnez  V0, L80108B4C\n sll   V0, S0, 1\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_80108BA4:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, R0\nlui   S1, hi(item_shop_model_space_indices)\naddiu S1, S1, lo(item_shop_model_space_indices)\nsll   V0, S0, 1\nL80108BC4:\naddu  V0, V0, S1\njal   GetSpaceData\n lh    A0, 0(V0)\nsll   V1, S0, 2\nli    A0, 9\nlui   A2, hi(D_8011D364)\naddu  A2, A2, V1\nlh    A2, lo(D_8011D364)(A2)\nlui   A3, hi(D_8011D366)\naddu  A3, A3, V1\nlh    A3, lo(D_8011D366)(A3)\njal   0x800D7790\n addiu A1, V0, 8\naddiu S0, S0, 1\nslti  V0, S0, SHOP_COUNT\nbnez  V0, L80108BC4\n sll   V0, S0, 1\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\n__PP64_INTERNAL_GATE_EVENT:\ngate_event:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nli    S4, 1\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S2, V0\nlbu   A0, 0xf(S2)\nsll   A0, A0, 0x18\nsra   A0, A0, 0x18\nlbu   A1, 0x10(S2)\nsll   A1, A1, 0x18\nsra   A1, A1, 0x18\nandi  A0, A0, 0xffff\njal   GetAbsSpaceIndexFromChainSpaceIndex\n andi  A1, A1, 0xffff\nsll   V0, V0, 0x10\nsra   S1, V0, 0x10\nxori  V1, S1, "+L[0].gateEntryIndex+"\nsltiu V1, V1, 1\nxori  V0, S1, "+L[1].gateEntryIndex+"\nsltiu V0, V0, 1\nor    V1, V1, V0\nbeqz  V1, L80109B64\n xori  V1, S1, "+L[0].gateExitIndex+"\nlbu   V0, 0x17(S2)\nandi  V0, V0, 1\nbnez  V0, L80109E5C\n       NOP\nL80109B64:\nsltiu V1, V1, 1\nxori  V0, S1, "+L[1].gateExitIndex+"\nsltiu V0, V0, 1\nor    V1, V1, V0\nbeqz  V1, L80109B8C\n li    A0, -1\nlbu   V0, 0x17(S2) ; testing player flag bit\nandi  V0, V0, 1\nbeqz  V0, L80109E5C\n       NOP\nL80109B8C:\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nlb    A0, 0xf(S3)\njal   PlayerHasItem\n li    A1, ITEM_SKELETON_KEY\nli    V1, -1\nbeq   V0, V1, L80109DC8\n li    A0, -1\nlb    A0, 0xf(S3)\njal   0x800DBEC0\n       NOP\nli    V0, "+L[0].gateExitIndex+"\nbeq   S1, V0, L80109BD0\n li    V0, "+L[0].gateEntryIndex+"\nbne   S1, V0, L80109BE0\n li    A0, -1\nL80109BD0:\nli    A0, -1\nli    A1, 8\nj     L80109BE8\n li    A2, "+L[0].gateSpaceIndex+"\nL80109BE0:\nli    A1, 8\nli    A2, "+L[1].gateSpaceIndex+'\nL80109BE8:\njal   0x800ED20C\n       NOP\njal   0x8004EE68\n       NOP\nli    AT, 0x3FCC0000\nori   AT, AT, 0xcccd\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\nli    A0, -1\njal   0x800FF900\n li    A1, 1\nli    A0, 56\nL80109C34:\njal   0x800EC628\n li    A1, 0x4103 ; "Hi I\'m the Skeleton Key! Shall I use my skills..."\nli    A0, 2\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nli    V0, 1\nbeq   S0, V0, L80109D5C\n slti  V0, S0, 2\nbeql  V0, R0, L80109C7C\n li    V0, 2\nbeqz  S0, L80109C8C\n li    A0, 56\nj     L80109D80\n       NOP\nL80109C7C:\nbeq   S0, V0, L80109D70\n       NOP\nj     L80109D80\n       NOP\nL80109C8C:\njal   0x800EC590\n li    A1, 16644\nlb    A0, 0xf(S3)\njal   PlayerHasItem\n li    A1, ITEM_SKELETON_KEY\nlb    A0, 0xf(S3)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1) ; p1_item1, reaching into items...\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1) ; clearing item?\nlui   A0, hi(current_player_index)\njal   FixUpPlayerItemSlots\n lb    A0, lo(current_player_index)(A0)\njal   0x800F63F0\n li    A0, -1\nli    V0, '+L[1].gateEntryIndex+"\nbeq   S1, V0, L80109D18\n ADDIU V0 R0 "+L[0].gateEntryIndex+" ; slti  V0, S1, gateEntryIndex\nbeq   S1, V0, L80109D00 ; was beqz\n li    V0, "+L[0].gateExitIndex+"\nbeq   S1, V0, L80109D24\n move  A0, R0\nj     L80109D24\n li    A0, 1\nL80109D00:\nli    V0, "+L[0].gateEntryIndex+'\nbnel  S1, V0, L80109D24\n li    A0, 1\nmove  A0, R0\nj     L80109D28\n move  A1, R0\nL80109D18:\nli    A0, 1\nj     L80109D28\n move  A1, R0\nL80109D24:\nli    A1, 1\nL80109D28:\njal   func_gate_80108970\n move  S4, R0\nli    A0, -1\nli    A1, 2\njal   0x800FFA4C\n li    A2, 5\nmove  S0, V0\njal   SleepProcess\n li    A0, 20\njal   0x800FFAEC\n move  A0, S0\nj     L80109D80\n       NOP\nL80109D5C:\nli    A0, 56\njal   0x800EC590\n li    A1, 16645\nj     L80109D80\n       NOP\nL80109D70:\njal   __PP64_INTERNAL_VIEW_MAP\n       NOP\nj     L80109C34\n li    A0, 56\nL80109D80:\nlb    A0, 0xf(S3)\njal   0x800DB884\n       NOP\njal   0x8004EE68\n       NOP\nli    AT, 0x3FA60000 ; 1.296875\nori   AT, AT, 0x6666\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\nj     L80109DD0\n       NOP\nL80109DC8:\njal   0x800EC590\n li    A1, 0x4106 ; "You don\'t have a Skeleton Key, ..."\nL80109DD0:\nbeqz  S4, L80109E5C\n li    V0, '+L[1].gateEntryIndex+"\nbeq   S1, V0, L80109E28\n li    A0, -1\nADDIU V0 R0 "+L[0].gateEntryIndex+" ; slti  V0, S1, 0x7a\nbeq   S1, V0, L80109DFC\n li    V0, "+L[0].gateExitIndex+"\nbeq   S1, V0, L80109E20\n li    A1, "+L[0].gateNextChain[0]+"\nj     L80109E44\n li    A1, "+L[1].gateNextChain[0]+"\nL80109DFC:\nli    V0, "+L[0].gateEntryIndex+"\nbne   S1, V0, L80109E40\n li    A0, -1\nli    A1, "+L[0].gatePrevChain[0]+"\njal   SetNextChainAndSpace\n li  A2, "+L[0].gatePrevChain[1]+"\nlbu   V0, 0x17(S2)\nj     L80109E58\n ori   V0, V0, 1\nL80109E20:\nj     L80109E48\n li    A2, "+L[0].gateNextChain[1]+"\nL80109E28:\nli    A1, "+L[1].gatePrevChain[0]+"\njal   SetNextChainAndSpace\n li    A2, "+L[1].gatePrevChain[1]+"\nlbu   V0, 0x17(S2)\nj     L80109E58\n ori   V0, V0, 1\nL80109E40:\nli    A1, "+L[1].gateNextChain[0]+"\nL80109E44:\nli    A2, "+L[1].gateNextChain[1]+'\nL80109E48:\njal   SetNextChainAndSpace\n       NOP\nlbu   V0, 0x17(S2)\nandi  V0, V0, 0xfe\nL80109E58:\nsb    V0, 0x17(S2)\nL80109E5C:\njal   EndProcess\n move  A0, R0\nlw    RA, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\n; Helper used when prompted between textbox options.\n; If A0 is a pointer to AI data, the AI logic is ran to pick for CPUs.\n; If A0 is 0 or 1, the 0th or 1st option is chosen by CPUs.\n; If A0 is 2, then the value of A1 is the CPUs option index choice.\n__PP64_INTERNAL_BASIC_MESSAGE_CHOICE:\naddiu SP, SP, -0x48\nsw    RA, 0x40(SP)\nsw    S5, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nmove  S3, A0\nmove  S5, A1\nmove  S2, R0\nlui   A1, hi(D_8011F8D0)\naddiu A1, A1, lo(D_8011F8D0)\nlwl   V0, 0(A1)\nlwr   V0, 3(A1)\nswl   V0, 0x20(SP)\nswr   V0, 0x23(SP)\nmove  S1, R0\naddiu S4, SP, 0x18\n; begin looping over each player\nL8010A180:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   S1, V0, L8010A290 ; if S1 != current player index\n sll   V0, S1, 3\n; procesing when S1 == current player\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(CORE_800D110C)\naddu  AT, AT, V0\nlbu   V0, lo(CORE_800D110C)(AT)\nandi  V0, V0, 1\nbeqz  V0, L8010A240 ; if (value at 800D110C & 0x01) == 0\n li    V0, 1\nbeq   S3, V0, L8010A1F0 ; Is A0 == 1?\n slti  V0, S3, 2\nbeql  V0, R0, L8010A1D0 ; Is A0 >= 2?\n li    V0, 2\nbeqz  S3, L8010A1E0 ; Is A0 == 0?\n       NOP\nj     L8010A200\n       NOP\nL8010A1D0:\nbeq   S3, V0, L8010A214 ; Is A0 == 2?\n addiu S2, S5, 1\nj     L8010A200\n       NOP\nL8010A1E0:\njal   0x800EF0D8\n move  A0, R0\nj     L8010A214\n addiu S2, V0, 1\nL8010A1F0:\njal   0x800EF0D8\n li    A0, 1\nj     L8010A214\n addiu S2, V0, 1\nL8010A200:\njal   0x800DA190\n move  A0, S3\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\naddiu S2, V0, 1\nL8010A214:\nsll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S4\nli    V1, 1024\nj     L8010A2B0\n sh    V1, 0(V0)\nL8010A240:\nsll   S0, S1, 3\nsubu  S0, S0, S1\nsll   S0, S0, 3\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\naddu  V0, SP, V0\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nlbu   A1, 0x20(V0)\njal   0x8005FE54\n addiu S1, S1, 1\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S4\nli    V1, -1\nj     L8010A2B4\n sh    V1, 0(V0)\nL8010A290:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S4\nsh    R0, 0(V0) ; mutate a player\'s controller index?\nL8010A2B0:\naddiu S1, S1, 1\nL8010A2B4:\nslti  V0, S1, 4\nbnez  V0, L8010A180\n       NOP\nbeqz  S2, L8010A36C\n li    A1, 2\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8005B63C\n li    A2, 2\nmove  S0, R0\naddiu S1, SP, 0x18\nL8010A2E0:\naddiu S2, S2, -1\nbnez  S2, L8010A31C\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S1\nli    V1, -32768\nsh    V1, 0(V0)\nL8010A31C:\nbnez  S0, L8010A344\n li    V0, 5\njal   0x800EDC40\n       NOP\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nj     L8010A354\n andi  V0, V0, 0xff\nL8010A344:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nL8010A354:\njal   0x8005F698\n sw    V0, 0x10(SP)\nbnez  S2, L8010A2E0\n addiu S0, S0, 1\nj     L8010A380\n       NOP\nL8010A36C:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\njal   0x8005F744\n lh    A3, 0x1e(SP)\nL8010A380:\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nmove  A1, R0\njal   0x8005E1D8\n li    A2, 1\nlw    RA, 0x40(SP)\nlw    S5, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x48\n\nfunc_8010A3B8:\naddiu SP, SP, -0x30\nsw    RA, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nmove  S0, A0\nmove  S2, A1\nmove  S1, A2\nmove  S3, A3\nli    A0, 1\naddiu A1, SP, 0x10\njal   0x80060394\n move  A2, S2\nsll   S0, S0, 0x10\nsll   S1, S1, 0x10\nsra   A0, S0, 0x10\naddiu A1, SP, 0x10\njal   0x800EBFE8\n sra   A2, S1, 0x10\nmove  S0, V0\nlui   AT, hi(CORE_80105702_window_id)\nsh    S0, lo(CORE_80105702_window_id)(AT)\nsll   S0, S0, 0x10\nsra   S0, S0, 0x10\nmove  A0, S0\nmove  A1, S2\nli    A2, -1\njal   0x8005B43C\n li    A3, -1\njal   0x80061388\n move  A0, S0\nmove  A0, S0\njal   0x800EBF98\n move  A1, S3\nmove  A0, S0\njal   0x80061A5C\n move  A1, R0\njal   0x8005F364\n move  A0, S0\nlw    RA, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x30\n\nfunc_8010A474:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nL8010A47C:\njal   0x800E4A7C\n       NOP\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\njal   0x800F69F8\n li    A2, 32768\njal   SleepVProcess\n       NOP\nj     L8010A47C\n       NOP\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n__PP64_INTERNAL_STAR_SPACE_EVENT:\nstar_space_event:\naddiu SP, SP, -0x30\nsw    RA, 0x28(SP)\nsw    S1, 0x24(SP)\njal   GetCurrentSpaceIndex\n sw    S0, 0x20(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\nsll   V0, V0, 0x10\njal   func_801060E0\n sra   A0, V0, 0x10\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nli    V1, 1\nbne   V0, V1, L8010A844\n       NOP\nlui   A0, hi(current_player_index)\njal   0x800DBEC0\n lb    A0, lo(current_player_index)(A0)\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\njal   func_80105E80\n       NOP\nsll   V0, V0, 0x10\nli    A0, -1\nli    A1, 8\njal   0x800ED20C\n sra   A2, V0, 0x10\njal   0x8004EE68\n       NOP\nli    AT, 0x3FCC0000 ; 1.593750\nori   AT, AT, 0xcccd\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\njal   PlaySound\n li    A0, 345\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V1, V0, 3\nlui   V0, hi(CORE_800D1123)\naddu  V0, V0, V1\nlb    V0, lo(CORE_800D1123)(V0)\nbeqz  V0, L8010A5CC\n li    A0, 22\nlui   A2, hi(p1_char)\naddu  A2, A2, V1\nlbu   A2, lo(p1_char)(A2)\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A1, 0x4805\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage: "WAHH! Buh-Bowser! Oh, pardon me. Please, take this! ..."\n move  A3, R0\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nL8010A5CC:\nlb    V0, 0xf(S1)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlb    V0, lo(p1_stars)(V0)\nslti  V0, V0, MAX_PLAYER_STAR_COUNT\nbnez  V0, L8010A5FC\n li    A0, 22\nj     L8010A7B8\n li    A1, 0x4804 ; "You can\'t carry any more stars"\nL8010A5FC:\nlb    V0, 0xf(S1)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 0x14\nbnezl V0, L8010A7B8\n li    A1, 0x4801 ; "Oh dear, you don\'t have 20 coins"\nL8010A624:\nlb    V1, 0xf(S1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   A2, hi(p1_char)\naddu  A2, A2, V0\nlbu   A2, lo(p1_char)(A2)\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 22\nli    A1, 0x4800\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage: "You made it! So you want to trade coins for a star?"\n move  A3, R0\nli    A0, 2\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n sll   S0, S0, 0x10\nsra   S0, S0, 0x10\nli    V0, 1\nbeq   S0, V0, L8010A74C ; Did they choose No?\n slti  V0, S0, 2\nbeql  V0, R0, L8010A6A4 ; is choice >= 2?\n li    V0, 2\nbeqz  S0, L8010A6B4 ; Did they choose yes?\n       NOP\nj     L8010A844\n       NOP\nL8010A6A4:\nbeq   S0, V0, L8010A7A8 ; Did they choose View Map?\n       NOP\nj     L8010A844\n       NOP\nL8010A6B4:\nlb    A0, 0xf(S1)\njal   ShowPlayerCoinChange\n li    A1, -20\nlb    A0, 0xf(S1)\njal   AdjustPlayerCoinsGradual\n li    A1, -20\njal   SleepProcess\n li    A0, 30\nli    A0, 22\njal   0x800EC590 ; update existing window with new message?\n li    A1, 0x4802  ; "Then take this star"\nlui   V0, hi(CORE_800A12D0)\nlb    V0, lo(CORE_800A12D0)(V0)\nbeqz  V0, L8010A718\n       NOP\njal   0x8004A950\n       NOP\nlui   A0, hi(CORE_800C9930)\nlh    A0, lo(CORE_800C9930)(A0)\njal   0x800039A4\n li    A1, 60\nli    V0, -1\nlui   AT, hi(CORE_800C9930)\nj     L8010A720\n sh    V0, lo(CORE_800C9930)(AT)\nL8010A718:\njal   0x8004A994\n li    A0, 90\nL8010A720:\nlui   A0, hi(D_8011FA70)\njal   func_80106EEC\n lw    A0, lo(D_8011FA70)(A0)\njal   SleepProcess\n li    A0, 30\njal   0x800EDA58\n       NOP\njal   0x800FF7F0\n li    A0, 2\nj     L8010A844\n       NOP\nL8010A74C:\nlui   V0, hi(CORE_800A12D0)\nlb    V0, lo(CORE_800A12D0)(V0)\nbeqz  V0, L8010A798\n li    A0, 22\nlui   A0, hi(CORE_800C9930)\nlh    A0, lo(CORE_800C9930)(A0)\njal   0x800039A4\n li    A1, 60\nlui   A0, hi(CORE_800CE198)\njal   0x80003310\n lh    A0, lo(CORE_800CE198)(A0)\njal   0x8004A670\n move  A0, R0\njal   0x8004A72C\n li    A0, 90\nli    V0, -1\nlui   AT, hi(CORE_800C9930)\nsh    V0, lo(CORE_800C9930)(AT)\nli    A0, 22\nL8010A798:\njal   0x800EC590\n li    A1, 0x4803 ; "What?!? You don\'t need a star? ..."\nj     L8010A808\n       NOP\nL8010A7A8:\njal   __PP64_INTERNAL_VIEW_MAP\n       NOP\nj     L8010A624\n       NOP\nL8010A7B8:\njal   0x800EC590\n       NOP\nlui   V0, hi(CORE_800A12D0)\nlb    V0, lo(CORE_800A12D0)(V0)\nbeqz  V0, L8010A808\n       NOP\nlui   A0, hi(CORE_800C9930)\nlh    A0, lo(CORE_800C9930)(A0)\njal   0x800039A4\n li    A1, 60\nlui   A0, hi(CORE_800CE198)\njal   0x80003310\n lh    A0, lo(CORE_800CE198)(A0)\njal   0x8004A670\n move  A0, R0\njal   0x8004A72C\n li    A0, 90\nli    V0, -1\nlui   AT, hi(CORE_800C9930)\nsh    V0, lo(CORE_800C9930)(AT)\nL8010A808:\njal   0x800DB884\n lb    A0, 0xf(S1)\njal   0x8004EE68\n       NOP\nli    AT, 0x3FA60000 ; 1.296875\nori   AT, AT, 0x6666\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\nL8010A844:\nlw    RA, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x30\n\n__PP64_INTERNAL_BANK_SPACE_EVENT:\nbank_space_event:\naddiu SP, SP, -0xa0\nsw    RA, 0x68(SP)\nsw    S5, 0x64(SP)\nsw    S4, 0x60(SP)\nsw    S3, 0x5c(SP)\nsw    S2, 0x58(SP)\nsw    S1, 0x54(SP)\nsw    S0, 0x50(SP)\nsdc1  F30, 0x98(SP)\nsdc1  F28, 0x90(SP)\nsdc1  F26, 0x88(SP)\nsdc1  F24, 0x80(SP)\nsdc1  F22, 0x78(SP)\nsdc1  F20, 0x70(SP)\njal   GetCurrentSpaceIndex\n move  S5, R0\nmove  S0, V0\nlui   S4, hi(CORE_800CD058)\naddiu S4, S4, lo(CORE_800CD058)\nmove  S1, R0\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   0x800DCD9C\n move  S3, R0\nbgtz  V0, L8010A8D4\n li    A0, -1\njal   0x800FF900\n li    A1, 3\nli    A0, -1\nL8010A8D4:\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nsll   V0, S0, 0x10\nsra   V1, V0, 0x10\nli    V0, '+V[0]+"\nbeq   V1, V0, L8010A91C\n li    V0, "+V[1]+"\nbne   V1, V0, L8010A948\n li    A0, -1\nli    A1, 8\njal   0x800ED20C\n li    A2, "+F[1]+"\njal   GetSpaceData\n li    A0, "+F[1]+"\nmove  S1, V0\nj     L8010A93C\n li    A0, "+V[1]+"\nL8010A91C:\nli    A0, -1\nli    A1, 8\njal   0x800ED20C\n li    A2, "+F[0]+"\njal   GetSpaceData\n li    A0, "+F[0]+"\nmove  S1, V0\nli    A0, "+V[0]+'\nL8010A93C:\njal   GetSpaceData\n       NOP\nmove  S3, V0\nL8010A948:\njal   SleepProcess\n li    A0, 8\nlb    A0, 0xf(S4)\njal   0x800DCD9C\n       NOP\nblez  V0, L8010A96C\n       NOP\njal   0x800DBEC0\n lb    A0, 0xf(S4)\nL8010A96C:\njal   PlaySound\n li    A0, 276\nli    A0, 50\njal   0x800D90C8\n move  A1, R0\nmove  S2, V0\njal   0x800D9714\n move  A0, S2\naddiu S0, SP, 0x40\naddiu S1, S1, 8\nmove  A0, S0\naddiu A1, S3, 8\njal   midpoint\n move  A2, S1\njal   0x800D88E8\n move  A0, S0\naddiu A0, S2, 0x18\njal   0x80089A20\n move  A1, S0\nsw    R0, 0x28(S2)\naddiu A0, S2, 0xc\njal   0x80089A20\n move  A1, S1\nmove  A0, S2\nli    A1, -1\njal   0x800D9CE8\n li    A2, 1\njal   0x800D9A40\n move  A0, S2\nlui   A1, hi(D_8011E070)\naddiu A1, A1, lo(D_8011E070)\njal   0x800D90C8\n li    A0, 53\nmove  S3, V0\njal   0x800D9714\n move  A0, S3\naddiu A0, S3, 0x18\njal   0x80089A20\n move  A1, S0\naddiu A0, S3, 0xc\njal   0x80089A20\n move  A1, S1\nli    AT, 0x3F990000 ; 1.195312\nori   AT, AT, 0x999a\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x2c(S3)\nswc1  F0, 0x24(S3)\nswc1  F0, 0x28(S3)\njal   0x800D9B24\n move  A0, S3\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nmtc1  R0, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010AA88:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S2)\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010AA88\n       NOP\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F0, F20\n      NOP\nbc1f  L8010AB90\n       NOP\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F28\n      NOP\nL8010AB30:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S2)\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010AB30\n       NOP\nL8010AB90:\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x28(S2)\nswc1  F0, 0x24(S2)\nswc1  F0, 0x2c(S2)\njal   0x800D9A40\n move  A0, S3\nli    A0, -1\njal   PlayerHasItem\n li    A1, ITEM_KOOPA_CARD\nli    V1, -1\nbeq   V0, V1, L8010AC3C\n move  A0, S2\nsw    R0, 0x10(SP)\nL8010ABCC:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x3A1D ; "Would you like to use your Koopa Kard at this bank?"\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nlui   A0, hi(D_8011E058)\naddiu A0, A0, lo(D_8011E058)\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nbeqz  S0, L8010AC20\n li    V0, 2\nbeq   S0, V0, L8010AC28\n move  A0, S2\nj     L8010AC3C\n       NOP\nL8010AC20:\nj     L8010AC38\n li    S5, 1\nL8010AC28:\njal   __PP64_INTERNAL_VIEW_MAP\n       NOP\nj     L8010ABCC\n sw    R0, 0x10(SP)\nL8010AC38:\nmove  A0, S2\nL8010AC3C:\nli    A1, -1\njal   0x800D9CE8\n move  A2, R0\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui A1, 0x3f99\njal   0x8001C92C\n ori A1, A1, 0x999a\nL8010AC60:\njal   0x800D9E0C\n move  A0, S2\nandi  V0, V0, 0xffff\nbnez  V0, L8010AC84\n       NOP\njal   SleepVProcess\n       NOP\nj     L8010AC60\n       NOP\nL8010AC84:\njal   PlaySound\n li    A0, 601\nmove  A0, S3\nmove  A1, R0\njal   0x800D9CE8\n move  A2, R0\nL8010AC9C:\njal   0x800D9E0C\n move  A0, S3\nandi  V0, V0, 0xffff\nbnez  V0, L8010ACC0\n move  A0, S3\njal   SleepVProcess\n       NOP\nj     L8010AC9C\n       NOP\nL8010ACC0:\nli    A1, -1\njal   0x800D9CE8\n li    A2, 2\nbeqz  S5, L8010AE0C\n       NOP\nlui   S0, hi(bank_coin_total)\naddiu S0, S0, lo(bank_coin_total)\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\nlh    A2, 0(S0)\njal   sprintf\n addiu A0, SP, 0x20\nlh    V0, 0(S0)\nbeqz  V0, L8010AD14\n li    A0, 2\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A1, 14878\nj     L8010AD28\n addiu A2, SP, 0x20\nL8010AD14:\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A1, 0x3A1F ; "So you\'d like to use your card today?"\nmove  A2, R0\nL8010AD28:\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nlui   V0, hi(bank_coin_total)\nlh    V0, lo(bank_coin_total)(V0)\nbeql  V0, R0, L8010AD74\n sw    R0, 0x10(SP)\nlui   AT, hi(CORE_800D037C)\njal   func_80112FA8\n sh    R0, lo(CORE_800D037C)(AT)\nli    V0, 1\nlui   AT, hi(CORE_800D037C)\nj     func_8010ADEC\n sh    V0, lo(CORE_800D037C)(AT)\nL8010AD74:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 2\nli    A1, 14881\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nli    A0, -1\njal   PlayerHasItem\n li    A1, ITEM_KOOPA_CARD\nlb    A0, 0xf(S4)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S4)\njal   0x800F63F0\n lb    A0, 0xf(S4)\nfunc_8010ADEC:\njal   0x800DCD9C\n lb    A0, 0xf(S4)\nblez  V0, L8010B138\n       NOP\njal   0x800DB884\n lb    A0, 0xf(S4)\nj     L8010B138\n       NOP\nL8010AE0C:\njal   0x800DCD9C\n lb    A0, 0xf(S4)\nblez  V0, L8010B04C\n       NOP\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   A2, hi(p1_coins)\naddu  A2, A2, V0\nlh    A2, lo(p1_coins)(A2)\nsltu  V0, R0, A2\nslti  V1, A2, 5\nand   V0, V0, V1\nbeqz  V0, L8010AF38\n       NOP\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n addiu A0, SP, 0x20\naddiu S1, SP, 0x30\nlui   S0, hi(bank_coin_total)\naddiu S0, S0, lo(bank_coin_total)\nlh    A3, 0(S0)\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   A2, hi(p1_coins)\naddu  A2, A2, V0\nlh    A2, lo(p1_coins)(A2)\nmove  A0, S1\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n addu  A2, A3, A2\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 2\nli    A1, 0x1201\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage: "Welcome to the Koopa Bank."\n move  A3, S1\njal   0x800EC6C8\n       NOP\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlhu   V1, 0(S0)\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlhu   V0, lo(p1_coins)(AT)\naddu  V1, V1, V0\njal   func_80108478\n sh    V1, 0(S0)\nlb    A0, 0xf(S4)\nsll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\nlui   A1, hi(p1_coins)\naddu  A1, A1, V0\nlh    A1, lo(p1_coins)(A1)\njal   ShowPlayerCoinChange\n subu  A1, R0, A1\nlb    A0, 0xf(S4)\nsll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\nlui   A1, hi(p1_coins)\naddu  A1, A1, V0\nlh    A1, lo(p1_coins)(A1)\nj     func_8010B004\n subu  A1, R0, A1\nL8010AF38:\nlb    V0, 0xf(S4)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nbnezl V0, L8010AF9C\n addiu A0, SP, 0x20\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\nlui   A2, hi(bank_coin_total)\nlh    A2, lo(bank_coin_total)(A2)\njal   sprintf\n addiu A0, SP, 0x20\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 2\nli    A1, 4610\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nj     func_8010B01C\n       NOP\nL8010AF9C:\nlui   S0, hi(bank_coin_total)\naddiu S0, S0, lo(bank_coin_total)\nlh    A2, 0(S0)\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n addiu A2, A2, 5\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 2\nli    A1, 0x1200\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage "I must ask for a deposit..."\n move  A3, R0\njal   0x800EC6C8\n       NOP\nlhu   V0, 0(S0)\naddiu V0, V0, 5\njal   func_80108478\n sh    V0, 0(S0)\nlb    A0, 0xf(S4)\njal   ShowPlayerCoinChange\n li    A1, -5\nlb    A0, 0xf(S4)\nli    A1, -5\nfunc_8010B004:\njal   AdjustPlayerCoinsGradual\n       NOP\njal   SleepProcess\n li    A0, 30\njal   0x800EC6A8\n       NOP\nfunc_8010B01C:\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\njal   0x800DB884\n lb    A0, 0xf(S4)\njal   SleepProcess\n li    A0, 10\nj     L8010B138\n       NOP\nL8010B04C:\nlui   S0, hi(bank_coin_total)\naddiu S0, S0, lo(bank_coin_total)\nlh    A2, 0(S0)\nbeql  A2, R0, L8010B130\n li    A0, 2\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n addiu A0, SP, 0x20\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 2\nli    A1, 0x1203\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage "Hooray! ... you get all the coins we\'ve collected! ..."\n move  A3, R0\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\nlb    A0, 0xf(S4)\njal   ShowPlayerCoinChange\n lh    A1, 0(S0)\nlb    A0, 0xf(S4)\njal   AdjustPlayerCoinsGradual\n lh    A1, 0(S0)\njal   func_80108478\n sh    R0, 0(S0)\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800ECC0C\n addiu A0, A0, 0x18\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\nlb    A1, 0xf(S4)\njal   0x8004ACE0\n li    A0, 628\njal   SleepProcess\n li    A0, 30\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\njal   0x800EC6A8\n       NOP\njal   0x800EC9DC\n       NOP\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nj     L8010B138\n       NOP\nL8010B130:\njal   0x800EC590\n li    A1, 0x1204 ; "You won ... we don\'t have even 1 coin"\nL8010B138:\njal   PlaySound\n li    A0, 277\nmove  A0, S2\nli    A1, -1\njal   0x800D9CE8\n li    A2, 4\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui A1, 0x3f99\njal   0x8001C92C\n ori A1, A1, 0x999a\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   V1, hi(CORE_800D03F8)\nlw    V1, lo(CORE_800D03F8)(V1)\nsll   V0, A0, 1\naddu  V0, V0, A0\nsll   V0, V0, 6\naddu  V0, V0, V1\nlbu   V1, 2(V0)\nlui   A1, hi(CORE_800CCF58)\nlw    A1, lo(CORE_800CCF58)(A1)\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, A1\nlh    V0, 2(V0)\nmtc1  V0, F4\n      NOP\ncvt.s.w F4, F4\nmfc1  A1, F4\njal   0x8001C6A8\n       NOP\nL8010B1C4:\njal   0x800D9E80\n move  A0, S2\nandi  V0, V0, 0xffff\nbnez  V0, L8010B1E8\n       NOP\njal   SleepVProcess\n       NOP\nj     L8010B1C4\n       NOP\nL8010B1E8:\njal   0x800D9B24\n move  A0, S3\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010B244:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S2)\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010B244\n       NOP\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nmtc1  R0, F28\n      NOP\nL8010B2D4:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S2)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S2)\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010B2D4\n       NOP\nsw    R0, 0x28(S2)\nsw    R0, 0x24(S2)\nsw    R0, 0x2c(S2)\njal   0x800D9B54\n move  A0, S2\njal   0x800D9B54\n move  A0, S3\nlw    RA, 0x68(SP)\nlw    S5, 0x64(SP)\nlw    S4, 0x60(SP)\nlw    S3, 0x5c(SP)\nlw    S2, 0x58(SP)\nlw    S1, 0x54(SP)\nlw    S0, 0x50(SP)\nldc1  F30, 0x98(SP)\nldc1  F28, 0x90(SP)\nldc1  F26, 0x88(SP)\nldc1  F24, 0x80(SP)\nldc1  F22, 0x78(SP)\nldc1  F20, 0x70(SP)\njr    RA\n addiu SP, SP, 0xa0\n\nfunc_8010B394:\nmove  A3, A0\nmove  A1, R0\nlui   A2, hi(D_8011FB54)\nlw    A2, lo(D_8011FB54)(A2)\nlui   V0, hi(D_8011FB4C)\nlw    V0, lo(D_8011FB4C)(V0)\nlui   A0, hi(D_8011E0A0)\naddiu A0, A0, lo(D_8011E0A0)\nsll   V1, V0, 3\naddu  V1, V1, V0\nsll   V1, V1, 2\nsubu  V1, V1, V0\naddu  V1, V1, A0\nlui   A0, hi(D_8011FB50)\nlw    A0, lo(D_8011FB50)(A0)\nsll   V0, A0, 3\nsubu  V0, V0, A0\naddu  V1, V0, V1\naddu  V0, A2, A1\nL8010B3E0:\nlbu   V0, 0(V0)\nbeqz  V0, L8010B400\n addu  V0, V1, A1\nlb    V0, 0(V0)\nbnel  V0, A3, L8010B404\n addiu A1, A1, 1\nj     L8010B414\n move  V0, A1\nL8010B400:\naddiu A1, A1, 1\nL8010B404:\nslti  V0, A1, 7\nbnez  V0, L8010B3E0\n addu  V0, A2, A1\nli    V0, -1\nL8010B414:\njr    RA\n       NOP\n\nfunc_8010B41C:\nmove  A1, R0\nlui   V0, hi(D_8011FB4C)\nlw    V0, lo(D_8011FB4C)(V0)\nlui   A0, hi(D_8011E0A0)\naddiu A0, A0, lo(D_8011E0A0)\nsll   V1, V0, 3\naddu  V1, V1, V0\nsll   V1, V1, 2\nsubu  V1, V1, V0\naddu  V1, V1, A0\nlui   A0, hi(D_8011FB50)\nlw    A0, lo(D_8011FB50)(A0)\nsll   V0, A0, 3\nsubu  V0, V0, A0\naddu  V1, V0, V1\nli    A0, -1\naddu  V0, V1, A1\nL8010B460:\nlb    V0, 0(V0)\nbeq   V0, A0, L8010B47C\n       NOP\naddiu A1, A1, 1\nslti  V0, A1, 7\nbnezl V0, L8010B460\n addu  V0, V1, A1\nL8010B47C:\njr    RA\n move  V0, A1\n\nD_8010B484:\naddiu SP, SP, -0x50\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F30, 0x48(SP)\nsdc1  F28, 0x40(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\njal   0x8004EE68\n sdc1  F20, 0x20(SP)\nlw    S1, 0x8c(V0)\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   GetPlayerStruct\n sll   S0, S1, 0x10\nli    A0, -1\njal   0x800FF900\n li    A1, 2\njal   PlaySound\n li    A0, 346\nmtc1  R0, F20\nli    S2, 0x3FC00000 ; 1.500000\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F24\nli    AT, 0x3F000000 ; 0.500000\nmtc1  AT, F30\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nli    AT, 0x43340000 ; 180.000000\nmtc1  AT, F26\n      NOP\nL8010B508:\njal   0x8008EF20\n mov.s F12, F20\nmtc1  S2, F2\n      NOP\nmul.s F0, F0, F2\nadd.s F22, F0, F24\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F30\nsra   A0, S0, 0x10\nmfc1  A2, F22\nsub.s F0, F24, F0\nmfc1  A3, F0\n      NOP\njal   0x800551D8\n move  A1, R0\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F28\nc.lt.s F20, F26\n      NOP\nbc1t  L8010B508\n       NOP\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1f  L8010B610\n sll   A0, S1, 0x10\nli    S2, 0x3F000000 ; 0.500000\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F24\nli    AT, 0x3E800000 ; 0.250000\nmtc1  AT, F30\nsll   S0, S1, 0x10\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F26\n      NOP\nL8010B5B0:\njal   0x8008EF20\n mov.s F12, F20\nmtc1  S2, F2\n      NOP\nmul.s F0, F0, F2\nadd.s F22, F0, F24\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F30\nsra   A0, S0, 0x10\nmfc1  A2, F22\nsub.s F0, F24, F0\nmfc1  A3, F0\n      NOP\njal   0x800551D8\n move  A1, R0\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F28\nc.lt.s F20, F26\n      NOP\n      NOP\nbc1t  L8010B5B0\n sll   A0, S1, 0x10\nL8010B610:\nsra   A0, A0, 0x10\nmove  A1, R0\nlui   A2, 0x3f80\njal   0x800551D8\n move  A3, A2\njal   EndProcess\n move  A0, R0\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F30, 0x48(SP)\nldc1  F28, 0x40(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x50\n\n__PP64_INTERNAL_ITEM_SHOP_EVENT:\nitem_shop_event:\naddiu SP, SP, -0xe8\nsw    RA, 0xb4(SP)\nsw    FP, 0xb0(SP)\nsw    S7, 0xac(SP)\nsw    S6, 0xa8(SP)\nsw    S5, 0xa4(SP)\nsw    S4, 0xa0(SP)\nsw    S3, 0x9c(SP)\nsw    S2, 0x98(SP)\nsw    S1, 0x94(SP)\nsw    S0, 0x90(SP)\nsdc1  F30, 0xe0(SP)\nsdc1  F28, 0xd8(SP)\nsdc1  F26, 0xd0(SP)\nsdc1  F24, 0xc8(SP)\nsdc1  F22, 0xc0(SP)\nsdc1  F20, 0xb8(SP)\njal   GetPlayerStruct\n li    A0, -1\nsw    V0, 0x74(SP)\nmove  S5, R0\nmove  S3, R0\nmove  S4, R0\nsw    R0, 0x7c(SP)\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nlw    T5, 0x74(SP)\nlbu   A0, 0xf(T5)\nsll   A0, A0, 0x18\nsra   A0, A0, 0x18\nlbu   A1, 0x10(T5)\nsll   A1, A1, 0x18\nsra   A1, A1, 0x18\nandi  A0, A0, 0xffff\njal   GetAbsSpaceIndexFromChainSpaceIndex\n andi  A1, A1, 0xffff\nsll   V0, V0, 0x10\nsra   V1, V0, 0x10\nli    V0, '+O[0]+"\nbeq   V1, V0, L8010B718\n li    V0, "+O[1]+"\nbeq   V1, V0, L8010B744\n li    T5, "+R[1]+"\nj     L8010B770\n li    T5, -1\nL8010B718:\nli    T5, "+R[0]+"\nsh    T5, 0x6e(SP)\njal   GetSpaceData\n li    A0, "+R[0]+"\nmove  S5, V0\njal   GetSpaceData\n li    A0, "+O[0]+"\nlui   AT, hi(D_8011E1D8)\nsw    R0, lo(D_8011E1D8)(AT)\nj     L8010B774\n move  S3, V0\nL8010B744:\nsh    T5, 0x6e(SP)\njal   GetSpaceData\n li    A0, "+R[1]+"\nmove  S5, V0\njal   GetSpaceData\n li    A0, "+O[1]+"\nmove  S3, V0\nli    V0, 1\nlui   AT, hi(D_8011E1D8)\nj     L8010B774\n sw    V0, lo(D_8011E1D8)(AT)\nL8010B770:\nsh    T5, 0x6e(SP)\nL8010B774:\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   A2, V0, 0x10\nli    V0, -1\nbeq   A2, V0, L8010B79C\n li    A0, -1\njal   0x800ED20C\n li    A1, 8\njal   SleepProcess\n li    A0, 8\nL8010B79C:\nlui   A0, hi(current_player_index)\njal   0x800DBEC0\n lb    A0, lo(current_player_index)(A0)\nlui   V1, hi(CORE_800CD0AC)\nlh    V1, lo(CORE_800CD0AC)(V1)\nbeqz  V1, L8010B7C8\n li    V0, 1\nbeq   V1, V0, L8010B7DC\n move  S6, R0\nj     L8010B7DC\n li    S6, 1\nL8010B7C8:\njal   RNGPercentChance\n li    A0, 66\nsll   V0, V0, 0x10\nsltiu V0, V0, 1\nmove  S6, V0\nL8010B7DC:\nmove  V0, S6\nbeqz  V0, L8010B7EC\n li    FP, 3\nli    FP, 5\nL8010B7EC:\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   V0, V0, 0x10\nli    V1, -1\nbeq   V0, V1, L8010BB6C\n move  S2, S6\nsubu  S0, R0, S6\nandi  S0, S0, 0x31\nori   S0, S0, 0x30\njal   PlaySound\n li    A0, 276 ; raw 0x50, shop appearing noise\nandi  A0, S0, 0xff\njal   0x800D90C8\n move  A1, R0\nmove  S4, V0\njal   0x800D9714\n move  A0, S4\naddiu S0, SP, 0x48\naddiu S1, S5, 8\nmove  A0, S0\naddiu A1, S3, 8\njal   midpoint\n move  A2, S1\njal   0x800D88E8\n move  A0, S0\naddiu A0, S4, 0x18\njal   0x80089A20\n move  A1, S0\nsw    R0, 0x28(S4)\nmove  A0, S4\nli    A1, -1\njal   0x800D9CE8\n li    A2, 1\njal   0x800D9A40\n move  A0, S4\naddiu A0, S4, 0xc\njal   0x80089A20\n move  A1, S1\nbeqz  S2, L8010B898\n li    A0, 57\nlui   A1, hi(D_8011E1D0)\nj     L8010B8A4\n addiu A1, A1, lo(D_8011E1D0)\nL8010B898:\nli    A0, 27\nlui   A1, hi(D_8011E1C8)\naddiu A1, A1, lo(D_8011E1C8)\nL8010B8A4:\njal   0x800D90C8\n       NOP\nsw    V0, 0x7c(SP)\njal   0x800D9714\n lw    A0, 0x7c(SP)\nlw    T5, 0x7c(SP)\naddiu A0, T5, 0x18\njal   0x80089A20\n addiu A1, SP, 0x48\nlw    T5, 0x7c(SP)\naddiu A0, T5, 0xc\njal   0x80089A20\n addiu A1, S5, 8\nli    AT, 0x3F990000 ; 1.195312\nori   AT, AT, 0x999a\nmtc1  AT, F0\nlw    T5, 0x7c(SP)\nswc1  F0, 0x2c(T5)\nswc1  F0, 0x24(T5)\nswc1  F0, 0x28(T5)\njal   0x800D9B24\n lw    A0, 0x7c(SP)\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nmtc1  R0, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010B94C:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S4)\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010B94C\n       NOP\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F0, F20\n      NOP\nbc1f  L8010BA54\n       NOP\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F28\n      NOP\nL8010B9F4:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S4)\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010B9F4\n       NOP\nL8010BA54:\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x2c(S4)\nswc1  F0, 0x24(S4)\nswc1  F0, 0x28(S4)\njal   0x800D9A40\n lw    A0, 0x7c(SP)\nmove  A0, S4\nli    A1, -1\njal   0x800D9CE8\n move  A2, R0\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   A1, 0x3f99\njal   0x8001C92C\n ori   A1, A1, 0x999a\nL8010BA9C:\njal   0x800D9E0C\n move  A0, S4\nandi  V0, V0, 0xffff\nbnez  V0, L8010BAC0\n move  A1, R0\njal   SleepVProcess\n       NOP\nj     L8010BA9C\n       NOP\nL8010BAC0:\nlw    A0, 0x7c(SP)\njal   0x800D9CE8\n move  A2, R0\nmove  V0, S6\nbnez  V0, L8010BB34\n li    A0, 672\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nsll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslti  V0, V0, 5\nbnezl V0, L8010BB34\n li    A0, 666\njal   PlayerHasEmptyItemSlot\n       NOP\nli    V1, -1\nbeq   V0, V1, L8010BB34\n li    A0, 666\nlui   V1, hi(current_turn)\nlb    V1, lo(current_turn)(V1)\nlui   V0, hi(total_turns)\nlb    V0, lo(total_turns)(V0)\nbne   V1, V0, L8010BB34\n li    A0, 664\nli    A0, 666\nL8010BB34:\njal   PlaySound\n       NOP\nL8010BB3C:\njal   0x800D9E0C\n lw    A0, 0x7c(SP)\nandi  V0, V0, 0xffff\nbnez  V0, L8010BB60\n li    A1, -1\njal   SleepVProcess\n       NOP\nj     L8010BB3C\n       NOP\nL8010BB60:\nlw    A0, 0x7c(SP)\njal   0x800D9CE8\n li    A2, 2\nL8010BB6C:\nlui   V1, hi(current_turn)\nlb    V1, lo(current_turn)(V1)\nlui   V0, hi(total_turns)\nlb    V0, lo(total_turns)(V0)\nbne   V1, V0, L8010BBA0\n sll   V0, S6, 2\nlui   A1, hi(item_shop_closed_messages)\naddu  A1, A1, V0\nlw    A1, lo(item_shop_closed_messages)(A1)\njal   0x800EC590\n move  A0, FP\nj     L8010C684\n       NOP\nL8010BBA0:\nlui   A0, hi(current_player_index)\njal   PlayerHasEmptyItemSlot\n lb    A0, lo(current_player_index)(A0)\nli    V1, -1\nbne   V0, V1, L8010BBD4\n sll   V0, S6, 2\nlui   A1, hi(item_shop_already_have_three_items_messages)\naddu  A1, A1, V0\nlw    A1, lo(item_shop_already_have_three_items_messages)(A1)\njal   0x800EC590\n move  A0, FP\nj     L8010C684\n       NOP\nL8010BBD4:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 5\nbeqz  V0, L8010BC1C\n sll   V0, S6, 2\nlui   A1, hi(item_shop_not_enough_coins_messages)\naddu  A1, A1, V0\nlw    A1, lo(item_shop_not_enough_coins_messages)(A1)\njal   0x800EC590\n move  A0, FP\nj     L8010C684\n       NOP\nL8010BC1C:\nlui   A1, hi(item_shop_prompt_to_buy_messages)\naddu  A1, A1, V0\nlw    A1, lo(item_shop_prompt_to_buy_messages)(A1)\njal   0x800EC628\n move  A0, FP\njal   func_80107408\n       NOP\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nli    V0, 1\nbeq   S0, V0, L8010C620\n slti  V0, S0, 2\nbeql  V0, R0, L8010BC6C\n li    V0, 2\nbeqz  S0, L8010BC7C\n       NOP\nj     L8010C684\n       NOP\nL8010BC6C:\nbeq   S0, V0, L8010C640\n li    V1, -1\nj     L8010C684\n       NOP\nL8010BC7C:\njal   0x800FB578\n li    A0, -1\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   0x800EE9C0\n move  S1, V0\nmove  A0, S6\nlui   A1, hi(D_8011E088)\naddiu A1, A1, lo(D_8011E088)\nsll   V1, A0, 1\naddu  V1, V1, A0\nsll   V1, V1, 2\naddu  V1, V1, A1\nsll   A0, S1, 2\naddu  A0, A0, V1\naddu  A0, A0, V0\nlbu   S3, 0(A0)\nmove  S2, R0\nmove  A1, R0\nmove  V1, S6\nlui   A0, hi(D_8011E0A0)\naddiu A0, A0, lo(D_8011E0A0)\nsll   V0, V1, 3\naddu  V0, V0, V1\nsll   V0, V0, 2\nsubu  V0, V0, V1\naddu  V0, V0, A0\nsll   V1, S3, 3\nsubu  V1, V1, S3\naddu  V1, V1, V0\nli    A3, -1\naddiu A0, SP, 0x20\nli    A2, 1\naddu  V0, V1, A1\nL8010BD04:\nlb    V0, 0(V0)\nbeq   V0, A3, L8010BD20\n slti  V0, V0, 6\nbeqz  V0, L8010BD30\n addu  V0, A0, A1\nsb    A2, 0(V0)\naddiu S2, S2, 1\nL8010BD20:\naddiu A1, A1, 1\nslti  V0, A1, 7\nbnez  V0, L8010BD04\n addu  V0, V1, A1\nL8010BD30:\nslti  V0, A1, 7\nbeqz  V0, L8010BDF8\n move  S1, R0\naddiu T3, SP, 0x20\nli    T1, 1\naddiu T0, SP, 0x30\nmove  V1, S6\nlui   A0, hi(D_8011E0A0)\naddiu A0, A0, lo(D_8011E0A0)\nsll   V0, V1, 3\naddu  V0, V0, V1\nsll   V0, V0, 2\nsubu  V0, V0, V1\naddu  V0, V0, A0\nsll   V1, S3, 3\nsubu  V1, V1, S3\naddu  T2, V1, V0\nli    T4, -1\nL8010BD78:\naddu  A3, T3, A1\nsb    T1, 0(A3)\nsll   V0, S1, 2\naddu  A2, T0, V0\nsb    R0, 0(A2)\naddu  V0, T2, A1\nlb    V0, 0(V0)\nbeql  V0, T4, L8010BDEC\n addiu A1, A1, 1\nlui   A0, hi(CORE_80100F94)\naddu  A0, A0, V0\nlbu   A0, lo(CORE_80100F94)(A0)\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslt   V0, V0, A0\nbeqz  V0, L8010BDDC\n sll   V0, S1, 2\nsb    R0, 0(A3)\nsb    T1, 0(A2)\nL8010BDDC:\naddu  V0, T0, V0\nsb    R0, 1(V0)\naddiu S2, S2, 1\naddiu A1, A1, 1\nL8010BDEC:\nslti  V0, A1, 7\nbnez  V0, L8010BD78\n addiu S1, S1, 1\nL8010BDF8:\nslti  V0, A1, 9\nbeqz  V0, L8010BE20\n addiu V1, SP, 0x20\nli    A0, 1\naddu  V0, V1, A1\nL8010BE0C:\nsb    A0, 0(V0)\naddiu A1, A1, 1\nslti  V0, A1, 9\nbnez  V0, L8010BE0C\n addu  V0, V1, A1\nL8010BE20:\nlui   V1, hi(item_shop_purchase_selection_messages)\naddiu V1, V1, lo(item_shop_purchase_selection_messages)\nsll   V0, S3, 3\naddu  V0, V0, V1\nmove  S0, S6\nsll   V1, S0, 2\naddu  V1, V1, V0\naddiu V0, SP, 0x38\nsw    V0, 0x10(SP)\naddiu V0, SP, 0x3c\nsw    V0, 0x14(SP)\naddiu V0, SP, 0x40\nsw    V0, 0x18(SP)\nmove  A0, FP\nlw    A1, 0(V1)\naddiu A2, SP, 0x30\njal   0x800EC8EC ; ShowMessage to select item to buy\n addiu A3, SP, 0x34\njal   0x800ECAA8\n move  A0, R0\nlui   AT, hi(D_8011FB4C)\nsw    S0, lo(D_8011FB4C)(AT)\nlui   AT, hi(D_8011FB50)\nsw    S3, lo(D_8011FB50)(AT)\naddiu A0, SP, 0x20\nlui   AT, hi(D_8011FB54)\njal   func_80107174\n sw    A0, lo(D_8011FB54)(AT)\njal   0x800EC6C8\n move  S7, V0\njal   0x800EC6EC\n       NOP\nbne   S7, S2, L8010BED0\n addiu V0, S2, 1\nlui   AT, hi(CORE_800D037C)\njal   0x800E4A6C\n sh    R0, lo(CORE_800D037C)(AT)\nlui   A0, hi(current_player_index)\njal   0x800E44E4\n lb    A0, lo(current_player_index)(A0)\nli    V0, 1\nlui   AT, hi(CORE_800D037C)\nj     L8010BC7C\n sh    V0, lo(CORE_800D037C)(AT)\nL8010BED0:\nxor   V0, S7, V0\nsltiu V0, V0, 1\nnor   V1, R0, S7\nsltiu V1, V1, 1\nor    V0, V0, V1\nbnez  V0, L8010BC1C\n sll   V0, S6, 2\nlw    T5, 0x74(SP)\nlw    FP, 0x24(T5)\nmove  S1, S6\nlui   V1, hi(D_8011E0A0)\naddiu V1, V1, lo(D_8011E0A0)\nsll   V0, S1, 3\naddu  V0, V0, S1\nsll   V0, V0, 2\nsubu  V0, V0, S1\naddu  V0, V0, V1\nsll   S0, S3, 3\nsubu  S0, S0, S3\naddu  S0, S0, V0\naddu  S0, S0, S7\nlb    V0, 0(S0)\nlui   A1, hi(CORE_80100F94)\naddu  A1, A1, V0\nlbu   A1, lo(CORE_80100F94)(A1)\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   ShowPlayerCoinChange\n subu  A1, R0, A1\nlb    V0, 0(S0)\nlui   A1, hi(CORE_80100F94)\naddu  A1, A1, V0\nlbu   A1, lo(CORE_80100F94)(A1)\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   AdjustPlayerCoinsGradual\n subu  A1, R0, A1\njal   SleepProcess\n li    A0, 30\nlb    V1, 0(S0)\nli    V0, 19\nbeq   V1, V0, L8010BFE8\n addiu S5, S1, 0x13\nlui   A0, hi(current_player_index)\njal   PlayerHasEmptyItemSlot\n lb    A0, lo(current_player_index)(A0)\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   A0, V1, 3\nsubu  A0, A0, V1\nsll   A0, A0, 3\nlui   V1, hi(p1_item1)\naddiu V1, V1, lo(p1_item1)\naddu  A0, A0, V1\naddu  A0, A0, V0\nmove  V0, S6\nlui   A1, hi(D_8011E0A0)\naddiu A1, A1, lo(D_8011E0A0)\nsll   V1, V0, 3\naddu  V1, V1, V0\nsll   V1, V1, 2\nsubu  V1, V1, V0\naddu  V1, V1, A1\nsll   V0, S3, 3\nsubu  V0, V0, S3\naddu  V0, V0, V1\naddu  V0, V0, S7\nlbu   V1, 0(V0)\nsb    V1, 0(A0)\nlb    S5, 0(V0)\nL8010BFE8:\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x5c(SP)\nsll   V0, S5, 2\nlui   A0, hi(CORE_8010197C)\naddu  A0, A0, V0\nlw    A0, lo(CORE_8010197C)(A0)\njal   ReadMainFS\n move  S1, R0\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsh    V0, 0x66(SP)\njal   FreeMainFS\n move  A0, S0\nlw    S0, 0x5c(SP)\nlhu   T5, 0x66(SP)\nsll   A2, T5, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 10\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n move  A2, R0\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 6156\nmove  A0, S0\nmove  A1, R0\nli    A2, 160\njal   0x80054904\n li    A3, 90\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\naddiu S0, SP, 0x48\njal   0x800ECC0C\n move  A0, S0\nlw    T5, 0x74(SP)\nlw    A2, 0x24(T5)\naddiu A2, A2, 0x18\nmove  A0, A2\nmove  A1, S0\njal   0x800ED128\n li    A3, 10\njal   PlaySound\n li    A0, 25\nlw    T5, 0x5c(SP)\nsll   S0, T5, 0x10\nsll   A2, S1, 1\nL8010C0E0:\naddu  A2, A2, S1\nsll   A2, A2, 3\naddu  A2, A2, S1\nsra   A0, S0, 0x10\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S1, S1, 1\nslti  V0, S1, 0xa\nbnez  V0, L8010C0E0\n sll   A2, S1, 1\nlw    A0, 0x5c(SP)\nmove  A1, R0\njal   0x80055458\n li    A2, 256\nmove  V0, S6\nlui   A0, hi(D_8011E0A0)\naddiu A0, A0, lo(D_8011E0A0)\nsll   V1, V0, 3\naddu  V1, V1, V0\nsll   V1, V1, 2\nsubu  V1, V1, V0\naddu  V1, V1, A0\nsll   V0, S3, 3\nsubu  V0, V0, S3\naddu  V0, V0, V1\naddu  V0, V0, S7\nlb    V1, 0(V0)\nli    V0, 19\nbne   V1, V0, L8010C598\n move  S7, S6\nlui   V0, hi(D_8011E0E8)\naddiu V0, V0, lo(D_8011E0E8)\nsll   V1, S7, 1\naddu  V1, V1, S7\nsw    V1, 0x84(SP)\nsll   V1, V1, 2\naddu  V1, V1, V0\nsw    V1, 0x8c(SP)\nL8010C180:\nlui   A0, hi(current_player_index)\njal   PlayerHasEmptyItemSlot\n lb    A0, lo(current_player_index)(A0)\nli    T5, -1\nbeq   V0, T5, L8010C578\n li    V1, -1\njal   0x800FB578\n li    A0, -1\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   0x800EE9C0\n move  S0, V0\nsll   S0, S0, 2\nlw    T5, 0x8c(SP)\naddu  S0, S0, T5\naddu  S0, S0, V0\nlbu   S0, 0(S0)\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F12\n      NOP\njal   0x800EEF80\n move  S1, R0\nmove  A0, V0\nlw    T5, 0x84(SP)\nsll   V1, T5, 3\naddu  V1, V1, S7\nsll   V1, V1, 1\nlui   T5, hi(D_8011E100)\naddiu T5, T5, lo(D_8011E100)\naddu  V1, V1, T5\nsll   V0, S0, 2\naddu  V0, V0, S0\nsll   V0, V0, 1\naddu  V1, V0, V1\naddu  V0, V1, S1\nL8010C20C:\nlb    V0, 0(V0)\nslt   V0, A0, V0\nbnez  V0, L8010C22C\n       NOP\naddiu S1, S1, 1\nslti  V0, S1, 0xa\nbnez  V0, L8010C20C\n addu  V0, V1, S1\nL8010C22C:\nlui   V0, hi(D_8011E164)\naddiu V0, V0, lo(D_8011E164)\nsll   V1, S7, 2\naddu  V1, V1, S7\nsll   V1, V1, 1\naddu  V1, V1, V0\naddu  V1, V1, S1\nlbu   S5, 0(V1)\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   V0, V0, 0x10\nli    T5, -1\nbeq   V0, T5, L8010C270\n li    A0, 21\nli    A1, 160\nj     L8010C284\n li    A2, 1\nL8010C270:\nlhu   V0, 0xa(FP)\nori   V0, V0, 0x10\nsh    V0, 0xa(FP)\nli    A1, 160\nmove  A2, R0\nL8010C284:\njal   0x800E210C\n li    S0, 30\nmove  S1, V0\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\nlui   AT, hi(CORE_800C9520)\naddu  AT, AT, V0\nlhu   V0, lo(CORE_800C9520)(AT)\nandi  V0, V0, 0x8000\nbnez  V0, L8010C330\n       NOP\nlui   S3, hi(CORE_800C9520)\naddiu S3, S3, lo(CORE_800C9520)\nL8010C2D4:\njal   PlayerIsCPU\n li    A0, -1\nbeqz  V0, L8010C2F0\n li    T5, -1\naddiu S0, S0, -1\nbeq   S0, T5, L8010C330\n       NOP\nL8010C2F0:\njal   SleepVProcess\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nlhu   V0, 0(V0)\nandi  V0, V0, 0x8000\nbeqz  V0, L8010C2D4\n       NOP\nL8010C330:\njal   0x800E21F4\n move  A0, S1\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nli    A1, 2\njal   0x800F2304\n move  A2, R0\nlui   A1, 0x4000\nlui   A2, 0xbe99\nori   A2, A2, 0x999a\njal   0x800EE688\n move  A0, FP\njal   SleepProcess\n li    A0, 5\nlui   A0, hi(D_8010B484)\naddiu A0, A0, lo(D_8010B484)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nlw    T5, 0x5c(SP)\nsw    T5, 0x8c(V0)\njal   0x800EE6C0\n move  A0, FP\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nsll   V0, V0, 0x10\nsra   S3, V0, 0x10\nsll   V0, S5, 2\nlui   A0, hi(CORE_8010197C)\naddu  A0, A0, V0\nlw    A0, lo(CORE_8010197C)(A0)\njal   ReadMainFS\n move  S1, R0\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   S6, V0, 0x10\njal   FreeMainFS\n move  A0, S0\nmove  S0, S3\nmove  A0, S0\nmove  A1, R0\nmove  A2, S6\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 11\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n move  A2, R0\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nmove  A0, S0\nmove  A1, R0\nli    A2, 160\njal   0x80054904\n li    A3, 90\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\naddiu S0, SP, 0x48\njal   0x800ECC0C\n move  A0, S0\nlw    T5, 0x74(SP)\nlw    A2, 0x24(T5)\naddiu A2, A2, 0x18\nmove  A0, A2\nmove  A1, S0\njal   0x800ED128\n li    A3, 10\nli    S2, 90\nmtc1  R0, F20\nmove  S0, S3\nli    AT, 0x3DCC0000 ; 0.099609\nori   AT, AT, 0xcccd\nmtc1  AT, F22\nL8010C494:\nsll   A3, S2, 0x10\nmove  A0, S0\nmove  A1, R0\nli    A2, 160\njal   0x80054904\n sra   A3, A3, 0x10\nsll   A2, S1, 1\naddu  A2, A2, S1\nsll   A2, A2, 3\naddu  A2, A2, S1\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\nmove  A0, S0\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x800551D8\n move  A1, R0\njal   SleepVProcess\n addiu S1, S1, 1\naddiu S2, S2, -3\nslti  V0, S1, 0xa\nbnez  V0, L8010C494\n add.s F20, F20, F22\nmove  S0, S3\nmove  A0, S0\nmove  A1, R0\nlui   A2, 0x3f80\njal   0x800551D8\n move  A3, A2\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n li    A2, 256\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(current_player_index)\njal   PlayerHasEmptyItemSlot\n lb    A0, lo(current_player_index)(A0)\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nsb    S5, 0(V1)\njal   0x800525C8\n move  A0, S0\njal   FreeGraphics\n move  A0, S6\nj     L8010C180\n       NOP\nL8010C578:\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   V0, V0, 0x10\nbne   V0, V1, L8010C598\n       NOP\nlhu   V0, 0xa(FP)\nandi  V0, V0, 0xffef\nsh    V0, 0xa(FP)\nL8010C598:\njal   SleepProcess\n li    A0, 5\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\njal   SleepProcess\n li    A0, 5\nlui   A1, hi(current_player_index)\nlb    A1, lo(current_player_index)(A1)\njal   0x8004ACE0\n li    A0, 628\njal   SleepProcess\n li    A0, 20\njal   SleepVProcess\n       NOP\nli    V0, 2\nsw    V0, 0x10(SP)\nli    A0, -1\nli    A1, -1\nmove  A2, R0\njal   0x800F2388\n li    A3, 5\njal   SleepProcess\n li    A0, 10\nlw    A0, 0x5c(SP)\njal   0x800525C8\n       NOP\nlhu   T5, 0x66(SP)\nsll   A0, T5, 0x10\njal   FreeGraphics\n sra   A0, A0, 0x10\nj     L8010C684\n       NOP\nL8010C620:\nsll   V0, S6, 2\nlui   A1, hi(item_shop_cancelled_purchase_messages)\naddu  A1, A1, V0\nlw    A1, lo(item_shop_cancelled_purchase_messages)(A1)\njal   0x800EC590\n move  A0, FP\nj     L8010C684\n       NOP\nL8010C640:\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   V0, V0, 0x10\nbne   V0, V1, L8010C674\n       NOP\njal   func_80106FE8\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\nj     L8010BC1C\n sll   V0, S6, 2\nL8010C674:\njal   __PP64_INTERNAL_VIEW_MAP\n       NOP\nj     L8010BC1C\n sll   V0, S6, 2\nL8010C684:\nlhu   T5, 0x6e(SP)\nsll   V0, T5, 0x10\nsra   V0, V0, 0x10\nli    V1, -1\nbeq   V0, V1, L8010C8B8\n       NOP\njal   PlaySound\n li    A0, 277\nmove  A0, S4\nli    A1, -1\njal   0x800D9CE8\n li    A2, 4\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   A1, 0x3f99\njal   0x8001C92C\n ori  A1, A1, 0x999a\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   V1, hi(CORE_800D03F8)\nlw    V1, lo(CORE_800D03F8)(V1)\nsll   V0, A0, 1\naddu  V0, V0, A0\nsll   V0, V0, 6\naddu  V0, V0, V1\nlbu   V1, 2(V0)\nlui   A1, hi(CORE_800CCF58)\nlw    A1, lo(CORE_800CCF58)(A1)\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, A1\nlh    V0, 2(V0)\nmtc1  V0, F4\n      NOP\ncvt.s.w F4, F4\nmfc1  A1, F4\njal   0x8001C6A8\n       NOP\nL8010C728:\njal   0x800D9E80\n move  A0, S4\nandi  V0, V0, 0xffff\nbnez  V0, L8010C74C\n       NOP\njal   SleepVProcess\n       NOP\nj     L8010C728\n       NOP\nL8010C74C:\njal   0x800D9B24\n lw    A0, 0x7c(SP)\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010C7A8:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S4)\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010C7A8\n       NOP\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori AT, AT, 0xcccd\nmtc1  AT, F24\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nmtc1  R0, F28\n      NOP\nL8010C838:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\njal   SleepVProcess\n swc1  F0, 0x2c(S4)\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010C838\n       NOP\nsw    R0, 0x28(S4)\nsw    R0, 0x24(S4)\nsw    R0, 0x2c(S4)\njal   0x800D9B54\n move  A0, S4\nlw    A0, 0x7c(SP)\njal   0x800D9B54\n       NOP\nL8010C8B8:\nlui   A0, hi(current_player_index)\njal   0x800DB884\n lb    A0, lo(current_player_index)(A0)\njal   SleepProcess\n li    A0, 10\nlw    RA, 0xb4(SP)\nlw    FP, 0xb0(SP)\nlw    S7, 0xac(SP)\nlw    S6, 0xa8(SP)\nlw    S5, 0xa4(SP)\nlw    S4, 0xa0(SP)\nlw    S3, 0x9c(SP)\nlw    S2, 0x98(SP)\nlw    S1, 0x94(SP)\nlw    S0, 0x90(SP)\nldc1  F30, 0xe0(SP)\nldc1  F28, 0xd8(SP)\nldc1  F26, 0xd0(SP)\nldc1  F24, 0xc8(SP)\nldc1  F22, 0xc0(SP)\nldc1  F20, 0xb8(SP)\njr    RA\n addiu SP, SP, 0xe8\n\nfunc_8010C914:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\njal   0x800D9AA4\n move  S2, A0\nmove  S1, R0\nL8010C934:\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nandi  S0, S1, 0xff\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, S0\nlw    V0, 0x40(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, S0\njal   SleepVProcess\n addiu S1, S1, 0xc\nslti  V0, S1, 0x100\nbnez  V0, L8010C934\n       NOP\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n li    A1, 255\nlw    V0, 0x40(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n li    A1, 255\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_8010C9B4:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S2, A0\nli    S1, 255\nL8010C9D0:\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nandi  S0, S1, 0xff\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, S0\nlw    V0, 0x40(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, S0\njal   SleepVProcess\n addiu S1, S1, -0xc\nbgez  S1, L8010C9D0\n       NOP\nlw    V0, 0x3c(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, R0\nlw    V0, 0x40(S2)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n move  A1, R0\njal   0x800D9B24\n move  A0, S2\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_8010CA54:\naddiu SP, SP, -0x50\nsw    RA, 0x38(SP)\nsw    S7, 0x34(SP)\nsw    S6, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F22, 0x48(SP)\nsdc1  F20, 0x40(SP)\nmove  S3, A0\nmove  S6, R0\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nmove  S5, V0\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x20e\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nmove  S7, V0\njal   FreeMainFS\n move  A0, S0\nsll   S0, S5, 0x10\nsra   S0, S0, 0x10\nsll   A2, S7, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 10\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n move  A2, R0\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nsll   V0, S3, 3\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E1EC)(AT)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E1F0)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   PlaySound\n li    A0, 308\nmove  S0, R0\nsll   V0, S5, 0x10\nsra   S2, V0, 0x10\nsll   S1, S3, 3\nL8010CB88:\nmtc1  S0, F4\n      NOP\ncvt.s.w F4, F4\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F4, F0\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F4, F4, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E1F0)(AT)\nadd.s F4, F4, F0\ntrunc.w.s F0, F4\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S2\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nsll   A2, S0, 4\nmove  A0, S2\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x11\nbnez  V0, L8010CB88\n sll   A0, S5, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\njal   0x80055458\n li    A2, 255\nmove  A0, S3\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nli    V1, -1\nbeq   V0, V1, L8010CC74\n li    A1, 16386\nli    S6, 1\nlui   A0, hi(D_801127D8)\naddiu A0, A0, lo(D_801127D8)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S3, 0x8c(V0)\nL8010CC74:\nbnez  S6, L8010CCA4\n sll   A0, S3, 0x10\nsll   V1, S3, 3\nsubu  V1, V1, S3\nsll   V1, V1, 3\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlbu   V0, lo(p1_stars)(V0)\naddiu V0, V0, -1\nlui   AT, hi(p1_stars)\naddu  AT, AT, V1\nsb    V0, lo(p1_stars)(AT)\nL8010CCA4:\nsra   A0, A0, 0x10\njal   0x800FF900\n li    A1, 5\njal   PlaySound\n li    A0, 599\nbeqz  S6, L8010CCC4\n li    S2, 30\nli    S2, 120\nL8010CCC4:\nbeqz  S2, L8010CD9C\n move  S0, R0\nsll   S1, S3, 3\nli    AT, 0x41800000 ; 16.000000\nmtc1  AT, F20\nli    AT, 0x40800000 ; 4.000000\nmtc1  AT, F22\nsll   S4, S5, 0x10\nsll   V1, S0, 1\nL8010CCE8:\naddu  V1, V1, S0\nsll   V0, V1, 4\nsubu  V0, V0, V1\nsll   V0, V0, 1\nmtc1  V0, F12\n      NOP\ncvt.s.w F12, F12\njal   0x8008EF20\n addiu S0, S0, 1\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E210)(AT)\nmul.s F2, F2, F20\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S1\nlwc1  F4, lo(D_8011E1F0)(AT)\nadd.s F2, F2, F4\nmul.s F0, F0, F22\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F0, F20\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nsra   A0, S4, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\njal   SleepVProcess\n       NOP\nslt   V0, S0, S2\nbnez  V0, L8010CCE8\n sll   V1, S0, 1\nL8010CD9C:\nli    S0, 16\nsll   V0, S5, 0x10\nsra   S2, V0, 0x10\nsll   S1, S3, 3\nL8010CDAC:\nmtc1  S0, F4\n      NOP\ncvt.s.w F4, F4\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F4, F0\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F4, F4, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S1\nlwc1  F0, lo(D_8011E1F0)(AT)\nadd.s F4, F4, F0\ntrunc.w.s F0, F4\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S2\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nsll   A2, S0, 4\nmove  A0, S2\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, -1\nbgez  S0, L8010CDAC\n sll   A0, S5, 0x10\njal   0x800525C8\n sra   A0, A0, 0x10\nsll   A0, S7, 0x10\njal   FreeGraphics\n sra   A0, A0, 0x10\nsltiu V0, S6, 1\nlw    RA, 0x38(SP)\nlw    S7, 0x34(SP)\nlw    S6, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F22, 0x48(SP)\nldc1  F20, 0x40(SP)\njr    RA\n addiu SP, SP, 0x50\n\nD_8010CE9C:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\njal   0x800EC3E4\n       NOP\njal   EndProcess\n move  A0, R0\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_8010CEC0:\naddiu SP, SP, -0xb0\nsw    RA, 0x94(SP)\nsw    FP, 0x90(SP)\nsw    S7, 0x8c(SP)\nsw    S6, 0x88(SP)\nsw    S5, 0x84(SP)\nsw    S4, 0x80(SP)\nsw    S3, 0x7c(SP)\nsw    S2, 0x78(SP)\nsw    S1, 0x74(SP)\nsw    S0, 0x70(SP)\nsdc1  F24, 0xa8(SP)\nsdc1  F22, 0xa0(SP)\nsdc1  F20, 0x98(SP)\nmove  S4, A0\nsw    R0, 0x1c(SP)\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nsh    V0, 0x26(SP)\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x20e\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsh    V0, 0x2e(SP)\njal   FreeMainFS\n move  A0, S0\nlhu   T0, 0x26(SP)\nsll   S1, T0, 0x10\nsra   S1, S1, 0x10\nlhu   T0, 0x2e(SP)\nsll   A2, T0, 0x10\nmove  A0, S1\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80055024\n move  A3, R0\nmove  A0, S1\nmove  A1, R0\njal   0x80055294\n li    A2, 10\nmove  A0, S1\nmove  A1, R0\njal   0x800550F4\n move  A2, R0\nmove  A0, S1\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nsll   S0, S4, 3\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E1EC)(AT)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E1F0)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S1\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nmove  A0, S1\nmove  A1, R0\njal   0x80055458\n move  A2, R0\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nsh    V0, 0x36(SP)\nsubu  S0, S0, S4\nsll   S0, S0, 3\nlui   V0, hi(p1_char)\naddu  V0, V0, S0\nlbu   V0, lo(p1_char)(V0)\nsll   V0, V0, 2\nlui   A0, hi(CORE_80101040)\naddu  A0, A0, V0\nlw    A0, lo(CORE_80101040)(A0)\njal   ReadMainFS\n move  S5, R0\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsh    V0, 0x3e(SP)\njal   FreeMainFS\n move  A0, S0\nlhu   T0, 0x36(SP)\nsll   V0, T0, 0x10\nsra   S0, V0, 0x10\nlhu   T0, 0x3e(SP)\nsll   A2, T0, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 10\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nandi  V0, S4, 1\nbeqz  V0, L8010D0A0\n move  A0, S0\nmove  A1, R0\nj     L8010D0B4\n li    A2, 4097\nL8010D0A0:\nlhu   T0, 0x36(SP)\nsll   A0, T0, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\nli    A2, 4096\nL8010D0B4:\njal   0x800553A8\n       NOP\nmove  A0, S4\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nli    V1, -1\nbeq   V0, V1, L8010D0E8\n move  A1, R0\nlhu   T0, 0x36(SP)\nsll   A0, T0, 0x10\nsra   A0, A0, 0x10\njal   0x800553A8\n li    A2, 32768\nL8010D0E8:\nlhu   T0, 0x36(SP)\nsll   S0, T0, 0x10\nsra   S0, S0, 0x10\nsll   V0, S4, 3\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, V0\nlwc1  F2, lo(D_8011E20C)(AT)\nli    AT, 0x41800000 ; 16.000000\nmtc1  AT, F4\n      NOP\nmul.s F2, F2, F4\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E1EC)(AT)\nsub.s F0, F0, F2\nli    AT, 0x41000000 ; 8.000000\nmtc1  AT, F2\n      NOP\nsub.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F4\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, V0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   PlaySound\n li    A0, 307\nmove  S1, R0\nlhu   T0, 0x26(SP)\nsll   V0, T0, 0x10\nsra   S3, V0, 0x10\nsll   S2, S4, 3\nlhu   T0, 0x36(SP)\nsll   S6, T0, 0x10\nL8010D1BC:\nmtc1  S1, F4\n      NOP\ncvt.s.w F4, F4\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F4, F0\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S2\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F4, F4, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E1F0)(AT)\nadd.s F4, F4, F0\ntrunc.w.s F0, F4\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S3\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nsll   S0, S1, 4\nandi  S0, S0, 0xffff\nmove  A0, S3\nmove  A1, R0\njal   0x80055458\n move  A2, S0\nsra   A0, S6, 0x10\nmove  A1, R0\njal   0x80055458\n move  A2, S0\njal   SleepVProcess\n addiu S1, S1, 1\nslti  V0, S1, 0x11\nbnez  V0, L8010D1BC\n move  A1, R0\nlhu   T0, 0x26(SP)\nsll   A0, T0, 0x10\nsra   A0, A0, 0x10\njal   0x80055458\n li    A2, 255\nlhu   T0, 0x36(SP)\nsll   A0, T0, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\njal   0x80055458\n li    A2, 255\nmove  A0, S4\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nli    S0, -1\nnor   V0, R0, V0\nsltu  V0, R0, V0\nsubu  V0, R0, V0\nandi  V0, V0, 0x620f\nsll   V1, S4, 3\nsubu  V1, V1, S4\nsll   V1, V1, 3\nlui   AT, hi(p1_char)\naddu  AT, AT, V1\nlbu   V1, lo(p1_char)(AT)\nsll   V1, V1, 2\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nori   A0, V0, 0x620e\nlui   A1, hi(CORE_801014A0)\naddu  A1, A1, V1\nlw    A1, lo(CORE_801014A0)(A1)\nmove  A2, R0\njal   0x800EC1E8\n move  A3, R0\nsll   A0, S4, 0x10\nsra   A0, A0, 0x10\njal   0x800FF900\n li    A1, 2\njal   0x800EC3C0\n move  A0, S4\nmove  A0, S4\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nbeq   V0, S0, L8010D34C\n li    A1, 4096\nlui   A0, hi(D_8010CE9C)\naddiu A0, A0, lo(D_8010CE9C)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\njal   SleepProcess\n li    A0, 20\nL8010D34C:\nmove  FP, R0\nmove  S2, R0\nmove  A0, S4\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nli    V1, -1\nbeq   V0, V1, L8010D390\n li    T0, 1\nli    FP, 1\nsw    T0, 0x1c(SP)\nlui   A0, hi(D_801127D8)\naddiu A0, A0, lo(D_801127D8)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S4, 0x8c(V0)\nL8010D390:\njal   PlaySound\n li    A0, 307\nsll   A0, S4, 0x10\nsra   A0, A0, 0x10\nli    A1, 3\njal   0x800FFA4C\n li    A2, 5\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F12\n      NOP\njal   0x800EEF80\n sw    V0, 0x44(SP)\naddiu S6, V0, 1\nmove  S1, R0\nmove  S7, R0\nsll   S0, S4, 3\nli    AT, 0x41800000 ; 16.000000\nmtc1  AT, F22\nli    AT, 0x41000000 ; 8.000000\nmtc1  AT, F24\nlhu   T0, 0x36(SP)\nsll   T0, T0, 0x10\nsw    T0, 0x4c(SP)\nsll   V0, S4, 3\nsubu  V0, V0, S4\nsll   V0, V0, 3\nsw    V0, 0x54(SP)\nsll   T0, S4, 3\nsubu  T0, T0, S4\nsw    T0, 0x5c(SP)\nsll   T0, S4, 3\nsubu  T0, T0, S4\nsw    T0, 0x64(SP)\nsll   T0, S4, 3\nsubu  T0, T0, S4\nsw    T0, 0x6c(SP)\nlw    T0, 0x4c(SP)\nsra   S3, T0, 0x10\nL8010D428:\nsll   V0, S6, 0x10\nbnez  V0, L8010D454\n slti  V0, S2, 2\njal   PlaySound\n li    A0, 599\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\naddiu S6, V0, 0x1e\nslti  V0, S2, 2\nL8010D454:\nxori  V0, V0, 1\nsubu  S2, S2, V0\nbnez  S2, L8010D514\n li    V0, 9\nsll   V1, S1, 1\naddu  V1, V1, S1\nsll   V0, V1, 4\nsubu  V0, V0, V1\nsll   V0, V0, 1\nmtc1  V0, F12\n      NOP\njal   0x8008EF20\n cvt.s.w F12, F12\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E210)(AT)\nmul.s F2, F2, F22\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F4, lo(D_8011E1F0)(AT)\nadd.s F2, F2, F4\nadd.s F0, F0, F0\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nlhu   T0, 0x26(SP)\nsll   A0, T0, 0x10\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F0, F22\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nj     L8010D640\n       NOP\nL8010D514:\nbne   S2, V0, L8010D640\n sll   V1, S7, 1\naddu  V1, V1, S7\nsll   V0, V1, 4\nsubu  V0, V0, V1\nsll   V0, V0, 1\nmtc1  V0, F20\n      NOP\ncvt.s.w F20, F20\njal   0x8008EF20\n mov.s F12, F20\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E20C)(AT)\nmul.s F2, F2, F22\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F4, lo(D_8011E1EC)(AT)\nadd.s F2, F2, F4\nadd.s F0, F0, F0\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A2, F0\n      NOP\nsll   A2, A2, 0x10\nlhu   T0, 0x26(SP)\nsll   A0, T0, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F22\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\njal   0x8008EF20\n mov.s F12, F20\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1EC)(AT)\nsub.s F2, F2, F24\nadd.s F0, F0, F0\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A2, F0\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F22\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlw    T0, 0x4c(SP)\nsra   A0, T0, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\naddiu S7, S7, 1\nL8010D640:\nlw    T0, 0x54(SP)\nlui   V0, hi(CORE_800D110C)\naddu  V0, V0, T0\nlbu   V0, lo(CORE_800D110C)(V0)\nandi  V0, V0, 1\nbeqz  V0, L8010D72C\n       NOP\nbeqz  S2, L8010D75C\n       NOP\nlui   V0, hi(p1_cpu_difficulty)\naddu  V0, V0, T0\nlbu   V0, lo(p1_cpu_difficulty)(V0)\nbnez  V0, L8010D690\n       NOP\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nj     L8010D714\n li    V1, 6\nL8010D690:\nlw    T0, 0x5c(SP)\nsll   V0, T0, 3\nlui   V1, hi(p1_cpu_difficulty)\naddu  V1, V1, V0\nlbu   V1, lo(p1_cpu_difficulty)(V1)\nli    V0, 1\nbne   V1, V0, L8010D6C8\n       NOP\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nj     L8010D714\n li    V1, 7\nL8010D6C8:\nlw    T0, 0x64(SP)\nsll   V0, T0, 3\nlui   V1, hi(p1_cpu_difficulty)\naddu  V1, V1, V0\nlbu   V1, lo(p1_cpu_difficulty)(V1)\nli    V0, 2\nbne   V1, V0, L8010D700\n       NOP\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nj     L8010D714\n li    V1, 8\nL8010D700:\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nli    V1, 9\nL8010D714:\nsubu  V1, V1, V0\nslt   V1, V1, S2\nbeqz  V1, L8010D75C\n sltiu V1, S2, 1\nj     L8010D804\n       NOP\nL8010D72C:\nlw    T0, 0x6c(SP)\nsll   V0, T0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\nlui   AT, hi(CORE_800C9520)\naddu  AT, AT, V0\nlhu   V0, lo(CORE_800C9520)(AT)\nandi  V0, V0, 0x8000\nbeqz  V0, L8010D804\n sltiu V1, S2, 1\nL8010D75C:\nlw    T0, 0x1c(SP)\nbnez  T0, L8010D804\n sltiu V1, S2, 1\naddiu FP, FP, 1\nbnez  S5, L8010D800\n li    S2, 10\nmove  A0, S3\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nmove  A0, S3\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nli    S5, 1\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E1EC)(AT)\nsub.s F0, F0, F24\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F22\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S3\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nL8010D800:\nsltiu V1, S2, 1\nL8010D804:\nxori  V0, S5, 1\nsltiu V0, V0, 1\nand   V1, V1, V0\nbeqz  V1, L8010D8B4\n move  A0, S3\nmove  A1, R0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nmove  A0, S3\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nmove  S5, R0\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E20C)(AT)\nmul.s F2, F2, F22\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E1EC)(AT)\nsub.s F0, F0, F2\nsub.s F0, F0, F24\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F22\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S3\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nL8010D8B4:\njal   SleepVProcess\n addiu S1, S1, 1\nslti  V0, S1, 0x78\nbnez  V0, L8010D428\n addiu S6, S6, -1\nlw    A0, 0x44(SP)\njal   0x800FFAEC\n       NOP\nlw    T0, 0x1c(SP)\nbnez  T0, L8010D8F4\n li    A1, 4096\nlui   A0, hi(D_8010CE9C)\naddiu A0, A0, lo(D_8010CE9C)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nL8010D8F4:\nbnez  FP, L8010D9D4\n li    S1, 16\nlhu   T0, 0x26(SP)\nsll   V0, T0, 0x10\nsra   S3, V0, 0x10\nsll   S2, S4, 3\nlhu   T0, 0x36(SP)\nsll   S5, T0, 0x10\nL8010D914:\nmtc1  S1, F4\n      NOP\ncvt.s.w F4, F4\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F4, F0\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S2\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F4, F4, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S2\nlwc1  F0, lo(D_8011E1F0)(AT)\nadd.s F4, F4, F0\ntrunc.w.s F0, F4\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S3\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nsll   S0, S1, 4\nandi  S0, S0, 0xffff\nmove  A0, S3\nmove  A1, R0\njal   0x80055458\n move  A2, S0\nsra   A0, S5, 0x10\nmove  A1, R0\njal   0x80055458\n move  A2, S0\njal   SleepVProcess\n addiu S1, S1, -2\nbltz  S1, L8010DB78\n       NOP\nj     L8010D914\n       NOP\nL8010D9D4:\nlhu   T0, 0x26(SP)\nsll   S2, T0, 0x10\nsll   S0, S4, 3\nL8010D9E0:\nmtc1  S1, F20\n      NOP\ncvt.s.w F20, F20\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E20C)(AT)\nmul.s F0, F20, F0\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F20, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nsra   A0, S2, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nlhu   T0, 0x36(SP)\nsll   A0, T0, 0x10\naddiu V0, S1, -0x10\nmtc1  V0, F0\n      NOP\ncvt.s.w F0, F0\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E20C)(AT)\nmul.s F0, F0, F2\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, S0\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\nli    AT, 0x41000000 ; 8.000000\nmtc1  AT, F2\n      NOP\nsub.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E210)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F20, F20, F0\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, S0\nlwc1  F0, lo(D_8011E1F0)(AT)\nadd.s F20, F20, F0\ntrunc.w.s F0, F20\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nlw    T0, 0x1c(SP)\nbnezl T0, L8010DB08\n addiu S1, S1, -2\nL8010DB08:\njal   SleepVProcess\n addiu S1, S1, -2\nslti  V0, S1, -0x10\nbeqz  V0, L8010D9E0\n move  A1, R0\nlhu   T0, 0x36(SP)\nsll   S0, T0, 0x10\nsra   S0, S0, 0x10\nmove  A0, S0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nli    S1, 16\nlhu   T0, 0x26(SP)\nsll   S0, T0, 0x10\nsll   A2, S1, 4\nL8010DB58:\nsra   A0, S0, 0x10\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S1, S1, -2\nbgez  S1, L8010DB58\n sll   A2, S1, 4\nL8010DB78:\nlhu   T0, 0x26(SP)\nsll   A0, T0, 0x10\njal   0x800525C8\n sra   A0, A0, 0x10\nlhu   T0, 0x2e(SP)\nsll   A0, T0, 0x10\njal   FreeGraphics\n sra   A0, A0, 0x10\nlhu   T0, 0x36(SP)\nsll   A0, T0, 0x10\njal   0x800525C8\n sra   A0, A0, 0x10\nlhu   T0, 0x3e(SP)\nsll   A0, T0, 0x10\njal   FreeGraphics\n sra   A0, A0, 0x10\nlw    T0, 0x1c(SP)\nbnez  T0, L8010DCAC\n li    S5, -2\nmove  S1, R0\nlui   A0, hi(current_turn)\nlb    A0, lo(current_turn)(A0)\nsll   V0, S1, 1\nL8010DBD4:\naddu  V1, V0, S1\nlui   V0, hi(D_8011E22C)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E22C)(V0)\nslt   V0, A0, V0\nbnezl V0, L8010DC0C\n addiu S1, S1, 1\nlui   V0, hi(D_8011E22D)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E22D)(V0)\nslt   V0, V0, A0\nbeqz  V0, L8010DC18\n sll   V0, S1, 1\naddiu S1, S1, 1\nL8010DC0C:\nsltiu V0, S1, 6\nbnez  V0, L8010DBD4\n sll   V0, S1, 1\nL8010DC18:\naddu  V0, V0, S1\nlui   S5, hi(D_8011E22E)\naddu  S5, S5, V0\nlbu   S5, lo(D_8011E22E)(S5)\nmove  S1, R0\nsll   V0, S1, 1\nL8010DC30:\naddu  V1, V0, S1\nlui   V0, hi(D_8011E240)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E240)(V0)\nslt   V0, FP, V0\nbnezl V0, L8010DC68\n addiu S1, S1, 1\nlui   V0, hi(D_8011E241)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E241)(V0)\nslt   V0, V0, FP\nbeqz  V0, L8010DC74\n sll   V0, S1, 1\naddiu S1, S1, 1\nL8010DC68:\nsltiu V0, S1, 0xe\nbnez  V0, L8010DC30\n sll   V0, S1, 1\nL8010DC74:\naddu  V0, V0, S1\nlui   AT, hi(D_8011E242)\naddu  AT, AT, V0\nlbu   V0, lo(D_8011E242)(AT)\nsubu  S5, S5, V0\nsll   V0, S4, 3\nsubu  V0, V0, S4\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslt   V0, S5, V0\nbeql  V0, R0, L8010DCAC\n li    S5, -1\nL8010DCAC:\nmove  V0, S5\nlw    RA, 0x94(SP)\nlw    FP, 0x90(SP)\nlw    S7, 0x8c(SP)\nlw    S6, 0x88(SP)\nlw    S5, 0x84(SP)\nlw    S4, 0x80(SP)\nlw    S3, 0x7c(SP)\nlw    S2, 0x78(SP)\nlw    S1, 0x74(SP)\nlw    S0, 0x70(SP)\nldc1  F24, 0xa8(SP)\nldc1  F22, 0xa0(SP)\nldc1  F20, 0x98(SP)\njr    RA\n addiu SP, SP, 0xb0\n\nboo_event_helper_process:\naddiu SP, SP, -0x40\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\njal   0x8004EE68\n sdc1  F20, 0x20(SP)\nlw    S1, 0x8c(V0)\nlui   A0, hi(D_8011FB58)\njal   0x800D975C\n lw    A0, lo(D_8011FB58)(A0)\nmove  S0, V0\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, S1, 0xc\naddiu A0, S0, 0x24\nlui   A1, 0x4000\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nlwc1  F0, 0x30(S1)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F2\n      NOP\nadd.s F0, F0, F2\nswc1  F0, 0x30(S0)\njal   0x800D9AA4\n move  A0, S0\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nmtc1  V0, F20\n      NOP\ncvt.s.w F20, F20\nlui   AT, hi(D_8011F8D8)\nldc1  F22, lo(D_8011F8D8)(AT)\nli    AT, 0x420C0000 ; 35.000000\nmtc1  AT, F26\nli    AT, 0x42200000 ; 40.000000\nmtc1  AT, F24\nL8010DD98:\njal   SleepVProcess\n       NOP\nlwc1  F0, 0x30(S0)\ncvt.d.s F0, F0\nadd.d F0, F0, F22\ncvt.s.d F0, F0\nswc1  F0, 0x30(S0)\nlwc1  F2, 0x30(S1)\nadd.s F2, F2, F26\nc.le.s F2, F0\n      NOP\nbc1t  L8010DE0C\n       NOP\nadd.s F20, F20, F24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F20\n      NOP\njal   0x8008A2A0\n addiu A0, A0, 0x74\nj     L8010DD98\n       NOP\nL8010DE0C:\njal   0x800D9B54\n move  A0, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x40\n\nboo_event_helper:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nlui   A0, hi(boo_event_helper_process)\naddiu A0, A0, lo(boo_event_helper_process)\nli    A1, 4096\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S0, 0x8c(V0)\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n__PP64_INTERNAL_BOO_SPACE_EVENT:\nboo_event:\naddiu SP, SP, -0x118\nsw    RA, 0xe4(SP)\nsw    FP, 0xe0(SP)\nsw    S7, 0xdc(SP)\nsw    S6, 0xd8(SP)\nsw    S5, 0xd4(SP)\nsw    S4, 0xd0(SP)\nsw    S3, 0xcc(SP)\nsw    S2, 0xc8(SP)\nsw    S1, 0xc4(SP)\nsw    S0, 0xc0(SP)\nsdc1  F30, 0x110(SP)\nsdc1  F28, 0x108(SP)\nsdc1  F26, 0x100(SP)\nsdc1  F24, 0xf8(SP)\nsdc1  F22, 0xf0(SP)\nsdc1  F20, 0xe8(SP)\nmove  S4, R0\nmove  S6, R0\njal   GetCurrentSpaceIndex\n sw    R0, 0x9c(SP)\nlui   S7, hi(CORE_800CD058)\naddiu S7, S7, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\njal   0x800DBEC0\n move  S0, V0\nsw    V0, 0xb4(SP)\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nsh    R0, 0xae(SP)\nlbu   A0, 0xf(S0)\nsll   A0, A0, 0x18\nsra   A0, A0, 0x18\nlbu   A1, 0x10(S0)\nsll   A1, A1, 0x18\nsra   A1, A1, 0x18\nandi  A0, A0, 0xffff\njal   GetAbsSpaceIndexFromChainSpaceIndex\n andi  A1, A1, 0xffff\nmove  S2, V0\nsll   V0, S2, 0x10\nsra   S0, V0, 0x10\nli    V0, "+h[0]+"\nbeq   S0, V0, L8010DFB4\n li    T0, -1\nsw    T0, 0x94(SP)\nli    T0, -1\nsh    T0, 0xa6(SP)\nlui   A0, hi(D_8011FB08)\njal   0x800D975C\n lw    A0, lo(D_8011FB08)(A0)\nsw    V0, 0x8c(SP)\njal   0x800D9B24\n lw    A0, 0x8c(SP)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\nlw    T0, 0x8c(SP)\nswc1  F0, 0x30(T0)\njal   GetSpaceData\n move  A0, S0\nmove  S1, V0\nlwc1  F2, 0xc(S1)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F0\nlw    T0, 0x8c(SP)\nlw    A1, 8(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x10(S1)\njal   0x80089A10\n addiu A0, T0, 0xc\nj     L8010E2D8\n       NOP\nL8010DFB4:\nsw    R0, 0x94(SP)\nli    T0, "+f+"\nsh    T0, 0xa6(SP)\njal   GetSpaceData\n li    A0, "+f+'\nmove  S1, V0\nlui   T0, hi(D_8011FB0C)\nlw    T0, lo(D_8011FB0C)(T0)\nsw    T0, 0x8c(SP)\njal   PlaySound\n li    A0, 293\nli    A0, 51\njal   0x800D90C8\n move  A1, R0\nmove  S4, V0\nlb    V0, 1(S7)\nsll   V0, V0, 2\nlui   AT, hi(D_8011E280)\naddu  AT, AT, V0\nlw    V0, lo(D_8011E280)(AT)\nbeqz  V0, L8010E01C\n       NOP\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\njal   0x8001ED54\n lh    A0, 0(V0)\nL8010E01C:\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001C448\n addiu S1, S1, 8\njal   0x800D9714\n move  A0, S4\nsll   A0, S2, 0x10\njal   GetSpaceData\n sra   A0, A0, 0x10\naddiu S0, SP, 0x68\nmove  A0, S0\naddiu A1, V0, 8\njal   midpoint\n move  A2, S1\njal   0x800D88E8\n move  A0, S0\naddiu A0, S4, 0x18\njal   0x80089A20\n move  A1, S0\nsw    R0, 0x28(S4)\naddiu A0, S4, 0xc\njal   0x80089A20\n move  A1, S1\nmove  A0, S4\nli    A1, -1\njal   0x800D9CE8\n li    A2, 1\njal   0x800D9AA4\n move  A0, S4\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nmtc1  R0, F20\nli    AT, 0x3F7D0000 ; 0.988281\nori AT, AT, 0x70a4\nmtc1  AT, F26\nli    AT, 0x3C230000 ; 0.009949\nori AT, AT, 0xd70a\nmtc1  AT, F24\nlui   S0, hi(D_8011E280)\naddiu S0, S0, lo(D_8011E280)\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010E0EC:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x2c(S4)\nlb    V0, 1(S7)\nsll   V0, V0, 2\naddu  V0, V0, S0\nlw    V0, 0(V0)\nbeqz  V0, L8010E158\n       NOP\nlwc1  F0, 0x24(S4)\nneg.s F0, F0\nswc1  F0, 0x24(S4)\nL8010E158:\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010E0EC\n       NOP\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F0, F20\n      NOP\nbc1f  L8010E24C\n       NOP\nli    AT, 0x3F7D0000 ; 0.988281\nori AT, AT, 0x70a4\nmtc1  AT, F26\nli    AT, 0x3C230000 ; 0.009949\nori AT, AT, 0xd70a\nmtc1  AT, F24\nlui   S0, hi(D_8011E280)\naddiu S0, S0, lo(D_8011E280)\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F28\n      NOP\nL8010E1C4:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x2c(S4)\nlb    V0, 1(S7)\nsll   V0, V0, 2\naddu  V0, V0, S0\nlw    V0, 0(V0)\nbeqz  V0, L8010E230\n       NOP\nlwc1  F0, 0x24(S4)\nneg.s F0, F0\nswc1  F0, 0x24(S4)\nL8010E230:\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010E1C4\n       NOP\nL8010E24C:\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x28(S4)\nswc1  F0, 0x24(S4)\nswc1  F0, 0x2c(S4)\nlb    V0, 1(S7)\nsll   V0, V0, 2\nlui   AT, hi(D_8011E280)\naddu  AT, AT, V0\nlw    V0, lo(D_8011E280)(AT)\nbeqz  V0, L8010E290\n move  A0, S4\nli    AT, 0xBF800000 ; -1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x24(S4)\nL8010E290:\nli    A1, -1\njal   0x800D9CE8\n move  A2, R0\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui A1, 0x3f99\njal   0x8001C92C\n ori A1, A1, 0x999a\nL8010E2B4:\njal   0x800D9E0C\n move  A0, S4\nandi  V0, V0, 0xffff\nbnez  V0, L8010E2D8\n       NOP\njal   SleepVProcess\n       NOP\nj     L8010E2B4\n       NOP\nL8010E2D8:\njal   PlaySound\n li    A0, 599\nlw    A0, 0x8c(SP)\njal   func_8010C914\n       NOP\nsll   A0, S2, 0x10\njal   GetSpaceData\n sra   A0, A0, 0x10\nmove  S1, V0\nlhu   T0, 0xa6(SP)\nsll   V0, T0, 0x10\nsra   S0, V0, 0x10\nli    V0, -1\nbeq   S0, V0, L8010E36C\n addiu A1, S1, 8\nlw    A0, 0x8c(SP)\njal   0x800D9F5C\n li    A2, 5\nli    A0, -1\nli    A1, 5\njal   0x800ED20C\n move  A2, S0\njal   SleepProcess\n li    A0, 5\njal   0x8004EE68\n       NOP\nli    AT, 0x3FCC0000 ; 1.593750\nori AT, AT, 0xcccd\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\nL8010E36C:\nlb    V0, 0xf(S7)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 5\nbeqz  V0, L8010E3A4\n li    A0, 7\njal   0x800EC590\n li    A1, 0x6201 ; "Don\'t trouble me if you have no coins! Shoo! Shoo!"\nj     L8010ECE0\n       NOP\nL8010E3A4:\nmove  S0, R0\nL8010E3A8:\nlb    A0, 0xf(S7)\nL8010E3AC:\nbeq   S0, A0, L8010E3E4\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V1, V0, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nbnez  V0, L8010E3F4\n slti  V0, S0, 4\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlb    V0, lo(p1_stars)(V0)\nbnez  V0, L8010E3F4\n slti  V0, S0, 4 ; total players\nL8010E3E4:\naddiu S0, S0, 1\nslti  V0, S0, 4 ; total players\nbnez  V0, L8010E3AC\n       NOP\nL8010E3F4:\nbnez  V0, L8010E410\n move  S0, R0\nli    A0, 7\njal   0x800EC590\n li    A1, 0x6202 ; "There isn\'t a soul with coins or stars ..."\nj     L8010ECE0\n       NOP\nL8010E410:\nlb    V1, 0xf(S7)\nL8010E414:\nbeq   S0, V1, L8010E438\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbnez  V0, L8010E448\n li    V0, 4\nL8010E438:\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L8010E414\n li    V0, 4\nL8010E448:\nbne   S0, V0, L8010E460\n li    V0, 8\nli    V0, 1\nsb    V0, 0x20(SP)\nj     L8010E46C\n sb    R0, 0x60(SP)\nL8010E460:\nsb    V0, 0x20(SP)\nli    V0, 1\nsb    V0, 0x60(SP)\nL8010E46C:\nsb    R0, 0x21(SP)\nmove  S0, R0\nlb    V1, 0xf(S7)\nL8010E478:\nbeq   S0, V1, L8010E49C\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_stars)\naddu  AT, AT, V0\nlb    V0, lo(p1_stars)(AT)\nbnez  V0, L8010E4AC\n li    V0, 4\nL8010E49C:\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L8010E478\n li    V0, 4\nL8010E4AC:\nbeq   S0, V0, L8010E4F8\n li    V0, 1\nlb    V0, 0xf(S7)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 0x32\nbnez  V0, L8010E4F8\n li    V0, 1\nlui   V0, hi(p1_stars)\naddu  V0, V0, V1\nlb    V0, lo(p1_stars)(V0)\nslti  V0, V0, MAX_PLAYER_STAR_COUNT\nbnez  V0, L8010E504\n li    V0, 8\nli    V0, 1\nL8010E4F8:\nsb    V0, 0x30(SP)\nj     L8010E510\n sb    R0, 0x61(SP)\nL8010E504:\nsb    V0, 0x30(SP)\nli    V0, 1\nsb    V0, 0x61(SP)\nL8010E510:\nsb    R0, 0x31(SP)\nli    V0, 1\nsb    V0, 0x63(SP)\nsb    V0, 0x62(SP)\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 7\nli    A1, 0x6200 ; "Ooo, hoo, hoo! Which shall I steal? ..."\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage\n addiu A3, SP, 0x30\njal   func_80107BB4\n addiu A0, SP, 0x60\nmove  S0, V0\njal   0x800EC6C8\n sh    S0, 0xae(SP)\njal   0x800EC6EC\n sll   S0, S0, 0x10\nsra   S0, S0, 0x10\nli    V0, 2\nbeq   S0, V0, L8010EC88\n slti  V0, S0, 3\nbnez  V0, L8010E584\n li    V0, 3\nbeq   S0, V0, L8010ECA4\n li    V0, -1\nj     L8010ECE0\n       NOP\nL8010E584:\nbltz  S0, L8010ECE0\n move  S0, R0\nmove  S1, R0\nL8010E590:\naddiu S3, SP, 0x60\nL8010E594:\naddiu S2, SP, 0x20\nli    S5, 1\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0xbc(SP)\nli    FP, 8\nL8010E5B0:\nlb    V0, 0xf(S7)\nbeql  S0, V0, L8010E608\n addu  V0, S3, S1\nlw    T0, 0xbc(SP)\nbnez  T0, L8010E5EC\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeqz  V0, L8010E608\n addu  V0, S3, S1\nj     L8010E620\n sb    S5, 0(V0)\nL8010E5EC:\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_stars)\naddu  AT, AT, V0\nlb    V0, lo(p1_stars)(AT)\nbnez  V0, L8010E61C\n addu  V0, S3, S1\nL8010E608:\nsb    R0, 0(V0)\nsll   V0, S1, 4\naddu  V0, S2, V0\nj     L8010E62C\n sb    S5, 0(V0)\nL8010E61C:\nsb    S5, 0(V0)\nL8010E620:\nsll   V0, S1, 4\naddu  V0, S2, V0\nsb    FP, 0(V0)\nL8010E62C:\nsll   A1, S1, 4\naddu  A1, S2, A1\nmove  A0, S0\njal   0x800E2260\n addiu A1, A1, 1\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L8010E5B0\n addiu S1, S1, 1\nli    V0, 1\nsb    V0, 0x64(SP)\nsb    V0, 0x65(SP)\naddiu V0, SP, 0x40\nsw    V0, 0x10(SP)\naddiu V0, SP, 0x50\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 7\nli    A1, 0x5C02\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage "Who\'s your opponent?"\n addiu A3, SP, 0x30\njal   func_80107BD4\n addiu A0, SP, 0x60\nmove  S0, V0\njal   0x800EC6C8\n move  S2, S0\njal   0x800EC6EC\n move  S1, R0\nsll   S0, S0, 0x10\nsra   S0, S0, 0x10\nli    V0, 4\nbeq   S0, V0, L8010E718 ; Your Choice\n slti  V0, S0, 5\nbeqz  V0, L8010E6CC\n li    V0, -1\nbeq   S0, V0, L8010E3A8\n move  S0, R0\nj     L8010E8A4\n       NOP\nL8010E6CC:\nli    V0, 5\nbne   S0, V0, L8010E8A4\n li    V0, -1\nlw    T0, 0x94(SP)\nbne   T0, V0, L8010E708\n       NOP\njal   func_80106FE8\n move  S0, R0\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\nsb    V0, lo(CORE_800CB99C)(AT)\njal   0x80049FB8\n move  S1, R0\nj     L8010E594\n addiu S3, SP, 0x60\nL8010E708:\njal   __PP64_INTERNAL_VIEW_MAP\n move  S0, R0\nj     L8010E590\n move  S1, R0\nL8010E718:\nmove  S0, R0\nmove  S2, R0\naddiu S3, SP, 0x20\nmove  S1, R0\nL8010E728:\njal   0x800EE9C0\n move  A0, S1\nbnel  S0, V0, L8010E754\n addiu S1, S1, 1\nlb    V0, 0xf(S7)\nbeq   V0, S1, L8010E750\n sll   V0, S2, 2\naddu  V0, V0, S3\nsw    S1, 0x58(V0)\naddiu S2, S2, 1\nL8010E750:\naddiu S1, S1, 1\nL8010E754:\nslti  V0, S1, 4\nbnez  V0, L8010E728\n       NOP\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnezl V0, L8010E728\n move  S1, R0\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F12\n      NOP\njal   0x800EEF80\n move  S0, R0\nmove  V1, V0\nlui   A0, hi(D_8011E274)\naddiu A0, A0, lo(D_8011E274)\nsll   V0, S0, 2\nL8010E794:\naddu  V0, V0, A0\nlw    V0, 0(V0)\nslt   V0, V1, V0\nbnez  V0, L8010E7B8\n       NOP\naddiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L8010E794\n sll   V0, S0, 2\nL8010E7B8:\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nbeqz  V0, L8010E808\n addiu A0, SP, 0x20\nL8010E7C8:\nsll   V0, S0, 2\naddu  V0, V0, A0\nlw    V1, 0x58(V0)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_stars)\naddu  AT, AT, V0\nlb    V0, lo(p1_stars)(AT)\nbeql  V0, R0, L8010E7C8\n addiu S0, S0, -1\nlb    V0, 0xf(S7)\nbeql  V1, V0, L8010E7C8\n addiu S0, S0, -1\nj     L8010E898\n sll   V0, S0, 2\nL8010E808:\nbltz  S0, L8010E84C\n sll   V0, S0, 2\nL8010E810:\naddu  V0, V0, A0\nlw    V1, 0x58(V0)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeqz  V0, L8010E844\n addiu S0, S0, -1\nlb    V0, 0xf(S7)\nbnel  V1, V0, L8010E850\n li    S0, 2\nL8010E844:\nbgez  S0, L8010E810\n sll   V0, S0, 2\nL8010E84C:\nli    S0, 2\nL8010E850:\naddiu A0, SP, 0x20\nsll   V0, S0, 2\nL8010E858:\naddu  V0, V0, A0\nlw    V1, 0x58(V0)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeql  V0, R0, L8010E890\n addiu S0, S0, -1\nlb    V0, 0xf(S7)\nbne   V1, V0, L8010E898\n sll   V0, S0, 2\naddiu S0, S0, -1\nL8010E890:\nbgez  S0, L8010E858\n sll   V0, S0, 2\nL8010E898:\naddu  V0, SP, V0\nlhu   S2, 0x7a(V0)\nli    S1, 1\nL8010E8A4:\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nbnez  V0, L8010E8CC\n       NOP\n; paying to steal coins\nlb    A0, 0xf(S7)\njal   ShowPlayerCoinChange\n li    A1, -5\nlb    A0, 0xf(S7)\nj     L8010E8E0\n li    A1, -5\nL8010E8CC: ; paying to steal a star\nlb    A0, 0xf(S7)\njal   ShowPlayerCoinChange\n li    A1, -50\nlb    A0, 0xf(S7)\nli    A1, -50\nL8010E8E0:\njal   AdjustPlayerCoinsGradual\n       NOP\njal   SleepProcess\n li    A0, 30\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nsra   V0, V0, 0x10\nli    V1, 1\nbne   V0, V1, L8010E918\n move  S0, R0\nbeqz  S1, L8010E9AC\n li    A0, 7\nj     L8010E9A4\n li    A1, 25094\nL8010E918:\nlui   A0, hi(current_turn)\nlb    A0, lo(current_turn)(A0)\nsll   V0, S0, 1\nL8010E924:\naddu  V1, V0, S0\nlui   V0, hi(D_8011E22C)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E22C)(V0)\nslt   V0, A0, V0\nbnezl V0, L8010E95C\n addiu S0, S0, 1\nlui   V0, hi(D_8011E22D)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E22D)(V0)\nslt   V0, V0, A0\nbeqz  V0, L8010E968\n sll   V0, S0, 1\naddiu S0, S0, 1\nL8010E95C:\nsltiu V0, S0, 6\nbnez  V0, L8010E924\n sll   V0, S0, 1\nL8010E968:\naddu  V0, V0, S0\nlui   AT, hi(D_8011E22E)\naddu  AT, AT, V0\nlbu   V0, lo(D_8011E22E)(AT)\nbnez  S1, L8010E99C\n sw    V0, 0x9c(SP)\nli    AT, 0x40C00000 ; 6.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nli    A0, 7\nj     L8010E9A4\n addiu A1, V0, 0x6207 ; "Good! Here I go... I feel great! Great! Leave it to me!"\nL8010E99C:\nli    A0, 7\nli    A1, 0x620D ; "Good, good... I\'ll steal coins from that no-good fool..."\nL8010E9A4:\njal   0x800EC590\n       NOP\nL8010E9AC:\njal   func_8010C9B4\n lw    A0, 0x8c(SP)\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nbnez  V0, L8010EBEC\n sll   A0, S2, 0x10\nsll   V0, S2, 0x10\nsra   S0, V0, 0x10\njal   func_8010CEC0\n move  A0, S0\nlw    A0, 0x8c(SP)\njal   func_8010C914\n move  S6, V0\nli    V0, -2\nbeq   S6, V0, L8010EC38\n li    V0, -1\nbne   S6, V0, L8010EA34\n addiu A0, SP, 0x20\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   S6, hi(p1_coins)\naddu  S6, S6, V0\nlh    S6, lo(p1_coins)(S6)\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n move  A2, S6\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 7\nj     L8010EA8C\n li    A1, 25108\nL8010EA34:\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n move  A2, S6\nlw    T0, 0x9c(SP)\nsubu  V1, T0, S6\nmove  S0, R0\nL8010EA50:\nlui   V0, hi(D_8011E26C)\naddu  V0, V0, S0\nlbu   V0, lo(D_8011E26C)(V0)\nslt   V0, V1, V0\nbeql  V0, R0, L8010EA7C\n sw    R0, 0x10(SP)\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L8010EA50\n       NOP\nsw    R0, 0x10(SP)\nL8010EA7C:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 7\naddiu A1, S0, 0x6210\nL8010EA8C:\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage: "That\'s rediculous! I only got _ coins!"\n move  A3, R0\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nli    V0, -2\nbeq   S6, V0, L8010EC38\n li    A0, 25\nlui   AT, hi(CORE_800D037C)\nsh    R0, lo(CORE_800D037C)(AT)\nmtc1  S6, F24\n      NOP\ncvt.s.w F24, F24\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F0\n      NOP\ndiv.s F24, F24, F0\nmtc1  R0, F20\n      NOP\njal   0x800D90C8\n move  A1, R0\nlui   AT, hi(D_8011FB58)\nsw    V0, lo(D_8011FB58)(AT)\njal   0x800D9714\n move  A0, V0\nlui   A0, hi(D_8011FB58)\njal   0x800D9B24\n lw    A0, lo(D_8011FB58)(A0)\nsll   A0, S2, 0x10\nsra   A0, A0, 0x10\nli    A1, 3\njal   0x800FFA4C\n li    A2, 5\nbeqz  S6, L8010EB7C\n move  S1, V0\nli    AT, 0x3F800000\nmtc1  AT, F22\nsll   S0, S2, 0x10\nadd.s F20, F20, F24\nL8010EB30:\nc.le.s F22, F20\n      NOP\nbc1f  L8010EB6C\n       NOP\nlw    A0, 0x8c(SP)\njal   boo_event_helper\n sub.s F20, F20, F22\nlb    A0, 0xf(S7)\njal   AdjustPlayerCoinsGradual\n li    A1, 1\nsra   A0, S0, 0x10\nli    A1, -1\njal   0x800F5BF4\n move  A2, R0\naddiu S6, S6, -1\nL8010EB6C:\njal   SleepVProcess\n       NOP\nbnezl S6, L8010EB30\n add.s F20, F20, F24\nL8010EB7C:\njal   0x800FFAEC\n move  A0, S1\njal   SleepProcess\n li    A0, 20\nlui   A0, hi(D_8011FB58)\njal   0x800D9B54\n lw    A0, lo(D_8011FB58)(A0)\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800ECC0C\n addiu A0, A0, 0x18\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\njal   SleepProcess\n li    A0, 5\nlb    A1, 0xf(S7)\njal   0x8004ACE0\n li    A0, 628\njal   SleepProcess\n li    A0, 45\nli    V0, 1\nlui   AT, hi(CORE_800D037C)\nsh    V0, lo(CORE_800D037C)(AT)\nj     L8010EC3C\n li    V0, -1\nL8010EBEC:\njal   func_8010CA54\n sra   A0, A0, 0x10\nlw    A0, 0x8c(SP)\njal   func_8010C914\n move  S0, V0\nbeqz  S0, L8010EC34\n li    A0, 7\njal   0x800EC590\n li    A1, 0x6205 ; "I got a star! ..."\nli    V0, 1\nlui   AT, hi(D_8011D308)\nsw    V0, lo(D_8011D308)(AT)\njal   func_80106EEC\n lw    A0, 0x8c(SP)\nlui   AT, hi(D_8011D308)\nsw    R0, lo(D_8011D308)(AT)\nj     L8010EC3C\n li    V0, -1\nL8010EC34:\nli    S6, -2\nL8010EC38:\nli    V0, -1\nL8010EC3C:\nlw    T0, 0x94(SP)\nbne   T0, V0, L8010EC64\n li    V0, -2\njal   SleepProcess\n li    A0, 20\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nli    V0, -2\nL8010EC64:\nbne   S6, V0, L8010ECE0\n       NOP\njal   SleepProcess\n li    A0, 30\nli    A0, 7\njal   0x800EC590\n li    A1, 0x6215 ; "There was weird gas all over the place! I feel awful!"\nj     L8010ECE0\n       NOP\nL8010EC88:\njal   func_8010C9B4\n lw    A0, 0x8c(SP)\nli    A0, 7\njal   0x800EC590\n li    A1, 0x6203 ; "What are you thinking? I can\'t believe it! Ooo, hoo, hoo!"\nj     L8010ECE0\n       NOP\nL8010ECA4:\nlw    T0, 0x94(SP)\nbne   T0, V0, L8010ECD0\n       NOP\njal   func_80106FE8\n move  S0, R0\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\nj     L8010E3A8\n       NOP\nL8010ECD0:\njal   __PP64_INTERNAL_VIEW_MAP\n move  S0, R0\nj     L8010E3A8\n       NOP\nL8010ECE0:\nlhu   T0, 0xae(SP)\nsll   V0, T0, 0x10\nsra   V0, V0, 0x10\nli    V1, 2\nbeq   V0, V1, L8010ED00\n       NOP\njal   func_8010C9B4\n lw    A0, 0x8c(SP)\nL8010ED00:\nlw    T0, 0x8c(SP)\njal   0x800ECC0C\n addiu A0, T0, 0x18\nli    V0, -1\nlw    T0, 0x94(SP)\nbne   T0, V0, L8010ED24\n       NOP\njal   0x800D9B54\n lw    A0, 0x8c(SP)\nL8010ED24:\nlhu   T0, 0xa6(SP)\nsll   V0, T0, 0x10\nsra   V0, V0, 0x10\nli    V1, -1\nbeq   V0, V1, L8010EFA4\n       NOP\njal   PlaySound\n li    A0, 294\nmove  A0, S4\nli    A1, -1\njal   0x800D9CE8\n li    A2, 4\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   A1, 0x3f99\njal   0x8001C92C\n ori A1, A1, 0x999a\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   V1, hi(CORE_800D03F8)\nlw    V1, lo(CORE_800D03F8)(V1)\nsll   V0, A0, 1\naddu  V0, V0, A0\nsll   V0, V0, 6\naddu  V0, V0, V1\nlbu   V1, 2(V0)\nlui   A1, hi(CORE_800CCF58)\nlw    A1, lo(CORE_800CCF58)(A1)\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, A1\nlh    V0, 2(V0)\nmtc1  V0, F4\n      NOP\ncvt.s.w F4, F4\nmfc1  A1, F4\njal   0x8001C6A8\n       NOP\nL8010EDC8:\njal   0x800D9E80\n move  A0, S4\nandi  V0, V0, 0xffff\nbnez  V0, L8010EDEC\n       NOP\njal   SleepVProcess\n       NOP\nj     L8010EDC8\n       NOP\nL8010EDEC:\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F12\njal   0x8008EF20\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\ndiv.s F22, F2, F0\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nlui   S0, hi(D_8011E280)\naddiu S0, S0, lo(D_8011E280)\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F28\n      NOP\nL8010EE48:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x2c(S4)\nlb    V0, 1(S7)\nsll   V0, V0, 2\naddu  V0, V0, S0\nlw    V0, 0(V0)\nbeqz  V0, L8010EEB4\n       NOP\nlwc1  F0, 0x24(S4)\nneg.s F0, F0\nswc1  F0, 0x24(S4)\nL8010EEB4:\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F30\nc.lt.s F20, F28\n      NOP\nbc1t  L8010EE48\n       NOP\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F20\nli    AT, 0x3E4C0000 ; 0.199219\nori   AT, AT, 0xcccd\nmtc1  AT, F26\nli    AT, 0x3F4C0000 ; 0.796875\nori   AT, AT, 0xcccd\nmtc1  AT, F24\nlui   S0, hi(D_8011E280)\naddiu S0, S0, lo(D_8011E280)\nli    AT, 0x41340000 ; 11.250000\nmtc1  AT, F30\nmtc1  R0, F28\n      NOP\nL8010EF08:\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nswc1  F0, 0x28(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x24(S4)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\n      NOP\nmul.s F0, F0, F26\nadd.s F0, F0, F24\nswc1  F0, 0x2c(S4)\nlb    V0, 1(S7)\nsll   V0, V0, 2\naddu  V0, V0, S0\nlw    V0, 0(V0)\nbeqz  V0, L8010EF74\n       NOP\nlwc1  F0, 0x24(S4)\nneg.s F0, F0\nswc1  F0, 0x24(S4)\nL8010EF74:\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F30\nc.lt.s F28, F20\n      NOP\nbc1t  L8010EF08\n       NOP\nsw    R0, 0x28(S4)\nsw    R0, 0x24(S4)\nsw    R0, 0x2c(S4)\njal   0x800D9B54\n move  A0, S4\nL8010EFA4:\nlw    T0, 0xb4(SP)\nbeqz  T0, L8010EFC0\n li    V0, -1\nlb    A0, 0xf(S7)\njal   0x800DB884\n       NOP\nli    V0, -1\nL8010EFC0:\nlw    T0, 0x94(SP)\nbeq   T0, V0, L8010F000\n       NOP\njal   0x8004EE68\n       NOP\nli    AT, 0x3FA60000 ; 1.296875\nori   AT, AT, 0x6666\nmtc1  AT, F12\n      NOP\njal   0x800E8EDC\n move  S0, V0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n       NOP\nL8010F000:\nlw    RA, 0xe4(SP)\nlw    FP, 0xe0(SP)\nlw    S7, 0xdc(SP)\nlw    S6, 0xd8(SP)\nlw    S5, 0xd4(SP)\nlw    S4, 0xd0(SP)\nlw    S3, 0xcc(SP)\nlw    S2, 0xc8(SP)\nlw    S1, 0xc4(SP)\nlw    S0, 0xc0(SP)\nldc1  F30, 0x110(SP)\nldc1  F28, 0x108(SP)\nldc1  F26, 0x100(SP)\nldc1  F24, 0xf8(SP)\nldc1  F22, 0xf0(SP)\nldc1  F20, 0xe8(SP)\njr    RA\n addiu SP, SP, 0x118\n\nfunc_8010F088:\naddiu SP, SP, -0x48\nsw    RA, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F22, 0x40(SP)\nsdc1  F20, 0x38(SP)\nmove  S3, A0\nmtc1  A1, F20\nmtc1  A2, F22\nlw    S0, 0x58(SP)\nlw    S1, 0x5c(SP)\nmove  S5, A3\nlui   V0, hi(D_8010F1E4)\naddiu V0, V0, lo(D_8010F1E4)\nsw    V0, 0x10(SP)\nli    A0, 500\nmove  A1, R0\nmove  A2, R0\njal   0x80047620\n li    A3, -1\nmove  S4, V0\nli    A0, 32\njal   0x80019A14\n li    A1, 31000\nsw    V0, 0x5c(S4)\nmove  S2, V0\nli    AT, 0x437F0000 ; 255.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0xc(S2)\nswc1  F20, 0x10(S2)\nswc1  F22, 0x14(S2)\nmove  A0, S2\njal   0x80089A20\n move  A1, S0\nbeqz  S1, L8010F138\n lui A0, 0x13\nsw    R0, 0x10(SP)\nj     L8010F140\n ori A0, A0, 0x1f8\nL8010F138:\nsw    R0, 0x10(SP)\nori   A0, A0, 0x1f7\nL8010F140:\nmove  A1, R0\nlui   A2, 0x3f80\njal   0x800D912C\n move  A3, R0\nmove  S0, V0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\nlwc1  F0, 0(S3)\nswc1  F0, 0xc(S0)\nlwc1  F0, 4(S3)\nswc1  F0, 0x10(S0)\nlwc1  F0, 8(S3)\nswc1  F0, 0x14(S0)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001FA68\n lh    A0, 0(V0)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n li    A1, 255\nsw    S0, 0x18(S2)\nsh    S5, 0x1c(S2)\nmove  V0, S4\nlw    RA, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x48\n\nD_8010F1E4:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S2, A0\nlw    S0, 0x5c(S2)\nlw    S1, 0x18(S0)\naddiu A1, S1, 0xc\nmove  A0, A1\njal   0x80089A70\n move  A2, S0\nlwc1  F0, 0x2c(S1)\nlwc1  F2, 0x10(S0)\nadd.s F0, F0, F2\nswc1  F0, 0x2c(S1)\nswc1  F0, 0x28(S1)\nswc1  F0, 0x24(S1)\nlwc1  F0, 0xc(S0)\nlwc1  F2, 0x14(S0)\nsub.s F0, F0, F2\nmtc1  R0, F2\n      NOP\nc.lt.s F0, F2\n      NOP\n      NOP\nbc1f  L8010F288\n swc1  F0, 0xc(S0)\nswc1  F2, 0xc(S0)\nlhu   V0, 0x1c(S0)\nbeqz  V0, L8010F280\n move  A0, S2\nlw    A0, 0x18(S0)\njal   0x800D9B54\n       NOP\njal   0x800479AC\n move  A0, S2\nj     L8010F2E4\n       NOP\nL8010F280:\njal   0x80047B38\n li    A1, 8\nL8010F288:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlwc1  F2, 0xc(S0)\nli    AT, 0x4F000000 ; 2147483648.000000\nmtc1  AT, F0\n      NOP\nc.le.s F0, F2\n      NOP\n      NOP\nbc1tl L8010F2C8\n sub.s F0, F2, F0\ntrunc.w.s F0, F2\nmfc1  A1, F0\nj     L8010F2DC\n       NOP\nL8010F2C8:\nlui   V0, 0x8000\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nor    A1, A1, V0\nL8010F2DC:\njal   0x8001F9E4\n andi  A1, A1, 0xff\nL8010F2E4:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_8010F2FC:\naddiu SP, SP, -0x128\nsw    RA, 0x110(SP)\nsw    S7, 0x10c(SP)\nsw    S6, 0x108(SP)\nsw    S5, 0x104(SP)\nsw    S4, 0x100(SP)\nsw    S3, 0xfc(SP)\nsw    S2, 0xf8(SP)\nsw    S1, 0xf4(SP)\nsw    S0, 0xf0(SP)\nsdc1  F22, 0x120(SP)\nsdc1  F20, 0x118(SP)\nlui   S7, hi(CORE_800CD058)\naddiu S7, S7, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\njal   func_8010FE54\n move  S3, V0\nli    A0, 36\njal   0x800D90C8\n move  A1, R0\nmove  S1, V0\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\nlw    A1, 0x24(S3)\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x10(S1)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nlwc1  F0, 0x10(S1)\nsub.s F0, F0, F22\nL8010F3A8:\njal   SleepVProcess\n swc1  F0, 0x10(S1)\nlwc1  F0, 0x10(S1)\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1tl L8010F3A8\n sub.s F0, F0, F22\njal   PlaySound\n li    A0, 295\njal   0x8004A7C4\n li    A0, 180\nli    A0, -1\nli    A1, 4\njal   0x800FFA4C\n li    A2, 5\nmove  S5, V0\nli    S2, 180\nmove  S0, R0\nlui   S6, hi(D_8011F940)\naddiu S6, S6, lo(D_8011F940)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F22\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F20\naddiu S4, SP, 0x28\nL8010F410:\naddiu A3, SP, 0x28\nlui   A2, hi(D_8011F8E0)\naddiu A2, A2, lo(D_8011F8E0)\nL8010F41C:\nlw    V0, 0(A2)\nlw    V1, 4(A2)\nlw    A0, 8(A2)\nlw    A1, 0xc(A2)\nsw    V0, 0(A3)\nsw    V1, 4(A3)\nsw    A0, 8(A3)\nsw    A1, 0xc(A3)\naddiu A2, A2, 0x10\nbne   A2, S6, L8010F41C\n addiu A3, A3, 0x10\nmtc1  S2, F12\n      NOP\njal   0x8008EF20\n cvt.s.w F12, F12\nadd.s F0, F0, F0\nadd.s F0, F0, F22\nandi  V0, S0, 1\nbeqz  V0, L8010F4D8\n swc1  F0, 0x10(S1)\nlw    A1, 0xc(S1)\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x80089A10\n addiu A0, SP, 0x18\nlwc1  F0, 0x18(SP)\nsub.s F0, F0, F20\nswc1  F0, 0x18(SP)\nlwc1  F0, 0x1c(SP)\nadd.s F0, F0, F20\nswc1  F0, 0x1c(SP)\nsrl   V1, S0, 0x1f\naddu  V1, S0, V1\nsra   V1, V1, 1\nandi  V1, V1, 7\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 2\naddu  V0, S4, V0\nsw    V0, 0x10(SP)\nsw    R0, 0x14(SP)\naddiu A0, SP, 0x18\nlui A1, 0x3dcc\nori A1, A1, 0xcccd\nlui   A2, 0x4000\njal   func_8010F088\n li    A3, 1\nL8010F4D8:\njal   SleepVProcess\n addiu S2, S2, 0x14\nslti  V0, S2, 0x438\nbnez  V0, L8010F410\n addiu S0, S0, 1\njal   0x800FFAEC\n move  A0, S5\nli    A0, 255\nli    A1, 255\njal   0x800620C8\n li    A2, 255\nlb    V0, 5(S7)\naddu  V0, S7, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(star_space_indices)\naddu  A0, A0, V0\nlh    A0, lo(star_space_indices)(A0)\naddiu A1, SP, 0x88\njal   0x800EB24C\n addiu A2, SP, 0x89\nlbu   V0, 0x88(SP)\nsb    V0, 0xf(S3)\nlbu   V0, 0x89(SP)\nsb    V0, 0x10(S3)\nlbu   V0, 0x88(SP)\nsb    V0, 0x11(S3)\nlbu   V0, 0x89(SP)\naddiu V0, V0, 1\nsb    V0, 0x12(S3)\nlbu   V0, 0x88(SP)\nsb    V0, 0x15(S3)\nlbu   V0, 0x89(SP)\naddiu V0, V0, -1\nsb    V0, 0x16(S3)\nlbu   V0, 0x17(S3)\nandi  V0, V0, 0xfe\njal   0x800FC9E0\n sb    V0, 0x17(S3)\njal   PlaySound\n li    A0, 296\njal   0x8004A0E0\n       NOP\nlui   S4, hi(D_8011F940)\naddiu S4, S4, lo(D_8011F940)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F22\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F20\naddiu S3, SP, 0x90\naddiu A3, SP, 0x90\nL8010F5A4:\nlui   A2, hi(D_8011F8E0)\naddiu A2, A2, lo(D_8011F8E0)\nL8010F5AC:\nlw    V0, 0(A2)\nlw    V1, 4(A2)\nlw    A0, 8(A2)\nlw    A1, 0xc(A2)\nsw    V0, 0(A3)\nsw    V1, 4(A3)\nsw    A0, 8(A3)\nsw    A1, 0xc(A3)\naddiu A2, A2, 0x10\nbne   A2, S4, L8010F5AC\n addiu A3, A3, 0x10\nmtc1  S2, F12\n      NOP\njal   0x8008EF20\n cvt.s.w F12, F12\nadd.s F0, F0, F0\nadd.s F0, F0, F22\nandi  V0, S0, 1\nbeqz  V0, L8010F668\n swc1  F0, 0x10(S1)\nlw    A1, 0xc(S1)\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x80089A10\n addiu A0, SP, 0x18\nlwc1  F0, 0x18(SP)\nsub.s F0, F0, F20\nswc1  F0, 0x18(SP)\nlwc1  F0, 0x1c(SP)\nadd.s F0, F0, F20\nswc1  F0, 0x1c(SP)\nsrl   V1, S0, 0x1f\naddu  V1, S0, V1\nsra   V1, V1, 1\nandi  V1, V1, 7\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 2\naddu  V0, S3, V0\nsw    V0, 0x10(SP)\nsw    R0, 0x14(SP)\naddiu A0, SP, 0x18\nlui   A1, 0x3dcc\nori   A1, A1, 0xcccd\nlui   A2, 0x4000\njal   func_8010F088\n li    A3, 1\nL8010F668:\njal   SleepVProcess\n addiu S0, S0, 1\naddiu S2, S2, 0x14\nli    V0, 1280\nbnel  S2, V0, L8010F5A4\n addiu A3, SP, 0x90\njal   0x80003A70\n move  A0, R0\nj     L8010F5A4\n addiu A3, SP, 0x90\nlw    RA, 0x110(SP)\nlw    S7, 0x10c(SP)\nlw    S6, 0x108(SP)\nlw    S5, 0x104(SP)\nlw    S4, 0x100(SP)\nlw    S3, 0xfc(SP)\nlw    S2, 0xf8(SP)\nlw    S1, 0xf4(SP)\nlw    S0, 0xf0(SP)\nldc1  F22, 0x120(SP)\nldc1  F20, 0x118(SP)\njr    RA\n addiu SP, SP, 0x128\n\nfunc_8010F6C4:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nli    V0, 1\nlui   AT, hi(CORE_800A12D0)\nsb    V0, lo(CORE_800A12D0)(AT)\nlui   V0, hi(CORE_800CD05D)\nlb    V0, lo(CORE_800CD05D)(V0)\nlui   AT, hi(CORE_800CD05E)\naddu  AT, AT, V0\nlb    V0, lo(CORE_800CD05E)(AT)\nsll   V0, V0, 1\nlui   A0, hi(star_space_indices)\naddu  A0, A0, V0\nlh    A0, lo(star_space_indices)(A0)\njal   0x800EBAC8\n li    A1, 1\nlui   AT, hi(CORE_800A12D0)\njal   0x800FF834\n sb    R0, lo(CORE_800A12D0)(AT)\nsll   V0, V0, 0x10\nbltz  V0, L8010F724\n       NOP\njal   SleepProcess\n li    A0, -1\nL8010F724:\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_8010F730:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nlui   S2, hi(current_player_index)\nlb    S2, lo(current_player_index)(S2)\njal   GetPlayerStruct\n li    A0, -1\njal   func_8010FE54\n move  S1, V0\njal   0x800DCA64\n move  A0, S2\nli    A0, -1\njal   0x800FF900\n li    A1, 3\njal   0x80035FDC\n li    A0, 17\njal   0x800DC128\n move  A0, S2\njal   0x800EF0D8\n li    A0, 1\njal   0x8004A0E0\n move  S0, V0\njal   0x800FC8A4\n sll   S0, S0, 0x10\njal   SleepProcess\n li    A0, 5\njal   SleepProcess\n li    A0, 25\nmove  A0, S2\nli    A1, 2\njal   0x800F2304\n move  A2, R0\nsll   V0, S2, 3\nsubu  V0, V0, S2\nsll   V0, V0, 3\nlui   A0, hi(CORE_800D112C)\naddu  A0, A0, V0\nlw    A0, lo(CORE_800D112C)(A0)\nlui   A1, 0x4000\nlui   A2, 0xbe99\njal   0x800EE688\n ori A2, A2, 0x999a\njal   SleepProcess\n li    A0, 5\njal   0x800DCBCC\n move  A0, S2\nli    V0, 2\nsw    V0, 0x10(SP)\nmove  A0, S2\nli    A1, -1\nmove  A2, R0\njal   0x800F2388\n li    A3, 10\njal   SleepProcess\n li    A0, 20\njal   0x800E22B4\n       NOP\njal   0x800E2354\n sra   A0, S0, 0x10\njal   0x800E2904\n       NOP\njal   0x8003602C\n li    A0, 17\njal   0x800DC128\n move  A0, S2\nsll   V0, V0, 0x10\njal   0x8004AD50\n sra   A0, V0, 0x10\njal   0x800DC06C\n move  A0, S2\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nmove  A0, S2\njal   0x800DCD2C\n li    A1, -1\nlbu   A0, 0xf(S1)\nsll   A0, A0, 0x18\nsra   A0, A0, 0x18\nlbu   A1, 0x10(S1)\nsll   A1, A1, 0x18\nsra   A1, A1, 0x18\nandi  A0, A0, 0xffff\njal   GetAbsSpaceIndexFromChainSpaceIndex\n andi  A1, A1, 0xffff\nsll   S0, V0, 0x10\nsra   S0, S0, 0x10\njal   0x800EBCBC\n move  A0, S0\nmove  A0, S0\njal   0x800EBAC8\n li    A1, 1\njal   0x800FF834\n       NOP\nsll   V0, V0, 0x10\nbltz  V0, L8010F8D0\n       NOP\njal   SleepProcess\n li    A0, -1\nL8010F8D0:\njal   0x800DAA40\n move  A0, S2\nlw    RA, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x28\n\nfunc_8010F8F0:\naddiu SP, SP, -0x38\nsw    RA, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F22, 0x30(SP)\nsdc1  F20, 0x28(SP)\njal   0x8004EE68\n li    S1, 1\nlw    S0, 0x8c(V0)\nlh    V0, 4(S0)\nlh    V1, 0(S0)\nsubu  V0, V0, V1\nmtc1  V0, F22\n      NOP\ncvt.s.w F22, F22\nlh    V0, 8(S0)\nmtc1  V0, F0\n      NOP\ncvt.s.w F0, F0\ndiv.s F22, F22, F0\nlh    V0, 6(S0)\nlh    V1, 2(S0)\nsubu  V0, V0, V1\nmtc1  V0, F20\n      NOP\ncvt.s.w F20, F20\njal   0x800E4A7C\n div.s F20, F20, F0\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\naddiu A2, SP, 0x10\njal   0x800F6848\n addiu A3, SP, 0x14\nlh    V0, 8(S0)\nblez  V0, L8010FA78\n       NOP\nL8010F984:\nlh    A0, 0xa(S0)\nli    V0, -1\nbeq   A0, V0, L8010F9FC\n move  A1, R0\nlh    V0, 0(S0)\nmtc1  V0, F2\n      NOP\ncvt.s.w F2, F2\nmtc1  S1, F4\n      NOP\ncvt.s.w F4, F4\nmul.s F0, F22, F4\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A2, F0\n      NOP\nsll   A2, A2, 0x10\nlh    V0, 2(S0)\nmtc1  V0, F0\n      NOP\ncvt.s.w F0, F0\nmul.s F4, F20, F4\nadd.s F0, F0, F4\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nL8010F9FC:\njal   0x800E4A7C\n       NOP\nmtc1  S1, F4\n      NOP\ncvt.s.w F4, F4\nmul.s F0, F22, F4\nlwc1  F2, 0x10(SP)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nmul.s F4, F20, F4\nlwc1  F0, 0x14(SP)\nadd.s F4, F4, F0\ntrunc.w.s F0, F4\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\nsra   A2, A2, 0x10\njal   0x800F688C\n sra   A3, A3, 0x10\njal   SleepVProcess\n addiu S1, S1, 1\nlh    V0, 8(S0)\nslt   V0, V0, S1\nbeqz  V0, L8010F984\n       NOP\nL8010FA78:\nlh    A0, 0xa(S0)\nli    V0, -1\nbeq   A0, V0, L8010FA98\n       NOP\nlh    A2, 4(S0)\nlh    A3, 6(S0)\njal   0x80054904\n move  A1, R0\nL8010FA98:\njal   0x800E4A7C\n       NOP\nlh    V1, 4(S0)\nmtc1  V1, F0\n      NOP\ncvt.s.w F0, F0\nlwc1  F2, 0x10(SP)\nadd.s F0, F0, F2\nlh    V1, 0(S0)\nmtc1  V1, F2\n      NOP\ncvt.s.w F2, F2\nsub.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlh    V1, 6(S0)\nmtc1  V1, F0\n      NOP\ncvt.s.w F0, F0\nlwc1  F2, 0x14(SP)\nadd.s F0, F0, F2\nlh    V1, 2(S0)\nmtc1  V1, F2\n      NOP\ncvt.s.w F2, F2\nsub.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\nsra   A2, A2, 0x10\njal   0x800F688C\n sra   A3, A3, 0x10\njal   EndProcess\n move  A0, R0\nlw    RA, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F22, 0x30(SP)\nldc1  F20, 0x28(SP)\njr    RA\n addiu SP, SP, 0x38\n\nfunc_8010FB54:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S7, 0x2c(SP)\nsw    S6, 0x28(SP)\nsw    S5, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S7, A0\nlw    S0, 0x4c(SP)\nmove  S1, A1\nmove  S2, A2\nmove  S3, A3\nlhu   S4, 0x4a(SP)\nmove  S6, S0\nlui   A0, hi(func_8010F8F0)\naddiu A0, A0, lo(func_8010F8F0)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n li    A3, 64\nmove  S5, V0\nlw    A0, 0x18(S5)\njal   0x800360F0\n li    A1, 16\nmove  V1, V0\nsw    V1, 0x8c(S5)\nsh    S1, 0(V1)\nsh    S2, 2(V1)\nsh    S3, 4(V1)\nsll   S0, S0, 0x10\nsra   S0, S0, 0x10\nli    V0, -1\nbne   S0, V0, L8010FBEC\n sh    S4, 6(V1)\nli    S6, 25\nL8010FBEC:\nsh    S6, 8(V1)\nsh    S7, 0xa(V1)\nmove  V0, S5\nlw    RA, 0x30(SP)\nlw    S7, 0x2c(SP)\nlw    S6, 0x28(SP)\nlw    S5, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_8010FC24:\naddiu SP, SP, -0x30\nsw    RA, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\naddiu A2, SP, 0x18\njal   0x800F6748\n addiu A3, SP, 0x1c\njal   0x8004EE68\n li    S2, 255\nmove  S0, V0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x1c(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E354)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E354)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E358)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E358)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 1\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nL8010FD7C:\njal   0x800E4A7C\n       NOP\nsll   A2, S0, 1\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsubu  A2, S2, A2\nsll   A2, A2, 0x10\nlb    A0, 0xf(S1)\nmove  A1, V0\njal   0x800F68E0\n sra   A2, A2, 0x10\njal   0x800E4A7C\n addiu S0, S0, 1\nlb    A0, 0xf(S1)\nmove  A1, V0\nlui   A3, 0x4000\njal   0x800F6780\n move  A2, R0\njal   SleepVProcess\n       NOP\nslti  V0, S0, 0xa\nbnez  V0, L8010FD7C\n       NOP\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S1)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\nlb    A1, 0xf(S1)\njal   0x8004ACE0\n li    A0, 628\njal   SleepProcess\n li    A0, 50\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nlw    RA, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x30\n\nfunc_8010FE54:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\naddiu A2, SP, 0x18\njal   0x800F6748\n addiu A3, SP, 0x1c\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x1c(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E374)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E374)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E378)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E378)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\njal   SleepProcess\n li    A0, 20\nli    S1, 1\nli    S2, 255\nL8010FF6C:\njal   0x800E4A7C\n sll   S0, S1, 1\naddu  S0, S0, S1\nsll   S0, S0, 3\naddu  S0, S0, S1\nsubu  S0, S2, S0\nsll   A2, S0, 0x10\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n sra   A2, A2, 0x10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n addiu S1, S1, 1\nslti  V0, S1, 0xa\nbnez  V0, L8010FF6C\n       NOP\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   SleepProcess\n li    A0, 2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nlw    RA, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nfunc_80110024:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\njal   0x800E4A7C\n li    S1, 255\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\naddiu A2, SP, 0x18\njal   0x800F6848\n addiu A3, SP, 0x1c\njal   0x800E4A7C\n       NOP\nli    A0, -1\nmove  A1, V0\naddiu A2, SP, 0x20\njal   0x800F6E4C\n addiu A3, SP, 0x24\njal   0x8004EE68\n       NOP\nmove  S0, V0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x1c(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlh    A3, 0x22(SP)\nlh    V0, 0x26(SP)\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\njal   func_8010FB54\n sra   A2, A2, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 1\nsll   A2, S0, 1\nL80110120:\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsubu  A2, S1, A2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0xa\nbnez  V0, L80110120\n sll   A2, S0, 1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nlw    RA, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_80110194:\naddiu SP, SP, -0x40\nsw    RA, 0x34(SP)\nsw    S4, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F20, 0x38(SP)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\naddiu A2, SP, 0x18\njal   0x800F6748\n addiu A3, SP, 0x1c\njal   0x8004EE68\n li    S1, 1\nmove  S0, V0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x1c(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E354)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E354)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E358)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E358)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 255\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nsll   A2, S1, 1\nL801102FC:\naddu  A2, A2, S1\nsll   A2, A2, 3\naddu  A2, A2, S1\nsubu  A2, S0, A2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S1, S1, 1\nslti  V0, S1, 0xa\nbnez  V0, L801102FC\n sll   A2, S1, 1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   S0, hi(p1_item1)\naddiu S0, S0, lo(p1_item1)\naddu  V1, V1, S0\naddu  V1, V1, V0\nlb    V1, 0(V1)\nli    V0, 11\nbeq   V1, V0, L801103B0\n       NOP\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\naddu  V1, V1, S0\naddu  V1, V1, V0\nlb    V1, 0(V1)\nli    V0, 8\nbne   V1, V0, L801103BC\n move  S1, R0\nL801103B0:\njal   PlaySound\n li    A0, 321\nmove  S1, R0\nL801103BC:\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nL801103C4:\njal   0x800E4A7C\n       NOP\nmtc1  S1, F12\n      NOP\ncvt.s.w F12, F12\njal   0x8008EF20\n move  S0, V0\nlb    A0, 0xf(S3)\nmul.s F0, F0, F20\nmfc1  A2, F0\n      NOP\njal   0x800F6928\n move  A1, S0\njal   SleepVProcess\n addiu S1, S1, 0x1e\nslti  V0, S1, 0x439\nbnez  V0, L801103C4\n li    S2, 1\nli    S4, 255\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nL80110418:\njal   0x800E4A7C\n       NOP\nsll   A2, S2, 1\naddu  A2, A2, S2\nsll   A2, A2, 3\naddu  A2, A2, S2\nsubu  A2, S4, A2\nsll   A2, A2, 0x10\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n sra   A2, A2, 0x10\njal   0x800E4A7C\n addiu S2, S2, 1\nmtc1  S1, F12\n      NOP\ncvt.s.w F12, F12\njal   0x8008EF20\n move  S0, V0\nlb    A0, 0xf(S3)\nmul.s F0, F0, F20\nmfc1  A2, F0\n      NOP\njal   0x800F6928\n move  A1, S0\njal   SleepVProcess\n addiu S1, S1, 0x1e\nslti  V0, S2, 0xa\nbnez  V0, L80110418\n       NOP\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nlw    RA, 0x34(SP)\nlw    S4, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x40\n\nD_801104E0:\naddiu SP, SP, -0x30\nsw    RA, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\naddiu A2, SP, 0x18\njal   0x800F6748\n addiu A3, SP, 0x1c\njal   0x8004EE68\n li    S1, 255\nmove  S0, V0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x1c(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E354)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E354)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E358)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E358)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 1\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nsll   A2, S0, 1\nL80110630:\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsubu  A2, S1, A2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0xa\nbnez  V0, L80110630\n sll   A2, S0, 1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nlw    RA, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x30\n\nfunc_801106A4:\naddiu SP, SP, -0x58\nsw    RA, 0x34(SP)\nsw    S6, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F26, 0x50(SP)\nsdc1  F24, 0x48(SP)\nsdc1  F22, 0x40(SP)\nsdc1  F20, 0x38(SP)\nmove  S2, A0\nmove  S3, A1\nmove  S1, A2\nlw    S6, 0x68(SP)\nli    V0, 2\nbne   S6, V0, L801106FC\n move  S4, A3\njal   PlaySound\n li    A0, 325\nL801106FC:\nmove  A0, S2\nmove  A1, S3\naddiu A2, SP, 0x10\njal   0x800F6848\n addiu A3, SP, 0x14\nlwc1  F2, 0(S4)\nlwc1  F0, 0x10(SP)\nsub.s F22, F2, F0\nmtc1  S1, F4\n      NOP\ncvt.s.w F4, F4\ndiv.s F22, F22, F4\nlwc1  F2, 4(S4)\nlwc1  F0, 0x14(SP)\nsub.s F20, F2, F0\ndiv.s F20, F20, F4\nbeqz  S1, L80110830\n li    S0, 2\nxori  V0, S6, 1\nsltiu S5, V0, 1\nli    AT, 0x3D8F0000 ; 0.069824\nori AT, AT, 0x5c29\nmtc1  AT, F26\nli    AT, 0x3E990000 ; 0.298828\nori AT, AT, 0x999a\nmtc1  AT, F24\nL80110764:\nlwc1  F2, 0x10(SP)\nadd.s F2, F22, F2\nswc1  F2, 0x10(SP)\nlwc1  F0, 0x14(SP)\nadd.s F0, F20, F0\nswc1  F0, 0x14(SP)\ntrunc.w.s F4, F2\nmfc1  A2, F4\n      NOP\nsll   A2, A2, 0x10\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S2\nmove  A1, S3\nsra   A2, A2, 0x10\njal   0x800F688C\n sra   A3, A3, 0x10\nslti  V0, S0, 0xb\nand   V0, S5, V0\nbeqz  V0, L80110820\n sll   A2, S0, 1\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsll   A2, A2, 0x10\nmove  A0, S2\nmove  A1, S3\njal   0x800F68E0\n sra   A2, A2, 0x10\nmtc1  S0, F4\n      NOP\ncvt.s.w F4, F4\nmul.s F4, F4, F26\ncvt.d.s F2, F4\nlui   AT, hi(D_8011F940)\nldc1  F0, lo(D_8011F940)(AT)\nadd.d F2, F2, F0\nmove  A0, S2\nadd.s F4, F4, F24\nmfc1  A2, F4\ncvt.s.d F2, F2\nmfc1  A3, F2\n      NOP\njal   0x800F696C\n move  A1, S3\nL80110820:\njal   SleepVProcess\n addiu S1, S1, -1\nbnez  S1, L80110764\n addiu S0, S0, 1\nL80110830:\nlwc1  F0, 0(S4)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlwc1  F0, 4(S4)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S2\nmove  A1, S3\nsra   A2, A2, 0x10\njal   0x800F688C\n sra   A3, A3, 0x10\nbnez  S6, L80110904\n li    S0, 1\nli    S1, 255\nli    AT, 0x3DCC0000 ; 0.099609\nori   AT, AT, 0xcccd\nmtc1  AT, F22\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nsll   A2, S0, 1\nL80110890:\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsubu  A2, S1, A2\nsll   A2, A2, 0x10\nmove  A0, S2\nmove  A1, S3\njal   0x800F68E0\n sra   A2, A2, 0x10\nmtc1  S0, F0\n      NOP\ncvt.s.w F0, F0\nmul.s F0, F0, F22\nsub.s F0, F20, F0\nmove  A0, S2\nmfc1  A2, F0\nmfc1  A3, F0\n      NOP\njal   0x800F696C\n move  A1, S3\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0xa\nbnez  V0, L80110890\n sll   A2, S0, 1\nmove  A0, S2\nmove  A1, S3\njal   0x800F68E0\n move  A2, R0\nL80110904:\nlw    RA, 0x34(SP)\nlw    S6, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F26, 0x50(SP)\nldc1  F24, 0x48(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x58\n\nD_8011093C:\naddiu SP, SP, -0x48\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F28, 0x40(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\nsdc1  F20, 0x20(SP)\njal   GetPlayerStruct\n li    A0, -1\njal   0x800E6264\n move  S1, V0\nlui   A0, hi(CORE_801011FC)\njal   0x800D9B24\n lw    A0, lo(CORE_801011FC)(A0)\nlui   V1, hi(CORE_801011FC)\nlw    V1, lo(CORE_801011FC)(V1)\nlw    V0, 0x3c(V1)\nsw    R0, 0x30(V0)\nlw    V0, 0x3c(V1)\nsw    R0, 0x34(V0)\nlw    V0, 0x3c(V1)\nsw    R0, 0x38(V0)\nli    A0, -1\njal   0x800FF900\n li    A1, 3\njal   PlaySound\n li    A0, 323\nli    A0, 34\njal   0x800D90C8\n move  A1, R0\nmove  S0, V0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 384\njal   0x8001C258\n move  A2, R0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001C8E4\n li    A1, 6144\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001C448\n lh    A0, 0(V0)\nlw    A1, 0x24(S1)\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nmtc1  R0, F22\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F948)\nldc1  F24, lo(D_8011F948)(AT)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F26\nL80110A30:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nadd.d F0, F0, F24\ncvt.s.d F20, F0\nc.lt.s F20, F26\n      NOP\nbc1t  L80110A30\n       NOP\njal   0x800D9B24\n lw    A0, 0x24(S1)\nlui   A0, hi(CORE_801011FC)\njal   0x800D9AA4\n lw    A0, lo(CORE_801011FC)(A0)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nc.le.s F0, F20\n      NOP\nbc1f  L80110B58\n       NOP\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F950)\nldc1  F24, lo(D_8011F950)(AT)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F26\nL80110AE8:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nsub.d F0, F0, F24\ncvt.s.d F20, F0\nc.le.s F26, F20\n      NOP\nbc1t  L80110AE8\n       NOP\nL80110B58:\njal   0x800D9B54\n move  A0, S0\njal   SleepProcess\n li    A0, 20\nlui   A1, hi(current_player_index)\nlb    A1, lo(current_player_index)(A1)\njal   0x8004ACE0\n li    A0, 628\nli    A0, 5\njal   0x800E6420\n li    A1, 2\njal   SleepProcess\n li    A0, 40\nli    A0, -1\njal   0x800E6420\n li    A1, 2\njal   0x800EC414\n li    A0, 14868\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F28, 0x40(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x48\n\nD_80110BC8:\naddiu SP, SP, -0x58\nsw    RA, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F28, 0x50(SP)\nsdc1  F26, 0x48(SP)\nsdc1  F24, 0x40(SP)\nsdc1  F22, 0x38(SP)\nsdc1  F20, 0x30(SP)\njal   GetPlayerStruct\n li    A0, -1\nmove  S1, V0\nli    A0, -1\njal   0x800E6420\n li    A1, 2\njal   0x800ECC0C\n addiu A0, SP, 0x10\nlw    A2, 0x24(S1)\naddiu A2, A2, 0x18\nmove  A0, A2\naddiu A1, SP, 0x10\njal   0x800ED128\n li    A3, 8\njal   SleepProcess\n li    A0, 8\njal   PlaySound\n li    A0, 323\nli    A0, 34\njal   0x800D90C8\n move  A1, R0\nmove  S0, V0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 384\njal   0x8001C258\n move  A2, R0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001C8E4\n li    A1, 6144\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001C448\n lh    A0, 0(V0)\nlw    A1, 0x24(S1)\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nmtc1  R0, F22\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F958)\nldc1  F24, lo(D_8011F958)(AT)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F26\nL80110CB4:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nadd.d F0, F0, F24\ncvt.s.d F20, F0\nc.lt.s F20, F26\n      NOP\nbc1t  L80110CB4\n       NOP\njal   0x800D9AA4\n lw    A0, 0x24(S1)\njal   0x800E639C\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nc.le.s F0, F20\n      NOP\nbc1f  L80110DD8\n       NOP\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F960)\nldc1  F24, lo(D_8011F960)(AT)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F26\nL80110D68:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nsub.d F0, F0, F24\ncvt.s.d F20, F0\nc.le.s F26, F20\n      NOP\nbc1t  L80110D68\n       NOP\nL80110DD8:\njal   0x800D9B54\n move  A0, S0\nlw    RA, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F28, 0x50(SP)\nldc1  F26, 0x48(SP)\nldc1  F24, 0x40(SP)\nldc1  F22, 0x38(SP)\nldc1  F20, 0x30(SP)\njr    RA\n addiu SP, SP, 0x58\n\nD_80110E08:\naddiu SP, SP, -0x48\nsw    RA, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F22, 0x40(SP)\njal   0x8004EE68\n sdc1  F20, 0x38(SP)\nlw    S1, 0x8c(V0)\nli    A0, -1\nli    A1, 1\njal   0x800FFA4C\n li    A2, 5\nmove  S3, V0\nli    A0, 1\njal   0x8005279C\n move  A1, R0\nsll   V0, V0, 0x10\nsra   S2, V0, 0x10\nmove  S0, S2\nmove  A0, S0\nmove  A1, R0\nlui   A2, hi(D_8011FB5E)\nlh    A2, lo(D_8011FB5E)(A2)\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 18304\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\njal   0x800E4A7C\n sll   S1, S1, 2\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\naddiu A2, SP, 0x18\njal   0x800F6848\n addiu A3, SP, 0x1c\nlwc1  F2, 0x18(SP)\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F4\n      NOP\nadd.s F2, F2, F4\nswc1  F2, 0x18(SP)\nlwc1  F0, 0x1c(SP)\nsub.s F0, F0, F4\nswc1  F0, 0x1c(SP)\ntrunc.w.s F4, F2\nmfc1  A2, F4\n      NOP\nsll   A2, A2, 0x10\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nsw    R0, 0x10(SP)\nmove  A0, S0\nmove  A1, R0\nli    A2, 255\njal   0x80055420\n li    A3, 255\nli    S0, 255\nlui   AT, hi(D_8011E440)\naddu  AT, AT, S1\nlwc1  F20, lo(D_8011E440)(AT)\ncvt.s.w F20, F20\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F22\nmove  S1, S2\nL80110F44:\njal   0x8008E3F0\n mov.s F12, F20\nmul.s F0, F0, F22\nlwc1  F2, 0x18(SP)\nadd.s F0, F0, F2\nswc1  F0, 0x18(SP)\njal   0x8008EF20\n mov.s F12, F20\nmul.s F0, F0, F22\nlwc1  F2, 0x1c(SP)\nsub.s F2, F2, F0\nswc1  F2, 0x1c(SP)\nlwc1  F0, 0x18(SP)\ntrunc.w.s F4, F0\nmfc1  A2, F4\n      NOP\nsll   A2, A2, 0x10\ntrunc.w.s F0, F2\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S1\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nmove  A0, S1\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n addiu S0, S0, -0x14\nbgez  S0, L80110F44\n move  A0, S2\nmove  S0, S2\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   0x800FFAEC\n move  A0, S3\njal   0x800525C8\n move  A0, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x48\n\nD_80111018:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x1b8\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nlui   AT, hi(D_8011FB5C)\nsw    V0, lo(D_8011FB5C)(AT)\njal   FreeMainFS\n move  A0, S0\njal   D_801104E0\n       NOP\nsw    R0, 0x10(SP)\nfunc_80111074:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x3A01 ; "Which shop will you call?"\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nlui   A0, hi(D_8011E3D4)\naddiu A0, A0, lo(D_8011E3D4)\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S2, V0\njal   0x800EC6EC\n       NOP\nslti  V0, S2, 2\nbeqz  V0, L801110D0\n       NOP\nbltz  S2, L801110D0\n addiu V0, S2, 1\nlui   AT, hi(CORE_800CD0AC)\nj     L80111128\n sh    V0, lo(CORE_800CD0AC)(AT)\nL801110D0:\nlui   A0, hi(func_8010A474)\naddiu A0, A0, lo(func_8010A474)\nmove  A1, R0\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\nmove  A0, S0\njal   0x80047B80\n li    A1, 128\njal   func_80106FE8\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\njal   EndProcess\n move  A0, S0\njal   0x800FC8A4\n       NOP\nj     func_80111074\n sw    R0, 0x10(SP)\nL80111128:\njal   SleepProcess\n li    A0, 30\njal   PlaySound\n li    A0, 327\nmove  S1, R0\nL8011113C:\nlui   A0, hi(D_80110E08)\naddiu A0, A0, lo(D_80110E08)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\njal   0x8004EE68\n sw    S1, 0x8c(S0)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S0\njal   SleepProcess\n li    A0, 3\naddiu S1, S1, 1\nslti  V0, S1, 5\nbnez  V0, L8011113C\n       NOP\njal   0x8004EE18\n move  S1, R0\njal   SleepProcess\n li    A0, 20\nL80111194:\nlui   A0, hi(D_80110E08)\naddiu A0, A0, lo(D_80110E08)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\njal   0x8004EE68\n sw    S1, 0x8c(S0)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S0\njal   SleepProcess\n li    A0, 3\naddiu S1, S1, 1\nslti  V0, S1, 5\nbnez  V0, L80111194\n       NOP\njal   0x8004EE18\n       NOP\njal   SleepProcess\n li    A0, 20\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S3)\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nlui   A0, hi(D_8011FB5E)\njal   FreeGraphics\n lh    A0, lo(D_8011FB5E)(A0)\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nbnez  S2, L801112A4\n li    A0, 672\nlb    V0, 0xf(S3)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, V1\nlh    V0, lo(p1_coins)(V0)\nslti  V0, V0, 5\nbnez  V0, L801112A4\n li    A0, 666\nlb    V1, 3(S3)\nlb    V0, 2(S3)\nbne   V1, V0, L801112A4\n li    A0, 664\nli    A0, 666\nL801112A4:\njal   PlaySound\n       NOP\njal   item_shop_event\n       NOP\nlui   AT, hi(CORE_800CD0AC)\nsh    R0, lo(CORE_800CD0AC)(AT)\nlw    RA, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\n; Item that calls bowser\nD_801112D8:\naddiu SP, SP, -0x30\nsw    RA, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nlui   S2, hi(CORE_800CD058)\naddiu S2, S2, lo(CORE_800CD058)\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x1b8\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nlui   AT, hi(D_8011FB5C)\nsw    V0, lo(D_8011FB5C)(AT)\njal   FreeMainFS\n move  A0, S0\njal   D_801104E0\n move  S1, R0\njal   SleepProcess\n li    A0, 30\njal   PlaySound\n li    A0, 327\nL8011133C:\nlui   A0, hi(D_80110E08)\naddiu A0, A0, lo(D_80110E08)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\njal   0x8004EE68\n sw    S1, 0x8c(S0)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S0\njal   SleepProcess\n li    A0, 3\naddiu S1, S1, 1\nslti  V0, S1, 5\nbnez  V0, L8011133C\n       NOP\njal   0x8004EE18\n move  S1, R0\njal   SleepProcess\n li    A0, 20\nL80111394:\nlui   A0, hi(D_80110E08)\naddiu A0, A0, lo(D_80110E08)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\njal   0x8004EE68\n sw    S1, 0x8c(S0)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S0\njal   SleepProcess\n li    A0, 3\naddiu S1, S1, 1\nslti  V0, S1, 5\nbnez  V0, L80111394\n       NOP\njal   0x8004EE18\n       NOP\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 671\nfunc_801113F4:\nlui   V1, hi(p1_char)\naddiu V1, V1, lo(p1_char)\nlbu   A2, 0(V1)\nlui   A0, hi(CORE_801014A0)\naddiu A0, A0, lo(CORE_801014A0)\nsll   A2, A2, 2\naddu  A2, A2, A0\nlbu   A3, 0x38(V1)\nsll   A3, A3, 2\naddu  A3, A3, A0\nlbu   V0, 0x70(V1)\nsll   V0, V0, 2\naddu  V0, V0, A0\nlw    V0, 0(V0)\nsw    V0, 0x10(SP)\nlbu   V0, 0xa8(V1)\nsll   V0, V0, 2\naddu  V0, V0, A0\nlw    V0, 0(V0)\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 4\nlw    A2, 0(A2)\nlw    A3, 0(A3)\njal   0x800EC8EC ; ShowMessage\n li    A1, 0x3A0A ; "Hello? Yeah, this is Bowser. Who are you???"\nlb    V1, 0xf(S2)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeqz  V0, L80111488\n li    A0, 1\nj     L80111490\n move  A1, R0\nL80111488:\nli    A0, 2\nlb    A1, 0xf(S2)\nL80111490:\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n       NOP\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nli    V0, 4\nbeq   S0, V0, L801114C4\n li    V0, 5\nbeq   S0, V0, L801114EC\n move  A1, R0\nj     L80111540\n sll   V0, S0, 3\n\nL801114C4:\njal   0x800EF0D8\n move  A0, R0\nmove  S0, V0\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 4\nli    A1, 14860\nj     func_80111578\n move  A2, R0\n\nL801114EC:\nlui   A0, hi(func_8010A474)\naddiu A0, A0, lo(func_8010A474)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S0, V0\nmove  A0, S0\njal   0x80047B80\n li    A1, 128\njal   func_80106FE8\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\njal   EndProcess\n move  A0, S0\njal   0x800FC8A4\n       NOP\nj     func_801113F4\n       NOP\nL80111540:\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_char)\naddu  AT, AT, V0\nlbu   V0, lo(p1_char)(AT)\nsll   V0, V0, 2\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 4\nli    A1, 14859\nlui   A2, hi(CORE_801014A0)\naddu  A2, A2, V0\nlw    A2, lo(CORE_801014A0)(A2)\nfunc_80111578:\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\njal   PlaySound\n li    A0, 668\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S2)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S2)\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S2)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nlui   A0, hi(D_8011FB5E)\njal   FreeGraphics\n lh    A0, lo(D_8011FB5E)(A0)\njal   0x800DEB2C\n lb    A0, 0xf(S2)\nli    V1, 3\nbne   V0, V1, L80111618\n       NOP\njal   0x80035FDC\n li    A0, 23\nj     L80111620\n       NOP\nL80111618:\njal   0x8003602C\n li    A0, 23\nL80111620:\nlui   AT, hi(CORE_800CD0B2)\njal   0x800FCA4C\n sh    S0, lo(CORE_800CD0B2)(AT)\nli    A0, 80\nmove  A1, R0\nli    A2, 3\njal   0x800FF794\n li    A3, 1\njal   0x800FC8A4\n       NOP\njal   0x800FF7F0\n li    A0, 2\njal   0x8004A0E0\n       NOP\njal   SleepProcess\n li    A0, -1\nlw    RA, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x30\n\n ; Jeanie?\nD_80111678:\naddiu SP, SP, -0x160\nsw    RA, 0x134(SP)\nsw    FP, 0x130(SP)\nsw    S7, 0x12c(SP)\nsw    S6, 0x128(SP)\nsw    S5, 0x124(SP)\nsw    S4, 0x120(SP)\nsw    S3, 0x11c(SP)\nsw    S2, 0x118(SP)\nsw    S1, 0x114(SP)\nsw    S0, 0x110(SP)\nsdc1  F28, 0x158(SP)\nsdc1  F26, 0x150(SP)\nsdc1  F24, 0x148(SP)\nsdc1  F22, 0x140(SP)\nsdc1  F20, 0x138(SP)\nlui   S7, hi(CORE_800CD058)\naddiu S7, S7, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S0, V0\nli    A0, 60\njal   0x800D90C8\n move  A1, R0\nmove  S3, V0\nmove  A0, S3\nli    A1, -1\njal   0x800D9CE8\n li    A2, 1\nlw    V0, 0x3c(S3)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\nlw    A1, 0x24(S0)\naddiu A0, S3, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S3)\nlhu   V0, 0xa(S3)\nori   V0, V0, 1\nsh    V0, 0xa(S3)\naddiu A0, S3, 0x24\nmove  A1, R0\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\njal   0x800D9B24\n move  A0, S3\njal   func_8010FE54\n       NOP\nli    A0, -1\njal   PlayerHasItem\n li    A1, ITEM_LUCKY_LAMP\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\nlui   A0, hi(current_player_index)\njal   FixUpPlayerItemSlots\n lb    A0, lo(current_player_index)(A0)\nli    A0, 61\njal   0x800D90C8\n move  A1, R0\nmove  S1, V0\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\njal   0x8001FA68\n lh    A0, 0(V0)\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n li    A1, 255\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\nlw    A1, 0x24(S0)\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x10(S1)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nlwc1  F0, 0x10(S1)\nsub.s F0, F0, F22\nL80111824:\njal   SleepVProcess\n swc1  F0, 0x10(S1)\nlwc1  F0, 0x10(S1)\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1tl L80111824\n sub.s F0, F0, F22\njal   PlaySound\n li    A0, 295\nlui   A0, hi(CORE_800CDBC8)\nlh    A0, lo(CORE_800CDBC8)(A0)\njal   0x800039A4\n li    A1, 180\nli    A0, -1\nli    A1, 3\njal   0x800FFA4C\n li    A2, 5\nsw    V0, 0x10c(SP)\nli    S4, 180\nmove  S0, R0\nlui   S6, hi(D_8011F940)\naddiu S6, S6, lo(D_8011F940)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F22\naddiu S2, SP, 0x28\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F20\naddiu S5, SP, 0x48\nL80111898:\naddiu A3, SP, 0x48\nlui   A2, hi(D_8011F8E0)\naddiu A2, A2, lo(D_8011F8E0)\nL801118A4:\nlw    V0, 0(A2)\nlw    V1, 4(A2)\nlw    A0, 8(A2)\nlw    A1, 0xc(A2)\nsw    V0, 0(A3)\nsw    V1, 4(A3)\nsw    A0, 8(A3)\nsw    A1, 0xc(A3)\naddiu A2, A2, 0x10\nbne   A2, S6, L801118A4\n addiu A3, A3, 0x10\nmtc1  S4, F12\n      NOP\njal   0x8008EF20\n cvt.s.w F12, F12\nadd.s F0, F0, F0\nadd.s F0, F0, F22\nandi  V0, S0, 1\nbeqz  V0, L80111964\n swc1  F0, 0x10(S1)\nlw    A1, 0xc(S1)\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x80089A10\n move  A0, S2\nlwc1  F0, 0x28(SP)\nsub.s F0, F0, F20\nswc1  F0, 0x28(SP)\nlwc1  F0, 0x2c(SP)\nadd.s F0, F0, F20\nswc1  F0, 0x2c(SP)\nsrl   V1, S0, 0x1f\naddu  V1, S0, V1\nsra   V1, V1, 1\nandi  V1, V1, 7\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 2\naddu  V0, S5, V0\nsw    V0, 0x10(SP)\nli    V0, 1\nsw    V0, 0x14(SP)\nmove  A0, S2\nlui A1, 0x3dcc\nori A1, A1, 0xcccd\nlui   A2, 0x4000\njal   func_8010F088\n li    A3, 1\nL80111964:\njal   SleepVProcess\n addiu S4, S4, 0x14\nslti  V0, S4, 0x438\nbnez  V0, L80111898\n addiu S0, S0, 1\nli    S2, 255\nmtc1  R0, F20\nlui   FP, hi(D_8011F940)\naddiu FP, FP, lo(D_8011F940)\naddiu S5, SP, 0x28\nli    AT, 0x41700000 ; 15.000000\nmtc1  AT, F22\naddiu S6, SP, 0xa8\naddiu A3, SP, 0xa8\nfunc_8011199C:\nlui   A2, hi(D_8011F8E0)\naddiu A2, A2, lo(D_8011F8E0)\nL801119A4:\nlw    V0, 0(A2)\nlw    V1, 4(A2)\nlw    A0, 8(A2)\nlw    A1, 0xc(A2)\nsw    V0, 0(A3)\nsw    V1, 4(A3)\nsw    A0, 8(A3)\nsw    A1, 0xc(A3)\naddiu A2, A2, 0x10\nbne   A2, FP, L801119A4\n addiu A3, A3, 0x10\nmtc1  S4, F12\n      NOP\njal   0x8008EF20\n cvt.s.w F12, F12\nadd.s F0, F0, F0\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F2\n      NOP\nadd.s F0, F0, F2\nandi  V0, S0, 1\nbeqz  V0, L80111A70\n swc1  F0, 0x10(S1)\nlw    A1, 0xc(S1)\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x80089A10\n move  A0, S5\nlwc1  F0, 0x28(SP)\nsub.s F0, F0, F22\nswc1  F0, 0x28(SP)\nlwc1  F0, 0x2c(SP)\nadd.s F0, F0, F22\nswc1  F0, 0x2c(SP)\nsrl   V1, S0, 0x1f\naddu  V1, S0, V1\nsra   V1, V1, 1\nandi  V1, V1, 7\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 2\naddu  V0, S6, V0\nsw    V0, 0x10(SP)\nli    V0, 1\nsw    V0, 0x14(SP)\nmove  A0, S5\nlui A1, 0x3dcc\nori A1, A1, 0xcccd\nlui   A2, 0x4000\njal   func_8010F088\n li    A3, 1\nL80111A70:\nbgtz  S2, L80111AD4\n       NOP\njal   0x800D9B24\n move  A0, S1\njal   0x800D9A40\n move  A0, S3\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F0\n      NOP\nadd.s F20, F20, F0\nswc1  F20, 0x2c(S3)\nswc1  F20, 0x28(S3)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F0, F20\n      NOP\n      NOP\nbc1f  L80111AEC\n swc1  F20, 0x24(S3)\njal   0x8004A520\n li    A0, 61 ; Jeanie\'s Theme\nj     func_80111AFC\n       NOP\nL80111AD4:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001F9E4\n andi  A1, S2, 0xff\naddiu S2, S2, -0xc\nL80111AEC:\njal   SleepVProcess\n addiu S0, S0, 1\nj     func_8011199C\n addiu A3, SP, 0xa8\nfunc_80111AFC:\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x2c(S3)\nswc1  F0, 0x28(S3)\nswc1  F0, 0x24(S3)\nlui   A1, 0x4040\nlui   A2, 0x4000\njal   0x800EDB98\n move  A0, S3\nlw    A0, 0x10c(SP)\njal   0x800FFAEC\n move  S4, V0\njal   SleepProcess\n li    A0, 30\nli    A0, 60\njal   0x800EC590\n li    A1, 0x3A2F ; "What do you want? I\'m the Mushroom Jeanie who lives in the Lucky Lamp..."\njal   EndProcess\n move  A0, S4\nli    S0, 1\nlwc1  F0, 0x10(S3)\nlwc1  F2, 0x30(S3)\nsub.s F0, F0, F2\nswc1  F0, 0x10(S3)\nlui   A1, hi(CORE_800A0550)\nlw    A1, lo(CORE_800A0550)(A1)\naddiu A0, SP, 0x18\naddiu A1, A1, 0x10\njal   midpoint\n addiu A2, S3, 0xc\njal   0x800D88E8\n addiu A0, SP, 0x18\nlwc1  F0, 0x10(S3)\nlwc1  F2, 0x30(S3)\nadd.s F0, F0, F2\nswc1  F0, 0x10(S3)\nli    AT, 0x44E10000 ; 1800.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S3)\nc.lt.s F0, F2\n      NOP\nbc1f  L80111C78\n       NOP\nli    AT, 0x42200000 ; 40.000000\nori AT, AT, 0xcccd\nmtc1  AT, F20\nli    AT, 0x42200000 ; 40.000000\nmtc1  AT, F26\nli    AT, 0x43960000 ; 300.000000\nmtc1  AT, F24\nli    AT, 0x44E10000 ; 1800.000000\nmtc1  AT, F22\nL80111BD0:\nlwc1  F0, 0x18(SP)\nmul.s F0, F0, F20\nlwc1  F2, 0xc(S3)\nadd.s F0, F0, F2\nswc1  F0, 0xc(S3)\nlwc1  F0, 0x1c(SP)\nmul.s F0, F0, F26\nlwc1  F2, 0x30(S3)\nadd.s F0, F0, F2\nswc1  F0, 0x30(S3)\nlwc1  F0, 0x20(SP)\nmul.s F0, F0, F20\nlwc1  F2, 0x14(S3)\nadd.s F0, F0, F2\nswc1  F0, 0x14(S3)\nlwc1  F0, 0x30(S3)\nc.lt.s F24, F0\n      NOP\n      NOP\nbc1t  L80111C28\n li    V1, 1\nmove  V1, R0\nL80111C28:\nsltu  V0, R0, S0\nand   V0, V1, V0\nbeqz  V0, L80111C5C\n li    A0, 255\nmove  S0, R0\nli    A1, 255\njal   0x800620C8\n li    A2, 255\nli    A0, 11\njal   InitFadeOut\n li    A1, 50\njal   PlaySound\n li    A0, 296\nL80111C5C:\njal   SleepVProcess\n       NOP\nlwc1  F0, 0x30(S3)\nc.lt.s F0, F22\n      NOP\nbc1t  L80111BD0\n       NOP\nL80111C78:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L80111C98\n       NOP\njal   SleepVProcess\n       NOP\nj     L80111C78\n       NOP\nL80111C98:\nlb    V0, 5(S7)\naddu  V0, S7, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(star_space_indices)\naddu  A0, A0, V0\njal   GetSpaceData\n lh    A0, lo(star_space_indices)(A0)\nmove  S1, V0\nlb    V0, 5(S7)\naddu  V0, S7, V0\nlb    V0, 6(V0)\nsll   V0, V0, 1\nlui   A0, hi(D_8011D2C0)\naddu  A0, A0, V0\nlh    A0, lo(D_8011D2C0)(A0)\njal   GetSpaceData\n addiu S1, S1, 8\nmove  S2, V0\naddiu S0, SP, 0x38\nmove  A0, S0\njal   0x80089A20\n move  A1, S1\njal   0x800E9748\n move  A0, S0\njal   0x800F915C\n li    A0, 4\njal   0x800F9198\n move  A0, S0\nlhu   V0, 0xa(S3)\nandi  V0, V0, 0xfffe\nsh    V0, 0xa(S3)\naddiu A0, S3, 0xc\njal   0x80089A20\n move  A1, S1\naddiu A0, SP, 0x18\naddiu A1, S2, 8\njal   midpoint\n move  A2, S1\njal   0x800D88E8\n addiu A0, SP, 0x18\nlwc1  F2, 0x18(SP)\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F4\n      NOP\nmul.s F2, F2, F4\nlwc1  F0, 0xc(S3)\nsub.s F0, F0, F2\nswc1  F0, 0xc(S3)\nlwc1  F2, 0x20(SP)\nmul.s F2, F2, F4\nlwc1  F0, 0x14(S3)\nsub.s F0, F0, F2\nswc1  F0, 0x14(S3)\njal   PlaySound\n li    A0, 297\nli    A0, 11\njal   InitFadeIn\n li    A1, 50\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S3)\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nL80111DA4:\njal   SleepVProcess\n       NOP\nlwc1  F0, 0x30(S3)\nsub.s F0, F0, F22\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1t  L80111DA4\n swc1  F0, 0x30(S3)\nL80111DC8:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L80111DE8\n       NOP\njal   SleepVProcess\n       NOP\nj     L80111DC8\n       NOP\nL80111DE8:\njal   0x8004EE68\n       NOP\nmove  S0, V0\naddiu A2, S3, 0x18\nmove  A0, A2\naddiu A1, SP, 0x18\njal   0x800ED128\n li    A3, 16\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n move  S0, R0\nlui   A1, 0x4040\nlui   A2, 0x4000\njal   0x800EDB98\n move  A0, S3\nmove  S4, V0\nli    A0, 60\njal   0x800EC590\n li    A1, 14896\njal   PlaySound\n li    A0, 300\nmove  A0, S3\nli    A1, -1\njal   0x800D9CE8\n move  A2, R0\njal   SleepProcess\n li    A0, 20\nli    S3, 1\nlui   S2, hi(D_8011FA98)\naddiu S2, S2, lo(D_8011FA98)\nsll   V0, S0, 2\nL80111E6C:\naddu  S1, V0, S2\nlw    A0, 0(S1)\nbeqz  A0, L80111E88\n addiu S0, S0, 1\njal   EndProcess\n       NOP\nsw    R0, 0(S1)\nL80111E88:\nslti  V0, S0, 8\nbnez  V0, L80111E6C\n sll   V0, S0, 2\nlb    V0, 5(S7)\naddu  V0, S7, V0\nlb    V0, 6(V0)\nsll   V0, V0, 2\nlui   S0, hi(D_8011FA78)\naddu  S0, S0, V0\nlw    S0, lo(D_8011FA78)(S0)\njal   0x8004A994\n li    A0, 90\nmtc1  R0, F20\nli    AT, 0x43C80000 ; 400.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S0)\nc.lt.s F0, F2\n      NOP\n      NOP\nbc1f  L80112028\n mov.s F4, F0\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F22\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F24\nli    AT, 0x42480000 ; 50.000000\nmtc1  AT, F28\nli    AT, 0x43C80000 ; 400.000000\nmtc1  AT, F26\nadd.s F0, F4, F22\nL80111F00:\nswc1  F0, 0x30(S0)\nlwc1  F0, 0x18(SP)\nmul.s F0, F0, F22\nlwc1  F2, 0xc(S0)\nadd.s F0, F0, F2\nswc1  F0, 0xc(S0)\nlwc1  F0, 0x20(SP)\nmul.s F0, F0, F22\nlwc1  F2, 0x14(S0)\nadd.s F0, F0, F2\nswc1  F0, 0x14(S0)\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S0)\njal   0x8008E3F0\n mov.s F12, F20\nswc1  F0, 0x20(S0)\nli    AT, 0x42340000 ; 45.000000\nmtc1  AT, F0\n      NOP\nadd.s F20, F20, F0\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1tl L80111F6C\n sub.s F20, F20, F24\nL80111F6C:\nlwc1  F0, 0x30(S0)\nc.lt.s F28, F0\n      NOP\n      NOP\nbc1t  L80111F88\n li    V1, 1\nmove  V1, R0\nL80111F88:\nsltu  V0, R0, S3\nand   V0, V1, V0\nbeqz  V0, L80112008\n       NOP\njal   0x800DEB2C\n lb    A0, 0xf(S7)\nli    V1, 3\nbne   V0, V1, L80111FBC\n       NOP\njal   0x80035FDC\n li    A0, 23\nj     L80111FC8\n move  S3, R0\nL80111FBC:\njal   0x8003602C\n li    A0, 23\nmove  S3, R0\nL80111FC8:\nmove  A0, R0\nmove  A1, R0\njal   0x800620C8\n move  A2, R0\njal   EndProcess\n move  A0, S4\njal   0x800EDA58\n       NOP\njal   0x800FC8A4\n       NOP\njal   0x800FF7F0\n li    A0, 2\njal   0x800FCA14\n       NOP\njal   0x8004A0E0\n       NOP\nL80112008:\njal   SleepVProcess\n       NOP\nlwc1  F4, 0x30(S0)\nc.lt.s F4, F26\n      NOP\n      NOP\nbc1tl L80111F00\n add.s F0, F4, F22\nL80112028:\njal   SleepProcess\n li    A0, -1\nlw    RA, 0x134(SP)\nlw    FP, 0x130(SP)\nlw    S7, 0x12c(SP)\nlw    S6, 0x128(SP)\nlw    S5, 0x124(SP)\nlw    S4, 0x120(SP)\nlw    S3, 0x11c(SP)\nlw    S2, 0x118(SP)\nlw    S1, 0x114(SP)\nlw    S0, 0x110(SP)\nldc1  F28, 0x158(SP)\nldc1  F26, 0x150(SP)\nldc1  F24, 0x148(SP)\nldc1  F22, 0x140(SP)\nldc1  F20, 0x138(SP)\njr    RA\n addiu SP, SP, 0x160\n\n; item 17?\nD_80112074:\naddiu SP, SP, -0x58\nsw    RA, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nsdc1  F24, 0x50(SP)\nsdc1  F22, 0x48(SP)\nsdc1  F20, 0x40(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\nlb    S2, 0xf(S1)\nli    A0, 1\njal   0x8005279C\n move  A1, R0\nsll   V0, V0, 0x10\nlui   A0, hi(CORE_80101980)\nlw    A0, lo(CORE_80101980)(A0)\njal   ReadMainFS\n sra   S3, V0, 0x10\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   S4, V0, 0x10\njal   FreeMainFS\n move  A0, S0\nmove  S0, S3\nmove  A0, S0\nmove  A1, R0\nmove  A2, S4\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 18304\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 36864\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nli    A2, 1\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\njal   SleepProcess\n li    A0, 20\njal   PlaySound\n li    A0, 325\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\naddiu A2, SP, 0x20\njal   0x800F6748\n addiu A3, SP, 0x24\njal   0x8004EE68\n       NOP\nmove  S0, V0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlwc1  F0, 0x20(SP)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlwc1  F0, 0x24(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlb    V0, 0xf(S1)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E354)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E354)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E358)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E358)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, -1\nsw    V0, 0x14(SP)\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 1\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nmove  A2, R0\njal   0x80055140\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nli    S1, 255\nsll   A2, S0, 1\nL8011225C:\naddu  A2, A2, S0\nsll   A2, A2, 3\naddu  A2, A2, S0\nsubu  A2, S1, A2\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0xa\nbnezl V0, L8011225C\n sll   A2, S0, 1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\njal   0x800E4A7C\n move  S0, S3\nsll   V1, S2, 3\nsubu  V1, V1, S2\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\njal   0x800E4A7C\n sb    V0, 0(V1)\nmove  A0, S2\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\njal   0x800E4A7C\n       NOP\nmove  A0, S2\nmove  A1, V0\naddiu A2, SP, 0x20\njal   0x800F6848\n addiu A3, SP, 0x24\nlwc1  F0, 0x20(SP)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlwc1  F0, 0x24(SP)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\njal   0x8005532C\n li    A2, 32768\njal   FixUpPlayerItemSlots\n move  A0, S2\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nsw    R0, 0x10(SP)\nfunc_80112388:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 56\nli    A1, 0x4100 ; "Hey Im the skeleton key. Youre not throwing me away right?"\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nlui   A0, hi(D_8011E454)\naddiu A0, A0, lo(D_8011E454)\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nbeqz  S0, L801123DC\n li    V0, 1\nbeql  S0, V0, L80112404\n sw    R0, 0x10(SP)\nj     L8011247C\n move  S0, S3\nL801123DC:\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 56\nli    A1, 16641\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nj     L801124BC\n       NOP\nL80112404:\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, 56\nli    A1, 16642\nmove  A2, R0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\nmove  A0, S3\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\njal   PlayerHasEmptyItemSlot\n move  A0, S2\nsll   V1, S2, 3\nsubu  V1, V1, S2\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, 1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n move  A0, S2\nlui   V1, hi(CORE_800CD0A8)\naddiu V1, V1, lo(CORE_800CD0A8)\nlhu   V0, 0(V1)\nandi  V0, V0, 0xfffe\nj     L801124BC\n sh    V0, 0(V1)\nL8011247C:\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\njal   func_80106FE8\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\nmove  A0, S0\nmove  A1, R0\njal   0x8005532C\n li    A2, 32768\nj     func_80112388\n sw    R0, 0x10(SP)\nL801124BC:\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nbnez  S0, L80112580\n       NOP\njal   SleepProcess\n li    A0, 10\nli    S0, 1\nmove  S1, S3\nli    AT, 0x407E0000 ; 3.968750\nori AT, AT, 0xf9db\nmtc1  AT, F24\nli    AT, 0x437F0000 ; 255.000000\nmtc1  AT, F22\nli    AT, 0x4F000000 ; 2147483648.000000\nmtc1  AT, F20\nlui   S2, 0x8000\nL80112504:\nmtc1  S0, F0\n      NOP\ncvt.s.w F0, F0\nmul.s F0, F0, F24\nsub.s F2, F22, F0\nc.le.s F20, F2\n      NOP\n      NOP\nbc1tl L80112540\n sub.s F0, F2, F20\ntrunc.w.s F0, F2\nmfc1  A2, F0\n      NOP\nj     L80112554\n move  A0, S1\nL80112540:\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nor    A2, A2, S2\nmove  A0, S1\nL80112554:\nmove  A1, R0\njal   0x80055458\n andi  A2, A2, 0xffff\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x40\nbnez  V0, L80112504\n move  A1, R0\nmove  A0, S3\njal   0x80055458\n move  A2, R0\nL80112580:\njal   0x800525C8\n move  A0, S3\njal   FreeGraphics\n move  A0, S4\nlw    RA, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\nldc1  F24, 0x50(SP)\nldc1  F22, 0x48(SP)\nldc1  F20, 0x40(SP)\njr    RA\n addiu SP, SP, 0x58\n\nD_801125BC:\naddiu SP, SP, -0x40\nsw    RA, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F22, 0x38(SP)\njal   0x8004EE68\n sdc1  F20, 0x30(SP)\nlw    S1, 0x8c(V0)\nli    A0, 1\njal   0x8005279C\n move  A1, R0\nsll   V0, V0, 0x10\nsra   S2, V0, 0x10\nmove  S0, S2\nmove  A0, S0\nmove  A1, R0\nlui   A2, hi(D_8011FB66)\nlh    A2, lo(D_8011FB66)(A2)\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 9\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nlui   A0, hi(D_8011FB60)\nlw    A0, lo(D_8011FB60)(A0)\nmove  A1, R0\naddiu A2, SP, 0x18\njal   0x800F6E4C\n addiu A3, SP, 0x1c\nlui   V0, hi(D_8011FB60)\nlw    V0, lo(D_8011FB60)(V0)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E20C)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E20C)(AT)\nli    AT, 0x41800000 ; 16.000000\nmtc1  AT, F4\n      NOP\nmul.s F0, F0, F4\nlui   AT, hi(D_8011E1EC)\naddu  AT, AT, V0\nlwc1  F2, lo(D_8011E1EC)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nswc1  F2, 0x18(SP)\nlui   AT, hi(D_8011E210)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E210)(AT)\nmul.s F0, F0, F4\nlui   AT, hi(D_8011E1F0)\naddu  AT, AT, V0\nlwc1  F2, lo(D_8011E1F0)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nswc1  F2, 0x1c(SP)\nlwc1  F0, 0x18(SP)\ncvt.s.w F0, F0\nsll   S1, S1, 3\nlui   AT, hi(D_8011E460)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E460)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlwc1  F0, 0x1c(SP)\ncvt.s.w F0, F0\nlui   AT, hi(D_8011E464)\naddu  AT, AT, S1\nlwc1  F2, lo(D_8011E464)(AT)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S0\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nli    V0, 255\nsw    V0, 0x10(SP)\nmove  A0, S0\nmove  A1, R0\nli    A2, 255\njal   0x80055420\n li    A3, 255\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n li    A2, 255\nmtc1  R0, F20\nli    S0, 255\nmove  S1, S2\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F22\nL8011275C:\nmove  A0, S1\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x800551D8\n move  A1, R0\nmove  A0, S1\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n addiu S0, S0, -0xa\nbgez  S0, L8011275C\n add.s F20, F20, F22\nmove  S0, S2\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   0x800525C8\n move  A0, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F22, 0x38(SP)\nldc1  F20, 0x30(SP)\njr    RA\n addiu SP, SP, 0x40\n\nD_801127D8:\naddiu SP, SP, -0x38\nsw    RA, 0x34(SP)\nsw    S6, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\njal   0x8004EE68\n sw    S0, 0x18(SP)\nlw    S1, 0x8c(V0)\nlui A0, 0x21\njal   ReadMainFS\n ori A0, A0, 0x2c\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   S6, V0, 0x10\njal   FreeMainFS\n move  A0, S0\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x1ba\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   S5, V0, 0x10\njal   FreeMainFS\n move  A0, S0\nlui A0, 0x13\njal   ReadMainFS\n ori A0, A0, 0x1b9\nmove  S0, V0\njal   ImgPackParse\n move  A0, S0\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nlui   AT, hi(D_8011FB64)\nsw    V0, lo(D_8011FB64)(AT)\njal   FreeMainFS\n move  A0, S0\nli    A0, 2\njal   0x8005279C\n li    A1, 2\nsll   V0, V0, 0x10\nsra   S3, V0, 0x10\nmove  S0, S3\nmove  A0, S0\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nmove  A0, S0\nmove  A1, R0\nmove  A2, S6\njal   0x80055024\n li    A3, 12\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 9\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nmove  A0, S0\nmove  A1, R0\njal   0x800554C4\n li    A2, -1\nmove  A0, S0\nli    A1, 1\nmove  A2, S5\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nli    A1, 1\njal   0x80055294\n li    A2, 9\nmove  A0, S0\nli    A1, 1\njal   0x800553A8\n li    A2, 36864\nli    V0, 255\nsw    V0, 0x10(SP)\nmove  A0, S0\nli    A1, 1\nli    A2, 255\njal   0x80055420\n li    A3, 255\nmove  A0, S0\nli    A1, 1\njal   0x80055458\n li    A2, 255\nmove  A0, S0\nli    A1, 1\nlui   A2, 0x4000\njal   0x800551D8\n move  A3, A2\nmove  A0, S0\nli    A1, 1\njal   0x800554C4\n move  A2, R0\nandi  V0, S1, 1\nbeqz  V0, L801129B0\n li    S2, 200\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 1\nmove  A0, S0\nli    A1, 1\njal   0x800553A8\n li    A2, 1\nmove  A0, S0\nli    A1, 1\nj     L801129C0\n li    A2, 20\nL801129B0:\nli    S2, 120\nmove  A0, S3\nli    A1, 1\nli    A2, -20\nL801129C0:\njal   0x80054904\n li    A3, -5\nslti  V0, S1, 2\nbeqz  V0, L801129D8\n li    S0, 272\nli    S0, -32\nL801129D8:\njal   SleepProcess\n li    A0, 20\nmove  A0, S1\njal   PlayerHasItem\n li    A1, ITEM_BOO_REPELLANT\nsll   V1, S1, 3\nsubu  V1, V1, S1\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n move  A0, S1\njal   0x800F63F0\n move  A0, S1\nslti  V0, S1, 2\nbeql  V0, R0, L80112A44\n addiu S0, S0, -5\naddiu S0, S0, 5\nslti  V0, S0, 0x33\nbeqz  V0, L80112A88\n sll   A3, S0, 0x10\nj     L80112A50\n       NOP\nL80112A44:\nslti  V0, S0, 0xd2\nbnez  V0, L80112A88\n sll   A3, S0, 0x10\nL80112A50:\nmove  A0, S3\nmove  A1, R0\nmove  A2, S2\njal   0x80054904\n sra   A3, A3, 0x10\njal   SleepVProcess\n       NOP\nslti  V0, S1, 2\nbeql  V0, R0, L80112A44\n addiu S0, S0, -5\naddiu S0, S0, 5\nslti  V0, S0, 0x33\nbnez  V0, L80112A50\n sll   A3, S0, 0x10\nL80112A88:\njal   SleepProcess\n li    A0, 10\nmove  A0, S3\nli    A1, 1\njal   0x8005532C\n li    A2, 32768\njal   PlaySound\n li    A0, 332\nsll   V0, V0, 0x10\nsra   S4, V0, 0x10\nlui   AT, hi(D_8011FB60)\nsw    S1, lo(D_8011FB60)(AT)\nmove  S2, R0\nmove  S0, R0\nL80112AC0:\nlui   A0, hi(D_801125BC)\naddiu A0, A0, lo(D_801125BC)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S1, V0\nsw    S0, 0x8c(S1)\njal   SleepProcess\n li    A0, 2\naddiu S0, S0, 1\nslti  V0, S0, 6\nbnez  V0, L80112AC0\n       NOP\njal   SleepProcess\n li    A0, 5\naddiu S2, S2, 1\nslti  V0, S2, 4\nbnez  V0, L80112AC0\n move  S0, R0\njal   0x8004EE68\n li    S0, 255\nmove  A0, V0\njal   0x8004ED30\n move  A1, S1\njal   0x8004EE18\n sll   S1, S3, 0x10\njal   0x8004AD50\n move  A0, S4\nmove  A0, S3\nli    A1, 1\njal   0x80055458\n move  A2, R0\nsra   A0, S1, 0x10\nL80112B48:\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n addiu S0, S0, -0x1e\nbgezl S0, L80112B48\n sra   A0, S1, 0x10\nmove  S0, S3\nmove  A0, S0\nmove  A1, R0\njal   0x80055458\n move  A2, R0\njal   0x800525C8\n move  A0, S0\nlui   A0, hi(D_8011FB66)\njal   FreeGraphics\n lh    A0, lo(D_8011FB66)(A0)\njal   FreeGraphics\n move  A0, S5\njal   FreeGraphics\n move  A0, S6\njal   EndProcess\n move  A0, R0\nlw    RA, 0x34(SP)\nlw    S6, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_80112BCC:\naddiu SP, SP, -0x28\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F22, 0x20(SP)\nsdc1  F20, 0x18(SP)\njal   SleepProcess\n li    A0, 10\nli    S0, 1\nli    AT, 0x407E0000 ; 3.968750\nori   AT, AT, 0xf9db\nmtc1  AT, F22\nli    AT, 0x437F0000 ; 255.000000\nmtc1  AT, F20\nL80112C00:\njal   0x800E4A7C\n       NOP\nmtc1  S0, F0\n      NOP\ncvt.s.w F0, F0\nmul.s F0, F0, F22\nsub.s F0, F20, F0\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\njal   0x800F68E0\n sra   A2, A2, 0x10\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x40\nbnez  V0, L80112C00\n       NOP\njal   0x800E4A7C\n       NOP\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F22, 0x20(SP)\nldc1  F20, 0x18(SP)\njr    RA\n addiu SP, SP, 0x28\n\nD_80112C88:\naddiu SP, SP, -0x40\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\njal   0x8004EE68\n sdc1  F20, 0x20(SP)\nlw    S1, 0x8c(V0)\nlui   A0, hi(D_8011FB68)\njal   0x800D975C\n lw    A0, lo(D_8011FB68)(A0)\nmove  S0, V0\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, S1, 0xc\naddiu A0, S0, 0x24\nlui   A1, 0x4000\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nlwc1  F0, 0x30(S1)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F2\n      NOP\nadd.s F0, F0, F2\nswc1  F0, 0x30(S0)\njal   0x800D9AA4\n move  A0, S0\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\nmtc1  V0, F20\n      NOP\ncvt.s.w F20, F20\nlui   AT, hi(D_8011F968)\nldc1  F22, lo(D_8011F968)(AT)\nli    AT, 0x420C0000 ; 35.000000\nmtc1  AT, F26\nli    AT, 0x42200000 ; 40.000000\nmtc1  AT, F24\nfunc_80112D34:\njal   SleepVProcess\n       NOP\nlwc1  F0, 0x30(S0)\ncvt.d.s F0, F0\nadd.d F0, F0, F22\ncvt.s.d F0, F0\nswc1  F0, 0x30(S0)\nlwc1  F2, 0x30(S1)\nadd.s F2, F2, F26\nc.le.s F2, F0\n      NOP\nbc1t  L80112DA8\n       NOP\nadd.s F20, F20, F24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F20\n      NOP\njal   0x8008A2A0\n addiu A0, A0, 0x74\nj     func_80112D34\n       NOP\nL80112DA8:\njal   0x800D9B54\n move  A0, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x40\n\nfunc_80112DDC:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nlui   A0, hi(D_80112C88)\naddiu A0, A0, lo(D_80112C88)\nli    A1, 4096\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S0, 0x8c(V0)\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nD_80112E18:\naddiu SP, SP, -0x50\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F30, 0x48(SP)\nsdc1  F28, 0x40(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\njal   0x8004EE68\n sdc1  F20, 0x20(SP)\nlw    S0, 0x8c(V0)\nmtc1  R0, F20\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F30\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F24\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F28\nmtc1  R0, F26\n      NOP\nfunc_80112E80:\njal   0x8008EF20\n mov.s F12, F20\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nneg.s F0, F0\nswc1  F0, 0x18(V0)\njal   0x8008E3F0\n mov.s F12, F20\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nadd.s F20, F20, F30\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1f  L80112EC4\n swc1  F0, 0x20(V0)\nsub.s F20, F20, F24\nL80112EC4:\nlw    V0, 0(S0)\nbeqz  V0, L80112EFC\n       NOP\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nswc1  F22, 0x2c(V0)\nswc1  F22, 0x28(V0)\nswc1  F22, 0x24(V0)\nsub.s F22, F22, F28\nc.le.s F22, F26\n      NOP\n      NOP\nbc1t  L80112F0C\n li    A0, -1\nL80112EFC:\njal   SleepVProcess\n       NOP\nj     func_80112E80\n       NOP\nL80112F0C:\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nmtc1  R0, F0\n      NOP\nswc1  F0, 0x2c(V0)\nswc1  F0, 0x28(V0)\nswc1  F0, 0x24(V0)\njal   PlayerHasItem\n li    A1, ITEM_KOOPA_CARD\nlb    A0, 0xf(S1)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S1)\njal   0x800F63F0\n lb    A0, 0xf(S1)\nlui   A0, hi(D_8011FB6C)\njal   0x800D9B54\n lw    A0, lo(D_8011FB6C)(A0)\njal   EndProcess\n move  A0, R0\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F30, 0x48(SP)\nldc1  F28, 0x40(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x50\n\nfunc_80112FA8:\naddiu SP, SP, -0x50\nsw    RA, 0x34(SP)\nsw    S4, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F24, 0x48(SP)\nsdc1  F22, 0x40(SP)\nsdc1  F20, 0x38(SP)\nsw    R0, 0x18(SP)\nlui   S4, hi(CORE_800CD058)\naddiu S4, S4, lo(CORE_800CD058)\nli    A0, 1\njal   0x8005279C\n li    A1, 5\nlui   AT, hi(CORE_8010570C)\nsh    V0, lo(CORE_8010570C)(AT)\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_char)\naddu  AT, AT, V0\nlbu   V0, lo(p1_char)(AT)\nsll   V0, V0, 2\nlui   A0, hi(CORE_80101040)\naddu  A0, A0, V0\njal   ReadMainFS\n lw    A0, lo(CORE_80101040)(A0)\nmove  S1, V0\njal   ImgPackParse\n move  A0, S1\nsll   S0, V0, 0x10\nsra   S0, S0, 0x10\njal   FreeMainFS\n move  A0, S1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\nmove  A2, S0\njal   0x80055024\n move  A3, R0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x80055294\n li    A2, 10\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800550F4\n li    A2, 1\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\nli    A0, -1\nmove  A1, R0\naddiu A2, SP, 0x10\njal   0x800F6E4C\n addiu A3, SP, 0x14\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nlh    A2, 0x12(SP)\nlh    A3, 0x16(SP)\njal   0x80054904\n move  A1, R0\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n li    A0, 1\njal   0x800F6ECC\n li    A0, -1\nli    A0, -1\njal   PlayerHasItem\n li    A1, ITEM_KOOPA_CARD\njal   0x800E4A88\n move  A0, V0\njal   func_8010FE54\n       NOP\nli    A0, 68\njal   0x800D90C8\n move  A1, R0\nlui   AT, hi(D_8011FB6C)\nsw    V0, lo(D_8011FB6C)(AT)\njal   GetPlayerStruct\n li    A0, -1\nlw    A1, 0x24(V0)\nlui   A0, hi(D_8011FB6C)\nlw    A0, lo(D_8011FB6C)(A0)\naddiu A0, A0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(V0)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nlwc1  F0, 0x30(V0)\nsub.s F0, F0, F22\nL80113160:\njal   SleepVProcess\n swc1  F0, 0x30(V0)\nlui   V0, hi(D_8011FB6C)\nlw    V0, lo(D_8011FB6C)(V0)\nlwc1  F0, 0x30(V0)\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1tl L80113160\n sub.s F0, F0, F22\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nlui   A0, hi(D_80112E18)\naddiu A0, A0, lo(D_80112E18)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\naddiu V1, SP, 0x18\nsw    V1, 0x8c(V0)\nli    A0, -1\nli    A1, 4\njal   0x800FFA4C\n li    A2, 5\nmove  S3, V0\nlui   S1, hi(bank_coin_total)\nlh    S1, lo(bank_coin_total)(S1)\nmtc1  S1, F24\n      NOP\ncvt.s.w F24, F24\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F0\n      NOP\ndiv.s F24, F24, F0\nmtc1  R0, F20\nli    A0, 25\njal   0x800D90C8\n move  A1, R0\nlui   AT, hi(D_8011FB68)\nsw    V0, lo(D_8011FB68)(AT)\njal   0x800D9714\n move  A0, V0\nlui   A0, hi(D_8011FB68)\njal   0x800D9B24\n lw    A0, lo(D_8011FB68)(A0)\nbeqz  S1, L801132C4\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nlui   S2, hi(bank_coin_total)\naddiu S2, S2, lo(bank_coin_total)\nadd.s F20, F20, F24\nL80113240:\nc.le.s F22, F20\n      NOP\n      NOP\nbc1f  L8011326C\n move  S0, R0\nL80113254:\nsub.s F20, F20, F22\nc.le.s F22, F20\n      NOP\n      NOP\nbc1t  L80113254\n addiu S0, S0, 1\nL8011326C:\nbeqz  S0, L801132BC\n       NOP\nlui   A0, hi(D_8011FB6C)\njal   func_80112DDC\n lw    A0, lo(D_8011FB6C)(A0)\nsubu  V0, S1, S0\nbltzl V0, L8011328C\n move  S0, S1\nL8011328C:\nsubu  S1, S1, S0\nlb    A0, 0xf(S4)\njal   AdjustPlayerCoins\n move  A1, S0\njal   PlaySound\n li    A0, 262\nlhu   V0, 0(S2)\nsubu  V0, V0, S0\njal   func_80108478\n sh    V0, 0(S2)\njal   SleepProcess\n li    A0, 5\nL801132BC:\nbnezl S1, L80113240\n add.s F20, F20, F24\nL801132C4:\njal   0x800FFAEC\n move  A0, S3\nli    V0, 1\nsw    V0, 0x18(SP)\njal   SleepProcess\n li    A0, 20\nlui   A0, hi(D_8011FB68)\njal   0x800D9B54\n lw    A0, lo(D_8011FB68)(A0)\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800ECC0C\n addiu A0, A0, 0x18\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\njal   SleepProcess\n li    A0, 5\nlb    A1, 0xf(S4)\njal   0x8004ACE0\n li    A0, 628\njal   SleepProcess\n li    A0, 45\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nlw    RA, 0x34(SP)\nlw    S4, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F24, 0x48(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x50\n\n; Called after "Who\'s your opponent" textbox\nfunc_80113364:\naddiu SP, SP, -0x48\nsw    RA, 0x40(SP)\nsw    S5, 0x3c(SP)\nsw    S4, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nmove  S4, A0\nmove  S5, A1\nmove  S2, R0\nlui   A1, hi(D_8011F8D0)\naddiu A1, A1, lo(D_8011F8D0)\nlwl   V0, 0(A1)\nlwr   V0, 3(A1)\nswl   V0, 0x20(SP)\nswr   V0, 0x23(SP)\nmove  S1, R0\naddiu S3, SP, 0x18\nL801133B0:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   S1, V0, L8011347C\n sll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(CORE_800D110C)\naddu  AT, AT, V0\nlbu   V0, lo(CORE_800D110C)(AT)\nandi  V0, V0, 1\nbeqz  V0, L80113430\n sll   S0, S1, 3\nbeqz  S5, L801133F8\n       NOP\nlui   V0, hi(D_8011FB70)\nlw    V0, lo(D_8011FB70)(V0)\nj     L80113404\n addiu S2, V0, 1\nL801133F8:\nlui   V0, hi(D_8011FB74)\nlw    V0, lo(D_8011FB74)(V0)\naddiu S2, V0, 1\nL80113404:\nsll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, 1024\nj     L8011349C\n sh    V1, 0(V0)\nL80113430:\nsubu  S0, S0, S1\nsll   S0, S0, 3\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\naddu  V0, SP, V0\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nlbu   A1, 0x20(V0)\njal   0x8005FE54\n addiu S1, S1, 1\nlui   V0, hi(p1_controller)\naddu  V0, V0, S0\nlbu   V0, lo(p1_controller)(V0)\nsll   V0, V0, 1\naddu  V0, V0, S3\nli    V1, -1\nj     L801134A0\n sh    V1, 0(V0)\nL8011347C:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S3\nsh    R0, 0(V0)\nL8011349C:\naddiu S1, S1, 1\nL801134A0:\nslti  V0, S1, 4\nbnez  V0, L801133B0\n       NOP\nbeqz  S2, L80113558\n li    A1, 2\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8005B63C\n li    A2, 2\nmove  S0, R0\naddiu S1, SP, 0x18\nL801134CC:\naddiu S2, S2, -1\nbnez  S2, L80113508\n       NOP\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_controller)\naddu  AT, AT, V0\nlbu   V0, lo(p1_controller)(AT)\nsll   V0, V0, 1\naddu  V0, V0, S1\nli    V1, -32768\nsh    V1, 0(V0)\nL80113508:\nbnez  S0, L80113530\n li    V0, 5\njal   0x800EDC40\n       NOP\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nj     func_80113540\n andi  V0, V0, 0xff\nL80113530:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\nfunc_80113540:\njal   0x8005F698\n sw    V0, 0x10(SP)\nbnez  S2, L801134CC\n addiu S0, S0, 1\nj     func_80113570\n move  S1, R0\nL80113558:\nlh    A0, 0x18(SP)\nlh    A1, 0x1a(SP)\nlh    A2, 0x1c(SP)\nlh    A3, 0x1e(SP)\njal   0x8005F744\n move  S1, R0\nfunc_80113570:\naddu  V0, S4, S1\nL80113574:\nlbu   V0, 0(V0)\nbnezl V0, L80113598\n addiu S1, S1, 1\nsll   A1, S1, 0x10\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\njal   0x8006010C\n sra   A1, A1, 0x10\naddiu S1, S1, 1\nL80113598:\nslti  V0, S1, 4\nbnez  V0, L80113574\n addu  V0, S4, S1\nmove  S1, R0\nsll   A1, S1, 0x10\nL801135AC:\nlui   A0, hi(CORE_80105702_window_id)\nlh    A0, lo(CORE_80105702_window_id)(A0)\nsra   A1, A1, 0x10\njal   0x8005E1D8\n li    A2, 1\nmove  S1, V0\naddu  V0, S4, S1\nlbu   V0, 0(V0)\nbeqz  V0, L801135AC\n sll   A1, S1, 0x10\nmove  V0, S1\nlw    RA, 0x40(SP)\nlw    S5, 0x3c(SP)\nlw    S4, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\njr    RA\n addiu SP, SP, 0x48\n\nfunc_801135FC:\naddiu SP, SP, -0x38\nsw    RA, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\njal   0x8004EE68\n sw    S0, 0x18(SP)\nlw    S3, 0x8c(V0)\nlh    A0, 0x8e(V0)\njal   0x800FF900\n li    A1, 4\nli    S1, 128\nsll   V0, S3, 3\nsubu  V0, V0, S3\nsll   V0, V0, 3\nlui   V1, hi(p1_item1)\naddiu V1, V1, lo(p1_item1)\naddu  S4, V0, V1\nmove  S0, R0\nL80113650:\nli    S5, -1\nsll   S2, S1, 0x10\naddu  V0, S4, S0\nL8011365C:\nlb    V0, 0(V0)\nbeq   V0, S5, L80113674\n move  A0, S3\nmove  A1, S0\njal   0x800F68E0\n sra   A2, S2, 0x10\nL80113674:\naddiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L8011365C\n addu  V0, S4, S0\njal   SleepVProcess\n addiu S1, S1, -0xa\nbgtz  S1, L80113650\n move  S0, R0\nsll   V0, S3, 3\nsubu  V0, V0, S3\nsll   V0, V0, 3\nlui   V1, hi(p1_item1)\naddiu V1, V1, lo(p1_item1)\naddu  S1, V0, V1\nli    S2, -1\naddu  V0, S1, S0\nL801136B4:\nlb    V0, 0(V0)\nbeq   V0, S2, L801136CC\n move  A0, S3\nmove  A1, S0\njal   0x800F68E0\n move  A2, R0\nL801136CC:\naddiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L801136B4\n addu  V0, S1, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x38\n\nfunc_80113708:\naddiu SP, SP, -0x40\nsw    RA, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F20, 0x38(SP)\njal   0x8004EE68\n move  S0, R0\nlw    S2, 0x8c(V0)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nmove  S1, R0\nlui   S5, hi(p1_item1)\naddiu S5, S5, lo(p1_item1)\nli    S4, -1\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nL80113758:\nlb    A0, 0xf(S3)\nsll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\naddu  V0, V0, S5\naddu  V0, V0, S0\nlb    V0, 0(V0)\nbeql  V0, S4, L801137D0\n addiu S0, S0, 1\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x800F696C\n move  A1, S0\nmove  A0, S2\nmove  A1, S1\naddiu A2, SP, 0x10\njal   0x800F6E4C\n addiu A3, SP, 0x14\nlb    A0, 0xf(S3)\nlh    A2, 0x12(SP)\nlh    A3, 0x16(SP)\njal   0x800F688C\n move  A1, S0\njal   0x800E4A7C\n       NOP\nxor   V0, S0, V0\nsltu  V0, R0, V0\naddu  S1, S1, V0\naddiu S0, S0, 1\nL801137D0:\nslti  V0, S0, 3\nbnez  V0, L80113758\n       NOP\nmove  S1, R0\nlui   S5, hi(p1_item1)\naddiu S5, S5, lo(p1_item1)\nli    S4, -1\nmove  S0, R0\nL801137F0:\nsll   S2, S1, 0x10\nL801137F4:\nlb    V0, 0xf(S3)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\naddu  V1, V1, S5\naddu  V1, V1, S0\nlb    V0, 0(V1)\nbeql  V0, S4, L80113838\n addiu S0, S0, 1\njal   0x800E4A7C\n       NOP\nbeq   S0, V0, L80113834\n move  A1, S0\nlb    A0, 0xf(S3)\njal   0x800F68E0\n sra   A2, S2, 0x10\nL80113834:\naddiu S0, S0, 1\nL80113838:\nslti  V0, S0, 3\nbnez  V0, L801137F4\n       NOP\njal   SleepVProcess\n addiu S1, S1, 0x14\nslti  V0, S1, 0x80\nbnez  V0, L801137F0\n move  S0, R0\nlui   S2, hi(p1_item1)\naddiu S2, S2, lo(p1_item1)\nli    S1, -1\nL80113864:\nlb    V0, 0xf(S3)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\naddu  V1, V1, S2\naddu  V1, V1, S0\nlb    V0, 0(V1)\nbeql  V0, S1, L801138A8\n addiu S0, S0, 1\njal   0x800E4A7C\n       NOP\nbeq   S0, V0, L801138A4\n move  A1, S0\nlb    A0, 0xf(S3)\njal   0x800F68E0\n li    A2, 128\nL801138A4:\naddiu S0, S0, 1\nL801138A8:\nslti  V0, S0, 3\nbnez  V0, L80113864\n       NOP\njal   EndProcess\n move  A0, R0\nlw    RA, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x40\n\n; Trade items\nbarter_box_item_code:\nfunc_801138E4:\naddiu SP, SP, -0xd8\nsw    RA, 0xa8(SP)\nsw    S7, 0xa4(SP)\nsw    S6, 0xa0(SP)\nsw    S5, 0x9c(SP)\nsw    S4, 0x98(SP)\nsw    S3, 0x94(SP)\nsw    S2, 0x90(SP)\nsw    S1, 0x8c(SP)\nsw    S0, 0x88(SP)\nsdc1  F28, 0xd0(SP)\nsdc1  F26, 0xc8(SP)\nsdc1  F24, 0xc0(SP)\nsdc1  F22, 0xb8(SP)\nsdc1  F20, 0xb0(SP)\nlui   S6, hi(CORE_800CD058)\naddiu S6, S6, lo(CORE_800CD058)\njal   func_8010FE54\n move  S7, R0\nli    A0, 32\njal   0x800D90C8\n move  A1, R0\nmove  S5, V0\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   A1, 2\njal   0x8001C2FC\n lui   A2, 2\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\njal   0x8001C448\n lh    A0, 0(V0)\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\njal   0x8001C954\n lh    A0, 0(V0)\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\njal   0x8001C514\n lh    A0, 0(V0)\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\njal   GetPlayerStruct\n li    A0, -1\nlw    A1, 0x24(V0)\naddiu A0, S5, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 2\njal   0x8001C814\n li    A2, 1\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S5)\njal   PlaySound\n li    A0, 322\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S5)\nc.lt.s F2, F0\n      NOP\n      NOP\nbc1f  L80113A40\n mov.s F4, F0\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nsub.s F0, F4, F22\nL80113A20:\njal   SleepVProcess\n swc1  F0, 0x30(S5)\nlwc1  F4, 0x30(S5)\nc.lt.s F20, F4\n      NOP\n      NOP\nbc1tl L80113A20\n sub.s F0, F4, F22\nL80113A40:\nmove  S1, R0\naddiu S0, SP, 0x20\nli    S3, 1\naddiu S2, SP, 0x60\nli    S4, 8\nL80113A54:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   V0, S1, L80113A78\n sll   V0, S1, 4\naddu  V0, S0, V0\nsb    S3, 0(V0)\naddu  V0, S2, S1\nj     L80113A88\n sb    R0, 0(V0)\nL80113A78:\naddu  V0, S0, V0\nsb    S4, 0(V0)\naddu  V0, S2, S1\nsb    S3, 0(V0)\nL80113A88:\nsll   A1, S1, 4\naddu  A1, S0, A1\nmove  A0, S1\njal   0x800E2260\n addiu A1, A1, 1\naddiu S1, S1, 1\nslti  V0, S1, 4\nbnez  V0, L80113A54\n li    V0, 1\nsb    V0, 0x64(SP)\nsb    V0, 0x65(SP)\naddiu V0, SP, 0x40\nsw    V0, 0x10(SP)\naddiu V0, SP, 0x50\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x5C01 ; "Who\'s your opponent?"\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage\n addiu A3, SP, 0x30\naddiu A0, SP, 0x60\njal   func_80113364\n li    A1, 1\njal   0x800EC6C8\n move  S4, V0\njal   0x800EC6EC\n       NOP\nli    V0, 4\nbne   S4, V0, L80113B10\n       NOP\njal   0x800EF0D8\n li    A0, 1\nmove  S4, V0\nL80113B10:\njal   0x800E4A7C\n       NOP\nlui   A1, hi(current_player_index)\nlb    A1, lo(current_player_index)(A1)\nsll   V1, A1, 3\nsubu  V1, V1, A1\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nlb    V1, 0(V1)\nli    V0, 16\nbne   V1, V0, L80113B70\n       NOP\njal   PlayerHasEmptyItemSlot\n move  A0, A1\nli    V1, 1\nbne   V0, V1, L80113B70\n       NOP\njal   PlayerHasEmptyItemSlot\n move  A0, S4\nbeql  V0, R0, L80113B70\n li    S7, 1\nL80113B70:\nbnez  S7, L80114328\n       NOP\njal   PlaySound\n li    A0, 329\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 1\njal   0x8001C814\n move  A2, R0\njal   SleepProcess\n li    A0, 20\nli    AT, 0x43200000 ; 160.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x70(SP)\nli    AT, 0x42A80000 ; 84.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x74(SP)\nmove  S1, R0\nlui   S3, hi(p1_item1)\naddiu S3, S3, lo(p1_item1)\nli    S2, -1\nmove  S0, R0\nL80113BD4:\nbne   S0, S1, L80113BE0\n li    A2, 18320\nli    A2, 18310\nL80113BE0:\nlb    A0, 0xf(S6)\nmove  A1, S0\njal   0x800F69B0\n andi  A2, A2, 0xffff\naddiu S0, S0, 1\nslti  V0, S0, 3\nbnez  V0, L80113BD4\n       NOP\nlb    V0, 0xf(S6)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\naddu  V1, V1, S3\naddu  V1, V1, S1\nlb    V0, 0(V1)\nbeql  V0, S2, L80113C54\n addiu S1, S1, 1\njal   0x800E4A7C\n       NOP\nbeq   S1, V0, L80113C50\n move  A1, S1\nlb    A0, 0xf(S6)\nsw    R0, 0x10(SP)\nli    A2, 10\njal   func_801106A4\n addiu A3, SP, 0x70\njal   SleepProcess\n li    A0, 2\nL80113C50:\naddiu S1, S1, 1\nL80113C54:\nslti  V0, S1, 3\nbnezl V0, L80113BD4\n move  S0, R0\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 4\njal   0x8001C814\n li    A2, 4\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    V1, 0(V0)\nlui   A0, hi(CORE_800D03F8)\nlw    A0, lo(CORE_800D03F8)(A0)\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 6\naddu  V0, V0, A0\nmtc1  R0, F2\nlwc1  F0, 0x40(V0)\nc.eq.s F0, F2\n      NOP\nbc1t  L80113CF8\n       NOP\nmtc1  R0, F20\nL80113CB8:\njal   SleepVProcess\n       NOP\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    V1, 0(V0)\nlui   A0, hi(CORE_800D03F8)\nlw    A0, lo(CORE_800D03F8)(A0)\nsll   V0, V1, 1\naddu  V0, V0, V1\nsll   V0, V0, 6\naddu  V0, V0, A0\nlwc1  F0, 0x40(V0)\nc.eq.s F0, F20\n      NOP\nbc1f  L80113CB8\n       NOP\nL80113CF8:\njal   PlaySound\n li    A0, 336\njal   SleepProcess\n li    A0, 20\nlui   A0, hi(func_801135FC)\naddiu A0, A0, lo(func_801135FC)\nli    A1, 18432\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S4, 0x8c(V0)\njal   PlaySound\n li    A0, 337\nmtc1  R0, F20\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F22\nmove  S0, R0\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F26\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F28\nli    AT, 0x42340000 ; 45.000000\nmtc1  AT, F24\n      NOP\nL80113D58:\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S5)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F26, F20\n      NOP\n      NOP\nbc1f  L80113D8C\n swc1  F0, 0x20(S5)\nsub.s F20, F20, F26\nL80113D8C:\nadd.s F22, F22, F28\nc.lt.s F24, F22\n      NOP\n      NOP\nbc1f  L80113DB4\n move  V0, S0\nmov.s F22, F24\nslti  V0, V0, 0x1f\nbeqz  V0, L80113DC4\n addiu S0, S0, 1\nL80113DB4:\njal   SleepVProcess\n       NOP\nj     L80113D58\n       NOP\nL80113DC4:\nmove  S0, R0\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F26\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F28\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F24\n      NOP\nL80113DE4:\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S5)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F26, F20\n      NOP\n      NOP\nbc1f  L80113E24\n swc1  F0, 0x20(S5)\naddiu S0, S0, 1\nslti  V0, S0, 2\nbeqz  V0, L80113E4C\n sub.s F20, F20, F26\nL80113E24:\nsub.s F22, F22, F28\nc.lt.s F22, F24\n      NOP\n      NOP\nbc1tl L80113E3C\n mov.s F22, F24\nL80113E3C:\njal   SleepVProcess\n       NOP\nj     L80113DE4\n       NOP\nL80113E4C:\nsw    R0, 0x18(S5)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x20(S5)\njal   PlaySound\n li    A0, 338\nmove  S1, R0\nli    AT, 0x3FC00000 ; 1.500000\nmtc1  AT, F28\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F26\nL80113E7C:\nmtc1  S1, F22\n      NOP\ncvt.s.w F22, F22\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F24, F0, F28\nadd.s F24, F24, F26\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F20, F0, F28\nadd.s F20, F20, F26\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F0, F0, F28\nmfc1  A1, F24\nmfc1  A2, F20\nadd.s F0, F0, F26\nmfc1  A3, F0\n      NOP\njal   0x80089A10\n addiu A0, S5, 0x24\njal   SleepVProcess\n addiu S1, S1, 0x28\nslti  V0, S1, 0x5a1\nbnez  V0, L80113E7C\n       NOP\njal   PlaySound\n li    A0, 329\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 4\njal   0x8001C814\n move  A2, R0\njal   SleepProcess\n li    A0, 20\nlui   A0, hi(func_80113708)\naddiu A0, A0, lo(func_80113708)\nli    A1, 18432\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S4, 0x8c(V0)\njal   PlayerHasEmptyItemSlot\n move  A0, S4\nmove  V1, V0\nli    AT, 0x428C0000 ; 70.000000\nmtc1  AT, F0\nli    V0, 1\nbeq   V1, V0, L80113F74\n swc1  F0, 0x7c(SP)\nslti  V0, V1, 2\nbeql  V0, R0, L80113F64\n li    V0, 2\nbeqz  V1, L80114320\n       NOP\nj     L80114150\n       NOP\nL80113F64:\nbeql  V1, V0, L80114018\n move  A0, S4\nj     L80114150\n       NOP\nL80113F74:\nli    AT, 0x43200000 ; 160.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 160\njal   0x800F688C\n li    A3, 84\naddiu S0, SP, 0x78\nli    V0, 1\nsw    V0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 10\njal   func_801106A4\n move  A3, S0\njal   SleepProcess\n li    A0, 20\nlb    A0, 0xf(S6)\nmove  A1, R0\naddiu A2, SP, 0x80\njal   0x800F6E4C\n addiu A3, SP, 0x84\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nmove  A1, R0\njal   0x800F69B0\n li    A2, 18320\nli    V0, 2\nsw    V0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 7\nj     L80114318\n move  A3, S0\nL80114018:\nli    AT, 0x43020000 ; 130.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A1, R0\nli    A2, 160\njal   0x800F688C\n li    A3, 84\naddiu S1, SP, 0x78\nli    S0, 1\nsw    S0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 10\njal   func_801106A4\n move  A3, S1\nli    AT, 0x433E0000 ; 190.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 160\njal   0x800F688C\n li    A3, 84\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 10\njal   func_801106A4\n move  A3, S1\njal   SleepProcess\n li    A0, 20\naddiu S2, SP, 0x80\naddiu S3, SP, 0x84\nlb    A0, 0xf(S6)\nmove  A1, R0\nmove  A2, S2\njal   0x800F6E4C\n move  A3, S3\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nmove  A1, R0\njal   0x800F69B0\n li    A2, 18320\nli    S0, 2\nsw    S0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 7\njal   func_801106A4\n move  A3, S1\nlb    A0, 0xf(S6)\nli    A1, 1\nmove  A2, S2\njal   0x800F6E4C\n move  A3, S3\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nli    A1, 1\njal   0x800F69B0\n li    A2, 18319\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 7\nj     L80114318\n move  A3, S1\nL80114150:\nli    AT, 0x42DC0000 ; 110.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 160\njal   0x800F688C\n li    A3, 84\naddiu S3, SP, 0x78\nli    S0, 1\nsw    S0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 10\njal   func_801106A4\n move  A3, S3\nli    AT, 0x43520000 ; 210.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 160\njal   0x800F688C\n li    A3, 84\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 10\njal   func_801106A4\n move  A3, S3\nli    AT, 0x43200000 ; 160.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x78(SP)\nmove  A0, S4\nli    A1, 2\nli    A2, 160\njal   0x800F688C\n li    A3, 84\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 2\nli    A2, 10\njal   func_801106A4\n move  A3, S3\njal   SleepProcess\n li    A0, 20\naddiu S1, SP, 0x80\naddiu S2, SP, 0x84\nlb    A0, 0xf(S6)\nmove  A1, R0\nmove  A2, S1\njal   0x800F6E4C\n move  A3, S2\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nmove  A1, R0\njal   0x800F69B0\n li    A2, 18320\nli    S0, 2\nsw    S0, 0x10(SP)\nmove  A0, S4\nmove  A1, R0\nli    A2, 7\njal   func_801106A4\n move  A3, S3\nlb    A0, 0xf(S6)\nli    A1, 1\nmove  A2, S1\njal   0x800F6E4C\n move  A3, S2\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nli    A1, 1\njal   0x800F69B0\n li    A2, 18319\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 1\nli    A2, 7\njal   func_801106A4\n move  A3, S3\nlb    A0, 0xf(S6)\nli    A1, 2\nmove  A2, S1\njal   0x800F6E4C\n move  A3, S2\nlwc1  F0, 0x80(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x78(SP)\nlwc1  F0, 0x84(SP)\ncvt.s.w F0, F0\nswc1  F0, 0x7c(SP)\nmove  A0, S4\nli    A1, 2\njal   0x800F69B0\n li    A2, 18318\nsw    S0, 0x10(SP)\nmove  A0, S4\nli    A1, 2\nli    A2, 7\nmove  A3, S3\nL80114318:\njal   func_801106A4\n       NOP\nL80114320:\njal   SleepProcess\n li    A0, 2\nL80114328:\njal   0x800E4A7C\n move  S1, R0\nlb    A0, 0xf(S6)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S6)\nsll   V0, S4, 3\nsubu  V0, V0, S4\nsll   V0, V0, 3\nlui   A2, hi(p1_item1)\naddiu A2, A2, lo(p1_item1)\naddu  A3, V0, A2\naddu  A0, A3, S1\nL8011437C:\nlb    A1, 0(A0)\nlb    V1, 0xf(S6)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, A2\naddu  V0, V0, S1\nlbu   V0, 0(V0)\nsb    V0, 0(A0)\nlb    V1, 0xf(S6)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, A2\naddu  V0, V0, S1\nsb    A1, 0(V0)\naddiu S1, S1, 1\nslti  V0, S1, 3\nbnezl V0, L8011437C\n addu  A0, A3, S1\nbnezl S7, L801143E8\n li    A0, 20\njal   0x800F641C\n li    A0, -1\njal   0x800F641C\n move  A0, S4\nli    A0, 10\nL801143E8:\njal   SleepProcess\n move  S0, R0\njal   PlaySound\n li    A0, 347\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F20\nli    AT, 0x3D380000 ; 0.044922\nori AT, AT, 0x51eb\nmtc1  AT, F24\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F22\nadd.s F20, F20, F24\nL8011441C:\nlw    V0, 0x3c(S5)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmfc1  A1, F20\nmul.s F6, F20, F22\nmfc1  A2, F6\n      NOP\njal   0x8001D558\n li    A3, 1\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x14\nbnezl V0, L8011441C\n add.s F20, F20, F24\njal   0x800D9B54\n move  A0, S5\nbeqz  S7, L80114488\n       NOP\nlb    A1, 0xf(S6)\njal   0x8004ACE0\n li    A0, 646\nli    A0, -1\nli    A1, 3\njal   0x800F2304\n move  A2, R0\nj     L801144A8\n li    A0, 70\nL80114488:\nlb    A1, 0xf(S6)\njal   0x8004ACE0\n li    A0, 628\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\nli    A0, 50\nL801144A8:\njal   SleepProcess\n       NOP\nli    V0, 2\nsw    V0, 0x10(SP)\nli    A0, -1\nli    A1, -1\nmove  A2, R0\njal   0x800F2388\n li    A3, 10\nbeqz  S7, L801144D8\n li    A1, 0x3a2d ; "{0} and {1} traded items!"\nli    A1, 0x3a2e ; "Neither {0} nor {1} have any items to trade!"\nL801144D8:\nlb    V1, 0xf(S6)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   V1, hi(p1_char)\naddu  V1, V1, V0\nlbu   V1, lo(p1_char)(V1)\nlui   A0, hi(CORE_801014A0)\naddiu A0, A0, lo(CORE_801014A0)\nsll   V1, V1, 2\naddu  V1, V1, A0\nsll   V0, S4, 3\nsubu  V0, V0, S4\nsll   V0, V0, 3\nlui   AT, hi(p1_char)\naddu  AT, AT, V0\nlbu   V0, lo(p1_char)(AT)\nsll   V0, V0, 2\naddu  V0, V0, A0\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nlw    A2, 0(V1)\nlw    A3, 0(V0)\njal   0x800EC8EC ; ShowMessage\n li    A0, -1\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nlw    RA, 0xa8(SP)\nlw    S7, 0xa4(SP)\nlw    S6, 0xa0(SP)\nlw    S5, 0x9c(SP)\nlw    S4, 0x98(SP)\nlw    S3, 0x94(SP)\nlw    S2, 0x90(SP)\nlw    S1, 0x8c(SP)\nlw    S0, 0x88(SP)\nldc1  F28, 0xd0(SP)\nldc1  F26, 0xc8(SP)\nldc1  F24, 0xc0(SP)\nldc1  F22, 0xb8(SP)\nldc1  F20, 0xb0(SP)\njr    RA\n addiu SP, SP, 0xd8\n\nD_80114590:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\njal   0x8004EE68\n sw    S0, 0x10(SP)\nlw    S2, 0x8c(V0)\nlw    S1, 0(S2)\nlw    S0, 4(S2)\nmove  A0, S1\nlhu   A2, 0xa(S2)\njal   0x800D9CE8\n li    A1, -1\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, S0, 0xc\nlwc1  F0, 0x30(S0)\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F2\n      NOP\nsub.s F0, F0, F2\nlwc1  F2, 0x10(S1)\nadd.s F0, F0, F2\nswc1  F0, 0x10(S1)\njal   0x800D9A40\n move  A0, S1\nfunc_801145F8:\njal   0x800D9E0C\n move  A0, S1\nandi  V0, V0, 0xffff\nbnez  V0, L80114628\n       NOP\nlw    V0, 0xc(S2)\nbnez  V0, L80114628\n       NOP\njal   SleepVProcess\n       NOP\nj     func_801145F8\n       NOP\nL80114628:\njal   0x800D9B54\n move  A0, S1\njal   EndProcess\n move  A0, R0\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nD_80114650:\naddiu SP, SP, -0x60\nsw    RA, 0x28(SP)\nsw    S5, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F30, 0x58(SP)\nsdc1  F28, 0x50(SP)\nsdc1  F26, 0x48(SP)\nsdc1  F24, 0x40(SP)\nsdc1  F22, 0x38(SP)\njal   0x8004EE68\n sdc1  F20, 0x30(SP)\nlw    S4, 0x8c(V0)\nlui   S1, hi(D_8011FB78)\nlw    S1, lo(D_8011FB78)(S1)\nli    A0, 69\njal   0x800D90C8\n move  A1, R0\nmove  S5, V0\njal   0x800D9B24\n move  A0, S5\nlui A0, 0xb\nori A0, A0, 4\njal   0x8000CED8\n li    A1, 2729\nsll   V0, V0, 0x10\nsra   S2, V0, 0x10\nmove  S0, S2\nmove  A0, S0\nlui   A1, 0x3f80\nlui   A2, 0x41a0\njal   0x8000CD00\n move  A3, A1\nlui   A1, 0x4120\njal   0x8000D018\n move  A0, S0\nmove  A0, S0\njal   0x8001C8A8\n li    A1, 1\njal   PlaySound\n li    A0, 588\nmtc1  R0, F20\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F22\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F26\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F28\nli    AT, 0x42A00000 ; 80.000000\nmtc1  AT, F24\nsll   S0, S2, 0x10\nL80114728:\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S1)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F26, F20\n      NOP\n      NOP\nbc1f  L8011475C\n swc1  F0, 0x20(S1)\nsub.s F20, F20, F26\nL8011475C:\nadd.s F22, F22, F28\nc.lt.s F24, F22\n      NOP\n      NOP\nbc1tl L80114774\n mov.s F22, F24\nL80114774:\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n sra   A0, S0, 0x10\njal   SleepVProcess\n       NOP\nc.lt.s F22, F24\n      NOP\nbc1t  L80114728\n       NOP\njal   PlaySound\n li    A0, 330\nli    AT, 0x42DC0000 ; 110.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S1)\nc.lt.s F0, F2\n      NOP\n      NOP\nbc1f  L8011486C\n mov.s F4, F0\nli    AT, 0x40E00000 ; 7.000000\nmtc1  AT, F28\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F24\nsll   S0, S2, 0x10\nli    AT, 0x42DC0000 ; 110.000000\nmtc1  AT, F26\nadd.s F0, F4, F28\nL801147F4:\nswc1  F0, 0x30(S1)\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S1)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1f  L8011482C\n swc1  F0, 0x20(S1)\nsub.s F20, F20, F24\nL8011482C:\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n sra   A0, S0, 0x10\njal   SleepVProcess\n       NOP\nlwc1  F4, 0x30(S1)\nc.lt.s F4, F26\n      NOP\n      NOP\nbc1tl L801147F4\n add.s F0, F4, F28\nL8011486C:\nsw    R0, 0(S4)\nli    S3, -1\nsll   S0, S2, 0x10\nL80114878:\nlui   A0, hi(D_8011E490)\nlw    A0, lo(D_8011E490)(A0)\nbeq   A0, S3, L801148C0\n       NOP\njal   GetPlayerStruct\n       NOP\nlw    A1, 0x24(V0)\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n sra   A0, S0, 0x10\nL801148C0:\njal   SleepVProcess\n       NOP\nlw    V0, 0(S4)\nbeqz  V0, L80114878\n       NOP\njal   PlaySound\n li    A0, 331\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F24\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S1)\nc.lt.s F2, F0\n      NOP\n      NOP\nbc1f  L801149C0\n mov.s F4, F0\nli    S3, 0x3F800000 ; 1.000000\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F30\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F26\nsll   S0, S2, 0x10\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F28\nsub.s F0, F4, F24\nL8011492C:\nmtc1  S3, F6\n      NOP\nc.lt.s F6, F24\n      NOP\n      NOP\nbc1f  L8011494C\n swc1  F0, 0x30(S1)\nsub.s F24, F24, F30\nL8011494C:\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S1)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F26, F20\n      NOP\n      NOP\nbc1f  L80114980\n swc1  F0, 0x20(S1)\nsub.s F20, F20, F26\nL80114980:\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n sra   A0, S0, 0x10\njal   SleepVProcess\n       NOP\nlwc1  F4, 0x30(S1)\nc.lt.s F28, F4\n      NOP\n      NOP\nbc1tl L8011492C\n sub.s F0, F4, F24\nL801149C0:\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F24\nli    S3, 0x41700000 ; 15.000000\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F30\nli    AT, 0x3F000000 ; 0.500000\nmtc1  AT, F28\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F26\nsll   S0, S2, 0x10\nfunc_801149E8:\njal   0x8008EF20\n mov.s F12, F20\nneg.s F0, F0\nswc1  F0, 0x18(S1)\njal   0x8008E3F0\n mov.s F12, F20\nadd.s F20, F20, F22\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1f  L80114A1C\n swc1  F0, 0x20(S1)\nsub.s F20, F20, F24\nL80114A1C:\nmtc1  S3, F6\n      NOP\nc.lt.s F6, F22\n      NOP\n      NOP\nbc1fl L80114A3C\n sub.s F22, F22, F28\nsub.s F22, F22, F30\nL80114A3C:\nc.lt.s F22, F26\n      NOP\nbc1t  L80114A7C\n       NOP\nlwc1  F2, 0x10(S1)\nlwc1  F0, 0x30(S1)\nlw    A1, 0xc(S1)\nadd.s F0, F2, F0\nmfc1  A2, F0\nlw    A3, 0x14(S1)\njal   0x8000CFA4\n sra   A0, S0, 0x10\njal   SleepVProcess\n       NOP\nj     func_801149E8\n       NOP\nL80114A7C:\njal   0x8000D044\n move  A0, S2\nlui   A0, hi(D_80114590)\naddiu A0, A0, lo(D_80114590)\nli    A1, 18432\nmove  A2, R0\njal   InitProcess\n li    A3, 64\nmove  S0, V0\nlw    A0, 0x18(S0)\njal   0x800360F0\n li    A1, 32\nsw    V0, 0x8c(S0)\nsw    S5, 0(V0)\nsw    S1, 4(V0)\nsw    R0, 8(V0)\nsw    R0, 0xc(V0)\njal   SleepProcess\n li    A0, 3\nsw    R0, 0(S4)\njal   PlaySound\n li    A0, 589\nmove  S0, R0\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F20\nli    AT, 0x3D380000 ; 0.044922\nori AT, AT, 0x51eb\nmtc1  AT, F24\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F22\nadd.s F20, F20, F24\nL80114AFC:\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmfc1  A1, F20\nmul.s F6, F20, F22\nmfc1  A2, F6\n      NOP\njal   0x8001D558\n li    A3, 1\njal   SleepVProcess\n addiu S0, S0, 1\nslti  V0, S0, 0x14\nbnezl V0, L80114AFC\n add.s F20, F20, F24\njal   0x800D9B54\n move  A0, S1\njal   EndProcess\n move  A0, R0\nlw    RA, 0x28(SP)\nlw    S5, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F30, 0x58(SP)\nldc1  F28, 0x50(SP)\nldc1  F26, 0x48(SP)\nldc1  F24, 0x40(SP)\nldc1  F22, 0x38(SP)\nldc1  F20, 0x30(SP)\njr    RA\n addiu SP, SP, 0x60\n\ngame_guy_lucky_charm:\naddiu SP, SP, -0x68\nsw    RA, 0x50(SP)\nsw    S5, 0x4c(SP)\nsw    S4, 0x48(SP)\nsw    S3, 0x44(SP)\nsw    S2, 0x40(SP)\nsw    S1, 0x3c(SP)\nsw    S0, 0x38(SP)\nsdc1  F22, 0x60(SP)\nsdc1  F20, 0x58(SP)\nlui   S5, hi(CORE_800CD058)\njal   func_8010FE54\n addiu S5, S5, lo(CORE_800CD058)\nli    A0, -1\njal   PlayerHasItem\n li    A1, ITEM_LUCKY_CHARM\nlui   A0, hi(current_player_index)\nlb    A0, lo(current_player_index)(A0)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1) ; Clear the lucky charm item slot\nlui   A0, hi(current_player_index)\njal   FixUpPlayerItemSlots\n lb    A0, lo(current_player_index)(A0)\nlui   A0, hi(current_player_index)\njal   0x800F63F0\n lb    A0, lo(current_player_index)(A0)\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nli    A0, 62\njal   0x800D90C8\n move  A1, R0\nmove  S1, V0\nlw    V0, 0x3c(S1)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\njal   0x800D9714\n move  A0, S1\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\n      NOP\nswc1  F20, 0x30(S1)\njal   0x800D9B24\n move  A0, S1\nli    A0, 67\njal   0x800D90C8\n move  A1, R0\nmove  S0, V0\nlui   AT, hi(D_8011FB78)\nsw    S0, lo(D_8011FB78)(AT)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nlui   A1, 2\njal   0x8001C2FC\n lui   A2, 2\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001C448\n lh    A0, 0(V0)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001C954\n lh    A0, 0(V0)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\njal   0x8001C514\n lh    A0, 0(V0)\njal   GetPlayerStruct\n li    A0, -1\nlw    A1, 0x24(V0)\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 2\njal   0x8001C814\n li    A2, 1\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S0)\njal   PlaySound\n li    A0, 331\nlwc1  F0, 0x30(S0)\nc.lt.s F20, F0\n      NOP\n      NOP\nbc1f  L80114D58\n mov.s F2, F0\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\n      NOP\nsub.s F0, F2, F22\nL80114D38:\njal   SleepVProcess\n swc1  F0, 0x30(S0)\nlwc1  F2, 0x30(S0)\nc.lt.s F20, F2\n      NOP\n      NOP\nbc1tl L80114D38\n sub.s F0, F2, F22\nL80114D58:\nlui   V1, hi(p1_char)\naddiu V1, V1, lo(p1_char)\nlbu   A2, 0(V1)\nlbu   A3, 0x38(V1)\nlbu   V0, 0x70(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x10(SP)\nlbu   V0, 0xa8(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x5C00 ; "Who\'s your opponent?"\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage\n addiu A3, A3, 0x1c00\nmove  A0, R0\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n move  A1, R0\njal   0x800EC6C8\n move  S2, V0\njal   0x800EC6EC\n       NOP\nbltz  S2, L80114DE0\n slti  V0, S2, 4\nbnez  V0, L80114E04\n li    V0, 1\nli    V0, 4\nbne   S2, V0, L80114DE0\n       NOP\njal   0x800EF0D8\n move  A0, R0\nj     L80114E00\n move  S2, V0\nL80114DE0:\njal   func_80106FE8\n       NOP\nli    V0, 1\nlui   AT, hi(CORE_800CB99C)\njal   0x80049FB8\n sb    V0, lo(CORE_800CB99C)(AT)\nj     L80114D58\n       NOP\nL80114E00:\nli    V0, 1\nL80114E04:\nsw    V0, 0x20(SP)\nlui   A0, hi(D_80114650)\naddiu A0, A0, lo(D_80114650)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\naddiu V1, SP, 0x20\nsw    V1, 0x8c(V0)\nlw    V0, 0x20(SP)\nbeqz  V0, L80114E48\n       NOP\nL80114E34:\njal   SleepVProcess\n       NOP\nlw    V0, 0x20(SP)\nbnez  V0, L80114E34\n       NOP\nL80114E48:\nlb    V0, 0xf(S5)\nbeq   S2, V0, L80114EC8\n move  A0, R0\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 16\nlui   AT, hi(D_8011E490)\nsw    S2, lo(D_8011E490)(AT)\njal   0x800F915C\n li    A0, 2\njal   GetPlayerStruct\n move  A0, S2\nlw    A0, 0x24(V0)\njal   0x800F9174\n addiu A0, A0, 0xc\njal   GetPlayerStruct\n move  A0, S2\nlw    A0, 0x24(V0)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepVProcess\n       NOP\njal   SleepProcess\n li    A0, 10\nmove  A0, R0\njal   InitFadeIn\n li    A1, 16\njal   SleepProcess\n li    A0, 16\nj     L80114EDC\n li    V0, 1\nL80114EC8:\njal   SleepProcess\n li    A0, 30\nlui   AT, hi(D_8011E490)\nsw    S2, lo(D_8011E490)(AT)\nli    V0, 1\nL80114EDC:\nsw    V0, 0x20(SP)\nL80114EE0:\njal   SleepVProcess\n       NOP\nlw    V0, 0x20(SP)\nbnez  V0, L80114EE0\n       NOP\njal   GetPlayerStruct\n move  A0, S2\nlw    S3, 0x24(V0)\nlui   A1, 0x40a0\nlui   A2, 0x4000\njal   0x800EDB98\n move  A0, S1\nmove  S4, V0\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, S3, 0xc\njal   0x800D9A40\n move  A0, S1\nmtc1  R0, F0\n      NOP\nswc1  F0, 0x2c(S1)\nswc1  F0, 0x28(S1)\nswc1  F0, 0x24(S1)\nli    AT, 0x3E4C0000 ; 0.199219\nori AT, AT, 0xcccd\nmtc1  AT, F22\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nL80114F50:\nlwc1  F0, 0x2c(S1)\nadd.s F0, F0, F22\nswc1  F0, 0x2c(S1)\nswc1  F0, 0x28(S1)\njal   SleepVProcess\n swc1  F0, 0x24(S1)\nlwc1  F0, 0x24(S1)\nc.lt.s F0, F20\n      NOP\n      NOP\nbc1t  L80114F50\n sll   A0, S2, 0x10\nsra   A0, A0, 0x10\njal   0x800FF900\n li    A1, 4\njal   PlaySound\n li    A0, 673\nsll   V0, S2, 3\nsubu  V0, V0, S2\nsll   S0, V0, 3\nlui   V0, hi(p1_coins)\naddu  V0, V0, S0\nlh    V0, lo(p1_coins)(V0)\nbeqz  V0, L801150F4\n li    A1, 0x2F00 ; "It\'s time for a Game Guy Mini-Game! First I\'ll take all your coins"\nli    A0, 10\nli    A2, -1\njal   func_8010A3B8\n move  A3, S2\nlui   V0, hi(p1_coins)\naddu  V0, V0, S0\nlhu   V0, lo(p1_coins)(V0)\nlui   AT, hi(CORE_800D110E)\naddu  AT, AT, S0\nsh    V0, lo(CORE_800D110E)(AT)\nlui   A1, hi(p1_coins)\naddu  A1, A1, S0\nlh    A1, lo(p1_coins)(A1)\nmove  A0, S2\njal   ShowPlayerCoinChange\n subu  A1, R0, A1\nlui   A1, hi(p1_coins)\naddu  A1, A1, S0\nlh    A1, lo(p1_coins)(A1)\nmove  A0, S2\njal   AdjustPlayerCoinsGradual\n subu  A1, R0, A1\njal   SleepProcess\n li    A0, 30\nli    A0, 10\nli    A1, 0x2F02 ; "We\'re off to Game Guy\'s Game Room"\nli    A2, -1\njal   func_8010A3B8\n move  A3, S2\njal   EndProcess\n move  A0, S4\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S1)\nc.le.s F2, F0\n      NOP\n      NOP\nbc1f  L80115084\n mov.s F4, F0\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F22\nli    AT, 0x41200000 ; 10.000000\nmtc1  AT, F20\nsub.s F0, F4, F22\nL80115064:\njal   SleepVProcess\n swc1  F0, 0x30(S1)\nlwc1  F4, 0x30(S1)\nc.le.s F20, F4\n      NOP\n      NOP\nbc1tl L80115064\n sub.s F0, F4, F22\nL80115084:\njal   SleepProcess\n li    A0, 30\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S1)\nc.lt.s F0, F2\n      NOP\n      NOP\nbc1f  L801151B8\n mov.s F4, F0\nli    AT, 0x40800000 ; 4.000000\nmtc1  AT, F20\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F22\nadd.s F0, F4, F20\nL801150C0:\nswc1  F0, 0x30(S1)\nlwc1  F0, 0x30(S3)\nadd.s F0, F0, F20\njal   SleepVProcess\n swc1  F0, 0x30(S3)\nlwc1  F4, 0x30(S1)\nc.lt.s F4, F22\n      NOP\n      NOP\nbc1tl L801150C0\n add.s F0, F4, F20\nj     L801151BC\n sll   A0, S2, 0x10\nL801150F4:\nli    A0, 10\nli    A1, 12033\nli    A2, -1\njal   func_8010A3B8\n move  A3, S2\njal   EndProcess\n move  A0, S4\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S1)\nc.le.s F0, F2\n      NOP\n      NOP\nbc1f  L80115164\n mov.s F4, F0\nli    AT, 0x40800000 ; 4.000000\nmtc1  AT, F22\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F20\nadd.s F0, F4, F22\nL80115144:\njal   SleepVProcess\n swc1  F0, 0x30(S1)\nlwc1  F4, 0x30(S1)\nc.le.s F4, F20\n      NOP\n      NOP\nbc1tl L80115144\n add.s F0, F4, F22\nL80115164:\njal   0x800D9B54\n move  A0, S1\nli    A0, 9\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 17\njal   0x800F915C\n li    A0, 1\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepProcess\n li    A0, 5\nli    A0, 9\njal   InitFadeIn\n li    A1, 16\nj     L80115458\n li    A0, 17\nL801151B8:\nsll   A0, S2, 0x10\nL801151BC:\njal   PlayerIsCPU\n sra   A0, A0, 0x10\nbeqz  V0, L80115374\n       NOP\nlb    V0, 0x16(S5)\nbeqz  V0, L80115374\n li    A0, 9\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 17\njal   0x800D9B54\n move  A0, S1\nmove  A0, S3\nmove  A1, R0\njal   0x800EE688\n move  A2, A1\nsw    R0, 0x30(S3)\njal   SleepProcess\n li    A0, 5\nli    A0, 9\njal   InitFadeIn\n li    A1, 16\njal   SleepProcess\n li    A0, 17\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F12\njal   0x800EEF80\n       NOP\naddiu A0, V0, 1\nmove  V1, R0\nsll   V0, V1, 2\nL8011523C:\nlui   AT, hi(D_8011E49E)\naddu  AT, AT, V0\nlhu   V0, lo(D_8011E49E)(AT)\nslt   V0, V0, A0\nbeqz  V0, L80115264\n sll   V0, V1, 2\naddiu V1, V1, 1\nslti  V0, V1, 7\nbnez  V0, L8011523C\n sll   V0, V1, 2\nL80115264:\nlui   V1, hi(D_8011E49C)\naddu  V1, V1, V0\nlhu   V1, lo(D_8011E49C)(V1)\nbeqz  V1, L80115314\n sll   V0, S2, 3\nsubu  V0, V0, S2\nsll   V0, V0, 3\nlui   S1, hi(CORE_800D110E)\naddu  S1, S1, V0\nlh    S1, lo(CORE_800D110E)(S1)\nmult  S1, V1\nmflo  S1\nslti  V0, S1, 0x3e8\n      NOP\nbeql  V0, R0, L801152A4\n li    S1, 999\nL801152A4:\naddiu S0, SP, 0x28\nmove  A0, S0\nlui   A1, hi(percent_d_str_format)\naddiu A1, A1, lo(percent_d_str_format)\njal   sprintf\n move  A2, S1\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x2F03 ; "Wow you earned X coins playing my Mini-Game!"\nmove  A2, S0\njal   0x800EC8EC ; ShowMessage\n move  A3, R0\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\nmove  A0, S2\njal   ShowPlayerCoinChange\n move  A1, S1\nmove  A0, S2\njal   AdjustPlayerCoinsGradual\n move  A1, S1\njal   SleepProcess\n li    A0, 20\nj     L80115320\n       NOP\nL80115314:\nli    A0, -1\njal   0x800EC590\n li    A1, 12036\nL80115320:\njal   SleepProcess\n li    A0, 10\nli    A0, 9\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 17\njal   0x800F915C\n li    A0, 1\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepProcess\n li    A0, 5\nli    A0, 9\njal   InitFadeIn\n li    A1, 16\nj     L80115458\n li    A0, 17\nL80115374:\nlb    A0, 0xf(S5)\njal   0x800DEB2C\n       NOP\nli    V1, 3\nbne   V0, V1, L8011539C\n       NOP\njal   0x80035FDC\n li    A0, 23\nj     L801153A8\n move  V1, R0\nL8011539C:\njal   0x8003602C\n li    A0, 23\nmove  V1, R0\nL801153A8:\nli    A0, 1\nsll   V0, V1, 3\nL801153B0:\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(player_structs)\naddu  AT, AT, V0\nsb    A0, lo(player_structs)(AT)\naddiu V1, V1, 1\nslti  V0, V1, 4\nbnez  V0, L801153B0\n sll   V0, V1, 3\njal   GetPlayerStruct\n move  A0, S2\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F12\n      NOP\njal   0x800EEF80\n sb    R0, 0(V0)\nmove  A0, V0\nmove  V1, R0\nL801153F8:\nlui   V0, hi(D_8011E498)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E498)(V0)\nslt   V0, A0, V0\nbnez  V0, L80115420\n li    V0, 3\naddiu V1, V1, 1\nsltiu V0, V1, 3\nbnez  V0, L801153F8\n li    V0, 3\nL80115420:\nbeql  V1, V0, L80115428\n li    V1, 2\nL80115428:\nlui   V0, hi(D_8011E494)\naddu  V0, V0, V1\nlbu   V0, lo(D_8011E494)(V0)\nsb    V0, 0x10(S5)\nlui   AT, hi(CORE_800CD0B2)\njal   0x800FC998\n sh    S2, lo(CORE_800CD0B2)(AT)\njal   0x8004A0E0\n       NOP\njal   0x800FF7F0\n li    A0, 2\nli    A0, -1\nL80115458:\njal   SleepProcess\n       NOP\nlw    RA, 0x50(SP)\nlw    S5, 0x4c(SP)\nlw    S4, 0x48(SP)\nlw    S3, 0x44(SP)\nlw    S2, 0x40(SP)\nlw    S1, 0x3c(SP)\nlw    S0, 0x38(SP)\nldc1  F22, 0x60(SP)\nldc1  F20, 0x58(SP)\njr    RA\n addiu SP, SP, 0x68\n\nfunc_8011548C:\naddiu SP, SP, -0x40\nsw    RA, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nsdc1  F22, 0x38(SP)\nsdc1  F20, 0x30(SP)\nmove  S2, A0\nmove  S0, A1\nmove  S1, A2\nsll   A0, S2, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\naddiu A2, SP, 0x10\njal   0x800F6748\n addiu A3, SP, 0x14\nlwc1  F2, 0(S1)\nlwc1  F0, 0x10(SP)\nsub.s F22, F2, F0\nmtc1  S0, F4\n      NOP\ncvt.s.w F4, F4\ndiv.s F22, F22, F4\nlwc1  F2, 4(S1)\nlwc1  F0, 0x14(SP)\nsub.s F20, F2, F0\nbeqz  S0, L80115560\n div.s F20, F20, F4\nsll   S3, S2, 0x10\nL80115504:\nlwc1  F2, 0x10(SP)\nadd.s F2, F22, F2\nswc1  F2, 0x10(SP)\nlwc1  F0, 0x14(SP)\nadd.s F0, F20, F0\nswc1  F0, 0x14(SP)\ntrunc.w.s F4, F2\nmfc1  A2, F4\n      NOP\nsll   A2, A2, 0x10\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nsra   A0, S3, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\njal   SleepVProcess\n addiu S0, S0, -1\nbnez  S0, L80115504\n       NOP\nL80115560:\nsll   A0, S2, 0x10\nlwc1  F0, 0(S1)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlwc1  F0, 4(S1)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nsra   A0, A0, 0x10\nmove  A1, R0\nsra   A2, A2, 0x10\njal   0x80054904\n sra   A3, A3, 0x10\nlw    RA, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\nldc1  F22, 0x38(SP)\nldc1  F20, 0x30(SP)\njr    RA\n addiu SP, SP, 0x40\n\nfunc_801155C4:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\njal   0x8004EE68\n sw    S0, 0x10(SP)\nlw    S1, 0x8c(V0)\nbeqz  S1, L80115604\n li    S3, 10\nli    V0, 1\nbeq   S1, V0, L8011562C\n sll   V0, S1, 2\nj     L80115650\n move  A1, R0\nL80115604:\nsll   V0, S1, 2\nlui   A0, hi(D_8011FB82)\naddu  A0, A0, V0\nlh    A0, lo(D_8011FB82)(A0)\nmove  A1, R0\nli    A2, 177\njal   0x80054904\n li    A3, 44\nj     L80115670\n sll   V0, S1, 2\nL8011562C:\nlui   A0, hi(D_8011FB82)\naddu  A0, A0, V0\nlh    A0, lo(D_8011FB82)(A0)\nmove  A1, R0\nli    A2, 122\njal   0x80054904\n li    A3, 57\nj     L80115670\n sll   V0, S1, 2\nL80115650:\nlui   A0, hi(D_8011FB82)\naddu  A0, A0, V0\nlh    A0, lo(D_8011FB82)(A0)\nli    A2, 160\njal   0x80054904\n li    A3, 152\nli    S3, 30\nsll   V0, S1, 2\nL80115670:\nlui   A0, hi(D_8011FB82)\naddu  A0, A0, V0\nlh    A0, lo(D_8011FB82)(A0)\nmove  A1, R0\njal   0x8005532C\n li    A2, 32768\nmove  S0, R0\nlui   V1, hi(D_8011FB80)\naddiu V1, V1, lo(D_8011FB80)\nsll   V0, S1, 2\naddu  S4, V0, V1\nli    S2, 255\nL801156A0:\nlh    A0, 2(S4)\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n       NOP\ndiv   S2, S3\nbnez  S3, L801156C8\n       NOP\n.word 0x0007000D ; break 7\nL801156C8:\nli    AT, -1\nbne   S3, AT, L801156E0\n lui   AT, 0x8000\nbne   S2, AT, L801156E0\n       NOP\n.word 0x0006000D; break 6\nL801156E0:\nmflo  V0\naddu  S0, S0, V0\nslti  V0, S0, 0xff\nbnez  V0, L801156A0\n sll   V0, S1, 2\nlui   A0, hi(D_8011FB82)\naddu  A0, A0, V0\nlh    A0, lo(D_8011FB82)(A0)\nmove  A1, R0\njal   0x80055458\n li    A2, 255\njal   EndProcess\n move  A0, R0\nlw    RA, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\nfunc_80115734:\naddiu SP, SP, -0x48\nsw    RA, 0x44(SP)\nsw    S2, 0x40(SP)\nsw    S1, 0x3c(SP)\nsw    S0, 0x38(SP)\nmove  S1, R0\nlui S2, 0x8888\nori S2, S2, 0x8889\nsll   V0, S1, 1\nL80115758:\naddu  V0, V0, S1\nlui   V1, hi(D_8011E4B8)\naddu  V1, V1, V0\nlbu   V1, lo(D_8011E4B8)(V1)\nsw    V1, 0x18(SP)\nlui   A1, hi(D_8011E4B9)\naddu  A1, A1, V0\nlbu   A1, lo(D_8011E4B9)(A1)\nsw    A1, 0x1c(SP)\nlui   A2, hi(D_8011E4BA)\naddu  A2, A2, V0\nlbu   A2, lo(D_8011E4BA)(A2)\nsw    A2, 0x20(SP)\naddiu V0, S1, 1\nsll   A0, V0, 1\naddu  A0, A0, V0\nlui   V0, hi(D_8011E4B8)\naddu  V0, V0, A0\nlbu   V0, lo(D_8011E4B8)(V0)\nsubu  V0, V0, V1\nmult  V0, S2\nmfhi  T0\naddu  V1, T0, V0\nsra   V1, V1, 4\nsra   V0, V0, 0x1f\nsubu  V1, V1, V0\nsw    V1, 0x28(SP)\nlui   V0, hi(D_8011E4B9)\naddu  V0, V0, A0\nlbu   V0, lo(D_8011E4B9)(V0)\nsubu  V0, V0, A1\nmult  V0, S2\nmfhi  T0\naddu  V1, T0, V0\nsra   V1, V1, 4\nsra   V0, V0, 0x1f\nsubu  V1, V1, V0\nsw    V1, 0x2c(SP)\nlui   V0, hi(D_8011E4BA)\naddu  V0, V0, A0\nlbu   V0, lo(D_8011E4BA)(V0)\nsubu  V0, V0, A2\nmult  V0, S2\nmfhi  T0\naddu  V1, T0, V0\nsra   V1, V1, 4\nsra   V0, V0, 0x1f\nsubu  V1, V1, V0\nsw    V1, 0x30(SP)\nmove  S0, R0\nL80115820:\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nlbu   A2, 0x1b(SP)\nlbu   A3, 0x1f(SP)\nlbu   V0, 0x23(SP)\nsw    V0, 0x10(SP)\njal   0x80055420\n move  A1, R0\nlw    V0, 0x18(SP)\nlw    V1, 0x28(SP)\naddu  V0, V0, V1\nsw    V0, 0x18(SP)\nlw    V0, 0x1c(SP)\nlw    V1, 0x2c(SP)\naddu  V0, V0, V1\nsw    V0, 0x1c(SP)\nlw    V0, 0x20(SP)\nlw    V1, 0x30(SP)\naddu  V0, V0, V1\njal   SleepVProcess\n sw    V0, 0x20(SP)\naddiu S0, S0, 1\nslti  V0, S0, 0x1e\nbnez  V0, L80115820\n       NOP\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\naddiu S0, S1, 1\nsll   V0, S0, 1\naddu  V0, V0, S0\nlui   A2, hi(D_8011E4B8)\naddu  A2, A2, V0\nlbu   A2, lo(D_8011E4B8)(A2)\nlui   A3, hi(D_8011E4B9)\naddu  A3, A3, V0\nlbu   A3, lo(D_8011E4B9)(A3)\nlui   AT, hi(D_8011E4BA)\naddu  AT, AT, V0\nlbu   V0, lo(D_8011E4BA)(AT)\nsw    V0, 0x10(SP)\njal   0x80055420\n move  A1, R0\njal   SleepProcess\n li    A0, 10\nmove  S1, S0\nblez  S1, L80115758\n sll   V0, S1, 1\njal   EndProcess\n move  A0, R0\nlw    RA, 0x44(SP)\nlw    S2, 0x40(SP)\nlw    S1, 0x3c(SP)\nlw    S0, 0x38(SP)\njr    RA\n addiu SP, SP, 0x48\n\nD_801158FC:\naddiu SP, SP, -0x48\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F28, 0x40(SP)\nsdc1  F26, 0x38(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\njal   0x8004EE68\n sdc1  F20, 0x20(SP)\nlw    S1, 0x8c(V0)\njal   PlaySound\n li    A0, 323\nlui   S0, hi(D_8011FB90)\nlw    S0, lo(D_8011FB90)(S0)\njal   0x800D9A40\n move  A0, S0\nmtc1  R0, F22\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F970)\nldc1  F24, lo(D_8011F970)(AT)\nli    AT, 0x41900000 ; 18.000000\nmtc1  AT, F26\nL80115968:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nadd.d F0, F0, F24\ncvt.s.d F20, F0\nc.lt.s F20, F26\n      NOP\n      NOP\nbc1t  L80115968\n li    V0, 1\nlw    V1, 0(S1)\nbeq   V1, V0, L80115A3C\n       NOP\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F24\nli    S2, 1\nL801159F4:\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F24\nlw    V0, 0(S1)\nbne   V0, S2, L801159F4\n       NOP\nL80115A3C:\nli    AT, 0x42200000 ; 40.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F20, F0\n      NOP\nbc1f  L80115AE0\n       NOP\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F28\nlui   AT, hi(D_8011F978)\nldc1  F24, lo(D_8011F978)(AT)\nli    AT, 0x42200000 ; 40.000000\nmtc1  AT, F26\nL80115A70:\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, S0, 0x24\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F28\ncvt.d.s F0, F20\nadd.d F0, F0, F24\ncvt.s.d F20, F0\nc.lt.s F20, F26\n      NOP\nbc1t  L80115A70\n       NOP\nL80115AE0:\nlw    V1, 0(S1)\nli    V0, 2\nbeq   V1, V0, L80115B44\n       NOP\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F20\nli    S2, 2\nL80115AFC:\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    V0, 0(V0)\nsll   A0, V0, 1\naddu  A0, A0, V0\nsll   A0, A0, 6\nlui   V0, hi(CORE_800D03F8)\nlw    V0, lo(CORE_800D03F8)(V0)\naddu  A0, A0, V0\nmfc1  A1, F22\n      NOP\njal   0x8008A430\n addiu A0, A0, 0x74\njal   SleepVProcess\n add.s F22, F22, F20\nlw    V0, 0(S1)\nbne   V0, S2, L80115AFC\n       NOP\nL80115B44:\njal   0x800D9B54\n move  A0, S0\njal   EndProcess\n move  A0, R0\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F28, 0x40(SP)\nldc1  F26, 0x38(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x48\n\nD_80115B80:\naddiu SP, SP, -0x98\nsw    RA, 0x68(SP)\nsw    S7, 0x64(SP)\nsw    S6, 0x60(SP)\nsw    S5, 0x5c(SP)\nsw    S4, 0x58(SP)\nsw    S3, 0x54(SP)\nsw    S2, 0x50(SP)\nsw    S1, 0x4c(SP)\nsw    S0, 0x48(SP)\nsdc1  F28, 0x90(SP)\nsdc1  F26, 0x88(SP)\nsdc1  F24, 0x80(SP)\nsdc1  F22, 0x78(SP)\nsdc1  F20, 0x70(SP)\nlui   S5, hi(CORE_800CD058)\naddiu S5, S5, lo(CORE_800CD058)\nli    A0, 1\njal   0x8005279C\n move  A1, R0\nsll   V0, V0, 0x10\nlui   A0, hi(CORE_801019C4)\nlw    A0, lo(CORE_801019C4)(A0)\njal   ReadMainFS\n sra   S4, V0, 0x10\nmove  S2, V0\njal   ImgPackParse\n move  A0, S2\nsll   V0, V0, 0x10\nsra   S7, V0, 0x10\njal   FreeMainFS\n move  A0, S2\nmove  S0, S4\nmove  A0, S0\nmove  A1, R0\nmove  A2, S7\njal   0x80055024\n move  A3, R0\nmove  A0, S0\nmove  A1, R0\njal   0x80055294\n li    A2, 18294\nmove  A0, S0\nmove  A1, R0\njal   0x800553A8\n li    A2, 4096\nmove  S3, R0\nlui   S6, hi(D_8011FB80)\naddiu S6, S6, lo(D_8011FB80)\nli    A0, 1\nL80115C48:\njal   0x8005279C\n move  A1, R0\nsll   S0, S3, 2\naddu  S1, S0, S6\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0(S1)\naddiu V0, S3, 0x1bb\nlui   A0, 0x13\njal   ReadMainFS\n or    A0, V0, A0\nmove  S2, V0\njal   ImgPackParse\n move  A0, S2\naddiu V1, SP, 0x18\naddu  S0, S0, V1\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0(S0)\njal   FreeMainFS\n move  A0, S2\nlh    A0, 2(S1)\nmove  A1, R0\nlh    A2, 2(S0)\njal   0x80055024\n move  A3, R0\nlh    A0, 2(S1)\nmove  A1, R0\njal   0x80055294\n li    A2, 18304\nlh    A0, 2(S1)\nmove  A1, R0\njal   0x800553A8\n li    A2, 38924\nlh    A0, 2(S1)\nmove  A1, R0\njal   0x80055458\n move  A2, R0\nlh    A0, 2(S1)\nsw    R0, 0x10(SP)\nmove  A1, R0\nli    A2, 255\njal   0x80055420\n li    A3, 255\naddiu S3, S3, 1\nslti  V0, S3, 4\nbnezl V0, L80115C48\n li    A0, 1\nli    A0, 70\njal   0x800D90C8\n move  A1, R0\nmove  S0, V0\nlui   AT, hi(D_8011FB90)\nsw    S0, lo(D_8011FB90)(AT)\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 384\njal   0x8001C258\n move  A2, R0\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001C8E4\n li    A1, 0x1800\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\njal   0x8001C448\n move  S1, S4\nlw    V0, 0x3c(S0)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\njal   GetPlayerStruct\n li    A0, -1\nlw    A1, 0x24(V0)\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\njal   0x800D9714\n move  A0, S0\njal   0x800D9B24\n move  A0, S0\nlui   A0, hi(CORE_8010570C)\nlh    A0, lo(CORE_8010570C)(A0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 0x8000\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S5)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S5)\nmove  A1, V0\naddiu A2, SP, 0x30\njal   0x800F6E4C\n addiu A3, SP, 0x34\nmove  A0, S1\nlh    A2, 0x32(SP)\nlh    A3, 0x36(SP)\njal   0x80054904\n move  A1, R0\nli    AT, 0x43200000 ; 160.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x28(SP)\nli    AT, 0x42980000 ; 76.000000\nmtc1  AT, F20\n      NOP\nswc1  F20, 0x2c(SP)\njal   PlaySound\n li    A0, 325\naddiu S0, SP, 0x28\nmove  A0, S4\nli    A1, 30\njal   func_8011548C\n move  A2, S0\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S5)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S5)\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\njal   SleepProcess\n li    A0, 30\nli    AT, 0x434B0000 ; 203.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x28(SP)\nli    AT, 0x42300000 ; 44.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x2c(SP)\nmove  A0, S4\nli    A1, 10\njal   func_8011548C\n move  A2, S0\nlui   A0, hi(func_801155C4)\naddiu A0, A0, lo(func_801155C4)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S2, V0\njal   0x8004EE68\n sw    R0, 0x8c(S2)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S2\nlwc1  F0, 0x28(SP)\nsub.s F0, F0, F20\nswc1  F0, 0x28(SP)\njal   PlaySound\n li    A0, 333\nmove  A0, S4\nli    A1, 10\njal   func_8011548C\n move  A2, S0\njal   0x8004EE18\n       NOP\njal   SleepProcess\n li    A0, 10\nlui   A0, hi(func_801155C4)\naddiu A0, A0, lo(func_801155C4)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S2, V0\nli    V0, 1\njal   0x8004EE68\n sw    V0, 0x8c(S2)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S2\nlwc1  F0, 0x2c(SP)\nli    AT, 0x42800000 ; 64.000000\nmtc1  AT, F2\n      NOP\nadd.s F0, F0, F2\nswc1  F0, 0x2c(SP)\njal   PlaySound\n li    A0, 333\nmove  A0, S4\nli    A1, 10\njal   func_8011548C\n move  A2, S0\njal   0x8004EE18\n       NOP\njal   SleepProcess\n li    A0, 10\njal   PlaySound\n li    A0, 334\nmove  A0, S1\nmove  A1, R0\naddiu A2, SP, 0x38\njal   0x800F6748\n addiu A3, SP, 0x3c\nmtc1  R0, F20\nmove  S1, R0\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F22\nadd.s F0, F20, F20\nL80115FCC:\nli    AT, 0x43870000 ; 270.000000\nmtc1  AT, F12\n      NOP\njal   0x8008E3F0\n add.s F12, F0, F12\nli    AT, 0x42A00000 ; 80.000000\nmtc1  AT, F2\n      NOP\nmul.s F0, F0, F2\nlwc1  F2, 0x38(SP)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  S0, F2\n      NOP\nsll   S0, S0, 0x10\nsra   S0, S0, 0x10\njal   0x8008E3F0\n mov.s F12, F20\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\nsub.s F2, F2, F0\nmul.s F2, F2, F22\nlwc1  F0, 0x3c(SP)\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S4\nmove  A1, R0\nmove  A2, S0\njal   0x80054904\n sra   A3, A3, 0x10\nli    AT, 0x42580000 ; 54.000000\nmtc1  AT, F0\n      NOP\nc.lt.s F0, F20\n      NOP\n      NOP\nbc1t  L80116078\n li    V1, 1\nmove  V1, R0\nL80116078:\nsltiu V0, S1, 1\nand   V0, V1, V0\nbeqz  V0, L801160BC\n li    A1, 16386\nli    S1, 1\nlui   A0, hi(func_801155C4)\naddiu A0, A0, lo(func_801155C4)\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  S2, V0\nli    V0, 2\njal   0x8004EE68\n sw    V0, 0x8c(S2)\nmove  A0, V0\njal   0x8004ED30\n move  A1, S2\nL801160BC:\njal   SleepVProcess\n       NOP\nli   AT, 0x40660000 ; 3.593750\nori  AT, AT, 0x6666\nmtc1 AT, F0\n      NOP\nadd.s F20, F20, F0\nc.lt.s F20, F22\n      NOP\n      NOP\nbc1tl L80115FCC\n add.s F0, F20, F20\nli    AT, 0x43E10000 ; 450.000000\nmtc1  AT, F12\n      NOP\njal   0x8008E3F0\n sll   S1, S4, 0x10\nli    AT, 0x42A00000 ; 80.000000\nmtc1  AT, F2\n      NOP\nmul.s F0, F0, F2\nlwc1  F2, 0x38(SP)\nadd.s F0, F0, F2\ntrunc.w.s F2, F0\nmfc1  S0, F2\n      NOP\nsll   S0, S0, 0x10\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F12\n      NOP\njal   0x8008E3F0\n sra   S0, S0, 0x10\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F2\n      NOP\nsub.s F2, F2, F0\nli    AT, 0x42B40000 ; 90.000000\nmtc1  AT, F0\n      NOP\nmul.s F2, F2, F0\nlwc1  F0, 0x3c(SP)\nadd.s F2, F2, F0\ntrunc.w.s F0, F2\nmfc1  A3, F0\n      NOP\nsll   A3, A3, 0x10\nmove  A0, S4\nmove  A1, R0\nmove  A2, S0\njal   0x80054904\n sra   A3, A3, 0x10\nli    S0, 255\nsra   A0, S1, 0x10\nL80116190:\nmove  A1, R0\njal   0x80055458\n andi  A2, S0, 0xffff\njal   SleepVProcess\n addiu S0, S0, -0x19\nbgtz  S0, L80116190\n sra   A0, S1, 0x10\njal   0x800525C8\n move  A0, S4\njal   FreeGraphics\n move  A0, S7\njal   0x8004EE18\n move  S3, R0\nlui   S0, hi(D_8011FB80)\naddiu S0, S0, lo(D_8011FB80)\nsll   V0, S3, 2\nL801161D0:\naddu  V0, V0, S0\nlh    A0, 2(V0)\nmove  A1, R0\njal   0x800553A8\n li    A2, 32768\naddiu S3, S3, 1\nslti  V0, S3, 3\nbnez  V0, L801161D0\n sll   V0, S3, 2\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nmove  A1, R0\njal   0x8005532C\n li    A2, 32768\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nmove  A1, R0\njal   0x80055458\n li    A2, 255\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nmove  A1, R0\nli    A2, 160\njal   0x80054904\n li    A3, 120\njal   0x8004EE68\n move  S3, R0\nmove  S0, V0\nlui   A0, hi(func_80115734)\naddiu A0, A0, lo(func_80115734)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\nsw    R0, 0x40(SP)\nlui   A0, hi(D_801158FC)\naddiu A0, A0, lo(D_801158FC)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\naddiu V1, SP, 0x40\njal   0x8004EE18\n sw    V1, 0x8c(V0)\njal   PlaySound\n li    A0, 335\nli    A0, -1\nli    A1, 4\njal   0x800FFA4C\n li    A2, 5\nmove  S1, V0\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F28\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F24\nli    AT, 0x40400000 ; 3.000000\nmtc1  AT, F26\nli    S0, 1\nL801162C4:\nmtc1  S3, F22\n      NOP\ncvt.s.w F22, F22\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F20, F0, F28\nadd.s F20, F20, F24\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F0, F0, F26\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nmfc1  A2, F20\nadd.s F0, F0, F24\nmfc1  A3, F0\n      NOP\njal   0x800551D8\n move  A1, R0\nslti  V0, S3, 0x5a1\nbeql  V0, R0, L80116318\n sw    S0, 0x40(SP)\nL80116318:\njal   SleepVProcess\n addiu S3, S3, 0x32\nslti  V0, S3, 0xb41\nbnez  V0, L801162C4\n       NOP\njal   PlaySound\n li    A0, 297\nli    A0, 255\nli    A1, 255\njal   0x800620C8\n li    A2, 255\nli    A0, 11\njal   InitFadeOut\n li    A1, 50\njal   0x800FFAEC\n move  A0, S1\nmtc1  R0, F20\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F22\nfunc_80116368:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L801163A4\n       NOP\nlui   A0, hi(D_8011FB8E)\nlh    A0, lo(D_8011FB8E)(A0)\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x800551D8\n move  A1, R0\njal   SleepVProcess\n       NOP\nj     func_80116368\n add.s F20, F20, F22\nL801163A4:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L801163C4\n li    V0, 2\njal   SleepVProcess\n       NOP\nj     L801163A4\n       NOP\nL801163C4:\nsw    V0, 0x40(SP)\nmove  S3, R0\nlui   S2, hi(D_8011FB80)\naddiu S2, S2, lo(D_8011FB80)\naddiu S1, SP, 0x18\nsll   S0, S3, 2\nL801163DC:\naddu  V0, S0, S2\nlh    A0, 2(V0)\njal   0x800525C8\n addu  S0, S0, S1\nlh    A0, 2(S0)\njal   FreeGraphics\n addiu S3, S3, 1\nslti  V0, S3, 4\nbnez  V0, L801163DC\n sll   S0, S3, 2\nli    A0, 11\njal   InitFadeIn\n li    A1, 90\nL80116410:\njal   GetFadeStatus\n       NOP\nbeqz  V0, L80116430\n       NOP\njal   SleepVProcess\n       NOP\nj     L80116410\n       NOP\nL80116430:\njal   0x800EC414\n li    A0, 14883\nli    V0, 2\nlui   AT, hi(CORE_800CD0AA)\nsh    V0, lo(CORE_800CD0AA)(AT)\nlw    RA, 0x68(SP)\nlw    S7, 0x64(SP)\nlw    S6, 0x60(SP)\nlw    S5, 0x5c(SP)\nlw    S4, 0x58(SP)\nlw    S3, 0x54(SP)\nlw    S2, 0x50(SP)\nlw    S1, 0x4c(SP)\nlw    S0, 0x48(SP)\nldc1  F28, 0x90(SP)\nldc1  F26, 0x88(SP)\nldc1  F24, 0x80(SP)\nldc1  F22, 0x78(SP)\nldc1  F20, 0x70(SP)\njr    RA\n addiu SP, SP, 0x98\n\nfunc_8011667C:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S1, A0\nlui   V1, hi(D_8011FBA8)\naddiu V1, V1, lo(D_8011FBA8)\nsll   V0, S1, 2\naddu  S0, V0, V1\nlw    A0, 0(S0)\nbeqz  A0, L801166B8\n       NOP\njal   0x800479AC\n       NOP\nsw    R0, 0(S0)\nL801166B8:\nlui   V1, hi(D_8011FB98)\naddiu V1, V1, lo(D_8011FB98)\nsll   V0, S1, 2\naddu  S0, V0, V1\nlw    A0, 0(S0)\nbeqz  A0, L801166E0\n       NOP\njal   0x800D9B54\n       NOP\nsw    R0, 0(S0)\nL801166E0:\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nD_801166F4:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, R0\nlui   S2, hi(D_8011FBA8)\naddiu S2, S2, lo(D_8011FBA8)\nsll   V0, S0, 2\nL80116718:\naddu  S1, V0, S2\nlw    A0, 0(S1)\nbeqz  A0, L80116734\n addiu S0, S0, 1\njal   0x800479AC\n       NOP\nsw    R0, 0(S1)\nL80116734:\nslti  V0, S0, 4\nbnez  V0, L80116718\n sll   V0, S0, 2\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nD_80116758:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, A0\nlw    S1, 0x4c(S0)\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nli    V0, 4\nbne   V1, V0, L801167BC\n       NOP\nlw    V0, 0x54(S0)\nbnez  V0, L801167BC\n       NOP\nlw    V0, 0x50(S0)\nbnez  V0, L801167AC\n addiu V0, V0, -1\nli    V0, 40\nj     L801168EC\n sw    V0, 0x50(S0)\nL801167AC:\nbnez  V0, L801168EC\n sw    V0, 0x50(S0)\nli    V0, 1\nsw    V0, 0x54(S0)\nL801167BC:\njal   GetPlayerStruct\n move  A0, S1\nmove  S2, V0\nsll   V0, S1, 2\nlui   S1, hi(D_8011FB98)\naddu  S1, S1, V0\nlw    S1, lo(D_8011FB98)(S1)\nlw    A1, 0x24(S2)\naddiu A0, S1, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlw    V0, 0x24(S2)\nlwc1  F0, 0x30(V0)\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F2\n      NOP\nadd.s F0, F0, F2\nswc1  F0, 0x30(S1)\nlw    A1, 0x24(S2)\naddiu A0, S1, 0x18\njal   0x80089A20\n addiu A1, A1, 0x18\nlwc1  F12, 0x24(S0)\njal   0x8008EF20\n       NOP\nlwc1  F2, 0x18(S0)\nmul.s F0, F0, F2\nlwc1  F2, 0xc(S1)\nadd.s F0, F0, F2\nswc1  F0, 0xc(S1)\njal   0x8008E3F0\n lwc1  F12, 0x24(S0)\nlwc1  F2, 0x18(S0)\nmul.s F0, F0, F2\nlwc1  F2, 0x14(S1)\nadd.s F0, F0, F2\nswc1  F0, 0x14(S1)\nlwc1  F2, 0x24(S0)\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F0\n      NOP\nadd.s F0, F2, F0\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F2\n      NOP\nc.le.s F2, F0\n      NOP\n      NOP\nbc1f  L8011688C\n swc1  F0, 0x24(S0)\nsub.s F0, F0, F2\nswc1  F0, 0x24(S0)\nL8011688C:\nlwc1  F2, 0x18(S0)\nli    AT, 0x40A00000 ; 5.000000\nmtc1  AT, F0\n      NOP\nc.le.s F2, F0\n      NOP\nbc1f  L801168C0\n       NOP\nli    AT, 0x3E800000 ; 0.250000\nmtc1  AT, F0\n      NOP\nadd.s F0, F2, F0\nswc1  F0, 0x18(S0)\nL801168C0:\nlw    V0, 0x24(S2)\nlhu   V0, 0xa(V0)\nandi  V0, V0, 8\nbeqz  V0, L801168E4\n       NOP\njal   0x800D9A40\n move  A0, S1\nj     L801168EC\n       NOP\nL801168E4:\njal   0x800D9B24\n move  A0, S1\nL801168EC:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_80116904:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S1, A0\njal   GetPlayerStruct\n move  S0, A1\nmove  S2, V0\nsll   V0, S1, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbnez  V0, L801169DC\n sll   V0, S1, 2\nli    V0, 1\nbeq   S0, V0, L80116974\n slti  V0, S0, 2\nbeql  V0, R0, L80116964\n li    V0, 2\nbeqz  S0, L80116978\n li    A0, 63\nj     L80116978\n li    A0, 66\nL80116964:\nbeq   S0, V0, L80116978\n li    A0, 65\nj     L80116978\n li    A0, 66\nL80116974:\nli    A0, 64\nL80116978:\nandi  A0, A0, 0xff\njal   0x800D90C8\n move  A1, R0\nmove  S0, V0\njal   0x800D9714\n move  A0, S0\nsll   V0, S1, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nsw    S0, lo(D_8011FB98)(AT)\nlhu   V0, 0xa(S0)\nori   V0, V0, 2\nsh    V0, 0xa(S0)\nlw    A1, 0x24(S2)\naddiu A0, S0, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nli    AT, 0x41A00000 ; 20.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S0)\njal   0x800ECC0C\n addiu A0, S0, 0x18\nj     L801169EC\n       NOP\nL801169DC:\nlui   A0, hi(D_8011FB98)\naddu  A0, A0, V0\njal   0x800D9A40\n lw    A0, lo(D_8011FB98)(A0)\nL801169EC:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_80116A04:\naddiu SP, SP, -0x28\nsw    RA, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nmove  S1, A0\nlui   V0, hi(D_80116758)\naddiu V0, V0, lo(D_80116758)\nsw    V0, 0x10(SP)\nli    A0, 16383\nmove  A1, R0\nmove  A2, R0\njal   0x80047620\n li    A3, -1\nlui   V1, hi(D_8011FBA8)\naddiu V1, V1, lo(D_8011FBA8)\nsll   S0, S1, 2\naddu  S0, S0, V1\nsw    V0, 0(S0)\nsw    S1, 0x4c(V0)\nlw    V0, 0(S0)\nsw    R0, 0x50(V0)\nlw    V0, 0(S0)\nli    AT, 0x43B40000 ; 360.000000\nmtc1  AT, F12\n      NOP\njal   0x800EEF80\n sw    R0, 0x54(V0)\nlw    V1, 0(S0)\nmtc1  V0, F0\n      NOP\ncvt.s.w F0, F0\nswc1  F0, 0x24(V1)\nlw    V0, 0(S0)\nsw    R0, 0x18(V0)\nlw    RA, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x28\n\nfunc_80116AA0:\naddiu SP, SP, -0x28\nsw    RA, 0x24(SP)\nsw    S4, 0x20(SP)\nsw    S3, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, R0\nlui   S4, hi(D_8011FBA8)\naddiu S4, S4, lo(D_8011FBA8)\nlui   S3, hi(D_8011FB98)\naddiu S3, S3, lo(D_8011FB98)\nli    S2, -1\nsll   V1, S0, 2\nL80116AD8:\naddu  V0, V1, S4\nsw    R0, 0(V0)\naddu  V1, V1, S3\nsw    R0, 0(V1)\njal   GetPlayerStruct\n move  A0, S0\nlbu   V0, 0x17(V0)\nandi  V0, V0, 2\nsltiu V0, V0, 1\nsubu  S1, R0, V0\njal   GetPlayerStruct\n move  A0, S0\nlbu   V0, 0x17(V0)\nandi  V0, V0, 4\nbnezl V0, L80116B18\n li    S1, 1\nL80116B18:\njal   GetPlayerStruct\n move  A0, S0\nlbu   V0, 0x17(V0)\nandi  V0, V0, 0x20\nbnezl V0, L80116B30\n li    S1, 2\nL80116B30:\njal   GetPlayerStruct\n move  A0, S0\nlbu   V0, 0x17(V0)\nandi  V0, V0, 0x40\nbnezl V0, L80116B48\n li    S1, 3\nL80116B48:\nbeql  S1, S2, L80116B68\n addiu S0, S0, 1\nmove  A0, S0\njal   func_80116904\n move  A1, S1\njal   func_80116A04\n move  A0, S0\naddiu S0, S0, 1\nL80116B68:\nslti  V0, S0, 4\nbnez  V0, L80116AD8\n sll   V1, S0, 2\nlui   A0, hi(D_801166F4)\njal   0x800F8D54\n addiu A0, A0, lo(D_801166F4)\nlw    RA, 0x24(SP)\nlw    S4, 0x20(SP)\nlw    S3, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x28\n\n; runs from 0xFFFB event table entry\n; Poison / Bowser Curse, reduce movement to 3 spaces.\nfunc_80116BA0:\naddiu SP, SP, -0x38\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\nsdc1  F20, 0x20(SP)\nlui   S0, hi(CORE_800CD058)\naddiu S0, S0, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S1, V0\nlh    V0, 0x56(S0)\nlui   V1, hi(current_player_index)\nlb    V1, lo(current_player_index)(V1)\nsrav  V0, V0, V1\nandi  V0, V0, 1\nbeqz  V0, L80116D88\n       NOP\njal   0x80035FDC\n li    A0, 16\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nli    V1, 1\nsllv  V1, V1, V0\nnor   V1, R0, V1\nlhu   V0, 0x56(S0)\nand   V0, V0, V1\nsh    V0, 0x56(S0)\nlbu   V0, 0x17(S1)\nandi  V0, V0, 0x20\nbnez  V0, L80116C40\n li    A0, -1\nlw    V0, 0x14(S1)\nandi  V0, V0, 0xa\nli    V1, 8\nbne   V0, V1, L80116C44\n li    A1, 0x3A07 ; "A poison mushroom is limiting your move to three spaces or less"\nli    A0, -1\nL80116C40:\nli    A1, 0x4219 ; "Because of Bowser\'s Curse, you can move up to only three spaces."\nL80116C44:\njal   0x800EC590\n       NOP\nlbu   V0, 0x17(S1)\nandi  V0, V0, 2\nbeqz  V0, L80116CE4\n       NOP\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L80116CDC\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80116C98:\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80116C98\n       NOP\nL80116CDC:\njal   func_8011667C\n lb    A0, 0xf(S0)\nL80116CE4:\nlbu   V0, 0x17(S1)\nandi  V0, V0, 8\nbeqz  V0, L80116D7C\n       NOP\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L80116D74\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80116D30:\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80116D30\n       NOP\nL80116D74:\njal   func_8011667C\n lb    A0, 0xf(S0)\nL80116D7C:\nlbu   V0, 0x17(S1)\nandi  V0, V0, 0xd5\nsb    V0, 0x17(S1)\nL80116D88:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_80116DAC:\naddiu SP, SP, -0x38\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\nsdc1  F20, 0x20(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S0, V0\nlbu   V0, 0x17(S0)\nandi  V0, V0, 8\nbeqz  V0, L80116EE8\n       NOP\nlui   A0, hi(current_player_index)\njal   0x800DCA64\n lb    A0, lo(current_player_index)(A0)\njal   0x80035FDC\n li    A0, 16\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nli    V1, 1\nsllv  V1, V1, V0\nnor   V1, R0, V1\nlhu   V0, 0x56(S1)\nand   V0, V0, V1\nsh    V0, 0x56(S1)\nli    A0, -1\njal   0x800EC590\n li    A1, 16921\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L80116EB4\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80116E70:\nlb    V0, 0xf(S1)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80116E70\n       NOP\nL80116EB4:\njal   func_8011667C\n lb    A0, 0xf(S1)\nlbu   V0, 0x17(S0)\nandi  V0, V0, 0xd7\nsb    V0, 0x17(S0)\nli    A0, -1\njal   0x800FF900\n li    A1, 2\nlb    A0, 0xf(S1)\njal   0x800DC128\n       NOP\njal   SleepProcess\n li    A0, 15\nL80116EE8:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_80116F0C:\naddiu SP, SP, -0x20\nsw    RA, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\njal   0x8004EE68\n li    S0, 60\nlw    S1, 0x8c(V0)\nL80116F28:\njal   SleepVProcess\n addiu S0, S0, -1\nbnez  S0, L80116F28\n       NOP\njal   0x800FFAEC\n move  A0, S1\njal   EndProcess\n move  A0, R0\nlw    RA, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nD_80116F5C:\naddiu SP, SP, -0x60\nsw    RA, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\nsw    S0, 0x20(SP)\nsdc1  F28, 0x58(SP)\nsdc1  F26, 0x50(SP)\nsdc1  F24, 0x48(SP)\nsdc1  F22, 0x40(SP)\nsdc1  F20, 0x38(SP)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nlui   V1, hi(p1_char)\naddiu V1, V1, lo(p1_char)\nlbu   A2, 0(V1)\nlbu   A3, 0x38(V1)\nlbu   V0, 0x70(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x10(SP)\nlbu   V0, 0xa8(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x5C01\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage ; "Who\'s your opponent?"\n addiu A3, A3, 0x1c00\nlui   A1, hi(D_8011FBBC)\nlw    A1, lo(D_8011FBBC)(A1)\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n li    A0, 2\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nslti  V0, S0, 4\nbeqz  V0, L80117004\n       NOP\nbgez  S0, L80117010\n move  S1, S0\nL80117004:\njal   0x800EF0D8\n move  A0, R0\nmove  S1, V0\nL80117010:\nlui   A1, hi(CORE_800CD0AE)\naddiu A1, A1, lo(CORE_800CD0AE)\nsll   A0, S1, 0x10\nsra   A0, A0, 0x10\nli    V1, 1\nsllv  V1, V1, A0\nlhu   V0, 0(A1)\nor    V0, V0, V1\njal   GetPlayerStruct\n sh    V0, 0(A1)\nmove  S2, V0\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\n      NOP\nmov.s F22, F20\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F28\nli    AT, 0x3D8F0000 ; 0.069824\nori AT, AT, 0x5c29\nmtc1  AT, F26\nmtc1  R0, F24\nsub.s F20, F20, F28\nL8011706C:\njal   0x800E4A7C\n add.s F22, F22, F26\nlb    A0, 0xf(S3)\nmfc1  A2, F20\nmfc1  A3, F22\n      NOP\njal   0x800F696C\n move  A1, V0\njal   SleepVProcess\n       NOP\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1tl L8011706C\n sub.s F20, F20, F28\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\njal   0x800F6BC4\n li    A0, -1\njal   0x800F66DC\n move  A0, R0\njal   0x800F6ECC\n li    A0, -1\nsll   V0, S1, 0x10\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbeq   V0, V1, L80117148\n sll   S0, S1, 0x10\nmove  A0, R0\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 16\njal   0x800F915C\n li    A0, 2\nlw    A0, 0x24(S2)\njal   0x800F9174\n addiu A0, A0, 0xc\nlw    A0, 0x24(S2)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepVProcess\n sll   S0, S1, 0x10\nmove  A0, R0\njal   InitFadeIn\n li    A1, 16\nli    V0, 1\nlui   AT, hi(CORE_800A12D8)\nsw    V0, lo(CORE_800A12D8)(AT)\njal   SleepProcess\n li    A0, 16\nL80117148:\nsra   S0, S0, 0x10\njal   func_8011667C\n move  A0, S0\nlbu   V0, 0x17(S2)\nandi  V0, V0, 0x99\nori   V0, V0, 2\nsb    V0, 0x17(S2)\nmove  A0, S0\njal   func_80116904\n move  A1, R0\nmtc1  R0, F20\nsll   V0, S1, 0x10\nlui   V1, hi(D_8011FB98)\naddiu V1, V1, lo(D_8011FB98)\nsra   V0, V0, 0xe\naddu  S0, V0, V1\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nL8011719C:\nlw    A0, 0(S0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F24\nc.le.s F20, F22\n      NOP\n      NOP\nbc1t  L8011719C\n sll   V0, S1, 0x10\nsra   S0, V0, 0x10\nsll   V0, S0, 2\nlui   A0, hi(D_8011FB98)\naddu  A0, A0, V0\nlw    A0, lo(D_8011FB98)(A0)\naddiu A0, A0, 0x24\nlui   A1, 0x3f80\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nlb    V0, 0xf(S3)\nbnel  S0, V0, L80117224\n sll   A0, S1, 0x10\nmove  A0, S0\nli    A1, 4\njal   0x800F2304\n li    A2, 2\nj     L80117240\n sll   S0, S1, 0x10\nL80117224:\njal   GetPlayerStruct\n sra   A0, A0, 0x10\nlw    A0, 0x24(V0)\nli    A1, 4\njal   0x800D9CE8\n li    A2, 2\nsll   S0, S1, 0x10\nL80117240:\nsra   S0, S0, 0x10\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   A1, hi(p1_char)\naddu  A1, A1, V0\nlbu   A1, lo(p1_char)(A1)\njal   0x8004AC10\n li    A0, 646\njal   func_80116A04\n move  A0, S0\nmove  A0, S0\nli    A1, 1\njal   0x800FFA4C\n li    A2, 5\nmove  S0, V0\nlui   A0, hi(D_80116F0C)\naddiu A0, A0, lo(D_80116F0C)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S0, 0x8c(V0)\njal   SleepProcess\n li    A0, 20\nlbu   V0, 0xf(S3)\nsll   V0, V0, 0x18\nsra   S0, V0, 0x18\nsb    S1, 0xf(S3)\nlbu   V0, 0x17(S2)\nandi  V0, V0, 0x80\nbeqz  V0, L801172CC\n li    A0, -1\njal   0x800EC590\n li    A1, 14857\nL801172CC:\nli    A0, -1\njal   0x800EC590\n li    A1, 14854\nsll   V1, S0, 0x18\nsll   V0, S1, 0x10\nsra   V0, V0, 0x10\nsra   V1, V1, 0x18\nbne   V0, V1, L80117308\n sb    S0, 0xf(S3)\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nj     L80117330\n sll   V0, S1, 0x10\nL80117308:\nsll   A0, S1, 0x10\njal   GetPlayerStruct\n sra   A0, A0, 0x10\nlw    A0, 0x24(V0)\nli    A1, -1\njal   0x800D9CE8\n li    A2, 2\nlui   AT, hi(CORE_800A12D8)\nsw    R0, lo(CORE_800A12D8)(AT)\nsll   V0, S1, 0x10\nL80117330:\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbeq   V0, V1, L80117390\n sll   V0, S1, 0x10\nmove  A0, R0\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 16\njal   0x800F915C\n li    A0, 1\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepVProcess\n       NOP\nmove  A0, R0\njal   InitFadeIn\n li    A1, 16\njal   SleepProcess\n li    A0, 16\nsll   V0, S1, 0x10\nL80117390:\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbne   V0, V1, L801174A4\n       NOP\njal   0x80035FDC\n li    A0, 16\nli    A0, -1\njal   0x800EC590\n li    A1, 14855\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nsll   V0, S1, 0x10\nlui   V1, hi(D_8011FB98)\naddiu V1, V1, lo(D_8011FB98)\nsra   V0, V0, 0xe\naddu  S0, V0, V1\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL801173E0:\nlw    A0, 0(S0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\n      NOP\nbc1t  L801173E0\n sll   V0, S1, 0x10\nsra   V0, V0, 0xe\nlui   A0, hi(D_8011FB98)\naddu  A0, A0, V0\nlw    A0, lo(D_8011FB98)(A0)\naddiu A0, A0, 0x24\nmove  A1, R0\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nlb    A0, 0xf(S3)\njal   func_8011667C\n       NOP\nlui   S0, hi(current_player_index)\naddiu S0, S0, lo(current_player_index)\njal   0x800DCA64\n lb    A0, 0(S0)\nli    A0, -1\njal   0x800FF900\n li    A1, 2\nlb    A0, 0(S0)\njal   0x800DC128\n       NOP\njal   SleepProcess\n li    A0, 15\nlb    V0, 0(S0)\nli    V1, 1\nsllv  V1, V1, V0\nnor   V1, R0, V1\nlhu   V0, 0x47(S0)\nand   V0, V0, V1\nsh    V0, 0x47(S0)\nlbu   V0, 0x17(S2)\nandi  V0, V0, 0xfd\nsb    V0, 0x17(S2)\nL801174A4:\nlw    RA, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\nldc1  F28, 0x58(SP)\nldc1  F26, 0x50(SP)\nldc1  F24, 0x48(SP)\nldc1  F22, 0x40(SP)\nldc1  F20, 0x38(SP)\njr    RA\n addiu SP, SP, 0x60\n\n; Runs from 0xFFFB event table entry\n; Reversal (mushroom, curse)\nfunc_801174D4:\naddiu SP, SP, -0x38\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\nsdc1  F20, 0x20(SP)\nlui   S0, hi(CORE_800CD058)\naddiu S0, S0, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S1, V0\nlbu   V1, 0x17(S1)\nandi  V0, V1, 0x80\nbeqz  V0, L80117680\n andi  V0, V1, 0x40\nbnez  V0, L80117538\n li    A0, -1\nlw    V0, 0x14(S1)\nandi  V0, V0, 0x14\nli    V1, 16\nbne   V0, V1, L8011753C\n li    A1, 0x3A03 ; "A Reverse Mushroom is forcing you to move in the opposite direction"\nli    A0, -1\nL80117538:\nli    A1, 0x421C ; "Because of the "Reverse Curse", you\'ll now move in the opposite direction."\nL8011753C:\njal   0x800EC590\n       NOP\nlbu   V0, 0x17(S1)\nandi  V0, V0, 4\nbeqz  V0, L801175DC\n       NOP\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L801175D4\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80117590:\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80117590\n       NOP\nL801175D4:\njal   func_8011667C\n lb    A0, 0xf(S0)\nL801175DC:\nlbu   V0, 0x17(S1)\nandi  V0, V0, 0x10\nbeqz  V0, L80117674\n       NOP\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L8011766C\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80117628:\nlb    V0, 0xf(S0)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80117628\n       NOP\nL8011766C:\njal   func_8011667C\n lb    A0, 0xf(S0)\nL80117674:\nlbu   V0, 0x17(S1)\nandi  V0, V0, 0xab\nsb    V0, 0x17(S1)\nL80117680:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_801176A4:\naddiu SP, SP, -0x38\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nsdc1  F24, 0x30(SP)\nsdc1  F22, 0x28(SP)\nsdc1  F20, 0x20(SP)\nlui   S1, hi(CORE_800CD058)\naddiu S1, S1, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S0, V0\nlbu   V0, 0x17(S0)\nandi  V0, V0, 0x10\nbeqz  V0, L801177B8\n       NOP\nlui   A0, hi(current_player_index)\njal   0x800DCA64\n lb    A0, lo(current_player_index)(A0)\nli    A0, -1\njal   0x800EC590\n li    A1, 16924\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nsll   V0, V0, 2\nlui   AT, hi(D_8011FB98)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FB98)(AT)\nbeqz  V0, L80117784\n       NOP\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\nlui   S2, hi(D_8011FB98)\naddiu S2, S2, lo(D_8011FB98)\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nmtc1  R0, F22\nL80117740:\nlb    V0, 0xf(S1)\nsll   V0, V0, 2\naddu  V0, V0, S2\nlw    A0, 0(V0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nsub.s F20, F20, F24\nc.le.s F22, F20\n      NOP\nbc1t  L80117740\n       NOP\nL80117784:\njal   func_8011667C\n lb    A0, 0xf(S1)\nlbu   V0, 0x17(S0)\nandi  V0, V0, 0xaf\nsb    V0, 0x17(S0)\nli    A0, -1\njal   0x800FF900\n li    A1, 2\nlb    A0, 0xf(S1)\njal   0x800DC128\n       NOP\njal   SleepProcess\n li    A0, 15\nL801177B8:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\nldc1  F24, 0x30(SP)\nldc1  F22, 0x28(SP)\nldc1  F20, 0x20(SP)\njr    RA\n addiu SP, SP, 0x38\n\nD_801177DC:\naddiu SP, SP, -0x68\nsw    RA, 0x38(SP)\nsw    S3, 0x34(SP)\nsw    S2, 0x30(SP)\nsw    S1, 0x2c(SP)\nsw    S0, 0x28(SP)\nsdc1  F28, 0x60(SP)\nsdc1  F26, 0x58(SP)\nsdc1  F24, 0x50(SP)\nsdc1  F22, 0x48(SP)\nsdc1  F20, 0x40(SP)\nlui   S3, hi(CORE_800CD058)\naddiu S3, S3, lo(CORE_800CD058)\nlui   V1, hi(p1_char)\naddiu V1, V1, lo(p1_char)\nlbu   A2, 0(V1)\nlbu   A3, 0x38(V1)\nlbu   V0, 0x70(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x10(SP)\nlbu   V0, 0xa8(V1)\naddiu V0, V0, 0x1c00\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x5C01\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage: "Who\'s your opponent?"\n addiu A3, A3, 0x1c00\nlui   A1, hi(D_8011FBB8)\nlw    A1, lo(D_8011FBB8)(A1)\njal   __PP64_INTERNAL_BASIC_MESSAGE_CHOICE\n li    A0, 2\njal   0x800EC6C8\n move  S0, V0\njal   0x800EC6EC\n       NOP\nslti  V0, S0, 4\nbeqz  V0, L80117884\n       NOP\nbgez  S0, L80117890\n move  S2, S0\nL80117884:\njal   0x800EF0D8\n move  A0, R0\nmove  S2, V0\nL80117890:\nsll   A0, S2, 0x10\njal   GetPlayerStruct\n sra   A0, A0, 0x10\nmove  S1, V0\nlbu   V0, 0x17(S1)\nori   V0, V0, 0x80\nsb    V0, 0x17(S1)\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F20\n      NOP\nmov.s F22, F20\nli    AT, 0x3DCC0000 ; 0.099609\nori AT, AT, 0xcccd\nmtc1  AT, F28\nli    AT, 0x3D8F0000 ; 0.069824\nori AT, AT, 0x5c29\nmtc1  AT, F26\nmtc1  R0, F24\nsub.s F20, F20, F28\nL801178DC:\njal   0x800E4A7C\n add.s F22, F22, F26\nlb    A0, 0xf(S3)\nmfc1  A2, F20\nmfc1  A3, F22\n      NOP\njal   0x800F696C\n move  A1, V0\njal   SleepVProcess\n       NOP\nc.lt.s F24, F20\n      NOP\n      NOP\nbc1tl L801178DC\n sub.s F20, F20, F28\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S3)\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nsll   V0, S2, 0x10\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbeq   V0, V1, L801179A0\n sll   S0, S2, 0x10\nmove  A0, R0\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 16\njal   0x800F915C\n li    A0, 2\nlw    A0, 0x24(S1)\njal   0x800F9174\n addiu A0, A0, 0xc\nlw    A0, 0x24(S1)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepVProcess\n sll   S0, S2, 0x10\nmove  A0, R0\njal   InitFadeIn\n li    A1, 16\nli    V0, 1\nlui   AT, hi(CORE_800A12D8)\nsw    V0, lo(CORE_800A12D8)(AT)\njal   SleepProcess\n li    A0, 16\nL801179A0:\nsra   S0, S0, 0x10\njal   func_8011667C\n move  A0, S0\nlbu   V0, 0x17(S1)\nandi  V0, V0, 0x99\nori   V0, V0, 4\nsb    V0, 0x17(S1)\nmove  A0, S0\njal   0x800FF900\n li    A1, 3\nmove  A0, S0\njal   func_80116904\n li    A1, 1\nmtc1  R0, F20\nsll   V0, S2, 0x10\nlui   V1, hi(D_8011FB98)\naddiu V1, V1, lo(D_8011FB98)\nsra   V0, V0, 0xe\naddu  S0, V0, V1\nli    AT, 0x3DA30000 ; 0.079590\nori   AT, AT, 0xd70a\nmtc1  AT, F24\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nL80117A00:\nlw    A0, 0(S0)\nmfc1  A1, F20\nmfc1  A2, F20\nmfc1  A3, F20\n      NOP\njal   0x80089A10\n addiu A0, A0, 0x24\njal   SleepVProcess\n       NOP\nadd.s F20, F20, F24\nc.le.s F20, F22\n      NOP\n      NOP\nbc1t  L80117A00\n sll   V0, S2, 0x10\nsra   S0, V0, 0x10\nsll   V0, S0, 2\nlui   A0, hi(D_8011FB98)\naddu  A0, A0, V0\nlw    A0, lo(D_8011FB98)(A0)\naddiu A0, A0, 0x24\nlui   A1, 0x3f80\nmove  A2, A1\njal   0x80089A10\n move  A3, A1\nlb    V0, 0xf(S3)\nbnel  S0, V0, L80117A88\n sll   A0, S2, 0x10\nmove  A0, S0\nli    A1, 4\njal   0x800F2304\n li    A2, 2\nj     L80117AA4\n sll   S0, S2, 0x10\nL80117A88:\njal   GetPlayerStruct\n sra   A0, A0, 0x10\nlw    A0, 0x24(V0)\nli    A1, 4\njal   0x800D9CE8\n li    A2, 2\nsll   S0, S2, 0x10\nL80117AA4:\nsra   S0, S0, 0x10\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   A1, hi(p1_char)\naddu  A1, A1, V0\nlbu   A1, lo(p1_char)(A1)\njal   0x8004AC10\n li    A0, 646\nmove  A0, S0\nli    A1, 1\njal   0x800FFA4C\n li    A2, 5\nmove  S1, V0\njal   func_80116A04\n move  A0, S0\nlui   A0, hi(D_80116F0C)\naddiu A0, A0, lo(D_80116F0C)\nli    A1, 16386\nmove  A2, R0\njal   InitProcess\n move  A3, R0\nsw    S1, 0x8c(V0)\njal   SleepProcess\n li    A0, 20\nlbu   V0, 0xf(S3)\nsll   V0, V0, 0x18\nsb    S2, 0xf(S3)\nsra   A0, V0, 0x18\nbne   A0, S0, L80117B34\n sra   S1, V0, 0x18\njal   0x800DEB2C\n       NOP\nli    V1, 3\nbeq   V0, V1, L80117B4C\n li    A0, -1\nL80117B34:\nlui   V0, hi(CORE_800CD0AE)\nlh    V0, lo(CORE_800CD0AE)(V0)\nsrav  V0, V0, S2\nandi  V0, V0, 1\nbeqz  V0, L80117B54\n li    A0, -1\nL80117B4C:\njal   0x800EC590\n li    A1, 14853\nL80117B54:\nli    A0, -1\njal   0x800EC590\n li    A1, 14850\nsll   V1, S1, 0x18\nsll   V0, S2, 0x10\nsra   V0, V0, 0x10\nsra   V1, V1, 0x18\nbne   V0, V1, L80117B90\n sb    S1, 0xf(S3)\nli    A0, -1\nli    A1, -1\njal   0x800F2304\n li    A2, 2\nj     L80117BB8\n sll   V0, S2, 0x10\nL80117B90:\nsll   A0, S2, 0x10\njal   GetPlayerStruct\n sra   A0, A0, 0x10\nlw    A0, 0x24(V0)\nli    A1, -1\njal   0x800D9CE8\n li    A2, 2\nlui   AT, hi(CORE_800A12D8)\nsw    R0, lo(CORE_800A12D8)(AT)\nsll   V0, S2, 0x10\nL80117BB8:\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbeq   V0, V1, L80117C18\n sll   V0, S2, 0x10\nmove  A0, R0\njal   InitFadeOut\n li    A1, 16\njal   SleepProcess\n li    A0, 16\njal   0x800F915C\n li    A0, 1\njal   GetPlayerStruct\n li    A0, -1\nlw    A0, 0x24(V0)\njal   0x800E9748\n addiu A0, A0, 0xc\njal   SleepVProcess\n       NOP\nmove  A0, R0\njal   InitFadeIn\n li    A1, 16\njal   SleepProcess\n li    A0, 16\nsll   V0, S2, 0x10\nL80117C18:\nsra   V0, V0, 0x10\nlb    V1, 0xf(S3)\nbne   V0, V1, L80117C30\n       NOP\njal   func_801174D4\n       NOP\nL80117C30:\nlw    RA, 0x38(SP)\nlw    S3, 0x34(SP)\nlw    S2, 0x30(SP)\nlw    S1, 0x2c(SP)\nlw    S0, 0x28(SP)\nldc1  F28, 0x60(SP)\nldc1  F26, 0x58(SP)\nldc1  F24, 0x50(SP)\nldc1  F22, 0x48(SP)\nldc1  F20, 0x40(SP)\njr    RA\n addiu SP, SP, 0x68\n\n; Plunder chest?\nD_80117C60:\naddiu SP, SP, -0xb8\nsw    RA, 0x8c(SP)\nsw    S6, 0x88(SP)\nsw    S5, 0x84(SP)\nsw    S4, 0x80(SP)\nsw    S3, 0x7c(SP)\nsw    S2, 0x78(SP)\nsw    S1, 0x74(SP)\nsw    S0, 0x70(SP)\nsdc1  F28, 0xb0(SP)\nsdc1  F26, 0xa8(SP)\nsdc1  F24, 0xa0(SP)\nsdc1  F22, 0x98(SP)\nsdc1  F20, 0x90(SP)\nlui   S6, hi(CORE_800CD058)\naddiu S6, S6, lo(CORE_800CD058)\njal   func_8010FE54\n move  S1, R0\nli    A0, 33\njal   0x800D90C8\n move  A1, R0\nmove  S4, V0\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nmove  A1, R0\nmove  A2, A1\njal   0x8001C1A0\n move  A3, A1\njal   GetPlayerStruct\n li    A0, -1\nlw    A1, 0x24(V0)\naddiu A0, S4, 0xc\njal   0x80089A20\n addiu A1, A1, 0xc\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 2\njal   0x8001C814\n li    A2, 1\nli    AT, 0x42C80000 ; 100.000000\nmtc1  AT, F0\n      NOP\nswc1  F0, 0x30(S4)\njal   PlaySound\n li    A0, 322\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F2\nlwc1  F0, 0x30(S4)\nc.lt.s F2, F0\n      NOP\n      NOP\nbc1f  L80117D70\n mov.s F4, F0\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F22\nli    AT, 0x41F00000 ; 30.000000\nmtc1  AT, F20\nsub.s F0, F4, F22\nL80117D50:\njal   SleepVProcess\n swc1  F0, 0x30(S4)\nlwc1  F4, 0x30(S4)\nc.lt.s F20, F4\n      NOP\n      NOP\nbc1tl L80117D50\n sub.s F0, F4, F22\nL80117D70:\nbeqz  S1, L80117DF0\n move  S0, R0\nli    AT, 0x40000000 ; 2.000000\nmtc1  AT, F28\nli    AT, 0x3F800000 ; 1.000000\nmtc1  AT, F26\nL80117D88:\nmtc1  S0, F22\n      NOP\ncvt.s.w F22, F22\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F24, F0, F28\nadd.s F24, F24, F26\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F20, F0, F28\nadd.s F20, F20, F26\njal   0x8008EF20\n mov.s F12, F22\ndiv.s F0, F0, F28\nmfc1  A1, F24\nmfc1  A2, F20\nadd.s F0, F0, F26\nmfc1  A3, F0\n      NOP\njal   0x80089A10\n addiu A0, S4, 0x24\njal   SleepVProcess\n addiu S0, S0, 0x1e\nslti  V0, S0, 0x439\nbnez  V0, L80117D88\n       NOP\nL80117DF0:\njal   PlaySound\n li    A0, 329\nlw    V0, 0x3c(S4)\nlw    V0, 0x40(V0)\nlh    A0, 0(V0)\nli    A1, 1\njal   0x8001C814\n move  A2, R0\njal   SleepProcess\n li    A0, 20\nmove  S0, R0\naddiu S1, SP, 0x20\nli    S3, 1\naddiu S2, SP, 0x60\nli    S5, 8\nL80117E2C:\nlui   V0, hi(current_player_index)\nlb    V0, lo(current_player_index)(V0)\nbne   V0, S0, L80117E50\n sll   V0, S0, 4\naddu  V0, S1, V0\nsb    S3, 0(V0)\naddu  V0, S2, S0\nj     L80117E60\n sb    R0, 0(V0)\nL80117E50:\naddu  V0, S1, V0\nsb    S5, 0(V0)\naddu  V0, S2, S0\nsb    S3, 0(V0)\nL80117E60:\nsll   A1, S0, 4\naddu  A1, S1, A1\nmove  A0, S0\njal   0x800E2260\n addiu A1, A1, 1\naddiu S0, S0, 1\nslti  V0, S0, 4\nbnez  V0, L80117E2C\n li    V0, 1\nsb    V0, 0x64(SP)\nsb    V0, 0x65(SP)\naddiu V0, SP, 0x40\nsw    V0, 0x10(SP)\naddiu V0, SP, 0x50\nsw    V0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x5C01\naddiu A2, SP, 0x20\njal   0x800EC8EC ; ShowMessage: "Who\'s your opponent?"\n addiu A3, SP, 0x30\naddiu A0, SP, 0x60\njal   func_80113364\n move  A1, R0\njal   0x800EC6C8\n move  S1, V0\njal   0x800EC6EC\n       NOP\nli    V0, 4\nbne   S1, V0, L80117EEC\n sll   V0, S1, 3\njal   0x800EF0D8\n li    A0, 1\nmove  S1, V0\nsll   V0, S1, 3\nL80117EEC:\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   V1, hi(p1_item1)\naddu  V1, V1, V0\nlb    V1, lo(p1_item1)(V1)\nli    V0, -1\nbne   V1, V0, L80117FCC\n li    A0, -1\nli    A1, 3\njal   0x800F2304\n move  A2, R0\nlb    A1, 0xf(S6)\njal   0x8004ACE0\n li    A0, 646\njal   SleepProcess\n li    A0, 60\nmove  A0, S1\njal   0x800E2260\n addiu A1, SP, 0x20\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nli    A0, 14863\naddiu A1, SP, 0x20\nmove  A2, R0\njal   0x800EC1E8\n move  A3, R0\nlb    A0, 0xf(S6)\njal   0x800EC3C0\n       NOP\njal   0x800EC3E4\n       NOP\nli    V0, 2\nsw    V0, 0x10(SP)\nli    A0, -1\nli    A1, -1\nmove  A2, R0\njal   0x800F2388\n li    A3, 10\njal   0x800D9B54\n move  A0, S4\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S6)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nli    V0, -1\nsb    V0, 0(V1)\njal   FixUpPlayerItemSlots\n lb    A0, 0xf(S6)\nj     L801182CC\n       NOP\nL80117FCC:\njal   PlayerHasEmptyItemSlot\n move  A0, S1\nmove  S0, V0\nli    V0, -1\nbeql  S0, V0, L80117FE4\n li    S0, 3\nL80117FE4:\nmtc1  S0, F12\n      NOP\njal   0x800EEF80\n cvt.s.w F12, F12\njal   0x800E4A7C\n move  S0, V0\nlb    A0, 0xf(S6)\nsll   V1, A0, 3\nsubu  V1, V1, A0\nsll   V1, V1, 3\nlui   A0, hi(p1_item1)\naddiu A0, A0, lo(p1_item1)\naddu  V1, V1, A0\naddu  V1, V1, V0\nsll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\naddu  V0, V0, A0\naddu  V0, V0, S0\nlbu   A0, 0(V0)\nsb    A0, 0(V1)\nli    V1, -1\nsb    V1, 0(V0)\njal   FixUpPlayerItemSlots\n move  A0, S1\nsll   A0, S1, 0x10\nsra   A0, A0, 0x10\njal   0x800FF900\n li    A1, 3\njal   0x800E4A7C\n       NOP\nbne   V0, S0, L80118080\n       NOP\njal   0x800E4A7C\n       NOP\nmove  A0, S1\nmove  A1, V0\njal   0x800F68E0\n move  A2, R0\nL80118080:\njal   0x800F641C\n li    A0, -1\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S6)\nsll   V1, A0, 3\nlui   AT, hi(D_8011E3B4)\naddu  AT, AT, V1\nlwc1  F0, lo(D_8011E3B4)(AT)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E3B8)\naddu  AT, AT, V1\nlwc1  F0, lo(D_8011E3B8)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nmove  A1, V0\nsra   A2, A2, 0x10\njal   0x800F688C\n sra   A3, A3, 0x10\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S6)\nmove  A1, V0\njal   0x800F68E0\n li    A2, 256\nmove  A0, S1\nmove  A1, S0\njal   0x800F68E0\n move  A2, R0\njal   0x800E4A7C\n       NOP\nlb    A0, 0xf(S6)\nmove  A1, V0\njal   0x800F69B0\n li    A2, 18310\njal   0x8004EE68\n       NOP\nmove  S0, V0\nlb    V0, 0xf(S6)\nsll   V0, V0, 3\nlui   AT, hi(D_8011E3B4)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E3B4)(AT)\ntrunc.w.s F2, F0\nmfc1  A1, F2\n      NOP\nsll   A1, A1, 0x10\nlui   AT, hi(D_8011E3B8)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E3B8)(AT)\ntrunc.w.s F2, F0\nmfc1  A2, F2\n      NOP\nsll   A2, A2, 0x10\nlui   AT, hi(D_8011E394)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E394)(AT)\ntrunc.w.s F2, F0\nmfc1  A3, F2\n      NOP\nsll   A3, A3, 0x10\nlui   AT, hi(D_8011E398)\naddu  AT, AT, V0\nlwc1  F0, lo(D_8011E398)(AT)\ntrunc.w.s F2, F0\nmfc1  V0, F2\n      NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nsw    V0, 0x10(SP)\nli    V0, 5\nsw    V0, 0x14(SP)\nli    A0, -1\nsra   A1, A1, 0x10\nsra   A2, A2, 0x10\njal   func_8010FB54\n sra   A3, A3, 0x10\nmove  A0, S0\njal   0x8004ED30\n move  A1, V0\njal   0x8004EE18\n li    S0, 6\nlb    A1, 0xf(S6)\njal   0x8004ACE0\n li    A0, 628\nlb    A0, 0xf(S6)\nli    A1, 5\njal   0x800DA09C\n li    A2, 49\nli    A0, -1\nli    A1, 5\njal   0x800F2304\n move  A2, R0\njal   SleepProcess\n li    A0, 50\nlb    A0, 0xf(S6)\nli    V0, 2\nsw    V0, 0x10(SP)\nli    A1, -1\nmove  A2, R0\njal   0x800F2388\n li    A3, 10\njal   SleepProcess\n li    A0, 11\nlui   V0, hi(CORE_80101734)\nlw    V0, lo(CORE_80101734)(V0)\nL8011823C:\naddiu S0, S0, -1\nbnez  S0, L8011823C\n addiu V0, V0, 4\nlb    A0, 0xf(S6)\nlhu   A2, 2(V0)\njal   0x800DA09C\n li    A1, 5\njal   0x800D9B54\n move  A0, S4\nsll   V0, S1, 3\nsubu  V0, V0, S1\nsll   V0, V0, 3\nlui   A2, hi(p1_char)\naddu  A2, A2, V0\nlbu   A2, lo(p1_char)(A2)\nlb    V1, 0xf(S6)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   A3, hi(p1_char)\naddu  A3, A3, V0\nlbu   A3, lo(p1_char)(A3)\nsw    R0, 0x10(SP)\nsw    R0, 0x14(SP)\nsw    R0, 0x18(SP)\nli    A0, -1\nli    A1, 0x3A0D\naddiu A2, A2, 0x1c00\njal   0x800EC8EC ; ShowMessage: "_s item now belongs to _"\n addiu A3, A3, 0x1c00\njal   0x800EC6C8\n       NOP\njal   0x800EC6EC\n       NOP\njal   func_80110024\n       NOP\nL801182CC:\nlw    RA, 0x8c(SP)\nlw    S6, 0x88(SP)\nlw    S5, 0x84(SP)\nlw    S4, 0x80(SP)\nlw    S3, 0x7c(SP)\nlw    S2, 0x78(SP)\nlw    S1, 0x74(SP)\nlw    S0, 0x70(SP)\nldc1  F28, 0xb0(SP)\nldc1  F26, 0xa8(SP)\nldc1  F24, 0xa0(SP)\nldc1  F22, 0x98(SP)\nldc1  F20, 0x90(SP)\njr    RA\n addiu SP, SP, 0xb8\n\n; Shared happening space event.\n; Needs to exist and end the process, so that duels on happenings work.\nshared_happening_event:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\njal   EndProcess\nmove  A0, R0\njr    RA\naddiu SP, SP, 0x18\n\noverlaycall4:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\njal   InitCameras\n li    A0, 2\nlui   A1, hi(data_screen_dimensions)\naddiu A1, A1, lo(data_screen_dimensions)\njal   0x800124BC\n li    A0, 1\njal   setup_routine\n       NOP\njal   0x800FF41C\n li    A0, 2\nlui   A0, hi(func_801065D0)\naddiu A0, A0, lo(func_801065D0)\nli    A1, 4101\nli    A2, 4096\njal   InitProcess\n move  A3, R0\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_8011C5E0:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  S0, R0\njal   GetCurrentPlayerIndex\n li    S1, 99\nsll   V0, V0, 0x10\nsra   S2, V0, 0x10\nL8011C608:\njal   GetCurrentPlayerIndex\n       NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nbeql  S0, V0, L8011C668\n addiu S0, S0, 1\njal   0x800DA778\n move  A0, S0\nlui   A0, hi(D_8011F0E4)\njal   0x800DA190\n addiu A0, A0, lo(D_8011F0E4)\nsll   V0, V0, 0x10\nbnezl V0, L8011C668\n addiu S0, S0, 1\njal   0x800EE9C0\n move  A0, S0\nslt   V0, V0, S1\nbeql  V0, R0, L8011C668\n addiu S0, S0, 1\njal   0x800EE9C0\n move  A0, S0\nmove  S1, V0\nmove  S2, S0\naddiu S0, S0, 1\nL8011C668:\nslti  V0, S0, 4\nbnez  V0, L8011C608\n move  V0, S2\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_8011C68C:\naddiu SP, SP, -0x20\nsw    RA, 0x1c(SP)\nsw    S2, 0x18(SP)\nsw    S1, 0x14(SP)\njal   GetCurrentPlayerIndex\n sw    S0, 0x10(SP)\nsll   V0, V0, 0x10\nlui   A0, hi(D_8011F2F4)\naddiu A0, A0, lo(D_8011F2F4)\njal   0x800DA190\n sra   S2, V0, 0x10\nsll   V0, V0, 0x10\nbeqz  V0, L8011C738\n move  V0, S2\nmove  S0, R0\nli    S1, 99\nL8011C6CC:\njal   GetCurrentPlayerIndex\n       NOP\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nbeql  S0, V0, L8011C72C\n addiu S0, S0, 1\njal   0x800DA778\n move  A0, S0\nlui   A0, hi(D_8011F600)\njal   0x800DA190\n addiu A0, A0, lo(D_8011F600)\nsll   V0, V0, 0x10\nbnezl V0, L8011C72C\n addiu S0, S0, 1\njal   0x800EE9C0\n move  A0, S0\nslt   V0, V0, S1\nbeql  V0, R0, L8011C72C\n addiu S0, S0, 1\njal   0x800EE9C0\n move  A0, S0\nmove  S1, V0\nmove  S2, S0\naddiu S0, S0, 1\nL8011C72C:\nslti  V0, S0, 4\nbnez  V0, L8011C6CC\n move  V0, S2\nL8011C738:\nlw    RA, 0x1c(SP)\nlw    S2, 0x18(SP)\nlw    S1, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x20\n\nfunc_8011C750:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nlui   S0, hi(total_turns)\nlb    S0, lo(total_turns)(S0)\nlui   V0, hi(current_turn)\nlb    V0, lo(current_turn)(V0)\nsubu  S0, S0, V0\naddiu S0, S0, 1\njal   PlayerHasEmptyItemSlot\n li    A0, -1\nmove  V1, V0\nli    V0, -1\nbeql  V1, V0, L8011C78C\n li    V1, 3\nL8011C78C:\nslt   V0, V1, S0\nxori  V0, V0, 1\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nfunc_8011C7A4:\naddiu SP, SP, -0x18\nsw    RA, 0x14(SP)\nsw    S0, 0x10(SP)\nmove  T2, A0\nli    S0, 1\nmove  A2, R0\nlui   T0, hi(current_player_index)\nlb    T0, lo(current_player_index)(T0)\nlui   T1, hi(p1_item1)\naddiu T1, T1, lo(p1_item1)\nL8011C7CC:\nbeq   A2, T0, L8011C824\n move  A0, R0\nsll   V0, A2, 3\nsubu  V0, V0, A2\nsll   V0, V0, 3\naddu  A3, V0, T1\naddu  V0, A3, A0\nL8011C7E8:\nlb    V0, 0(V0)\nxori  V1, V0, 6\nsltiu V1, V1, 1\nxori  V0, V0, 0x10\nsltiu V0, V0, 1\nor    V1, V1, V0\nbnez  V1, L8011C81C\n slti  V0, A0, 3\naddiu A0, A0, 1\nslti  V0, A0, 3\nbnez  V0, L8011C7E8\n addu  V0, A3, A0\nslti  V0, A0, 3\nL8011C81C:\nbnez  V0, L8011C834\n slti  V0, A2, 4\nL8011C824:\naddiu A2, A2, 1\nslti  V0, A2, 4\nbnez  V0, L8011C7CC\n       NOP\nL8011C834:\nbeqz  V0, L8011C878\n sll   V0, A2, 3\nsubu  V0, V0, A2\nsll   V0, V0, 3\nlui   A0, hi(p1_cpu_difficulty)\naddu  A0, A0, V0\nlbu   A0, lo(p1_cpu_difficulty)(A0)\nmult  A1, A0\nmflo  A0\naddu  A0, T2, A0\nsll   A0, A0, 0x18\njal   RNGPercentChance\n sra   A0, A0, 0x18\nsll   V0, V0, 0x10\nsltiu V0, V0, 1\nsubu  V0, R0, V0\nand   S0, V0, S0\nL8011C878:\nmove  V0, S0\nlw    RA, 0x14(SP)\nlw    S0, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\nD_8011C88C:\naddiu SP, SP, -0x48\nsw    RA, 0x40(SP)\nsw    S7, 0x3c(SP)\nsw    S6, 0x38(SP)\nsw    S5, 0x34(SP)\nsw    S4, 0x30(SP)\nsw    S3, 0x2c(SP)\nsw    S2, 0x28(SP)\nsw    S1, 0x24(SP)\njal   GetCurrentPlayerIndex\n sw    S0, 0x20(SP)\nsll   V0, V0, 0x10\nsra   S0, V0, 0x10\nlui   S2, hi(CORE_800CD058)\naddiu S2, S2, lo(CORE_800CD058)\nlhu   V0, 0x50(S2)\nandi  V0, V0, 1\nbnez  V0, L8011CE68\n li    V0, -1\nmove  S1, R0\nli    S3, -1\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   S4, hi(p1_item1)\naddiu S4, S4, lo(p1_item1)\naddu  S6, V0, S4\nsll   S7, S0, 3\nsubu  S7, S7, S0\nlui   S5, hi(CORE_80100FA8)\naddiu S5, S5, lo(CORE_80100FA8)\nsll   V0, S1, 2\nL8011C90C:\naddiu V1, SP, 0x10\naddu  V0, V0, V1\nsw    S3, 0(V0)\naddu  V0, S6, S1\nlb    A2, 0(V0)\naddiu V1, A2, 1\nsltiu V0, V1, 0x14\nbeqz  V0, L8011CDA0\n sll   V0, V1, 2\nlui   AT, hi(D_8011FA20_jump_table)\naddu  AT, AT, V0\nlw    V0, lo(D_8011FA20_jump_table)(AT)\njr    V0\n       NOP\nL8011C944:\nmove  A0, R0\nmove  V1, R0\naddu  V0, S6, A0\nL8011C950:\nlb    V0, 0(V0)\nxor   V0, V0, A2\nsltiu V0, V0, 1\naddu  V1, V1, V0\naddiu A0, A0, 1\nslti  V0, A0, 3\nbnez  V0, L8011C950\n addu  V0, S6, A0\nj     L8011CD98\n slti  V0, V1, 2\nL8011C978:\nlb    V1, 2(S2)\nlb    V0, 3(S2)\nbne   V1, V0, L8011C998\n       NOP\njal   0x800EEA58\n lb    A0, 0xf(S2)\nbnez  V0, L8011CDA4\n sll   V1, S1, 2\nL8011C998:\nlb    V0, 2(S2)\nlb    V1, 3(S2)\nsubu  V0, V0, V1\nslti  V0, V0, 6\nbnezl V0, L8011CDCC\n addiu S1, S1, 1\nlb    A0, 0xf(S2)\njal   0x800EEA58\n       NOP\nbeqz  V0, L8011CDA4\n sll   V1, S1, 2\nj     L8011CDCC\n addiu S1, S1, 1\nL8011C9CC:\njal   func_8011C750\n       NOP\nbnez  V0, L8011CDA4\n sll   V1, S1, 2\nj     L8011CBAC\n li    A0, 80\nL8011C9E4:\nsll   V0, S7, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeqz  V0, L8011CDA0\n move  A0, R0\nL8011C9FC:\nbeq   A0, S0, L8011CA20\n sll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nbeqz  V0, L8011CA30\n slti  V0, A0, 4\nL8011CA20:\naddiu A0, A0, 1\nslti  V0, A0, 4\nbnez  V0, L8011C9FC\n       NOP\nL8011CA30:\nbeqz  V0, L8011CDA4\n sll   V1, S1, 2\njal   RNGPercentChance\n li    A0, 70\nj     L8011CD64\n sll   V0, V0, 0x10\nL8011CA48:\njal   func_8011C750\n       NOP\nbnez  V0, L8011CDA4\n sll   V1, S1, 2\nlui   A0, hi(D_8011EB98)\nj     L8011CD8C\n addiu A0, A0, lo(D_8011EB98)\nL8011CA64:\njal   func_8011C750\n       NOP\nbnez  V0, L8011CDA4\n sll   V1, S1, 2\nlui   A0, hi(D_8011EBEC)\nj     L8011CD8C\n addiu A0, A0, lo(D_8011EBEC)\nL8011CA80:\nlui   A0, hi(D_8011EE38)\nj     L8011CD8C\n addiu A0, A0, lo(D_8011EE38)\nL8011CA8C:\nlui   A0, hi(D_8011F18C)\njal   0x800DA190\n addiu A0, A0, lo(D_8011F18C)\nsll   V0, V0, 0x10\nbnezl V0, L8011CDCC\n addiu S1, S1, 1\njal   func_8011C5E0\n       NOP\nlui   AT, hi(D_8011FBBC)\nsw    V0, lo(D_8011FBBC)(AT)\nlui   V1, hi(CORE_800CD0AE)\nlh    V1, lo(CORE_800CD0AE)(V1)\nsrav  V1, V1, V0\nandi  V1, V1, 1\nbnezl V1, L8011CDCC\n addiu S1, S1, 1\nj     L8011CDA4\n sll   V1, S1, 2\nL8011CAD4:\nlui   A0, hi(D_8011F4EC)\njal   0x800DA190\n addiu A0, A0, lo(D_8011F4EC)\nsll   V0, V0, 0x10\nbnezl V0, L8011CDCC\n addiu S1, S1, 1\njal   func_8011C68C\n       NOP\nlui   AT, hi(D_8011FBB8)\nsw    V0, lo(D_8011FBB8)(AT)\nsll   V1, V0, 3\nsubu  V1, V1, V0\nsll   V1, V1, 3\nlui   V0, hi(p1_status_flags)\naddu  V0, V0, V1\nlbu   V0, lo(p1_status_flags)(V0)\nj     L8011CD98\n andi  V0, V0, 0x80\nL8011CB1C:\nmove  A0, R0\nmove  A2, R0\nlui   AT, hi(D_8011FB74)\nsw    S3, lo(D_8011FB74)(AT)\nL8011CB2C:\nbeq   A0, S0, L8011CB84\n sll   V0, A0, 3\nmove  A1, R0\nsubu  V0, V0, A0\nsll   V0, V0, 3\naddu  A3, V0, S4\naddu  V0, A3, A1\nL8011CB48:\nlb    V0, 0(V0)\nbeq   V0, S3, L8011CB74\n sll   V0, V0, 2\naddu  V0, V0, S5\nlw    V1, 0(V0)\nslt   V0, A2, V1\nbeql  V0, R0, L8011CB78\n addiu A1, A1, 1\nmove  A2, V1\nlui   AT, hi(D_8011FB74)\nsw    A0, lo(D_8011FB74)(AT)\nL8011CB74:\naddiu A1, A1, 1\nL8011CB78:\nslti  V0, A1, 3\nbnez  V0, L8011CB48\n addu  V0, A3, A1\nL8011CB84:\naddiu A0, A0, 1\nslti  V0, A0, 4\nbnez  V0, L8011CB2C\n       NOP\nlui   V0, hi(D_8011FB74)\nlw    V0, lo(D_8011FB74)(V0)\nbeq   V0, S3, L8011CDC8\n slti  V0, A2, 4\nbeqz  V0, L8011CDA0\n li    A0, 5\nL8011CBAC:\njal   RNGPercentChance\n       NOP\nsll   V0, V0, 0x10\nbeql  V0, R0, L8011CDCC\n addiu S1, S1, 1\nj     L8011CDA4\n sll   V1, S1, 2\nL8011CBC8:\nmove  A0, R0\nmove  A2, R0\nL8011CBD0:\nbeql  A0, S1, L8011CC0C\n addiu A0, A0, 1\nlb    V1, 0xf(S2)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\naddu  V0, V0, S4\naddu  V0, V0, A0\nlb    V0, 0(V0)\nbeq   V0, S3, L8011CC08\n sll   V0, V0, 2\naddu  V0, V0, S5\nlw    V0, 0(V0)\naddu  A2, A2, V0\nL8011CC08:\naddiu A0, A0, 1\nL8011CC0C:\nslti  V0, A0, 3\nbnez  V0, L8011CBD0\n       NOP\nmove  A0, R0\nlui   AT, hi(D_8011FB70)\nsw    S3, lo(D_8011FB70)(AT)\nL8011CC24:\nbeq   A0, S0, L8011CC84\n move  V1, R0\nmove  A1, R0\nsll   V0, A0, 3\nsubu  V0, V0, A0\nsll   V0, V0, 3\naddu  A3, V0, S4\naddu  V0, A3, A1\nL8011CC44:\nlb    V0, 0(V0)\nbeq   V0, S3, L8011CC5C\n sll   V0, V0, 2\naddu  V0, V0, S5\nlw    V0, 0(V0)\naddu  V1, V1, V0\nL8011CC5C:\naddiu A1, A1, 1\nslti  V0, A1, 3\nbnez  V0, L8011CC44\n addu  V0, A3, A1\nslt   V0, A2, V1\nbeql  V0, R0, L8011CC88\n addiu A0, A0, 1\nlui   AT, hi(D_8011FB70)\nsw    A0, lo(D_8011FB70)(AT)\nmove  A2, V1\nL8011CC84:\naddiu A0, A0, 1\nL8011CC88:\nslti  V0, A0, 4\nbnez  V0, L8011CC24\n       NOP\nlui   V0, hi(D_8011FB70)\nlw    V0, lo(D_8011FB70)(V0)\nbeql  V0, S3, L8011CDCC\n addiu S1, S1, 1\nj     L8011CDA4\n sll   V1, S1, 2\nL8011CCAC:\nli    A0, 50\njal   func_8011C7A4\n li    A1, 10\nbeqz  V0, L8011CDA0\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nj     L8011CD98\n slti  V0, V0, 5\nL8011CCDC:\nlb    V1, 2(S2)\nlb    V0, 3(S2)\nbeq   V1, V0, L8011CDC8\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nj     L8011CD98\n slti  V0, V0, 5\nL8011CD08:\nli    A0, 60\njal   func_8011C7A4\n li    A1, 10\nbeqz  V0, L8011CDA0\n sll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslti  V0, V0, 0x14\nbnezl V0, L8011CDCC\n addiu S1, S1, 1\nlui   A0, hi(D_8011EFA0)\nj     L8011CD8C\n addiu A0, A0, lo(D_8011EFA0)\nL8011CD48:\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslti  V0, V0, 0xa\nL8011CD64:\nbeqz  V0, L8011CDA4\n sll   V1, S1, 2\njal   func_8011C750\n       NOP\nbeql  V0, R0, L8011CDCC\n addiu S1, S1, 1\nj     L8011CDA4\n sll   V1, S1, 2\nL8011CD84:\nlui   A0, hi(D_8011F66C)\naddiu A0, A0, lo(D_8011F66C)\nL8011CD8C:\njal   0x800DA190\n       NOP\nsll   V0, V0, 0x10\nL8011CD98:\nbnezl V0, L8011CDCC\n addiu S1, S1, 1\nL8011CDA0:\nsll   V1, S1, 2\nL8011CDA4:\naddiu V0, SP, 0x10\naddu  V1, V1, V0\nsll   V0, S0, 3\nsubu  V0, V0, S0\nsll   V0, V0, 3\naddu  V0, V0, S4\naddu  V0, V0, S1\nlb    V0, 0(V0)\nsw    V0, 0(V1)\nL8011CDC8:\naddiu S1, S1, 1\nL8011CDCC:\nslti  V0, S1, 3\nbnez  V0, L8011C90C\n sll   V0, S1, 2\nmove  S1, R0\nmove  A0, R0\nmove  A1, R0\naddiu A3, SP, 0x10\nli    T2, -1\nli    T1, 18\nlui   T0, hi(CORE_80100FF4)\naddiu T0, T0, lo(CORE_80100FF4)\nsll   V0, A1, 2\nL8011CDFC:\naddu  V0, V0, A3\nlw    A2, 0(V0)\nbeql  A2, T2, L8011CE50\n addiu A1, A1, 1\nlb    V1, 2(S2)\nlb    V0, 3(S2)\nbne   V1, V0, L8011CE24\n sll   V0, A1, 2\nbeql  A2, T1, L8011CE68\n move  V0, A1\nL8011CE24:\naddu  V0, V0, A3\nlw    V0, 0(V0)\nsll   V0, V0, 2\naddu  V0, V0, T0\nlw    V1, 0(V0)\nslt   V0, S1, V1\nbeql  V0, R0, L8011CE50\n addiu A1, A1, 1\nmove  A0, A1\nmove  S1, V1\naddiu A1, A1, 1\nL8011CE50:\nslti  V0, A1, 3\nbnezl V0, L8011CDFC\n sll   V0, A1, 2\nbeqz  S1, L8011CE68\n li    V0, -1\nmove  V0, A0\nL8011CE68:\nlw    RA, 0x40(SP)\nlw    S7, 0x3c(SP)\nlw    S6, 0x38(SP)\nlw    S5, 0x34(SP)\nlw    S4, 0x30(SP)\nlw    S3, 0x2c(SP)\nlw    S2, 0x28(SP)\nlw    S1, 0x24(SP)\nlw    S0, 0x20(SP)\njr    RA\n addiu SP, SP, 0x48\n\nfunc_8011CE94:\naddiu SP, SP, -0x40\nsw    RA, 0x3c(SP)\nsw    FP, 0x38(SP)\nsw    S7, 0x34(SP)\nsw    S6, 0x30(SP)\nsw    S5, 0x2c(SP)\nsw    S4, 0x28(SP)\nsw    S3, 0x24(SP)\nsw    S2, 0x20(SP)\nsw    S1, 0x1c(SP)\nsw    S0, 0x18(SP)\nlui   S4, hi(CORE_800CD058)\naddiu S4, S4, lo(CORE_800CD058)\njal   GetPlayerStruct\n li    A0, -1\nmove  S3, V0\nli    A2, 1\nsw    A2, 0x14(SP)\nmove  S1, R0\nlui   S7, hi(D_8011F7E0)\naddiu S7, S7, lo(D_8011F7E0)\nli    S6, -1\nlui   S5, hi(D_8011F880)\naddiu S5, S5, lo(D_8011F880)\nL8011CEF4:\nlbu   V0, 3(S3)\nsll   V0, V0, 2\naddu  V0, V0, S7\nlw    V0, 0(V0)\naddu  V0, V0, S1\nlbu   S0, 0(V0)\njal   func_8010B394\n move  A0, S0\nmove  S2, V0\nbeql  S2, S6, L8011CF84\n addiu S1, S1, 1\nlui   A0, hi(CORE_80100F94)\naddu  A0, A0, S0\nlbu   A0, lo(CORE_80100F94)(A0)\naddiu A0, A0, 0x14\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslt   V0, V0, A0\nbnezl V0, L8011CF84\n addiu S1, S1, 1\nlbu   V0, 3(S3)\nsll   V0, V0, 2\naddu  V0, V0, S5\nlw    V0, 0(V0)\naddu  V0, V0, S1\njal   RNGPercentChance\n lb    A0, 0(V0)\nsll   V0, V0, 0x10\nbnez  V0, L8011CF90\n li    V0, 16\naddiu S1, S1, 1\nL8011CF84:\nslti  V0, S1, 0x10\nbnez  V0, L8011CEF4\n li    V0, 16\nL8011CF90:\nbeql  S1, V0, L8011CF98\n li    S2, -1\nL8011CF98:\nli    V0, -1\nbeq   S2, V0, L8011D028\n       NOP\njal   func_8010B394\n li    A0, 14\nbeq   V0, S2, L8011D1C8\n addiu V0, S2, 1\njal   func_8010B394\n li    A0, 11\nbne   V0, S2, L8011CFF8\n       NOP\nlui   A0, hi(CORE_80100F9F)\nlbu   A0, lo(CORE_80100F9F)(A0)\naddiu A0, A0, 0x32\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslt   V0, V0, A0\nbeqz  V0, L8011D1C8\n addiu V0, S2, 1\nL8011CFF8:\njal   func_8010B394\n li    A0, 4\nbne   V0, S2, L8011D028\n       NOP\nlb    A0, 0xf(S4)\njal   PlayerHasItem\n li    A1, ITEM_CELLULAR_SHOPPER\nli    V1, -1\nbeq   V0, V1, L8011D028\n       NOP\nli    S2, -1\nsw    R0, 0x14(SP)\nL8011D028:\nlui   V0, hi(D_8011E1D8)\nlw    V0, lo(D_8011E1D8)(V0)\nsll   V0, V0, 2\nlui   A0, hi(D_8011F8A0)\naddu  A0, A0, V0\njal   0x800DA190\n lw    A0, lo(D_8011F8A0)(A0)\nsll   V0, V0, 0x10\nbnez  V0, L8011D09C\n li    V0, -1\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nlui   V1, hi(CORE_80100F95)\nlbu   V1, lo(CORE_80100F95)(V1)\nslt   V0, V0, V1\nbnez  V0, L8011D09C\n li    V0, -1\njal   func_8010B394\n li    A0, 1\nmove  V1, V0\nli    V0, -1\nbne   V1, V0, L8011D1C8\n addiu V0, V1, 1\nli    V0, -1\nL8011D09C:\nbne   S2, V0, L8011D1C8\n addiu V0, S2, 1\nlui   V0, hi(D_8011E1D8)\nlw    V0, lo(D_8011E1D8)(V0)\nsll   V0, V0, 2\nlui   A0, hi(D_8011F8A8)\naddu  A0, A0, V0\njal   0x800DA190\n lw    A0, lo(D_8011F8A8)(A0)\nsll   V0, V0, 0x10\nsra   S1, V0, 0x10\nbnez  S1, L8011D194\n       NOP\nlui   FP, hi(D_8011F7E0)\naddiu FP, FP, lo(D_8011F7E0)\nlw    A2, 0x14(SP)\nsltiu S5, A2, 1\nli    S7, -1\nlui   S6, hi(D_8011F880)\naddiu S6, S6, lo(D_8011F880)\nL8011D0EC:\nlbu   V0, 3(S3)\nsll   V0, V0, 2\naddu  V0, V0, FP\nlw    V0, 0(V0)\naddu  V0, V0, S1\nlbu   S0, 0(V0)\nxori  V0, S0, 4\nsltiu V0, V0, 1\nand   V0, V0, S5\nbnezl V0, L8011D188\n addiu S1, S1, 1\njal   func_8010B394\n move  A0, S0\nmove  S2, V0\nbeql  S2, S7, L8011D188\n addiu S1, S1, 1\nlui   A0, hi(CORE_80100F94)\naddu  A0, A0, S0\nlbu   A0, lo(CORE_80100F94)(A0)\nlb    V1, 0xf(S4)\nsll   V0, V1, 3\nsubu  V0, V0, V1\nsll   V0, V0, 3\nlui   AT, hi(p1_coins)\naddu  AT, AT, V0\nlh    V0, lo(p1_coins)(AT)\nslt   V0, V0, A0\nbnezl V0, L8011D188\n addiu S1, S1, 1\nlbu   V0, 3(S3)\nsll   V0, V0, 2\naddu  V0, V0, S6\nlw    V0, 0(V0)\naddu  V0, V0, S1\njal   RNGPercentChance\n lb    A0, 0(V0)\nsll   V0, V0, 0x10\nbnez  V0, L8011D1C4\n addiu S1, S1, 1\nL8011D188:\nslti  V0, S1, 0x10\nbnez  V0, L8011D0EC\n       NOP\nL8011D194:\njal   func_8010B394\n move  A0, R0\nmove  S2, V0\nli    V0, -1\nbnel  S2, V0, L8011D1C8\n addiu V0, S2, 1\nli    V0, 1\nlui   AT, hi(D_8011F75C)\njal   func_8010B41C\n sw    V0, lo(D_8011F75C)(AT)\nj     L8011D1C8\n addiu V0, V0, 2\nL8011D1C4:\naddiu V0, S2, 1\nL8011D1C8:\nlw    RA, 0x3c(SP)\nlw    FP, 0x38(SP)\nlw    S7, 0x34(SP)\nlw    S6, 0x30(SP)\nlw    S5, 0x2c(SP)\nlw    S4, 0x28(SP)\nlw    S3, 0x24(SP)\nlw    S2, 0x20(SP)\nlw    S1, 0x1c(SP)\nlw    S0, 0x18(SP)\njr    RA\n addiu SP, SP, 0x40\n\nfunc_8011D1F8:\naddiu SP, SP, -0x18\nsw    RA, 0x10(SP)\nlui   V0, hi(D_8011F75C)\nlw    V0, lo(D_8011F75C)(V0)\nbnezl V0, L8011D23C\n li    V0, 2\nlui   V0, hi(D_8011E1D8)\nlw    V0, lo(D_8011E1D8)(V0)\nsll   V0, V0, 2\nlui   A0, hi(D_8011F8B0)\naddu  A0, A0, V0\njal   0x800DA190\n lw    A0, lo(D_8011F8B0)(A0)\nsll   V0, V0, 0x10\nsra   V0, V0, 0x10\nj     L8011D244\n addiu V0, V0, 1\nL8011D23C:\nlui   AT, hi(D_8011F75C)\nsw    R0, lo(D_8011F75C)(AT)\nL8011D244:\nlw    RA, 0x10(SP)\njr    RA\n addiu SP, SP, 0x18\n\n.align 16\n\n; 8011D250\nrodata:\noverlaycalls:\n.word 0x00000000, overlaycall0\n.word 0x00010000, overlaycall1\n.word 0x00020000, overlaycall2\n.word 0x00030000, overlaycall3\n.word 0x00040000, overlaycall4\n.word 0xFFFF0000, 0x00000000\n\nD_8011D280:\n.halfword 0001 0002 0003 0000 0004 0005 0006 0007\n\nD_8011D290:\n.halfword 0000 0000 0000 0001 0001 0001 0001 0002\n\nD_8011D2A0:\n.halfword 0x6 0x7 0x8 0x9 0xA 0xB 0xC 0xD\n\nstar_space_indices:\n.halfword '+m.join(",")+"\n\n; toad spaces\nD_8011D2C0:\n.halfword "+v.join(",")+"\n\n; dir/file of various tumble face textures\nD_8011D2D0:\ntumble_face_tex_grin:\n.halfword 0xA 0x7E\nD_8011D2D4:\ntumble_face_tex_frown:\n.halfword 0xA 0x7F\nD_8011D2D8:\ntumble_face_tex_sad:\n.halfword 0xA 0x80\nD_8011D2DC:\ntumble_face_tex_smile:\n.halfword 0xA 0x81\nD_8011D2E0:\ntumble_face_tex_despair:\n.halfword 0xA 0x82\nD_8011D2E4:\ntumble_face_tex_gasp:\n.halfword 0xA 0x83\nD_8011D2E8:\ntumble_face_tex_beaming:\n.halfword 0xA 0x84\n\nD_8011D2EC:\n.word 0x00005E02\n.word 0x00005E03\n.word 0x00005E04\n.word 0x00005E05\n.word 0x00005E06\n.word 0x00005E07\n.word 0x00005E08\n\n; used in star celebration?\nD_8011D308:\n.word 0x00000000\n\nD_8011D30C:\n.word 0x00000000\n\nD_8011D310:\n.word 0xBF800000\n\nD_8011D314:\n.word 0x00000000\n\nD_8011D318:\n.word 0x00000000\n\n; passed as addr, may be u16\nD_8011D31C:\n.word 0xFFFF0000\n\n; star spaces 2\nD_8011D320:\n.halfword "+m.join(",")+" 0xFFFF\n.align 4\n\n; interleaving array?\nD_8011D334: .halfword 0x7\nD_8011D336: .halfword 0xFFFF\n.halfword 0x0001 0xFFFA\n.halfword 0x0001 0xFFF9\n.halfword 0x0001 0xFFF9\n.halfword 0xFFFB 0xFFFB\n.halfword 0x0002 0xFFF9\n.halfword 0x0001 0xFFF9\n.halfword 0xFFFC 0xFFF7\n\n; boo\nD_8011D354: .halfword 2\nD_8011D356: .halfword 0\nD_8011D358: .halfword 2\n.align 4\n\n; used with bank, interleaving arrays?\nD_8011D35C: .halfword 0x0001\nD_8011D35E: .halfword 0xFFFE\n.halfword 0x0000 0xFFFC\n\nD_8011D364: .halfword 0x0001\nD_8011D366: .halfword 0xFFFC\n.halfword 0x0005 0x0000\n\nD_8011D36C: .halfword 0x0000\nD_8011D36E: .halfword 0x0000\n.halfword 0x00000 0xFFFD\n\n; gate neighbors\ngate_entrance_spaces:\n.halfword "+L[0].gateEntryIndex+"\ngate_exit_spaces:\n.halfword "+L[0].gateExitIndex+"\n.halfword "+L[1].gateEntryIndex+"\n.halfword "+L[1].gateExitIndex+"\n\n; toad spaces 2\nD_8011D37C:\n.halfword "+v.join(",")+"\n.align 4\n\nD_8011D38C:\n.halfword 0x06 0x07 0x08 0x09 0x0A 0x0B 0x0C 0x0D\n\nboo_space_indices:\n.halfword "+f+"\n.align 4\n\nbank_coin_space_indices:\n.halfword "+C.join(",")+"\n.align 4\n\n; bank coin coordinates?\nD_8011D3A4: .word 0xC0400000\nD_8011D3A8: .word 0x00000000\nD_8011D3AC: .word 0xC0000000\nD_8011D3B0: .word 0x00000000\nD_8011D3B4: .word 0x40000000\nD_8011D3B8: .word 0x40000000\nD_8011D3BC: .word 0x3F800000\nD_8011D3C0: .word 0x40B00000\nD_8011D3C4: .word 0xC0400000\nD_8011D3C8: .word 0x40600000\nD_8011D3CC: .word 0x41000000\nD_8011D3D0: .word 0x40800000\nD_8011D3D4: .word 0xBF800000\nD_8011D3D8: .word 0x41400000\nD_8011D3DC: .word 0x41300000\n\nD_8011D3E0: .word 0x00000000\nD_8011D3E4: .word 0x00000000\n\nD_8011D3E8: .word 0x00000000\nD_8011D3EC: .word 0x00000000\nD_8011D3F0: .word 0x00000000\nD_8011D3F4: .word 0x00000000\nD_8011D3F8: .word 0xC1700000\nD_8011D3FC: .word 0x00000000\nD_8011D400: .word 0x00000000\nD_8011D404: .word 0x41A00000\nD_8011D408: .word 0x00000000\nD_8011D40C: .word 0xC1F00000\nD_8011D410: .word 0x42340000\nD_8011D414: .word 0x00000000\nD_8011D418: .word 0x42340000\n\ngate_spaces:\n.halfword "+L.map(function(e){return e.gateSpaceIndex}).join(",")+"\n\n; indices into a list of main fs models\n; for the gate graphics. Don't change.\nD_8011D420: .byte 0x00\nD_8011D421: .byte 0x26\n.halfword 0x27\nD_8011D424: .halfword 0x28 0x29\nD_8011D428: .halfword 0x2A 0x2B\n\n; MTNX files for each gate type.\nD_8011D42C:\n.word 0x00000001 0x00130163\nD_8011D434:\n.word 0x00000001 0x00130168\nD_8011D43C:\n.word 0x00000001 0x0013016F\nD_8011D444:\n.word 0x00000001 0x00130176\nD_8011D44C:\n.word 0x00000001 0x00130180\nD_8011D454:\n.word 0x00000001 0x00130184\n\nD_8011D45C:\n.word D_8011D42C\n.word D_8011D434\n.word D_8011D43C\n.word D_8011D444\n.word D_8011D44C\n.word D_8011D454\n\n; sound that plays when the gate opens. 0x148 is raw sound 0x7E.\nD_8011D474:\n.word 0x00000148\n.word 0x00000148\n.word 0x00000148\n.word 0x00000148\n.word 0x00000148\n.word 0x00000148\n\nD_8011D48C: .word 0xFFFFFFFF\nD_8011D490: .word 0xFFFFFFFF\nD_8011D494: .word 0xFFFFFFFF\nD_8011D498: .halfword 0xFFFF\nD_8011D49A: .halfword 0xFFFF\nD_8011D49C: .word 0xFFFFFFFF\nD_8011D4A0: .word 0xFFFFFFFF\nD_8011D4A4: .word 0xFFFFFFFF\nD_8011D4A8: .word 0xFFFFFFFF\nD_8011D4AC: .word 0xFFFFFFFF\nD_8011D4B0: .word 0xFFFFFFFF\nD_8011D4B4: .word 0xFFFFFFFF\nD_8011D4B8: .word 0xFFFFFFFF\n\nD_8011D4BC: .word 0xFFFFFFFF\nD_8011D4C0: .word 0xFFFFFFFF\nD_8011D4C4: .word 0xFFFFFFFF\nD_8011D4C8: .word 0xFFFFFFFF\nD_8011D4CC: .word 0xFFFFFFFF\nD_8011D4D0: .word 0xFFFFFFFF\nD_8011D4D4: .word 0xFFFFFFFF\nD_8011D4D8: .word 0xFFFFFFFF\nD_8011D4DC: .word 0xFFFFFFFF\n\nD_8011D4E0: .word 0xFFFFFFFF\nD_8011D4E4: .word 0xFFFFFFFF\nD_8011D4E8: .word 0xFFFFFFFF\nD_8011D4EC: .word 0xFFFFFFFF\nD_8011D4F0: .word 0xFFFFFFFF\nD_8011D4F4: .word 0xFFFFFFFF\nD_8011D4F8: .word 0xFFFFFFFF\nD_8011D4FC: .word 0xFFFFFFFF\nD_8011D500: .word 0xFFFFFFFF\n\nbank_model_space_indices:\n.halfword "+T.join(",")+"\n.align 4\n\nitem_shop_model_space_indices:\n.halfword "+D.join(",")+'\n.align 4\n\n; Koopa Kard usage AI\nD_8011E058:\n.word 0x04000000 0x00F50014 0x0B541E1E\n.word 0x00000000 0x00000000 0x1B541E1E\n\n; bank main fs something\nD_8011E070:\n.word 0x00000001 0x000A009D\n\nD_8011E088: .word 0x00000000\nD_8011E08C: .word 0x01000000\nD_8011E090: .word 0x02030404\nD_8011E094: .word 0x00000000\nD_8011E098: .word 0x01000000\nD_8011E09C: .word 0x02030404\n\nD_8011E0A0:\n.byte 0x00 0x01 0x04 0x05 0x0A 0x0E 0x13\n.byte 0x00 0x01 0x04 0x05 0x0A 0x0C 0x13\n.byte 0x00 0x01 0x04 0x05 0x0A 0x13 0xFF\n.byte 0x00 0x01 0x04 0x08 0x0A 0x0C 0x13\n.byte 0x00 0x01 0x08 0x0A 0x0C 0x0E 0x13\n.byte 0x01 0x02 0x03 0x06 0x0D 0x0B 0x13\n.byte 0x01 0x02 0x03 0x06 0x09 0x0D 0x13\n.byte 0x01 0x02 0x03 0x07 0x0D 0x13 0xFF\n.byte 0x01 0x03 0x06 0x07 0x09 0x0D 0x13\n.byte 0x01 0x03 0x06 0x07 0x09 0x0B 0x13\n.byte 0x00 0x00 ; align 4\n\nD_8011E0E8: .word 0x00000101\nD_8011E0EC: .word 0x01020203\nD_8011E0F0: .word 0x02030304\nD_8011E0F4: .word 0x00000101\nD_8011E0F8: .word 0x01020203\nD_8011E0FC: .word 0x02030304\n\nD_8011E100: .word 0x1937414C\nD_8011E104: .word 0x51565B60\nD_8011E108: .word 0x62641E32\nD_8011E10C: .word 0x3C464B55\nD_8011E110: .word 0x5A5F6164\nD_8011E114: .word 0x192D343E\nD_8011E118: .word 0x4352585F\nD_8011E11C: .word 0x61641423\nD_8011E120: .word 0x282D374B\nD_8011E124: .word 0x555F6164\nD_8011E128: .word 0x0F191E28\nD_8011E12C: .word 0x2D46505C\nD_8011E130: .word 0x5F642135\nD_8011E134: .word 0x44494E53\nD_8011E138: .word 0x5D626400\nD_8011E13C: .word 0x1928373F\nD_8011E140: .word 0x49515B62\nD_8011E144: .word 0x64001426\nD_8011E148: .word 0x3A444B52\nD_8011E14C: .word 0x5A626400\nD_8011E150: .word 0x0F233741\nD_8011E154: .word 0x484F5561\nD_8011E158: .word 0x64000F19\nD_8011E15C: .word 0x2D37414B\nD_8011E160: .word 0x505F6400\n\nD_8011E164: .word 0x00010405\nD_8011E168: .word 0x080A0C0E\nD_8011E16C: .word 0x0F100102\nD_8011E170: .word 0x03060709\nD_8011E174: .word 0x0D0B1101\n\n; 3B is toad, 3D is baby bowser\nitem_shop_purchase_selection_messages:\n.word 0x00003B05\n.word 0x00003D05\n.word 0x00003B06\n.word 0x00003D06\n.word 0x00003B07\n.word 0x00003D07\n.word 0x00003B08\n.word 0x00003D08\n.word 0x00003B09\n.word 0x00003D09\n\nD_8011E1A0:\nitem_shop_prompt_to_buy_messages:\n.word 0x00003B00\n.word 0x00003D00\n\nD_8011E1A8:\nitem_shop_not_enough_coins_messages:\n.word 0x00003B01\n.word 0x00003D01\n\nD_8011E1B0:\nitem_shop_already_have_three_items_messages:\n.word 0x00003B02\n.word 0x00003D02\n\nD_8011E1B8:\nitem_shop_closed_messages:\n.word 0x00003B03\n.word 0x00003D03\n\nD_8011E1C0:\nitem_shop_cancelled_purchase_messages:\n.word 0x00003B04\n.word 0x00003D04\n\nD_8011E1C8:\n.word 0x00000001 0x000A0017\n\nD_8011E1D0:\n.word 0x00000001 0x000A00F0\n\nD_8011E1D8:\n.word 0\n\nD_8011E1EC: .word 0x42980000\nD_8011E1F0: .word 0x42500000\nD_8011E1F4: .word 0x43740000\nD_8011E1F8: .word 0x42500000\nD_8011E1FC: .word 0x42980000\nD_8011E200: .word 0x43400000\nD_8011E204: .word 0x43740000\nD_8011E208: .word 0x43400000\nD_8011E20C: .word 0xBF800000\n\nD_8011E210: .word 0xBF800000\nD_8011E214: .word 0x3F800000\nD_8011E218: .word 0xBF800000\nD_8011E21C: .word 0xBF800000\nD_8011E220: .word 0x3F800000\nD_8011E224: .word 0x3F800000\nD_8011E228: .word 0x3F800000\n\nD_8011E22C: .byte 0x01\nD_8011E22D: .byte 0x05\nD_8011E22E: .byte 0x0F 0x06\nD_8011E230: .word 0x0F191019\nD_8011E234: .word 0x1B1A231E\nD_8011E238: .word 0x242D202E\nD_8011E23C: .word 0x32230000\n\nD_8011E240: .byte 0x00\nD_8011E241: .byte 0x00\nD_8011E242: .byte 0x00 0x01\nD_8011E244: .word 0x0A010B0B\nD_8011E248: .word 0x040C0E02\nD_8011E24C: .word 0x0F0F0410\nD_8011E250: .word 0x17031821\nD_8011E254: .word 0x04222505\nD_8011E258: .word 0x26270228\nD_8011E25C: .word 0x31063236\nD_8011E260: .word 0x05373F07\nD_8011E264: .word 0x40400841\nD_8011E268: .word 0xFF090000\nD_8011E26C: .word 0x09070401\nD_8011E270: .word 0x00000000\n\nD_8011E274: .word 0x00000032\nD_8011E278: .word 0x00000050\nD_8011E27C: .word 0x00000064\n\nD_8011E280: .word 0x00000001\nD_8011E284: .word 0x00000000\nD_8011E288: .word 0x00000001\nD_8011E28C: .word 0x00000000\nD_8011E290: .word 0x00000000\nD_8011E294: .word 0x00000001\nD_8011E298: .word 0x00000000\n\nD_8011E354: .word 0x43240000\nD_8011E358: .word 0x42980000\nD_8011E35C: .word 0x430C0000\nD_8011E360: .word 0x42980000\nD_8011E364: .word 0x43240000\nD_8011E368: .word 0x42980000\nD_8011E36C: .word 0x430C0000\nD_8011E370: .word 0x42980000\nD_8011E374: .word 0x43040000\nD_8011E378: .word 0x42780000\nD_8011E37C: .word 0x435C0000\nD_8011E380: .word 0x42780000\nD_8011E384: .word 0x43040000\nD_8011E388: .word 0x43340000\nD_8011E38C: .word 0x435C0000\nD_8011E390: .word 0x43340000\n\nD_8011E394: .word 0x43240000\nD_8011E398: .word 0x42840000\nD_8011E39C: .word 0x43240000\nD_8011E3A0: .word 0x42840000\nD_8011E3A4: .word 0x43240000\nD_8011E3A8: .word 0x42840000\nD_8011E3AC: .word 0x43240000\nD_8011E3B0: .word 0x42840000\n\nD_8011E3B4: .word 0x43240000\n\nD_8011E3B8: .word 0x42980000\nD_8011E3BC: .word 0x43240000\nD_8011E3C0: .word 0x42980000\nD_8011E3C4: .word 0x43240000\nD_8011E3C8: .word 0x42980000\nD_8011E3CC: .word 0x43240000\nD_8011E3D0: .word 0x42980000\n\n; Message box AI - which shop will you choose?\nD_8011E3D4:\n.word 0x0D000000 0x00000000 0x0A142850\n.word 0x0D000000 0x00000001 0x064C9932\n.word 0x0D000000 0x00000002 0x03C78F1E\n.word 0x0D000000 0x00000003 0x08D1A346\n.word 0x0D000000 0x00000004 0x078F1E3C\n.word 0x0D000000 0x00000005 0x064C9932\n.word 0x0D000000 0x00000006 0x03C78F1E\n.word 0x0D000000 0x00000007 0x078F1E3C\n.word 0x00000000 0x00000000 0x064C9932\n\nD_8011E440: .word 0x00000014\nD_8011E444: .word 0x0000003C\nD_8011E448: .word 0x0000001E\nD_8011E44C: .word 0x00000032\nD_8011E450: .word 0x00000046\n\n; ai tree for throwing away skeleton key\nD_8011E454:\n.word 0x00000000 00000000 0x0C993264\n\nD_8011E460: .word 0xC1200000\nD_8011E464: .word 0x00000000\nD_8011E468: .word 0x41200000\nD_8011E46C: .word 0xC0A00000\nD_8011E470: .word 0x41200000\nD_8011E474: .word 0x40A00000\nD_8011E478: .word 0xC0A00000\nD_8011E47C: .word 0xC0A00000\nD_8011E480: .word 0x41200000\nD_8011E484: .word 0x00000000\nD_8011E488: .word 0xC0A00000\nD_8011E48C: .word 0x40A00000\n\nD_8011E490: .word 0xFFFFFFFF\n\nD_8011E494: .byte 0x43 0x44 0x45 0x00\n\nD_8011E498: .byte 0x14 0x3C 0x64 0x00\n\nD_8011E49C: .halfword 0\nD_8011E49E: .halfword 0x32\nD_8011E4A0: .word 0x00020050\nD_8011E4A4: .word 0x0004005A\nD_8011E4A8: .word 0x0008005E\nD_8011E4AC: .word 0x00100061\nD_8011E4B0: .word 0x00200063\nD_8011E4B4: .word 0x00400064\n\nD_8011E4B8: .byte 0xF0\nD_8011E4B9: .byte 0xDE\nD_8011E4BA: .byte 0x35 0xF7\nD_8011E4BC: .byte 0x1A 0x42 0x00 0x00\n\n; codes that run with the 0xFFFB activation type below\nD_8011E4C0:\n.word 0x00070001 func_80116BA0\n.word 0x00070001 func_801174D4 0 0\n\nD_8011E4D8_event_table:\n.word 0xFFFB0000 D_8011E4C0\n.word 0xFFFF0000 00000000\n\ndata_screen_dimensions:\n.word 00000000\n.word 00000000\n.word 0x43A00000 ; 320\n.word 0x43700000 ; 240\n\nD_8011E8C8:\n.word 0x0A000000 0x000C0004 0x0C96A846\n.word 0x0A000000 0x000D0002 0x0C96A846\n.word 0x0A000000 0x000E0003 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011E8F8:\n.word 0x0C000000 0x0000000A 0x0000001E\n.word 0x10000000 0x0000000A D_8011E8C8\n.word 0x0C000000 0x00000019 0x0000001E\n.word 0x0A000000 0x00010008 0x0C96A846\n.word 0x0A000000 0x00100004 0x0C96A846\n.word 0x0C000000 0x0000001E 0x0000001E\n.word 0x0A000000 0x000A0204 0x0C96A846\n.word 0x0C000000 0x00000023 0x0000001E\n.word 0x0A000000 0x0005080A 0x0C96A846\n.word 0x0A000000 0x00080006 0x0C96A846\n.word 0x0A000000 0x000A0001 0x0C96A846\n.word 0x0A000000 0x00060000 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011E994:\n.word 0x0C000000 0x00000014 0x0000001E\n.word 0x0A000000 0x00010B0C 0x0C96A846\n.word 0x0A000000 0x000F0006 0x0C96A846\n.word 0x0A000000 0x00030305 0x0C96A846\n.word 0x0A000000 0x00040001 0x0C96A846\n.word 0x0C000000 0x00000019 0x0000001E\n.word 0x0A000000 0x0001040A 0x0C96A846\n.word 0x0A000000 0x00100104 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011EA00:\n.word 0x0C000000 0x00000014 0x0000001E\n.word 0x0A000000 0x00010B0C 0x0C96A846\n.word 0x0A000000 0x000F0609 0x0C96A846\n.word 0x0A000000 0x00020006 0x0C96A846\n.word 0x0A000000 0x00030005 0x0C96A846\n.word 0x0C000000 0x00000019 0x0000001E\n.word 0x0A000000 0x0001060A 0x0C96A846\n.word 0x0A000000 0x00100304 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011EA6C:\n.word 0x0C000000 0x00000014 0x0000001E\n.word 0x0A000000 0x000F0009 0x0C96A846\n.word 0x0A000000 0x00020006 0x0C96A846\n.word 0x0A000000 0x00030305 0x0C96A846\n.word 0x0A000000 0x00040001 0x0C96A846\n.word 0x0A000000 0x00050003 0x0C96A846\n.word 0x0A000000 0x00070007 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011EACC:\n.word 0x0C000000 0x00000014 0x0000001E\n.word 0x0A000000 0x000A0208 0x0C96A846\n.word 0x0C000000 0x00000019 0x0000001E\n.word 0x0A000000 0x00020206 0x0C96A846\n.word 0x0A000000 0x0005030A 0x0C96A846\n.word 0x0A000000 0x00080006 0x0C96A846\n.word 0x0A000000 0x000A0001 0x0C96A846\n.word 0x0A000000 0x000B0307 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011EB38:\n.word 0x0C000000 0x00000005 0x0000001E\n.word 0x0A000000 0x000A020A 0x0C96A846\n.word 0x0A000000 0x000C0003 0x0C96A846\n.word 0x0A000000 0x000E0001 0x0C96A846\n.word 0x0C000000 0x0000000A 0x0000001E\n.word 0x0A000000 0x00080406 0x0C96A846\n.word 0x0A000000 0x000A0001 0x0C96A846\n.word 0x00000000 0x00000000 0x00000000\nD_8011EB98:\n.word 0x02000000 0x00000041 D_8011E8F8\n.word 0x02000000 0x00000002 D_8011E994\n.word 0x02000000 0x00000004 D_8011EA00\n.word 0x02000000 0x00000008 D_8011EA6C\n.word 0x02000000 0x00000030 D_8011EACC\n.word 0x02000000 0x00000080 D_8011EB38\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011EBEC:\n.word 0x00000000 0x00000000 0x0A119E32\n\nD_8011EBF8:\n.word 0x0A000000 0x0001090C 0x0000028A\n.word 0x0A000000 0x00020000 0x0000028A\n.word 0x0B000000 0x0001090C 0x0B54233C\n.word 0x0B000000 0x00020000 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011EC4C:\n.word 0x0A000000 0x000F0709 0x0000028A\n.word 0x0A000000 0x00030001 0x0000028A\n.word 0x0B000000 0x000F0709 0x0B54233C\n.word 0x0B000000 0x00030001 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011ECA0:\n.word 0x0A000000 0x00070106 0x0000028A\n.word 0x0B000000 0x00070106 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011ECDC:\n.word 0x0A000000 0x00050408 0x0000028A\n.word 0x0B000000 0x00050408 0x0B54233C\n.word 0x0A000000 0x000A0004 0x0000028A\n.word 0x0B000000 0x000A0004 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011ED30:\n.word 0x0A000000 0x000A080A 0x0000028A\n.word 0x0A000000 0x000B0001 0x0000028A\n.word 0x0B000000 0x000A080A 0x0B54233C\n.word 0x0B000000 0x000B0001 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011ED84:\n.word 0x0A000000 0x000C0103 0x0000028A\n.word 0x0A000000 0x000D0000 0x0000028A\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000D0000 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011EDC0:\n.word 0x0A000000 0x0001080C 0x0000028A\n.word 0x0B000000 0x0001080C 0x0B54233C\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000E0002 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011EDFC:\n.word 0x0A000000 0x00010002 0x0000028A\n.word 0x0A000000 0x000E0102 0x0000028A\n.word 0x0B000000 0x0001080C 0x0B54233C\n.word 0x0B000000 0x000E0102 0x0B54233C\n.word 0x00000000 0x00000000 0x02878F1E\nD_8011EE38:\n.word 0x02000000 0x00000001 D_8011EBF8\n.word 0x02000000 0x00000002 D_8011EC4C\n.word 0x02000000 0x00000004 D_8011ECA0\n.word 0x02000000 0x00000008 D_8011ECDC\n.word 0x02000000 0x00000010 D_8011ED30\n.word 0x02000000 0x00000020 D_8011ED84\n.word 0x02000000 0x00000040 D_8011EDC0\n.word 0x02000000 0x00000080 D_8011EDFC\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011EEA4:\n.word 0x0A000000 0x0001090C 0x0000028A\n.word 0x0A000000 0x00020000 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EEC8:\n.word 0x0A000000 0x000F0709 0x0000028A\n.word 0x0A000000 0x00030001 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EEEC:\n.word 0x0A000000 0x00070106 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EF04:\n.word 0x0A000000 0x00050408 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EF1C:\n.word 0x0A000000 0x000A080A 0x0000028A\n.word 0x0A000000 0x000B0001 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EF40:\n.word 0x0A000000 0x000C0103 0x0000028A\n.word 0x0A000000 0x000D0000 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EF64:\n.word 0x0A000000 0x0001080C 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EF7C:\n.word 0x0A000000 0x00010002 0x0000028A\n.word 0x0A000000 0x000E0102 0x0000028A\n.word 0x00000000 0x00000000 0x0BF6A83C\nD_8011EFA0:\n.word 0x02000000 0x00000001 D_8011EEA4\n.word 0x02000000 0x00000002 D_8011EEC8\n.word 0x02000000 0x00000004 D_8011EEEC\n.word 0x02000000 0x00000008 D_8011EF04\n.word 0x02000000 0x00000010 D_8011EF1C\n.word 0x02000000 0x00000020 D_8011EF40\n.word 0x02000000 0x00000040 D_8011EF64\n.word 0x02000000 0x00000080 D_8011EF7C\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F00C:\n.word 0x0B000000 0x0001090B 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F024:\n.word 0x0B000000 0x000F0709 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F03C:\n.word 0x0B000000 0x00070104 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F054:\n.word 0x0B000000 0x00050406 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F06C:\n.word 0x0B000000 0x000A080A 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F084:\n.word 0x0B000000 0x000C0102 0x0B54233C\n.word 0x0B000000 0x000A0A0A 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F0A8:\n.word 0x0B000000 0x0001080A 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F0C0:\n.word 0x0B000000 0x00010000 0x0B54233C\n.word 0x0B000000 0x000E0102 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F0E4:\n.word 0x02000000 0x00000001 D_8011F00C\n.word 0x02000000 0x00000002 D_8011F024\n.word 0x02000000 0x00000004 D_8011F03C\n.word 0x02000000 0x00000008 D_8011F054\n.word 0x02000000 0x00000010 D_8011F06C\n.word 0x02000000 0x00000020 D_8011F084\n.word 0x02000000 0x00000040 D_8011F0A8\n.word 0x02000000 0x00000080 D_8011F0C0\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F150:\n.word 0x0A000000 0x0001080A 0x0B54233C\n.word 0x0A000000 0x000A0001 0x0B54233C\n.word 0x0A000000 0x00050A0A 0x0B54233C\n.word 0x0A000000 0x00040000 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F18C:\n.word 0x00000000 0x00000000 D_8011F0E4\n\nD_8011F198:\n.word 0x00000000 0x00000000 D_8011F150\n\nD_8011F1A4: .word 0x00000000 ; align 16?\nD_8011F1A8: .word 0x00000000\nD_8011F1AC: .word 0x00000000\n\nD_8011F1B0:\n.word 0x0A000000 0x00020206 0x0B54233C\n.word 0x0A000000 0x000F0003 0x0B54233C\n.word 0x0A000000 0x00030305 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F1E0:\n.word 0x0A000000 0x00020404 0x0B54233C\n.word 0x0A000000 0x00030305 0x0B54233C\n.word 0x0A000000 0x00040001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F210:\n.word 0x0A000000 0x00050407 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F228:\n.word 0x0A000000 0x00050A0A 0x0B54233C\n.word 0x0A000000 0x00060000 0x0B54233C\n.word 0x0A000000 0x000A0001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F258:\n.word 0x0A000000 0x000D0000 0x0B54233C\n.word 0x0A000000 0x000C0103 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F27C:\n.word 0x0A000000 0x000B0001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F294:\n.word 0x0A000000 0x000F0106 0x0B54233C\n.word 0x0A000000 0x00020006 0x0B54233C\n.word 0x0A000000 0x00040001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F2C4:\n.word 0x0A000000 0x00010405 0x0B54233C\n.word 0x0C000000 0x0000000A 0x00028A1E\n.word 0x0A000000 0x00010607 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\nD_8011F2F4:\n.word 0x02000000 0x00000080 D_8011F2C4\n.word 0x0C000000 0x00000005 0x00000A1E\n.word 0x0A000000 0x00010004 0x0BF6A33C\n.word 0x0C000000 0x00000014 0x00028A1E\n.word 0x02000000 0x00000001 D_8011F1B0\n.word 0x02000000 0x00000002 D_8011F1E0\n.word 0x02000000 0x00000004 D_8011F210\n.word 0x02000000 0x00000008 D_8011F228\n.word 0x02000000 0x00000010 D_8011F258\n.word 0x02000000 0x00000020 D_8011F27C\n.word 0x02000000 0x00000040 D_8011F294\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F384:\n.word 0x0B000000 0x0001090C 0x0B54233C\n.word 0x0B000000 0x00020000 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F3A8:\n.word 0x0B000000 0x000F0709 0x0B54233C\n.word 0x0B000000 0x00030001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F3CC:\n.word 0x0B000000 0x00070106 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F3E4:\n.word 0x0B000000 0x00050408 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F3FC:\n.word 0x0B000000 0x000A080A 0x0B54233C\n.word 0x0B000000 0x000B0001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F420:\n.word 0x0B000000 0x000C0103 0x0B54233C\n.word 0x0B000000 0x000D0000 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F444:\n.word 0x0B000000 0x0001080C 0x0C94233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F45C:\n.word 0x0B000000 0x00010002 0x0B54233C\n.word 0x0B000000 0x000E0102 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F480:\n.word 0x02000000 0x00000001 D_8011F384\n.word 0x02000000 0x00000002 D_8011F3A8\n.word 0x02000000 0x00000004 D_8011F3CC\n.word 0x02000000 0x00000008 D_8011F3E4\n.word 0x02000000 0x00000010 D_8011F3FC\n.word 0x02000000 0x00000020 D_8011F420\n.word 0x02000000 0x00000040 D_8011F444\n.word 0x02000000 0x00000080 D_8011F45C\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F4EC:\n.word 0x00000000 0x00000000 D_8011F2F4\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F504:\n.word 0x0F000000 0x0001090C 0x0B54233C\n.word 0x0F000000 0x00020000 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F528:\n.word 0x0F000000 0x000F0709 0x0B54233C\n.word 0x0F000000 0x00030001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F54C:\n.word 0x0F000000 0x00070106 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F564:\n.word 0x0F000000 0x00050408 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F57C:\n.word 0x0F000000 0x000A080A 0x0B54233C\n.word 0x0F000000 0x000B0001 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F5A0:\n.word 0x0F000000 0x000C0103 0x0B54233C\n.word 0x0F000000 0x000D0000 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F5C4:\n.word 0x0F000000 0x0001080C 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F5DC:\n.word 0x0F000000 0x00010002 0x0B54233C\n.word 0x0F000000 0x000E0102 0x0B54233C\n.word 0x00000000 0x00000000 0x00000A1E\nD_8011F600:\n.word 0x02000000 0x00000001 D_8011F504\n.word 0x02000000 0x00000002 D_8011F528\n.word 0x02000000 0x00000004 D_8011F54C\n.word 0x02000000 0x00000008 D_8011F564\n.word 0x02000000 0x00000010 D_8011F57C\n.word 0x02000000 0x00000020 D_8011F5A0\n.word 0x02000000 0x00000040 D_8011F5C4\n.word 0x02000000 0x00000080 D_8011F5DC\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F66C: .word 0x00000000 ; nullptr\nD_8011F670: .word 0x00000000 ; nullptr\nD_8011F674: .word D_8011F480\nD_8011F678: .word 0x00000000\nD_8011F67C: .word 0x00000000\nD_8011F680: .word 0x00000000\n\nD_8011F684:\n.word 0x08000000 0x00000001 0x00000514\n.word 0x02000000 0x00000004 0x0B54233C\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F6A8:\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F6B4:\n.word 0x02000000 0x000000B0 0x08CF1932\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F6CC:\n.word 0x02000000 0x00000041 0x08CF1932\n.word 0x00000000 0x00000000 0x00000000\n\nD_8011F6E4:\n.word 0x01000000 0x00000019 0x0C96A846\n.word 0x00000000 0x00000000 0x0000051E\nD_8011F6FC:\n.word 0x02000000 0x00000002 D_8011F6E4\n.word 0x01000000 0x00000019 0x0C96A846\n.word 0x00000000 0x00000000 0x0B54233C\nD_8011F720:\n.word 0x01000000 0x0000001E 0x0C96A846\n.word 0x00000000 0x00000000 0x0000051E\nD_8011F738:\n.word 0x02000000 0x00000030 D_8011F720\n.word 0x01000000 0x00000019 0x0C96A846\n.word 0x00000000 0x00000000 0x0B54233C\n\nD_8011F75C:\n.word 0x00000000\n\nD_8011F760:\n.word 0x0E0A0003\n.word 0x0204130B\n.word 0x05060C0D\n.word 0x09070801\n\nD_8011F770:\n.word 0x0E010B0A\n.word 0x130C0006\n.word 0x09030D04\n.word 0x08070205\n\nD_8011F780:\n.word 0x0E0B0609\n.word 0x0C07030D\n.word 0x02040A13\n.word 0x00080501\n\nD_8011F790:\n.word 0x0E05090A\n.word 0x0B07130C\n.word 0x0006030D\n.word 0x04080201\n\nD_8011F7A0:\n.word 0x0E080D0B\n.word 0x0A130607\n.word 0x0C000903\n.word 0x04020501\n\nD_8011F7B0:\n.word 0x0E030B0A\n.word 0x130C0006\n.word 0x090D0408\n.word 0x07020501\n\nD_8011F7C0:\n.word 0x0E020903\n.word 0x06070805\n.word 0x04130B0D\n.word 0x0A0C0001\n\nD_8011F7D0:\n.word 0x0E041309\n.word 0x0B0A030C\n.word 0x07000106\n.word 0x0D080205\n\nD_8011F7E0:\n.word D_8011F760\n.word D_8011F770\n.word D_8011F780\n.word D_8011F790\n.word D_8011F7A0\n.word D_8011F7B0\n.word D_8011F7C0\n.word D_8011F7D0\n\nD_8011F800:\n.word 0x5A463C1E\n.word 0x14141414\n.word 0x0A0A0A0A\n.word 0x0A0A0A0A\n\nD_8011F810:\n.word 0x50321414\n.word 0x140A140A\n.word 0x0A0A140A\n.word 0x0A0A0A00\n\nD_8011F820:\n.word 0x501E321E\n.word 0x1E141414\n.word 0x14141E14\n.word 0x1E0A0A0A\n\nD_8011F830:\n.word 0x5A32141E\n.word 0x140A140A\n.word 0x1E0A0A0A\n.word 0x0A0A0A0A\n\nD_8011F840:\n.word 0x5A321E1E\n.word 0x1E141414\n.word 0x0A1E0A0A\n.word 0x0A0A0A0A\n\nD_8011F850:\n.word 0x5A321E3C\n.word 0x14141E14\n.word 0x0A0A0A0A\n.word 0x0A0A0A0A\n\nD_8011F860:\n.word 0x46282828\n.word 0x1E141E1E\n.word 0x1428281E\n.word 0x280A280A\n\nD_8011F870:\n.word 0x50323C14\n.word 0x141E141E\n.word 0x0A1E140A\n.word 0x0A0A0A0A\n\nD_8011F880:\n.word D_8011F800\n.word D_8011F810\n.word D_8011F820\n.word D_8011F830\n.word D_8011F840\n.word D_8011F850\n.word D_8011F860\n.word D_8011F870\n\nD_8011F8A0: .word D_8011F684\nD_8011F8A4: .word D_8011F6A8\n\nD_8011F8A8: .word D_8011F6B4\nD_8011F8AC: .word D_8011F6CC\n\nD_8011F8B0: .word D_8011F6FC\nD_8011F8B4: .word D_8011F738\n\nD_8011F8B8: .word 0x00000000 ; align 16?\nD_8011F8BC: .word 0x00000000\n\nD_8011F8C0: .word 0x02021006\nD_8011F8C4: .word 0x08061404\nD_8011F8C8: .word 0x00000000\nD_8011F8CC: .word 0x00000000\nD_8011F8D0: .word 0x01020408\n\npercent_d_str_format:\n.asciiz "%d" ; 0x25640000\n.align 4\n\nD_8011F8D8: .word 0x3FF80000\nD_8011F8DC: .word 0x00000000\n\nD_8011F8E0: .word 0x3F800000\nD_8011F8E4: .word 0x3F800000\nD_8011F8E8: .word 0x3F800000\nD_8011F8EC: .word 0x3F800000\nD_8011F8F0: .word 0x40000000\nD_8011F8F4: .word 0x3F800000\nD_8011F8F8: .word 0x00000000\nD_8011F8FC: .word 0x40000000\nD_8011F900: .word 0x3F800000\nD_8011F904: .word 0xBF800000\nD_8011F908: .word 0x3F800000\nD_8011F90C: .word 0x3F800000\nD_8011F910: .word 0xBF800000\nD_8011F914: .word 0xBF800000\nD_8011F918: .word 0x3F800000\nD_8011F91C: .word 0x00000000\nD_8011F920: .word 0xBF800000\nD_8011F924: .word 0x3F800000\nD_8011F928: .word 0xBF800000\nD_8011F92C: .word 0x40000000\nD_8011F930: .word 0x3F800000\nD_8011F934: .word 0x3F800000\nD_8011F938: .word 0xBF800000\nD_8011F93C: .word 0x3F800000\n\nD_8011F940: .word 0x3FD33333\nD_8011F944: .word 0x33333333\n\nD_8011F948: .word 0x3FE00000\nD_8011F94C: .word 0x00000000\nD_8011F950: .word 0x3FE00000\nD_8011F954: .word 0x00000000\n\nD_8011F958: .word 0x3FE00000\nD_8011F95C: .word 0x00000000\n\nD_8011F960: .word 0x3FE00000\nD_8011F964: .word 0x00000000\n\nD_8011F968: .word 0x3FF80000\nD_8011F96C: .word 0x00000000\n\nD_8011F970: .word 0x3FE99999\nD_8011F974: .word 0x9999999A\n\nD_8011F978: .word 0x3FE99999\nD_8011F97C: .word 0x9999999A\n\n.align 8\n\nD_8011FA20_jump_table:\n.word L8011CDC8\n.word L8011C9CC\n.word L8011C944\n.word L8011CA8C\n.word L8011CAD4\n.word L8011CCDC\n.word L8011CA80\n.word L8011CB1C\n.word L8011C9E4\n.word L8011CD48\n.word L8011CD84\n.word L8011CA48\n.word L8011CCAC\n.word L8011C944\n.word L8011CA64\n.word L8011CD08\n.word L8011C944\n.word L8011CBC8\n.word L8011C9CC\n.word L8011C978\n\n.align 16\n\nbss:\nD_8011FA70:\n.word 0\n.word 0\n\nD_8011FA78:\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n\nD_8011FA98:\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n\nD_8011FAB8: .word 0\n\nD_8011FABC: .word 0\n\nD_8011FAC0: .word 0\n\nD_8011FAC4: .word 0\n\nD_8011FAD4: .word 0\n\nD_8011FAD8: .word 0\n\nD_8011FAF0:\n.word 0\n.word 0\n\nD_8011FAF8:\n.word 0\n.word 0\n.word 0\n.word 0\n\n; boo\nD_8011FB08: .word 0\n; boo\nD_8011FB0C: .word 0\n\nD_8011FB10:\n.word 0\n.word 0\n\nD_8011FB18:\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n.word 0\n\nbank_model_bss:\nD_8011FB40: .word 0\n\n; gates bss entries (probably 2 words for 2 gates)\nD_8011FB44:\n.word 0\n.word 0\n\nD_8011FB4C: .word 0\n\nD_8011FB50: .word 0\n\nD_8011FB54: .word 0\n\nD_8011FB58: .word 0\n\nD_8011FB5C: .halfword 0\n\nD_8011FB5E: .halfword 0\n\nD_8011FB60: .word 0\n\nD_8011FB64: .halfword 0\n\nD_8011FB66: .halfword 0\n\nD_8011FB68: .word 0\n\nD_8011FB6C: .word 0\n\nD_8011FB70: .word 0\n\nD_8011FB74: .word 0\n\nD_8011FB78:\n.word 0\n.word 0\n\nD_8011FB80:\n.halfword 0\nD_8011FB82:\n.halfword 0\n.word 0\n.word 0\n\nD_8011FB8C: .halfword 0\nD_8011FB8E: .halfword 0\n\nD_8011FB90:\n.word 0\n.word 0\n\nD_8011FB98:\n.word 0\n.word 0\n.word 0\n.word 0\n\nD_8011FBA8:\n.word 0\n.word 0\n.word 0\n.word 0\n\n; Player index of player that is in the lead (or something)?\nD_8011FBB8: .word 0\n\n; Player index of player that is in the lead (or something)?\nD_8011FBBC: .word 0\n\n.align 16\n  '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Entering Mini-Game","","","","","","","","","","","","","","Stepped on Star Space","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Ho ho ho! (Millennium Star)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Mario Party 3 (laughter)","Mario Party 3 (laughter)","Game Over","Start!","New Record!","Finish!","MISS!","DRAW!","Bob-omb voice","Boo laugh","Thwomp cry","Metal! (Koopa Troopa)","Koopa cry","Goomba cry","Metal! (Koopa Troopa)","Whomp cry","Boo cry","Got Item!","Chance Time!","Mario: Hoo hoo! I got it!","Mario: Oh, I lost!","Mario: I'm the best!","Mario: Yahoo! Mario's the superstar!","Mario cry","Mario: Yahoo! Mario's the winner!","Luigi cry","Luigi: Ahaha! I'm-a got it!","Luigi: Oh, I lost!","Luigi: I'm the best!","Luigi: Yes! Luigi's the superstar!","Luigi cry","Luigi: Yes! Luigi's the winner!","Luigi: Ohhh...","Peach: Yeah! I got it!","Peach: Oh, I lost!","Peach: I'm the best!","Peach: Yeah! Peach is the superstar!","Peach cry","Peach: Yeah! Peach is the winner!","Peach cry","Yoshi cry","Yoshi cry","Yoshi cry","DK cry","DK cry","DK cry","DK cry","DK cry","Wario: Hehehehe! I got it!","Wario: Oh, I lost!","Wario: I'm-a the best!","Wario: Yeah, Wario is the superstar!","Wario cry","Wario: Oh yeah! Wario is the winner!","Wario cry","Waluigi: Heheh! I got it!","Waluigi: Oh, I lost!","Waluigi: I'm the best!","Waluigi: Yeah! Waluigi's the superstar!","Waluigi cry","Waluigi: Yeah! Waluigi's the winner!","Waluigi cry","Daisy: Yay! I got it!","Daisy: Oh, I lost!","Daisy: I'm the best!","Daisy: Yeah! Daisy's the superstar!","Daisy cry","Daisy: Yeah! Daisy's the winner!","Toad: Yooo!","Toad: Yahoo!","Toad: Ohhh...","Toad: OK!","Bowser laughs","Bowser roars","Bowser growls","Bowser barks","Baby Bowser barks","","Chain Chomp cry","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Fanfare (Curtain Call)","Stoplight (when starting racing Mini-Games)","","","","","","","","","","","","","Horse Steps (Rocking Raceway)","Horse Steps (Rocking Raceway)","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","Chicken Noises (Fowl Play)","","","","","","","","","Balloon Pop (Bobbing Bow-loons)","Arrow bounce off tower (Bobbinb Bow-loons)","","Dorrie's cry (Dorrie Dip)","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];t.getSoundEffectMapMP3=function(e){return r}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=n(28),s=n(18),l=n(43);t.MP1UHook=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAINFS_CHEAT_FILE=[0,137],t.HOOK_ROM_START_OFFSET=832768,t.HOOK_RAM_START_OFFSET=829696,t.HOOK_JUMP_ROM_OFFSET=84596,t.HOOK_CACHE_DEFAULT_VALUE=1986359841,t}return i(t,e),t.prototype.apply=function(e){var t=new DataView(e);this.applyHook(t),this.writeHookCode(t)},t.prototype.applyHook=function(e){var t=o.parse("J "+(this.HOOK_RAM_START_OFFSET+4)),n=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+12)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+12,0);var r=l.getCheatRoutineBuffer({endInsts:n});s.mainfs.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],r)},t}(a.HookBase))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.Opcodes={WRITE8:128,WRITE16:129,IF8:208,IF16:209,IFNOT8:210,IFNOT16:211};var i=function(){function e(){}return e.parse=function(t){var n=e.splitInput(t);if(!n.length)return r.$$log("Gameshark code string was empty"),null;if(n.length%2)return r.$$log("Gameshark code string was malformed"),null;for(var i=[],a=0;a<n.length;a+=2){var o=parseInt(n[a],16),s=parseInt(n[a+1],16);if(!o)return r.$$log("Invalid code instruction: "+n[a]),null;var l=e.getCode(o,s);if(!l)return r.$$log("Could not parse code: "+r.$$hex(o)+" "+r.$$hex(s)),null;i.push(l)}return i},e.getCode=function(t,n){var r=e.getOpcode(t);if(null===r)return null;var i=16777215&t|2147483648;return e.opcodeHas8BitValue(r)&&(n&=255),{opcode:r,addr:i,value:n}},e.getOpcode=function(e){var n=(4278190080&e)>>>24;if(!n)return null;var r=t.Opcodes;for(var i in r)if(r.hasOwnProperty(i)&&r[i]===n)return i;return null},e.opcodeHas8BitValue=function(e){return"WRITE8"===e||"IF8"===e||"IFNOT8"===e},e.splitInput=function(e){return e&&e.match(/\S+/g)||[]},e.printCodes=function(e){for(var t=0;t<e.length;t++)console.log(e[t].opcode+" "+r.$$hex(e[t].addr)+" "+r.$$hex(e[t].value))},e}();t.Parser=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(28),a=function(){function e(){this.REG1="A3",this.REG2="AT"}return e.prototype.compile=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=void 0,o="compile"+i.opcode;if("function"==typeof this[o]&&(a=this[o](i)),!a)return r.$$log("Error compiling code",i),null;t=t.concat(a)}var s=new ArrayBuffer(4*t.length),l=new DataView(s);for(n=0;n<t.length;n++)l.setUint32(4*n,t[n]);return s},e.prototype.compileWRITE8=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      SB "+this.REG2+" 0("+this.REG1+")\n    ")},e.prototype.compileWRITE16=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      SH "+this.REG2+" 0("+this.REG1+")\n    ")},e.prototype.compileIF8=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      LB "+this.REG1+" 0("+this.REG1+")\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      BNE "+this.REG1+" "+this.REG2+" 4\n    ")},e.prototype.compileIF16=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      LH "+this.REG1+" 0("+this.REG1+")\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      BNE "+this.REG1+" "+this.REG2+" 4\n    ")},e.prototype.compileIFNOT8=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      LB "+this.REG1+" 0("+this.REG1+")\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      BEQ "+this.REG1+" "+this.REG2+" 4\n    ")},e.prototype.compileIFNOT16=function(e){return i.parse("\n      LUI "+this.REG1+" "+this.getAddrUpper(e.addr)+"\n      ORI "+this.REG1+" "+this.REG1+" "+this.getAddrLower(e.addr)+"\n      LH "+this.REG1+" 0("+this.REG1+")\n      ADDIU "+this.REG2+" R0 "+e.value+"\n      BEQ "+this.REG1+" "+this.REG2+" 4\n    ")},e.prototype.getAddrUpper=function(e){return(4294901760&e)>>>16},e.prototype.getAddrLower=function(e){return 65535&e},e}();t.Compiler=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=n(28),s=n(18),l=n(43);t.MP2UHook=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAINFS_CHEAT_FILE=[0,140],t.HOOK_ROM_START_OFFSET=863168,t.HOOK_RAM_START_OFFSET=860096,t.HOOK_JUMP_ROM_OFFSET=666680,t.HOOK_CACHE_DEFAULT_VALUE=1180792172,t}return i(t,e),t.prototype.apply=function(e){var t=new DataView(e);this.applyHook(t),this.writeHookCode(t)},t.prototype.applyHook=function(e){var t=o.parse("J "+(this.HOOK_RAM_START_OFFSET+4)),n=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);var r=l.getCheatRoutineBuffer({endInsts:n});s.mainfs.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],r)},t}(a.HookBase))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(86),o=n(28),s=n(18),l=n(43);t.MP3UHook=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAINFS_CHEAT_FILE=[0,149],t.HOOK_ROM_START_OFFSET=686128,t.HOOK_RAM_START_OFFSET=683056,t.HOOK_JUMP_ROM_OFFSET=498328,t.HOOK_CACHE_DEFAULT_VALUE=1986359841,t}return i(t,e),t.prototype.apply=function(e){var t=new DataView(e);this.applyHook(t),this.writeHookCode(t)},t.prototype.applyHook=function(e){var t=o.parse("J "+(this.HOOK_RAM_START_OFFSET+4)),n=[e.getUint32(this.HOOK_JUMP_ROM_OFFSET),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+4),e.getUint32(this.HOOK_JUMP_ROM_OFFSET+8)];e.setUint32(this.HOOK_JUMP_ROM_OFFSET,t),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+4,0),e.setUint32(this.HOOK_JUMP_ROM_OFFSET+8,0);var r=l.getCheatRoutineBuffer({endInsts:n});s.mainfs.write(this.MAINFS_CHEAT_FILE[0],this.MAINFS_CHEAT_FILE[1],r)},t}(a.HookBase))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i={6101:6101,6102:6102,6103:6103,6105:6105,6106:6106},a=new Array(256);!function(){for(var e=a,t=0;t<256;t++){for(var n=t,r=8;r>0;r--)1&n?n=(n>>>1^3988292384)>>>0:n>>>=1;e[t]=n>>>0}}(),t.fixChecksum=function(e){function t(e,t){return e<<t|e>>>32-t}var n=function(e){switch(function(e){for(var t=e.byteLength,n=4294967295,r=a,i=0;i<t;i++)n=(n>>>8^r[(n^e[i])>>>0&255])>>>0;return~n>>>0}(new Uint8Array(e,64,4032))){case 1634772129:return i[6101];case 2428202165:return i[6102];case 184880864:return i[6103];case 2562468998:return i[6105];case 2898810890:return i[6106]}return i[6105]}(e),o=function(e){switch(e){case 6101:case 6102:return 4174007772;case 6103:return 2743625561;case 6105:return 3743872054;case 6106:return 535454074}throw"CIC._getChecksumSeed: Bad bootcode "+e}(n),s=[o,o,o,o,o,o],l=s[0],c=s[1],u=s[2],d=s[3],p=s[4],f=s[5];r.$$log("CIC.fixChecksum -> Bootcode: "+n+", seed: "+r.$$hex(o));for(var h,m,_=new DataView(e),g=4096;g<1052672;){var v=_.getUint32(g);f+v>>>0<f&&d++,d>>>=0,f+=v,f>>>=0,u^=v,u>>>=0;var y=t(v,31&v)>>>0;p+=y,p>>>=0,c^=c>v?y:(f^v)>>>0,c>>>=0,l+=6105===n?_.getUint32(1872+(255&g))^v:(p^v)>>>0,l>>>=0,g+=4}6103===n?(h=f^d,h>>>=0,h+=u,h>>>=0,m=p^c,m>>>=0,m+=l,m>>>=0):6106===n?(h=f*d,h>>>=0,h+=u,h>>>=0,m=p*c,m>>>=0,m+=l,m>>>=0):(h=f^d,h>>>=0,h^=u,h>>>=0,m=p^c,m>>>=0,m^=l,m>>>=0),_.setUint32(16,h),_.setUint32(20,m),r.$$log("CIC.fixChecksum -> CRC1: "+r.$$hex(h)+", CRC2: "+r.$$hex(m))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(2);t.updateWindowTitle=function(e){e=e||i.getCurrentBoard().name,e=r.mpFormatToPlainText(e),document.title=e?"PartyPlanner64 - "+e:"PartyPlanner64"}},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(4),i=n(14),a=n(241);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var s=!1,l=null,c=!1,u=null,d={onError:function(e){s=!0,l=e}};function p(e,t,n,r,i,a,o,c,u){s=!1,l=null,function(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(d,arguments)}var f=null,h={};function m(){if(f)for(var e in h){var t=h[e],n=f.indexOf(e);if(-1<n||o("96",e),!g[n])for(var r in t.extractEvents||o("97",e),g[n]=t,n=t.eventTypes){var i=void 0,a=n[r],s=t,l=r;v.hasOwnProperty(l)&&o("99",l),v[l]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&_(c[i],s,l);i=!0}else a.registrationName?(_(a.registrationName,s,l),i=!0):i=!1;i||o("98",r,e)}}}function _(e,t,n){y[e]&&o("100",e),y[e]=t,A[e]=t.eventTypes[n].dependencies}var g=[],v={},y={},A={},x=null,S=null,b=null;function w(e,t,n){var r=e.type||"unknown-event";e.currentTarget=b(n),function(e,t,n,r,i,a,d,f,h){if(p.apply(this,arguments),s){if(s){var m=l;s=!1,l=null}else o("198"),m=void 0;c||(c=!0,u=m)}}(r,t,void 0,e),e.currentTarget=null}function E(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function P(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var C=null;function T(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)w(e,t[r],n[r]);else t&&w(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var V={injectEventPluginOrder:function(e){f&&o("101"),f=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&o("102",t),h[t]=r,n=!0)}n&&m()}};function F(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&o("231",t,typeof n),n)}function D(e){if(null!==e&&(C=E(C,e)),e=C,C=null,e&&(P(e,T),C&&o("95"),c))throw e=u,c=!1,u=null,e}var O=Math.random().toString(36).slice(2),R="__reactInternalInstance$"+O,M="__reactEventHandlers$"+O;function L(e){if(e[R])return e[R];for(;!e[R];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[R]).tag||6===e.tag?e:null}function B(e){return!(e=e[R])||5!==e.tag&&6!==e.tag?null:e}function k(e){if(5===e.tag||6===e.tag)return e.stateNode;o("33")}function I(e){return e[M]||null}function j(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function N(e,t,n){(t=F(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function U(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=j(t);for(t=n.length;0<t--;)N(n[t],"captured",e);for(t=0;t<n.length;t++)N(n[t],"bubbled",e)}}function z(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=F(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=E(n._dispatchListeners,t),n._dispatchInstances=E(n._dispatchInstances,e))}function G(e){e&&e.dispatchConfig.registrationName&&z(e._targetInst,null,e)}function W(e){P(e,U)}var H=!("undefined"==typeof window||!window.document||!window.document.createElement);function q(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var K={animationend:q("Animation","AnimationEnd"),animationiteration:q("Animation","AnimationIteration"),animationstart:q("Animation","AnimationStart"),transitionend:q("Transition","TransitionEnd")},Y={},$={};function X(e){if(Y[e])return Y[e];if(!K[e])return e;var t,n=K[e];for(t in n)if(n.hasOwnProperty(t)&&t in $)return Y[e]=n[t];return e}H&&($=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);var Z=X("animationend"),J=X("animationiteration"),Q=X("animationstart"),ee=X("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function ae(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function oe(){return!0}function se(){return!1}function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?oe:se,this.isPropagationStopped=se,this}function ce(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function ue(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=ce,e.release=ue}i(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oe)},persist:function(){this.isPersistent=oe},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,de(n),n},de(le);var pe=le.extend({data:null}),fe=le.extend({data:null}),he=[9,13,27,32],me=H&&"CompositionEvent"in window,_e=null;H&&"documentMode"in document&&(_e=document.documentMode);var ge=H&&"TextEvent"in window&&!_e,ve=H&&(!me||_e&&8<_e&&11>=_e),ye=String.fromCharCode(32),Ae={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xe=!1;function Se(e,t){switch(e){case"keyup":return-1!==he.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function be(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var we=!1;var Ee={eventTypes:Ae,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(me)e:{switch(e){case"compositionstart":i=Ae.compositionStart;break e;case"compositionend":i=Ae.compositionEnd;break e;case"compositionupdate":i=Ae.compositionUpdate;break e}i=void 0}else we?Se(e,n)&&(i=Ae.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Ae.compositionStart);return i?(ve&&"ko"!==n.locale&&(we||i!==Ae.compositionStart?i===Ae.compositionEnd&&we&&(a=ae()):(re="value"in(ne=r)?ne.value:ne.textContent,we=!0)),i=pe.getPooled(i,t,n,r),a?i.data=a:null!==(a=be(n))&&(i.data=a),W(i),a=i):a=null,(e=ge?function(e,t){switch(e){case"compositionend":return be(t);case"keypress":return 32!==t.which?null:(xe=!0,ye);case"textInput":return(e=t.data)===ye&&xe?null:e;default:return null}}(e,n):function(e,t){if(we)return"compositionend"===e||!me&&Se(e,t)?(e=ae(),ie=re=ne=null,we=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=fe.getPooled(Ae.beforeInput,t,n,r)).data=e,W(t)):t=null,null===a?t:null===t?a:[a,t]}},Pe=null,Ce=null,Te=null;function Ve(e){if(e=S(e)){"function"!=typeof Pe&&o("280");var t=x(e.stateNode);Pe(e.stateNode,e.type,t)}}function Fe(e){Ce?Te?Te.push(e):Te=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Te;if(Te=Ce=null,Ve(e),t)for(e=0;e<t.length;e++)Ve(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n){return e(t,n)}function Me(){}var Le=!1;function Be(e,t){if(Le)return e(t);Le=!0;try{return Oe(e,t)}finally{Le=!1,(null!==Ce||null!==Te)&&(Me(),De())}}var ke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ke[e.type]:"textarea"===t}function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ne(e){if(!H)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Ue(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ze(e){e._valueTracker||(e._valueTracker=function(e){var t=Ue(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ue(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var We=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;We.hasOwnProperty("ReactCurrentDispatcher")||(We.ReactCurrentDispatcher={current:null});var He=/^(.*)[\\\/]/,qe="function"==typeof Symbol&&Symbol.for,Ke=qe?Symbol.for("react.element"):60103,Ye=qe?Symbol.for("react.portal"):60106,$e=qe?Symbol.for("react.fragment"):60107,Xe=qe?Symbol.for("react.strict_mode"):60108,Ze=qe?Symbol.for("react.profiler"):60114,Je=qe?Symbol.for("react.provider"):60109,Qe=qe?Symbol.for("react.context"):60110,et=qe?Symbol.for("react.concurrent_mode"):60111,tt=qe?Symbol.for("react.forward_ref"):60112,nt=qe?Symbol.for("react.suspense"):60113,rt=qe?Symbol.for("react.memo"):60115,it=qe?Symbol.for("react.lazy"):60116,at="function"==typeof Symbol&&Symbol.iterator;function ot(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=at&&e[at]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case $e:return"Fragment";case Ye:return"Portal";case Ze:return"Profiler";case Xe:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Qe:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=st(e.type);n=null,r&&(n=st(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(He,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ut=Object.prototype.hasOwnProperty,dt={},pt={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new ft(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new ft(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new ft(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new ft(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new ft(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new ft(e,3,!0,e,null)}),["capture","download"].forEach(function(e){ht[e]=new ft(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){ht[e]=new ft(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){ht[e]=new ft(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function _t(e){return e[1].toUpperCase()}function gt(e,t,n,r){var i=ht.hasOwnProperty(t)?ht[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ut.call(pt,e)||!ut.call(dt,e)&&(ct.test(e)?pt[e]=!0:(dt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function yt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function At(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=vt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xt(e,t){null!=(t=t.checked)&&gt(e,"checked",t,!1)}function St(e,t){xt(e,t);var n=vt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?wt(e,t.type,n):t.hasOwnProperty("defaultValue")&&wt(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function bt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function wt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,_t);ht[t]=new ft(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,_t);ht[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,_t);ht[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new ft(e,1,!1,e.toLowerCase(),null)});var Et={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Pt(e,t,n){return(e=le.getPooled(Et.change,e,t,n)).type="change",Fe(n),W(e),e}var Ct=null,Tt=null;function Vt(e){D(e)}function Ft(e){if(Ge(k(e)))return e}function Dt(e,t){if("change"===e)return t}var Ot=!1;function Rt(){Ct&&(Ct.detachEvent("onpropertychange",Mt),Tt=Ct=null)}function Mt(e){"value"===e.propertyName&&Ft(Tt)&&Be(Vt,e=Pt(Tt,e,je(e)))}function Lt(e,t,n){"focus"===e?(Rt(),Tt=n,(Ct=t).attachEvent("onpropertychange",Mt)):"blur"===e&&Rt()}function Bt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ft(Tt)}function kt(e,t){if("click"===e)return Ft(t)}function It(e,t){if("input"===e||"change"===e)return Ft(t)}H&&(Ot=Ne("input")&&(!document.documentMode||9<document.documentMode));var jt={eventTypes:Et,_isInputEventSupported:Ot,extractEvents:function(e,t,n,r){var i=t?k(t):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Dt:Ie(i)?Ot?a=It:(a=Bt,o=Lt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=kt),a&&(a=a(e,t)))return Pt(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&wt(i,"number",i.value)}},Nt=le.extend({view:null,detail:null}),Ut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ut[e])&&!!t[e]}function Gt(){return zt}var Wt=0,Ht=0,qt=!1,Kt=!1,Yt=Nt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,qt?"mousemove"===e.type?e.screenX-t:0:(qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ht;return Ht=e.screenY,Kt?"mousemove"===e.type?e.screenY-t:0:(Kt=!0,0)}}),$t=Yt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zt={eventTypes:Xt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?L(t):null):a=null,a===t)return null;var o=void 0,s=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(o=Yt,s=Xt.mouseLeave,l=Xt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=$t,s=Xt.pointerLeave,l=Xt.pointerEnter,c="pointer");var u=null==a?i:k(a);if(i=null==t?i:k(t),(e=o.getPooled(s,a,n,r)).type=c+"leave",e.target=u,e.relatedTarget=i,(n=o.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=u,r=t,a&&r)e:{for(i=r,c=0,o=t=a;o;o=j(o))c++;for(o=0,l=i;l;l=j(l))o++;for(;0<c-o;)t=j(t),c--;for(;0<o-c;)i=j(i),o--;for(;c--;){if(t===i||t===i.alternate)break e;t=j(t),i=j(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(c=a.alternate)||c!==i);)t.push(a),a=j(a);for(a=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)a.push(r),r=j(r);for(r=0;r<t.length;r++)z(t[r],"bubbled",e);for(r=a.length;0<r--;)z(a[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Qt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&o("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&o("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}o("188")}if(n.return!==r.return)n=i,r=a;else{s=!1;for(var l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}s||o("189")}}n.alternate!==r&&o("190")}return 3!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=Nt.extend({relatedTarget:null});function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn=Nt.extend({key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gt,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pn=Yt.extend({dataTransfer:null}),fn=Nt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gt}),hn=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Yt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),_n=[["abort","abort"],[Z,"animationEnd"],[J,"animationIteration"],[Q,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},vn={};function yn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},gn[e]=t,vn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){yn(e,!0)}),_n.forEach(function(e){yn(e,!1)});var An={eventTypes:gn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=vn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=vn[e];if(!i)return null;switch(e){case"keypress":if(0===ln(n))return null;case"keydown":case"keyup":e=dn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Yt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fn;break;case Z:case J:case Q:e=an;break;case ee:e=hn;break;case"scroll":e=Nt;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=$t;break;default:e=le}return W(t=e.getPooled(i,t,n,r)),t}},xn=An.isInteractiveTopLevelEventType,Sn=[];function bn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=L(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=je(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,s=0;s<g.length;s++){var l=g[s];l&&(l=l.extractEvents(r,t,a,i))&&(o=E(o,l))}D(o)}}var wn=!0;function En(e,t){if(!t)return null;var n=(xn(e)?Cn:Tn).bind(null,e);t.addEventListener(e,n,!1)}function Pn(e,t){if(!t)return null;var n=(xn(e)?Cn:Tn).bind(null,e);t.addEventListener(e,n,!0)}function Cn(e,t){Re(Tn,e,t)}function Tn(e,t){if(wn){var n=je(t);if(null===(n=L(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),Sn.length){var r=Sn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Be(bn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Sn.length&&Sn.push(e)}}}var Vn={},Fn=0,Dn="_reactListenersID"+(""+Math.random()).slice(2);function On(e){return Object.prototype.hasOwnProperty.call(e,Dn)||(e[Dn]=Fn++,Vn[e[Dn]]={}),Vn[e[Dn]]}function Rn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ln(e,t){var n,r=Mn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mn(r)}}function Bn(){for(var e=window,t=Rn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Rn((e=t.contentWindow).document)}return t}function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function In(e){var t=Bn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&kn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Ln(n,a);var o=Ln(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jn=H&&"documentMode"in document&&11>=document.documentMode,Nn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,zn=null,Gn=null,Wn=!1;function Hn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Un||Un!==Rn(n)?null:("selectionStart"in(n=Un)&&kn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gn&&en(Gn,n)?null:(Gn=n,(e=le.getPooled(Nn.select,zn,e,t)).type="select",e.target=Un,W(e),e))}var qn={eventTypes:Nn,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=On(a),i=A.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?k(t):window,e){case"focus":(Ie(a)||"true"===a.contentEditable)&&(Un=a,zn=t,Gn=null);break;case"blur":Gn=zn=Un=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Hn(n,r);case"selectionchange":if(jn)break;case"keydown":case"keyup":return Hn(n,r)}return null}};function Kn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Yn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function $n(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:vt(n)}}function Zn(e,t){var n=vt(t.value),r=vt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}V.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=I,S=B,b=k,V.injectEventPluginsByName({SimpleEventPlugin:An,EnterLeaveEventPlugin:Zt,ChangeEventPlugin:jt,SelectEventPlugin:qn,BeforeInputEventPlugin:Ee});var Qn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Qn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function ar(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function lr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function cr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=lr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(or).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var ur=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dr(e,t){t&&(ur[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!=typeof t.style&&o("62",""))}function pr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(e,t){var n=On(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=A[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Pn("scroll",e);break;case"focus":case"blur":Pn("focus",e),Pn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ne(i)&&Pn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&En(i,e)}n[i]=!0}}}function hr(){}var mr=null,_r=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yr="function"==typeof setTimeout?setTimeout:void 0,Ar="function"==typeof clearTimeout?clearTimeout:void 0,xr=a.unstable_scheduleCallback,Sr=a.unstable_cancelCallback;function br(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function wr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Er=[],Pr=-1;function Cr(e){0>Pr||(e.current=Er[Pr],Er[Pr]=null,Pr--)}function Tr(e,t){Er[++Pr]=e.current,e.current=t}var Vr={},Fr={current:Vr},Dr={current:!1},Or=Vr;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Vr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mr(e){return null!=(e=e.childContextTypes)}function Lr(e){Cr(Dr),Cr(Fr)}function Br(e){Cr(Dr),Cr(Fr)}function kr(e,t,n){Fr.current!==Vr&&o("168"),Tr(Fr,t),Tr(Dr,n)}function Ir(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in e||o("108",st(t)||"Unknown",a);return i({},n,r)}function jr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Vr,Or=Fr.current,Tr(Fr,t),Tr(Dr,Dr.current),!0}function Nr(e,t,n){var r=e.stateNode;r||o("169"),n?(t=Ir(e,t,Or),r.__reactInternalMemoizedMergedChildContext=t,Cr(Dr),Cr(Fr),Tr(Fr,t)):Cr(Dr),Tr(Dr,n)}var Ur=null,zr=null;function Gr(e){return function(t){try{return e(t)}catch(e){}}}function Wr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hr(e,t,n,r){return new Wr(e,t,n,r)}function qr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kr(e,t){var n=e.alternate;return null===n?((n=Hr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yr(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)qr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case $e:return $r(n.children,i,a,t);case et:return Xr(n,3|i,a,t);case Xe:return Xr(n,2|i,a,t);case Ze:return(e=Hr(12,n,t,4|i)).elementType=Ze,e.type=Ze,e.expirationTime=a,e;case nt:return(e=Hr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Je:s=10;break e;case Qe:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}o("130",null==e?e:typeof e,"")}return(t=Hr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function $r(e,t,n,r){return(e=Hr(7,e,r,t)).expirationTime=n,e}function Xr(e,t,n,r){return e=Hr(8,e,r,t),t=0==(1&t)?Xe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Zr(e,t,n){return(e=Hr(6,e,null,t)).expirationTime=n,e}function Jr(e,t,n){return(t=Hr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,a=t.latestPingedTime;0===(i=0!==i?i:a)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function ai(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ss(),i=$a(r=$o(r,e));i.payload=t,null!=n&&(i.callback=n),Go(),Za(e,i),Jo(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ss(),i=$a(r=$o(r,e));i.tag=Ga,i.payload=t,null!=n&&(i.callback=n),Go(),Za(e,i),Jo(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ss(),r=$a(n=$o(n,e));r.tag=Wa,null!=t&&(r.callback=t),Go(),Za(e,r),Jo(e,n)}};function si(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,a))}function li(e,t,n){var r=!1,i=Vr,a=t.contextType;return"object"==typeof a&&null!==a?a=Ua(a):(i=Mr(t)?Or:Fr.current,a=(r=null!=(r=t.contextTypes))?Rr(e,i):Vr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ci(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function ui(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ua(a):(a=Mr(t)?Or:Fr.current,i.context=Rr(e,a)),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState),"function"==typeof(a=t.getDerivedStateFromProps)&&(ai(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&oi.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var di=Array.isArray;function pi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&o("309"),r=n.stateNode),r||o("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&o("284"),n._owner||o("290",e)}return e}function fi(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function hi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Kr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Zr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=pi(e,t,n),r.return=e,r):((r=Yr(n.type,n.key,n.props,null,e.mode,r)).ref=pi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=$r(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Zr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ke:return(n=Yr(t.type,t.key,t.props,null,e.mode,n)).ref=pi(e,null,t),n.return=e,n;case Ye:return(t=Jr(t,e.mode,n)).return=e,t}if(di(t)||ot(t))return(t=$r(t,e.mode,n,null)).return=e,t;fi(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ke:return n.key===i?n.type===$e?d(e,t,n.props.children,r,i):c(e,t,n,r):null;case Ye:return n.key===i?u(e,t,n,r):null}if(di(n)||ot(n))return null!==i?null:d(e,t,n,r,null);fi(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ke:return e=e.get(null===r.key?n:r.key)||null,r.type===$e?d(t,e,r.props.children,i,r.key):c(t,e,r,i);case Ye:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(di(r)||ot(r))return d(t,e=e.get(n)||null,r,i,null);fi(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,_=null;null!==d&&m<s.length;m++){d.index>m?(_=d,d=null):_=d.sibling;var g=f(i,d,s[m],l);if(null===g){null===d&&(d=_);break}e&&d&&null===g.alternate&&t(i,d),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g,d=_}if(m===s.length)return n(i,d),c;if(null===d){for(;m<s.length;m++)(d=p(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return c}for(d=r(i,d);m<s.length;m++)(_=h(d,i,m,s[m],l))&&(e&&null!==_.alternate&&d.delete(null===_.key?m:_.key),o=a(_,o,m),null===u?c=_:u.sibling=_,u=_);return e&&d.forEach(function(e){return t(i,e)}),c}function _(i,s,l,c){var u=ot(l);"function"!=typeof u&&o("150"),null==(l=u.call(l))&&o("151");for(var d=u=null,m=s,_=s=0,g=null,v=l.next();null!==m&&!v.done;_++,v=l.next()){m.index>_?(g=m,m=null):g=m.sibling;var y=f(i,m,v.value,c);if(null===y){m||(m=g);break}e&&m&&null===y.alternate&&t(i,m),s=a(y,s,_),null===d?u=y:d.sibling=y,d=y,m=g}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;_++,v=l.next())null!==(v=p(i,v.value,c))&&(s=a(v,s,_),null===d?u=v:d.sibling=v,d=v);return u}for(m=r(i,m);!v.done;_++,v=l.next())null!==(v=h(m,i,_,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?_:v.key),s=a(v,s,_),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),u}return function(e,r,a,l){var c="object"==typeof a&&null!==a&&a.type===$e&&null===a.key;c&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case Ke:e:{for(u=a.key,c=r;null!==c;){if(c.key===u){if(7===c.tag?a.type===$e:c.elementType===a.type){n(e,c.sibling),(r=i(c,a.type===$e?a.props.children:a.props)).ref=pi(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===$e?((r=$r(a.props.children,e.mode,l,a.key)).return=e,e=r):((l=Yr(a.type,a.key,a.props,null,e.mode,l)).ref=pi(e,r,a),l.return=e,e=l)}return s(e);case Ye:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jr(a,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Zr(a,e.mode,l)).return=e,e=r),s(e);if(di(a))return m(e,r,a,l);if(ot(a))return _(e,r,a,l);if(u&&fi(e,a),void 0===a&&!c)switch(e.tag){case 1:case 0:o("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var mi=hi(!0),_i=hi(!1),gi={},vi={current:gi},yi={current:gi},Ai={current:gi};function xi(e){return e===gi&&o("174"),e}function Si(e,t){Tr(Ai,t),Tr(yi,e),Tr(vi,gi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Cr(vi),Tr(vi,t)}function bi(e){Cr(vi),Cr(yi),Cr(Ai)}function wi(e){xi(Ai.current);var t=xi(vi.current),n=tr(t,e.type);t!==n&&(Tr(yi,e),Tr(vi,n))}function Ei(e){yi.current===e&&(Cr(vi),Cr(yi))}var Pi=0,Ci=2,Ti=4,Vi=8,Fi=16,Di=32,Oi=64,Ri=128,Mi=We.ReactCurrentDispatcher,Li=0,Bi=null,ki=null,Ii=null,ji=null,Ni=null,Ui=null,zi=0,Gi=null,Wi=0,Hi=!1,qi=null,Ki=0;function Yi(){o("321")}function $i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Xi(e,t,n,r,i,a){if(Li=a,Bi=t,Ii=null!==e?e.memoizedState:null,Mi.current=null===Ii?ca:ua,t=n(r,i),Hi){do{Hi=!1,Ki+=1,Ii=null!==e?e.memoizedState:null,Ui=ji,Gi=Ni=ki=null,Mi.current=ua,t=n(r,i)}while(Hi);qi=null,Ki=0}return Mi.current=la,(e=Bi).memoizedState=ji,e.expirationTime=zi,e.updateQueue=Gi,e.effectTag|=Wi,e=null!==ki&&null!==ki.next,Li=0,Ui=Ni=ji=Ii=ki=Bi=null,zi=0,Gi=null,Wi=0,e&&o("300"),t}function Zi(){Mi.current=la,Li=0,Ui=Ni=ji=Ii=ki=Bi=null,zi=0,Gi=null,Wi=0,Hi=!1,qi=null,Ki=0}function Ji(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ni?ji=Ni=e:Ni=Ni.next=e,Ni}function Qi(){if(null!==Ui)Ui=(Ni=Ui).next,Ii=null!==(ki=Ii)?ki.next:null;else{null===Ii&&o("310");var e={memoizedState:(ki=Ii).memoizedState,baseState:ki.baseState,queue:ki.queue,baseUpdate:ki.baseUpdate,next:null};Ni=null===Ni?ji=e:Ni.next=e,Ii=ki.next}return Ni}function ea(e,t){return"function"==typeof t?t(e):t}function ta(e){var t=Qi(),n=t.queue;if(null===n&&o("311"),n.lastRenderedReducer=e,0<Ki){var r=n.dispatch;if(null!==qi){var i=qi.get(n);if(void 0!==i){qi.delete(n);var a=t.memoizedState;do{a=e(a,i.action),i=i.next}while(null!==i);return Jt(a,t.memoizedState)||(xa=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var l=i=null,c=r,u=!1;do{var d=c.expirationTime;d<Li?(u||(u=!0,l=s,i=a),d>zi&&(zi=d)):a=c.eagerReducer===e?c.eagerState:e(a,c.action),s=c,c=c.next}while(null!==c&&c!==r);u||(l=s,i=a),Jt(a,t.memoizedState)||(xa=!0),t.memoizedState=a,t.baseUpdate=l,t.baseState=i,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Gi?(Gi={lastEffect:null}).lastEffect=e.next=e:null===(t=Gi.lastEffect)?Gi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Gi.lastEffect=e),e}function ra(e,t,n,r){var i=Ji();Wi|=e,i.memoizedState=na(t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Qi();r=void 0===r?null:r;var a=void 0;if(null!==ki){var o=ki.memoizedState;if(a=o.destroy,null!==r&&$i(r,o.deps))return void na(Pi,n,a,r)}Wi|=e,i.memoizedState=na(t,n,a,r)}function aa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function oa(){}function sa(e,t,n){25>Ki||o("301");var r=e.alternate;if(e===Bi||null!==r&&r===Bi)if(Hi=!0,e={expirationTime:Li,action:n,eagerReducer:null,eagerState:null,next:null},null===qi&&(qi=new Map),void 0===(n=qi.get(t)))qi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Go();var i=Ss(),a={expirationTime:i=$o(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,u=r(c,n);if(a.eagerReducer=r,a.eagerState=u,Jt(u,c))return}catch(e){}Jo(e,i)}}var la={readContext:Ua,useCallback:Yi,useContext:Yi,useEffect:Yi,useImperativeHandle:Yi,useLayoutEffect:Yi,useMemo:Yi,useReducer:Yi,useRef:Yi,useState:Yi,useDebugValue:Yi},ca={readContext:Ua,useCallback:function(e,t){return Ji().memoizedState=[e,void 0===t?null:t],e},useContext:Ua,useEffect:function(e,t){return ra(516,Ri|Oi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ra(4,Ti|Di,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,Ti|Di,e,t)},useMemo:function(e,t){var n=Ji();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=sa.bind(null,Bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ji().memoizedState=e},useState:function(e){var t=Ji();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e}).dispatch=sa.bind(null,Bi,e),[t.memoizedState,e]},useDebugValue:oa},ua={readContext:Ua,useCallback:function(e,t){var n=Qi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Ua,useEffect:function(e,t){return ia(516,Ri|Oi,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,Ti|Di,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,Ti|Di,e,t)},useMemo:function(e,t){var n=Qi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ta,useRef:function(){return Qi().memoizedState},useState:function(e){return ta(ea)},useDebugValue:oa},da=null,pa=null,fa=!1;function ha(e,t){var n=Hr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function _a(e){if(fa){var t=pa;if(t){var n=t;if(!ma(e,t)){if(!(t=br(n))||!ma(e,t))return e.effectTag|=2,fa=!1,void(da=e);ha(da,n)}da=e,pa=wr(t)}else e.effectTag|=2,fa=!1,da=e}}function ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;da=e}function va(e){if(e!==da)return!1;if(!fa)return ga(e),fa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vr(t,e.memoizedProps))for(t=pa;t;)ha(e,t),t=br(t);return ga(e),pa=da?br(e.stateNode):null,!0}function ya(){pa=da=null,fa=!1}var Aa=We.ReactCurrentOwner,xa=!1;function Sa(e,t,n,r){t.child=null===e?_i(t,null,n,r):mi(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var a=t.ref;return Na(t,i),r=Xi(e,t,n,r,a,i),null===e||xa?(t.effectTag|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oa(e,t,i))}function wa(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||qr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Yr(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Oa(e,t,a):(t.effectTag|=1,(e=Kr(o,r)).ref=t.ref,e.return=t,t.child=e)}function Ea(e,t,n,r,i,a){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(xa=!1,i<a)?Oa(e,t,a):Ca(e,t,n,r,a)}function Pa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ca(e,t,n,r,i){var a=Mr(n)?Or:Fr.current;return a=Rr(t,a),Na(t,i),n=Xi(e,t,n,r,a,i),null===e||xa?(t.effectTag|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oa(e,t,i))}function Ta(e,t,n,r,i){if(Mr(n)){var a=!0;jr(t)}else a=!1;if(Na(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),li(t,n,r),ui(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=Ua(c):c=Rr(t,c=Mr(n)?Or:Fr.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ci(t,o,r,c),qa=!1;var p=t.memoizedState;l=o.state=p;var f=t.updateQueue;null!==f&&(to(t,f,r,o,i),l=t.memoizedState),s!==r||p!==l||Dr.current||qa?("function"==typeof u&&(ai(t,n,u,r),l=t.memoizedState),(s=qa||si(t,n,s,r,p,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:ri(t.type,s),l=o.context,"object"==typeof(c=n.contextType)&&null!==c?c=Ua(c):c=Rr(t,c=Mr(n)?Or:Fr.current),(d="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ci(t,o,r,c),qa=!1,l=t.memoizedState,p=o.state=l,null!==(f=t.updateQueue)&&(to(t,f,r,o,i),p=t.memoizedState),s!==r||l!==p||Dr.current||qa?("function"==typeof u&&(ai(t,n,u,r),p=t.memoizedState),(u=qa||si(t,n,s,r,l,p,c))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Va(e,t,n,r,a,i)}function Va(e,t,n,r,i,a){Pa(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return i&&Nr(t,n,!1),Oa(e,t,a);r=t.stateNode,Aa.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=mi(t,e.child,null,a),t.child=mi(t,null,s,a)):Sa(e,t,s,a),t.memoizedState=r.state,i&&Nr(t,n,!0),t.child}function Fa(e){var t=e.stateNode;t.pendingContext?kr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&kr(0,t.context,!1),Si(e,t.containerInfo)}function Da(e,t,n){var r=t.mode,i=t.pendingProps,a=t.memoizedState;if(0==(64&t.effectTag)){a=null;var o=!1}else a={timedOutAt:null!==a?a.timedOutAt:0},o=!0,t.effectTag&=-65;if(null===e)if(o){var s=i.fallback;e=$r(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=$r(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=_i(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,o?(n=i.fallback,i=Kr(r,r.pendingProps),0==(1&t.mode)&&((o=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=o)),r=i.sibling=Kr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=mi(t,r.child,i.children,n)):(s=e.child,o?(o=i.fallback,(i=$r(null,r,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=$r(o,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=mi(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=a,t.child=n,r}function Oa(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Kr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Ra(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Dr.current)xa=!0;else if(r<n){switch(xa=!1,t.tag){case 3:Fa(t),ya();break;case 5:wi(t);break;case 1:Mr(t.type)&&jr(t);break;case 4:Si(t,t.stateNode.containerInfo);break;case 10:Ia(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Da(e,t,n):null!==(t=Oa(e,t,n))?t.sibling:null}return Oa(e,t,n)}}else xa=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Rr(t,Fr.current);if(Na(t,n),i=Xi(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Zi(),Mr(r)){var a=!0;jr(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&ai(t,r,s,e),i.updater=oi,t.stateNode=i,i._reactInternalFiber=t,ui(t,r,e,n),t=Va(null,t,r,!0,a,n)}else t.tag=0,Sa(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return qr(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),a=ri(e,a),s=void 0,i){case 0:s=Ca(null,t,e,a,n);break;case 1:s=Ta(null,t,e,a,n);break;case 11:s=ba(null,t,e,a,n);break;case 14:s=wa(null,t,e,ri(e.type,a),r,n);break;default:o("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return Fa(t),null===(r=t.updateQueue)&&o("282"),i=null!==(i=t.memoizedState)?i.element:null,to(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(ya(),t=Oa(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(pa=wr(t.stateNode.containerInfo),da=t,i=fa=!0),i?(t.effectTag|=2,t.child=_i(t,null,r,n)):(Sa(e,t,r,n),ya()),t=t.child),t;case 5:return wi(t),null===e&&_a(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,vr(r,i)?s=null:null!==a&&vr(r,a)&&(t.effectTag|=16),Pa(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Sa(e,t,s,n),t=t.child),t;case 6:return null===e&&_a(t),null;case 13:return Da(e,t,n);case 4:return Si(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,Ia(t,a=i.value),null!==s){var l=s.value;if(0===(a=Jt(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===i.children&&!Dr.current){t=Oa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.contextDependencies;if(null!==c){s=l.child;for(var u=c.first;null!==u;){if(u.context===r&&0!=(u.observedBits&a)){1===l.tag&&((u=$a(n)).tag=Wa,Za(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),u=n;for(var d=l.return;null!==d;){var p=d.alternate;if(d.childExpirationTime<u)d.childExpirationTime=u,null!==p&&p.childExpirationTime<u&&(p.childExpirationTime=u);else{if(!(null!==p&&p.childExpirationTime<u))break;p.childExpirationTime=u}d=d.return}c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Na(t,n),r=r(i=Ua(i,a.unstable_observedBits)),t.effectTag|=1,Sa(e,t,r,n),t.child;case 14:return a=ri(i=t.type,t.pendingProps),wa(e,t,i,a=ri(i.type,a),r,n);case 15:return Ea(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Mr(r)?(e=!0,jr(t)):e=!1,Na(t,n),li(t,r,i),ui(t,r,i,n),Va(null,t,r,!0,e,n)}o("156")}var Ma={current:null},La=null,Ba=null,ka=null;function Ia(e,t){var n=e.type._context;Tr(Ma,n._currentValue),n._currentValue=t}function ja(e){var t=Ma.current;Cr(Ma),e.type._context._currentValue=t}function Na(e,t){La=e,ka=Ba=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(xa=!0),e.contextDependencies=null}function Ua(e,t){return ka!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(ka=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ba?(null===La&&o("308"),Ba=t,La.contextDependencies={first:t,expirationTime:0}):Ba=Ba.next=t),e._currentValue}var za=0,Ga=1,Wa=2,Ha=3,qa=!1;function Ka(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ya(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function $a(e){return{expirationTime:e,tag:za,payload:null,callback:null,next:null,nextEffect:null}}function Xa(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Za(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ka(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ka(e.memoizedState),i=n.updateQueue=Ka(n.memoizedState)):r=e.updateQueue=Ya(i):null===i&&(i=n.updateQueue=Ya(r));null===i||r===i?Xa(r,t):null===r.lastUpdate||null===i.lastUpdate?(Xa(r,t),Xa(i,t)):(Xa(r,t),i.lastUpdate=t)}function Ja(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ka(e.memoizedState):Qa(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Qa(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ya(t)),t}function eo(e,t,n,r,a,o){switch(n.tag){case Ga:return"function"==typeof(e=n.payload)?e.call(o,r,a):e;case Ha:e.effectTag=-2049&e.effectTag|64;case za:if(null==(a="function"==typeof(e=n.payload)?e.call(o,r,a):e))break;return i({},r,a);case Wa:qa=!0}return r}function to(e,t,n,r,i){qa=!1;for(var a=(t=Qa(e,t)).baseState,o=null,s=0,l=t.firstUpdate,c=a;null!==l;){var u=l.expirationTime;u<i?(null===o&&(o=l,a=c),s<u&&(s=u)):(c=eo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var d=l.expirationTime;d<i?(null===u&&(u=l,null===o&&(a=c)),s<d&&(s=d)):(c=eo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===o&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===u&&(a=c),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=u,e.expirationTime=s,e.memoizedState=c}function no(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ro(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ro(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ro(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&o("191",n),n.call(r)}e=e.nextEffect}}function io(e,t){return{value:e,source:t,stack:lt(t)}}function ao(e){e.effectTag|=4}var oo=void 0,so=void 0,lo=void 0,co=void 0;oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},so=function(){},lo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(xi(vi.current),e=null,n){case"input":o=yt(s,o),r=yt(s,r),e=[];break;case"option":o=Kn(s,o),r=Kn(s,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=$n(s,o),r=$n(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=hr)}dr(n,r),s=n=void 0;var l=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(s in c)c.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(y.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(l||(l={}),l[s]=u[s])}else l||(e||(e=[]),e.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(y.hasOwnProperty(n)?(null!=u&&fr(a,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}l&&(e=e||[]).push("style",l),a=e,(t.updateQueue=a)&&ao(t)}},co=function(e,t,n,r){n!==r&&ao(t)};var uo="function"==typeof WeakSet?WeakSet:Set;function po(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=lt(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function fo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Yo(e,t)}else t.current=null}function ho(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Pi){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Pi&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function mo(e){switch("function"==typeof zr&&zr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Yo(i,e)}}n=n.next}while(n!==t)}break;case 1:if(fo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Yo(e,t)}break;case 5:fo(e);break;case 4:vo(e)}}function _o(e){return 5===e.tag||3===e.tag||4===e.tag}function go(e){e:{for(var t=e.return;null!==t;){if(_o(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ar(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_o(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var a=t,s=i.stateNode,l=n;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else t.insertBefore(i.stateNode,n);else r?(s=t,l=i.stateNode,8===s.nodeType?(a=s.parentNode).insertBefore(l,s):(a=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=hr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function vo(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(mo(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(a=r,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(mo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function yo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ho(Ti,Vi,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i){e[M]=i,"input"===n&&"radio"===i.type&&null!=i.name&&xt(e,i),pr(n,r),r=pr(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?cr(e,s):"dangerouslySetInnerHTML"===o?ir(e,s):"children"===o?ar(e,s):gt(e,o,s,r)}switch(n){case"input":St(e,i);break;case"textarea":Zn(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Yn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Yn(e,!!i.multiple,i.defaultValue,!0):Yn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,a,i,e,r)}break;case 6:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Ss())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=lr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new uo),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=$o(t=Ss(),e),null!==(e=Zo(e,t))&&(Qr(e,t),0!==(t=e.expirationTime)&&bs(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:o("163")}}var Ao="function"==typeof WeakMap?WeakMap:Map;function xo(e,t,n){(n=$a(n)).tag=Ha,n.payload={element:null};var r=t.value;return n.callback=function(){Os(r),po(e,t)},n}function So(e,t,n){(n=$a(n)).tag=Ha;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Io?Io=new Set([this]):Io.add(this));var n=t.value,i=t.stack;po(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function bo(e){switch(e.tag){case 1:Mr(e.type)&&Lr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return bi(),Br(),0!=(64&(t=e.effectTag))&&o("285"),e.effectTag=-2049&t|64,e;case 5:return Ei(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return bi(),null;case 10:return ja(e),null;default:return null}}var wo=We.ReactCurrentDispatcher,Eo=We.ReactCurrentOwner,Po=1073741822,Co=!1,To=null,Vo=null,Fo=0,Do=-1,Oo=!1,Ro=null,Mo=!1,Lo=null,Bo=null,ko=null,Io=null;function jo(){if(null!==To)for(var e=To.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Lr();break;case 3:bi(),Br();break;case 5:Ei(t);break;case 4:bi();break;case 10:ja(t)}e=e.return}Vo=null,Fo=0,Do=-1,Oo=!1,To=null}function No(){for(;null!==Ro;){var e=Ro.effectTag;if(16&e&&ar(Ro.stateNode,""),128&e){var t=Ro.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:go(Ro),Ro.effectTag&=-3;break;case 6:go(Ro),Ro.effectTag&=-3,yo(Ro.alternate,Ro);break;case 4:yo(Ro.alternate,Ro);break;case 8:vo(e=Ro),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Ro=Ro.nextEffect}}function Uo(){for(;null!==Ro;){if(256&Ro.effectTag)e:{var e=Ro.alternate,t=Ro;switch(t.tag){case 0:case 11:case 15:ho(Ci,Pi,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:o("163")}}Ro=Ro.nextEffect}}function zo(e,t){for(;null!==Ro;){var n=Ro.effectTag;if(36&n){var r=Ro.alternate,i=Ro,a=t;switch(i.tag){case 0:case 11:case 15:ho(Fi,Di,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var l=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&no(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}no(0,r,s)}break;case 5:a=i.stateNode,null===r&&4&i.effectTag&&gr(i.type,i.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:o("163")}}128&n&&(null!==(i=Ro.ref)&&(a=Ro.stateNode,"function"==typeof i?i(a):i.current=a)),512&n&&(Lo=e),Ro=Ro.nextEffect}}function Go(){null!==Bo&&Sr(Bo),null!==ko&&ko()}function Wo(e,t){Mo=Co=!0,e.current===t&&o("177");var n=e.pendingCommitExpirationTime;0===n&&o("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Qr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Qr(e,t)):t>n&&Qr(e,t)}ni(0,e)}(e,i>r?i:r),Eo.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,mr=wn,_r=function(){var e=Bn();if(kn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,l=0,c=0,u=e,d=null;t:for(;;){for(var p;u!==t||0!==r&&3!==u.nodeType||(o=a+r),u!==i||0!==n&&3!==u.nodeType||(s=a+n),3===u.nodeType&&(a+=u.nodeValue.length),null!==(p=u.firstChild);)d=u,u=p;for(;;){if(u===e)break t;if(d===t&&++l===r&&(o=a),d===i&&++c===n&&(s=a),null!==(p=u.nextSibling))break;d=(u=d).parentNode}u=p}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),wn=!1,Ro=r;null!==Ro;){i=!1;var s=void 0;try{Uo()}catch(e){i=!0,s=e}i&&(null===Ro&&o("178"),Yo(Ro,s),null!==Ro&&(Ro=Ro.nextEffect))}for(Ro=r;null!==Ro;){i=!1,s=void 0;try{No()}catch(e){i=!0,s=e}i&&(null===Ro&&o("178"),Yo(Ro,s),null!==Ro&&(Ro=Ro.nextEffect))}for(In(_r),_r=null,wn=!!mr,mr=null,e.current=t,Ro=r;null!==Ro;){i=!1,s=void 0;try{zo(e,n)}catch(e){i=!0,s=e}i&&(null===Ro&&o("178"),Yo(Ro,s),null!==Ro&&(Ro=Ro.nextEffect))}if(null!==r&&null!==Lo){var l=function(e,t){ko=Bo=Lo=null;var n=is;is=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var a=t;ho(Ri,Pi,a),ho(Pi,Oi,a)}catch(e){r=!0,i=e}r&&Yo(t,i)}t=t.nextEffect}while(null!==t);is=n,0!==(n=e.expirationTime)&&bs(e,n),us||is||Ts(1073741823,!1)}.bind(null,e,r);Bo=a.unstable_runWithPriority(a.unstable_NormalPriority,function(){return xr(l)}),ko=l}Co=Mo=!1,"function"==typeof Ur&&Ur(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Io=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Ho(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){To=e;e:{var a=t,s=Fo,l=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Mr(t.type)&&Lr();break;case 3:bi(),Br(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==a&&null!==a.child||(va(t),t.effectTag&=-3),so(t);break;case 5:Ei(t);var c=xi(Ai.current);if(s=t.type,null!==a&&null!=t.stateNode)lo(a,t,s,l,c),a.ref!==t.ref&&(t.effectTag|=128);else if(l){var u=xi(vi.current);if(va(t)){a=(l=t).stateNode;var d=l.type,p=l.memoizedProps,f=c;switch(a[R]=l,a[M]=p,s=void 0,c=d){case"iframe":case"object":En("load",a);break;case"video":case"audio":for(d=0;d<te.length;d++)En(te[d],a);break;case"source":En("error",a);break;case"img":case"image":case"link":En("error",a),En("load",a);break;case"form":En("reset",a),En("submit",a);break;case"details":En("toggle",a);break;case"input":At(a,p),En("invalid",a),fr(f,"onChange");break;case"select":a._wrapperState={wasMultiple:!!p.multiple},En("invalid",a),fr(f,"onChange");break;case"textarea":Xn(a,p),En("invalid",a),fr(f,"onChange")}for(s in dr(c,p),d=null,p)p.hasOwnProperty(s)&&(u=p[s],"children"===s?"string"==typeof u?a.textContent!==u&&(d=["children",u]):"number"==typeof u&&a.textContent!==""+u&&(d=["children",""+u]):y.hasOwnProperty(s)&&null!=u&&fr(f,s));switch(c){case"input":ze(a),bt(a,p,!0);break;case"textarea":ze(a),Jn(a);break;case"select":case"option":break;default:"function"==typeof p.onClick&&(a.onclick=hr)}s=d,l.updateQueue=s,(l=null!==s)&&ao(t)}else{p=t,f=s,a=l,d=9===c.nodeType?c:c.ownerDocument,u===Qn.html&&(u=er(f)),u===Qn.html?"script"===f?((a=d.createElement("div")).innerHTML="<script><\/script>",d=a.removeChild(a.firstChild)):"string"==typeof a.is?d=d.createElement(f,{is:a.is}):(d=d.createElement(f),"select"===f&&(f=d,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):d=d.createElementNS(u,f),(a=d)[R]=p,a[M]=l,oo(a,t,!1,!1),f=a;var h=c,m=pr(d=s,p=l);switch(d){case"iframe":case"object":En("load",f),c=p;break;case"video":case"audio":for(c=0;c<te.length;c++)En(te[c],f);c=p;break;case"source":En("error",f),c=p;break;case"img":case"image":case"link":En("error",f),En("load",f),c=p;break;case"form":En("reset",f),En("submit",f),c=p;break;case"details":En("toggle",f),c=p;break;case"input":At(f,p),c=yt(f,p),En("invalid",f),fr(h,"onChange");break;case"option":c=Kn(f,p);break;case"select":f._wrapperState={wasMultiple:!!p.multiple},c=i({},p,{value:void 0}),En("invalid",f),fr(h,"onChange");break;case"textarea":Xn(f,p),c=$n(f,p),En("invalid",f),fr(h,"onChange");break;default:c=p}dr(d,c),u=void 0;var _=d,g=f,v=c;for(u in v)if(v.hasOwnProperty(u)){var A=v[u];"style"===u?cr(g,A):"dangerouslySetInnerHTML"===u?null!=(A=A?A.__html:void 0)&&ir(g,A):"children"===u?"string"==typeof A?("textarea"!==_||""!==A)&&ar(g,A):"number"==typeof A&&ar(g,""+A):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(y.hasOwnProperty(u)?null!=A&&fr(h,u):null!=A&&gt(g,u,A,m))}switch(d){case"input":ze(f),bt(f,p,!1);break;case"textarea":ze(f),Jn(f);break;case"option":null!=p.value&&f.setAttribute("value",""+vt(p.value));break;case"select":(c=f).multiple=!!p.multiple,null!=(f=p.value)?Yn(c,!!p.multiple,f,!1):null!=p.defaultValue&&Yn(c,!!p.multiple,p.defaultValue,!0);break;default:"function"==typeof c.onClick&&(f.onclick=hr)}(l=gr(s,l))&&ao(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 6:a&&null!=t.stateNode?co(a,t,a.memoizedProps,l):("string"!=typeof l&&(null===t.stateNode&&o("166")),a=xi(Ai.current),xi(vi.current),va(t)?(s=(l=t).stateNode,a=l.memoizedProps,s[R]=l,(l=s.nodeValue!==a)&&ao(t)):(s=t,(l=(9===a.nodeType?a:a.ownerDocument).createTextNode(l))[R]=t,s.stateNode=l));break;case 11:break;case 13:if(l=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,To=t;break e}l=null!==l,s=null!==a&&null!==a.memoizedState,null!==a&&!l&&s&&(null!==(a=a.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=a,a.nextEffect=c):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),(l||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:bi(),so(t);break;case 10:ja(t);break;case 9:case 14:break;case 17:Mr(t.type)&&Lr();break;case 18:break;default:o("156")}To=null}if(t=e,1===Fo||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)(a=s.expirationTime)>l&&(l=a),(c=s.childExpirationTime)>l&&(l=c),s=s.sibling;t.childExpirationTime=l}if(null!==To)return To;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=bo(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function qo(e){var t=Ra(e.alternate,e,Fo);return e.memoizedProps=e.pendingProps,null===t&&(t=Ho(e)),Eo.current=null,t}function Ko(e,t){Co&&o("243"),Go(),Co=!0;var n=wo.current;wo.current=la;var r=e.nextExpirationTimeToWorkOn;r===Fo&&e===Vo&&null!==To||(jo(),Fo=r,To=Kr((Vo=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==To&&!Ps();)To=qo(To);else for(;null!==To;)To=qo(To)}catch(t){if(ka=Ba=La=null,Zi(),null===To)i=!0,Os(t);else{null===To&&o("271");var a=To,s=a.return;if(null!==s){e:{var l=e,c=s,u=a,d=t;if(s=Fo,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==d&&"object"==typeof d&&"function"==typeof d.then){var p=d;d=c;var f=-1,h=-1;do{if(13===d.tag){var m=d.alternate;if(null!==m&&null!==(m=m.memoizedState)){h=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=d.pendingProps.maxDuration)&&(0>=m?f=0:(-1===f||m<f)&&(f=m))}d=d.return}while(null!==d);d=c;do{if((m=13===d.tag)&&(m=void 0!==d.memoizedProps.fallback&&null===d.memoizedState),m){if(null===(c=d.updateQueue)?((c=new Set).add(p),d.updateQueue=c):c.add(p),0==(1&d.mode)){d.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((s=$a(1073741823)).tag=Wa,Za(u,s))),u.expirationTime=1073741823;break e}c=s;var _=(u=l).pingCache;null===_?(_=u.pingCache=new Ao,m=new Set,_.set(p,m)):void 0===(m=_.get(p))&&(m=new Set,_.set(p,m)),m.has(c)||(m.add(c),u=Xo.bind(null,u,p,c),p.then(u,u)),-1===f?l=1073741823:(-1===h&&(h=10*(1073741822-ti(l,s))-5e3),l=h+f),0<=l&&Do<l&&(Do=l),d.effectTag|=2048,d.expirationTime=s;break e}d=d.return}while(null!==d);d=Error((st(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(u))}Oo=!0,d=io(d,u),l=c;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,Ja(l,s=xo(l,d,s));break e;case 1:if(f=d,h=l.type,u=l.stateNode,0==(64&l.effectTag)&&("function"==typeof h.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Io||!Io.has(u)))){l.effectTag|=2048,l.expirationTime=s,Ja(l,s=So(l,f,s));break e}}l=l.return}while(null!==l)}To=Ho(a);continue}i=!0,Os(t)}}break}if(Co=!1,wo.current=n,ka=Ba=La=null,Zi(),i)Vo=null,e.finishedWork=null;else if(null!==To)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&o("281"),Vo=null,Oo){if(i=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==a&&a<r||0!==s&&s<r)return ei(e,r),void xs(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void xs(e,n,r,t,-1)}t&&-1!==Do?(ei(e,r),(t=10*(1073741822-ti(e,r)))<Do&&(Do=t),t=10*(1073741822-Ss()),t=Do-t,xs(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Yo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Io||!Io.has(r)))return Za(n,e=So(n,e=io(t,e),1073741823)),void Jo(n,1073741823);break;case 3:return Za(n,e=xo(n,e=io(t,e),1073741823)),void Jo(n,1073741823)}n=n.return}3===e.tag&&(Za(e,n=xo(e,n=io(t,e),1073741823)),Jo(e,1073741823))}function $o(e,t){var n=a.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Co&&!Mo)r=Fo;else{switch(n){case a.unstable_ImmediatePriority:r=1073741823;break;case a.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case a.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:r=1;break;default:o("313")}null!==Vo&&r===Fo&&--r}return n===a.unstable_UserBlockingPriority&&(0===ss||r<ss)&&(ss=r),r}function Xo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Vo&&Fo===n?Vo=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&bs(e,n)))}function Zo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Jo(e,t){null!==(e=Zo(e,t))&&(!Co&&0!==Fo&&t>Fo&&jo(),Qr(e,t),Co&&!Mo&&Vo===e||bs(e,e.expirationTime),gs>_s&&(gs=0,o("185")))}function Qo(e,t,n,r,i){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var es=null,ts=null,ns=0,rs=void 0,is=!1,as=null,os=0,ss=0,ls=!1,cs=null,us=!1,ds=!1,ps=null,fs=a.unstable_now(),hs=1073741822-(fs/10|0),ms=hs,_s=50,gs=0,vs=null;function ys(){hs=1073741822-((a.unstable_now()-fs)/10|0)}function As(e,t){if(0!==ns){if(t<ns)return;null!==rs&&a.unstable_cancelCallback(rs)}ns=t,e=a.unstable_now()-fs,rs=a.unstable_scheduleCallback(Cs,{timeout:10*(1073741822-t)-e})}function xs(e,t,n,r,i){e.expirationTime=r,0!==i||Ps()?0<i&&(e.timeoutHandle=yr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,ys(),ms=hs,Vs(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Ss(){return is?ms:(ws(),0!==os&&1!==os||(ys(),ms=hs),ms)}function bs(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ts?(es=ts=e,e.nextScheduledRoot=e):(ts=ts.nextScheduledRoot=e).nextScheduledRoot=es):t>e.expirationTime&&(e.expirationTime=t),is||(us?ds&&(as=e,os=1073741823,Fs(e,1073741823,!1)):1073741823===t?Ts(1073741823,!1):As(e,t))}function ws(){var e=0,t=null;if(null!==ts)for(var n=ts,r=es;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ts)&&o("244"),r===r.nextScheduledRoot){es=ts=r.nextScheduledRoot=null;break}if(r===es)es=i=r.nextScheduledRoot,ts.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ts){(ts=n).nextScheduledRoot=es,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ts)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}as=t,os=e}var Es=!1;function Ps(){return!!Es||!!a.unstable_shouldYield()&&(Es=!0)}function Cs(){try{if(!Ps()&&null!==es){ys();var e=es;do{var t=e.expirationTime;0!==t&&hs<=t&&(e.nextExpirationTimeToWorkOn=hs),e=e.nextScheduledRoot}while(e!==es)}Ts(0,!0)}finally{Es=!1}}function Ts(e,t){if(ws(),t)for(ys(),ms=hs;null!==as&&0!==os&&e<=os&&!(Es&&hs>os);)Fs(as,os,hs>os),ws(),ys(),ms=hs;else for(;null!==as&&0!==os&&e<=os;)Fs(as,os,!1),ws();if(t&&(ns=0,rs=null),0!==os&&As(as,os),gs=0,vs=null,null!==ps)for(e=ps,ps=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ls||(ls=!0,cs=e)}}if(ls)throw e=cs,cs=null,ls=!1,e}function Vs(e,t){is&&o("253"),as=e,os=t,Fs(e,t,!1),Ts(1073741823,!1)}function Fs(e,t,n){if(is&&o("245"),is=!0,n){var r=e.finishedWork;null!==r?Ds(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Ar(r)),Ko(e,n),null!==(r=e.finishedWork)&&(Ps()?e.finishedWork=r:Ds(e,r,t)))}else null!==(r=e.finishedWork)?Ds(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Ar(r)),Ko(e,n),null!==(r=e.finishedWork)&&Ds(e,r,t));is=!1}function Ds(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===ps?ps=[r]:ps.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===vs?gs++:(vs=e,gs=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){Wo(e,t)})}function Os(e){null===as&&o("246"),as.expirationTime=0,ls||(ls=!0,cs=e)}function Rs(e,t){var n=us;us=!0;try{return e(t)}finally{(us=n)||is||Ts(1073741823,!1)}}function Ms(e,t){if(us&&!ds){ds=!0;try{return e(t)}finally{ds=!1}}return e(t)}function Ls(e,t,n){us||is||0===ss||(Ts(ss,!1),ss=0);var r=us;us=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(us=r)||is||Ts(1073741823,!1)}}function Bs(e,t,n,r,i){var a=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||o("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Mr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);o("171"),s=void 0}if(1===n.tag){var l=n.type;if(Mr(l)){n=Ir(n,l,s);break e}}n=s}else n=Vr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=$a(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Go(),Za(a,i),Jo(a,r),r}function ks(e,t,n,r){var i=t.current;return Bs(e,t,n,i=$o(Ss(),i),r)}function Is(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function js(e){var t=1073741822-25*(1+((1073741822-Ss()+500)/25|0));t>=Po&&(t=Po-1),this._expirationTime=Po=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ns(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Us(e,t,n){e={current:t=Hr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function zs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Gs(e,t,n,r,i){var a=n._reactRootContainer;if(a){if("function"==typeof i){var o=i;i=function(){var e=Is(a._internalRoot);o.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Us(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=Is(a._internalRoot);s.call(e)}}Ms(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)})}return Is(a._internalRoot)}function Ws(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return zs(t)||o("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ye,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Pe=function(e,t,n){switch(t){case"input":if(St(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=I(r);i||o("90"),Ge(r),St(r,i)}}}break;case"textarea":Zn(e,n);break;case"select":null!=(t=n.value)&&Yn(e,!!n.multiple,t,!1)}},js.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ns;return Bs(e,t,null,n,r._onCommit),r},js.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},js.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&o("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Vs(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},js.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ns.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ns.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&o("191",n),n()}}},Us.prototype.render=function(e,t){var n=this._internalRoot,r=new Ns;return null!==(t=void 0===t?null:t)&&r.then(t),ks(e,n,null,r._onCommit),r},Us.prototype.unmount=function(e){var t=this._internalRoot,n=new Ns;return null!==(e=void 0===e?null:e)&&n.then(e),ks(null,t,null,n._onCommit),n},Us.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Ns;return null!==(n=void 0===n?null:n)&&i.then(n),ks(t,r,e,i._onCommit),i},Us.prototype.createBatch=function(){var e=new js(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Oe=Rs,Re=Ls,Me=function(){is||0===ss||(Ts(ss,!1),ss=0)};var Hs={createPortal:Ws,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return zs(t)||o("200"),Gs(null,e,t,!0,n)},render:function(e,t,n){return zs(t)||o("200"),Gs(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return zs(n)||o("200"),(null==e||void 0===e._reactInternalFiber)&&o("38"),Gs(e,t,n,!1,r)},unmountComponentAtNode:function(e){return zs(e)||o("40"),!!e._reactRootContainer&&(Ms(function(){Gs(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ws.apply(void 0,arguments)},unstable_batchedUpdates:Rs,unstable_interactiveUpdates:Ls,flushSync:function(e,t){is&&o("187");var n=us;us=!0;try{return Qo(e,t)}finally{us=n,Ts(1073741823,!1)}},unstable_createRoot:function(e,t){return zs(e)||o("299","unstable_createRoot"),new Us(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=us;us=!0;try{Qo(e)}finally{(us=t)||is||Ts(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[B,k,I,V.injectEventPluginsByName,v,W,function(e){P(e,G)},Fe,De,Tn,D]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ur=Gr(function(e){return t.onCommitFiberRoot(n,e)}),zr=Gr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}})(i({},e,{overrideProps:null,currentDispatcherRef:We.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:L,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var qs={default:Hs},Ks=qs&&Hs||qs;e.exports=Ks.default||Ks},function(e,t,n){"use strict";e.exports=n(242)},function(e,t,n){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,a=-1,o=-1,s=!1,l=!1;function c(){if(!s){var e=n.expirationTime;l?b():l=!0,S(p,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var a=i,s=o;i=e,o=t;try{var l=r()}finally{i=a,o=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,c()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function d(){if(-1===a&&null!==n&&1===n.priorityLevel){s=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?c():l=!1}}}function p(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var a=t.unstable_now();if(!(n.expirationTime<=a))break;do{u()}while(null!==n&&n.expirationTime<=a)}else if(null!==n)do{u()}while(null!==n&&!w())}finally{s=!1,r=i,null!==n?c():l=!1,d()}}var f,h,m=Date,_="function"==typeof setTimeout?setTimeout:void 0,g="function"==typeof clearTimeout?clearTimeout:void 0,v="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,y="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function A(e){f=v(function(t){g(h),e(t)}),h=_(function(){y(f),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var x=performance;t.unstable_now=function(){return x.now()}}else t.unstable_now=function(){return m.now()};var S,b,w,E=null;if("undefined"!=typeof window?E=window:void 0!==e&&(E=e),E&&E._schedMock){var P=E._schedMock;S=P[0],b=P[1],w=P[2],t.unstable_now=P[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var C=null,T=function(e){if(null!==C)try{C(e)}finally{C=null}};S=function(e){null!==C?setTimeout(S,0,e):(C=e,setTimeout(T,0,!1))},b=function(){C=null},w=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var V=null,F=!1,D=-1,O=!1,R=!1,M=0,L=33,B=33;w=function(){return M<=t.unstable_now()};var k=new MessageChannel,I=k.port2;k.port1.onmessage=function(){F=!1;var e=V,n=D;V=null,D=-1;var r=t.unstable_now(),i=!1;if(0>=M-r){if(!(-1!==n&&n<=r))return O||(O=!0,A(j)),V=e,void(D=n);i=!0}if(null!==e){R=!0;try{e(i)}finally{R=!1}}};var j=function(e){if(null!==V){A(j);var t=e-M+B;t<B&&L<B?(8>t&&(t=8),B=t<L?L:t):L=t,M=e+B,F||(F=!0,I.postMessage(void 0))}else O=!1};S=function(e,t){V=e,D=t,R||0>t?I.postMessage(void 0):O||(O=!0,A(j))},b=function(){V=null,F=!1,D=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,o=a;i=e,a=t.unstable_now();try{return n()}finally{i=r,a=o,d()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,o=a;i=n,a=t.unstable_now();try{return e()}finally{i=r,a=o,d()}},t.unstable_scheduleCallback=function(e,r){var o=-1!==a?a:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=o+r.timeout;else switch(i){case 1:r=o+-1;break;case 2:r=o+250;break;case 5:r=o+1073741823;break;case 4:r=o+1e4;break;default:r=o+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{o=null;var s=n;do{if(s.expirationTime>r){o=s;break}s=s.next}while(s!==n);null===o?o=n:o===n&&(n=e,c()),(r=o.previous).next=o.previous=e,e.next=o,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,o=a;i=n,a=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,a=o,d()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<o||w())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(12))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=function(){function e(){}return e.drawUnknown=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.fillStyle="orange",e.lineWidth=2,e.stroke(),e.fill(),e.restore()},e.drawOther=function(t,n,r){e._drawOther(t,n,r,8)},e.drawOther3=function(t,n,r){e._drawOther(t,n,r,12)},e._drawOther=function(e,t,n,r){e.save(),e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.lineWidth=r/6,e.strokeStyle="rgba(255, 255, 255, 0.4)",e.stroke(),e.lineWidth=r/4,e.fillStyle="rgba(255, 255, 255, 0.2)",e.strokeStyle="black",e.setLineDash([r/2,3]),e.stroke(),e.fill(),e.restore()},e.drawBlue=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.restore()},e.drawBlue3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceBlue3"),t-14,n-14),e.restore()},e.drawRed=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#ff3131",e.strokeStyle="#611515",e.stroke(),e.fill(),e.restore()},e.drawRed3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceRed3"),t-14,n-14),e.restore()},e.drawMiniGame=function(t,n,r){t.save(),t.beginPath(),t.arc(n,r,8,0,2*Math.PI),t.lineWidth=2,t.fillStyle="#0039ff",t.strokeStyle="#001281",t.stroke(),t.fill(),t.fillStyle="#A4FFFF",e._drawStar(t,n,r,8,5,.45),t.restore()},e.drawMiniGameDuel3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceMiniGameDuel3"),t-14,n-14),e.restore()},e.drawHappening=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("?",t-6,n+6),e.restore()},e.drawHappening3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceHappening3"),t-14,n-14),e.restore()},e.drawHappeningDuel3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceHappeningDuel3"),t-14,n-14),e.restore()},e.drawStar=function(t,n,r){e._drawStarSpace(t,n,r,8)},e.drawStar3=function(t,n,r){e._drawStarSpace(t,n,r,12)},e._drawStarSpace=function(t,n,r,i){t.save(),t.beginPath(),t.arc(n,r,i,0,2*Math.PI),t.lineWidth=i/8,t.fillStyle="rgba(0, 0, 0, 0.2)",t.strokeStyle="rgba(0, 0, 0, 0.3)",t.stroke(),t.fill(),t.fillStyle="yellow",e._drawStar(t,n,r,i+1,5,.45),t.restore()},e.drawChance=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.fillStyle="#ff3131",e.font="bold 19px monospace",e.fillText("!",t-6,n+6),e.restore()},e.drawChance2=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.fillStyle="white",e.font="bold 19px monospace",e.fillText("!",t-6,n+6),e.restore()},e.drawChance3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceChance3"),t-14,n-14),e.restore()},e.drawStart=function(t,n,r){e._drawStart(t,n,r,8,"black")},e.drawStart3=function(t,n,r){e._drawStart(t,n,r,12,"black")},e.drawStartDuelRed=function(t,n,r){e._drawStart(t,n,r,12,"red")},e.drawStartDuelBlue=function(t,n,r){e._drawStart(t,n,r,12,"blue")},e._drawStart=function(e,t,n,r,i){e.save(),e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.lineWidth=1,e.fillStyle=i,e.strokeStyle="rgba(255, 255, 255, 0.5)",e.stroke(),e.fill(),e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.font="bold 12px monospace",e.textAlign="center",e.strokeText("START",t,n+12),e.fillText("START",t,n+12),e.restore()},e.drawShroom=function(e,t,n){e.save(),e.beginPath(),e.ellipse?e.ellipse(t,n,8,6,0,0,2*Math.PI):e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#0039ff",e.strokeStyle="#001281",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="#D3FDFC",e.arc(t,n+5,4,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t-5,n,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t+5,n,2,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(t,n-2,3,0,2*Math.PI),e.fill(),e.restore()},e.drawBowser=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceBowser"),t-9,n-9),e.restore()},e.drawBowser3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceBowser3"),t-14,n-14),e.restore()},e.drawItem2=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceItem2"),t-9,n-9),e.restore()},e.drawItem3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceItem3"),t-14,n-14),e.restore()},e.drawBattle2=function(e,t,n){e.save(),e.beginPath(),e.arc(t,n,8,0,2*Math.PI),e.lineWidth=2,e.fillStyle="#099f0a",e.strokeStyle="#2e681e",e.stroke(),e.fill(),e.beginPath(),e.fillStyle="white",e.translate(t-10,n-10),e.moveTo(14,3),e.lineTo(4,11),e.lineTo(9,11),e.lineTo(7,18),e.lineTo(16,9),e.lineTo(12,9),e.lineTo(14,3),e.fill(),e.restore()},e.drawBattle3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceBattle3"),t-14,n-14),e.restore()},e.drawBank2=function(t,n,r){t.save(),t.beginPath(),t.arc(n,r,8,0,2*Math.PI),t.lineWidth=2,t.fillStyle="#099f0a",t.strokeStyle="#2e681e",t.stroke(),t.fill(),t.fillStyle="#EEF700",t.translate(n-10,r-10),t.beginPath(),t.arc(10,12,5,0,2*Math.PI),t.fill(),t.beginPath(),t.moveTo(8,7),t.lineTo(7,5),t.lineTo(8,4),t.lineTo(12,4),t.lineTo(13,5),t.lineTo(12,7),t.fill(),t.fillStyle="#099f0a",e._drawStar(t,10,12,4,5,.45),t.restore()},e.drawBank3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceBank3"),t-14,n-14),e.restore()},e.drawArrow=function(e,t,n,r){e.save(),e.beginPath(),e.fillStyle="#F647A0",e.strokeStyle="#94305B",3===r?(e.translate(t-12,n-12),e.scale(1.25,1.25)):e.translate(t-10,n-10),e.moveTo(10,1),e.lineTo(1,10),e.lineTo(5,10),e.lineTo(5,18),e.lineTo(15,18),e.lineTo(15,10),e.lineTo(19,10),e.lineTo(10,1),e.stroke(),e.fill(),e.restore()},e.drawBlackStar2=function(t,n,r){t.save(),t.beginPath(),t.arc(n,r,8,0,2*Math.PI),t.lineWidth=1,t.fillStyle="rgba(0, 0, 0, 0.2)",t.strokeStyle="rgba(0, 0, 0, 0.3)",t.stroke(),t.fill(),t.fillStyle="black",e._drawStar(t,n,r,9,5,.45),t.restore()},e.drawGameGuy3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceGameGuy3"),t-14,n-14),e.restore()},e.drawGameGuyDuel3=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceGameGuyDuel3"),t-14,n-14),e.restore()},e.drawDuelBasic=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceDuelBasic3"),t-14,n-14),e.restore()},e.drawDuelPowerup=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceDuelPowerup3"),t-14,n-14),e.restore()},e.drawDuelReverse=function(e,t,n){e.save(),e.drawImage(r.getImage("spaceDuelReverse3"),t-14,n-14),e.restore()},e._drawStar=function(e,t,n,r,i,a){e.save(),e.beginPath(),e.translate(t,n),e.moveTo(0,0-r);for(var o=0;o<i;o++)e.rotate(Math.PI/i),e.lineTo(0,0-r*a),e.rotate(Math.PI/i),e.lineTo(0,0-r);e.fill(),e.restore()},e}();t.spaces=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(4),s=n(2),l=n(0),c=n(29),u=n(19),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.globalClickHandler=function(e){t.elementIsWithin(e.target)||"CANVAS"===e.target.tagName.toUpperCase()||c.updateRightClickMenu(null)},t.handleClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t.onContextMenu=function(e){e.preventDefault()},t.onTypeChanged=function(e,n){void 0!==e&&(t.props.space.type=e,t.props.space.rotation&&delete t.props.space.rotation),void 0!==n?t.props.space.subtype=n:delete t.props.space.subtype,c.render(),t.forceUpdate()},t.onChangeX=function(e){var n=parseInt(e.target.value,10),r=""===e.target.value,i=s.getCurrentBoard().bg.width;!r&&isNaN(n)||n<0||n>i||(t.state.oldX||t.setState({oldX:t.props.space.x}),t.props.space.x=r?"":n,t.forceUpdate())},t.onChangeY=function(e){var n=parseInt(e.target.value,10),r=""===e.target.value,i=s.getCurrentBoard().bg.height;!r&&isNaN(n)||n<0||n>i||(t.state.oldY||t.setState({oldY:t.props.space.y}),t.props.space.y=r?"":n,t.forceUpdate())},t.onCoordSet=function(e){t.props.space.x=t.props.space.x||0,t.props.space.y=t.props.space.y||0,c.render(),t.setState({oldX:void 0,oldY:void 0}),t.forceUpdate()},t.onKeyUp=function(e){"Enter"===e.key&&t.onCoordSet()},t}return i(t,e),t.prototype.componentDidMount=function(){a=this.globalClickHandler.bind(this),document.addEventListener("click",a)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",a),a=null},t.prototype.getPlacement=function(e){return"translateX("+((isNaN(this.state.oldX)?e.x:this.state.oldX)-8)+"px) translateY("+((isNaN(this.state.oldY)?e.y:this.state.oldY)+15)+"px)"},t.prototype.elementIsWithin=function(e){return!(e&&this.refs&&this.rcMenu)||this.rcMenu.contains(e)},t.prototype.render=function(){var e=this,t=this.props.space;if(!t)return null;var n={transform:this.getPlacement(t)};return o.createElement("div",{ref:function(t){return e.rcMenu=t},className:"rcMenu",style:n,onClick:this.handleClick,onContextMenu:this.onContextMenu},"",o.createElement("span",null,"X:"),o.createElement("input",{type:"text",value:t.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),o.createElement("span",null,"Y:"),o.createElement("input",{type:"text",value:t.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),o.createElement(y,{type:t.type,subtype:t.subtype,typeChanged:this.onTypeChanged}))},t}(o.Component);t.RightClickMenu=d;var p=[{name:"Change to blue space",icon:"img/toolbar/blue.png",type:l.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red.png",type:l.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening.png",type:l.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance.png",type:l.Space.CHANCE},{name:"Change to minigame space",icon:"img/toolbar/minigame.png",type:l.Space.MINIGAME},{name:"Change to shroom space",icon:"img/toolbar/shroom.png",type:l.Space.SHROOM},{name:"Change to Bowser space",icon:"img/toolbar/bowser.png",type:l.Space.BOWSER},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:l.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:l.Space.STAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:l.Space.START,advanced:!0}],f=[{name:"Show Toad",icon:"img/toolbar/toad.png",subtype:l.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:l.SpaceSubtype.BOO},{name:"Show Bowser",icon:"img/toolbar/bowsercharacter.png",subtype:l.SpaceSubtype.BOWSER},{name:"Show Koopa Troopa",icon:"img/toolbar/koopa.png",subtype:l.SpaceSubtype.KOOPA}],h=[{name:"Change to blue space",icon:"img/toolbar/blue.png",type:l.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red.png",type:l.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening.png",type:l.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance2.png",type:l.Space.CHANCE},{name:"Change to Bowser space",icon:"img/toolbar/bowser.png",type:l.Space.BOWSER},{name:"Change to item space",icon:"img/toolbar/item.png",type:l.Space.ITEM},{name:"Change to battle space",icon:"img/toolbar/battle.png",type:l.Space.BATTLE},{name:"Change to bank space",icon:"img/toolbar/bank.png",type:l.Space.BANK},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:l.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:l.Space.STAR,advanced:!0},{name:"Change to black star space",icon:"img/toolbar/blackstar.png",type:l.Space.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:l.Space.START,advanced:!0},{name:"Change to arrow space",icon:"img/toolbar/arrow.png",type:l.Space.ARROW,advanced:!0}],m=[{name:"Show Toad",icon:"img/toolbar/toad.png",subtype:l.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:l.SpaceSubtype.BOO},{name:"Show bank",icon:"img/toolbar/banksubtype2.png",subtype:l.SpaceSubtype.BANK},{name:"Show bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",subtype:l.SpaceSubtype.BANKCOIN},{name:"Show item shop",icon:"img/toolbar/itemshopsubtype2.png",subtype:l.SpaceSubtype.ITEMSHOP}],_=[{name:"Change to blue space",icon:"img/toolbar/blue3.png",type:l.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red3.png",type:l.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening3.png",type:l.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance3.png",type:l.Space.CHANCE},{name:"Change to Bowser space",icon:"img/toolbar/bowser3.png",type:l.Space.BOWSER},{name:"Change to item space",icon:"img/toolbar/item3.png",type:l.Space.ITEM},{name:"Change to battle space",icon:"img/toolbar/battle3.png",type:l.Space.BATTLE},{name:"Change to bank space",icon:"img/toolbar/bank3.png",type:l.Space.BANK},{name:"Change to Game Guy space",icon:"img/toolbar/gameguy.png",type:l.Space.GAMEGUY},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:l.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:l.Space.STAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:l.Space.START,advanced:!0},{name:"Change to arrow space",icon:"img/toolbar/arrow.png",type:l.Space.ARROW,advanced:!0}],g=[{name:"Show Millenium Star",icon:"img/toolbar/mstar.png",subtype:l.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:l.SpaceSubtype.BOO},{name:"Show bank",icon:"img/toolbar/banksubtype.png",subtype:l.SpaceSubtype.BANK},{name:"Show bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",subtype:l.SpaceSubtype.BANKCOIN},{name:"Show item shop",icon:"img/toolbar/itemshopsubtype.png",subtype:l.SpaceSubtype.ITEMSHOP}],v=[{name:"Change to basic space",icon:"img/toolbar/basic3.png",type:l.Space.DUEL_BASIC},{name:"Change to Mini-Game space",icon:"img/toolbar/minigameduel3.png",type:l.Space.MINIGAME},{name:"Change to reverse space",icon:"img/toolbar/reverse3.png",type:l.Space.DUEL_REVERSE},{name:"Change to happening space",icon:"img/toolbar/happeningduel3.png",type:l.Space.HAPPENING},{name:"Change to Game Guy space",icon:"img/toolbar/gameguyduel.png",type:l.Space.GAMEGUY},{name:"Change to power-up space",icon:"img/toolbar/powerup.png",type:l.Space.DUEL_POWERUP},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:l.Space.OTHER},{name:"Change to blue start space",icon:"img/toolbar/startblue.png",type:l.Space.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:"img/toolbar/startred.png",type:l.Space.DUEL_START_RED,advanced:!0}];var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeChanged=function(e,n){t.props.typeChanged(e,n)},t}return i(t,e),t.prototype.render=function(){var e=this.props.type;if(e===l.Space.START&&!u.get(u.$setting.uiAdvanced))return null;var t=this.props.subtype,n=this.onTypeChanged,r=function(r){var i=r.type+"-"+r.subtype,a=e===r.type||e===l.Space.OTHER&&void 0!==t&&t===r.subtype;return o.createElement(A,{key:i,type:r.type,subtype:r.subtype,icon:r.icon,title:r.name,selected:a,typeChanged:n})},i=function(){var e=s.getCurrentBoard(),t=[];switch(e.game){case 1:t=p;break;case 2:t=h;break;case 3:switch(e.type){case l.BoardType.DUEL:t=v;break;case l.BoardType.NORMAL:default:t=_}}return u.get(u.$setting.uiAdvanced)||(t=t.filter(function(e){return!e.advanced})),t}().map(r),a=function(){var e=s.getCurrentBoard(),t=[];switch(e.game){case 1:t=f;break;case 2:t=m;break;case 3:switch(e.type){case l.BoardType.DUEL:t=[];break;default:t=g}}return u.get(u.$setting.uiAdvanced)||(t=t.filter(function(e){return!e.advanced})),t}().map(r);return o.createElement("div",{className:"rcSpaceToggleContainer"},i,o.createElement("br",null),a)},t}(o.Component),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeChanged=function(){void 0!==t.props.subtype&&t.props.selected?t.props.typeChanged(t.props.type,void 0):t.props.typeChanged(t.props.type,t.props.subtype)},t}return i(t,e),t.prototype.render=function(){var e="rcSpaceToggleButton";this.props.selected&&(e+=" selected");var t=void 0!==this.props.subtype?25:20;return o.createElement("div",{className:e,title:this.props.title,onClick:this.onTypeChanged},o.createElement("img",{src:this.props.icon,height:t,width:t}))},t}(o.Component)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,a=n(29),o=n(11),s=n(2),l=n(0),c=n(88),u=n(3),d=n(13),p={},f=!1,h=-1,m=-1,_=-1,g=-1,v=null;function y(e){x(e.currentTarget,e.clientX,e.clientY,e.ctrlKey)}function A(e){if(1===e.touches.length){var t=e.touches[0];x(e.currentTarget,t.clientX,t.clientY,e.ctrlKey)}}function x(e,t,n,r){var i=t-(v=e.getBoundingClientRect()).left,o=n-v.top;h=_=i,m=g=o;var c=z(_,g);u.$$log("Clicked space: "+u.$$hex(c)+" ("+c+")",s.getCurrentBoard().spaces[c]);var p=-1!==c;if(s.currentBoardIsROM()&&p){d.changeCurrentAction(l.Action.MOVE);var y=s.copyCurrentBoard();s.setCurrentBoard(y)}var A=d.getCurrentAction();switch(A){case l.Action.MOVE:p?r?N(c):j(c)||U(c):L();break;case l.Action.ADD_OTHER:case l.Action.ADD_BLUE:case l.Action.ADD_RED:case l.Action.ADD_MINIGAME:case l.Action.ADD_HAPPENING:case l.Action.ADD_STAR:case l.Action.ADD_BLACKSTAR:case l.Action.ADD_START:case l.Action.ADD_CHANCE:case l.Action.ADD_SHROOM:case l.Action.ADD_BOWSER:case l.Action.ADD_ITEM:case l.Action.ADD_BATTLE:case l.Action.ADD_BANK:case l.Action.ADD_GAMEGUY:case l.Action.ADD_ARROW:case l.Action.MARK_STAR:case l.Action.MARK_GATE:case l.Action.ADD_TOAD_CHARACTER:case l.Action.ADD_BOWSER_CHARACTER:case l.Action.ADD_KOOPA_CHARACTER:case l.Action.ADD_BOO_CHARACTER:case l.Action.ADD_BANK_SUBTYPE:case l.Action.ADD_BANKCOIN_SUBTYPE:case l.Action.ADD_ITEMSHOP_SUBTYPE:case l.Action.ADD_DUEL_BASIC:case l.Action.ADD_DUEL_REVERSE:case l.Action.ADD_DUEL_POWERUP:case l.Action.ADD_DUEL_START_BLUE:case l.Action.ADD_DUEL_START_RED:p?r?N(c):j(c)||U(c):r||L();break;case l.Action.LINE:case l.Action.LINE_STICKY:case l.Action.ROTATE:p?U(c):L();break;case l.Action.ERASE:L()}var x=k(),S=s.getCurrentBoard(),b=S.spaces[c];switch(A){case l.Action.LINE:if(1===x.length){var w=x[0];a.renderConnections(),a.drawConnection(w.x,w.y,i,o),a.rightClickOpen()&&a.updateRightClickMenu(null)}break;case l.Action.LINE_STICKY:if(1===x.length){w=x[0];if(b&&b!==w){var E=s.getSpaceIndex(w,S);s.addConnection(E,c),U(c),a.renderConnections()}else a.renderConnections(),a.drawConnection(w.x,w.y,i,o)}break;case l.Action.ROTATE:break;case l.Action.ERASE:-1!==c&&G(S,c)?(s.removeSpace(c),d.changeSelectedSpaces([]),a.render()):q(i,o);break;case l.Action.ADD_OTHER:case l.Action.ADD_BLUE:case l.Action.ADD_RED:case l.Action.ADD_MINIGAME:case l.Action.ADD_HAPPENING:case l.Action.ADD_STAR:case l.Action.ADD_BLACKSTAR:case l.Action.ADD_START:case l.Action.ADD_CHANCE:case l.Action.ADD_SHROOM:case l.Action.ADD_BOWSER:case l.Action.ADD_ITEM:case l.Action.ADD_BATTLE:case l.Action.ADD_BANK:case l.Action.ADD_GAMEGUY:case l.Action.ADD_ARROW:case l.Action.ADD_DUEL_BASIC:case l.Action.ADD_DUEL_REVERSE:case l.Action.ADD_DUEL_POWERUP:case l.Action.ADD_DUEL_START_BLUE:case l.Action.ADD_DUEL_START_RED:W(A,i,o,b,!1,r)&&N(-1!==c?c:S.spaces.length-1);break;case l.Action.MARK_STAR:case l.Action.MARK_GATE:case l.Action.ADD_TOAD_CHARACTER:case l.Action.ADD_BOWSER_CHARACTER:case l.Action.ADD_KOOPA_CHARACTER:case l.Action.ADD_BOO_CHARACTER:case l.Action.ADD_BANK_SUBTYPE:case l.Action.ADD_BANKCOIN_SUBTYPE:case l.Action.ADD_ITEMSHOP_SUBTYPE:-1===c&&W(A,i,o,b,!1,r)&&(N(S.spaces.length-1),A===l.Action.MARK_STAR&&H(x));break;case l.Action.MOVE:default:a.rightClickOpen()&&a.updateRightClickMenu(x[0])}f=p}function S(e){if(1===e.touches.length&&I()){e.preventDefault();var t=e.touches[0];w(t.clientX-v.left,t.clientY-v.top)}}function b(e){v&&1===e.buttons&&w(e.clientX-v.left,e.clientY-v.top)}function w(e,t){if(!s.currentBoardIsROM()){var n=d.getCurrentAction(),c=k(),u=s.getCurrentBoard(),p=z(e,t);switch(n){case l.Action.LINE:if(1===c.length){var v=c[0];a.renderConnections(),a.drawConnection(v.x,v.y,e,t),a.rightClickOpen()&&a.updateRightClickMenu(null)}break;case l.Action.LINE_STICKY:if(1===c.length){v=c[0];var y=u.spaces[p];if(y&&y!==v){var A=s.getSpaceIndex(v,u);s.addConnection(A,p),U(p),a.renderConnections()}else a.renderConnections(),a.drawConnection(v.x,v.y,e,t)}break;case l.Action.ROTATE:if(1===c.length)if((v=c[0]).type===l.Space.ARROW){var x=o.determineAngle(v.x,v.y,e,t),S=(1.5*Math.PI+x)%(2*Math.PI),b=o.radiansToDegrees(S);A=s.getSpaceIndex(v,u);s.setSpaceRotation(A,b),a.renderSpaces()}break;case l.Action.ERASE:-1!==p&&G(u,p)?(s.removeSpace(p),d.changeSelectedSpaces([]),a.render()):q(e,t);break;case l.Action.MOVE:case l.Action.ADD_OTHER:case l.Action.ADD_BLUE:case l.Action.ADD_RED:case l.Action.ADD_MINIGAME:case l.Action.ADD_HAPPENING:case l.Action.ADD_STAR:case l.Action.ADD_BLACKSTAR:case l.Action.ADD_START:case l.Action.ADD_CHANCE:case l.Action.ADD_SHROOM:case l.Action.ADD_BOWSER:case l.Action.ADD_ITEM:case l.Action.ADD_BATTLE:case l.Action.ADD_BANK:case l.Action.ADD_GAMEGUY:case l.Action.ADD_ARROW:case l.Action.MARK_STAR:case l.Action.MARK_GATE:case l.Action.ADD_TOAD_CHARACTER:case l.Action.ADD_BOWSER_CHARACTER:case l.Action.ADD_KOOPA_CHARACTER:case l.Action.ADD_BOO_CHARACTER:case l.Action.ADD_BANK_SUBTYPE:case l.Action.ADD_BANKCOIN_SUBTYPE:case l.Action.ADD_ITEMSHOP_SUBTYPE:case l.Action.ADD_DUEL_BASIC:case l.Action.ADD_DUEL_REVERSE:case l.Action.ADD_DUEL_POWERUP:case l.Action.ADD_DUEL_START_BLUE:case l.Action.ADD_DUEL_START_RED:default:var w=!f&&n===l.Action.MOVE;if(!w&&c.length){var E=e-_,P=t-g;c.forEach(function(e){var t=e.x+E;e.x=Math.max(0,Math.min(t,u.bg.width));var n=e.y+P;e.y=Math.max(0,Math.min(n,u.bg.height))}),r||(r=setTimeout(R,10)),i||(i=setTimeout(M,10)),a.rightClickOpen()&&a.updateRightClickMenu(c[0])}w&&function(e,t){if(-1===h||-1===m)return;L();for(var n=s.getCurrentBoard().spaces,r=0;r<n.length;r++){var i=n[r];o.pointFallsWithin(i.x,i.y,h,m,e,t)&&N(r,!0)}B(),a.drawSelectionBox(h,m,e,t)}(e,t)}_=e,g=t}}function E(e){0===e.button&&C()}function P(e){1===e.touches.length&&C()}function C(){if(!s.currentBoardIsROM()){var e=d.getCurrentAction();if(f||e!==l.Action.MOVE||a.renderSpaces(),I()){var t=k();if(e===l.Action.LINE){var n=z(_,g);if(-1!==n&&-1===t.indexOf(n))for(var r in p)s.addConnection(parseInt(r),n);a.renderConnections()}}}}function T(e){if(!s.currentBoardIsROM()){var t=Math.abs(h-_)>5||Math.abs(m-g)>5,n=Math.abs(h-_)>0||Math.abs(m-g)>0,r=k();h=_=-1,m=g=-1;var i=e.ctrlKey,o=e.clientX-v.left,c=e.clientY-v.top,u=z(o,c),p=s.getCurrentBoard(),y=-1===u?null:p.spaces[u];if(0===e.button){var A=d.getCurrentAction();switch(A){case l.Action.MOVE:case l.Action.ADD_OTHER:case l.Action.ADD_BLUE:case l.Action.ADD_RED:case l.Action.ADD_MINIGAME:case l.Action.ADD_HAPPENING:case l.Action.ADD_STAR:case l.Action.ADD_BLACKSTAR:case l.Action.ADD_START:case l.Action.ADD_CHANCE:case l.Action.ADD_SHROOM:case l.Action.ADD_BOWSER:case l.Action.ADD_ITEM:case l.Action.ADD_BATTLE:case l.Action.ADD_BANK:case l.Action.ADD_GAMEGUY:case l.Action.ADD_ARROW:case l.Action.ADD_DUEL_BASIC:case l.Action.ADD_DUEL_REVERSE:case l.Action.ADD_DUEL_POWERUP:case l.Action.ADD_DUEL_START_BLUE:case l.Action.ADD_DUEL_START_RED:n||i||(y?U(u):L());break;case l.Action.MARK_GATE:case l.Action.ADD_TOAD_CHARACTER:case l.Action.ADD_BOWSER_CHARACTER:case l.Action.ADD_KOOPA_CHARACTER:case l.Action.ADD_BOO_CHARACTER:case l.Action.ADD_BANK_SUBTYPE:case l.Action.ADD_BANKCOIN_SUBTYPE:case l.Action.ADD_ITEMSHOP_SUBTYPE:f&&W(A,o,c,y,t,i)&&N(-1!==u?u:p.spaces.length-1),n||i||(y?U(u):L());break;case l.Action.MARK_STAR:t||H(r);break;case l.Action.LINE:case l.Action.LINE_STICKY:a.renderConnections();break;case l.Action.ERASE:case l.Action.ROTATE:}f=!1}}}function V(e){e.preventDefault(),e.stopPropagation();var t=k(),n=1!==t.length?null:t[0];a.updateRightClickMenu(n)}function F(e){if(e.preventDefault(),!s.currentBoardIsROM()&&(a.rightClickOpen()&&a.updateRightClickMenu(null),e.dataTransfer)){var t;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(e){return}if("object"==typeof t)if(t.action){L();var n=e.currentTarget;v=n.getBoundingClientRect();var r=z(u=e.clientX-v.left,d=e.clientY-v.top),i=s.getCurrentBoard(),o=-1===r?null:i.spaces[r];W(t.action.type,u,d,o,!1,!1)}else if(t.isEventParamDrop){var l=c.getEventParamDropHandler();if(l){var u,d;n=e.currentTarget;v=n.getBoundingClientRect(),l(r=z(u=e.clientX-v.left,d=e.clientY-v.top))}}}}function D(e){var t=d.getSelectedSpaces();if(t&&t.length){var n=s.getCurrentBoard();if(38===e.keyCode)t.forEach(function(e){e.y=Math.max(e.y-1,0)}),d.changeSelectedSpaces(t);else if(40===e.keyCode)t.forEach(function(e){e.y=Math.min(e.y+1,n.bg.height)}),d.changeSelectedSpaces(t);else if(37===e.keyCode)t.forEach(function(e){e.x=Math.max(e.x-1,0)}),d.changeSelectedSpaces(t);else if(39===e.keyCode)t.forEach(function(e){e.x=Math.min(e.x+1,n.bg.width)}),d.changeSelectedSpaces(t);else if(46===e.keyCode){var r=!1;t.forEach(function(e){void 0!==e.subtype&&(r=!0)}),t.forEach(function(e){if(r)void 0!==e.subtype&&delete e.subtype;else{var t=s.getSpaceIndex(e,n);G(n,t)&&s.removeSpace(t,n)}}),r?d.changeSelectedSpaces(t):d.changeSelectedSpaces([])}}}function O(e){if(0===e.button&&!s.currentBoardIsROM()){var t=d.getCurrentAction();!f&&t===l.Action.MOVE&&(a.renderSpaces(),h=_=-1,m=g=-1)}}function R(){a.renderConnections(),r=null}function M(){a.renderSpaces(),a.renderSelectedSpaces(),i=null}function L(){p={},d.changeSelectedSpaces([])}function B(){d.changeSelectedSpaces(k())}function k(){var e=s.getCurrentBoard(),t=[];for(var n in p){var r=e.spaces[n];t.push(r)}return t}function I(){for(var e in p)return!0;return!1}function j(e){return!!p[e]}function N(e,t){p||(p={}),p[e]=!0,t||B()}function U(e){var t;(t={})[e]=!0,p=t,B()}function z(e,t){for(var n=s.getCurrentBoard(),r=3===s.getCurrentBoard().game?14:8,i=-1,a=0;a<n.spaces.length;a++){var o=n.spaces[a];o&&(Math.abs(o.x-e)<=r&&Math.abs(o.y-t)<=r&&(i=a))}return i}function G(e,t){var n=e.spaces[t];return!!n&&(n.type!==l.Space.START||s.getSpacesOfType(l.Space.START,e).length>1)}function W(e,t,n,r,i,o){var c=function(e){var t=l.Space.OTHER;e===l.Action.ADD_BLUE?t=l.Space.BLUE:e===l.Action.ADD_RED?t=l.Space.RED:e===l.Action.ADD_HAPPENING?t=l.Space.HAPPENING:e===l.Action.ADD_STAR?t=l.Space.STAR:e===l.Action.ADD_BLACKSTAR?t=l.Space.BLACKSTAR:e===l.Action.ADD_MINIGAME?t=l.Space.MINIGAME:e===l.Action.ADD_CHANCE?t=l.Space.CHANCE:e===l.Action.ADD_START?t=l.Space.START:e===l.Action.ADD_SHROOM?t=l.Space.SHROOM:e===l.Action.ADD_BOWSER?t=l.Space.BOWSER:e===l.Action.ADD_ITEM?t=l.Space.ITEM:e===l.Action.ADD_BATTLE?t=l.Space.BATTLE:e===l.Action.ADD_BANK?t=l.Space.BANK:e===l.Action.ADD_ARROW?t=l.Space.ARROW:e===l.Action.ADD_GAMEGUY?t=l.Space.GAMEGUY:e===l.Action.ADD_DUEL_BASIC?t=l.Space.DUEL_BASIC:e===l.Action.ADD_DUEL_REVERSE?t=l.Space.DUEL_REVERSE:e===l.Action.ADD_DUEL_POWERUP?t=l.Space.DUEL_POWERUP:e===l.Action.ADD_DUEL_START_BLUE?t=l.Space.DUEL_START_BLUE:e===l.Action.ADD_DUEL_START_RED&&(t=l.Space.DUEL_START_RED);return t}(e),u=function(e){var t;e===l.Action.ADD_TOAD_CHARACTER?t=l.SpaceSubtype.TOAD:e===l.Action.ADD_BOWSER_CHARACTER?t=l.SpaceSubtype.BOWSER:e===l.Action.ADD_KOOPA_CHARACTER?t=l.SpaceSubtype.KOOPA:e===l.Action.ADD_BOO_CHARACTER?t=l.SpaceSubtype.BOO:e===l.Action.ADD_BANK_SUBTYPE?t=l.SpaceSubtype.BANK:e===l.Action.ADD_BANKCOIN_SUBTYPE?t=l.SpaceSubtype.BANKCOIN:e===l.Action.ADD_ITEMSHOP_SUBTYPE?t=l.SpaceSubtype.ITEMSHOP:e===l.Action.MARK_GATE&&(t=l.SpaceSubtype.GATE);return t}(e),p=!1;if(r)void 0===u||i||(r.type!==l.Space.OTHER&&u===l.SpaceSubtype.GATE||(r.subtype===u?delete r.subtype:r.subtype=u),d.changeSelectedSpaces([r]),p=!0);else{var f=s.getCurrentBoard(),h=s.addSpace(t,n,c,u),m=f.spaces[h];if(o){var _=d.getSelectedSpaces()||[];_.push(m),d.changeSelectedSpaces(_)}else d.changeSelectedSpaces([m]);p=!0}return a.renderSpaces(),p}function H(e){e&&e.length&&(e.forEach(function(e){e.star=!e.star}),a.renderSpaces(),d.changeSelectedSpaces(e))}function q(e,t){var n=s.getCurrentBoard(),r=n.spaces,i=n.links,o=!1;for(var l in i){var c=r[l],u=i[l];if(Array.isArray(u)){for(var d=0;d<u.length;)K(c,r[u[d]],e,t)?(u.splice(d,1),o=!0):d++;1===u.length?i[l]=u=u[0]:u.length||delete i[l]}else K(c,r[u],e,t)&&(delete i[l],o=!0)}o&&a.renderConnections()}function K(e,t,n,r){return!(n>e.x&&n>t.x)&&(!(n<e.x&&n<t.x)&&(!(r>e.y&&r>t.y)&&(!(r<e.y&&r<t.y)&&o.lineDistance(n,r,e.x,e.y,t.x,t.y)<=4)))}function Y(e){e.preventDefault()}t.attachToCanvas=function(e){e.addEventListener("contextmenu",V,!1),e.addEventListener("click",T,!1),e.addEventListener("mousedown",y,!1),e.addEventListener("mousemove",b,!1),e.addEventListener("mouseup",E,!1),e.addEventListener("mouseout",O,!1),e.addEventListener("touchstart",A,!1),e.addEventListener("touchmove",S,!1),e.addEventListener("touchend",P,!1),e.addEventListener("drop",F,!1),e.addEventListener("dragover",Y,!1),e.addEventListener("keydown",D,!1)},t.detachFromCanvas=function(e){e.removeEventListener("contextmenu",V),e.removeEventListener("click",T),e.removeEventListener("mousedown",y),e.removeEventListener("mousemove",b),e.removeEventListener("mouseup",E),e.removeEventListener("mouseout",O),e.removeEventListener("touchstart",A),e.removeEventListener("touchmove",S),e.removeEventListener("touchend",P),e.removeEventListener("drop",F),e.removeEventListener("dragover",Y),e.removeEventListener("keydown",D)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(4),l=n(247),c=n(89),u=n(77),d=n(24),p=n(1),f=n(27),h=n(13),m=[{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"br"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:128,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:250,height:100},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240},{type:"image",id:"detailBoardConversationBg",desc:"Conversation background",width:320,height:240},{type:"image",id:"detailBoardSplashscreenBg",desc:"Splashscreen background",width:320,height:240}],_=[{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"br"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:48},{type:"image",id:"detailBoardSelectIcon",desc:"Board select icon",width:32,height:32},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:260,height:120},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240}],g=[{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"br"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"},{type:"br"},{type:"image",id:"detailBoardLargeSceneBg",desc:"Large scene background",width:320,height:240}],v=[{type:"richtext",id:"detailBoardName",desc:"Board name",maxlines:1},{type:"richtext",id:"detailBoardDesc",desc:"Board description",maxlines:2},{type:"br"},{type:"image",id:"detailBoardSelectImg",desc:"Board select image",width:64,height:64},{type:"image",id:"detailBoardLogoImg",desc:"Board logo",width:226,height:120},{type:"image",id:"detailBoardLogoTextImg",desc:"Board logo text",width:226,height:36},{type:"audio",id:"detailBoardAudio",desc:"Background music"},{type:"difficulty",id:"detailBoardDifficulty",desc:"Difficulty"}];function y(e,t,n){switch(e){case"detailBoardName":n.name=t,h.refresh();break;case"detailBoardDesc":n.description=t;break;case"detailBoardDifficulty":n.difficulty=t;break;case"detailBoardSelectImg":n.otherbg.boardselect=t;break;case"detailBoardSelectIcon":n.otherbg.boardselecticon=t;break;case"detailBoardLogoImg":n.otherbg.boardlogo=t;break;case"detailBoardLogoTextImg":n.otherbg.boardlogotext=t;break;case"detailBoardAudio":n.audioIndex=t,h.refresh();break;case"detailBoardLargeSceneBg":n.otherbg.largescene=t;break;case"detailBoardConversationBg":n.otherbg.conversation=t;break;case"detailBoardSplashscreenBg":n.otherbg.splashscreen=t}}var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTextChange=function(e,n){y(e,n.target.value,t.props.board),t.forceUpdate()},t.onRichTextChange=function(e,n){y(e,n,t.props.board),t.forceUpdate()},t.onValueChange=function(e,n){y(e,n,t.props.board),t.forceUpdate()},t}return i(t,e),t.prototype.render=function(){var e=this;if(!this.props.board)return null;var t=0,n=o.boardIsROM(this.props.board),r=function(){var e=o.getCurrentBoard(),t=e.game,n=e.type;switch(t){case 1:return m;case 2:return _;case 3:switch(n){case a.BoardType.DUEL:return v;default:return g}}}().map(function(r){var i=function(e,t){switch(e){case"detailBoardName":return t.board.name;case"detailBoardDesc":return t.board.description;case"detailBoardDifficulty":return t.board.difficulty;case"detailBoardSelectImg":return t.board.otherbg.boardselect;case"detailBoardSelectIcon":return t.board.otherbg.boardselecticon;case"detailBoardLogoImg":return t.board.otherbg.boardlogo;case"detailBoardLogoTextImg":return t.board.otherbg.boardlogotext;case"detailBoardAudio":return t.board.audioIndex;case"detailBoardLargeSceneBg":return t.board.otherbg.largescene;case"detailBoardConversationBg":return t.board.otherbg.conversation;case"detailBoardSplashscreenBg":return t.board.otherbg.splashscreen}return""}(r.id,e.props);switch(r.type){case"text":return s.createElement(x,{id:r.id,desc:r.desc,readonly:n,value:i,onTextChange:e.onTextChange,key:r.id});case"richtext":var a=n?c.MPEditorDisplayMode.Readonly:c.MPEditorDisplayMode.Edit;return s.createElement("div",{className:"detailRichTextContainer",key:r.id},s.createElement("label",{htmlFor:r.id},r.desc),s.createElement(c.MPEditor,{id:r.id,value:i,showToolbar:!n,displayMode:a,maxlines:r.maxlines||0,itemBlacklist:["COLOR","ADVANCED","DARKLIGHT"],onValueChange:e.onRichTextChange}));case"image":return s.createElement(S,{id:r.id,desc:r.desc,readonly:n,value:i,key:r.id,onImageSelected:e.onValueChange,width:r.width,height:r.height});case"audio":return s.createElement(b,{id:r.id,desc:r.desc,readonly:n,value:i,key:r.id,onAudioSelected:e.onValueChange});case"difficulty":return s.createElement(w,{id:r.id,desc:r.desc,readonly:n,value:i,key:r.id,onDifficultySelected:e.onValueChange});case"br":return s.createElement("br",{key:"br"+t++})}});return s.createElement("div",{id:"detailsForm"},r)},t}(s.Component);t.Details=A;var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTextChange=function(e){t.props.onTextChange(t.props.id,e)},t}return i(t,e),t.prototype.render=function(){var e=this.props.id,t=this.props.desc,n=this.props.readonly;return s.createElement("div",{className:"detailTextContainer"},s.createElement("label",{htmlFor:e},t),s.createElement("input",{id:e,type:"text",placeholder:t,value:this.props.value,readOnly:n,defaultValue:"",onChange:this.onTextChange}))},t}(s.Component),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){o.currentBoardIsROM()||u.openFile("image/*",t.imageSelected.bind(t))},t}return i(t,e),t.prototype.imageSelected=function(e){var t=this,n=e.target.files[0];if(n){var r=new FileReader;r.onload=function(e){var n=t.props.onImageSelected,i=t.props.id,a=document.getElementById(i),s=new Image;s.onload=function(){var e=t.props.width,r=t.props.height,c=d.createContext(e,r);c.drawImage(s,0,0,e,r);var u=c.getImageData(0,0,e,r).data.buffer;u=function(e,t){if("detailBoardSelectImg"===e&&1===o.getCurrentBoard().game){for(var n=new Uint32Array(t),r=0;r<128;r++)n[r]=0,n[r+128]=0,n[r+7936]=0,n[r+8064]=0;for(r=0;r<6;r++)n[r+256]=0,n[r+256+122]=0,n[r+7808]=0,n[r+7808+122]=0;for(r=0;r<4;r++)n[r+384]=0,n[r+384+124]=0,n[r+7680]=0,n[r+7680+124]=0;for(r=0;r<3;r++)n[r+512]=0,n[r+512+125]=0,n[r+7552]=0,n[r+7552+125]=0;for(r=0;r<2;r++)n[r+640]=0,n[r+640+126]=0,n[r+7424]=0,n[r+7424+126]=0,n[r+768]=0,n[r+768+126]=0,n[r+7296]=0,n[r+7296+126]=0;n[896]=0,n[1023]=0,n[7168]=0,n[7295]=0,n[1024]=0,n[1151]=0,n[7040]=0,n[7167]=0;var i={};for(r=0;r<32;r++)for(var a=0;a<64;a++)i[n[128*r+a]]=!0;var s={};for(r=0;r<32;r++)for(a=64;a<128;a++)s[n[128*r+64+a]]=!0;var c={};for(r=32;r<64;r++)for(a=0;a<64;a++)c[n[128*r+a]]=!0;var u={};for(r=32;r<64;r++)for(a=64;a<128;a++)u[n[128*r+64+a]]=!0;(Object.keys(i).length>256||Object.keys(s).length>256||Object.keys(c).length>256||Object.keys(u).length>256)&&(h.showMessage("Sorry, but the palette limit for this image is 256 unique colors. For now, the image has been reduced to 8-bit, but most image editors should be able to reduce the palette for you with higher quality."),l.make8Bit(n,128,64))}return t}(i,u);var f=p.arrayBufferToDataURL(u,e,r);a.src=f,n(i,f)},s.src=r.result},r.readAsDataURL(n)}},t.prototype.render=function(){var e=this.props.id,t=this.props.desc,n=this.props.width,r=this.props.height,i=null;if(!this.props.readonly){var a=n+"  "+r;if(n>100&&r>50){i=s.createElement("div",{className:"detailImgHoverCover"},s.createElement("span",null,"Choose a new image"),s.createElement("br",null),s.createElement("span",{className:"detailImgHoverCoverSize"},a))}else i=s.createElement("div",{className:"detailImgHoverCover",title:a})}var o={width:n,height:r,minWidth:n,minHeight:r};return s.createElement("div",{className:"detailImgContainer"},s.createElement("label",null,t),s.createElement("div",{className:"detailImgSelect",style:o,onClick:this.handleClick},s.createElement("img",{id:e,className:"detailImg",height:r,width:n,style:o,src:this.props.value,alt:t}),i))},t}(s.Component),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onSelection=function(e){t.props.onAudioSelected(t.props.id,parseInt(e.target.value))},t}return i(t,e),t.prototype.render=function(){var e=0,t=f.getAdapter(o.getCurrentBoard().game).getAudioMap().map(function(t){var n=e++;return t?s.createElement("option",{value:n,key:n},t):null});return s.createElement("div",{className:"audioDetailsContainer"},s.createElement("label",null,this.props.desc),s.createElement("select",{className:"audioSelect",value:this.props.value,disabled:this.props.readonly,onChange:this.onSelection},t))},t}(s.Component),w=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelection=function(e){n.props.readonly||n.props.onDifficultySelected(n.props.id,e)},n.onDifficultyFocused=function(e){n.props.readonly||n.setState({focusedLevel:e})},n.state={focusedLevel:0},n}return i(t,e),t.prototype.render=function(){for(var e=[],t=1;t<=5;t++)e.push(s.createElement(E,{level:t,key:t.toString(),readonly:this.props.readonly,currentLevel:this.props.value,focusedLevel:this.state.focusedLevel,onDifficultyLevelSelected:this.onSelection,onDifficultyFocused:this.onDifficultyFocused}));return s.createElement("div",{className:"difficultyDetailsContainer"},s.createElement("label",null,this.props.desc),s.createElement("div",{className:"difficultyDetailsLevels"},e))},t}(s.Component),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onClick=function(){t.props.readonly||t.props.onDifficultyLevelSelected(t.props.level)},t.onMouseEnter=function(){t.props.readonly||t.props.onDifficultyFocused(t.props.level)},t.onMouseLeave=function(){t.props.readonly||t.props.onDifficultyFocused(0)},t}return i(t,e),t.prototype.render=function(){var e="difficultyDetailsLevel";return this.props.readonly||(this.props.level<=this.props.currentLevel&&(e+=" difficultyLevelCurrent"),this.props.focusedLevel>0&&this.props.level<=this.props.focusedLevel&&(e+=" difficultyLevelFocused")),s.createElement("div",{className:e,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave})},t}(s.Component)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.make8Bit=function(e,t,n){for(var r=0;r<t*n;r++){var i=e[r];i&=3233857728,i|=i>>>2,i|=i>>>2,i|=i>>>2,e[r]=i}}},function(e,t,n){"use strict";var r=n(249),i=n(59),a=n(17),o=n(265),s=n(38),l=n(91),c=n(94),u=n(146),d=n(266),p=n(148),f=n(74),h=n(15),m=n(144),_=n(7),g=n(101),v=n(163),y=n(45),A=n(327),x={Editor:d,EditorBlock:p,EditorState:_,CompositeDecorator:o,Entity:f,EntityInstance:m,BlockMapBuilder:i,CharacterMetadata:a,ContentBlock:s,ContentState:l,SelectionState:y,AtomicBlockUtils:r,KeyBindingUtil:g,Modifier:h,RichUtils:v,DefaultDraftBlockRenderMap:c,DefaultDraftInlineStyle:u,convertFromHTML:n(161),convertFromRaw:n(330),convertToRaw:A,genKey:n(31),getDefaultKeyBinding:n(164),getVisibleSelectionRect:n(335)};e.exports=x},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(59),a=n(17),o=n(38),s=n(20),l=n(33),c=n(15),u=n(7),d=n(5),p=(n(45),n(31)),f=n(264),h=l.draft_tree_data_support,m=h?s:o,_=d.List,g=d.Repeat,v={insertAtomicBlock:function(e,t,n){var o=e.getCurrentContent(),s=e.getSelection(),l=c.removeRange(o,s,"backward"),d=l.getSelectionAfter(),f=c.splitBlock(l,d),v=f.getSelectionAfter(),y=c.setBlockType(f,v,"atomic"),A=a.create({entity:t}),x={key:p(),type:"atomic",text:n,characterList:_(g(A,n.length))},S={key:p(),type:"unstyled"};h&&(x=r({},x,{nextSibling:S.key}),S=r({},S,{prevSibling:x.key}));var b=[new m(x),new m(S)],w=i.createFromArray(b),E=c.replaceWithFragment(y,v,w),P=E.merge({selectionBefore:s,selectionAfter:E.getSelectionAfter().set("hasFocus",!0)});return u.push(e,P,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var i=e.getCurrentContent(),a=e.getSelection(),o=void 0;if("before"===r||"after"===r){var s=i.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());o=f(i,t,s,r)}else{var l=c.removeRange(i,n,"backward"),d=l.getSelectionAfter(),p=l.getBlockForKey(d.getFocusKey());if(0===d.getStartOffset())o=f(l,t,p,"before");else if(d.getEndOffset()===p.getLength())o=f(l,t,p,"after");else{var h=c.splitBlock(l,d),m=h.getSelectionAfter(),_=h.getBlockForKey(m.getFocusKey());o=f(h,t,_,"before")}}var g=o.merge({selectionBefore:a,selectionAfter:o.getSelectionAfter().set("hasFocus",!0)});return u.push(e,g,"move-block")}};e.exports=v},function(e,t,n){"use strict";e.exports={draft_killswitch_allow_nontextnodes:!1,draft_segmented_entities_behavior:!1,draft_handlebeforeinput_composed_text:!1,draft_tree_data_support:!1}},function(e,t,n){"use strict";var r=n(17),i=n(5).Map,a={add:function(e,t,n){return o(e,t,n,!0)},remove:function(e,t,n){return o(e,t,n,!1)}};function o(e,t,n,a){var o=e.getBlockMap(),s=t.getStartKey(),l=t.getStartOffset(),c=t.getEndKey(),u=t.getEndOffset(),d=o.skipUntil(function(e,t){return t===s}).takeUntil(function(e,t){return t===c}).concat(i([[c,o.get(c)]])).map(function(e,t){var i,o;s===c?(i=l,o=u):(i=t===s?l:0,o=t===c?u:e.getLength());for(var d,p=e.getCharacterList();i<o;)d=p.get(i),p=p.set(i,a?r.applyStyle(d,n):r.removeStyle(d,n)),i++;return e.set("characterList",p)});return e.merge({blockMap:o.merge(d),selectionBefore:t,selectionAfter:t})}e.exports=a},function(e,t,n){"use strict";var r=n(5),i=n(253);e.exports=function(e,t,n){var a=e.getBlockMap(),o=t.getStartKey(),s=t.getStartOffset(),l=t.getEndKey(),c=t.getEndOffset(),u=a.skipUntil(function(e,t){return t===o}).takeUntil(function(e,t){return t===l}).toOrderedMap().merge(r.OrderedMap([[l,a.get(l)]])).map(function(e,t){var r=t===o?s:0,a=t===l?c:e.getLength();return i(e,r,a,n)});return e.merge({blockMap:a.merge(u),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t,n,i){for(var a=e.getCharacterList();t<n;)a=a.set(t,r.applyEntity(a.get(t),i)),t++;return e.set("characterList",a)}},function(e,t,n){"use strict";var r=n(255),i=n(256),a=n(6);function o(e,t,n,o,s,l,c){var u=n.getStartOffset(),d=n.getEndOffset(),p=e.__get(s).getMutability(),f=c?u:d;if("MUTABLE"===p)return n;var h=i(t,s).filter(function(e){return f<=e.end&&f>=e.start});1!=h.length&&a(!1);var m=h[0];if("IMMUTABLE"===p)return n.merge({anchorOffset:m.start,focusOffset:m.end,isBackward:!1});l||(c?d=m.end:u=m.start);var _=r.getRemovalRange(u,d,t.getText().slice(m.start,m.end),m.start,o);return n.merge({anchorOffset:_.start,focusOffset:_.end,isBackward:!1})}e.exports=function(e,t,n,r,i){var a=r.getStartOffset(),s=r.getEndOffset(),l=t.getEntityAt(a),c=n.getEntityAt(s-1);if(!l&&!c)return r;var u=r;if(l&&l===c)u=o(e,t,u,i,l,!0,!0);else if(l&&c){var d=o(e,t,u,i,l,!1,!0),p=o(e,n,u,i,c,!1,!1);u=u.merge({anchorOffset:d.getAnchorOffset(),focusOffset:p.getFocusOffset(),isBackward:!1})}else if(l){var f=o(e,t,u,i,l,!1,!0);u=u.merge({anchorOffset:f.getStartOffset(),isBackward:!1})}else if(c){var h=o(e,n,u,i,c,!1,!1);u=u.merge({focusOffset:h.getEndOffset(),isBackward:!1})}return u}},function(e,t,n){"use strict";e.exports={getRemovalRange:function(e,t,n,r,i){var a=n.split(" ");a=a.map(function(e,t){if("forward"===i){if(t>0)return" "+e}else if(t<a.length-1)return e+" ";return e});for(var o,s=r,l=null,c=null,u=0;u<a.length;u++){if(e<(o=s+a[u].length)&&s<t)null!==l?c=o:(l=s,c=o);else if(null!==l)break;s=o}var d=r+n.length,p=l===r,f=c===d;return(!p&&f||p&&!f)&&("forward"===i?c!==d&&c++:l!==r&&l--),{start:l,end:c}}}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){n.push({start:e,end:t})}),n.length||r(!1),n}},function(e,t,n){"use strict";var r=n(59),i=n(20),a=n(5),o=n(141),s=n(6),l=n(139),c=a.List,u=function(e,t,n,a,o,s){var l=n.first()instanceof i,u=[],d=a.size,p=n.get(o),f=a.first(),h=a.last(),m=h.getLength(),_=h.getKey(),g=l&&(!p.getChildKeys().isEmpty()||!f.getChildKeys().isEmpty());n.forEach(function(e,t){t===o?(g?u.push(e):u.push(function(e,t,n){var r=e.getText(),i=e.getCharacterList(),a=r.slice(0,t),o=i.slice(0,t),s=n.first();return e.merge({text:a+s.getText(),characterList:o.concat(s.getCharacterList()),type:a?e.getType():s.getType(),data:s.getData()})}(e,s,a)),a.slice(g?0:1,d-1).forEach(function(e){return u.push(e)}),u.push(function(e,t,n){var r=e.getText(),i=e.getCharacterList(),a=r.length,o=r.slice(t,a),s=i.slice(t,a),l=n.last();return l.merge({text:l.getText()+o,characterList:l.getCharacterList().concat(s),data:l.getData()})}(e,s,a))):u.push(e)});var v=r.createFromArray(u);return l&&(v=function(e,t,n,r){return e.withMutations(function(t){var i=n.getKey(),a=r.getKey(),o=n.getNextSiblingKey(),s=n.getParentKey(),l=function(e,t){var n=e.getKey(),r=e,i=[];for(t.get(n)&&i.push(n);r&&r.getNextSiblingKey();){var a=r.getNextSiblingKey();if(!a)break;i.push(a),r=t.get(a)}return i}(r,e),u=l[l.length-1];if(t.get(a)?(t.setIn([i,"nextSibling"],a),t.setIn([a,"prevSibling"],i)):(t.setIn([i,"nextSibling"],r.getNextSiblingKey()),t.setIn([r.getNextSiblingKey(),"prevSibling"],i)),t.setIn([u,"nextSibling"],o),o&&t.setIn([o,"prevSibling"],u),l.forEach(function(e){return t.setIn([e,"parent"],s)}),s){var d=e.get(s).getChildKeys(),p=d.indexOf(i)+1,f=d.toArray();f.splice.apply(f,[p,0].concat(l)),t.setIn([s,"children"],c(f))}})}(v,0,p,f)),e.merge({blockMap:v,selectionBefore:t,selectionAfter:t.merge({anchorKey:_,anchorOffset:m,focusKey:_,focusOffset:m,isBackward:!1})})};e.exports=function(e,t,n){t.isCollapsed()||s(!1);var r=e.getBlockMap(),a=l(n),c=t.getStartKey(),d=t.getStartOffset(),p=r.get(c);return p instanceof i&&(p.getChildKeys().isEmpty()||s(!1)),1===a.size?function(e,t,n,r,i,a){var s=n.get(i),l=s.getText(),c=s.getCharacterList(),u=i,d=a+r.getText().length,p=s.merge({text:l.slice(0,a)+r.getText()+l.slice(a),characterList:o(c,r.getCharacterList(),a),data:r.getData()});return e.merge({blockMap:n.set(i,p),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d,isBackward:!1})})}(e,t,r,a.first(),c,d):u(e,t,r,a,c,d)}},function(e,t,n){"use strict";var r=n(5),i=n(141),a=n(6),o=r.Repeat;e.exports=function(e,t,n,r){t.isCollapsed()||a(!1);var s=n.length;if(!s)return e;var l=e.getBlockMap(),c=t.getStartKey(),u=t.getStartOffset(),d=l.get(c),p=d.getText(),f=d.merge({text:p.slice(0,u)+n+p.slice(u,d.getLength()),characterList:i(d.getCharacterList(),o(r,s).toList(),u)}),h=u+s;return e.merge({blockMap:l.set(c,f),selectionAfter:t.merge({anchorOffset:h,focusOffset:h})})}},function(e,t,n){"use strict";var r=n(5).Map;e.exports=function(e,t,n){var i=t.getStartKey(),a=t.getEndKey(),o=e.getBlockMap(),s=o.toSeq().skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===a}).concat(r([[a,o.get(a)]])).map(n);return e.merge({blockMap:o.merge(s),selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=n(20),i=n(5),a=n(142),o=(i.List,i.Map),s=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},l=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var i=r.getParentKey();i&&n.push(i),r=i?t.get(i):null}return n},c=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},u=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},d=function(e,t,n,r){return e.withMutations(function(e){s(t.getKey(),e,function(n){return n.merge({nextSibling:c(t,e,r),prevSibling:u(t,e,r)})}),s(n.getKey(),e,function(t){return t.merge({nextSibling:c(n,e,r),prevSibling:u(n,e,r)})}),l(t.getKey(),r).forEach(function(t){return s(t,e,function(t){return t.merge({children:t.getChildKeys().filter(function(t){return e.get(t)}),nextSibling:c(t,e,r),prevSibling:u(t,e,r)})})}),s(t.getNextSiblingKey(),e,function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})}),s(t.getPrevSiblingKey(),e,function(n){return n.merge({nextSibling:c(t,e,r)})}),s(n.getNextSiblingKey(),e,function(t){return t.merge({prevSibling:u(n,e,r)})}),s(n.getPrevSiblingKey(),e,function(e){return e.merge({nextSibling:n.getNextSiblingKey()})}),l(n.getKey(),r).forEach(function(t){s(t,e,function(t){return t.merge({children:t.getChildKeys().filter(function(t){return e.get(t)}),nextSibling:c(t,e,r),prevSibling:u(t,e,r)})})}),function(e,t){var n=[];if(!e)return n;for(var r=a(e,t);r&&t.get(r);){var i=t.get(r);n.push(r),r=i.getParentKey()?a(i,t):null}return n}(n,r).forEach(function(t){return s(t,e,function(t){return t.merge({nextSibling:c(t,e,r),prevSibling:u(t,e,r)})})})})},p=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),i=e.slice(n);e=r.concat(i).toList()}return e};e.exports=function(e,t){if(t.isCollapsed())return e;var n=e.getBlockMap(),i=t.getStartKey(),s=t.getStartOffset(),c=t.getEndKey(),u=t.getEndOffset(),f=n.get(i),h=n.get(c),m=f instanceof r,_=[];if(m){var g=h.getChildKeys(),v=l(c,n);h.getNextSiblingKey()&&(_=_.concat(v)),g.isEmpty()||(_=_.concat(v.concat([c]))),_=_.concat(l(a(h,n),n))}var y=void 0;y=f===h?p(f.getCharacterList(),s,u):f.getCharacterList().slice(0,s).concat(h.getCharacterList().slice(u));var A=f.merge({text:f.getText().slice(0,s)+h.getText().slice(u),characterList:y}),x=n.toSeq().skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===c}).filter(function(e,t){return-1===_.indexOf(t)}).concat(o([[c,null]])).map(function(e,t){return t===i?A:null}),S=n.merge(x).filter(function(e){return!!e});return m&&(S=d(S,f,h,n)),e.merge({blockMap:S,selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:s,focusKey:i,focusOffset:s,isBackward:!1})})}},function(e,t,n){"use strict";var r=n(20),i=n(5),a=n(31),o=n(6),s=i.List,l=i.Map,c=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}};e.exports=function(e,t){t.isCollapsed()||o(!1);var n=t.getAnchorKey(),i=t.getAnchorOffset(),u=e.getBlockMap(),d=u.get(n),p=d.getText(),f=d.getCharacterList(),h=a(),m=d instanceof r,_=d.merge({text:p.slice(0,i),characterList:f.slice(0,i)}),g=_.merge({key:h,text:p.slice(i),characterList:f.slice(i),data:l()}),v=u.toSeq().takeUntil(function(e){return e===d}),y=u.toSeq().skipUntil(function(e){return e===d}).rest(),A=v.concat([[n,_],[h,g]],y).toOrderedMap();return m&&(d.getChildKeys().isEmpty()||o(!1),A=function(e,t,n){return e.withMutations(function(e){var r=t.getKey(),i=n.getKey();c(t.getParentKey(),e,function(e){var t=e.getChildKeys(),n=t.indexOf(r)+1,a=t.toArray();return a.splice(n,0,i),e.merge({children:s(a)})}),c(t.getNextSiblingKey(),e,function(e){return e.merge({prevSibling:i})}),c(r,e,function(e){return e.merge({nextSibling:i})}),c(i,e,function(e){return e.merge({prevSibling:r})})})}(A,_,g)),e.merge({blockMap:A,selectionBefore:t,selectionAfter:t.merge({anchorKey:h,anchorOffset:0,focusKey:h,focusOffset:0,isBackward:!1})})}},function(e,t,n){"use strict";var r,i=n(5),a=n(263),o=n(22),s=i.OrderedMap,l={getDirectionMap:function(e,t){r?r.reset():r=new a;var n=e.getBlockMap(),l=n.valueSeq().map(function(e){return o(r).getDirection(e.getText())}),c=s(n.keySeq().zip(l));return null!=t&&i.is(t,c)?t:c}};e.exports=l},function(e,t,n){"use strict";var r=n(145),i=n(93),a=n(6),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?i.isStrong(t)||a(!1):t=i.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=r.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=o},function(e,t,n){"use strict";var r=n(20),i=n(5),a=n(142),o=n(6),s=i.OrderedMap,l=i.List,c=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},u=function(e,t,n,r,i){if(!i)return e;var a="after"===r,o=t.getKey(),s=n.getKey(),u=t.getParentKey(),d=t.getNextSiblingKey(),p=t.getPrevSiblingKey(),f=n.getParentKey(),h=a?n.getNextSiblingKey():s,m=a?s:n.getPrevSiblingKey();return e.withMutations(function(e){c(u,e,function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(o))})}),c(p,e,function(e){return e.merge({nextSibling:d})}),c(d,e,function(e){return e.merge({prevSibling:p})}),c(h,e,function(e){return e.merge({prevSibling:o})}),c(m,e,function(e){return e.merge({nextSibling:o})}),c(f,e,function(e){var t=e.getChildKeys(),n=t.indexOf(s),r=a?n+1:0!==n?n-1:0,i=t.toArray();return i.splice(r,0,o),e.merge({children:l(i)})}),c(o,e,function(e){return e.merge({nextSibling:h,prevSibling:m,parent:f})})})};e.exports=function(e,t,n,i){"replace"===i&&o(!1);var l=n.getKey(),c=t.getKey();c===l&&o(!1);var d=e.getBlockMap(),p=t instanceof r,f=[t],h=d.delete(c);p&&(f=[],h=d.withMutations(function(e){var n=t.getNextSiblingKey(),r=a(t,e);e.toSeq().skipUntil(function(e){return e.getKey()===c}).takeWhile(function(e){var t=e.getKey(),i=t===c,a=n&&t!==n,o=!n&&e.getParentKey()&&(!r||t!==r);return!!(i||a||o)}).forEach(function(t){f.push(t),e.delete(t.getKey())})}));var m=h.toSeq().takeUntil(function(e){return e===n}),_=h.toSeq().skipUntil(function(e){return e===n}).skip(1),g=f.map(function(e){return[e.getKey(),e]}),v=s();if("before"===i){var y=e.getBlockBefore(l);y&&y.getKey()===t.getKey()&&o(!1),v=m.concat([].concat(g,[[l,n]]),_).toOrderedMap()}else if("after"===i){var A=e.getBlockAfter(l);A&&A.getKey()===c&&o(!1),v=m.concat([[l,n]].concat(g),_).toOrderedMap()}return e.merge({blockMap:u(v,t,n,i,p),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:c,focusKey:c})})}},function(e,t,n){"use strict";var r=n(5).List,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._decorators=t.slice()}return e.prototype.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach(function(r,i){var a=0;(0,r.strategy)(e,function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(function(e,t,n,r){for(var i=t;i<n;i++)e[i]=r}(n,e,t,i+"."+a),a++)},t)}),r(n)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=i},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n(94),a=n(146),o=n(267),s=n(268),l=n(291),c=n(294),u=n(326),d=n(7),p=n(4),f=n(30),h=n(150),m=n(98),_=n(26),g=n(46),v=n(90),y=n(31),A=n(164),x=n(99),S=n(6),b=n(22),w=_.isBrowser("IE"),E=!w,P={edit:c,composite:o,drag:l,cut:null,render:null},C=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.focus=function(e){var t=r.props.editorState,n=t.getSelection().getHasFocus(),i=f.findDOMNode(r.editor);if(i){var a=m.getScrollParent(i),o=e||x(a),s=o.x,l=o.y;i instanceof HTMLElement||S(!1),i.focus(),a===window?window.scrollTo(s,l):h.setTop(a,l),n||r.update(d.forceSelection(t,t.getSelection()))}},r.blur=function(){var e=f.findDOMNode(r.editor);e instanceof HTMLElement||S(!1),e.blur()},r.setMode=function(e){r._handler=P[e]},r.exitCurrentMode=function(){r.setMode("edit")},r.restoreEditorDOM=function(e){r.setState({contentsKey:r.state.contentsKey+1},function(){r.focus(e)})},r.setClipboard=function(e){r._clipboard=e},r.getClipboard=function(){return r._clipboard},r.update=function(e){r._latestEditorState=e,r.props.onChange(e)},r.onDragEnter=function(){r._dragCount++},r.onDragLeave=function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()},r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=n.editorKey||y(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=n.editorState,r._latestCommittedEditorState=n.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},r.state={contentsKey:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&r(t,n)}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:b(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return p.createElement(u,e)}return null},t.prototype.render=function(){var e=this,t=this.props,n=t.blockRenderMap,i=t.blockRendererFn,o=t.blockStyleFn,l=t.customStyleFn,c=t.customStyleMap,u=t.editorState,d=t.readOnly,f=t.textAlignment,h=t.textDirectionality,m=g({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===f,"DraftEditor/alignRight":"right"===f,"DraftEditor/alignCenter":"center"===f}),_=this.props.role||"textbox",v="combobox"===_?!!this.props.ariaExpanded:null,y={blockRenderMap:n,blockRendererFn:i,blockStyleFn:o,customStyleMap:r({},a,c),customStyleFn:l,editorKey:this._editorKey,editorState:u,key:"contents"+this.state.contentsKey,textDirectionality:h};return p.createElement("div",{className:m},this._renderPlaceholder(),p.createElement("div",{className:g("DraftEditor/editorContainer"),ref:function(t){return e.editorContainer=t}},p.createElement("div",{"aria-activedescendant":d?null:this.props.ariaActiveDescendantID,"aria-autocomplete":d?null:this.props.ariaAutoComplete,"aria-controls":d?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":d?null:v,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:g({notranslate:!d,"public/DraftEditor/content":!0}),contentEditable:!d,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(t){return e.editor=t},role:d?null:_,spellCheck:E&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},p.createElement(s,y))))},t.prototype.componentDidMount=function(){this.setMode("edit"),w&&document.execCommand("AutoUrlDetect",!1,!1)},t.prototype.componentWillUpdate=function(e){this._blockSelectEvents=!0,this._latestEditorState=e.editorState},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestCommittedEditorState=this.props.editorState},t}(p.Component);C.defaultProps={blockRenderMap:i,blockRendererFn:v.thatReturnsNull,blockStyleFn:v.thatReturns(""),keyBindingFn:A,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},e.exports=C},function(e,t,n){"use strict";var r=n(33),i=n(15),a=n(7),o=n(95),s=n(96),l=n(61),c=n(147),u=!1,d=!1,p="",f={onBeforeInput:function(e,t){p=(p||"")+t.data},onCompositionStart:function(e){d=!0},onCompositionEnd:function(e){u=!1,d=!1,setTimeout(function(){u||f.resolveComposition(e)},20)},onKeyDown:function(e,t){if(!d)return f.resolveComposition(e),void e._onKeyDown(t);t.which!==o.RIGHT&&t.which!==o.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===o.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!d){u=!0;var t=p;p="";var n=a.set(e._latestEditorState,{inCompositionMode:!1}),o=n.getCurrentInlineStyle(),f=s(n.getCurrentContent(),n.getSelection()),h=!t||c(n)||o.size>0||null!==f;if(h&&e.restoreEditorDOM(),e.exitCurrentMode(),t){if(r.draft_handlebeforeinput_composed_text&&e.props.handleBeforeInput&&l(e.props.handleBeforeInput(t,n)))return;var m=i.replaceText(n.getCurrentContent(),n.getSelection(),t,o,f);e.update(a.push(n,m,"insert-characters"))}else h&&e.update(a.set(n,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=f},function(e,t,n){"use strict";var r=n(269);e.exports=r},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=n(148),a=n(75),o=(n(7),n(4)),s=n(46),l=n(290),c=n(22),u=function(e,t,n,r){return s({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),i=t.isInCompositionMode(),a=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||i&&a)return!1;var o=t.getCurrentContent(),s=n.getCurrentContent(),l=t.getDecorator(),c=n.getDecorator();return i!==a||o!==s||l!==c||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,s=e.blockStyleFn,d=e.customStyleMap,p=e.customStyleFn,f=e.editorState,h=e.editorKey,m=e.textDirectionality,_=f.getCurrentContent(),g=f.getSelection(),v=f.mustForceSelection(),y=f.getDecorator(),A=c(f.getDirectionMap()),x=_.getBlocksAsArray(),S=[],b=null,w=null,E=0;E<x.length;E++){var P=x[E],C=P.getKey(),T=P.getType(),V=n(P),F=void 0,D=void 0,O=void 0;V&&(F=V.component,D=V.props,O=V.editable);var R=m||A.get(C),M=a.encode(C,0,0),L={contentState:_,block:P,blockProps:D,blockStyleFn:s,customStyleMap:d,customStyleFn:p,decorator:y,direction:R,forceSelection:v,key:C,offsetKey:M,selection:g,tree:f.getBlockTree(C)},B=t.get(T)||t.get("unstyled"),k=B.wrapper,I=B.element||t.get("unstyled").element,j=P.getDepth(),N="";if(s&&(N=s(P)),"li"===I)N=l(N,u(T,j,w!==k||null===b||j>b,R));var U=F||i,z={className:N,"data-block":!0,"data-editor":h,"data-offset-key":M,key:C};void 0!==O&&(z=r({},z,{contentEditable:O,suppressContentEditableWarning:!0}));var G=o.createElement(I,z,o.createElement(U,L));S.push({block:G,wrapperTemplate:k,key:C,offsetKey:M}),b=k?P.getDepth():null,w=k}for(var W=[],H=0;H<S.length;){var q=S[H];if(q.wrapperTemplate){var K=[];do{K.push(S[H].block),H++}while(H<S.length&&S[H].wrapperTemplate===q.wrapperTemplate);var Y=o.cloneElement(q.wrapperTemplate,{key:q.key+"-wrap","data-offset-key":q.offsetKey},K);W.push(Y)}else W.push(q.block),H++}return o.createElement("div",{"data-contents":"true"},W)},t}(o.Component);e.exports=d},function(e,t,n){"use strict";var r=n(14);var i=n(271),a=n(4),o=n(30),s=n(6),l=n(278),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,i=t.text,a=n.getKey(),c=r+i.length;if(e.hasEdgeWithin(a,r,c)){var u=o.findDOMNode(this);u||s(!1);var d=u.firstChild;d||s(!1);var p=void 0;d.nodeType===Node.TEXT_NODE?p=d:"BR"===d.tagName?p=u:(p=d.firstChild)||s(!1),l(e,p,a,r,c)}}},t.prototype.shouldComponentUpdate=function(e){var t=o.findDOMNode(this.leaf);return t||s(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this,t=this.props.block,n=this.props.text;n.endsWith("\n")&&this.props.isLast&&(n+="\n");var o=this.props,s=o.customStyleMap,l=o.customStyleFn,c=o.offsetKey,u=o.styleSet,d=u.reduce(function(e,t){var n={},i=s[t];return void 0!==i&&e.textDecoration!==i.textDecoration&&(n.textDecoration=[e.textDecoration,i.textDecoration].join(" ").trim()),r(e,i,n)},{});if(l){var p=l(u,t);d=r(d,p)}return a.createElement("span",{"data-offset-key":c,ref:function(t){return e.leaf=t},style:d},a.createElement(i,null,n))},t}(a.Component);e.exports=c},function(e,t,n){"use strict";var r=n(4),i=n(30),a=n(26),o=n(6),s=a.isBrowser("IE <= 11");var l=s?r.createElement("span",{key:"A","data-text":"true"},"\n"):r.createElement("br",{key:"A","data-text":"true"}),c=s?r.createElement("span",{key:"B","data-text":"true"},"\n"):r.createElement("br",{key:"B","data-text":"true"}),u=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._forceFlag=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){var t=i.findDOMNode(this),n=""===e.children;return t instanceof Element||o(!1),n?!function(e){return s?"\n"===e.textContent:"BR"===e.tagName}(t):t.textContent!==e.children},t.prototype.componentDidMount=function(){this._forceFlag=!this._forceFlag},t.prototype.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){return""===this.props.children?this._forceFlag?l:c:r.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},t}(r.Component);e.exports=u},function(e,t,n){"use strict";var r=n(273),i="Unknown",a={"Mac OS":"Mac OS X"};var o,s=(new r).getResult(),l=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(s.browser.version),c={browserArchitecture:s.cpu.architecture||i,browserFullVersion:s.browser.version||i,browserMinorVersion:l.minor||i,browserName:s.browser.name||i,browserVersion:s.browser.major||i,deviceName:s.device.model||i,engineName:s.engine.name||i,engineVersion:s.engine.version||i,platformArchitecture:s.cpu.architecture||i,platformName:(o=s.os.name,a[o]||o||i),platformVersion:s.os.version||i,platformFullVersion:s.os.version||i};e.exports=c},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.19
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
/*!
 * UAParser.js v0.7.19
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */
!function(i,a){"use strict";var o="model",s="name",l="type",c="vendor",u="version",d="mobile",p="tablet",f={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(e,t){for(var n,r,i,a,o,s,l=0;l<t.length&&!o;){var c=t[l],u=t[l+1];for(n=r=0;n<c.length&&!o;)if(o=c[n++].exec(e))for(i=0;i<u.length;i++)s=o[++r],"object"==typeof(a=u[i])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;l+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(f.has(t[n][r],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},_={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],u],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,u],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,h.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,c,[l,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[c,"Apple"],[l,p]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[c,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,o,[l,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[c,"Amazon"],[l,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,h.str,m.device.amazon.model],[c,"Amazon"],[l,d]],[/android.+aft([bms])\sbuild/i],[o,[c,"Amazon"],[l,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,c,[l,d]],[/\((ip[honed|\s\w*]+);/i],[o,[c,"Apple"],[l,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,o,[l,d]],[/\(bb10;\s(\w+)/i],[o,[c,"BlackBerry"],[l,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[c,"Asus"],[l,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[o,"Xperia Tablet"],[l,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[o,[c,"Sony"],[l,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,o,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[c,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[c,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[c,h.str,m.device.sprint.vendor],[o,h.str,m.device.sprint.model],[l,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[c,o,[l,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[o,/_/g," "],[l,d]],[/(nexus\s9)/i],[o,[c,"HTC"],[l,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[o,[c,"Huawei"],[l,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,o,[l,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[c,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[c,"Microsoft"],[l,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[c,"Motorola"],[l,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[c,"Motorola"],[l,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,f.trim],[o,f.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[c,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[c,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],o,[l,p]],[/smart-tv.+(samsung)/i],[c,[l,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],o,[l,d]],[/sie-(\w*)/i],[o,[c,"Siemens"],[l,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],o,[l,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[c,"Acer"],[l,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[c,"LG"],[l,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],o,[l,p]],[/(lg) netcast\.tv/i],[c,o,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[c,"LG"],[l,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[c,"Lenovo"],[l,p]],[/linux;.+((jolla));/i],[c,o,[l,d]],[/((pebble))app\/[\d\.]+\s/i],[c,o,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,o,[l,d]],[/crkey/i],[[o,"Chromecast"],[c,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[c,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[o,[c,"Google"],[l,p]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[o,[c,"Google"],[l,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[c,"Xiaomi"],[l,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[c,"Xiaomi"],[l,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[c,"Meizu"],[l,p]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],o,[l,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[o,[c,"OnePlus"],[l,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[c,"RCA"],[l,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[c,"Dell"],[l,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[c,"Verizon"],[l,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],o,[l,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[c,"NuVision"],[l,p]],[/android.+;\s(k88)\sbuild/i],[o,[c,"ZTE"],[l,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[c,"Swiss"],[l,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[c,"Swiss"],[l,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[c,"Zeki"],[l,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],o,[l,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[c,"Insignia"],[l,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[c,"NextBook"],[l,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],o,[l,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],o,[l,d]],[/android.+;\s(PH-1)\s/i],[o,[c,"Essential"],[l,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[c,"Envizen"],[l,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,o,[l,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[c,"MachSpeed"],[l,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,o,[l,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[c,"Rotor"],[l,p]],[/android.+(KS(.+))\s+build/i],[o,[c,"Amazon"],[l,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,o,[l,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,f.lowerize],c,o],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,h.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,h.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?f.extend(_,t):_;return this.getBrowser=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,r.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return h.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};g.VERSION="0.7.19",g.BROWSER={NAME:s,MAJOR:"major",VERSION:u},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:o,VENDOR:c,TYPE:l,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:u},g.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):n(274)?void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r):i&&(i.UAParser=g);var v=i&&(i.jQuery||i.Zepto);if(void 0!==v&&!v.ua){var y=new g;v.ua=y.getResult(),v.ua.get=function(){return y.getUA()},v.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)v.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var r=n(6),i=/\./,a=/\|\|/,o=/\s+\-\s+/,s=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,l=/^(\d*)(.*)/;function c(e,t){var n=e.split(a);return n.length>1?n.some(function(e){return A.contains(e,t)}):function(e,t){var n=e.split(o);if(n.length>0&&n.length<=2||r(!1),1===n.length)return u(n[0],t);var i=n[0],a=n[1];return m(i)&&m(a)||r(!1),u(">="+i,t)&&u("<="+a,t)}(e=n[0].trim(),t)}function u(e,t){if(""===(e=e.trim()))return!0;var n,r=t.split(i),a=f(e),o=a.modifier,s=a.rangeComponents;switch(o){case"<":return d(r,s);case"<=":return-1===(n=y(r,s))||0===n;case">=":return p(r,s);case">":return function(e,t){return 1===y(e,t)}(r,s);case"~":case"~>":return function(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var i=r.length-1,a=parseInt(r[i],10);h(a)&&(r[i]=a+1+"");return p(e,n)&&d(e,r)}(r,s);default:return function(e,t){return 0===y(e,t)}(r,s)}}function d(e,t){return-1===y(e,t)}function p(e,t){var n=y(e,t);return 1===n||0===n}function f(e){var t=e.split(i),n=t[0].match(s);return n||r(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function h(e){return!isNaN(e)&&isFinite(e)}function m(e){return!f(e).modifier}function _(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function g(e,t){var n=e.match(l)[1],r=t.match(l)[1],i=parseInt(n,10),a=parseInt(r,10);return h(i)&&h(a)&&i!==a?v(i,a):v(e,t)}function v(e,t){return typeof e!=typeof t&&r(!1),e>t?1:e<t?-1:0}function y(e,t){for(var n=function(e,t){_(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var i=n;i<e.length;i++)e[i]="0"}return _(t,e.length),[e,t]}(e,t),r=n[0],i=n[1],a=0;a<i.length;a++){var o=g(r[a],i[a]);if(o)return o}return 0}var A={contains:function(e,t){return c(e.trim(),t.trim())}};e.exports=A},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!e)return null;var i={};for(var a in e)r.call(e,a)&&(i[a]=t.call(n,e[a],a,e));return i}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";(function(t){var r=n(279),i=n(97),a=n(149),o=n(6);function s(e,t){if(!e)return"[empty]";var n=function e(t,n){var r=void 0!==n?n(t):[];if(t.nodeType===Node.TEXT_NODE){var i=t.textContent.length;return document.createTextNode("[text "+i+(r.length?" | "+r.join(", "):"")+"]")}var a=t.cloneNode();1===a.nodeType&&r.length&&a.setAttribute("data-labels",r.join(", "));var o=t.childNodes;for(var s=0;s<o.length;s++)a.appendChild(e(o[s],n));return a}(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(n instanceof Element||o(!1),n.outerHTML)}function l(e,t){for(var n=e;n;){if(n instanceof Element&&n.hasAttribute("contenteditable"))return s(n,t);n=n.parentNode}return"Could not find contentEditable parent of node"}function c(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function u(e,t,n,o){var s=a();if(e.extend&&i(s,t)){n>c(t)&&r.logSelectionStateFailure({anonymizedDom:l(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(o.toJS())});var u=t===e.focusNode;try{e.extend(t,n)}catch(i){throw r.logSelectionStateFailure({anonymizedDom:l(t,function(t){var n=[];return t===s&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n}),extraParams:JSON.stringify({activeElementName:s?s.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:u,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:i?""+i:null,offset:n},null,2),selectionState:JSON.stringify(o.toJS(),null,2)}),i}}else{var d=e.getRangeAt(0);d.setEnd(t,n),e.addRange(d.cloneRange())}}function d(e,t,n,i){var a=document.createRange();n>c(t)&&r.logSelectionStateFailure({anonymizedDom:l(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(i.toJS())}),a.setStart(t,n),e.addRange(a)}e.exports=function(e,n,r,a,o){if(i(document.documentElement,n)){var s=t.getSelection(),l=e.getAnchorKey(),c=e.getAnchorOffset(),p=e.getFocusKey(),f=e.getFocusOffset(),h=e.getIsBackward();if(!s.extend&&h){var m=l,_=c;l=p,c=f,p=m,f=_,h=!1}var g=l===r&&a<=c&&o>=c,v=p===r&&a<=f&&o>=f;if(g&&v)return s.removeAllRanges(),d(s,n,c-a,e),void u(s,n,f-a,e);if(h){if(v&&(s.removeAllRanges(),d(s,n,f-a,e)),g){var y=s.focusNode,A=s.focusOffset;s.removeAllRanges(),d(s,n,c-a,e),u(s,y,A,e)}}else g&&(s.removeAllRanges(),d(s,n,c-a,e)),v&&u(s,n,f-a,e)}}}).call(this,n(12))},function(e,t,n){"use strict";e.exports={logSelectionStateFailure:function(){return null}}},function(e,t,n){"use strict";var r=n(281);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(283),i=n(284);function a(e){return null==e?e:String(e)}e.exports=function(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return a(n.getPropertyValue(i(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return a(n.getPropertyValue(i(t)));if("display"===t)return"none"}return e.currentStyle?a("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[r(t)]):a(e.style&&e.style[r(t)])}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";var r=n(286);e.exports=function(e){var t=r(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}},function(e,t,n){"use strict";var r=n(97);e.exports=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e&&r(t,e)))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}},function(e,t,n){"use strict";var r="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=function(e){return(e=e||document).scrollingElement?e.scrollingElement:r||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}},function(e,t,n){"use strict";e.exports=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}},function(e,t,n){"use strict";function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function i(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function a(){return{width:window.innerWidth||r(),height:window.innerHeight||i()}}a.withoutScrollbars=function(){return{width:r(),height:i()}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var r=1;r<n;r++)(t=arguments[r])&&(e=(e?e+" ":"")+t);return e}},function(e,t,n){"use strict";var r=n(151),i=n(15),a=n(7),o=n(100),s=n(153),l=n(154),c=n(61),u=n(22);var d={onDragEnd:function(e){e.exitCurrentMode()},onDrop:function(e,t){var n=new r(t.nativeEvent.dataTransfer),d=e._latestEditorState,f=function(e,t){var n=null,r=null;if("function"==typeof document.caretRangeFromPoint){var i=document.caretRangeFromPoint(e.x,e.y);n=i.startContainer,r=i.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=u(n),r=u(r);var a=u(o(n));return l(t,a,r,a,r)}(t.nativeEvent,d);if(t.preventDefault(),e.exitCurrentMode(),null!=f){var h=n.getFiles();if(h.length>0){if(e.props.handleDroppedFiles&&c(e.props.handleDroppedFiles(f,h)))return;s(h,function(t){t&&e.update(p(d,f,t))})}else{var m=e._internalDrag?"internal":"external";e.props.handleDrop&&c(e.props.handleDrop(f,n,m))||(e._internalDrag?e.update(function(e,t){var n=i.moveText(e.getCurrentContent(),e.getSelection(),t);return a.push(e,n,"insert-fragment")}(d,f)):e.update(p(d,f,n.getText())))}}}};function p(e,t,n){var r=i.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return a.push(e,r,"insert-fragment")}e.exports=d},function(e,t,n){"use strict";var r={isImage:function(e){return"image"===i(e)[0]},isJpeg:function(e){var t=i(e);return r.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function i(e){return e.split("/")}e.exports=r},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&r(!1),"number"!=typeof t&&r(!1),0===t||t-1 in e||r(!1),"function"==typeof e.callee&&r(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}(e):[e]}},function(e,t,n){"use strict";var r={onBeforeInput:n(295),onBlur:n(297),onCompositionStart:n(298),onCopy:n(299),onCut:n(300),onDragOver:n(301),onDragStart:n(302),onFocus:n(303),onInput:n(304),onKeyDown:n(305),onPaste:n(319),onSelect:n(324)};e.exports=r},function(e,t,n){"use strict";(function(t){var r=n(143),i=n(15),a=n(7),o=n(26),s=n(96),l=n(61),c=n(147),u=n(22),d=n(296),p="'",f="/",h=o.isBrowser("Firefox");function m(e,t,n,r){var o=i.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return a.push(e,o,"insert-characters")}e.exports=function(e,n){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var i=e._latestEditorState,o=n.data;if(o)if(e.props.handleBeforeInput&&l(e.props.handleBeforeInput(o,i)))n.preventDefault();else{var _=i.getSelection(),g=_.getStartOffset(),v=_.getEndOffset(),y=_.getAnchorKey();if(!_.isCollapsed())return n.preventDefault(),void(o===i.getCurrentContent().getPlainText().slice(g,v)?e.update(a.forceSelection(i,_.merge({focusOffset:v}))):e.update(m(i,o,i.getCurrentInlineStyle(),s(i.getCurrentContent(),i.getSelection()))));var A,x=m(i,o,i.getCurrentInlineStyle(),s(i.getCurrentContent(),i.getSelection())),S=!1;if(S||(S=c(e._latestCommittedEditorState)),!S){var b=t.getSelection();if(b.anchorNode&&b.anchorNode.nodeType===Node.TEXT_NODE){var w=b.anchorNode.parentNode;S="SPAN"===w.nodeName&&w.firstChild.nodeType===Node.TEXT_NODE&&-1!==w.firstChild.nodeValue.indexOf("\t")}}if(S||(S=r.getFingerprint(i.getBlockTree(y))!==r.getFingerprint(x.getBlockTree(y))),S||(A=o,S=h&&(A==p||A==f)),S||(S=u(x.getDirectionMap()).get(y)!==u(i.getDirectionMap()).get(y)),S)return n.preventDefault(),void e.update(x);x=a.set(x,{nativelyRenderedContent:x.getCurrentContent()}),e._pendingStateFromBeforeInput=x,d(function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)})}}}).call(this,n(12))},function(e,t,n){"use strict";(function(t){n(155),e.exports=t.setImmediate}).call(this,n(12))},function(e,t,n){"use strict";(function(t){var r=n(7),i=n(97),a=n(149);e.exports=function(e,n){if(a()===document.body){var o=t.getSelection(),s=e.editor;1===o.rangeCount&&i(s,o.anchorNode)&&i(s,o.focusNode)&&o.removeAllRanges()}var l=e._latestEditorState,c=l.getSelection();if(c.getHasFocus()){var u=c.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(n),e.update(r.acceptSelection(l,u))}}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){e.setMode("composite"),e.update(r.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}},function(e,t,n){"use strict";var r=n(156);e.exports=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(r(e._latestEditorState))}},function(e,t,n){"use strict";var r=n(15),i=n(7),a=n(98),o=n(156),s=n(99);e.exports=function(e,t){var n=e._latestEditorState,l=n.getSelection(),c=t.target,u=void 0;if(l.isCollapsed())t.preventDefault();else{c instanceof Node&&(u=s(a.getScrollParent(c)));var d=o(n);e.setClipboard(d),e.setMode("cut"),setTimeout(function(){e.restoreEditorDOM(u),e.exitCurrentMode(),e.update(function(e){var t=r.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return i.push(e,t,"remove-range")}(n))},0)}}},function(e,t,n){"use strict";e.exports=function(e,t){e._internalDrag=!1,e.setMode("drag"),t.preventDefault()}},function(e,t,n){"use strict";e.exports=function(e){e._internalDrag=!0,e.setMode("drag")}},function(e,t,n){"use strict";var r=n(7),i=n(26);e.exports=function(e,t){var n=e._latestEditorState,a=n.getSelection();if(!a.getHasFocus()){var o=a.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),i.isBrowser("Chrome < 60.0.3081.0")?e.update(r.forceSelection(n,o)):e.update(r.acceptSelection(n,o))}}},function(e,t,n){"use strict";(function(t){var r=n(33),i=n(15),a=n(75),o=n(7),s=n(26),l=n(100),c=n(22),u=s.isEngine("Gecko"),d="\n\n";e.exports=function(e){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=t.getSelection(),s=n.anchorNode,p=n.isCollapsed,f=s.nodeType!==Node.TEXT_NODE,h=s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.ELEMENT_NODE;if(r.draft_killswitch_allow_nontextnodes){if(f)return}else if(h)return;if(s.nodeType===Node.TEXT_NODE&&(null!==s.previousSibling||null!==s.nextSibling)){var m=s.parentNode;s.nodeValue=m.textContent;for(var _=m.firstChild;null!==_;_=_.nextSibling)_!==s&&m.removeChild(_)}var g=s.textContent,v=e._latestEditorState,y=c(l(s)),A=a.decode(y),x=A.blockKey,S=A.decoratorKey,b=A.leafKey,w=v.getBlockTree(x).getIn([S,"leaves",b]),E=w.start,P=w.end,C=v.getCurrentContent(),T=C.getBlockForKey(x),V=T.getText().slice(E,P);if(g.endsWith(d)&&(g=g.slice(0,-1)),g!==V){var F,D,O,R,M=v.getSelection(),L=M.merge({anchorOffset:E,focusOffset:P,isBackward:!1}),B=T.getEntityAt(E),k=B&&C.getEntity(B),I="MUTABLE"===(k&&k.getMutability()),j=I?"spellcheck-change":"apply-entity",N=i.replaceText(C,L,g,T.getInlineStyleAt(E),I?T.getEntityAt(E):null);if(u)F=n.anchorOffset,D=n.focusOffset,R=(O=E+Math.min(F,D))+Math.abs(F-D),F=O,D=R;else{var U=g.length-V.length;O=M.getStartOffset(),R=M.getEndOffset(),F=p?R+U:O,D=R+U}var z=N.merge({selectionBefore:C.getSelectionAfter(),selectionAfter:M.merge({anchorOffset:F,focusOffset:D})});e.update(o.push(v,z,j))}}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(15),i=n(7),a=n(101),o=n(95),s=n(306),l=n(26),c=n(61),u=n(307),d=n(309),p=n(311),f=n(312),h=n(313),m=n(314),_=n(315),g=n(316),v=n(317),y=n(318),A=a.isOptionKeyCommand,x=l.isBrowser("Chrome");e.exports=function(e,t){var n=t.which,a=e._latestEditorState;switch(n){case o.RETURN:if(t.preventDefault(),e.props.handleReturn&&c(e.props.handleReturn(t,a)))return;break;case o.ESC:return t.preventDefault(),void(e.props.onEscape&&e.props.onEscape(t));case o.TAB:return void(e.props.onTab&&e.props.onTab(t));case o.UP:return void(e.props.onUpArrow&&e.props.onUpArrow(t));case o.RIGHT:return void(e.props.onRightArrow&&e.props.onRightArrow(t));case o.DOWN:return void(e.props.onDownArrow&&e.props.onDownArrow(t));case o.LEFT:return void(e.props.onLeftArrow&&e.props.onLeftArrow(t));case o.SPACE:if(x&&A(t)){t.preventDefault();var l=r.replaceText(a.getCurrentContent(),a.getSelection(),"");return void e.update(i.push(a,l,"insert-characters"))}}var S=e.props.keyBindingFn(t);if(S)if("undo"!==S){if(t.preventDefault(),!e.props.handleKeyCommand||!c(e.props.handleKeyCommand(S,a))){var b=function(e,t){switch(e){case"redo":return i.redo(t);case"delete":return g(t);case"delete-word":return p(t);case"backspace":return _(t);case"backspace-word":return d(t);case"backspace-to-start-of-line":return u(t);case"split-block":return f(t);case"transpose-characters":return v(t);case"move-selection-to-start-of-block":return m(t);case"move-selection-to-end-of-block":return h(t);case"secondary-cut":return s.cut(t);case"secondary-paste":return s.paste(t);default:return t}}(S,a);b!==a&&e.update(b)}}else y(t,a,e.update)}},function(e,t,n){"use strict";var r=n(15),i=n(7),a=n(73),o=n(22),s=null,l={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),l=null;if(n.isCollapsed()){var c=n.getAnchorKey(),u=t.getBlockForKey(c).getLength();if(u===n.getAnchorOffset())return e;l=n.set("focusOffset",u)}else l=n;l=o(l),s=a(t,l);var d=r.removeRange(t,l,"forward");return d===t?e:i.push(e,d,"remove-range")},paste:function(e){if(!s)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),s);return i.push(e,t,"insert-fragment")}};e.exports=l},function(e,t,n){"use strict";(function(t){var r=n(7),i=n(308),a=n(158),o=n(102),s=n(62);e.exports=function(e){var n=s(e,function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return o(e,1);var r=t.getSelection().getRangeAt(0);return r=i(r),a(e,null,r.endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState},"backward");return n===e.getCurrentContent()?e:r.push(e,n,"remove-range")}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(39),i=n(157),a=n(6);function o(e,t){for(var n=1/0,r=1/0,i=-1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),r=Math.min(r,s.bottom),i=Math.max(i,s.top),a=Math.max(a,s.bottom))}return i<=r&&i-n<t&&a-r<t}function s(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}e.exports=function(e){e.collapsed||a(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var r=document.body;r||a(!1),r.appendChild(n);var i=n.getBoundingClientRect();return r.removeChild(n),i.height}(t),l=e.endContainer,c=e.endOffset;for(e.setStart(e.startContainer,0);o(i(e),n)&&(l=e.startContainer,c=e.startOffset,l.parentNode||a(!1),e.setStartBefore(l),1!==l.nodeType||"inline"===getComputedStyle(l).display););for(var u=l,d=c-1;;){for(var p=u.nodeValue,f=d;f>=0;f--)if(!(null!=p&&f>0&&r.isSurrogatePair(p,f-1))){if(e.setStart(u,f),!o(i(e),n))break;l=u,c=f}if(-1===f||0===u.childNodes.length)break;d=s(u=u.childNodes[f])}return e.setStart(l,c),e}},function(e,t,n){"use strict";var r=n(159),i=n(7),a=n(102),o=n(62);e.exports=function(e){var t=o(e,function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return a(e,1);var i=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(i).getText().slice(0,n),s=r.getBackward(o);return a(e,s.length||1)},"backward");return t===e.getCurrentContent()?e:i.push(e,t,"remove-range")}},function(e,t,n){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;-----------]"}}},function(e,t,n){"use strict";var r=n(159),i=n(7),a=n(160),o=n(62);e.exports=function(e){var t=o(e,function(e){var t=e.getSelection(),n=t.getStartOffset(),i=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(i).getText().slice(n),s=r.getForward(o);return a(e,s.length||1)},"forward");return t===e.getCurrentContent()?e:i.push(e,t,"remove-range")}},function(e,t,n){"use strict";var r=n(15),i=n(7);e.exports=function(e){var t=r.splitBlock(e.getCurrentContent(),e.getSelection());return i.push(e,t,"split-block")}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e){var t=e.getSelection(),n=t.getEndKey(),i=e.getCurrentContent().getBlockForKey(n).getLength();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:i,focusKey:n,focusOffset:i,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e){var t=e.getSelection(),n=t.getStartKey();return r.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}},function(e,t,n){"use strict";var r=n(7),i=n(39),a=n(102),o=n(62);e.exports=function(e){var t=o(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[o-1];return a(e,s?i.getUTF16Length(s,0):1)},"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}},function(e,t,n){"use strict";var r=n(7),i=n(39),a=n(160),o=n(62);e.exports=function(e){var t=o(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[o];return a(e,s?i.getUTF16Length(s,0):1)},"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return r.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}},function(e,t,n){"use strict";var r=n(15),i=n(7),a=n(73);e.exports=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var o,s,l=t.getAnchorKey(),c=e.getCurrentContent(),u=c.getBlockForKey(l).getLength();if(u<=1)return e;n===u?(o=t.set("anchorOffset",n-1),s=t):s=(o=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var d=a(c,o),p=r.removeRange(c,o,"backward"),f=p.getSelectionAfter(),h=f.getAnchorOffset()-1,m=f.merge({anchorOffset:h,focusOffset:h}),_=r.replaceWithFragment(p,m,d),g=i.push(e,_,"insert-fragment");return i.acceptSelection(g,s)}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t,n){var i=r.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(r.set(t,{nativelyRenderedContent:null})),setTimeout(function(){n(i)},0)):n(i);else{var a=i.getCurrentContent();n(r.set(i,{nativelyRenderedContent:a}))}}},function(e,t,n){"use strict";var r=n(59),i=n(17),a=n(151),o=n(15),s=n(320),l=n(7),c=n(163),u=n(96),d=n(153),p=n(61),f=n(323);function h(e,t,n){var r=o.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return l.push(e,r.set("entityMap",n),"insert-fragment")}e.exports=function(e,t){t.preventDefault();var n=new a(t.clipboardData);if(!n.isRichText()){var m=n.getFiles(),_=n.getText();if(m.length>0){if(e.props.handlePastedFiles&&p(e.props.handlePastedFiles(m)))return;return void d(m,function(t){if(t=t||_){var n=e._latestEditorState,a=f(t),d=i.create({style:n.getCurrentInlineStyle(),entity:u(n.getCurrentContent(),n.getSelection())}),p=c.getCurrentBlockType(n),h=s.processText(a,d,p),m=r.createFromArray(h),g=o.replaceWithFragment(n.getCurrentContent(),n.getSelection(),m);e.update(l.push(n,g,"insert-fragment"))}})}}var g=[],v=n.getText(),y=n.getHTML(),A=e._latestEditorState;if(!e.props.handlePastedText||!p(e.props.handlePastedText(v,y,A))){if(v&&(g=f(v)),!e.props.stripPastedStyles){var x=e.getClipboard();if(n.isRichText()&&x){if(-1!==y.indexOf(e.getEditorKey())||1===g.length&&1===x.size&&x.first().getText()===v)return void e.update(h(e._latestEditorState,x))}else if(x&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every(function(t,n){return t.getText()===e[n]})}(g,x))return void e.update(h(e._latestEditorState,x));if(y){var S=s.processHTML(y,e.props.blockRenderMap);if(S){var b=S.contentBlocks,w=S.entityMap;if(b){var E=r.createFromArray(b);return void e.update(h(e._latestEditorState,E,w))}}}e.setClipboard(null)}if(g.length){var P=i.create({style:A.getCurrentInlineStyle(),entity:u(A.getCurrentContent(),A.getSelection())}),C=c.getCurrentBlockType(A),T=s.processText(g,P,C),V=r.createFromArray(T);e.update(h(e._latestEditorState,V))}}}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(n(17),n(38)),a=n(20),o=n(33),s=n(5),l=n(161),c=n(31),u=n(162),d=n(92),p=s.List,f=s.Repeat,h=o.draft_tree_data_support,m=h?a:i,_={processHTML:function(e,t){return l(e,u,t)},processText:function(e,t,n){return e.reduce(function(e,i,a){i=d(i);var o=c(),s={key:o,type:n,text:i,characterList:p(f(t,i.length))};if(h&&0!==a){var l=a-1,u=e[l]=e[l].merge({nextSibling:o});s=r({},s,{prevSibling:u.getKey()})}return e.push(new m(s)),e},[])}};e.exports=_},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i=t.getStartKey(),a=t.getEndKey(),o=e.getBlockMap(),s=o.toSeq().skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===a}).concat([[a,o.get(a)]]).map(function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)});return o=o.merge(s),e.merge({blockMap:o,selectionBefore:t,selectionAfter:t})}},function(e,t,n){"use strict";var r=/\r\n?|\n/g;e.exports=function(e){return e.split(r)}},function(e,t,n){"use strict";var r=n(7),i=n(30),a=n(325),o=n(6);e.exports=function(e){if(!e._blockSelectEvents&&e._latestEditorState===e.props.editorState){var t=e.props.editorState,n=i.findDOMNode(e.editorContainer);n||o(!1),n.firstChild instanceof HTMLElement||o(!1);var s=a(t,n.firstChild),l=s.selectionState;l!==t.getSelection()&&(t=s.needsRecovery?r.forceSelection(t,l):r.acceptSelection(t,l),e.update(t))}}},function(e,t,n){"use strict";(function(t){var r=n(158);e.exports=function(e,n){var i=t.getSelection();return 0===i.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:r(e,n,i.anchorNode,i.anchorOffset,i.focusNode,i.focusOffset)}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(4),i=n(46),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=i({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return r.createElement("div",{className:t},r.createElement("div",{className:i("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},t}(r.Component);e.exports=a},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(38),a=n(20),o=n(165),s=n(328),l=n(329),c=n(6),u=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:l(e),entityRanges:s(e,t),data:e.getData().toObject()}},d=function(e,t){var n=t.entityMap,s=[],l={},d={},p=0;return e.getBlockMap().forEach(function(e){e.findEntityRanges(function(e){return null!==e.getEntity()},function(t){var r=e.getEntityAt(t),i=o.stringify(r);d[i]||(d[i]=r,n[i]=""+p,p++)}),function(e,t,n,o){if(e instanceof i)n.push(u(e,t));else{e instanceof a||c(!1);var s=e.getParentKey(),l=o[e.getKey()]=r({},u(e,t),{children:[]});s?o[s].children.push(l):n.push(l)}}(e,n,s,l)}),{blocks:s,entityMap:n}};e.exports=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.blocks,r=t.entityMap,i={};return Object.keys(r).forEach(function(t,n){var r=e.getEntity(o.unstringify(t));i[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}}),{blocks:n,entityMap:i}}(e,t=d(e,t))}},function(e,t,n){"use strict";var r=n(165),i=n(39).strlen;e.exports=function(e,t){var n=[];return e.findEntityRanges(function(e){return!!e.getEntity()},function(a,o){var s=e.getText(),l=e.getEntityAt(a);n.push({offset:i(s.slice(0,a)),length:i(s.slice(a,o)),key:Number(t[r.stringify(l)])})}),n}},function(e,t,n){"use strict";var r=n(39),i=n(60),a=function(e,t){return e===t},o=function(e){return!!e},s=[];e.exports=function(e){var t=e.getCharacterList().map(function(e){return e.getStyle()}).toList(),n=t.flatten().toSet().map(function(n){return function(e,t,n){var s=[],l=t.map(function(e){return e.has(n)}).toList();return i(l,a,o,function(t,i){var a=e.getText();s.push({offset:r.strlen(a.slice(0,t)),length:r.strlen(a.slice(t,i)),style:n})}),s}(e,t,n)});return Array.prototype.concat.apply(s,n.toJS())}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(38),a=n(20),o=n(91),s=n(74),l=n(33),c=n(331),u=n(5),d=n(45),p=n(332),f=n(333),h=n(334),m=n(31),_=n(6),g=l.draft_tree_data_support,v=u.List,y=u.Map,A=u.OrderedMap,x=function(e,t){var n=e.key,r=e.type,i=e.data;return{text:e.text,depth:e.depth||0,type:r||"unstyled",key:n||m(),data:y(i),characterList:S(e,t)}},S=function(e,t){var n=e.text,i=e.entityRanges,a=e.inlineStyleRanges,o=i||[];return p(h(n,a||[]),f(n,o.filter(function(e){return t.hasOwnProperty(e.key)}).map(function(e){return r({},e,{key:t[e.key]})})))},b=function(e){return r({},e,{key:e.key||m()})},w=function(e,t,n){var i=t.map(function(e){return r({},e,{parentRef:n})});return e.concat(i.reverse())},E=function(e,t){var n=Array.isArray(e.blocks[0].children),o=g&&!n?c.fromRawStateToRawTreeState(e).blocks:e.blocks;return g?function(e,t){return e.map(b).reduce(function(n,i,o){Array.isArray(i.children)||_(!1);var s=i.children.map(b),l=new a(r({},x(i,t),{prevSibling:0===o?null:e[o-1].key,nextSibling:o===e.length-1?null:e[o+1].key,children:v(s.map(function(e){return e.key}))}));n=n.set(l.getKey(),l);for(var c=w([],s,l);c.length>0;){var u=c.pop(),d=u.parentRef,p=d.getChildKeys(),f=p.indexOf(u.key),h=Array.isArray(u.children);if(!h){h||_(!1);break}var m=u.children.map(b),g=new a(r({},x(u,t),{parent:d.getKey(),children:v(m.map(function(e){return e.key})),prevSibling:0===f?null:p.get(f-1),nextSibling:f===p.size-1?null:p.get(f+1)}));n=n.set(g.getKey(),g),c=w(c,m,g)}return n},A())}(o,t):function(e,t){return A(e.map(function(e){var n=new i(x(e,t));return[n.getKey(),n]}))}(n?c.fromRawTreeStateToRawState(e).blocks:o,t)};e.exports=function(e){Array.isArray(e.blocks)||_(!1);var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach(function(e){var r=t[e],i=r.type,a=r.mutability,o=r.data;n[e]=s.__create(i,a,o||{})}),n}(e),n=E(e,t),r=n.isEmpty()?new d:d.createEmpty(n.first().getKey());return new o({blockMap:n,entityMap:t,selectionBefore:r,selectionAfter:r})}},function(e,t,n){"use strict";var r=n(14)||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(6),a=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},o={fromRawTreeStateToRawState:function(e){var t=e.blocks,n=[];return Array.isArray(t)||i(!1),Array.isArray(t)&&t.length?(function(e,t){for(var n=[].concat(e).reverse();n.length;){var r=n.pop();t(r);var a=r.children;Array.isArray(a)||i(!1),n=n.concat([].concat(a.reverse()))}}(t,function(e){var t=r({},e);a(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map(function(t){return t.type===e.type?r({},t,{depth:(e.depth||0)+1}):t}))}(e)),delete t.children,n.push(t)}),e.blocks=n,r({},e,{blocks:n})):e},fromRawStateToRawTreeState:function(e){var t={},n=[];return e.blocks.forEach(function(e){var o=a(e),s=e.depth||0,l=r({},e,{children:[]});if(!o)return t={},void n.push(l);if(t[s]=l,s>0){var c=t[s-1];return c||i(!1),void c.children.push(l)}n.push(l)}),r({},e,{blocks:n})}};e.exports=o},function(e,t,n){"use strict";var r=n(17),i=n(5).List;e.exports=function(e,t){var n=e.map(function(e,n){var i=t[n];return r.create({style:e,entity:i})});return i(n)}},function(e,t,n){"use strict";var r=n(39).substr;e.exports=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach(function(t){for(var i=r(e,0,t.offset).length,a=i+r(e,t.offset,t.length).length,o=i;o<a;o++)n[o]=t.key}),n}},function(e,t,n){"use strict";var r=n(5).OrderedSet,i=n(39).substr,a=r();e.exports=function(e,t){var n=Array(e.length).fill(a);return t&&t.forEach(function(t){for(var r=i(e,0,t.offset).length,a=r+i(e,t.offset,t.length).length;r<a;)n[r]=n[r].add(t.style),r++}),n}},function(e,t,n){"use strict";var r=n(336);e.exports=function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),i=r(n),a=i.top,o=i.right,s=i.bottom,l=i.left;return 0===a&&0===o&&0===s&&0===l?null:i}},function(e,t,n){"use strict";var r=n(157);e.exports=function(e){var t=r(e),n=0,i=0,a=0,o=0;if(t.length){if(t.length>1&&0===t[0].width){var s=t[1];n=s.top,i=s.right,a=s.bottom,o=s.left}else{var l=t[0];n=l.top,i=l.right,a=l.bottom,o=l.left}for(var c=1;c<t.length;c++){var u=t[c];0!==u.height&&0!==u.width&&(n=Math.min(n,u.top),i=Math.max(i,u.right),a=Math.max(a,u.bottom),o=Math.min(o,u.left))}}return{top:n,right:i,bottom:a,left:o,width:i-o,height:a-n}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4);t.About=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={updateCheckInProgress:!1,foundUpdate:null},t.onCheckForUpdatesClick=function(){t.state.updateCheckInProgress||window.require("electron").ipcRenderer.send("update-check-start")},t.onStartUpdateClick=function(){window.require("electron").ipcRenderer.send("update-check-doupdate")},t._onUpdateCheckStarted=function(){t.setState({updateCheckInProgress:!0,foundUpdate:null})},t._onUpdateCheckNoUpdate=function(){t.setState({updateCheckInProgress:!1,foundUpdate:!1})},t._onUpdateCheckHasUpdate=function(){t.setState({updateCheckInProgress:!1,foundUpdate:!0})},t}return i(t,e),t.prototype.render=function(){var e,t="v0.5.6 (+14 <a target='_blank' href='https://github.com/PartyPlanner64/PartyPlanner64/commit/cd0060a'>cd0060a</a>)";t==="####VERS ION####".replace(" ","")&&(t="unknown"),e=document.location.href.indexOf("mariopartylegacy")>=0?"Hosted by":"Visit";var n=null;return isElectron&&(n=!0===this.state.foundUpdate?a.createElement("a",{className:"aboutVersion",onClick:this.onStartUpdateClick,href:"javascript:;"}," ","Update found! Click to install."):a.createElement("a",{className:"aboutVersion",onClick:this.onCheckForUpdatesClick,href:"javascript:;"}," ",this.state.updateCheckInProgress?"Checking...":"Check for Updates")),a.createElement("div",{id:"aboutForm"},a.createElement("div",{className:"aboutHeader"},a.createElement("img",{src:"img/logoloading.png",alt:"PartyPlanner64"}),a.createElement("br",null),a.createElement("span",{className:"aboutVersion selectable"},"Version ",a.createElement("span",{dangerouslySetInnerHTML:{__html:t}})),isElectron&&a.createElement("br",null),n),a.createElement("br",null),a.createElement("div",{className:"aboutText"},a.createElement("span",{className:"aboutTextLabel"},"Want more PartyPlanner64?"),a.createElement("ul",null,a.createElement("li",null,"Follow ",a.createElement("a",{href:"https://twitter.com/PartyPlanner64",target:"_blank"},"@PartyPlanner64")," on Twitter."),a.createElement("li",null,a.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64",target:"_blank"},"Contribute")," to development on Github."),a.createElement("li",null,"Write or view ",a.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/issues",target:"_blank"},"bugs and enhancement requests"),"."),a.createElement("li",null,"Read the ",a.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Creating-a-Board"},"usage tutorial")," or ",a.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki"},"documentation"),"."))),a.createElement("br",null),a.createElement("br",null),a.createElement("div",{className:"aboutHeader"},a.createElement("span",null,e),a.createElement("br",null),a.createElement("a",{href:"http://mariopartylegacy.com/",target:"_blank"},a.createElement("img",{src:"img/mpllogo.png",alt:"Mario Party Legacy"}))),a.createElement("div",{className:"aboutText"},a.createElement("ul",null,a.createElement("li",null,"Check out discussion in the ",a.createElement("a",{href:"https://discord.gg/BQMuUpM",target:"_blank"},"discord chat"),"."),a.createElement("li",null,"Post your creations to the ",a.createElement("a",{href:"http://www.mariopartylegacy.com/forum/index.php?action=downloads",target:"_blank"},"downloads page"),"."))),a.createElement("br",null),a.createElement("br",null),a.createElement("div",{className:"aboutBtcBanner",title:"Donate via Bitcoin"},a.createElement("a",{href:"bitcoin:1N6xiKibCqoRAWmrYt3DZ7u8KLTPXxAA4E",target:"_blank"},a.createElement("img",{className:"aboutBtcImg",src:"img/about/btc.png",height:"32",width:"32"})),a.createElement("br",null),a.createElement("span",{className:"aboutBtcText selectable"},"1N6xiKibCqoRAWmrYt3DZ7u8KLTPXxAA4E")),a.createElement("br",null),a.createElement("br",null),a.createElement("span",{className:"aboutDisclaimer"},"PartyPlanner64 is not affiliated with Nintendo or Hudson."),a.createElement("br",null),a.createElement("span",{className:"aboutDisclaimer"},"Mario Party is a registered trademark of Nintendo."))},t.prototype.componentDidMount=function(){if(isElectron){var e=window.require("electron").ipcRenderer;e.on("update-check-checking",this._onUpdateCheckStarted),e.on("update-check-noupdate",this._onUpdateCheckNoUpdate),e.on("update-check-hasupdate",this._onUpdateCheckHasUpdate)}},t.prototype.componentWillUnmount=function(){if(isElectron){var e=window.require("electron").ipcRenderer;e.removeListener("update-check-checking",this._onUpdateCheckStarted),e.removeListener("update-check-noupdate",this._onUpdateCheckNoUpdate),e.removeListener("update-check-hasupdate",this._onUpdateCheckHasUpdate)}},t}(a.Component)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(57),o=n(339),s=n(19),l=n(3),c=n(340),u=n(18),d=n(47),p=n(4),f=n(103),h=n(56),m=n(341),_=n(37),g=n(166);n(379);var v=function(e){function t(t){var n=e.call(this,t)||this;n.modelToolbar=null,n.onModelSelected=function(e){var t=e.match(/^(\d+)\/(\d+)/);if(!t)throw"Could not parse selected model string "+n.state.selectedModel;var r=t[1],i=t[2];n.setState({selectedModel:e,selectedModelDir:r,selectedModelFile:i,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null})},n.onAnimSelected=function(e){if(e){var t=e.match(/^(\d+)\/(\d+)/);if(!t)throw"Error parsing anim string "+e;var r=t[1],i=t[2];n.setState({selectedAnim:e,selectedAnimDir:r,selectedAnimFile:i})}else n.setState({selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null})},n.onBgColorChange=function(e){n.setState({bgColor:e})},n.onFeatureChange=function(e){n.setState(e)},n.onKeyDown=function(e){if(e.key&&n.modelToolbar){var t=e.key.toLowerCase();"m"===t?n.modelToolbar.focusModelSelect():"a"===t&&n.modelToolbar.focusAnimSelect()}},n.state={selectedModel:"",selectedModelDir:null,selectedModelFile:null,selectedAnim:"",selectedAnimDir:null,selectedAnimFile:null,bgColor:0,showTextures:!0,showWireframe:!1,showVertexNormals:!1,useCamera:!1};for(var r=u.mainfs.getDirectoryCount(),i=2;i<r;i++)for(var o=u.mainfs.getFileCount(i),s=0;s<o;s++){var l=u.mainfs.get(i,s);if(a.FORM.isForm(l)){var c=i+"/"+s;return n.state.selectedModel=c,n.state.selectedModelDir=i,n.state.selectedModelFile=s,n}}return n}return i(t,e),t.prototype.render=function(){var e=this;return p.createElement("div",{className:"modelViewerContainer",tabIndex:-1,onKeyDownCapture:this.onKeyDown},p.createElement(T,{ref:function(t){e.modelToolbar=t},selectedModel:this.state.selectedModel,onModelSelected:this.onModelSelected,selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnim:this.state.selectedAnim,onAnimSelected:this.onAnimSelected,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,onBgColorChange:this.onBgColorChange,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera,onFeatureChange:this.onFeatureChange}),p.createElement(C,{selectedModelDir:this.state.selectedModelDir,selectedModelFile:this.state.selectedModelFile,selectedAnimDir:this.state.selectedAnimDir,selectedAnimFile:this.state.selectedAnimFile,bgColor:this.state.bgColor,showTextures:this.state.showTextures,showWireframe:this.state.showWireframe,showVertexNormals:this.state.showVertexNormals,useCamera:this.state.useCamera}))},t}(p.Component);t.ModelViewer=v;var y=null,A=null,x=null,S=null,b=null,w=null,E=null,P=null,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.__container=null,t.state={hasError:!1},t.onWindowResize=function(){if(b&&x){var e=t.__container,n=e.offsetHeight,r=e.offsetWidth;x.aspect=r/n,x.updateProjectionMatrix(),b.setSize(r,n)}},t}return i(t,e),t.prototype.render=function(){var e=this;return this.state.hasError?p.createElement("p",null,"An error occurred during rendering, see the browser console."):p.createElement("div",{className:"modelRenderContainer",style:{backgroundColor:"#"+_.pad(l.$$hex(this.props.bgColor,""),6,"0")},ref:function(t){return e.__container=t}})},t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0}),console.error(e,t)},t.prototype.componentDidMount=function(){try{window.addEventListener("resize",this.onWindowResize),y=this,this.initModel()}catch(e){console.error(e)}},t.prototype.componentWillUnmount=function(){try{window.removeEventListener("resize",this.onWindowResize),y=null,this.clearViewer()}catch(e){console.error(e)}},t.prototype.componentDidUpdate=function(){try{this.clearViewer(),this.initModel()}catch(e){console.error(e)}},t.prototype.clearViewer=function(){this.disposeTHREERenderer(),this.disposeTHREEObj(S),S=null,P&&(P.stopAllAction(),P=null),E&&(E.stop(),E=null),null!==A&&(clearTimeout(A),A=null)},t.prototype.disposeTHREERenderer=function(){if(b){b.dispose(),b.forceContextLoss();var e=this.__container;e&&(e.innerHTML=""),b.context=void 0,b.domElement=void 0,b=null}},t.prototype.disposeTHREEObj=function(e){if(e){for(var t=0;t<e.children.length;t++)this.disposeTHREEObj(e.children[t]);if(e.geometry&&(e.geometry.dispose(),e.geometry=void 0),e.material){var n=void 0;e.material instanceof h.MultiMaterial?n=e.material.materials:e.material instanceof Array&&(n=e.material),n?n.forEach(function(e){e.map&&e.map.dispose(),e.lightMap&&e.lightMap.dispose(),e.bumpMap&&e.bumpMap.dispose(),e.normalMap&&e.normalMap.dispose(),e.specularMap&&e.specularMap.dispose(),e.envMap&&e.envMap.dispose(),e.dispose()}):(e.material.map&&e.material.map.dispose(),e.material.lightMap&&e.material.lightMap.dispose(),e.material.bumpMap&&e.material.bumpMap.dispose(),e.material.normalMap&&e.material.normalMap.dispose(),e.material.specularMap&&e.material.specularMap.dispose(),e.material.envMap&&e.material.envMap.dispose(),e.material.dispose())}}},t.prototype.initModel=function(){var e=this;if(null!==this.props.selectedModelDir){var t=[this.props.selectedModelDir,this.props.selectedModelFile],n=t[0],r=t[1],i=this.__container,o=i.offsetHeight,s=i.offsetWidth;l.$$log("Rendering model "+n+"/"+r);var d=a.FORM.unpack(u.mainfs.get(n,r));l.$$log("form",d);var p=new c.FormToThreeJs;p.bgColor=this.props.bgColor,p.showTextures=this.props.showTextures,p.showWireframe=this.props.showWireframe,p.showVertexNormals=this.props.showVertexNormals,p.useFormCamera=this.props.useCamera,p.createModel(d).then(function(t){if((S=new h.Scene).background=new h.Color(e.props.bgColor),S.add(t),e.props.showVertexNormals){var n=new h.VertexNormalsHelper(t,8,65280,1);S.add(n)}if(l.$$log("Scene",S),null!==e.props.selectedAnimDir){var r=[e.props.selectedAnimDir,e.props.selectedAnimFile],a=r[0],c=r[1],_=f.MTNX.unpack(u.mainfs.get(a,c));l.$$log("mtnx",_);var g=new m.MtnxToThreeJs;g.form=d;var v=g.createClip(_);l.$$log("mtnxClip",v),(P=new h.AnimationMixer(S)).clipAction(v).play(),E=new h.Clock}(b=new h.WebGLRenderer({antialias:!0})).setSize(s,o),i.appendChild(b.domElement),x=p.createCamera(d,s,o),w=new h.OrbitControls(x,b.domElement),e.animate()})}},t.prototype.renderModel=function(){b.render(S,x)},t.prototype.animate=function(){if(y&&b){if(w.update(),E){var e=E.getDelta();P&&P.update(e)}y.renderModel(),s.get(s.$setting.limitModelFPS)?A=setTimeout(function(){y&&requestAnimationFrame(y.animate)},1e3/30):requestAnimationFrame(y.animate)}},t}(p.Component),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animSelect=null,t.modelSelect=null,t.state={},t.focusModelSelect=function(){t.modelSelect&&t.modelSelect.focus()},t.focusAnimSelect=function(){t.animSelect&&t.animSelect.focus()},t}return i(t,e),t.prototype.render=function(){var e=this;return p.createElement("div",{className:"modelViewerToolbar"},p.createElement(V,{ref:function(t){e.modelSelect=t},selectedModel:this.props.selectedModel,onModelSelected:this.props.onModelSelected}),p.createElement(F,{ref:function(t){e.animSelect=t},selectedAnim:this.props.selectedAnim,selectedModelDir:this.props.selectedModelDir,onAnimSelected:this.props.onAnimSelected}),p.createElement(D,{selectedColor:this.props.bgColor,onColorChange:this.props.onBgColorChange}),p.createElement(O,{showTextures:this.props.showTextures,showWireframe:this.props.showWireframe,showVertexNormals:this.props.showVertexNormals,useCamera:this.props.useCamera,onFeatureChange:this.props.onFeatureChange}),p.createElement("div",{className:"modelViewerToolbarSpacer"}),p.createElement(R,{selectedModelDir:this.props.selectedModelDir,selectedModelFile:this.props.selectedModelFile}))},t}(p.Component),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectEl=null,t.state={},t.focus=function(){t.selectEl&&t.selectEl.focus()},t.modelSelected=function(e){t.props.onModelSelected&&t.props.onModelSelected(e.target.value)},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.getModelEntries().map(function(e){return p.createElement("option",{value:e,key:e},e)});return p.createElement("div",{className:"modelSelectContainer"},"Model:",p.createElement("select",{ref:function(t){e.selectEl=t},value:this.props.selectedModel,onChange:this.modelSelected},t))},t.prototype.getModelEntries=function(){for(var e=[],t=u.mainfs.getDirectoryCount(),n=0;n<t;n++)for(var r=u.mainfs.getFileCount(n),i=0;i<r;i++){var o=u.mainfs.get(n,i);if(a.FORM.isForm(o)){var s=n+"/"+i;try{e.push(s)}catch(e){console.error("Could not parse FORM "+n+"/"+i,e)}}}return e},t}(p.Component),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectEl=null,t.state={},t.focus=function(){t.selectEl&&t.selectEl.focus()},t.animSelected=function(e){t.props.onAnimSelected&&t.props.onAnimSelected(e.target.value)},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.getAnimEntries().map(function(e){return p.createElement("option",{value:e,key:e},e)});return t.unshift(p.createElement("option",{value:"",key:""})),p.createElement("div",{className:"modelSelectContainer"},"Animation:",p.createElement("select",{ref:function(t){e.selectEl=t},value:this.props.selectedAnim,onChange:this.animSelected},t))},t.prototype.getAnimEntries=function(){var e=[];if(null===this.props.selectedModelDir)return e;if(s.get(s.$setting.limitModelAnimations))return this.getAnimationsInDir(this.props.selectedModelDir);for(var t=u.mainfs.getDirectoryCount(),n=0;n<t;n++)e=e.concat(this.getAnimationsInDir(n));return e},t.prototype.getAnimationsInDir=function(e){for(var t=[],n=u.mainfs.getFileCount(e),r=0;r<n;r++){var i=u.mainfs.get(e,r);if(f.MTNX.isMtnx(i)){var a=e+"/"+r;try{t.push(a)}catch(t){console.error("Could not parse MTNX "+e+"/"+r,t)}}}return t},t}(p.Component),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onColorChange=function(e,n){t.setState({color:e}),t.props.onColorChange(e)},t}return i(t,e),t.prototype.render=function(){var e;return $$debug&&(e=p.createElement(d.ToggleButton,{id:13035519,key:2,allowDeselect:!1,onToggled:this.onColorChange,pressed:13035519===this.props.selectedColor},p.createElement("span",{className:"colorSwatch",title:"Change background to MP3 motion test (0xC6E7FF)",style:{backgroundColor:"#C6E7FF"}}))),p.createElement("div",{className:"modelViewerColorPicker"},p.createElement(d.ToggleButton,{id:0,key:0,allowDeselect:!1,onToggled:this.onColorChange,pressed:0===this.props.selectedColor},p.createElement("span",{className:"colorSwatch",title:"Change background to black",style:{backgroundColor:"#000000"}})),p.createElement(d.ToggleButton,{id:16777215,key:1,allowDeselect:!1,onToggled:this.onColorChange,pressed:16777215===this.props.selectedColor},p.createElement("span",{className:"colorSwatch",title:"Change background to white",style:{backgroundColor:"#FFFFFF"}})),e)},t}(p.Component),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onShowTextureChange=function(e){var n=e.target.checked;n||t.props.showWireframe?t.props.onFeatureChange({showTextures:n}):t.props.onFeatureChange({showTextures:n,showWireframe:!0})},t.onShowWireframeChange=function(e){var n=e.target.checked;n||t.props.showTextures?t.props.onFeatureChange({showWireframe:n}):t.props.onFeatureChange({showTextures:!0,showWireframe:n})},t.onShowNormalsChange=function(e){var n=e.target.checked;t.props.onFeatureChange({showVertexNormals:n})},t.onUseCameraChange=function(e){var n=e.target.checked;t.props.onFeatureChange({useCamera:n})},t}return i(t,e),t.prototype.render=function(){var e;return s.get(s.$setting.uiAdvanced)&&(e=[p.createElement("label",{key:"modelFeatureSelectShowVertexNormals"},p.createElement("input",{type:"checkbox",checked:this.props.showVertexNormals,onChange:this.onShowNormalsChange}),"Vertex Normals")]),p.createElement("div",{className:"modelFeatureSelectContainer"},p.createElement("label",{key:"modelFeatureSelectShowTextures"},p.createElement("input",{type:"checkbox",checked:this.props.showTextures,onChange:this.onShowTextureChange}),"Textures"),p.createElement("label",{key:"modelFeatureSelectShowWireframe"},p.createElement("input",{type:"checkbox",checked:this.props.showWireframe,onChange:this.onShowWireframeChange}),"Wireframe"),p.createElement("label",{key:"modelFeatureSelectUseCamera",title:"Use the camera defined by the model"},p.createElement("input",{type:"checkbox",checked:this.props.useCamera,onChange:this.onUseCameraChange}),"Camera"),e)},t}(p.Component),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.export=function(){var e=[t.props.selectedModelDir,t.props.selectedModelFile],n=e[0],r=e[1],i=a.FORM.unpack(u.mainfs.get(n,r));(new c.FormToThreeJs).createModel(i).then(function(e){l.$$log("Exporting Three model object",e);var t=o.glTFAssetFromTHREE(e);l.$$log("Converted glTF asset",t),s.get(s.$setting.modelUseGLB)?o.exportGLB(t).then(function(e){saveAs(new Blob([e]),"model-"+n+"-"+r+".glb")}):o.exportGLTFZip(t,g).then(function(e){saveAs(e,"model-"+n+"-"+r+".zip")})})},t}return i(t,e),t.prototype.render=function(){return p.createElement(d.Button,{onClick:this.export,css:"btnModelExport"},p.createElement("img",{src:"img/model/export.png",height:"16",width:"16"}),"glTF")},t}(p.Component)},function(module,exports,__webpack_require__){var factory;window,factory=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"./src/asset.ts":
/*!**********************!*\
  !*** ./src/asset.ts ***!
  \**********************/
/*! exports provided: GLTFAsset */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GLTFAsset", function() { return GLTFAsset; });\nvar GLTFAsset = /** @class */ (function () {\n    function GLTFAsset() {\n        this.copyright = "";\n        this.defaultScene = 0;\n        this.generator = "glTF-js-utils";\n        this._scenes = [];\n    }\n    GLTFAsset.prototype.setDefaultScene = function (scene) {\n        if (typeof scene === "number")\n            this.defaultScene = scene;\n        else {\n            var sceneIndex = this._scenes.indexOf(scene);\n            if (sceneIndex === -1)\n                throw new Error("Scene passed to setDefaultScene was not found.");\n            this.defaultScene = sceneIndex;\n        }\n    };\n    GLTFAsset.prototype.addScene = function (scene) {\n        if (this._scenes.indexOf(scene) >= 0)\n            throw new Error("Scene passed to addScene was added prior.");\n        this._scenes.push(scene);\n    };\n    GLTFAsset.prototype.removeScene = function (scene) {\n        var sceneIndex = this._scenes.indexOf(scene);\n        if (sceneIndex >= 0)\n            this._scenes.splice(sceneIndex, 1);\n    };\n    GLTFAsset.prototype.forEachScene = function (fn) {\n        this._scenes.forEach(fn);\n    };\n    return GLTFAsset;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/asset.ts?')},"./src/buffer.ts":
/*!***********************!*\
  !*** ./src/buffer.ts ***!
  \***********************/
/*! exports provided: Buffer, BufferView */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Buffer", function() { return Buffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BufferView", function() { return BufferView; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\nvar Buffer = /** @class */ (function () {\n    function Buffer(gltf) {\n        this._bufferViews = [];\n        this._finalized = false;\n        this._gltf = gltf;\n        if (!gltf.buffers)\n            gltf.buffers = [];\n        this._index = gltf.buffers.length;\n        var gltfBuffer = {\n            byteLength: -1,\n        };\n        gltf.buffers.push(gltfBuffer);\n        this._gltfBuffer = gltfBuffer;\n    }\n    Buffer.prototype.getIndex = function () {\n        return this._index;\n    };\n    Buffer.prototype.addBufferView = function (componentType, dataType) {\n        if (this._finalizePromise)\n            throw new Error("Cannot add buffer view after finalizing buffer");\n        var view = new BufferView(this, this._gltf, componentType, dataType);\n        this._bufferViews.push(view);\n        return view;\n    };\n    Buffer.prototype.getByteOffset = function (bufferView) {\n        var byteOffset = 0;\n        for (var _i = 0, _a = this._bufferViews; _i < _a.length; _i++) {\n            var view = _a[_i];\n            if (view === bufferView) {\n                return byteOffset;\n            }\n            byteOffset += view.getSize();\n        }\n        throw "Given bufferView was not present in this buffer";\n    };\n    Buffer.prototype.getViewFinalizePromises = function (targetBufferView) {\n        var promises = [];\n        for (var _i = 0, _a = this._bufferViews; _i < _a.length; _i++) {\n            var view = _a[_i];\n            if (targetBufferView && view === targetBufferView) {\n                return promises;\n            }\n            promises.push(view.finalized);\n        }\n        return promises;\n    };\n    Buffer.prototype.getArrayBuffer = function () {\n        if (!this._finalized)\n            throw new Error("Cannot get ArrayBuffer from Buffer before it is finalized");\n        var byteLength = this._getTotalSize();\n        var buffer = new ArrayBuffer(byteLength);\n        var currentIndex = 0;\n        for (var _i = 0, _a = this._bufferViews; _i < _a.length; _i++) {\n            var bufferView = _a[_i];\n            bufferView.writeOutToBuffer(buffer, currentIndex);\n            currentIndex += bufferView.getSize();\n        }\n        return buffer;\n    };\n    Buffer.prototype.finalize = function () {\n        var _this = this;\n        if (this._finalizePromise)\n            throw new Error("Buffer " + this._index + " was already finalized");\n        this._finalizePromise = new Promise(function (resolve) {\n            resolve(Promise.all(_this.getViewFinalizePromises()));\n        }).then(function () {\n            _this._finalized = true;\n            var arrayBuffer = _this.getArrayBuffer();\n            _this._gltfBuffer.byteLength = arrayBuffer.byteLength;\n            _this._gltfBuffer.uri = arrayBuffer; // Still not totally finalized, see stringify\n        });\n        this._gltf.extras.promises.push(this._finalizePromise);\n        return this._finalizePromise;\n    };\n    Buffer.prototype._getTotalSize = function () {\n        var byteLength = 0;\n        for (var _i = 0, _a = this._bufferViews; _i < _a.length; _i++) {\n            var bufferView = _a[_i];\n            byteLength += bufferView.getSize();\n        }\n        return byteLength;\n    };\n    return Buffer;\n}());\n\nvar BufferView = /** @class */ (function () {\n    function BufferView(buffer, gltf, componentType, dataType) {\n        this._data = [];\n        this._finalized = false;\n        this._accessorIndex = -1;\n        this._accessorAttr = null;\n        this._accessorMin = null;\n        this._accessorMax = null;\n        this._buffer = buffer;\n        this._componentType = componentType;\n        this._dataType = dataType;\n        if (!gltf.bufferViews)\n            gltf.bufferViews = [];\n        this._index = gltf.bufferViews.length;\n        this._gltfBufferView = {\n            buffer: buffer.getIndex(),\n            byteLength: -1,\n        };\n        var elementSize = this._getElementSize();\n        if (elementSize >= 4) { // Not a very good check.\n            this._gltfBufferView.byteStride = elementSize;\n        }\n        gltf.bufferViews.push(this._gltfBufferView);\n    }\n    BufferView.prototype.getIndex = function () {\n        return this._index;\n    };\n    BufferView.prototype.push = function (item) {\n        var writeIndex = this._data.length;\n        this._data.push(item);\n        if (this._accessorIndex >= 0) {\n            var minmaxIndex = writeIndex % this._numComponentsForDataType();\n            var currentMin = this._accessorMin[minmaxIndex];\n            if (typeof currentMin !== "number")\n                this._accessorMin[minmaxIndex] = item;\n            else\n                this._accessorMin[minmaxIndex] = Math.min(currentMin, item);\n            var currentMax = this._accessorMax[minmaxIndex];\n            if (typeof currentMax !== "number")\n                this._accessorMax[minmaxIndex] = item;\n            else\n                this._accessorMax[minmaxIndex] = Math.max(currentMax, item);\n        }\n    };\n    BufferView.prototype.getDataSize = function () {\n        return this._data.length * this._sizeOfComponentType();\n    };\n    BufferView.prototype.getSize = function () {\n        // Technically there are some cases where the data could be more compact,\n        // but to be safe, we just always align each view to 4 bytes.\n        return makeDivisibleBy(this.getDataSize(), 4);\n    };\n    BufferView.prototype.getByteOffset = function () {\n        if (!this._finalized)\n            throw new Error("Cannot get BufferView offset until it is finalized");\n        return this._buffer.getByteOffset(this);\n    };\n    BufferView.prototype.writeOutToBuffer = function (buffer, startIndex) {\n        if (startIndex === void 0) { startIndex = this.getSize(); }\n        var dataView = new DataView(buffer, startIndex);\n        var sizeOfComponentType = this._sizeOfComponentType();\n        for (var i = 0; i < this._data.length; i++) {\n            var val = this._data[i];\n            this._writeValue(dataView, i * sizeOfComponentType, val);\n        }\n    };\n    BufferView.prototype.writeAsync = function (buffer, startIndex) {\n        var _this = this;\n        if (startIndex === void 0) { startIndex = this.getSize(); }\n        if (this._asyncWritePromise)\n            throw new Error("Can\'t write multiple buffer view values asynchronously");\n        this._asyncWritePromise = buffer.then(function (arrayBuffer) {\n            var uintArray = new Uint8Array(arrayBuffer);\n            for (var i = 0; i < uintArray.byteLength; i++) {\n                _this._data.push(uintArray[i]);\n            }\n            delete _this._asyncWritePromise;\n        });\n        return this._asyncWritePromise;\n    };\n    BufferView.prototype.startAccessor = function (attr) {\n        if (this._accessorIndex >= 0)\n            throw "Accessor was started without ending the previous one";\n        this._accessorIndex = this._data.length;\n        this._accessorAttr = attr;\n        this._accessorMin = new Array(this._numComponentsForDataType());\n        this._accessorMax = new Array(this._numComponentsForDataType());\n    };\n    BufferView.prototype.endAccessor = function () {\n        if (this._accessorIndex < 0)\n            throw "An accessor was not started, but was attempted to be ended";\n        var elementSize = this._getElementSize();\n        var numComponentsForDataType = this._numComponentsForDataType();\n        var numElements = (this._data.length - this._accessorIndex) / numComponentsForDataType;\n        if (numElements % 1)\n            throw "An accessor was ended with missing component values";\n        for (var i = 0; i < this._accessorMin.length; i++) {\n            if (typeof this._accessorMin[i] !== "number")\n                this._accessorMin[i] = 0;\n            if (typeof this._accessorMax[i] !== "number")\n                this._accessorMax[i] = 0;\n        }\n        var info = {\n            byteOffset: elementSize * (this._accessorIndex / numComponentsForDataType),\n            componentType: this._componentType,\n            count: numElements,\n            type: this._dataType,\n            min: this._accessorMin,\n            max: this._accessorMax,\n        };\n        switch (this._accessorAttr) {\n            case "TEXCOORD_0":\n            case "TEXCOORD_1":\n            case "COLOR_0":\n                switch (this._componentType) {\n                    case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_BYTE:\n                    case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_SHORT:\n                        info.normalized = true;\n                        break;\n                }\n                break;\n        }\n        this._accessorIndex = -1;\n        this._accessorAttr = null;\n        this._accessorMin = null;\n        this._accessorMax = null;\n        return info;\n    };\n    Object.defineProperty(BufferView.prototype, "finalized", {\n        get: function () {\n            var _this = this;\n            if (!this._finalizedPromise) {\n                if (this._finalized) {\n                    return this._finalizedPromise = Promise.resolve();\n                }\n                else {\n                    return this._finalizedPromise = new Promise(function (resolve) {\n                        _this._finalizedPromiseResolve = resolve;\n                    });\n                }\n            }\n            return this._finalizedPromise;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferView.prototype.finalize = function () {\n        var _this = this;\n        var gltfBufferView = this._gltfBufferView;\n        return new Promise(function (resolve) {\n            var prereqs = _this._buffer.getViewFinalizePromises(_this);\n            if (_this._asyncWritePromise)\n                prereqs.push(_this._asyncWritePromise);\n            resolve(Promise.all(prereqs));\n        }).then(function () {\n            _this._finalized = true;\n            gltfBufferView.byteOffset = _this.getByteOffset();\n            gltfBufferView.byteLength = _this.getDataSize();\n            if (_this._finalizedPromiseResolve)\n                _this._finalizedPromiseResolve();\n        });\n    };\n    BufferView.prototype._getElementSize = function () {\n        return this._sizeOfComponentType() * this._numComponentsForDataType();\n    };\n    BufferView.prototype._sizeOfComponentType = function () {\n        switch (this._componentType) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].BYTE:\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_BYTE:\n                return 1;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].SHORT:\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_SHORT:\n                return 2;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_INT:\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].FLOAT:\n                return 4;\n        }\n        throw "Unrecognized component type " + this._componentType;\n    };\n    BufferView.prototype._numComponentsForDataType = function () {\n        switch (this._dataType) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].SCALAR:\n                return 1;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC2:\n                return 2;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC3:\n                return 3;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC4:\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].MAT2:\n                return 4;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].MAT3:\n                return 9;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].MAT4:\n                return 16;\n        }\n        throw "Unsupported data type";\n    };\n    BufferView.prototype._writeValue = function (dataView, index, val) {\n        switch (this._componentType) {\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].BYTE:\n                dataView.setInt8(index, val);\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_BYTE:\n                dataView.setUint8(index, val);\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].SHORT:\n                dataView.setInt16(index, val, true);\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_SHORT:\n                dataView.setUint16(index, val, true);\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_INT:\n                dataView.setUint32(index, val, true);\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].FLOAT:\n                dataView.setFloat32(index, val, true);\n                break;\n            default:\n                throw "Unsupported data type";\n        }\n    };\n    return BufferView;\n}());\n\nfunction makeDivisibleBy(num, by) {\n    return by * Math.ceil(num / by);\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/buffer.ts?')},"./src/glb.ts":
/*!********************!*\
  !*** ./src/glb.ts ***!
  \********************/
/*! exports provided: createGLBBuffer */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGLBBuffer", function() { return createGLBBuffer; });\nvar GLB_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_MAGIC = 0x46546C67;\nvar GLTF_VERSION = 2;\nvar GLBChunkType;\n(function (GLBChunkType) {\n    GLBChunkType[GLBChunkType["JSON"] = 1313821514] = "JSON";\n    GLBChunkType[GLBChunkType["BIN"] = 5130562] = "BIN";\n})(GLBChunkType || (GLBChunkType = {}));\nfunction createGLBBuffer(json, bin) {\n    if (!json)\n        throw new Error("GLB requires a JSON glTF chunk");\n    var glbLength = GLB_HEADER_SIZE;\n    glbLength += GLB_CHUNK_HEADER_SIZE;\n    var encodedJSON = textToArrayBuffer(json);\n    var jsonChunkSize = makeDivisibleBy(encodedJSON.byteLength, 4);\n    glbLength += jsonChunkSize;\n    if (bin) {\n        glbLength += GLB_CHUNK_HEADER_SIZE;\n        glbLength += bin.byteLength; // Already rounded\n        if (bin.byteLength % 4)\n            throw new Error("Expected BIN chunk length to be divisible by 4 at this point");\n    }\n    var glbBuffer = new ArrayBuffer(glbLength);\n    var glbDataView = new DataView(glbBuffer);\n    writeHeader(glbDataView, glbLength);\n    // Chunk 0 (JSON)\n    var offset = writeChunk(glbDataView, encodedJSON, 12, GLBChunkType.JSON, 0x20);\n    // Chunk 1 (Binary Buffer)\n    if (bin) {\n        writeChunk(glbDataView, bin, offset, GLBChunkType.BIN);\n    }\n    return glbBuffer;\n}\nfunction writeHeader(out, glbLength) {\n    out.setUint32(0, GLB_MAGIC, true);\n    out.setUint32(4, GLTF_VERSION, true);\n    out.setUint32(8, glbLength, true);\n}\nfunction writeChunk(out, chunk, offset, chunkType, pad) {\n    if (pad === void 0) { pad = 0; }\n    var chunkLength = makeDivisibleBy(chunk.byteLength, 4);\n    out.setUint32(offset, chunkLength, true);\n    out.setUint32(offset += 4, chunkType, true);\n    writeArrayBuffer(out.buffer, chunk, offset += 4, 0, chunk.byteLength);\n    offset += chunk.byteLength;\n    while (offset % 4) {\n        if (pad) {\n            out.setUint8(offset, pad);\n        }\n        offset++;\n    }\n    return offset;\n}\nfunction textToArrayBuffer(json) {\n    return (new TextEncoder()).encode(json).buffer;\n}\nfunction writeArrayBuffer(target, src, targetOffset, srcOffset, byteLength) {\n    new Uint8Array(target, targetOffset, byteLength).set(new Uint8Array(src, srcOffset, byteLength), 0);\n}\nfunction makeDivisibleBy(num, by) {\n    return by * Math.ceil(num / by);\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/glb.ts?')},"./src/gltf.ts":
/*!*********************!*\
  !*** ./src/gltf.ts ***!
  \*********************/
/*! exports provided: addScenes */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addScenes", function() { return addScenes; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n/* harmony import */ var _buffer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buffer */ "./src/buffer.ts");\n/* harmony import */ var _imageutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./imageutils */ "./src/imageutils.ts");\n\n\n\nfunction addScenes(gltf, asset) {\n    gltf.scene = asset.defaultScene;\n    var doingGLB = gltf.extras.options.bufferOutputType === _types__WEBPACK_IMPORTED_MODULE_0__["BufferOutputType"].GLB\n        || gltf.extras.options.imageOutputType === _types__WEBPACK_IMPORTED_MODULE_0__["ImageOutputType"].GLB;\n    if (doingGLB) {\n        gltf.extras.binChunkBuffer = addBuffer(gltf);\n    }\n    asset.forEachScene(function (scene) {\n        addScene(gltf, scene);\n    });\n    if (doingGLB) {\n        gltf.extras.binChunkBuffer.finalize();\n    }\n}\nfunction addScene(gltf, scene) {\n    if (!gltf.scenes)\n        gltf.scenes = [];\n    var gltfScene = {};\n    if (scene.name)\n        gltfScene.name = scene.name;\n    scene.forEachNode(function (node) {\n        if (!gltfScene.nodes)\n            gltfScene.nodes = [];\n        var index = addNode(gltf, node);\n        gltfScene.nodes.push(index);\n    });\n    gltf.scenes.push(gltfScene);\n}\nfunction addNode(gltf, node) {\n    if (!gltf.nodes)\n        gltf.nodes = [];\n    var gltfNode = {};\n    if (node.name)\n        gltfNode.name = node.name;\n    var translation = node.getTranslation();\n    if (translation.x !== 0 || translation.y !== 0 || translation.z !== 0)\n        gltfNode.translation = translation.toArray();\n    var rotation = node.getRotationQuaternion();\n    if (rotation.x !== 0 || rotation.y !== 0 || rotation.z !== 0 || rotation.w !== 1)\n        gltfNode.rotation = rotation.toArray();\n    var scale = node.getScale();\n    if (scale.x !== 1 || scale.y !== 1 || scale.z !== 1)\n        gltfNode.scale = scale.toArray();\n    var addedIndex = gltf.nodes.length;\n    gltf.nodes.push(gltfNode);\n    if (node.mesh) {\n        gltfNode.mesh = addMesh(gltf, node.mesh);\n    }\n    else {\n        node.forEachNode(function (node) {\n            if (!gltfNode.children)\n                gltfNode.children = [];\n            var index = addNode(gltf, node);\n            gltfNode.children.push(index);\n        });\n    }\n    return addedIndex;\n}\nfunction addMesh(gltf, mesh) {\n    if (!gltf.meshes)\n        gltf.meshes = [];\n    if (mesh.mode !== _types__WEBPACK_IMPORTED_MODULE_0__["MeshMode"].TRIANGLES)\n        throw "MeshMode other than TRIANGLES not currently supported";\n    addMaterials(gltf, mesh.material);\n    var gltfMesh = {\n        primitives: [],\n    };\n    var addedIndex = gltf.meshes.length;\n    gltf.meshes.push(gltfMesh);\n    var singleGLBBuffer = gltf.extras.options.bufferOutputType === _types__WEBPACK_IMPORTED_MODULE_0__["BufferOutputType"].GLB;\n    var meshBuffer;\n    if (singleGLBBuffer) {\n        meshBuffer = gltf.extras.binChunkBuffer;\n    }\n    else {\n        meshBuffer = addBuffer(gltf);\n    }\n    var vertexBufferView = meshBuffer.addBufferView(_types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].FLOAT, _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC3);\n    var vertexNormalBufferView = meshBuffer.addBufferView(_types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].FLOAT, _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC3);\n    var vertexUVBufferView = meshBuffer.addBufferView(_types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].FLOAT, _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC2);\n    var vertexColorBufferView;\n    function _ensureColorBufferView() {\n        if (vertexColorBufferView)\n            return;\n        vertexColorBufferView = meshBuffer.addBufferView(_types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_BYTE, _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].VEC4);\n    }\n    function _completeMeshPrimitive(materialIndex) {\n        var vertexBufferAccessorInfo = vertexBufferView.endAccessor();\n        var vertexNormalBufferAccessorInfo = vertexNormalBufferView.endAccessor();\n        var vertexUVBufferAccessorInfo = vertexUVBufferView.endAccessor();\n        var primitive = {\n            attributes: {\n                POSITION: addAccessor(gltf, vertexBufferView.getIndex(), vertexBufferAccessorInfo),\n                NORMAL: addAccessor(gltf, vertexNormalBufferView.getIndex(), vertexNormalBufferAccessorInfo),\n                TEXCOORD_0: addAccessor(gltf, vertexUVBufferView.getIndex(), vertexUVBufferAccessorInfo),\n            },\n            mode: mesh.mode,\n        };\n        if (materialIndex >= 0) {\n            primitive.material = materialIndex;\n            // Only add color data if it is per-face/vertex.\n            var material = mesh.material[materialIndex];\n            if (material.vertexColorMode !== _types__WEBPACK_IMPORTED_MODULE_0__["VertexColorMode"].NoColors) {\n                var vertexColorBufferAccessorInfo = vertexColorBufferView.endAccessor();\n                primitive.attributes["COLOR_0"] =\n                    addAccessor(gltf, vertexColorBufferView.getIndex(), vertexColorBufferAccessorInfo);\n            }\n        }\n        return primitive;\n    }\n    var lastMaterialIndex = null;\n    mesh.forEachFace(function (v1, v2, v3, color, materialIndex) {\n        var currentMaterial = null;\n        if (materialIndex >= 0)\n            currentMaterial = mesh.material[materialIndex];\n        // Need to start new accessors\n        if (lastMaterialIndex !== materialIndex) {\n            // And end the previous ones.\n            if (lastMaterialIndex !== null) {\n                var primitive = _completeMeshPrimitive(lastMaterialIndex);\n                gltfMesh.primitives.push(primitive);\n            }\n            vertexBufferView.startAccessor("POSITION");\n            vertexNormalBufferView.startAccessor("NORMAL");\n            vertexUVBufferView.startAccessor("TEXCOORD_0");\n            if (currentMaterial && currentMaterial.vertexColorMode !== _types__WEBPACK_IMPORTED_MODULE_0__["VertexColorMode"].NoColors) {\n                _ensureColorBufferView();\n                vertexColorBufferView.startAccessor("COLOR_0");\n            }\n            lastMaterialIndex = materialIndex;\n        }\n        // Positions\n        vertexBufferView.push(v1.x);\n        vertexBufferView.push(v1.y);\n        vertexBufferView.push(v1.z);\n        vertexBufferView.push(v2.x);\n        vertexBufferView.push(v2.y);\n        vertexBufferView.push(v2.z);\n        vertexBufferView.push(v3.x);\n        vertexBufferView.push(v3.y);\n        vertexBufferView.push(v3.z);\n        // Vertex normals\n        vertexNormalBufferView.push(v1.normalX);\n        vertexNormalBufferView.push(v1.normalY);\n        vertexNormalBufferView.push(v1.normalZ);\n        vertexNormalBufferView.push(v2.normalX);\n        vertexNormalBufferView.push(v2.normalY);\n        vertexNormalBufferView.push(v2.normalZ);\n        vertexNormalBufferView.push(v3.normalX);\n        vertexNormalBufferView.push(v3.normalY);\n        vertexNormalBufferView.push(v3.normalZ);\n        // Texture UV coords\n        vertexUVBufferView.push(v1.u);\n        vertexUVBufferView.push(v1.v);\n        vertexUVBufferView.push(v2.u);\n        vertexUVBufferView.push(v2.v);\n        vertexUVBufferView.push(v3.u);\n        vertexUVBufferView.push(v3.v);\n        if (currentMaterial) {\n            // Vertex colors\n            switch (currentMaterial.vertexColorMode) {\n                case _types__WEBPACK_IMPORTED_MODULE_0__["VertexColorMode"].FaceColors:\n                    // Just duplicate the face colors 3 times.\n                    for (var v = 0; v < 3; v++) {\n                        addColorToBufferView(vertexColorBufferView, color || new _types__WEBPACK_IMPORTED_MODULE_0__["RGBColor"]());\n                    }\n                    break;\n                case _types__WEBPACK_IMPORTED_MODULE_0__["VertexColorMode"].VertexColors:\n                    addColorToBufferView(vertexColorBufferView, v1.color || new _types__WEBPACK_IMPORTED_MODULE_0__["RGBColor"]());\n                    addColorToBufferView(vertexColorBufferView, v2.color || new _types__WEBPACK_IMPORTED_MODULE_0__["RGBColor"]());\n                    addColorToBufferView(vertexColorBufferView, v3.color || new _types__WEBPACK_IMPORTED_MODULE_0__["RGBColor"]());\n                    break;\n                // NoColors? We won\'t have an accessor.\n            }\n        }\n    });\n    if (lastMaterialIndex !== null) {\n        var primitive = _completeMeshPrimitive(lastMaterialIndex);\n        gltfMesh.primitives.push(primitive);\n    }\n    vertexBufferView.finalize();\n    vertexNormalBufferView.finalize();\n    vertexUVBufferView.finalize();\n    if (vertexColorBufferView)\n        vertexColorBufferView.finalize();\n    if (!singleGLBBuffer)\n        meshBuffer.finalize();\n    return addedIndex;\n}\nfunction addColorToBufferView(bufferView, color) {\n    bufferView.push((color.r * 255) | 0);\n    bufferView.push((color.g * 255) | 0);\n    bufferView.push((color.b * 255) | 0);\n    if ("a" in color) {\n        bufferView.push((color.a * 255) | 0);\n    }\n    else {\n        bufferView.push(0xFF);\n    }\n}\nfunction addBuffer(gltf) {\n    return new _buffer__WEBPACK_IMPORTED_MODULE_1__["Buffer"](gltf);\n}\nfunction addAccessor(gltf, bufferViewIndex, accessorInfo) {\n    if (!gltf.accessors)\n        gltf.accessors = [];\n    var addedIndex = gltf.accessors.length;\n    var componentType = accessorInfo.componentType;\n    var accessor = {\n        bufferView: bufferViewIndex,\n        byteOffset: accessorInfo.byteOffset,\n        componentType: componentType,\n        count: accessorInfo.count,\n        type: accessorInfo.type,\n        min: accessorInfo.min,\n        max: accessorInfo.max,\n    };\n    if (accessorInfo.normalized) {\n        accessor.normalized = true;\n    }\n    gltf.accessors.push(accessor);\n    return addedIndex;\n}\nfunction addMaterials(gltf, materials) {\n    var indices = [];\n    for (var _i = 0, materials_1 = materials; _i < materials_1.length; _i++) {\n        var material = materials_1[_i];\n        indices.push(addMaterial(gltf, material));\n    }\n    return indices;\n}\nfunction addMaterial(gltf, material) {\n    if (!gltf.materials)\n        gltf.materials = [];\n    var gltfMaterial = {};\n    if (material.name)\n        gltfMaterial.name = material.name;\n    if (material.alphaMode !== _types__WEBPACK_IMPORTED_MODULE_0__["AlphaMode"].OPAQUE)\n        gltfMaterial.alphaMode = material.alphaMode;\n    if (material.alphaCutoff !== 0.5)\n        gltfMaterial.alphaCutoff = material.alphaCutoff;\n    if (material.doubleSided)\n        gltfMaterial.doubleSided = true;\n    if (material.pbrMetallicRoughness) {\n        if (material.pbrMetallicRoughness.baseColorFactor) {\n            gltfMaterial.pbrMetallicRoughness = {};\n            gltfMaterial.pbrMetallicRoughness.baseColorFactor = material.pbrMetallicRoughness.baseColorFactor;\n        }\n        if (material.pbrMetallicRoughness.baseColorTexture) {\n            if (!gltfMaterial.pbrMetallicRoughness)\n                gltfMaterial.pbrMetallicRoughness = {};\n            var textureIndex = addTexture(gltf, material.pbrMetallicRoughness.baseColorTexture);\n            gltfMaterial.pbrMetallicRoughness.baseColorTexture = { index: textureIndex };\n        }\n    }\n    var addedIndex = gltf.materials.length;\n    gltf.materials.push(gltfMaterial);\n    return addedIndex;\n}\nfunction addTexture(gltf, texture) {\n    if (!gltf.textures)\n        gltf.textures = [];\n    var gltfTexture = {\n        sampler: addSampler(gltf, texture),\n        source: addImage(gltf, texture.image),\n    };\n    var addedIndex = gltf.textures.length;\n    gltf.textures.push(gltfTexture);\n    return addedIndex;\n}\nfunction addImage(gltf, image) {\n    if (!gltf.images)\n        gltf.images = [];\n    for (var i = 0; i < gltf.images.length; i++) {\n        if (image === gltf.images[i].extras) {\n            return i; // Already had an identical image.\n        }\n    }\n    var gltfImage = {\n        extras: image,\n    };\n    switch (gltf.extras.options.imageOutputType) {\n        case _types__WEBPACK_IMPORTED_MODULE_0__["ImageOutputType"].GLB:\n            var bufferView_1 = gltf.extras.binChunkBuffer.addBufferView(_types__WEBPACK_IMPORTED_MODULE_0__["ComponentType"].UNSIGNED_BYTE, _types__WEBPACK_IMPORTED_MODULE_0__["DataType"].SCALAR);\n            bufferView_1.writeAsync(Object(_imageutils__WEBPACK_IMPORTED_MODULE_2__["imageToArrayBuffer"])(image)).then(function () {\n                bufferView_1.finalize();\n            });\n            gltfImage.bufferView = bufferView_1.getIndex();\n            gltfImage.mimeType = "image/png";\n            break;\n        case _types__WEBPACK_IMPORTED_MODULE_0__["ImageOutputType"].DataURI:\n            gltfImage.uri = Object(_imageutils__WEBPACK_IMPORTED_MODULE_2__["imageToDataURI"])(image);\n            break;\n        default: // ImageOutputType.External\n            gltf.extras.promises.push(Object(_imageutils__WEBPACK_IMPORTED_MODULE_2__["imageToArrayBuffer"])(image).then(function (pngBuffer) {\n                gltfImage.uri = pngBuffer; // Processed later\n            }));\n            break;\n    }\n    var addedIndex = gltf.images.length;\n    gltf.images.push(gltfImage);\n    return addedIndex;\n}\nfunction addSampler(gltf, texture) {\n    if (!gltf.samplers)\n        gltf.samplers = [];\n    var gltfSampler = {\n        wrapS: texture.wrapS,\n        wrapT: texture.wrapT,\n    };\n    for (var i = 0; i < gltf.samplers.length; i++) {\n        if (objectsEqual(gltfSampler, gltf.samplers[i])) {\n            return i; // Already had an identical sampler.\n        }\n    }\n    var addedIndex = gltf.samplers.length;\n    gltf.samplers.push(gltfSampler);\n    return addedIndex;\n}\nfunction objectsEqual(obj1, obj2) {\n    return JSON.stringify(obj1) === JSON.stringify(obj2);\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/gltf.ts?')},"./src/imageutils.ts":
/*!***************************!*\
  !*** ./src/imageutils.ts ***!
  \***************************/
/*! exports provided: imageToDataURI, imageToArrayBuffer, encodeBase64DataUri, arrayBufferIsPNG */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "imageToDataURI", function() { return imageToDataURI; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "imageToArrayBuffer", function() { return imageToArrayBuffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "encodeBase64DataUri", function() { return encodeBase64DataUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayBufferIsPNG", function() { return arrayBufferIsPNG; });\n/**\n * Converts an image into a Data URI string.\n * @param image\n */\nfunction imageToDataURI(image) {\n    var canvas = _imageTypeToCanvas(image);\n    return canvas.toDataURL();\n}\n/**\n * Converts an image into an ArrayBuffer.\n * @param image\n */\nfunction imageToArrayBuffer(image) {\n    var canvas = _imageTypeToCanvas(image);\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n        promiseResolve = resolve;\n        promiseReject = reject;\n    });\n    canvas.toBlob(function (blob) {\n        if (!blob) {\n            promiseReject("Unable to convert image to PNG");\n            return;\n        }\n        var reader = new FileReader();\n        reader.addEventListener("loadend", function () {\n            promiseResolve(reader.result);\n        });\n        reader.readAsArrayBuffer(blob);\n    }, "image/png");\n    return promise;\n}\nfunction _imageTypeToCanvas(image) {\n    var canvas;\n    if (image instanceof HTMLImageElement) {\n        canvas = document.createElement("canvas");\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext("2d");\n        context.drawImage(image, 0, 0, image.width, image.height);\n    }\n    else {\n        canvas = image;\n    }\n    return canvas;\n}\n/**\n * Converts an ArrayBuffer into a base64 Data URI string.\n * @param buf\n */\nfunction encodeBase64DataUri(buf) {\n    var codes = [];\n    var uint8arr = new Uint8Array(buf);\n    for (var i = 0; i < uint8arr.length; i++) {\n        codes.push(String.fromCharCode(uint8arr[i]));\n    }\n    var b64 = btoa(codes.join(""));\n    var uri = "data:application/octet-stream;base64," + b64;\n    return uri;\n}\n/** Determines if an ArrayBuffer holds a PNG format image. */\nfunction arrayBufferIsPNG(buffer) {\n    // PNG starts with 89 50 4E 47 0D 0A 1A 0A\n    if (buffer.byteLength < 8)\n        return false;\n    var arr = new Uint8Array(buffer);\n    return arr[0] === 0x89\n        && arr[1] === 0x50\n        && arr[2] === 0x4E\n        && arr[3] === 0x47\n        && arr[4] === 0x0D\n        && arr[5] === 0x0A\n        && arr[6] === 0x1A\n        && arr[7] === 0x0A;\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/imageutils.ts?')},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! exports provided: GLTFAsset, Scene, Node, Mesh, Material, Texture, Vertex, XYZPair, Quaternion, glTFAssetFromTHREE, AlphaMode, ComponentType, DataType, MeshMode, RGBColor, RGBAColor, VertexColorMode, WrappingMode, ImageOutputType, BufferOutputType, exportGLTF, exportGLTFZip, exportGLB */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportGLTF", function() { return exportGLTF; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportGLTFZip", function() { return exportGLTFZip; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exportGLB", function() { return exportGLB; });\n/* harmony import */ var _asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./asset */ "./src/asset.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GLTFAsset", function() { return _asset__WEBPACK_IMPORTED_MODULE_0__["GLTFAsset"]; });\n\n/* harmony import */ var _scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene */ "./src/scene.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scene", function() { return _scene__WEBPACK_IMPORTED_MODULE_1__["Scene"]; });\n\n/* harmony import */ var _node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node */ "./src/node.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Node", function() { return _node__WEBPACK_IMPORTED_MODULE_2__["Node"]; });\n\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_3__["Mesh"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_4__["Material"]; });\n\n/* harmony import */ var _texture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./texture */ "./src/texture.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Texture", function() { return _texture__WEBPACK_IMPORTED_MODULE_5__["Texture"]; });\n\n/* harmony import */ var _vertex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./vertex */ "./src/vertex.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Vertex", function() { return _vertex__WEBPACK_IMPORTED_MODULE_6__["Vertex"]; });\n\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./math */ "./src/math.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "XYZPair", function() { return _math__WEBPACK_IMPORTED_MODULE_7__["XYZPair"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Quaternion", function() { return _math__WEBPACK_IMPORTED_MODULE_7__["Quaternion"]; });\n\n/* harmony import */ var _threejs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./threejs */ "./src/threejs.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "glTFAssetFromTHREE", function() { return _threejs__WEBPACK_IMPORTED_MODULE_8__["glTFAssetFromTHREE"]; });\n\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AlphaMode", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["AlphaMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ComponentType", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["ComponentType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataType", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["DataType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MeshMode", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["MeshMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RGBColor", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["RGBColor"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RGBAColor", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["RGBAColor"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VertexColorMode", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["VertexColorMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WrappingMode", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["WrappingMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ImageOutputType", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["ImageOutputType"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BufferOutputType", function() { return _types__WEBPACK_IMPORTED_MODULE_9__["BufferOutputType"]; });\n\n/* harmony import */ var _gltf__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./gltf */ "./src/gltf.ts");\n/* harmony import */ var _imageutils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./imageutils */ "./src/imageutils.ts");\n/* harmony import */ var _glb__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./glb */ "./src/glb.ts");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar MODEL_NAME_GLTF = "model.gltf";\nvar MODEL_NAME_GLB = "model.glb";\nvar BIN_CHUNK_NAME = "BIN";\n/**\n * Creates a glTF model from a GLTFAsset structure.\n * @param asset GLTFAsset model structure\n * @param options\n * @returns An object, each key pointing to a file.\n */\nfunction exportGLTF(asset, options) {\n    options = options || {};\n    var gltf = {\n        asset: {\n            version: "2.0",\n            copyright: asset.copyright,\n            generator: asset.generator,\n        },\n        extras: {\n            options: options,\n            binChunkBuffer: null,\n            promises: [],\n        }\n    };\n    Object(_gltf__WEBPACK_IMPORTED_MODULE_10__["addScenes"])(gltf, asset);\n    var promises = gltf.extras.promises;\n    var currentData = 1;\n    var currentImg = 1;\n    var binChunkBuffer = null;\n    return Promise.all(promises).then(function () {\n        var output = {};\n        delete gltf.extras;\n        var jsonSpacing = typeof options.jsonSpacing === "number" ? options.jsonSpacing : 4;\n        var gltfString = JSON.stringify(gltf, function (key, value) {\n            if (key === "extras")\n                return undefined;\n            if (value instanceof ArrayBuffer) {\n                if (Object(_imageutils__WEBPACK_IMPORTED_MODULE_11__["arrayBufferIsPNG"])(value)) {\n                    switch (options.imageOutputType) {\n                        case _types__WEBPACK_IMPORTED_MODULE_9__["ImageOutputType"].DataURI:\n                        case _types__WEBPACK_IMPORTED_MODULE_9__["ImageOutputType"].GLB:\n                            break; // Not applicable\n                        default: // ImageOutputType.External\n                            var filename = "img" + currentImg + ".png";\n                            currentImg++;\n                            output[filename] = value;\n                            return filename;\n                    }\n                }\n                switch (options.bufferOutputType) {\n                    case _types__WEBPACK_IMPORTED_MODULE_9__["BufferOutputType"].DataURI:\n                        return Object(_imageutils__WEBPACK_IMPORTED_MODULE_11__["encodeBase64DataUri"])(value);\n                    case _types__WEBPACK_IMPORTED_MODULE_9__["BufferOutputType"].GLB:\n                        if (binChunkBuffer)\n                            throw new Error("Already encountered an ArrayBuffer, there should only be one in the GLB format.");\n                        binChunkBuffer = value;\n                        return undefined;\n                    default: // BufferOutputType.External\n                        var filename = "data" + currentData + ".bin";\n                        currentData++;\n                        output[filename] = value;\n                        return filename;\n                }\n            }\n            return value;\n        }, jsonSpacing);\n        var doingGLB = options.bufferOutputType === _types__WEBPACK_IMPORTED_MODULE_9__["BufferOutputType"].GLB\n            || options.imageOutputType === _types__WEBPACK_IMPORTED_MODULE_9__["ImageOutputType"].GLB;\n        if (doingGLB) {\n            output[MODEL_NAME_GLB] = Object(_glb__WEBPACK_IMPORTED_MODULE_12__["createGLBBuffer"])(gltfString, binChunkBuffer);\n        }\n        else {\n            output[MODEL_NAME_GLTF] = gltfString;\n        }\n        return output;\n    });\n}\n/**\n * Creates a ZIP file of a glTF model from a GLTFAsset structure.\n * @param asset GLTFAsset model structure\n * @param options\n * @returns A Promise to receive a ZIP blob is returned instead.\n */\nfunction exportGLTFZip(asset, jsZip, options) {\n    return exportGLTF(asset, options).then(function (output) {\n        var zip = new jsZip();\n        for (var filename in output) {\n            zip.file(filename, output[filename]);\n        }\n        return zip.generateAsync({ type: "blob" });\n    });\n}\n/**\n * Creates a GLB binary format glTF model from a GLTFAsset structure.\n * @param asset GLTFAsset model structure\n * @param options\n * @returns An ArrayBuffer containing the GLB file.\n */\nfunction exportGLB(asset) {\n    return exportGLTF(asset, {\n        bufferOutputType: _types__WEBPACK_IMPORTED_MODULE_9__["BufferOutputType"].GLB,\n        imageOutputType: _types__WEBPACK_IMPORTED_MODULE_9__["ImageOutputType"].GLB,\n        jsonSpacing: 0,\n    }).then(function (output) {\n        return output[MODEL_NAME_GLB];\n    });\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/index.ts?')},"./src/material.ts":
/*!*************************!*\
  !*** ./src/material.ts ***!
  \*************************/
/*! exports provided: Material */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\nvar Material = /** @class */ (function () {\n    function Material() {\n        this.name = "";\n        this.alphaCutoff = 0.5;\n        this.alphaMode = _types__WEBPACK_IMPORTED_MODULE_0__["AlphaMode"].OPAQUE;\n        this.doubleSided = false;\n        this.vertexColorMode = _types__WEBPACK_IMPORTED_MODULE_0__["VertexColorMode"].NoColors;\n        this.pbrMetallicRoughness = {\n            metallicFactor: 1.0,\n            roughnessFactor: 1.0,\n        };\n    }\n    return Material;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/material.ts?')},"./src/math.ts":
/*!*********************!*\
  !*** ./src/math.ts ***!
  \*********************/
/*! exports provided: XYZPair, Quaternion, toQuaternion, degreesToRadians */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "XYZPair", function() { return XYZPair; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Quaternion", function() { return Quaternion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toQuaternion", function() { return toQuaternion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "degreesToRadians", function() { return degreesToRadians; });\nvar XYZPair = /** @class */ (function () {\n    function XYZPair(x, y, z) {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    XYZPair.prototype.toArray = function () {\n        return [this.x, this.y, this.z];\n    };\n    return XYZPair;\n}());\n\nvar Quaternion = /** @class */ (function () {\n    function Quaternion(x, y, z, w) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    Quaternion.prototype.toArray = function () {\n        return [this.x, this.y, this.z, this.w];\n    };\n    return Quaternion;\n}());\n\nfunction toQuaternion(x, y, z) {\n    var cy = Math.cos(z * 0.5);\n    var sy = Math.sin(z * 0.5);\n    var cr = Math.cos(x * 0.5);\n    var sr = Math.sin(x * 0.5);\n    var cp = Math.cos(y * 0.5);\n    var sp = Math.sin(y * 0.5);\n    return new Quaternion(cy * sr * cp - sy * cr * sp, cy * cr * sp + sy * sr * cp, sy * cr * cp - cy * sr * sp, cy * cr * cp + sy * sr * sp);\n}\nfunction degreesToRadians(degrees) {\n    return degrees * Math.PI / 180;\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/math.ts?')},"./src/mesh.ts":
/*!*********************!*\
  !*** ./src/mesh.ts ***!
  \*********************/
/*! exports provided: Mesh */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return Mesh; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\nvar Mesh = /** @class */ (function () {\n    function Mesh() {\n        this.material = [];\n        this.mode = _types__WEBPACK_IMPORTED_MODULE_0__["MeshMode"].TRIANGLES;\n        this._vertices = [];\n        this._faceColors = [];\n        this._materialIndices = [];\n    }\n    Mesh.prototype.addFace = function (v1, v2, v3, color, materialIndex) {\n        this._vertices.push(v1);\n        this._vertices.push(v2);\n        this._vertices.push(v3);\n        this._faceColors.push(color);\n        if (typeof materialIndex === "undefined")\n            materialIndex = -1;\n        this._materialIndices.push(materialIndex);\n    };\n    Mesh.prototype.forEachFace = function (fn) {\n        for (var i = 0; i < this._vertices.length / 3; i++) {\n            fn(this._vertices[(i * 3)], this._vertices[(i * 3) + 1], this._vertices[(i * 3) + 2], this._faceColors[i], this._materialIndices[i]);\n        }\n    };\n    return Mesh;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/mesh.ts?')},"./src/node.ts":
/*!*********************!*\
  !*** ./src/node.ts ***!
  \*********************/
/*! exports provided: Node */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Node", function() { return Node; });\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math */ "./src/math.ts");\n\nvar Node = /** @class */ (function () {\n    function Node() {\n        this.name = "";\n        this._nodes = [];\n    }\n    Node.prototype.addNode = function (node) {\n        if (this._nodes.indexOf(node) >= 0)\n            throw new Error("Node passed to addNode was added prior.");\n        this._nodes.push(node);\n    };\n    Node.prototype.forEachNode = function (fn) {\n        this._nodes.forEach(fn);\n    };\n    Node.prototype.setTranslation = function (x, y, z) {\n        this._translation = new _math__WEBPACK_IMPORTED_MODULE_0__["XYZPair"](x, y, z);\n    };\n    Node.prototype.getTranslation = function () {\n        return this._translation || new _math__WEBPACK_IMPORTED_MODULE_0__["XYZPair"](0, 0, 0);\n    };\n    Node.prototype.setRotationDegrees = function (x, y, z) {\n        this.setRotationRadians(Object(_math__WEBPACK_IMPORTED_MODULE_0__["degreesToRadians"])(x), Object(_math__WEBPACK_IMPORTED_MODULE_0__["degreesToRadians"])(y), Object(_math__WEBPACK_IMPORTED_MODULE_0__["degreesToRadians"])(z));\n    };\n    Node.prototype.setRotationRadians = function (x, y, z) {\n        this._rotation = Object(_math__WEBPACK_IMPORTED_MODULE_0__["toQuaternion"])(x, y, z);\n    };\n    Node.prototype.setRotationQuaternion = function (x, y, z, w) {\n        this._rotation = new _math__WEBPACK_IMPORTED_MODULE_0__["Quaternion"](x, y, z, w);\n    };\n    Node.prototype.getRotationQuaternion = function () {\n        return this._rotation || new _math__WEBPACK_IMPORTED_MODULE_0__["Quaternion"](0, 0, 0, 1);\n    };\n    Node.prototype.setScale = function (x, y, z) {\n        this._scale = new _math__WEBPACK_IMPORTED_MODULE_0__["XYZPair"](x, y, z);\n    };\n    Node.prototype.getScale = function () {\n        return this._scale || new _math__WEBPACK_IMPORTED_MODULE_0__["XYZPair"](1, 1, 1);\n    };\n    return Node;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/node.ts?')},"./src/scene.ts":
/*!**********************!*\
  !*** ./src/scene.ts ***!
  \**********************/
/*! exports provided: Scene */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scene", function() { return Scene; });\nvar Scene = /** @class */ (function () {\n    function Scene() {\n        this.name = "";\n        this._nodes = [];\n    }\n    Scene.prototype.addNode = function (node) {\n        if (this._nodes.indexOf(node) >= 0)\n            throw new Error("Node passed to addNode was added prior.");\n        this._nodes.push(node);\n    };\n    Scene.prototype.forEachNode = function (fn) {\n        this._nodes.forEach(fn);\n    };\n    return Scene;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/scene.ts?')},"./src/texture.ts":
/*!************************!*\
  !*** ./src/texture.ts ***!
  \************************/
/*! exports provided: Texture */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Texture", function() { return Texture; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\nvar Texture = /** @class */ (function () {\n    function Texture(image) {\n        this.wrapS = _types__WEBPACK_IMPORTED_MODULE_0__["WrappingMode"].CLAMP_TO_EDGE;\n        this.wrapT = _types__WEBPACK_IMPORTED_MODULE_0__["WrappingMode"].CLAMP_TO_EDGE;\n        this.image = image;\n    }\n    Object.defineProperty(Texture.prototype, "image", {\n        get: function () {\n            return this.__image;\n        },\n        set: function (val) {\n            if (!val) {\n                throw new Error("Why is the texture image being unset?");\n            }\n            this.__image = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Texture;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/texture.ts?')},"./src/threejs.ts":
/*!************************!*\
  !*** ./src/threejs.ts ***!
  \************************/
/*! exports provided: glTFAssetFromTHREE */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "glTFAssetFromTHREE", function() { return glTFAssetFromTHREE; });\n/* harmony import */ var _asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./asset */ "./src/asset.ts");\n/* harmony import */ var _scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene */ "./src/scene.ts");\n/* harmony import */ var _node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node */ "./src/node.ts");\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony import */ var _texture__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./texture */ "./src/texture.ts");\n/* harmony import */ var _vertex__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./vertex */ "./src/vertex.ts");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./types */ "./src/types.ts");\n\n\n\n\n\n\n\n\nfunction glTFAssetFromTHREE(obj) {\n    var asset = new _asset__WEBPACK_IMPORTED_MODULE_0__["GLTFAsset"]();\n    var scene = new _scene__WEBPACK_IMPORTED_MODULE_1__["Scene"]();\n    scene.name = obj.name;\n    asset.addScene(scene);\n    scene.addNode(NodeFromTHREE(obj));\n    return asset;\n}\nfunction NodeFromTHREE(obj) {\n    var node = new _node__WEBPACK_IMPORTED_MODULE_2__["Node"]();\n    node.name = obj.name;\n    if (isTHREEMesh(obj)) {\n        node.mesh = MeshFromTHREE(obj);\n    }\n    else {\n        node.setTranslation(obj.position.x, obj.position.y, obj.position.z);\n        node.setRotationRadians(obj.rotation.x, obj.rotation.y, obj.rotation.z);\n        node.setScale(obj.scale.x, obj.scale.y, obj.scale.z);\n        for (var _i = 0, _a = obj.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            node.addNode(NodeFromTHREE(child));\n        }\n    }\n    return node;\n}\nfunction MeshFromTHREE(obj) {\n    var mesh = new _mesh__WEBPACK_IMPORTED_MODULE_3__["Mesh"]();\n    var threeGeometry = obj.geometry;\n    if (isTHREEGeometry(threeGeometry)) {\n        for (var i = 0; i < threeGeometry.faces.length; i++) {\n            var face = threeGeometry.faces[i];\n            var faceColor = new _types__WEBPACK_IMPORTED_MODULE_7__["RGBColor"]();\n            faceColor.r = face.color.r;\n            faceColor.g = face.color.g;\n            faceColor.b = face.color.b;\n            mesh.addFace(VertexFromTHREE(threeGeometry, i, face.a, 0), VertexFromTHREE(threeGeometry, i, face.b, 1), VertexFromTHREE(threeGeometry, i, face.c, 2), faceColor, face.materialIndex);\n        }\n        mesh.material = MaterialsFromTHREE(obj.material);\n    }\n    else {\n        throw new Error("BufferGeometry (or other type) not supported.");\n    }\n    return mesh;\n}\nfunction MaterialsFromTHREE(threeMaterial) {\n    var materials = [];\n    if (!Array.isArray(threeMaterial)) {\n        threeMaterial = [threeMaterial];\n    }\n    for (var _i = 0, threeMaterial_1 = threeMaterial; _i < threeMaterial_1.length; _i++) {\n        var mat = threeMaterial_1[_i];\n        materials.push(MaterialFromTHREE(mat));\n    }\n    return materials;\n}\nfunction MaterialFromTHREE(threeMaterial) {\n    var material = new _material__WEBPACK_IMPORTED_MODULE_4__["Material"]();\n    material.doubleSided = threeMaterial.side === 2; // THREE.DoubleSide;\n    if (isTHREEMeshBasicMaterial(threeMaterial)) {\n        material.pbrMetallicRoughness.metallicFactor = 0;\n        material.pbrMetallicRoughness.roughnessFactor = 0;\n        if (threeMaterial.transparent) {\n            material.alphaMode = _types__WEBPACK_IMPORTED_MODULE_7__["AlphaMode"].MASK;\n            material.alphaCutoff = threeMaterial.alphaTest;\n        }\n        material.vertexColorMode = threeMaterial.vertexColors;\n        if (threeMaterial.color && threeMaterial.vertexColors === 0 /* THREE.NoColors */) {\n            material.pbrMetallicRoughness.baseColorFactor = [\n                threeMaterial.color.r,\n                threeMaterial.color.g,\n                threeMaterial.color.b,\n                1\n            ];\n        }\n        if (threeMaterial.map) {\n            var texture = new _texture__WEBPACK_IMPORTED_MODULE_5__["Texture"](threeMaterial.map.image);\n            texture.wrapS = WrappingModeFromTHREE(threeMaterial.map.wrapS);\n            texture.wrapT = WrappingModeFromTHREE(threeMaterial.map.wrapT);\n            material.pbrMetallicRoughness.baseColorTexture = texture;\n        }\n    }\n    else {\n        throw new Error(threeMaterial.type + " is currently not supported.");\n    }\n    return material;\n}\nfunction VertexFromTHREE(threeGeometry, faceIndex, vertexIndex, vertexRelIndex) {\n    var vertex = new _vertex__WEBPACK_IMPORTED_MODULE_6__["Vertex"]();\n    var threeVertex = threeGeometry.vertices[vertexIndex];\n    vertex.x = threeVertex.x;\n    vertex.y = threeVertex.y;\n    vertex.z = threeVertex.z;\n    if (threeGeometry.faceVertexUvs[0] && threeGeometry.faceVertexUvs[0][faceIndex]\n        && threeGeometry.faceVertexUvs[0][faceIndex][vertexRelIndex]) {\n        vertex.u = threeGeometry.faceVertexUvs[0][faceIndex][vertexRelIndex].x;\n        vertex.v = threeGeometry.faceVertexUvs[0][faceIndex][vertexRelIndex].y;\n    }\n    var threeFace = threeGeometry.faces[faceIndex];\n    if (threeFace.vertexNormals[vertexRelIndex]) {\n        vertex.normalX = threeFace.vertexNormals[vertexRelIndex].x;\n        vertex.normalY = threeFace.vertexNormals[vertexRelIndex].y;\n        vertex.normalZ = threeFace.vertexNormals[vertexRelIndex].z;\n    }\n    if (threeFace.vertexColors[vertexRelIndex]) {\n        vertex.color = new _types__WEBPACK_IMPORTED_MODULE_7__["RGBColor"]();\n        vertex.color.r = threeFace.vertexColors[vertexRelIndex].r;\n        vertex.color.g = threeFace.vertexColors[vertexRelIndex].g;\n        vertex.color.b = threeFace.vertexColors[vertexRelIndex].b;\n    }\n    return vertex;\n}\nfunction WrappingModeFromTHREE(mode) {\n    switch (mode) {\n        case 1000: // THREE.RepeatWrapping\n            return _types__WEBPACK_IMPORTED_MODULE_7__["WrappingMode"].REPEAT;\n        case 1002: // THREE.MirroredRepeatWrapping\n            return _types__WEBPACK_IMPORTED_MODULE_7__["WrappingMode"].MIRRORED_REPEAT;\n        case 1001: // THREE.ClampToEdgeWrapping\n        default:\n            return _types__WEBPACK_IMPORTED_MODULE_7__["WrappingMode"].CLAMP_TO_EDGE;\n    }\n}\nfunction isTHREEMesh(obj) {\n    return obj.type === "Mesh";\n}\nfunction isTHREEGeometry(obj) {\n    return obj.type === "Geometry";\n}\nfunction isTHREEMeshBasicMaterial(obj) {\n    return obj.type === "MeshBasicMaterial";\n}\n\n\n//# sourceURL=webpack://GLTFUtils/./src/threejs.ts?')},"./src/types.ts":
/*!**********************!*\
  !*** ./src/types.ts ***!
  \**********************/
/*! exports provided: BufferOutputType, ImageOutputType, ComponentType, DataType, MeshMode, WrappingMode, AlphaMode, RGBColor, RGBAColor, VertexColorMode */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BufferOutputType", function() { return BufferOutputType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageOutputType", function() { return ImageOutputType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComponentType", function() { return ComponentType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataType", function() { return DataType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeshMode", function() { return MeshMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WrappingMode", function() { return WrappingMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlphaMode", function() { return AlphaMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RGBColor", function() { return RGBColor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RGBAColor", function() { return RGBAColor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VertexColorMode", function() { return VertexColorMode; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BufferOutputType;\n(function (BufferOutputType) {\n    /** Create separate files for binary buffers (default) */\n    BufferOutputType[BufferOutputType["External"] = 0] = "External";\n    /** Embed buffers as data URIs. */\n    BufferOutputType[BufferOutputType["DataURI"] = 1] = "DataURI";\n    /**\n     * Embed buffers as chunks in a GLB buffer.\n     */\n    BufferOutputType[BufferOutputType["GLB"] = 2] = "GLB";\n})(BufferOutputType || (BufferOutputType = {}));\nvar ImageOutputType;\n(function (ImageOutputType) {\n    /** Create separate files for images (default) */\n    ImageOutputType[ImageOutputType["External"] = 0] = "External";\n    /** Embed images as data URIs. */\n    ImageOutputType[ImageOutputType["DataURI"] = 1] = "DataURI";\n    /**\n     * Embed images as chunks in a GLB buffer.\n     */\n    ImageOutputType[ImageOutputType["GLB"] = 2] = "GLB";\n})(ImageOutputType || (ImageOutputType = {}));\nvar ComponentType;\n(function (ComponentType) {\n    ComponentType[ComponentType["BYTE"] = 5120] = "BYTE";\n    ComponentType[ComponentType["UNSIGNED_BYTE"] = 5121] = "UNSIGNED_BYTE";\n    ComponentType[ComponentType["SHORT"] = 5122] = "SHORT";\n    ComponentType[ComponentType["UNSIGNED_SHORT"] = 5123] = "UNSIGNED_SHORT";\n    ComponentType[ComponentType["UNSIGNED_INT"] = 5125] = "UNSIGNED_INT";\n    ComponentType[ComponentType["FLOAT"] = 5126] = "FLOAT";\n})(ComponentType || (ComponentType = {}));\nvar DataType;\n(function (DataType) {\n    DataType["SCALAR"] = "SCALAR";\n    DataType["VEC2"] = "VEC2";\n    DataType["VEC3"] = "VEC3";\n    DataType["VEC4"] = "VEC4";\n    DataType["MAT2"] = "MAT2";\n    DataType["MAT3"] = "MAT3";\n    DataType["MAT4"] = "MAT4";\n})(DataType || (DataType = {}));\nvar MeshMode;\n(function (MeshMode) {\n    MeshMode[MeshMode["POINTS"] = 0] = "POINTS";\n    MeshMode[MeshMode["LINES"] = 1] = "LINES";\n    MeshMode[MeshMode["LINE_LOOP"] = 2] = "LINE_LOOP";\n    MeshMode[MeshMode["LINE_STRIP"] = 3] = "LINE_STRIP";\n    MeshMode[MeshMode["TRIANGLES"] = 4] = "TRIANGLES";\n    MeshMode[MeshMode["TRIANGLE_STRIP"] = 5] = "TRIANGLE_STRIP";\n    MeshMode[MeshMode["TRIANGLE_FAN"] = 6] = "TRIANGLE_FAN";\n})(MeshMode || (MeshMode = {}));\nvar WrappingMode;\n(function (WrappingMode) {\n    WrappingMode[WrappingMode["CLAMP_TO_EDGE"] = 33071] = "CLAMP_TO_EDGE";\n    WrappingMode[WrappingMode["MIRRORED_REPEAT"] = 33648] = "MIRRORED_REPEAT";\n    WrappingMode[WrappingMode["REPEAT"] = 10497] = "REPEAT";\n})(WrappingMode || (WrappingMode = {}));\nvar AlphaMode;\n(function (AlphaMode) {\n    AlphaMode["OPAQUE"] = "OPAQUE";\n    AlphaMode["MASK"] = "MASK";\n    AlphaMode["BLEND"] = "BLEND";\n})(AlphaMode || (AlphaMode = {}));\nvar RGBColor = /** @class */ (function () {\n    function RGBColor() {\n        /** Red, between 0 and 1. */\n        this.r = 1;\n        /** Green, between 0 and 1 */\n        this.g = 1;\n        /** Blue, between 0 and 1 */\n        this.b = 1;\n    }\n    return RGBColor;\n}());\n\nvar RGBAColor = /** @class */ (function (_super) {\n    __extends(RGBAColor, _super);\n    function RGBAColor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Alpha, between 0 and 1 */\n        _this.a = 1;\n        return _this;\n    }\n    return RGBAColor;\n}(RGBColor));\n\n// Matches THREE Colors\nvar VertexColorMode;\n(function (VertexColorMode) {\n    VertexColorMode[VertexColorMode["NoColors"] = 0] = "NoColors";\n    VertexColorMode[VertexColorMode["FaceColors"] = 1] = "FaceColors";\n    VertexColorMode[VertexColorMode["VertexColors"] = 2] = "VertexColors";\n})(VertexColorMode || (VertexColorMode = {}));\n\n\n//# sourceURL=webpack://GLTFUtils/./src/types.ts?')},"./src/vertex.ts":
/*!***********************!*\
  !*** ./src/vertex.ts ***!
  \***********************/
/*! exports provided: Vertex */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vertex", function() { return Vertex; });\nvar Vertex = /** @class */ (function () {\n    function Vertex() {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        this.u = 0;\n        this.v = 0;\n        this.normalX = 0;\n        this.normalY = 0;\n        this.normalZ = 0;\n    }\n    return Vertex;\n}());\n\n\n\n//# sourceURL=webpack://GLTFUtils/./src/vertex.ts?')}})},module.exports=factory()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),i=n(56),a=n(55),o=n(3),s=n(1),l=n(11),c=function(){function e(){this.bgColor=0,this.showTextures=!0,this.showWireframe=!1,this.showVertexNormals=!1,this.useFormCamera=!1,this.__promises=[]}return e.prototype.createModel=function(e){var t=this,n=this._parseMaterials(e);return this.__threeResult=this._parseForm(e,n),new Promise(function(e){Promise.all(t.__promises).then(function(){t.__promises=[],e(t.__threeResult)})})},e.prototype._parseForm=function(e,t){var n=this._parseFormObj(e,t,0);return 1!==n.length&&console.warn("Expected 1 return object from _parseForm, got "+n.length),n[0]},e.prototype._parseFormObj=function(e,t,n){var o=r.FORM.getByGlobalIndex(e,"OBJ1",n);if(null===o&&(0===n&&(o=e.OBJ1[0].parsed.objects[0],console.warn("Using first object rather than global index 0 object")),!o))throw"Attempted to get unavailable OBJ "+n;Array.isArray(o)||(o=[o]);for(var s=[],l=function(n){var r=o[n];if(61===r.objType){for(var l=c._createObject3DFromOBJ1Entry(r),u=0;u<r.children.length;u++){var d=c._parseFormObj(e,t,r.children[u]);d&&d.length&&d.forEach(function(e){l.add(e)})}s.push(l)}else if(16===r.objType){var p=c._createObject3DFromOBJ1Entry(r),f=r.skeletonGlobalIndex,h=c._parseFormSkl(e,t,f);p.add(h),s.push(p)}else if(58===r.objType){p=c._createObject3DFromOBJ1Entry(r);for(var m=new i.Geometry,_=r.faceIndex;_<r.faceIndex+r.faceCount;_++){var g=e.FAC1[0].parsed.faces[_];c._populateGeometryWithFace(e,m,g)}if(c.showTextures){var v=new i.Mesh(m,t);p.add(v)}if(c.showWireframe){var y=new i.LineBasicMaterial({color:a.invertColor(c.bgColor),linewidth:c.showTextures?2:1}),A=new i.LineSegments(new i.EdgesGeometry(m),y);p.add(A)}if(c.showVertexNormals){var x=new i.VertexNormalsHelper(new i.Mesh(m,t),8,65280,1);p.add(x)}s.push(p)}},c=this,u=0;u<o.length;u++)l(u);return s},e.prototype._createObject3DFromOBJ1Entry=function(e){var t=new i.Object3D;return e.hasOwnProperty("globalIndex")&&(t.name=this._getObjNameFromId(e.globalIndex)),t.position.x=e.posX,t.position.y=e.posY,t.position.z=e.posZ,t.rotation.x=l.degreesToRadians(e.rotX),t.rotation.y=l.degreesToRadians(e.rotY),t.rotation.z=l.degreesToRadians(e.rotZ),t.rotation.order="ZYX",t.scale.x=e.scaleX,t.scale.y=e.scaleY,t.scale.z=e.scaleZ,t},e.prototype._getObjNameFromId=function(e){return o.$$hex(e)},e.prototype._parseFormSkl=function(e,t,n){var i=r.FORM.getByGlobalIndex(e,"SKL1",n);if(null===i||Array.isArray(i))throw"Unexpected SKL1 search result";return this._parseFormSklNode(e,t,i.skls,0)},e.prototype._parseFormSklNode=function(e,t,n,r){var i=n[r],a=this._createObject3DFromOBJ1Entry(i),o=i.objGlobalIndex,s=this._parseFormObj(e,t,o);if(s&&s.length&&s.forEach(function(e){a.add(e)}),i.isParentNode)for(var l=r+1;l;){var c=n[l],u=this._parseFormSklNode(e,t,n,l);if(a.add(u),!c.nextSiblingRelativeIndex)break;l+=c.nextSiblingRelativeIndex}return a},e.prototype._populateGeometryWithFace=function(e,t,n){if(n.vtxEntries.length){for(var r=e.VTX1[0].parsed.scale,i=n.vtxEntries,a=[],o=0;o<3;o++){var s=i[o],l=e.VTX1[0].parsed.vertices[s.vertexIndex];a.push(t.vertices.length),t.vertices.push(this._makeVertex(l,r))}if(4===i.length)for(o=0;o<4;o++)if(1!==o){s=i[o],l=e.VTX1[0].parsed.vertices[s.vertexIndex];a.push(t.vertices.length),t.vertices.push(this._makeVertex(l,r))}3===i.length?this._addFace(t,e,n,[a[0],a[1],a[2]],[i[0],i[1],i[2]]):4===i.length&&(this._addFace(t,e,n,[a[0],a[1],a[2]],[i[0],i[1],i[2]]),this._addFace(t,e,n,[a[3],a[4],a[5]],[i[0],i[2],i[3]]))}},e.prototype._addFace=function(e,t,n,r,a){var o=new i.Face3(r[0],r[1],r[2]);o.vertexNormals=this._makeVertexNormals(t,a[0].vertexIndex,a[1].vertexIndex,a[2].vertexIndex),o.materialIndex=this._getMaterialIndex(n),o.color=new i.Color(this._getColorBytes(t,n)),o.vertexColors=this._makeVertexColors(t,n,a[0],a[1],a[2]),e.faceVertexUvs[0].push(this._makeVertexUVs(a[0],a[1],a[2])),e.faces.push(o)},e.prototype._parseMaterials=function(e){var t=[new i.MeshBasicMaterial({vertexColors:i.VertexColors}),new i.MeshBasicMaterial({vertexColors:i.FaceColors})];if(e.BMP1)if(e.ATR1&&e.ATR1[0])for(var n=e.ATR1[0].parsed.atrs,a=0;a<n.length;a++){var o=n[a],s=r.FORM.getByGlobalIndex(e,"BMP1",o.bmpGlobalIndex);if(null===s||Array.isArray(s))console.warn("Unexpected bitmap result from global index lookup");else{var l=this._createTextureMaterial(o,s);t.push(l)}}else console.warn("BMPs, but no ATRs");return t},e.prototype._createTextureMaterial=function(e,t){var n=this,r=s.arrayBufferToDataURL(t.src,t.width,t.height);o.$$log("Texture",r);var a,l=new i.TextureLoader;l.crossOrigin="";var c=new Promise(function(t){(a=l.load(r,t)).flipY=!1,a.wrapS=n._getWrappingBehavior(e.xBehavior),a.wrapT=n._getWrappingBehavior(e.yBehavior)});return this.__promises.push(c),new i.MeshBasicMaterial({alphaTest:.5,map:a,transparent:!0,vertexColors:i.VertexColors})},e.prototype._getWrappingBehavior=function(e){switch(e){case 44:return i.MirroredRepeatWrapping;case 45:return i.RepeatWrapping;case 46:return i.ClampToEdgeWrapping;default:return console.warn("Unknown behavior "+o.$$hex(e)),i.ClampToEdgeWrapping}},e.prototype._makeVertex=function(e,t){return new i.Vector3(e.x*t,e.y*t,e.z*t)},e.prototype._makeVertexNormals=function(e,t,n,r){return[this._makeVertexNormal(e,t),this._makeVertexNormal(e,n),this._makeVertexNormal(e,r)]},e.prototype._makeVertexNormal=function(e,t){var n=e.VTX1[0].parsed.vertices[t],r=new i.Vector3(n.normalX/(127+(n.normalX<0?1:0)),n.normalY/(127+(n.normalY<0?1:0)),n.normalZ/(127+(n.normalZ<0?1:0)));return r.normalize(),r},e.prototype._makeVertexUVs=function(e,t,n){return[this._makeVertexUV(e),this._makeVertexUV(t),this._makeVertexUV(n)]},e.prototype._makeVertexUV=function(e){return new i.Vector2(e.u,e.v)},e.prototype._getMaterialIndex=function(e){return e.atrIndex>=0||54===e.mystery3?e.atrIndex+2:55===e.mystery3?0:void 0},e.prototype._getColorBytes=function(e,t){if(54===t.mystery3){var n=t.materialIndex;return this._getColorFromMaterial(e,n)}if(55===t.mystery3)return 16776192;console.warn("Could not determine color for face")},e.prototype._getColorFromMaterial=function(e,t){var n;return e.MAT1&&e.MAT1[0]&&e.MAT1[0].parsed&&(n=e.MAT1[0].parsed.materials[t].colorIndex,e.COL1&&e.COL1[0]&&e.COL1[0].parsed&&e.COL1[0].parsed.hasOwnProperty(n))?e.COL1[0].parsed[n]>>>8:(console.warn("Could not find color "+n+" specified by material "+t),16776192)},e.prototype._makeVertexColors=function(e,t,n,r,i){return 55!==t.mystery3?[]:[this._makeVertexColor(e,n),this._makeVertexColor(e,r),this._makeVertexColor(e,i)]},e.prototype._makeVertexColor=function(e,t){return t.materialIndex<0?null:new i.Color(this._getColorFromMaterial(e,t.materialIndex))},e.prototype.createCamera=function(e,t,n){var a=new i.PerspectiveCamera(75,t/n,1,999999);if(this.useFormCamera){var o=r.FORM.getObjectsByType(e,97);if(3===o.length){var s=o[0],l=o[1];return a.position.set(s.posX,s.posY,s.posZ),a.lookAt(new i.Vector3(l.posX,l.posY,l.posZ)),a}console.warn("Unexpected camera object count: "+o.length)}return a.position.z=500,a},e}();t.FormToThreeJs=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(103),a=n(56),o=n(11),s=function(){function e(){}return e.prototype.createClip=function(e){var t=this._createTracks(e),n=this._framesToSeconds(e.totalFrames);return new a.AnimationClip("MTNX",n,t)},e.prototype._createTracks=function(e){for(var t=[],n=0;n<e.tracks.length;n++){var r=this._createTrack(e.tracks[n]);r&&t.push(r)}return this._adjustTrackOrder(t),t},e.prototype._createTrack=function(e){var t=i.MTNX.TrackType;switch(e.type){case t.Transform:return this._createTransformTrack(e);case t.Rotation:return this._createRotationTrack(e);case t.Scale:return this._createScaleTrack(e)}console.warn("Unsupported track type "+r.$$hex(e.type))},e.prototype._createTransformTrack=function(e){var t=this._createTransformTrackName(e),n=this._createKeyframeSecsArr(e.keyframes),r=this._createTransformTrackData(e);return new a.VectorKeyframeTrack(t,n,r)},e.prototype._createTransformTrackName=function(e){return this._getObjNameFromIndex(e.objIndex)+".position["+this._getDimensionProperty(e.dimension)+"]"},e.prototype._createTransformTrackData=function(e){var t=[];for(var n in e.keyframes){var r=e.keyframes[n].value1;t.push(r)}return t},e.prototype._createRotationTrack=function(e){var t=this._createRotationTrackName(e),n=this._createKeyframeSecsArr(e.keyframes),r=this._createRotationTrackData(e);return new a.VectorKeyframeTrack(t,n,r)},e.prototype._createRotationTrackName=function(e){return this._getObjNameFromIndex(e.objIndex)+".rotation["+this._getDimensionProperty(e.dimension)+"]"},e.prototype._createRotationTrackData=function(e){var t=[];for(var n in e.keyframes){var r=e.keyframes[n].value1,i=o.degreesToRadians(r);t.push(i)}return t},e.prototype._createQuaternion=function(e,t){var n=new a.Quaternion,s=o.degreesToRadians(t),l=i.MTNX.Dimension;switch(e){case l.X:n.setFromAxisAngle(new a.Vector3(1,0,0),s);break;case l.Y:n.setFromAxisAngle(new a.Vector3(0,1,0),s);break;case l.Z:n.setFromAxisAngle(new a.Vector3(0,0,1),s);break;default:console.warn("Didn't set quaternion value for "+r.$$hex(e))}return n},e.prototype._createScaleTrack=function(e){var t=this._createScaleTrackName(e),n=this._createKeyframeSecsArr(e.keyframes),r=this._createScaleTrackData(e);return new a.VectorKeyframeTrack(t,n,r)},e.prototype._createScaleTrackName=function(e){return this._getObjNameFromIndex(e.objIndex)+".scale["+this._getDimensionProperty(e.dimension)+"]"},e.prototype._createScaleTrackData=function(e){var t=[];for(var n in e.keyframes){var r=e.keyframes[n].value1;t.push(r)}return t},e.prototype._createKeyframeSecsArr=function(e){var t=[];for(var n in e)t.push(this._framesToSeconds(parseInt(n)));return t},e.prototype._getDimensionProperty=function(e){var t=i.MTNX.Dimension;switch(e){case t.X:return"x";case t.Y:return"y";case t.Z:return"z"}throw"Unknown dimension "+r.$$hex(e)},e.prototype._getObjNameFromIndex=function(e){for(var t=-1,n=this.form.OBJ1[0].parsed.objects,i=0;i<n.length;i++)if(61===n[i].objType&&++t===e)return r.$$hex(n[i].globalIndex);return console.warn("Couldn't find associated object "+e+" for track"),r.$$hex(e)},e.prototype._framesToSeconds=function(e){return e/60},e.prototype._adjustTrackOrder=function(e){},e}();t.MtnxToThreeJs=s},function(e,t,n){"use strict";var r=n(48),i=n(8),a=n(21),o=n(176),s=n(177),l=n(107),c=n(360),u=n(361),d=n(80),p=n(373),f=function(e,t,n){var r,o=i.getTypeOf(t),u=i.extend(n||{},s);u.date=u.date||new Date,null!==u.compression&&(u.compression=u.compression.toUpperCase()),"string"==typeof u.unixPermissions&&(u.unixPermissions=parseInt(u.unixPermissions,8)),u.unixPermissions&&16384&u.unixPermissions&&(u.dir=!0),u.dosPermissions&&16&u.dosPermissions&&(u.dir=!0),u.dir&&(e=m(e)),u.createFolders&&(r=h(e))&&_.call(this,r,!0);var f="string"===o&&!1===u.binary&&!1===u.base64;n&&void 0!==n.binary||(u.binary=!f),(t instanceof l&&0===t.uncompressedSize||u.dir||!t||0===t.length)&&(u.base64=!1,u.binary=!0,t="",u.compression="STORE",o="string");var g=null;g=t instanceof l||t instanceof a?t:d.isNode&&d.isStream(t)?new p(e,t):i.prepareContent(e,t,u.binary,u.optimizedBinaryString,u.base64);var v=new c(e,g,u);this.files[e]=v},h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},_=function(e,t){return t=void 0!==t?t:s.createFolders,e=m(e),this.files[e]||f.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1===arguments.length){if(g(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,f.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(g(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=_.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var s=n.comment||this.comment||"";t=u.generateWorker(this,n,s)}catch(e){(t=new a("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=v},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),l=0,u=o>0?r-4:r,d=0;d<u;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===o&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[l++]=255&t);1===o&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(u(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,p=n?-1:1,f=e[t+d];for(d+=p,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=c}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+f]=255&o,f+=h,o/=256,c-=8);e[n+f-h]|=128*m}},function(e,t,n){e.exports=i;var r=n(104).EventEmitter;function i(){r.call(this)}n(49)(i,r),i.Readable=n(105),i.Writable=n(351),i.Duplex=n(352),i.Transform=n(353),i.PassThrough=n(354),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",c),e.on("error",c),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){"use strict";var r=n(79).Buffer,i=n(348);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,a=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=a,i=s,t.copy(n,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(12))},function(e,t,n){"use strict";e.exports=a;var r=n(174),i=n(65);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(49),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(106)},function(e,t,n){e.exports=n(40)},function(e,t,n){e.exports=n(105).Transform},function(e,t,n){e.exports=n(105).PassThrough},function(e,t,n){"use strict";(function(t){e.exports="function"==typeof t?t:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,n(172).setImmediate)},function(e,t,n){"use strict";var r=n(357);function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return a.reject(e,t)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)})}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var o=h(function(){t(i,r)});"error"===o.status&&r(o.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=c,c.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t));return n},u.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){a.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=h(p,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return a.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=new Array(n),s=0,l=-1,c=new this(i);for(;++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then(function(e){o[i]=e,++s!==n||r||(r=!0,a.resolve(c,o))},function(e){r||(r=!0,a.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,s=new this(i);for(;++o<n;)l=e[o],t.resolve(l).then(function(e){r||(r=!0,a.resolve(s,e))},function(e){r||(r=!0,a.reject(s,e))});var l;return s}},function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(u),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}e.exports=function(e){1!==c.push(e)||r||n()}}).call(this,n(12))},function(e,t,n){"use strict";var r=n(21),i=n(8);function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},e.exports=a},function(e,t,n){"use strict";var r=n(168).Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}n(8).inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},function(e,t,n){"use strict";var r=n(176),i=n(178),a=n(48),o=n(107),s=n(21),l=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&i&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new r(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)l.prototype[c[d]]=u;e.exports=l},function(e,t,n){"use strict";var r=n(181),i=n(372);t.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)}),a.entriesCount=o}catch(e){a.error(e)}return a}},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(363),a=n(8),o=n(21),s=r?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic="\b\0",a.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},function(e,t,n){"use strict";var r={};(0,n(35).assign)(r,n(364),n(367),n(186)),e.exports=r},function(e,t,n){"use strict";var r=n(365),i=n(35),a=n(184),o=n(109),s=n(185),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,h))!==c)throw new Error(o[n]);this._dict_set=!0}}function h(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,o))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),s.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=h,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},function(e,t,n){"use strict";var r,i=n(35),a=n(366),o=n(182),s=n(183),l=n(109),c=0,u=1,d=3,p=4,f=5,h=0,m=1,_=-2,g=-3,v=-5,y=-1,A=1,x=2,S=3,b=4,w=0,E=2,P=8,C=9,T=15,V=8,F=286,D=30,O=19,R=2*F+1,M=15,L=3,B=258,k=B+L+1,I=32,j=42,N=69,U=73,z=91,G=103,W=113,H=666,q=1,K=2,Y=3,$=4,X=3;function Z(e,t){return e.msg=l[t],t}function J(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function re(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+B,f=c[a+o-1],h=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===h&&c[n+o-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<p);if(r=B-(p-a),a=p-B,r>o){if(e.match_start=t,o=r,r>=s)break;f=c[a+o-1],h=c[a+o]}}}while((t=d[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function ae(e){var t,n,r,a,l,c,u,d,p,f,h=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-k)){i.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=h?r-h:0}while(--n);t=n=h;do{r=e.prev[--t],e.prev[t]=r>=h?r-h:0}while(--n);a+=h}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=a,f=void 0,(f=c.avail_in)>p&&(f=p),n=0===f?0:(c.avail_in-=f,i.arraySet(u,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=o(c.adler,u,f,d):2===c.state.wrap&&(c.adler=s(c.adler,u,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=L)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+L-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<L)););}while(e.lookahead<k&&0!==e.strm.avail_in)}function oe(e,t){for(var n,r;;){if(e.lookahead<k){if(ae(e),e.lookahead<k&&t===c)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=L&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+L-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-k&&(e.match_length=ie(e,n)),e.match_length>=L)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-L),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=L){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+L-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=e.strstart<L-1?e.strstart:L-1,t===p?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function se(e,t){for(var n,r,i;;){if(e.lookahead<k){if(ae(e),e.lookahead<k&&t===c)return q;if(0===e.lookahead)break}if(n=0,e.lookahead>=L&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+L-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=L-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-k&&(e.match_length=ie(e,n),e.match_length<=5&&(e.strategy===A||e.match_length===L&&e.strstart-e.match_start>4096)&&(e.match_length=L-1)),e.prev_length>=L&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-L,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-L),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+L-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=L-1,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return q}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<L-1?e.strstart:L-1,t===p?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}function le(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*D+1)),this.bl_tree=new i.Buf16(2*(2*O+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(M+1),this.heap=new i.Buf16(2*F+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*F+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=E,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?j:W,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),h):Z(e,_)}function de(e){var t,n=ue(e);return n===h&&((t=e.state).window_size=2*t.w_size,Q(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=L-1,t.match_available=0,t.ins_h=0),n}function pe(e,t,n,r,a,o){if(!e)return _;var s=1;if(t===y&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>C||n!==P||r<8||r>15||t<0||t>9||o<0||o>b)return Z(e,_);8===r&&(r=9);var l=new ce;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+L-1)/L),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,de(e)}r=[new le(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ae(e),0===e.lookahead&&t===c)return q;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,te(e,!1),0===e.strm.avail_out))return q;if(e.strstart-e.block_start>=e.w_size-k&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?Y:$):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),q)}),new le(4,4,8,4,oe),new le(4,5,16,8,oe),new le(4,6,32,32,oe),new le(4,4,16,16,se),new le(8,16,32,32,se),new le(8,16,128,128,se),new le(8,32,128,256,se),new le(32,128,258,1024,se),new le(32,258,258,4096,se)],t.deflateInit=function(e,t){return pe(e,t,P,T,V,w)},t.deflateInit2=pe,t.deflateReset=de,t.deflateResetKeep=ue,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?_:(e.state.gzhead=t,h):_},t.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||t>f||t<0)return e?Z(e,_):_;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===H&&t!==p)return Z(e,0===e.avail_out?v:_);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===j)if(2===i.wrap)e.adler=0,ne(i,31),ne(i,139),ne(i,8),i.gzhead?(ne(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),ne(i,255&i.gzhead.time),ne(i,i.gzhead.time>>8&255),ne(i,i.gzhead.time>>16&255),ne(i,i.gzhead.time>>24&255),ne(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),ne(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(ne(i,255&i.gzhead.extra.length),ne(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=N):(ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),ne(i,X),i.status=W);else{var g=P+(i.w_bits-8<<4)<<8;g|=(i.strategy>=x||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=I),g+=31-g%31,i.status=W,re(i,g),0!==i.strstart&&(re(i,e.adler>>>16),re(i,65535&e.adler)),e.adler=1}if(i.status===N)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending!==i.pending_buf_size));)ne(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,ne(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=z)}else i.status=z;if(i.status===z)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,ne(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=G)}else i.status=G;if(i.status===G&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(ne(i,255&e.adler),ne(i,e.adler>>8&255),e.adler=0,i.status=W)):i.status=W),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&J(t)<=J(n)&&t!==p)return Z(e,v);if(i.status===H&&0!==e.avail_in)return Z(e,v);if(0!==e.avail_in||0!==i.lookahead||t!==c&&i.status!==H){var y=i.strategy===x?function(e,t){for(var n;;){if(0===e.lookahead&&(ae(e),0===e.lookahead)){if(t===c)return q;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}(i,t):i.strategy===S?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=B){if(ae(e),e.lookahead<=B&&t===c)return q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=L&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+B;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=B-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=L?(n=a._tr_tally(e,1,e.match_length-L),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?Y:$):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:K}(i,t):r[i.level].func(i,t);if(y!==Y&&y!==$||(i.status=H),y===q||y===Y)return 0===e.avail_out&&(i.last_flush=-1),h;if(y===K&&(t===u?a._tr_align(i):t!==f&&(a._tr_stored_block(i,0,0,!1),t===d&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,h}return t!==p?h:i.wrap<=0?m:(2===i.wrap?(ne(i,255&e.adler),ne(i,e.adler>>8&255),ne(i,e.adler>>16&255),ne(i,e.adler>>24&255),ne(i,255&e.total_in),ne(i,e.total_in>>8&255),ne(i,e.total_in>>16&255),ne(i,e.total_in>>24&255)):(re(i,e.adler>>>16),re(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?h:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==j&&t!==N&&t!==U&&t!==z&&t!==G&&t!==W&&t!==H?Z(e,_):(e.state=null,t===W?Z(e,g):h):_},t.deflateSetDictionary=function(e,t){var n,r,a,s,l,c,u,d,p=t.length;if(!e||!e.state)return _;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==j||n.lookahead)return _;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,ae(n);n.lookahead>=L;){r=n.strstart,a=n.lookahead-(L-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+L-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=L-1,ae(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=L-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,h},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(35),i=4,a=0,o=1,s=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,u=1,d=2,p=29,f=256,h=f+1+p,m=30,_=19,g=2*h+1,v=15,y=16,A=7,x=256,S=16,b=17,w=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(h+2));l(V);var F=new Array(2*m);l(F);var D=new Array(512);l(D);var O=new Array(256);l(O);var R=new Array(p);l(R);var M,L,B,k=new Array(m);function I(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function j(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?D[e]:D[256+(e>>>7)]}function U(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,n){e.bi_valid>y-n?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=n-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function G(e,t,n){z(e,n[2*t],n[2*t+1])}function W(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function H(e,t,n){var r,i,a=new Array(v+1),o=0;for(r=1;r<=v;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=W(a[s]++,s))}}function q(e){var t;for(t=0;t<h;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<_;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*x]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function K(e){e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function $(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function X(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?G(e,i,t):(G(e,(a=O[i])+f+1,t),0!==(o=E[a])&&z(e,i-=R[a],o),G(e,a=N(--r),n),0!==(o=P[a])&&z(e,r-=k[a],o))}while(s<e.last_lit);G(e,x,t)}function Z(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=g,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)$(e,a,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,$(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,h=t.stat_desc.max_length,m=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<g;n++)(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)>h&&(a=h,m++),l[2*r+1]=a,r>c||(e.bl_count[a]++,o=0,r>=f&&(o=p[r-f]),s=l[2*r],e.opt_len+=s*(a+o),d&&(e.static_len+=s*(u[2*r+1]+o)));if(0!==m){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,m-=2}while(m>0);for(a=h;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>c||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(e,t),H(a,c,e.bl_count)}function J(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*S]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function Q(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{G(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(G(e,i,e.bl_tree),s--),G(e,S,e.bl_tree),z(e,s-3,2)):s<=10?(G(e,b,e.bl_tree),z(e,s-3,3)):(G(e,w,e.bl_tree),z(e,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}l(k);var ee=!1;function te(e,t,n,i){z(e,(c<<1)+(i?1:0),3),function(e,t,n,i){K(e),i&&(U(e,n),U(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(function(){var e,t,n,r,i,a=new Array(v+1);for(n=0,r=0;r<p-1;r++)for(R[r]=n,e=0;e<1<<E[r];e++)O[n++]=r;for(O[n-1]=r,i=0,r=0;r<16;r++)for(k[r]=i,e=0;e<1<<P[r];e++)D[i++]=r;for(i>>=7;r<m;r++)for(k[r]=i<<7,e=0;e<1<<P[r]-7;e++)D[256+i++]=r;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)V[2*e+1]=8,e++,a[8]++;for(;e<=255;)V[2*e+1]=9,e++,a[9]++;for(;e<=279;)V[2*e+1]=7,e++,a[7]++;for(;e<=287;)V[2*e+1]=8,e++,a[8]++;for(H(V,h+1,a),e=0;e<m;e++)F[2*e+1]=5,F[2*e]=W(e,5);M=new I(V,E,f+1,h,v),L=new I(F,P,0,m,v),B=new I(new Array(0),C,0,_,A)}(),ee=!0),e.l_desc=new j(e.dyn_ltree,M),e.d_desc=new j(e.dyn_dtree,L),e.bl_desc=new j(e.bl_tree,B),e.bi_buf=0,e.bi_valid=0,q(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,r){var l,c,p=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return o;return a}(e)),Z(e,e.l_desc),Z(e,e.d_desc),p=function(e){var t;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),Z(e,e.bl_desc),t=_-1;t>=3&&0===e.bl_tree[2*T[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),l=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==t?te(e,t,n,r):e.strategy===i||c===l?(z(e,(u<<1)+(r?1:0),3),X(e,V,F)):(z(e,(d<<1)+(r?1:0),3),function(e,t,n,r){var i;for(z(e,t-257,5),z(e,n-1,5),z(e,r-4,4),i=0;i<r;i++)z(e,e.bl_tree[2*T[i]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,p+1),X(e,e.dyn_ltree,e.dyn_dtree)),q(e),r&&K(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(O[n]+f+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){z(e,u<<1,3),G(e,x,V),function(e){16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var r=n(368),i=n(35),a=n(184),o=n(186),s=n(109),l=n(185),c=n(371),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,c,d,p,f=this.strm,h=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(h),f.next_out=0,f.avail_out=h),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(p="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,p)),n===o.Z_BUF_ERROR&&!0===_&&(n=o.Z_OK,_=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),c=f.next_out-l,d=a.buf2string(f.output,l),f.next_out=c,f.avail_out=h-c,c&&i.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(_=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},function(e,t,n){"use strict";var r=n(35),i=n(182),a=n(183),o=n(369),s=n(370),l=0,c=1,u=2,d=4,p=5,f=6,h=0,m=1,_=2,g=-2,v=-3,y=-4,A=-5,x=8,S=1,b=2,w=3,E=4,P=5,C=6,T=7,V=8,F=9,D=10,O=11,R=12,M=13,L=14,B=15,k=16,I=17,j=18,N=19,U=20,z=21,G=22,W=23,H=24,q=25,K=26,Y=27,$=28,X=29,Z=30,J=31,Q=32,ee=852,te=592,ne=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ae(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(ee),t.distcode=t.distdyn=new r.Buf32(te),t.sane=1,t.back=-1,h):g}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ae(e)):g}function se(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,oe(e))):g}function le(e,t){var n,r;return e?(r=new ie,e.state=r,r.window=null,(n=se(e,t))!==h&&(e.state=null),n):g}var ce,ue,de=!0;function pe(e){if(de){var t;for(ce=new r.Buf32(512),ue=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,ue,0,e.work,{bits:5}),de=!1}e.lencode=ce,e.lenbits=9,e.distcode=ue,e.distbits=5}function fe(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=oe,t.inflateReset2=se,t.inflateResetKeep=ae,t.inflateInit=function(e){return le(e,ne)},t.inflateInit2=le,t.inflate=function(e,t){var n,ee,te,ne,ie,ae,oe,se,le,ce,ue,de,he,me,_e,ge,ve,ye,Ae,xe,Se,be,we,Ee,Pe=0,Ce=new r.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return g;(n=e.state).mode===R&&(n.mode=M),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,le=n.bits,ce=ae,ue=oe,be=h;e:for(;;)switch(n.mode){case S:if(0===n.wrap){n.mode=M;break}for(;le<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(2&n.wrap&&35615===se){n.check=0,Ce[0]=255&se,Ce[1]=se>>>8&255,n.check=a(n.check,Ce,2,0),se=0,le=0,n.mode=b;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=Z;break}if((15&se)!==x){e.msg="unknown compression method",n.mode=Z;break}if(le-=4,Se=8+(15&(se>>>=4)),0===n.wbits)n.wbits=Se;else if(Se>n.wbits){e.msg="invalid window size",n.mode=Z;break}n.dmax=1<<Se,e.adler=n.check=1,n.mode=512&se?D:R,se=0,le=0;break;case b:for(;le<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(n.flags=se,(255&n.flags)!==x){e.msg="unknown compression method",n.mode=Z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Z;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,n.check=a(n.check,Ce,2,0)),se=0,le=0,n.mode=w;case w:for(;le<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.time=se),512&n.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,Ce[2]=se>>>16&255,Ce[3]=se>>>24&255,n.check=a(n.check,Ce,4,0)),se=0,le=0,n.mode=E;case E:for(;le<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,n.check=a(n.check,Ce,2,0)),se=0,le=0,n.mode=P;case P:if(1024&n.flags){for(;le<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,n.check=a(n.check,Ce,2,0)),se=0,le=0}else n.head&&(n.head.extra=null);n.mode=C;case C:if(1024&n.flags&&((de=n.length)>ae&&(de=ae),de&&(n.head&&(Se=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,ee,ne,de,Se)),512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,n.length-=de),n.length))break e;n.length=0,n.mode=T;case T:if(2048&n.flags){if(0===ae)break e;de=0;do{Se=ee[ne+de++],n.head&&Se&&n.length<65536&&(n.head.name+=String.fromCharCode(Se))}while(Se&&de<ae);if(512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,Se)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=V;case V:if(4096&n.flags){if(0===ae)break e;de=0;do{Se=ee[ne+de++],n.head&&Se&&n.length<65536&&(n.head.comment+=String.fromCharCode(Se))}while(Se&&de<ae);if(512&n.flags&&(n.check=a(n.check,ee,de,ne)),ae-=de,ne+=de,Se)break e}else n.head&&(n.head.comment=null);n.mode=F;case F:if(512&n.flags){for(;le<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Z;break}se=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=R;break;case D:for(;le<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}e.adler=n.check=re(se),se=0,le=0,n.mode=O;case O:if(0===n.havedict)return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=le,_;e.adler=n.check=1,n.mode=R;case R:if(t===p||t===f)break e;case M:if(n.last){se>>>=7&le,le-=7&le,n.mode=Y;break}for(;le<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}switch(n.last=1&se,le-=1,3&(se>>>=1)){case 0:n.mode=L;break;case 1:if(pe(n),n.mode=U,t===f){se>>>=2,le-=2;break e}break;case 2:n.mode=I;break;case 3:e.msg="invalid block type",n.mode=Z}se>>>=2,le-=2;break;case L:for(se>>>=7&le,le-=7&le;le<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Z;break}if(n.length=65535&se,se=0,le=0,n.mode=B,t===f)break e;case B:n.mode=k;case k:if(de=n.length){if(de>ae&&(de=ae),de>oe&&(de=oe),0===de)break e;r.arraySet(te,ee,ne,de,ie),ae-=de,ne+=de,oe-=de,ie+=de,n.length-=de;break}n.mode=R;break;case I:for(;le<14;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(n.nlen=257+(31&se),se>>>=5,le-=5,n.ndist=1+(31&se),se>>>=5,le-=5,n.ncode=4+(15&se),se>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Z;break}n.have=0,n.mode=j;case j:for(;n.have<n.ncode;){for(;le<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.lens[Te[n.have++]]=7&se,se>>>=3,le-=3}for(;n.have<19;)n.lens[Te[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,we={bits:n.lenbits},be=s(l,n.lens,0,19,n.lencode,0,n.work,we),n.lenbits=we.bits,be){e.msg="invalid code lengths set",n.mode=Z;break}n.have=0,n.mode=N;case N:for(;n.have<n.nlen+n.ndist;){for(;ge=(Pe=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ve=65535&Pe,!((_e=Pe>>>24)<=le);){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(ve<16)se>>>=_e,le-=_e,n.lens[n.have++]=ve;else{if(16===ve){for(Ee=_e+2;le<Ee;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(se>>>=_e,le-=_e,0===n.have){e.msg="invalid bit length repeat",n.mode=Z;break}Se=n.lens[n.have-1],de=3+(3&se),se>>>=2,le-=2}else if(17===ve){for(Ee=_e+3;le<Ee;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}le-=_e,Se=0,de=3+(7&(se>>>=_e)),se>>>=3,le-=3}else{for(Ee=_e+7;le<Ee;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}le-=_e,Se=0,de=11+(127&(se>>>=_e)),se>>>=7,le-=7}if(n.have+de>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Z;break}for(;de--;)n.lens[n.have++]=Se}}if(n.mode===Z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Z;break}if(n.lenbits=9,we={bits:n.lenbits},be=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,we),n.lenbits=we.bits,be){e.msg="invalid literal/lengths set",n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,we={bits:n.distbits},be=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,we),n.distbits=we.bits,be){e.msg="invalid distances set",n.mode=Z;break}if(n.mode=U,t===f)break e;case U:n.mode=z;case z:if(ae>=6&&oe>=258){e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=le,o(e,ue),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,le=n.bits,n.mode===R&&(n.back=-1);break}for(n.back=0;ge=(Pe=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ve=65535&Pe,!((_e=Pe>>>24)<=le);){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(ge&&0==(240&ge)){for(ye=_e,Ae=ge,xe=ve;ge=(Pe=n.lencode[xe+((se&(1<<ye+Ae)-1)>>ye)])>>>16&255,ve=65535&Pe,!(ye+(_e=Pe>>>24)<=le);){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}se>>>=ye,le-=ye,n.back+=ye}if(se>>>=_e,le-=_e,n.back+=_e,n.length=ve,0===ge){n.mode=K;break}if(32&ge){n.back=-1,n.mode=R;break}if(64&ge){e.msg="invalid literal/length code",n.mode=Z;break}n.extra=15&ge,n.mode=G;case G:if(n.extra){for(Ee=n.extra;le<Ee;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;ge=(Pe=n.distcode[se&(1<<n.distbits)-1])>>>16&255,ve=65535&Pe,!((_e=Pe>>>24)<=le);){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(0==(240&ge)){for(ye=_e,Ae=ge,xe=ve;ge=(Pe=n.distcode[xe+((se&(1<<ye+Ae)-1)>>ye)])>>>16&255,ve=65535&Pe,!(ye+(_e=Pe>>>24)<=le);){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}se>>>=ye,le-=ye,n.back+=ye}if(se>>>=_e,le-=_e,n.back+=_e,64&ge){e.msg="invalid distance code",n.mode=Z;break}n.offset=ve,n.extra=15&ge,n.mode=H;case H:if(n.extra){for(Ee=n.extra;le<Ee;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Z;break}n.mode=q;case q:if(0===oe)break e;if(de=ue-oe,n.offset>de){if((de=n.offset-de)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Z;break}de>n.wnext?(de-=n.wnext,he=n.wsize-de):he=n.wnext-de,de>n.length&&(de=n.length),me=n.window}else me=te,he=ie-n.offset,de=n.length;de>oe&&(de=oe),oe-=de,n.length-=de;do{te[ie++]=me[he++]}while(--de);0===n.length&&(n.mode=z);break;case K:if(0===oe)break e;te[ie++]=n.length,oe--,n.mode=z;break;case Y:if(n.wrap){for(;le<32;){if(0===ae)break e;ae--,se|=ee[ne++]<<le,le+=8}if(ue-=oe,e.total_out+=ue,n.total+=ue,ue&&(e.adler=n.check=n.flags?a(n.check,te,ue,ie-ue):i(n.check,te,ue,ie-ue)),ue=oe,(n.flags?se:re(se))!==n.check){e.msg="incorrect data check",n.mode=Z;break}se=0,le=0}n.mode=$;case $:if(n.wrap&&n.flags){for(;le<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<le,le+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Z;break}se=0,le=0}n.mode=X;case X:be=m;break e;case Z:be=v;break e;case J:return y;case Q:default:return g}return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=le,(n.wsize||ue!==e.avail_out&&n.mode<Z&&(n.mode<Y||t!==d))&&fe(e,e.output,e.next_out,ue-e.avail_out)?(n.mode=J,y):(ce-=e.avail_in,ue-=e.avail_out,e.total_in+=ce,e.total_out+=ue,n.total+=ue,n.wrap&&ue&&(e.adler=n.check=n.flags?a(n.check,te,ue,e.next_out-ue):i(n.check,te,ue,e.next_out-ue)),e.data_type=n.bits+(n.last?64:0)+(n.mode===R?128:0)+(n.mode===U||n.mode===B?256:0),(0===ce&&0===ue||t===d)&&be===h&&(be=A),be)},t.inflateEnd=function(e){if(!e||!e.state)return g;var t=e.state;return t.window&&(t.window=null),e.state=null,h},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?g:(n.head=t,t.done=!1,h):g},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==O?g:n.mode===O&&i(1,t,r,0)!==n.check?v:fe(e,t,r,r)?(n.mode=J,y):(n.havedict=1,h):g},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,l,c,u,d,p,f,h,m,_,g,v,y,A,x,S,b,w,E,P;n=e.state,r=e.next_in,E=e.input,i=r+(e.avail_in-5),a=e.next_out,P=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,p=n.window,f=n.hold,h=n.bits,m=n.lencode,_=n.distcode,g=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{h<15&&(f+=E[r++]<<h,h+=8,f+=E[r++]<<h,h+=8),y=m[f&g];t:for(;;){if(f>>>=A=y>>>24,h-=A,0===(A=y>>>16&255))P[a++]=65535&y;else{if(!(16&A)){if(0==(64&A)){y=m[(65535&y)+(f&(1<<A)-1)];continue t}if(32&A){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&y,(A&=15)&&(h<A&&(f+=E[r++]<<h,h+=8),x+=f&(1<<A)-1,f>>>=A,h-=A),h<15&&(f+=E[r++]<<h,h+=8,f+=E[r++]<<h,h+=8),y=_[f&v];n:for(;;){if(f>>>=A=y>>>24,h-=A,!(16&(A=y>>>16&255))){if(0==(64&A)){y=_[(65535&y)+(f&(1<<A)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&y,h<(A&=15)&&(f+=E[r++]<<h,(h+=8)<A&&(f+=E[r++]<<h,h+=8)),(S+=f&(1<<A)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=A,h-=A,S>(A=a-o)){if((A=S-A)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(b=0,w=p,0===d){if(b+=c-A,A<x){x-=A;do{P[a++]=p[b++]}while(--A);b=a-S,w=P}}else if(d<A){if(b+=c+d-A,(A-=d)<x){x-=A;do{P[a++]=p[b++]}while(--A);if(b=0,d<x){x-=A=d;do{P[a++]=p[b++]}while(--A);b=a-S,w=P}}}else if(b+=d-A,A<x){x-=A;do{P[a++]=p[b++]}while(--A);b=a-S,w=P}for(;x>2;)P[a++]=w[b++],P[a++]=w[b++],P[a++]=w[b++],x-=3;x&&(P[a++]=w[b++],x>1&&(P[a++]=w[b++]))}else{b=a-S;do{P[a++]=P[b++],P[a++]=P[b++],P[a++]=P[b++],x-=3}while(x>2);x&&(P[a++]=P[b++],x>1&&(P[a++]=P[b++]))}break}}break}}while(r<i&&a<s);r-=x=h>>3,f&=(1<<(h-=x<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=f,n.bits=h}},function(e,t,n){"use strict";var r=n(35),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,u,d,p){var f,h,m,_,g,v,y,A,x,S=p.bits,b=0,w=0,E=0,P=0,C=0,T=0,V=0,F=0,D=0,O=0,R=null,M=0,L=new r.Buf16(16),B=new r.Buf16(16),k=null,I=0;for(b=0;b<=15;b++)L[b]=0;for(w=0;w<l;w++)L[t[n+w]]++;for(C=S,P=15;P>=1&&0===L[P];P--);if(C>P&&(C=P),0===P)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(E=1;E<P&&0===L[E];E++);for(C<E&&(C=E),F=1,b=1;b<=15;b++)if(F<<=1,(F-=L[b])<0)return-1;if(F>0&&(0===e||1!==P))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+L[b];for(w=0;w<l;w++)0!==t[n+w]&&(d[B[t[n+w]]++]=w);if(0===e?(R=k=d,v=19):1===e?(R=i,M-=257,k=a,I-=257,v=256):(R=o,k=s,v=-1),O=0,w=0,b=E,g=u,T=C,V=0,m=-1,_=(D=1<<C)-1,1===e&&D>852||2===e&&D>592)return 1;for(;;){y=b-V,d[w]<v?(A=0,x=d[w]):d[w]>v?(A=k[I+d[w]],x=R[M+d[w]]):(A=96,x=0),f=1<<b-V,E=h=1<<T;do{c[g+(O>>V)+(h-=f)]=y<<24|A<<16|x|0}while(0!==h);for(f=1<<b-1;O&f;)f>>=1;if(0!==f?(O&=f-1,O+=f):O=0,w++,0==--L[b]){if(b===P)break;b=t[n+d[w]]}if(b>C&&(O&_)!==m){for(0===V&&(V=C),g+=E,F=1<<(T=b-V);T+V<P&&!((F-=L[T+V])<=0);)T++,F<<=1;if(D+=1<<T,1===e&&D>852||2===e&&D>592)return 1;c[m=O&_]=C<<24|T<<16|g-u|0}}return 0!==O&&(c[g+O]=b-V<<24|64<<16|0),p.bits=C,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var r=n(8),i=n(21),a=n(48),o=n(108),s=n(187),l=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},c=function(e,t,n,i,c,u){var d,p,f=e.file,h=e.compression,m=u!==a.utf8encode,_=r.transformTo("string",u(f.name)),g=r.transformTo("string",a.utf8encode(f.name)),v=f.comment,y=r.transformTo("string",u(v)),A=r.transformTo("string",a.utf8encode(v)),x=g.length!==f.name.length,S=A.length!==v.length,b="",w="",E="",P=f.dir,C=f.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var V=0;t&&(V|=8),m||!x&&!S||(V|=2048);var F,D,O,R=0,M=0;P&&(R|=16),"UNIX"===c?(M=798,R|=(F=f.unixPermissions,D=P,O=F,F||(O=D?16893:33204),(65535&O)<<16)):(M=20,R|=63&(f.dosPermissions||0)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,p=C.getUTCFullYear()-1980,p<<=4,p|=C.getUTCMonth()+1,p<<=5,p|=C.getUTCDate(),x&&(w=l(1,1)+l(o(_),4)+g,b+="up"+l(w.length,2)+w),S&&(E=l(1,1)+l(o(y),4)+A,b+="uc"+l(E.length,2)+E);var L="";return L+="\n\0",L+=l(V,2),L+=h.magic,L+=l(d,2),L+=l(p,2),L+=l(T.crc32,4),L+=l(T.compressedSize,4),L+=l(T.uncompressedSize,4),L+=l(_.length,2),L+=l(b.length,2),{fileRecord:s.LOCAL_FILE_HEADER+L+_+b,dirRecord:s.CENTRAL_FILE_HEADER+l(M,2)+L+l(y.length,2)+"\0\0\0\0"+l(R,4)+l(i,4)+_+b+y}},u=function(e){return s.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};function d(e,t,n,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(d,i),d.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=c(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=c(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:u(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var o=r.transformTo("string",a(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(o.length,2)+o}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},d.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},d.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=d},function(e,t,n){"use strict";var r=n(8),i=n(21);function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=a},function(e,t,n){"use strict";var r=n(8),i=n(66),a=n(48),o=(r=n(8),n(375)),s=n(180),l=n(80);function c(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}e.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new o(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(c(r[a]));return i.Promise.all(n)}).then(function(e){for(var r=e.shift(),i=r.files,a=0;a<i.length;a++){var o=i[a];n.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n})}},function(e,t,n){"use strict";var r=n(188),i=n(8),a=n(187),o=n(378),s=(n(48),n(34));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},function(e,t,n){"use strict";var r=n(190);function i(e){r.call(this,e)}n(8).inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(191);function i(e){r.call(this,e)}n(8).inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(188),i=n(8),a=n(107),o=n(108),s=n(48),l=n(181),c=n(34);function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=u},function(e,t,n){var r=n(56);r.OrbitControls=function(e,t){var n,i,a,o,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.LEFT,MIDDLE:r.MOUSE.MIDDLE,RIGHT:r.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),f=p.NONE},this.update=(n=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=i.clone().inverse(),o=new r.Vector3,s=new r.Quaternion,function(){var e=l.object.position;return n.copy(e).sub(l.target),n.applyQuaternion(i),m.setFromVector3(n),l.autoRotate&&f===p.NONE&&F(2*Math.PI/60/60*l.autoRotateSpeed),m.theta+=_.theta,m.phi+=_.phi,m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),l.target.add(v),n.setFromSpherical(m),n.applyQuaternion(a),e.copy(l.target).add(n),l.object.lookAt(l.target),!0===l.enableDamping?(_.theta*=1-l.dampingFactor,_.phi*=1-l.dampingFactor,v.multiplyScalar(1-l.dampingFactor)):(_.set(0,0,0),v.set(0,0,0)),g=1,!!(y||o.distanceToSquared(l.object.position)>h||8*(1-s.dot(l.object.quaternion))>h)&&(l.dispatchEvent(c),o.copy(l.object.position),s.copy(l.object.quaternion),y=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",K,!1),l.domElement.removeEventListener("mousedown",j,!1),l.domElement.removeEventListener("wheel",z,!1),l.domElement.removeEventListener("touchstart",W,!1),l.domElement.removeEventListener("touchend",q,!1),l.domElement.removeEventListener("touchmove",H,!1),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",G,!1)};var l=this,c={type:"change"},u={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},f=p.NONE,h=1e-6,m=new r.Spherical,_=new r.Spherical,g=1,v=new r.Vector3,y=!1,A=new r.Vector2,x=new r.Vector2,S=new r.Vector2,b=new r.Vector2,w=new r.Vector2,E=new r.Vector2,P=new r.Vector2,C=new r.Vector2,T=new r.Vector2;function V(){return Math.pow(.95,l.zoomSpeed)}function F(e){_.theta-=e}function D(e){_.phi-=e}var O,R=(O=new r.Vector3,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),v.add(O)}),M=function(){var e=new r.Vector3;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),v.add(e)}}(),L=function(){var e=new r.Vector3;return function(t,n){var r=l.domElement===document?l.domElement.body:l.domElement;if(l.object.isPerspectiveCamera){var i=l.object.position;e.copy(i).sub(l.target);var a=e.length();a*=Math.tan(l.object.fov/2*Math.PI/180),R(2*t*a/r.clientHeight,l.object.matrix),M(2*n*a/r.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(R(t*(l.object.right-l.object.left)/l.object.zoom/r.clientWidth,l.object.matrix),M(n*(l.object.top-l.object.bottom)/l.object.zoom/r.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function B(e){l.object.isPerspectiveCamera?g/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function k(e){l.object.isPerspectiveCamera?g*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function I(e){b.set(e.clientX,e.clientY)}function j(e){if(!1!==l.enabled){switch(e.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),e.button){case l.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;I(e),f=p.PAN}else{if(!1===l.enableRotate)return;!function(e){A.set(e.clientX,e.clientY)}(e),f=p.ROTATE}break;case l.mouseButtons.MIDDLE:if(!1===l.enableZoom)return;!function(e){P.set(e.clientX,e.clientY)}(e),f=p.DOLLY;break;case l.mouseButtons.RIGHT:if(!1===l.enablePan)return;I(e),f=p.PAN}f!==p.NONE&&(document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",U,!1),l.dispatchEvent(u))}}function N(e){if(!1!==l.enabled)switch(e.preventDefault(),f){case p.ROTATE:if(!1===l.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),S.subVectors(x,A).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;F(2*Math.PI*S.x/t.clientHeight),D(2*Math.PI*S.y/t.clientHeight),A.copy(x),l.update()}(e);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(e){C.set(e.clientX,e.clientY),T.subVectors(C,P),T.y>0?B(V()):T.y<0&&k(V()),P.copy(C),l.update()}(e);break;case p.PAN:if(!1===l.enablePan)return;!function(e){w.set(e.clientX,e.clientY),E.subVectors(w,b).multiplyScalar(l.panSpeed),L(E.x,E.y),b.copy(w),l.update()}(e)}}function U(e){!1!==l.enabled&&(document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",U,!1),l.dispatchEvent(d),f=p.NONE)}function z(e){!1===l.enabled||!1===l.enableZoom||f!==p.NONE&&f!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(u),function(e){e.deltaY<0?k(V()):e.deltaY>0&&B(V()),l.update()}(e),l.dispatchEvent(d))}function G(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:L(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:L(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:L(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:L(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function W(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===l.enableRotate)return;!function(e){A.set(e.touches[0].pageX,e.touches[0].pageY)}(e),f=p.TOUCH_ROTATE;break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);P.set(0,r)}if(l.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(i,a)}}(e),f=p.TOUCH_DOLLY_PAN;break;default:f=p.NONE}f!==p.NONE&&l.dispatchEvent(u)}}function H(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===l.enableRotate)return;if(f!==p.TOUCH_ROTATE)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(x,A).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;F(2*Math.PI*S.x/t.clientHeight),D(2*Math.PI*S.y/t.clientHeight),A.copy(x),l.update()}(e);break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;if(f!==p.TOUCH_DOLLY_PAN)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);C.set(0,r),T.set(0,Math.pow(C.y/P.y,l.zoomSpeed)),B(T.y),P.copy(C)}if(l.enablePan){var i=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(i,a),E.subVectors(w,b).multiplyScalar(l.panSpeed),L(E.x,E.y),b.copy(w)}l.update()}(e);break;default:f=p.NONE}}function q(e){!1!==l.enabled&&(l.dispatchEvent(d),f=p.NONE)}function K(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",K,!1),l.domElement.addEventListener("mousedown",j,!1),l.domElement.addEventListener("wheel",z,!1),l.domElement.addEventListener("touchstart",W,!1),l.domElement.addEventListener("touchend",q,!1),l.domElement.addEventListener("touchmove",H,!1),window.addEventListener("keydown",G,!1),this.update()},r.OrbitControls.prototype=Object.create(r.EventDispatcher.prototype),r.OrbitControls.prototype.constructor=r.OrbitControls,Object.defineProperties(r.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),e.exports=t.default=r.OrbitControls},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(81),s=n(37);n(381),n(193);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.el=null,t.codemirror=null,t.onInternalValueChanged=function(e,n){t.props.onChange&&"setValue"!==n.origin&&t.props.onChange(e.getValue(),n)},t.setOptionIfChanged=function(e,t){},t}return i(t,e),t.prototype.render=function(){var e=this;return a.createElement("div",{ref:function(t){e.el=t},className:this.props.className})},t.prototype.componentDidMount=function(){var e=this.el;this.codemirror=o(function(t){e.appendChild(t)},{value:this.props.value||this.props.defaultValue||"",extraKeys:{"Ctrl-Space":"autocomplete"}}),this.codemirror.on("change",this.onInternalValueChanged)},t.prototype.componentWillUnmount=function(){this.codemirror=null},t.prototype.componentWillReceiveProps=function(e){if(this.codemirror&&void 0!==e.value&&e.value!==this.props.value&&s.normalizeLineEndings(this.codemirror.getValue())!==s.normalizeLineEndings(e.value))if(this.props.preserveScrollPosition){var t=this.codemirror.getScrollInfo();this.codemirror.setValue(e.value),this.codemirror.scrollTo(t.left,t.top)}else this.codemirror.setValue(e.value);if("object"==typeof e.options)for(var n in e.options)e.options.hasOwnProperty(n)&&this.setOptionIfChanged(n,e.options[n])},t}(a.Component);t.CodeMirrorWrapper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(54),a=n(81),o=n(110);n(382),n(193),a.registerHelper("hint","mips-pp64",function(e){var t=e.getCursor(),n=e.getTokenAt(t),s=n.string,l=n.start,c=t.ch,u=e.getLine(t.line);if("."===u[0]){return{list:["ascii","asciiz","align","byte","definelabel","else","elseif","endif","fill","float","halfword","if","skip","word"],from:a.Pos(t.line,1),to:a.Pos(t.line,c)}}var d=o.getActiveEditorSupportedGames();function p(e,t){if(!e.length)return[];if(1===e.length)return i.getSymbols(e[0],t);for(var n=i.getSymbols(e[0],t),a=0;a<e.length-1;a++){var o=i.getSymbols(e[a+1],t);n=r.intersection(n,o,function(e,t){return e.name===t.name})}return n}if(/^(j|jal)\s+/i.test(u))return f(p(d,"code"));if(/^\w+\s+/.test(u))return f(p(d));function f(e){var n=e.map(function(e){return e.name}),r=1;s.trim()&&(r=s.lastIndexOf("(")+1,s.substring(r)&&(n=function(e,t){return t.filter(function(t){return t.startsWith(e)})}(s,n)));return{list:n.sort(),from:a.Pos(t.line,l+r),to:a.Pos(t.line,c)}}})},function(e,t,n){!function(e){"use strict";var t="CodeMirror-hint",n="CodeMirror-hint-active";function r(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e.showHint(r)},e.defineExtension("showHint",function(t){t=function(e,t,n){var r=e.options.hintOptions,i={};for(var a in u)i[a]=u[a];if(r)for(var a in r)void 0!==r[a]&&(i[a]=r[a]);if(n)for(var a in n)void 0!==n[a]&&(i[a]=n[a]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}(this,this.getCursor("start"),t);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var i=0;i<n.length;i++)if(n[i].head.line!=n[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var a=this.state.completionActive=new r(this,t);a.options.hint&&(e.signal(this,"startCompletion",this),a.update(!0))}}),e.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},a=window.cancelAnimationFrame||clearTimeout;function o(e){return"string"==typeof e?e:e.text}function s(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function l(r,i){this.completion=r,this.data=i,this.picked=!1;var a=this,l=r.cm,c=l.getInputField().ownerDocument,u=c.defaultView||c.parentWindow,d=this.hints=c.createElement("ul"),p=r.cm.options.theme;d.className="CodeMirror-hints "+p,this.selectedHint=i.selectedHint||0;for(var f=i.list,h=0;h<f.length;++h){var m=d.appendChild(c.createElement("li")),_=f[h],g=t+(h!=this.selectedHint?"":" "+n);null!=_.className&&(g=_.className+" "+g),m.className=g,_.render?_.render(m,i,_):m.appendChild(c.createTextNode(_.displayText||o(_))),m.hintId=h}var v=l.cursorCoords(r.options.alignWithWord?i.from:null),y=v.left,A=v.bottom,x=!0;d.style.left=y+"px",d.style.top=A+"px";var S=u.innerWidth||Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),b=u.innerHeight||Math.max(c.body.offsetHeight,c.documentElement.offsetHeight);(r.options.container||c.body).appendChild(d);var w=d.getBoundingClientRect(),E=w.bottom-b,P=d.scrollHeight>d.clientHeight+1,C=l.getScrollInfo();if(E>0){var T=w.bottom-w.top,V=v.top-(v.bottom-w.top);if(V-T>0)d.style.top=(A=v.top-T)+"px",x=!1;else if(T>b){d.style.height=b-5+"px",d.style.top=(A=v.bottom-w.top)+"px";var F=l.getCursor();i.from.ch!=F.ch&&(v=l.cursorCoords(F),d.style.left=(y=v.left)+"px",w=d.getBoundingClientRect())}}var D,O=w.right-S;if(O>0&&(w.right-w.left>S&&(d.style.width=S-5+"px",O-=w.right-w.left-S),d.style.left=(y=v.left-O)+"px"),P)for(var R=d.firstChild;R;R=R.nextSibling)R.style.paddingRight=l.display.nativeBarWidth+"px";return l.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){t.moveFocus(-1)},n["Ctrl-N"]=function(){t.moveFocus(1)});var r=e.options.customKeys,i=r?{}:n;function a(e,r){var a;a="string"!=typeof r?function(e){return r(e,t)}:n.hasOwnProperty(r)?n[r]:r,i[e]=a}if(r)for(var o in r)r.hasOwnProperty(o)&&a(o,r[o]);var s=e.options.extraKeys;if(s)for(var o in s)s.hasOwnProperty(o)&&a(o,s[o]);return i}(r,{moveFocus:function(e,t){a.changeActive(a.selectedHint+e,t)},setFocus:function(e){a.changeActive(e)},menuSize:function(){return a.screenAmount()},length:f.length,close:function(){r.close()},pick:function(){a.pick()},data:i})),r.options.closeOnUnfocus&&(l.on("blur",this.onBlur=function(){D=setTimeout(function(){r.close()},100)}),l.on("focus",this.onFocus=function(){clearTimeout(D)})),l.on("scroll",this.onScroll=function(){var e=l.getScrollInfo(),t=l.getWrapperElement().getBoundingClientRect(),n=A+C.top-e.top,i=n-(u.pageYOffset||(c.documentElement||c.body).scrollTop);if(x||(i+=d.offsetHeight),i<=t.top||i>=t.bottom)return r.close();d.style.top=n+"px",d.style.left=y+C.left-e.left+"px"}),e.on(d,"dblclick",function(e){var t=s(d,e.target||e.srcElement);t&&null!=t.hintId&&(a.changeActive(t.hintId),a.pick())}),e.on(d,"click",function(e){var t=s(d,e.target||e.srcElement);t&&null!=t.hintId&&(a.changeActive(t.hintId),r.options.completeOnSingleClick&&a.pick())}),e.on(d,"mousedown",function(){setTimeout(function(){l.focus()},20)}),e.signal(i,"select",f[this.selectedHint],d.childNodes[this.selectedHint]),!0}function c(e,t,n,r){if(e.async)e(t,r,n);else{var i=e(t,n);i&&i.then?i.then(r):r(i)}}r.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n];r.hint?r.hint(this.cm,t,r):this.cm.replaceRange(o(r),r.from||t.from,r.to||t.to,"complete"),e.signal(t,"pick",r),this.close()},cursorActivity:function(){this.debounce&&(a(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var n=this;this.debounce=i(function(){n.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;c(this.options.hint,this.cm,this.options,function(r){t.tick==n&&t.finishUpdate(r,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var r=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(r&&1==t.list.length?this.pick(t,0):(this.widget=new l(this,t),e.signal(t,"shown")))}},l.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i&&(i.className=i.className.replace(" "+n,"")),(i=this.hints.childNodes[this.selectedHint=t]).className+=" "+n,i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:function(t,n){var r,i=t.getHelpers(n,"hint");if(i.length){var a=function(e,t,n){var r=function(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}(e,i);!function i(a){if(a==r.length)return t(null);c(r[a],e,n,function(e){e&&e.list.length>0?t(e):i(a+1)})}(0)};return a.async=!0,a.supportsSelection=!0,a}return(r=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:r})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",function(t,n){var r,i=t.getCursor(),a=t.getTokenAt(i),o=e.Pos(i.line,a.start),s=i;a.start<i.ch&&/\w/.test(a.string.charAt(i.ch-a.start-1))?r=a.string.substr(0,i.ch-a.start):(r="",o=i);for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,r.length)==r&&l.push(u)}if(l.length)return{list:l,from:o,to:s}}),e.commands.autocomplete=e.showHint;var u={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}(n(81))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(9),s=n(25),l=n(58),c=n(1),u=n(89),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n}return i(t,e),t.prototype.render=function(){if(this.state.hasError)return a.createElement("p",null,"An error was encountered.");var e,t=[];e=3===o.romhandler.getGameVersion()?l.strings3.getStringCount("en",0):s.strings.getStringCount();for(var n=0;n<e;n++)t.push(a.createElement(p,{strIndex:n}));return a.createElement("div",{className:"stringViewerContainer"},a.createElement("p",null,"This is an experimental strings editor, probably doesn't work yet."),t)},t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0}),console.error(e)},t}(a.Component);t.StringsViewer=d;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editor=null,t.state={hasFocus:!1},t.onValueChanged=function(e,n){if(3!==o.romhandler.getGameVersion()){var r=c.arrayToArrayBuffer(s.strings._strToBytes(n));s.strings.write(t.props.strIndex,r)}},t.onFocus=function(){t.setState({hasFocus:!0})},t.onBlur=function(){t.setState({hasFocus:!1})},t}return i(t,e),t.prototype.render=function(){var e,t=this;return e=3===o.romhandler.getGameVersion()?l.strings3.read("en",0,this.props.strIndex):s.strings.read(this.props.strIndex),a.createElement(u.MPEditor,{ref:function(e){t.editor=e},value:e,displayMode:u.MPEditorDisplayMode.Edit,showToolbar:!0,toolbarPlacement:u.MPEditorToolbarPlacement.Top,onValueChange:this.onValueChanged,onFocus:this.onFocus,onBlur:this.onBlur})},t.prototype.componentDidMount=function(){this.state.hasFocus&&this.editor.focus()},t.prototype.componentDidUpdate=function(){this.state.hasFocus&&this.editor.focus()},t}(a.Component);!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"stringEditorToolbar"})}}(a.Component)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=n(2),s=n(4),l=n(88),c=n(63),u=n(29),d=n(89),p=n(385),f=n(3),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e,t=this.props.boards.map(function(e,t){return s.createElement(m,{key:t,board:e,index:t})});return a.get(a.$setting.uiShowRomBoards)&&(e=o.getROMBoards().map(function(e,t){return s.createElement(m,{key:"r"+t,board:e,index:t})})),s.createElement("div",{className:"boardMenu",role:"listbox"},s.createElement("div",{className:"boardMenuInner",role:"presentation"},t,e))},t}(s.Component);t.BoardMenu=h;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){var e=o.boardIsROM(t.props.board);o.setCurrentBoard(t.props.index,e),f.$$log("Now viewing board",t.props.board)},t.onDragStart=function(e){o.boardIsROM(t.props.board)?e.preventDefault():(l.showDragZone(),e.nativeEvent.dataTransfer.setData("text/plain",t.props.index),l.setDropHandler(function(e){e.preventDefault();var t=parseInt(e.dataTransfer.getData("text/plain"));isNaN(t)||(l.hideDragZone(),o.deleteBoard(t),u.render())}))},t.onDragEnd=function(e){l.hideDragZone()},t.onRightClick=function(e){e.preventDefault();var n=[{title:"Copy",fn:t.onCopyBoard},{title:"Delete",fn:t.onDeleteBoard,visible:!o.boardIsROM(t.props.board)}];p.show(n,e.nativeEvent)},t.onDeleteBoard=function(){o.deleteBoard(t.props.index),u.render()},t.onCopyBoard=function(){o.copyCurrentBoard()},t}return i(t,e),t.prototype.render=function(){var e='Open "'+this.props.board.name+'"',t="boardEntry";o.getCurrentBoard()===this.props.board&&(t+=" boardEntryCurrent");var n,r=this.props.board.otherbg.boardlogo||"";n=r?s.createElement("img",{className:"boardEntryImg",src:r,width:"200",height:"88"}):s.createElement("div",{className:"boardEntryNoImg"});var i=this.props.board.name,a=o.boardIsROM(this.props.board),l=c.makeKeyClick(this.handleClick,this);return s.createElement("div",{className:t,title:e,role:"option",tabIndex:0,onClick:this.handleClick,onKeyDown:l,onContextMenu:this.onRightClick,draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},n,s.createElement(_,{rom:a}),s.createElement(g,{name:i}),s.createElement(v,{rom:a,onDeleteBoard:this.onDeleteBoard,onCopyBoard:this.onCopyBoard}))},t}(s.Component),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return this.props.rom?s.createElement("div",{className:"boardEntryRomIcon",title:"Loaded from ROM"},s.createElement("img",{src:"img/boardmenu/cart.png",width:"26",height:"26"})):null},t}(s.Component),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={editing:!1},t.handleClick=function(){t.setState({editing:!!t.state.editing})},t}return i(t,e),t.prototype.render=function(){return s.createElement("div",{className:"boardName"},s.createElement(d.MPEditor,{value:this.props.name,displayMode:d.MPEditorDisplayMode.Display}))},t}(s.Component),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault();var n=[{title:"Copy",fn:t.props.onCopyBoard},{title:"Delete",fn:t.props.onDeleteBoard,visible:!t.props.rom}];p.show(n,e.nativeEvent)},t}return i(t,e),t.prototype.render=function(){return s.createElement("img",{className:"boardMenuIcon",src:"img/boardmenu/options.png",onClick:this.handleClick})},t}(s.Component)},function(e,t,n){"use strict";var r,i,a;a=function(){var e=null,t="item",n="separator",r=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+e)},i=function(e,r){var i="",a="";return!1===function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return!0==(0===Object.keys(e).length)&&(e.type=n),null==e.type&&(e.type=t),null==e.class&&(e.class=""),!1!==e.visible&&(e.visible=!0),null==e.icon&&(e.icon=null),null==e.title&&(e.title="Undefined"),!0!==e.disabled&&(e.disabled=!1),!0===e.disabled&&(e.class+=" basicContext__item--disabled"),null!=e.fn||e.type===n||!1!==e.disabled||(console.warn("Missing fn for item '"+e.title+"'"),!1)}(e)?"":!1===e.visible?"":(e.num=r,null!==e.icon&&(a="<span class='basicContext__icon "+e.icon+"'></span>"),e.type===t?i="\n\t\t       <tr class='basicContext__item "+e.class+"'>\n\t\t           <td class='basicContext__data' data-num='"+e.num+"'>"+a+e.title+"</td>\n\t\t       </tr>\n\t\t       ":e.type===n&&(i="\n\t\t       <tr class='basicContext__item basicContext__item--separator'></tr>\n\t\t       "),i)},a=function(e){var t="";return t+="\n\t        <div class='basicContextContainer'>\n\t            <div class='basicContext'>\n\t                <table>\n\t                    <tbody>\n\t        ",e.forEach(function(e,n){return t+=i(e,n)}),t+="\n\t                    </tbody>\n\t                </table>\n\t            </div>\n\t        </div>\n\t        "},o=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null!=e.fn&&(!1!==e.visible&&(!0!==e.disabled&&(r("td[data-num='"+e.num+"']").onclick=e.fn,r("td[data-num='"+e.num+"']").oncontextmenu=e.fn,!0)))},s=function(){var e=r();return null!=e&&0!==e.length},l=function(){if(!1===s())return!1;var t=document.querySelector(".basicContextContainer");return t.parentElement.removeChild(t),null!=e&&(document.body.style.overflow=e,e=null),!0};return{ITEM:t,SEPARATOR:n,show:function(t,n,i,s){var c=a(t);document.body.insertAdjacentHTML("beforeend",c),null==e&&(e=document.body.style.overflow,document.body.style.overflow="hidden");var u=r(),d=function(e,t){var n=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={x:e.clientX,y:e.clientY};if("touchend"===e.type&&(null==t.x||null==t.y)){var n=e.changedTouches;null!=n&&n.length>0&&(t.x=n[0].clientX,t.y=n[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t}(e),r=n.x,i=n.y,a=window.innerWidth,o=window.innerHeight,s=t.offsetWidth,l=t.offsetHeight;return r+s>a&&(r-=r+s-a),i+l>o&&(i-=i+l-o),l>o&&(i=0,t.classList.add("basicContext--scrollable")),{x:r,y:i,rx:n.x-r,ry:n.y-i}}(n,u);return u.style.left=d.x+"px",u.style.top=d.y+"px",u.style.transformOrigin=d.rx+"px "+d.ry+"px",u.style.opacity=1,null==i&&(i=l),u.parentElement.onclick=i,u.parentElement.oncontextmenu=i,t.forEach(o),"function"==typeof n.preventDefault&&n.preventDefault(),"function"==typeof n.stopPropagation&&n.stopPropagation(),"function"==typeof s&&s(),!0},visible:s,close:l}},e.exports?e.exports=a():void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(4),s=n(387),l=n(388),c=n(2),u=n(389),d=n(3),p=n(27),f=n(390),h=n(63),m=n(30),_=n(1),g=n(19),v=n(9),y=n(44),A=n(29),x=n(77),S=n(192),b=n(110),w=n(13),E=n(194),P=n(10),C=[{name:"Load ROM",icon:"img/header/romcart.png",type:a.Action.ROM_LOAD,details:"Load a ROM image and read its boards"},{name:"New board",icon:"img/header/newboard.png",type:a.Action.BOARD_NEW,details:"Create a new board",dropdownFn:K},{name:"Import board",icon:"img/header/loadboard.png",type:a.Action.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:"img/header/saveboard.png",type:a.Action.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:"img/header/debug.png",type:a.Action.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:"img/header/screenshot.png",type:a.Action.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:Y},{name:"Events",icon:"img/header/events.png",type:a.Action.EVENTS,details:"View and manage events",advanced:!0},{name:"Settings",icon:"img/header/settings.png",type:a.Action.SETTINGS,details:"Editor settings"},{name:"About",icon:"img/header/about.png",type:a.Action.ABOUT,details:"About PartyPlanner64"}],T=[{name:"Close ROM",icon:"img/header/romclose.png",type:a.Action.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:"img/header/romsave.png",type:a.Action.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"New board",icon:"img/header/newboard.png",type:a.Action.BOARD_NEW,details:"Create a new board",dropdownFn:K},{name:"Import board",icon:"img/header/loadboard.png",type:a.Action.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:"img/header/saveboard.png",type:a.Action.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:"img/header/debug.png",type:a.Action.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:"img/header/screenshot.png",type:a.Action.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:Y},{name:"Events",icon:"img/header/events.png",type:a.Action.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:"img/header/rompatch.png",type:a.Action.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:"img/header/modelviewer.png",type:a.Action.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Audio",icon:"img/header/audio.png",type:a.Action.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:"img/header/settings.png",type:a.Action.SETTINGS,details:"Editor settings"},{name:"About",icon:"img/header/about.png",type:a.Action.ABOUT,details:"About PartyPlanner64"}],V=[{name:"Close ROM",icon:"img/header/romclose.png",type:a.Action.ROM_UNLOAD,details:"Close the ROM file and remove its boards"},{name:"Save ROM",icon:"img/header/romsave.png",type:a.Action.ROM_SAVE,details:"Save changes out to a ROM file"},{name:"Overwrite",icon:"img/header/romoverwrite.png",type:a.Action.BOARD_WRITE,details:"Overwrite a ROM board with the current board",dropdownFn:function(e){var t=f.validateCurrentBoardForOverwrite();return t?t.map(function(t,n){return o.createElement(H,{name:t.name,errors:t.errors,warnings:t.warnings,unavailable:t.unavailable,closeCallback:e,key:n,boardIndex:n})}):null}},{name:"New board",icon:"img/header/newboard.png",type:a.Action.BOARD_NEW,details:"Create a new board",dropdownFn:K},{name:"Import board",icon:"img/header/loadboard.png",type:a.Action.BOARD_LOAD,details:"Import a board file into the editor"},{name:"Export board",icon:"img/header/saveboard.png",type:a.Action.BOARD_SAVE,details:"Export a board file for distribution"},{name:"Debug",icon:"img/header/debug.png",type:a.Action.DEBUG,details:"Debug functionality",advanced:!0},{name:"Screenshot",icon:"img/header/screenshot.png",type:a.Action.SCREENSHOT,details:"Take a screenshot of the current board",dropdownFn:Y},{name:"Events",icon:"img/header/events.png",type:a.Action.EVENTS,details:"View and manage events",advanced:!0},{name:"Patches",icon:"img/header/rompatch.png",type:a.Action.PATCHES,details:"Apply patches to the ROM",advanced:!0},{name:"Model Viewer",icon:"img/header/modelviewer.png",type:a.Action.MODEL_VIEWER,details:"View 3D model data in the ROM"},{name:"Audio",icon:"img/header/audio.png",type:a.Action.AUDIO,details:"Game audio options",advanced:!0},{name:"Settings",icon:"img/header/settings.png",type:a.Action.SETTINGS,details:"Editor settings"},{name:"About",icon:"img/header/about.png",type:a.Action.ABOUT,details:"About PartyPlanner64"}],F=[{name:"Back to editor",icon:"img/header/back.png",type:a.Action.BOARD_EDITOR,details:"Return to the board editor"}],D=F.concat([{name:"Create Event",icon:"img/header/add.png",type:a.Action.CREATEEVENT,details:"Create your own event code"},{name:"Import Event",icon:"img/header/eventload.png",type:a.Action.EVENT_LOAD,details:"Load event code from a file"}]),O=[{name:"Back to event list",icon:"img/header/back.png",type:a.Action.BACK_TO_EVENTS,details:"Return to the event list"},{name:"Save",icon:"img/header/save.png",type:a.Action.SAVE_EVENT,details:"Save the event"}],R={name:"",icon:"",type:"MORE",details:"More options"},M=null;function L(e){switch(e){case a.Action.ROM_LOAD:x.openFile(".z64,.v64,.rom,.n64",B);break;case a.Action.ROM_UNLOAD:v.romhandler.clear(),c.clearBoardsFromROM(),w.boardsChanged(c.getBoards()),c.setCurrentBoard(0),w.romLoadedChanged();break;case a.Action.ROM_SAVE:w.blockUI(!0),setTimeout(function(){v.romhandler.saveROM(),w.blockUI(!1),function(){if(!M){var e=function(){M&&(w.removeNotification(M),M=null)};M=o.createElement(E.Notification,{key:"romSaveNotice",color:E.NotificationColor.Green,onClose:e},"Before trying the game, review"," ",o.createElement("a",{href:"https://github.com/PartyPlanner64/PartyPlanner64/wiki/Emulator-Setup",target:"_blank"},"emulator setup instructions"),".",o.createElement(E.NotificationButton,{onClick:e},"Got it")),w.addNotification(M)}}()},0);break;case a.Action.BOARD_LOAD:x.openFile(".json",k);break;case a.Action.BOARD_SAVE:var t=c.getCurrentBoard(!0),n=new Blob([JSON.stringify(t)]);saveAs(n,t.name+".json");break;case a.Action.BOARD_COPY:c.copyCurrentBoard();break;case a.Action.BOARD_DETAILS:w.changeView(a.View.DETAILS);break;case a.Action.BOARD_EDITOR:w.changeView(a.View.EDITOR);break;case a.Action.SETTINGS:w.changeView(a.View.SETTINGS);break;case a.Action.ABOUT:w.changeView(a.View.ABOUT);break;case a.Action.MODEL_VIEWER:w.changeView(a.View.MODELS);break;case a.Action.EVENTS:w.changeView(a.View.EVENTS);break;case a.Action.BACK_TO_EVENTS:b.createEventPromptExit()&&(w.changeCurrentEvent(null),w.changeView(a.View.EVENTS));break;case a.Action.EVENT_LOAD:x.openFile(".s",j);break;case a.Action.SAVE_EVENT:b.saveEvent();break;case a.Action.CREATEEVENT:w.changeView(a.View.CREATEEVENT);break;case a.Action.STRINGS_EDITOR:w.changeView(a.View.STRINGS);break;case a.Action.PATCHES:w.changeView(a.View.PATCHES);break;case a.Action.DEBUG:w.changeView(a.View.DEBUG);break;case a.Action.AUDIO:w.changeView(a.View.AUDIO);break;case a.Action.SET_BG:x.openFile("image/*",I)}}function B(e){var t=e.target.files[0];if(t){w.blockUI(!0);var n=new FileReader;n.onload=function(e){if(e.target.result){var t=v.romhandler.setROMBuffer(e.target.result);t&&t.then(function(e){w.romLoadedChanged(),c.loadBoardsFromROM(),w.blockUI(!1),d.$$log("ROM loaded")},function(e){d.$$log("Error loading ROM: "+e),w.showMessage("Error loading the ROM file.")})}else w.blockUI(!1)},n.readAsArrayBuffer(t)}}function k(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(){var e;try{e=JSON.parse(n.result)}catch(e){return void alert("Board could not be parsed.")}var t=c.addBoard(e);c.setCurrentBoard(t)},n.readAsText(t)}}function I(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(){c.setBG(n.result),A.render()},n.readAsDataURL(t)}}function j(e){var t=e.target&&e.target.files;if(t&&t[0])for(var n=function(e){var n=new FileReader;n.onload=function(){try{var e=n.result,t=y.createCustomEvent(e,!0);P.addEventToLibrary(t),S.refreshEventsView()}catch(e){return void w.showMessage("Event file load failed. "+e.toString())}},n.readAsText(t[e])},r=0;r<t.length;r++)n(r)}function N(e,t,n){var r;return r=e!==a.View.EDITOR?e===a.View.EVENTS?D:e===a.View.CREATEEVENT?O:F:n?c.boardIsROM(t)?T:V:C,g.get(g.$setting.uiAdvanced)||(r=r.filter(function(e){return!e.advanced})),r=r.filter(function(e){return!e.show||e.show()})}var U=!1;t.Header=function(e){function t(t){var n=e.call(this,t)||this;n.actionsEl=null,n.componentWillReceiveProps=function(e){var t=N(e.view,e.board,e.romLoaded);_.equal(n.state.totalActions,t)||n.setState({actions:t,totalActions:t,overflow:[]})};var r=N(t.view,t.board,t.romLoaded);return n.state={actions:r,totalActions:r,overflow:[]},n}return i(t,e),t.prototype.refresh=function(){var e=N(this.props.view,this.props.board,this.props.romLoaded);this.setState({actions:e,totalActions:e,overflow:[]})},t.prototype.render=function(){var e,t=this,n=this.state.actions.map(function(e){return e.dropdownFn?o.createElement(W,{key:e.type,action:e,fn:e.dropdownFn}):o.createElement(G,{key:e.type,action:e})});return this.state.overflow.length&&(e=o.createElement(W,{key:R.type,action:R,overflow:this.state.overflow,fn:q})),o.createElement("div",{className:"header",role:"toolbar"},o.createElement(z,null),o.createElement("div",{className:"headerActions",ref:function(e){t.actionsEl=e}},n,e))},t.prototype.componentDidMount=function(){var e=this;U=!0,window.addEventListener("resize",this.refresh.bind(this),!1),setTimeout(function(){window.requestAnimationFrame(e.handleOverflow.bind(e))},0)},t.prototype.componentDidUpdate=function(){var e=this;setTimeout(function(){window.requestAnimationFrame(e.handleOverflow.bind(e))},0)},t.prototype.componentWillUnmount=function(){U=!1,d.$$log("Why did Header unmount?")},t.prototype.handleOverflow=function(){if(U){for(var e=this.state.actions.slice(),t=this.state.overflow.length,n=this.state.overflow.slice(),r=m.findDOMNode(this),i=this.actionsEl;i.offsetWidth>r.offsetWidth-215-(t?0:80);){var a=i.children[e.length-(t?2:1)];if(!a)break;a.style.display="none",n.unshift(e.pop())}for(var o=0;o<i.children.length-(t?2:1);o++){i.children[o].style.display=""}e.length===this.state.actions.length&&n.length===this.state.overflow.length||this.setState({actions:e,overflow:n})}},t}(o.Component);var z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("img",{className:"headerLogo",src:"img/header/logo.png",alt:"PartyPlanner64 Logo"})},t}(o.Component),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){L(t.props.action.type)},t}return i(t,e),t.prototype.render=function(){var e;return this.props.action.icon&&(e=o.createElement("img",{className:"headerButtonIcon",src:this.props.action.icon})),o.createElement("div",{className:"headerButton",title:this.props.action.details,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:h.makeKeyClick(this.handleClick,this)},e,o.createElement("span",{className:"headerButtonText"},this.props.action.name))},t}(o.Component),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dropdown=null,t.state={opened:!1},t.globalClickHandler=function(e){t.elementIsWithin(e.target)||t.close()},t.onButtonClick=function(e){t.state.opened&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),t.setState({opened:!t.state.opened})},t.onDropdownClick=function(e){e.stopPropagation()},t.close=function(){t.state.opened&&t.setState({opened:!1})},t}return i(t,e),t.prototype.addGlobalHandler=function(){document.addEventListener("click",this.globalClickHandler)},t.prototype.removeGlobalHandler=function(){document.removeEventListener("click",this.globalClickHandler)},t.prototype.elementIsWithin=function(e){return!this.dropdown||this.dropdown.contains(e)},t.prototype.componentDidMount=function(){this.addGlobalHandler(),window.addEventListener("resize",this.close,!1)},t.prototype.componentWillUnmount=function(){this.removeGlobalHandler(),window.removeEventListener("resize",this.close)},t.prototype.render=function(){var e,t=this,n="headerButton",r=null;if(this.state.opened){n+=" headerButtonExpanded";var i=this.props.fn(this.close,this.props);r=o.createElement("div",{className:"headerDropdown",onClick:this.onDropdownClick},i)}return this.props.action.icon&&(e=o.createElement("img",{className:"headerButtonIcon",src:this.props.action.icon})),o.createElement("div",{className:n,tabIndex:0,role:"button","aria-haspopup":"true",title:this.props.action.details,ref:function(e){return t.dropdown=e},onClick:this.onButtonClick},e,o.createElement("span",{className:"headerButtonText"},this.props.action.name),o.createElement("div",{className:"headerDropdownArrow"},""),r)},t}(o.Component);var H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boardClicked=function(e){if(e.target&&"A"===e.target.tagName.toUpperCase())e.stopPropagation();else if(!t.hasErrors()&&!t.props.unavailable){t.props.closeCallback();var n=p.getROMAdapter();if(!n)return;w.blockUI(!0);var r=c.getCurrentBoard();n.overwriteBoard(t.props.boardIndex,r).then(function(){d.$$log("Board overwritten"),c.clearBoardsFromROM(),c.loadBoardsFromROM();var e=c.indexOfBoard(r);e<0&&(e=0),c.setCurrentBoard(e),u.recordEvent("board_write",{event_category:"action",event_label:r.name}),w.blockUI(!1)},function(e){d.$$log("Error overriding board: "+e),w.showMessage("Error overwriting the board.")})}},t}return i(t,e),t.prototype.hasErrors=function(){return!!this.props.errors.length},t.prototype.hasWarnings=function(){return!!this.props.warnings.length},t.prototype.render=function(){var e="overwriteBoardEntry",t="Overwrite "+this.props.name+" with the current board.",n=[];return this.props.unavailable?(e+=" unavailable",n.push(o.createElement("div",{className:"overwriteBoardMessage",key:"unavailable"},"Board cannot be overwritten currently."))):(this.hasErrors()&&(e+=" failed",n=n.concat(this.props.errors.map(function(e,t){return o.createElement("div",{className:"overwriteBoardMessage",key:t+"e"},o.createElement("img",{src:"img/header/boarderror.png",alt:"",className:"overwriteBoardIssueIcon"}),o.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))}))),this.hasWarnings()&&(n=n.concat(this.props.warnings.map(function(e,t){return o.createElement("div",{className:"overwriteBoardMessage",key:t+"w"},o.createElement("img",{src:"img/header/boardwarning.png",alt:"",className:"overwriteBoardIssueIcon"}),o.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))})))),n.length?(t="Issues with the current board.",o.createElement("div",{className:e,onClick:this.boardClicked,title:t},o.createElement("span",{className:"overwriteBoardName"},this.props.name),o.createElement("br",null),n)):o.createElement("div",{className:e,onClick:this.boardClicked,title:t},o.createElement("span",{className:"overwriteBoardName"},this.props.name))},t}(o.Component);function q(e,t){var n=t.overflow;return n.length?n.map(function(e){return e.dropdownFn?o.createElement(W,{key:e.type,action:e,fn:e.dropdownFn}):o.createElement(G,{key:e.type,action:e})}):null}function K(e){return o.createElement(l.NewBoard,{onAccept:function(t,n,r){e();var i=c.addBoard(null,{game:t,type:n});c.setCurrentBoard(i)}})}function Y(e){return o.createElement(s.Screenshot,{onAccept:function(t,n){if(isElectron)n.then(function(e){saveAs(e,"BoardScreenshot.png")});else{var r=window.open();if(r){var i=r.document;i&&(i.write(""),i.close(),i.body.appendChild(i.createElement("img")).src=t)}}e()}})}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(2),s=n(24),l=n(47),c=n(29);t.Screenshot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={renderConnections:!0,renderCharacters:!0,renderHiddenSpaces:!0,renderBadges:!0},t.takeScreenshot=function(){var e=function(e){void 0===e&&(e={});var t=o.getCurrentBoard(),n=s.createContext(t.bg.width,t.bg.height);n.fillStyle="black",n.fillRect(0,0,t.bg.width,t.bg.height);var r=c.external.getBGImage();n.drawImage(r,0,0,t.bg.width,t.bg.height);var i=$$debug;return $$debug=!1,e.renderConnections&&c.external.renderConnections(n.canvas,n,t,!1),c.external.renderSpaces(n.canvas,n,t,!1,{skipCharacters:!e.renderCharacters,skipHiddenSpaces:!e.renderHiddenSpaces,skipBadges:!e.renderBadges}),$$debug=i,{dataUri:n.canvas.toDataURL(),blobPromise:new Promise(function(e){n.canvas.toBlob(e)})}}({renderConnections:t.state.renderConnections,renderCharacters:t.state.renderCharacters,renderHiddenSpaces:t.state.renderHiddenSpaces,renderBadges:t.state.renderBadges}),n=e.dataUri,r=e.blobPromise;t.props.onAccept&&t.props.onAccept(n,r)},t.onCheckChanged=function(e){var n={};n[e]=!t.state[e],t.setState(n)},t}return i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"screenshotContainer"},a.createElement("label",{className:"nbLabel"},"Screenshot Options"),a.createElement("br",null),a.createElement(u,{id:"renderConnections",text:"Render connections",checked:this.state.renderConnections,onChange:this.onCheckChanged}),a.createElement(u,{id:"renderCharacters",text:"Render characters",checked:this.state.renderCharacters,onChange:this.onCheckChanged}),a.createElement(u,{id:"renderHiddenSpaces",text:"Render hidden spaces",checked:this.state.renderHiddenSpaces,onChange:this.onCheckChanged}),a.createElement(u,{id:"renderBadges",text:"Render badges",checked:this.state.renderBadges,onChange:this.onCheckChanged}),a.createElement("br",null),a.createElement(l.Button,{onClick:this.takeScreenshot,css:"ssCreate"},"Take Screenshot"))},t}(a.Component);var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onChange=function(){t.props.onChange(t.props.id)},t}return i(t,e),t.prototype.render=function(){var e="ssCheck";return this.props.css&&(e+=" "+this.props.css),a.createElement("label",{className:e,title:""},a.createElement("input",{type:"checkbox",onChange:this.onChange,checked:this.props.checked}),this.props.text)},t}(a.Component)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(0),s=n(47),l=n(13),c=[{name:"Blank",id:"default"}],u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={version:1,type:o.BoardType.NORMAL,theme:0},t.onVersionChange=function(e){t.setState({version:e}),3!==e&&t.setState({type:o.BoardType.NORMAL})},t.onTypeChange=function(e){t.setState({type:e})},t.onThemeChange=function(e){t.setState({theme:e})},t.submit=function(){if(t.state.type!==o.BoardType.DUEL||(l.showMessage("Duel board support is partially finished, coming soon!"),$$debug)){var e=t.props.onAccept;e&&e(t.state.version,t.state.type,c[t.state.theme])}},t}return i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"newBoardContainer"},a.createElement(d,{onVersionChange:this.onVersionChange}),a.createElement(p,{onThemeChange:this.onThemeChange}),a.createElement(s.Button,{onClick:this.submit,css:"nbCreate"},"Create"))},t}(a.Component);t.NewBoard=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={version:1},t.onVersionChange=function(e,n){t.setState({version:e}),t.props.onVersionChange(e)},t}return i(t,e),t.prototype.render=function(){var e=[a.createElement(s.ToggleButton,{id:1,key:1,allowDeselect:!1,onToggled:this.onVersionChange,pressed:1===this.state.version},a.createElement("span",{className:"newBoardVersion",title:"Mario Party 1"},"MP1"))];return e.push(a.createElement(s.ToggleButton,{id:2,key:2,allowDeselect:!1,onToggled:this.onVersionChange,pressed:2===this.state.version},a.createElement("span",{className:"newBoardVersion",title:"Mario Party 2"},"MP2"))),e.push(a.createElement(s.ToggleButton,{id:3,key:3,allowDeselect:!1,onToggled:this.onVersionChange,pressed:3===this.state.version},a.createElement("span",{className:"newBoardVersion",title:"Mario Party 3"},"MP3"))),a.createElement("div",{className:"newBoardVersionSelect"},a.createElement("label",{className:"nbLabel"},"Game Version"),a.createElement("br",null),e)},t}(a.Component),p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeChange=function(e){t.props.onTypeChange(e)},t}i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"newBoardVersionSelect"},a.createElement("label",{className:"nbLabel"},"Board Type"),a.createElement("br",null),a.createElement(s.ToggleButton,{id:o.BoardType.NORMAL,allowDeselect:!1,onToggled:this.onTypeChange,pressed:this.props.type===o.BoardType.NORMAL},a.createElement("span",{className:"newBoardVersion",title:"Normal party board"},"Normal")),a.createElement(s.ToggleButton,{id:o.BoardType.DUEL,allowDeselect:!1,onToggled:this.onTypeChange,pressed:this.props.type===o.BoardType.DUEL},a.createElement("span",{className:"newBoardVersion",title:"Duel board"},"Duel")))}}(a.Component),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={theme:0},t.onThemeChange=function(e,n){t.setState({theme:e}),t.props.onThemeChange(e)},t}return i(t,e),t.prototype.render=function(){var e=this,t=c.map(function(t,n){var r="img/themes/"+t.id+"/preview.png";return a.createElement(s.ToggleButton,{id:n,key:n,allowDeselect:!1,css:"nbTheme",onToggled:e.onThemeChange,pressed:e.state.theme===n},a.createElement("img",{src:r,className:"newBoardThemePreview",width:"96",height:"72"}),a.createElement("span",{className:"newBoardTheme"},a.createElement("span",{className:"newBoardThemeInner"},t.name)))});return a.createElement("div",{className:"NewBoardThemeSelect"},a.createElement("label",{className:"nbLabel"},"Theme"),a.createElement("br",null),t)},t}(a.Component))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordEvent=function(e,t){try{window.gtag&&window.gtag("event",e,t)}catch(e){console.error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0),a=n(9),o=n(391),s=n(392),l=n(393),c=n(19),u=n(67),d=n(51);t.validateCurrentBoardForOverwrite=function(){var e=a.romhandler.getROMGame();if(!e)return null;var t=[],n=r.getROMBoards(),p=r.getCurrentBoard(),f=d.getBoardInfos(e);return n.forEach(function(n,r){if(a=n,"string"!=typeof(d=p.type)?a.type!==i.BoardType.DUEL:a.type===d){var a,d,h=!function(e){return!!e.canOverwrite}(f[r]),m=[],_=[];h||c.get(c.$setting.uiSkipValidation)||function(e,t){var n=[u.getRule("HASSTART"),u.getRule("GAMEVERSION"),u.getRule("DEADEND"),u.getRule("TOOMANYSPACES"),u.getRule("UNRECOGNIZEDEVENTS"),u.getRule("UNSUPPORTEDEVENTS"),u.getRule("CUSTOMEVENTFAIL"),u.getRule("CUSTOMEVENTBADPARAMS"),u.getRule("TOOMANYPATHOPTIONS"),u.getRule("CHARACTERSONPATH"),u.getRule("SPLITATNONINVISIBLESPACE")];switch(e){case i.Game.MP1_USA:case i.Game.MP1_JPN:n=n.concat(o.getValidationRulesForBoard());break;case i.Game.MP2_USA:case i.Game.MP2_JPN:n=n.concat(s.getValidationRulesForBoard(e,t));break;case i.Game.MP3_USA:case i.Game.MP3_JPN:n=n.concat(l.getValidationRulesForBoard(e,t))}return n}(e,r).forEach(function(e){var t,n;Array.isArray(e)&&(e=(t=e)[0],n=t[1]);var r=e.fails(p,n);r&&(e.level===i.ValidationLevel.ERROR?m.push(r):e.level===i.ValidationLevel.WARNING&&_.push(r))}),t.push({name:n.name,unavailable:h,errors:m,warnings:_})}}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67);n(111);var i=[r.getRule("TOOMANYGATES",{limit:0})];t.getValidationRulesForBoard=function(){var e=i.slice(0);return e.push(r.getRule("TOOMANYBOOS",{limit:2})),e.push(r.getRule("TOOMANYBOWSERS",{limit:1})),e.push(r.getRule("TOOMANYKOOPAS",{limit:1})),e.push(r.getRule("BADSTARCOUNT",{low:7,high:7})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=n(51);n(111);var a=[r.getRule("TOOMANYBOWSERS",{limit:0}),r.getRule("TOOMANYKOOPAS",{limit:0}),r.getRule("TOOMANYGATES",{limit:0})];t.getValidationRulesForBoard=function(e,t){var n=a.slice(0),o=i.getBoardInfoByIndex(e,t),s=i.getArrowRotationLimit(o);return n.push(r.getRule("TOOMANYARROWROTATIONS",{limit:s})),0===t&&(n.push(r.getRule("TOOMANYBANKS",{limit:2})),n.push(r.getRule("TOOMANYITEMSHOPS",{limit:1})),n.push(r.getRule("TOOMANYBOOS",{limit:2})),n.push(r.getRule("BADSTARCOUNT",{low:7,high:7}))),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=n(51);n(111);var a=n(42),o=[r.getRule("TOOMANYBOWSERS",{limit:0}),r.getRule("TOOMANYKOOPAS",{limit:0}),r.getRule("GATESETUP"),r.getRule("OVERRECOMMENDEDSPACES",{max:128})];t.getValidationRulesForBoard=function(e,t){var n=o.slice(0),s=i.getBoardInfoByIndex(e,t),l=i.getArrowRotationLimit(s);return n.push(r.getRule("TOOMANYARROWROTATIONS",{limit:l})),0===t&&(n.push(r.getRule("TOOMANYOFEVENT",{event:a.BankEvent,high:2})),n.push(r.getRule("TOOMANYBANKS",{limit:2})),n.push(r.getRule("TOOMANYOFEVENT",{event:a.ItemShopEvent,high:2})),n.push(r.getRule("TOOMANYITEMSHOPS",{limit:2})),n.push(r.getRule("TOOMANYOFEVENT",{event:a.BooEvent,high:1})),n.push(r.getRule("TOOMANYBOOS",{limit:1})),n.push(r.getRule("TOOMANYGATES",{limit:2})),n.push(r.getRule("BADSTARCOUNT",{low:8,high:8}))),n}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(30),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={left:-1e3,top:-1e3,manuallyPlaced:!1},t.mouseDown=function(e){var n;u=t,n=[e.clientX,e.clientY],l=n[0],c=n[1];var r=t.getContainerEl();r.addEventListener("mousemove",p),r.addEventListener("mouseup",f),r.addEventListener("mouseleave",f),r.classList.add("moving")},t.onWindowResize=function(){t.updatePositionState()},t}return i(t,e),t.prototype.render=function(){if(!this.props.visible)return null;var e={left:this.state.left,top:this.state.top};return a.createElement("div",{className:"toolWindow",style:e},a.createElement("div",{className:"toolWindowName",onMouseDown:this.mouseDown},this.props.name,this.props.canClose&&a.createElement("div",{className:"toolWindowCloseBtn","aria-label":"Close",onClick:this.props.onCloseClick},"")),this.props.children)},t.prototype.componentDidMount=function(){this.props.visible&&this.updatePositionState(),window.addEventListener("resize",this.onWindowResize),this.attachMutationObserver()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onWindowResize),this.detachMutationObserver()},t.prototype.componentDidUpdate=function(){this.props.visible&&this.updatePositionState(),this.detachMutationObserver(),this.attachMutationObserver()},t.prototype.shouldComponentUpdate=function(e,t){return!this.tryUpdatePosition(t)},t.prototype.attachMutationObserver=function(){var e=this,t=o.findDOMNode(this);if(t&&"MutationObserver"in window){var n=new MutationObserver(function(t){e.updatePositionState()});n.observe(t,{childList:!0,subtree:!0}),d[this.props.name]=n}},t.prototype.detachMutationObserver=function(){d[this.props.name]&&(d[this.props.name].disconnect(),delete d[this.props.name])},t.prototype.tryUpdatePosition=function(e){var t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.updatePosition(e),t},t.prototype.updatePosition=function(e){e=e||this.state;var t=o.findDOMNode(this);t&&(t.style.left=e.left+"px",t.style.top=e.top+"px")},t.prototype.tryUpdatePositionState=function(e){var t=this.state.left!==e.left||this.state.top!==e.top;return t&&this.setState(e),t},t.prototype.updatePositionState=function(){if(this.state.manuallyPlaced){e=h(this,{left:this.state.left,top:this.state.top});this.tryUpdatePositionState(e)}else{var e={},t=this.props.position;-1!==t.indexOf("Left")&&(e.left=0),-1!==t.indexOf("Right")&&(e.left=this.getContainerWidth()-this.getWidth()),-1!==t.indexOf("Top")&&(e.top=0),-1!==t.indexOf("Bottom")&&(e.top=this.getContainerHeight()-this.getHeight()),this.tryUpdatePositionState(e)}},t.prototype.getWidth=function(){var e=o.findDOMNode(this);return e&&e.offsetWidth||0},t.prototype.getHeight=function(){var e=o.findDOMNode(this);return e&&e.offsetHeight||0},t.prototype.getContainerWidth=function(){var e=document.getElementsByClassName("main")[0];return e&&e.offsetWidth||0},t.prototype.getContainerHeight=function(){var e=document.getElementsByClassName("main")[0];return e&&e.offsetHeight||0},t.prototype.getContainerEl=function(){var e=o.findDOMNode(this);return e&&e.offsetParent||null},t}(a.Component);t.ToolWindow=s;var l=null,c=null,u=null,d={};function p(e){var t,n=[e.clientX,e.clientY],r=n[0],i=n[1],a=[r-l,i-c],o=a[0],s=a[1],d={left:u.state.left+o,top:u.state.top+s,manuallyPlaced:!0};d=h(u,d),u.setState(d),l=(t=[r,i])[0],c=t[1]}function f(e){var t=u.getContainerEl();"mouseleave"===e.type&&e.target!==t||(t.removeEventListener("mousemove",p),t.removeEventListener("mouseup",f),t.removeEventListener("mouseleave",f),t.classList.remove("moving"),u=null,l=c=null)}function h(e,t){if(t.left<0)t.left=0;else{var n=e.getContainerWidth()-e.getWidth();t.left>n&&(t.left=n)}if(t.top<0)t.top=0;else{var r=e.getContainerHeight()-e.getHeight();t.top>r&&(t.top=r)}return t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(63),s=n(0),l=n(19),c=n(2),u=n(13),d=[{name:"Move spaces",icon:"img/toolbar/move.png",type:s.Action.MOVE},{name:"Connect spaces",icon:"img/toolbar/line.png",type:s.Action.LINE},{name:"Connect multiple spaces in one click",icon:"img/toolbar/stickyline.png",type:s.Action.LINE_STICKY},{name:"Erase spaces and lines",icon:"img/toolbar/eraser.png",type:s.Action.ERASE},{spacer:!0},{name:"Add blue space",icon:"img/toolbar/blue.png",type:s.Action.ADD_BLUE,draggable:!0},{name:"Add red space",icon:"img/toolbar/red.png",type:s.Action.ADD_RED,draggable:!0},{name:"Add happening space",icon:"img/toolbar/happening.png",type:s.Action.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:"img/toolbar/chance.png",type:s.Action.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:"img/toolbar/bowser.png",type:s.Action.ADD_BOWSER,draggable:!0},{name:"Add Mini-Game space",icon:"img/toolbar/minigame.png",type:s.Action.ADD_MINIGAME,draggable:!0},{name:"Add shroom space",icon:"img/toolbar/shroom.png",type:s.Action.ADD_SHROOM,draggable:!0},{name:"Add invisible space",icon:"img/toolbar/other.png",type:s.Action.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:"img/toolbar/star.png",type:s.Action.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:"img/toolbar/start.png",type:s.Action.ADD_START,draggable:!0,advanced:!0},{spacer:!0},{name:"Add Toad",icon:"img/toolbar/toad.png",type:s.Action.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:"img/toolbar/boo.png",type:s.Action.ADD_BOO_CHARACTER,draggable:!0},{name:"Add Bowser",icon:"img/toolbar/bowsercharacter.png",type:s.Action.ADD_BOWSER_CHARACTER,draggable:!0},{name:"Add Koopa Troopa",icon:"img/toolbar/koopa.png",type:s.Action.ADD_KOOPA_CHARACTER,draggable:!0},{name:"Mark space as hosting star",icon:"img/toolbar/markstar.png",type:s.Action.MARK_STAR}],p=[{name:"Move spaces",icon:"img/toolbar/move.png",type:s.Action.MOVE},{name:"Connect spaces",icon:"img/toolbar/line.png",type:s.Action.LINE},{name:"Connect multiple spaces in one click",icon:"img/toolbar/stickyline.png",type:s.Action.LINE_STICKY},{name:"Erase spaces and lines",icon:"img/toolbar/eraser.png",type:s.Action.ERASE},{spacer:!0},{name:"Add blue space",icon:"img/toolbar/blue.png",type:s.Action.ADD_BLUE,draggable:!0},{name:"Add red space",icon:"img/toolbar/red.png",type:s.Action.ADD_RED,draggable:!0},{name:"Add happening space",icon:"img/toolbar/happening.png",type:s.Action.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:"img/toolbar/chance2.png",type:s.Action.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:"img/toolbar/bowser.png",type:s.Action.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:"img/toolbar/item.png",type:s.Action.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:"img/toolbar/battle.png",type:s.Action.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:"img/toolbar/bank.png",type:s.Action.ADD_BANK,draggable:!0},{name:"Add invisible space",icon:"img/toolbar/other.png",type:s.Action.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:"img/toolbar/star.png",type:s.Action.ADD_STAR,draggable:!0,advanced:!0},{name:"Add black star space (decoration)",icon:"img/toolbar/blackstar.png",type:s.Action.ADD_BLACKSTAR,draggable:!0,advanced:!0},{name:"Add start space",icon:"img/toolbar/start.png",type:s.Action.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:"img/toolbar/arrow.png",type:s.Action.ADD_ARROW,draggable:!0,advanced:!0},{spacer:!0},{name:"Add Toad",icon:"img/toolbar/toad.png",type:s.Action.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:"img/toolbar/boo.png",type:s.Action.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:"img/toolbar/banksubtype2.png",type:s.Action.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",type:s.Action.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:"img/toolbar/itemshopsubtype2.png",type:s.Action.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:"img/toolbar/markstar.png",type:s.Action.MARK_STAR}],f=[{name:"Move spaces",icon:"img/toolbar/move.png",type:s.Action.MOVE},{name:"Connect spaces",icon:"img/toolbar/line.png",type:s.Action.LINE},{name:"Connect multiple spaces in one click",icon:"img/toolbar/stickyline.png",type:s.Action.LINE_STICKY},{name:"Erase spaces and lines",icon:"img/toolbar/eraser.png",type:s.Action.ERASE},{name:"Rotate arrow spaces",icon:"img/toolbar/rotate.png",type:s.Action.ROTATE,advanced:!0},{spacer:!0},{name:"Add blue space",icon:"img/toolbar/blue3.png",type:s.Action.ADD_BLUE,draggable:!0},{name:"Add red space",icon:"img/toolbar/red3.png",type:s.Action.ADD_RED,draggable:!0},{name:"Add happening space",icon:"img/toolbar/happening3.png",type:s.Action.ADD_HAPPENING,draggable:!0},{name:"Add chance time space",icon:"img/toolbar/chance3.png",type:s.Action.ADD_CHANCE,draggable:!0},{name:"Add Bowser space",icon:"img/toolbar/bowser3.png",type:s.Action.ADD_BOWSER,draggable:!0},{name:"Add item space",icon:"img/toolbar/item3.png",type:s.Action.ADD_ITEM,draggable:!0},{name:"Add battle space",icon:"img/toolbar/battle3.png",type:s.Action.ADD_BATTLE,draggable:!0},{name:"Add bank space",icon:"img/toolbar/bank3.png",type:s.Action.ADD_BANK,draggable:!0},{name:"Add Game Guy space",icon:"img/toolbar/gameguy.png",type:s.Action.ADD_GAMEGUY,draggable:!0},{name:"Add invisible space",icon:"img/toolbar/other.png",type:s.Action.ADD_OTHER,draggable:!0},{name:"Add star space (decoration)",icon:"img/toolbar/star.png",type:s.Action.ADD_STAR,draggable:!0,advanced:!0},{name:"Add start space",icon:"img/toolbar/start.png",type:s.Action.ADD_START,draggable:!0,advanced:!0},{name:"Add arrow space",icon:"img/toolbar/arrow.png",type:s.Action.ADD_ARROW,draggable:!0,advanced:!0},{spacer:!0},{name:"Add Millennium Star",icon:"img/toolbar/mstar.png",type:s.Action.ADD_TOAD_CHARACTER,draggable:!0},{name:"Add Boo",icon:"img/toolbar/boo.png",type:s.Action.ADD_BOO_CHARACTER,draggable:!0},{name:"Add bank",icon:"img/toolbar/banksubtype.png",type:s.Action.ADD_BANK_SUBTYPE,draggable:!0},{name:"Add bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",type:s.Action.ADD_BANKCOIN_SUBTYPE,draggable:!0},{name:"Add item shop",icon:"img/toolbar/itemshopsubtype.png",type:s.Action.ADD_ITEMSHOP_SUBTYPE,draggable:!0},{name:"Mark space as hosting star",icon:"img/toolbar/markstar.png",type:s.Action.MARK_STAR},{name:"Mark space as Skeleton Key gate",icon:"img/toolbar/markgate.png",type:s.Action.MARK_GATE}],h=[{name:"Move spaces",icon:"img/toolbar/move.png",type:s.Action.MOVE},{name:"Connect spaces",icon:"img/toolbar/line.png",type:s.Action.LINE},{name:"Connect multiple spaces in one click",icon:"img/toolbar/stickyline.png",type:s.Action.LINE_STICKY},{name:"Erase spaces and lines",icon:"img/toolbar/eraser.png",type:s.Action.ERASE},{spacer:!0},{name:"Add basic space",icon:"img/toolbar/basic3.png",type:s.Action.ADD_DUEL_BASIC,draggable:!0},{name:"Add Mini-Game space",icon:"img/toolbar/minigameduel3.png",type:s.Action.ADD_MINIGAME,draggable:!0},{name:"Add reverse space",icon:"img/toolbar/reverse3.png",type:s.Action.ADD_DUEL_REVERSE,draggable:!0},{name:"Add happening space",icon:"img/toolbar/happeningduel3.png",type:s.Action.ADD_HAPPENING,draggable:!0},{name:"Add Game Guy space",icon:"img/toolbar/gameguyduel.png",type:s.Action.ADD_GAMEGUY,draggable:!0},{name:"Add power-up space",icon:"img/toolbar/powerup.png",type:s.Action.ADD_DUEL_POWERUP,draggable:!0},{name:"Add invisible space",icon:"img/toolbar/other.png",type:s.Action.ADD_OTHER,draggable:!0},{name:"Add blue start space",icon:"img/toolbar/startblue.png",type:s.Action.ADD_DUEL_START_BLUE,draggable:!0,advanced:!0},{name:"Add red start space",icon:"img/toolbar/startred.png",type:s.Action.ADD_DUEL_START_RED,draggable:!0,advanced:!0}];var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.render=function(){var e=this;if(c.currentBoardIsROM())return a.createElement("div",{className:"toolbarReadonly"},"Board is readonly.");var t=0,n=function(e,t){var n;switch(e){case 1:n=d;break;case 2:n=p;break;case 3:n=t===s.BoardType.DUEL?h:f;break;default:throw"Unknown game version found by Toolbar ("+e+")"}return l.get(l.$setting.uiAdvanced)||(n=n.filter(function(e){return!e.advanced})),n}(this.props.gameVersion,this.props.boardType).map(function(n){if(function(e){return"spacer"in e&&e.spacer}(n))return a.createElement(g,{key:"spacer"+t++});var r=e.props.currentAction===n.type;return a.createElement(_,{key:n.type,current:r,action:n})});return a.createElement("div",{className:"toolbar",role:"toolbar"},n)},t}(a.Component);t.Toolbar=m;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){var e;e=t.props.action.type,u.changeCurrentAction(e)},t.onDragStart=function(e){t.props.action.draggable&&e.dataTransfer.setData("text",JSON.stringify({action:t.props.action}))},t}return i(t,e),t.prototype.render=function(){var e="toolbarButton";this.props.current&&(e+=" selected");var t=o.makeKeyClick(this.handleClick,this);return a.createElement("div",{className:e,title:this.props.action.name,role:"button",tabIndex:0,onClick:this.handleClick,onKeyDown:t,draggable:this.props.action.draggable,onDragStart:this.onDragStart},a.createElement("img",{className:"toolbarIcon",src:this.props.action.icon}))},t}(a.Component),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"toolbarSpacer",role:"separator"})},t}(a.Component)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(0),s=n(2),l=n(19),c=n(63),u=n(23),d=n(88),p=n(50),f=n(87),h=n(29),m=n(13),_=n(44),g=n(138),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTypeChanged=function(e,n){for(var r=0,i=t.props.selectedSpaces;r<i.length;r++){var a=i[r];void 0!==e&&(a.type=e,a.rotation&&delete a.rotation),void 0!==n?a.subtype=n:delete a.subtype}h.render(),t.forceUpdate()},t.onStarCheckChanged=function(e){for(var n=0,r=t.props.selectedSpaces;n<r.length;n++){r[n].star=!!e}h.render(),t.forceUpdate()},t.onEventAdded=function(e){var n=t.props.selectedSpaces[0],r=u.createSpaceEvent(e);s.addEventToSpace(s.getCurrentBoard(),n,r),h.render(),t.forceUpdate()},t.onEventDeleted=function(e){var n=t.props.selectedSpaces[0];s.removeEventFromSpace(n,e),h.render(),t.forceUpdate()},t.onEventActivationTypeToggle=function(e){e.activationType===o.EventActivationType.WALKOVER?e.activationType=o.EventActivationType.LANDON:e.activationType=o.EventActivationType.WALKOVER},t.onEventParameterSet=function(e,t,n){e.parameterValues||(e.parameterValues={}),e.parameterValues[t]=n,h.renderConnections(),h.renderSpaces()},t}return i(t,e),t.prototype.render=function(){var e=this.props.selectedSpaces;if(!e||!e.length)return a.createElement("div",{className:"propertiesEmptyText"},"No space selected.");var t=e.length>1,n=e[0],r=this.props.gameVersion,i=this.props.boardType,c=i===o.BoardType.DUEL,u=function(e,t){var n=[];switch(e){case 1:n=x;break;case 2:n=b;break;case 3:switch(t){case o.BoardType.DUEL:n=C;break;default:n=E}}l.get(l.$setting.uiAdvanced)||(n=n.filter(function(e){return!e.advanced}));return n}(r,i),d=function(e,t){var n=[];switch(e){case 1:n=S;break;case 2:n=w;break;case 3:switch(t){case o.BoardType.DUEL:n=[];break;default:n=P}}l.get(l.$setting.uiAdvanced)||(n=n.filter(function(e){return!e.advanced}));return n}(r,i),p=a.createElement(y,{text:"Events"}),f=n.type,h=n.subtype,m=n.star||!1,_=!1;if(t)for(var g=0,v=e;g<v.length;g++){var V=v[g];V.type!==f&&(f=void 0),V.subtype!==h&&(h=void 0),V.star!==m&&(_=!0)}return a.createElement("div",{className:"properties"},a.createElement("div",{className:"propertiesPadded"},t?null:a.createElement(A,{space:n}),a.createElement(T,{toggleTypes:u,type:f,subtype:h,typeChanged:this.onTypeChanged}),a.createElement(T,{toggleTypes:d,type:f,subtype:h,typeChanged:this.onTypeChanged}),c?null:a.createElement(F,{checked:m,indeterminate:_,onStarCheckChanged:this.onStarCheckChanged})),t?null:p,t?null:a.createElement("div",{className:"propertiesPadded"},a.createElement(D,{events:n.events,board:s.getCurrentBoard(),onEventAdded:this.onEventAdded,onEventDeleted:this.onEventDeleted,onEventActivationTypeToggle:this.onEventActivationTypeToggle,onEventParameterSet:this.onEventParameterSet})))},t}(a.Component);function y(e){return a.createElement("span",{className:"propertySectionTitle"},e.text)}t.SpaceProperties=v;var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onChangeX=function(e){var n=parseInt(e.target.value,10),r=""===e.target.value,i=s.getCurrentBoard().bg.width;!r&&isNaN(n)||n<0||n>i||(t.state.oldX||t.setState({oldX:t.props.space.x}),t.props.space.x=r?"":n,t.forceUpdate())},t.onChangeY=function(e){var n=parseInt(e.target.value,10),r=""===e.target.value,i=s.getCurrentBoard().bg.height;!r&&isNaN(n)||n<0||n>i||(t.state.oldY||t.setState({oldY:t.props.space.y}),t.props.space.y=r?"":n,t.forceUpdate())},t.onChangeRotation=function(e){var n=parseInt(e.target.value,10);!(""===e.target.value)&&isNaN(n)||n<0||n>360||(t.state.oldRot||t.setState({oldRot:t.props.space.rotation}),n?t.props.space.rotation=n:delete t.props.space.rotation,t.forceUpdate())},t.onCoordSet=function(){t.props.space.x=t.props.space.x||0,t.props.space.y=t.props.space.y||0,h.render(),t.setState({oldX:void 0,oldY:void 0,oldRot:void 0}),t.forceUpdate()},t.onKeyUp=function(e){"Enter"===e.key&&t.onCoordSet()},t}return i(t,e),t.prototype.render=function(){var e=this.props.space;if(!e)return null;e.type,o.Space.ARROW;return a.createElement(a.Fragment,null,a.createElement("div",{className:"spaceCoordRow"},a.createElement("span",{className:"coordLabel"},"X:"),a.createElement("input",{className:"coordInput",type:"text",value:e.x,onChange:this.onChangeX,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp}),a.createElement("span",{className:"coordLabel"},"Y:"),a.createElement("input",{className:"coordInput",type:"text",value:e.y,onChange:this.onChangeY,onBlur:this.onCoordSet,onKeyUp:this.onKeyUp})))},t}(a.Component),x=[{name:"Change to blue space",icon:"img/toolbar/blue.png",type:o.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red.png",type:o.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening.png",type:o.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance.png",type:o.Space.CHANCE},{name:"Change to Mini-Game space",icon:"img/toolbar/minigame.png",type:o.Space.MINIGAME},{name:"Change to shroom space",icon:"img/toolbar/shroom.png",type:o.Space.SHROOM},{name:"Change to Bowser space",icon:"img/toolbar/bowser.png",type:o.Space.BOWSER},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:o.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:o.Space.STAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:o.Space.START,advanced:!0}],S=[{name:"Show Toad",icon:"img/toolbar/toad.png",subtype:o.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:o.SpaceSubtype.BOO},{name:"Show Bowser",icon:"img/toolbar/bowsercharacter.png",subtype:o.SpaceSubtype.BOWSER},{name:"Show Koopa Troopa",icon:"img/toolbar/koopa.png",subtype:o.SpaceSubtype.KOOPA}],b=[{name:"Change to blue space",icon:"img/toolbar/blue.png",type:o.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red.png",type:o.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening.png",type:o.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance2.png",type:o.Space.CHANCE},{name:"Change to Bowser space",icon:"img/toolbar/bowser.png",type:o.Space.BOWSER},{name:"Change to item space",icon:"img/toolbar/item.png",type:o.Space.ITEM},{name:"Change to battle space",icon:"img/toolbar/battle.png",type:o.Space.BATTLE},{name:"Change to bank space",icon:"img/toolbar/bank.png",type:o.Space.BANK},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:o.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:o.Space.STAR,advanced:!0},{name:"Change to black star space",icon:"img/toolbar/blackstar.png",type:o.Space.BLACKSTAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:o.Space.START,advanced:!0},{name:"Change to arrow space",icon:"img/toolbar/arrow.png",type:o.Space.ARROW,advanced:!0}],w=[{name:"Show Toad",icon:"img/toolbar/toad.png",subtype:o.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:o.SpaceSubtype.BOO},{name:"Show bank",icon:"img/toolbar/banksubtype2.png",subtype:o.SpaceSubtype.BANK},{name:"Show bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",subtype:o.SpaceSubtype.BANKCOIN},{name:"Show item shop",icon:"img/toolbar/itemshopsubtype2.png",subtype:o.SpaceSubtype.ITEMSHOP}],E=[{name:"Change to blue space",icon:"img/toolbar/blue3.png",type:o.Space.BLUE},{name:"Change to red space",icon:"img/toolbar/red3.png",type:o.Space.RED},{name:"Change to happening space",icon:"img/toolbar/happening3.png",type:o.Space.HAPPENING},{name:"Change to chance time space",icon:"img/toolbar/chance3.png",type:o.Space.CHANCE},{name:"Change to Bowser space",icon:"img/toolbar/bowser3.png",type:o.Space.BOWSER},{name:"Change to item space",icon:"img/toolbar/item3.png",type:o.Space.ITEM},{name:"Change to battle space",icon:"img/toolbar/battle3.png",type:o.Space.BATTLE},{name:"Change to bank space",icon:"img/toolbar/bank3.png",type:o.Space.BANK},{name:"Change to Game Guy space",icon:"img/toolbar/gameguy.png",type:o.Space.GAMEGUY},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:o.Space.OTHER},{name:"Change to star space",icon:"img/toolbar/star.png",type:o.Space.STAR,advanced:!0},{name:"Change to start space",icon:"img/toolbar/start.png",type:o.Space.START,advanced:!0},{name:"Change to arrow space",icon:"img/toolbar/arrow.png",type:o.Space.ARROW,advanced:!0}],P=[{name:"Show Millenium Star",icon:"img/toolbar/mstar.png",subtype:o.SpaceSubtype.TOAD},{name:"Show Boo",icon:"img/toolbar/boo.png",subtype:o.SpaceSubtype.BOO},{name:"Show bank",icon:"img/toolbar/banksubtype.png",subtype:o.SpaceSubtype.BANK},{name:"Show bank coin stack",icon:"img/toolbar/bankcoinsubtype.png",subtype:o.SpaceSubtype.BANKCOIN},{name:"Show item shop",icon:"img/toolbar/itemshopsubtype.png",subtype:o.SpaceSubtype.ITEMSHOP}],C=[{name:"Change to basic space",icon:"img/toolbar/basic3.png",type:o.Space.DUEL_BASIC},{name:"Change to Mini-Game space",icon:"img/toolbar/minigameduel3.png",type:o.Space.MINIGAME},{name:"Change to reverse space",icon:"img/toolbar/reverse3.png",type:o.Space.DUEL_REVERSE},{name:"Change to happening space",icon:"img/toolbar/happeningduel3.png",type:o.Space.HAPPENING},{name:"Change to Game Guy space",icon:"img/toolbar/gameguyduel.png",type:o.Space.GAMEGUY},{name:"Change to power-up space",icon:"img/toolbar/powerup.png",type:o.Space.DUEL_POWERUP},{name:"Change to invisible space",icon:"img/toolbar/other.png",type:o.Space.OTHER},{name:"Change to blue start space",icon:"img/toolbar/startblue.png",type:o.Space.DUEL_START_BLUE,advanced:!0},{name:"Change to red start space",icon:"img/toolbar/startred.png",type:o.Space.DUEL_START_RED,advanced:!0}];var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeChanged=function(e,n){t.props.typeChanged(e,n)},t}return i(t,e),t.prototype.render=function(){var e=this.props.type;if(e===o.Space.START&&!l.get(l.$setting.uiAdvanced))return null;var t=this.props.subtype,n=this.onTypeChanged,r=(this.props.toggleTypes||[]).map(function(r){var i=r.type+"-"+r.subtype,o=void 0!==r.type&&e===r.type||void 0!==r.subtype&&void 0!==t&&t===r.subtype;return a.createElement(V,{key:i,type:r.type,subtype:r.subtype,icon:r.icon,title:r.name,selected:o,typeChanged:n})});return a.createElement("div",{className:"spaceToggleContainer"},r)},t}(a.Component),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeChanged=function(){void 0!==t.props.subtype&&t.props.selected?t.props.typeChanged(t.props.type,void 0):t.props.typeChanged(t.props.type,t.props.subtype)},t}return i(t,e),t.prototype.render=function(){var e="spaceToggleButton";this.props.selected&&(e+=" selected");var t=void 0!==this.props.subtype?25:20,n=c.makeKeyClick(this.onTypeChanged,this);return a.createElement("div",{className:e,title:this.props.title,tabIndex:0,onClick:this.onTypeChanged,onKeyDown:n},a.createElement("img",{src:this.props.icon,height:t,width:t}))},t}(a.Component),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkboxEl=null,t.onChange=function(e){t.props.onStarCheckChanged(e.target.checked)},t}return i(t,e),t.prototype.render=function(){var e=this;return a.createElement("div",{className:"starCheckbox"},a.createElement("label",null,a.createElement("input",{type:"checkbox",ref:function(t){return e.checkboxEl=t},checked:this.props.checked,value:this.props.checked,onChange:this.onChange})," Hosts star"))},t.prototype.componentDidMount=function(){this.checkboxEl.indeterminate=this.props.indeterminate},t.prototype.componentDidUpdate=function(e){e.indeterminate!==this.props.indeterminate&&(this.checkboxEl.indeterminate=this.props.indeterminate)},t}(a.Component),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e,t=this,n=this.props.events||[],r=0,i=n.map(function(e){return a.createElement(O,{event:e,key:e.id+"-"+r++,board:t.props.board,onEventDeleted:t.props.onEventDeleted,onEventActivationTypeToggle:t.props.onEventActivationTypeToggle,onEventParameterSet:t.props.onEventParameterSet})});return e=a.createElement(k,{onEventAdded:this.props.onEventAdded}),a.createElement("div",{className:"eventsList"},i,e)},t}(a.Component),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEventDeleted=function(){t.props.onEventDeleted(t.props.event)},t.onEventActivationTypeToggle=function(){t.props.onEventActivationTypeToggle(t.props.event),t.forceUpdate()},t.onEventParameterSet=function(e,n){t.props.onEventParameterSet(t.props.event,e,n),t.forceUpdate()},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.props.event,n=u.getEvent(t.id,this.props.board);if(!n)return null;var r,i=n.name||t.id,s=0;return n.parameters&&(r=n.parameters.map(function(n){var r=t.parameterValues&&t.parameterValues[n.name];switch(n.type){case o.EventParameterType.Boolean:return a.createElement(L,{key:n.name,parameter:n,parameterValue:r,onEventParameterSet:e.onEventParameterSet});case o.EventParameterType.Number:case o.EventParameterType.PositiveNumber:return a.createElement(M,{key:n.name,parameter:n,parameterValue:r,positiveOnly:"+Number"===n.type,onEventParameterSet:e.onEventParameterSet});case o.EventParameterType.Space:return a.createElement(B,{key:n.name,parameter:n,spaceParameterIndex:s++,parameterValue:r,onEventParameterSet:e.onEventParameterSet});case o.EventParameterType.NumberArray:default:return null}})),a.createElement("div",{className:"eventEntry"},a.createElement("div",{className:"eventEntryHeader"},a.createElement("span",{className:"eventEntryName",title:i},i),a.createElement("div",{role:"button",className:"eventEntryDelete",onClick:this.onEventDeleted,title:"Remove this event"},"")),a.createElement("div",{className:"eventEntryOptions"},a.createElement(R,{activationType:t.activationType,onEventActivationTypeToggle:this.onEventActivationTypeToggle}),r))},t}(a.Component),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTypeToggle=function(){t.props.onEventActivationTypeToggle()},t}return i(t,e),t.prototype.render=function(){var e=this.props.activationType,t=o.EventActivationType,n={};n[t.WALKOVER]="img/toolbar/eventpassing.png",n[t.LANDON]="img/toolbar/eventstanding.png";var r=n[e];if(!r)return null;var i={};i[t.WALKOVER]="Occurs when passing over the space",i[t.LANDON]="Occurs when landing on the space";var s="";switch(e){case t.WALKOVER:s="Passing event";break;case t.LANDON:s="Land-on event"}return a.createElement("div",{className:"eventEntryItem eventEntryActivationTypeItem",onClick:this.onTypeToggle},a.createElement("img",{className:"eventEntryActivationTypeToggle",alt:"Activation Type",src:r,title:i[e]}),a.createElement("span",null,s))},t}(a.Component),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onParameterClicked=function(){var e=t.props.parameter.name,n=t.props.positiveOnly,r=window.prompt("Enter a"+(n?" positive ":" ")+"numeric value for the "+e+" parameter");if(r){var i=parseInt(r);isNaN(i)?m.showMessage("The value entered could not be parsed into a number"):t.props.positiveOnly&&i<=0?m.showMessage("The value entered must be a positive number"):t.props.onEventParameterSet(e,i)}},t}return i(t,e),t.prototype.render=function(){var e=this.props.parameterValue,t=null!=e,n="(Number) "+this.props.parameter.name+": "+(t?e:"null");return a.createElement("div",{className:"eventEntryItem",title:n,onClick:this.onParameterClicked},a.createElement("span",{className:"eventEntryItemParameterName"},this.props.parameter.name,":"),"",t?a.createElement("span",null,this.props.parameterValue):a.createElement("span",{className:"eventEntryItemParameterUnset"},"null"))},t}(a.Component),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onParameterClicked=function(){var e=t.props.parameterValue;t.props.onEventParameterSet(t.props.parameter.name,!e)},t}return i(t,e),t.prototype.render=function(){var e=this.props.parameterValue,t=null!=e,n="(Boolean) "+this.props.parameter.name+": "+(t?e:"null");return a.createElement("div",{className:"eventEntryItem",title:n,onClick:this.onParameterClicked},a.createElement("span",{className:"eventEntryItemParameterName"},this.props.parameter.name,":"),"",t?a.createElement("span",null,this.props.parameterValue.toString()):a.createElement("span",{className:"eventEntryItemParameterUnset"},"null"))},t}(a.Component),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDragStart=function(e){d.setEventParamDropHandler(t.onSpaceDroppedOn),e.dataTransfer.setDragImage(f.getImage("targetImg"),3,0),e.dataTransfer.setData("text",JSON.stringify({isEventParamDrop:!0}))},t.onSpaceDroppedOn=function(e){d.setEventParamDropHandler(null),e>=0&&t.props.onEventParameterSet(t.props.parameter.name,e)},t.onParameterClicked=function(){m.showMessage("To associate a space with this event, click and drag from this list entry and release over the target space.")},t}return i(t,e),t.prototype.render=function(){var e=this.props.parameterValue,t=null!=e,n="(Space) "+this.props.parameter.name+": "+(t?"set":"null")+"\nDrag to a space to associate it",r={backgroundColor:"rgb("+g.getDistinctColor(this.props.spaceParameterIndex).join(", ")+")"};return a.createElement("div",{className:"eventEntryItem eventEntryItemDraggable",title:n,draggable:!0,onDragStart:this.onDragStart,onClick:this.onParameterClicked},a.createElement("img",{alt:"Target",src:"img/events/target.png"}),a.createElement("span",{className:"eventEntryItemParameterName"},this.props.parameter.name,":"),"",t?a.createElement("span",{className:"eventEntryItemParameterSpaceSetWrapper"},"set",a.createElement("span",{style:r,className:"eventEntryItemParameterColorSwatch"})):a.createElement("span",{className:"eventEntryItemParameterUnset"},"null"))},t}(a.Component),k=function(e){function t(t){var n=e.call(this,t)||this;n.onSelection=function(e){var t=e.target.value;if("-1"!=t){var r=t.split(","),i=r[0],a=r[1],o=p.copyObject(n.state[i][a]);if(!o)throw new Error("Could not add event "+t);n.props.onEventAdded(o),n._refreshLists()}};var r=I();return n.state={selectedValue:-1,libraryEvents:r.libraryEvents.sort(j),boardEvents:r.boardEvents.sort(j)},n}return i(t,e),t.prototype._refreshLists=function(){var e=I();this.setState({libraryEvents:e.libraryEvents.sort(j),boardEvents:e.boardEvents.sort(j)})},t.prototype.render=function(){if(!this.state.libraryEvents.length&&!this.state.boardEvents.length)return null;var e=[a.createElement("option",{value:"-1",key:"-1",disabled:!0},"Add new event")],t=0;return this.state.boardEvents.length&&e.push(a.createElement("optgroup",{label:"Board Events",key:"boardEvents"},this.state.boardEvents.map(function(e){var n="boardEvents,"+t++;return a.createElement("option",{value:n,key:n},e.name)}))),t=0,e.push(a.createElement("optgroup",{label:"Library Events",key:"libraryEvents"},this.state.libraryEvents.map(function(e){var n="libraryEvents,"+t++;return a.createElement("option",{value:n,key:n},e.name)}))),a.createElement("div",{className:"eventAddSelectEntry"},a.createElement("select",{className:"eventAddSelect",value:this.state.selectedValue,onChange:this.onSelection},e))},t}(a.Component);function I(){var e=u.getAvailableEvents(),t=[],n=s.getCurrentBoard();for(var r in n.events)t.push(_.createCustomEvent(n.events[r]));return{libraryEvents:e=e.filter(function(e){return!(e.name in n.events)}),boardEvents:t}}function j(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),o=n(4),s=n(2),l=n(77),c=n(0),u=n(3),d=n(13),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.render=function(){var e,t,n,r=this.props.currentBoard.game,i=s.currentBoardIsROM();return 2===r&&(e=o.createElement(_,{board:this.props.currentBoard})),i||(t=o.createElement(m,{board:this.props.currentBoard})),$$debug&&(n=o.createElement(A,null)),o.createElement("div",{className:"properties"},n,o.createElement(h,{romBoard:i}),o.createElement(f,{gameVersion:r,boardType:this.props.currentBoard.type}),t,e)},t}(o.Component);t.BoardProperties=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onChangeBg=function(){l.openFile("image/*",t.bgSelected)},t.bgSelected=function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){s.setBG(n.result),a.render()},n.readAsDataURL(t)}},t}return i(t,e),t.prototype.render=function(){var e;switch(this.props.gameVersion){case 1:e="960 x 720";break;case 2:case 3:e=this.props.boardType===c.BoardType.DUEL?"896 x 672":"1152 x 864"}return o.createElement("div",{className:"propertiesActionButton",onClick:this.onChangeBg,title:e},o.createElement("img",{src:"img/header/setbg.png",className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},"Change main background"))},t}(o.Component),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.onEditDetails=function(){d.changeView(c.View.DETAILS)},t.prototype.render=function(){var e=this.props.romBoard?"View board details":"Edit board details";return o.createElement("div",{className:"propertiesActionButton",onClick:this.onEditDetails},o.createElement("img",{src:"img/header/editdetails.png",className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},e))},t}(o.Component),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={noDeadEnds:!1},t.checkForDeadEnds=function(){var e=s.getDeadEnds(t.props.board);u.$$log("Dead ends",e),e.length?a.highlightSpaces(e):(t.setState({noDeadEnds:!0}),t._noDeadEndsTimeout=setTimeout(function(){delete t._noDeadEndsTimeout,t.setState({noDeadEnds:!1})},1e3))},t}return i(t,e),t.prototype.componentWillUnmount=function(){this._noDeadEndsTimeout&&(delete this._noDeadEndsTimeout,clearTimeout(this._noDeadEndsTimeout))},t.prototype.render=function(){var e,t;return this.state.noDeadEnds?e=" No dead ends":(e="Check for dead ends",t=this.checkForDeadEnds),o.createElement("div",{className:"propertiesActionButton",onClick:t},o.createElement("img",{src:"img/editor/boardproperties/deadend.png",className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},e))},t}(o.Component),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onAnimBgsChanged=function(){t.forceUpdate()},t}return i(t,e),t.prototype.render=function(){var e,t=this,n=this.props.board.animbg||[],r=0,i=n.map(function(e){return r++,o.createElement(g,{bg:e,text:"Frame "+r,key:r,index:r-1,onAnimBgsChanged:t.onAnimBgsChanged})});return n.length&&(e=o.createElement(y,null)),o.createElement("div",{className:"propertiesAnimationBGList"},o.createElement("span",{className:"propertySectionTitle"},"Animation Backgrounds",e),i,o.createElement(v,{onAnimBgsChanged:this.onAnimBgsChanged}))},t}(o.Component),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onMouseDown=function(){a.animationPlaying()||a.external.setBGImage(t.props.bg)},t.restoreMainBG=function(){a.animationPlaying()||a.renderBG()},t.onRemove=function(){s.removeAnimBG(t.props.index),t.props.onAnimBgsChanged()},t}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:"propertiesActionButton",onMouseDown:this.onMouseDown,onMouseUp:this.restoreMainBG,onMouseOut:this.restoreMainBG},o.createElement("img",{src:this.props.bg,className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},this.props.text),o.createElement("div",{role:"button",className:"animBGEntryDelete",onClick:this.onRemove,title:"Remove this animation frame"},""))},t}(o.Component),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onAddAnimBg=function(){l.openFile("image/*",t.bgSelected)},t.bgSelected=function(e){var n=e.target.files[0];if(n){var r=new FileReader;r.onload=function(e){s.addAnimBG(r.result),t.props.onAnimBgsChanged()},r.readAsDataURL(n)}},t}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:"propertiesActionButton",onClick:this.onAddAnimBg},o.createElement("img",{src:"img/toolbar/animadd.png",className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},"Add background"))},t}(o.Component),y=function(e){function t(t){var n=e.call(this,t)||this;return n.onClick=function(){n.setState({playing:!n.state.playing}),n.state.playing?a.stopAnimation():a.playAnimation()},n.state={playing:a.animationPlaying()},n}return i(t,e),t.prototype.render=function(){var e=this.state.playing?"":"";return o.createElement("div",{className:"animPlayBtn",onClick:this.onClick},e)},t.prototype.componentWillUnmount=function(){a.stopAnimation()},t}(o.Component),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return i(t,e),t.prototype.onFindSpace=function(){var e=prompt("Enter a space index");if(e){var t=parseInt(e);isNaN(t)||a.highlightSpaces([t])}},t.prototype.render=function(){return o.createElement("div",{className:"propertiesActionButton",onClick:this.onFindSpace},o.createElement("img",{src:"img/header/board.png",className:"propertiesActionButtonImg",width:"24",height:"24"}),o.createElement("span",{className:"propertiesActionButtonSpan"},"Find space by index"))},t}(o.Component)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n(2);window.addEventListener("beforeunload",function(e){var t=!1;if(window.localStorage){var n=r.getCustomEvents();try{localStorage.setItem("events",JSON.stringify(n))}catch(e){t=!0}var a=i.getBoards();try{localStorage.setItem("boards",JSON.stringify(a))}catch(e){t=!0}}else t=!0;if(t){var o="Cannot save all your boards. Return to the editor and export them?";return e.returnValue=o,o}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(120),n(400),n(401),n(118),n(132),n(402),n(133),n(119),n(403)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.BoulderChase={id:"BOULDERCHASE",name:"Boulder chase",activationType:r.EventActivationType.LANDON,executionType:r.EventExecutionType.DIRECT,fakeEvent:!0,supportedGames:[r.Game.MP1_USA],parse:function(e,t){return!!i.hashEqual([e.buffer,t.offset,116],"6E26BAB74BC8411901472C0A40E2FC1D")}},a.addEventToLibrary(t.BoulderChase)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.Bowser={id:"BOWSER",name:"Visit Bowser",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP1_USA],parse:function(e,t){var n="DAD5E635FE90ED982D02B3F1D5C0CE21",r="8A835D982BE35F1804E9ABD65C5699F4";if(i.hashEqual([e.buffer,t.offset,20],n)&&i.hashEqual([e.buffer,t.offset+28,28],r)){var a=e.getUint16(t.offset+26);return-1!==[72,73,79,83,84,91,93].indexOf(a)}return!1},write:function(e,t,n,r){return"\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n\n      ; TODO: Turn player towards bowser\n      ;addiu A0, R0, -1 ; current player\n      ;addiu A1, R0, 8\n      ;jal   0x8004D2A4\n      ;addiu A2, R0, BOWSER_STANDING_SPACE_INDEX\n\n      addiu A0, R0, "+[72,73,79,83,84,91,93][n.boardIndex]+"\n      addu  A1, R0, R0\n      addiu A2, R0, 3\n      jal   0x800587BC\n      addiu A3, R0, 1\n\n      lw    RA, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x18\n    "}},a.addEventToLibrary(t.Bowser)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),a=n(10);t.PassStart={id:"PASSSTART",name:"Pass start",activationType:i.EventActivationType.WALKOVER,executionType:i.EventExecutionType.PROCESS,supportedGames:[i.Game.MP1_USA],parse:function(e,t){var n="D87057256E3E3CA9A6878AA03EF4C486",i="9AB28DCC38CFBE9AE8FEA4515E86D7B2";return!(!r.hashEqual([e.buffer,t.offset,22],n)||!r.hashEqual([e.buffer,t.offset+28,24],i))},write:function(e,t,n,r){return'\n      addiu SP, SP, -0x18\n      sw    RA, 0x10(SP)\n\n      ; TODO: Face player towards koopa troopa\n      ;addiu A0, R0, -1\n      ;addiu A1, R0, 8\n      ;jal   0x8004D2A4\n      ;addiu A2, R0, KOOPA_TROOPA_STANDING_SPACE_INDEX\n\n      jal   koopa_start_space_event_inner\n      NOP\n      jal   EndProcess\n      addu  A0, R0, R0\n      lw    RA, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x18\n\n  .definelabel CORE_800ED192,0x800ED192\n\n  koopa_start_space_event_inner:\n      addiu SP, SP, -0x18\n      sw    RA, 0x14(SP)\n      sw    S0, 0x10(SP)\n      lui   S0, hi(CORE_800ED192)\n      addiu S0, S0, lo(CORE_800ED192)\n      lhu   V0, 0(S0)\n      addiu V0, V0, 1\n      sh    V0, 0(S0)\n      jal   IsBoardFeatureDisabled\n      addiu A0, R0, 66\n      bne   V0, R0, L800F965C\n      lui   V1, 0x6666\n      lhu   V0, 0(S0)\n      sll   V0, V0, 0x10\n      sra   A0, V0, 0x10\n      ori V1, V1, 0x6667\n      mult  A0, V1\n      mfhi  A3\n      sra   V1, A3, 2\n      sra   V0, V0, 0x1f\n      subu  V1, V1, V0\n      sll   V0, V1, 2\n      addu  V0, V0, V1\n      sll   V0, V0, 1\n      subu  A0, A0, V0\n      sll   A0, A0, 0x10\n      beq   A0, R0, L800F9624\n      NOP\n      jal   IsBoardFeatureDisabled\n      addiu A0, R0, 77\n      bne   V0, R0, L800F965C\n      NOP\n    L800F9624:\n      jal   IsBoardFeatureDisabled\n      addiu A0, R0, 77\n      beq   V0, R0, L800F963C\n      addiu A0, R0, -1\n      jal   0x80058910\n      addiu A1, R0, 1\n    L800F963C:\n      jal   SetBoardFeatureEnabled\n      addiu A0, R0, 77\n      addiu A0, R0, 95\n      addu  A1, R0, R0\n      jal   0x800587EC\n      addiu A2, R0, 1\n      j     L800F9664\n      NOP\n    L800F965C:\n      jal   receive_koopa_bonus\n      NOP\n    L800F9664:\n      lw    RA, 0x14(SP)\n      lw    S0, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x18\n\n  receive_koopa_bonus:\n      addiu SP, SP, -0x20\n      sw    RA, 0x1c(SP)\n      sw    S2, 0x18(SP)\n      sw    S1, 0x14(SP)\n      jal   GetCurrentPlayerIndex\n      sw    S0, 0x10(SP)\n      addu  S1, V0, R0\n      sll   A0, S1, 0x10\n      jal   0x800405DC\n      sra   A0, A0, 0x10\n      addiu A0, R0, -1\n      addiu A1, R0, -1\n      jal   0x80052BE8\n      addiu A2, R0, 2\n      jal   IsBoardFeatureDisabled\n      addiu A0, R0, 66\n      bnel  V0, R0, L800F94F0\n      addiu A0, R0, 65\n      addiu A0, R0, 72\n      addiu A1, R0, 60\n      addiu A2, R0, 16\n      jal   CreateTextWindow\n      addiu A3, R0, 3\n      addu  S0, V0, R0\n      sll   V0, V0, 0x10\n      sra   A0, V0, 0x10\n      addiu A1, R0, 569 ; "Nice work! Take this 10 Coin Bonus! Use it wisely"\n      addiu A2, R0, -1\n      jal   LoadStringIntoWindow\n      addiu A3, R0, -1\n      j     L800F9520\n      addiu S2, R0, 10\n    L800F94F0:\n      addiu A1, R0, 60\n      addiu A2, R0, 17\n      jal   CreateTextWindow\n      addiu A3, R0, 3\n      addu  S0, V0, R0\n      sll   V0, V0, 0x10\n      sra   A0, V0, 0x10\n      addiu    A1, R0, 570 ; "Nice work! Take this 20 Coin Bonus! Just a little bit longer..."\n      addiu    A2, R0, -1\n      jal   LoadStringIntoWindow\n      addiu    A3, R0, -1\n      addiu    S2, R0, 20\n    L800F9520:\n      sll   S0, S0, 0x10\n      sra   S0, S0, 0x10\n      addu  A0, S0, R0\n      jal   SetTextCharsPerFrame\n      addu  A1, R0, R0\n      jal   ShowTextWindow\n      addu  A0, S0, R0\n      jal   PlaySound\n      addiu A0, R0, 1074  ; Metal metal? :D\n      sll   S1, S1, 0x10\n      sra   S1, S1, 0x10\n      addu  A0, S0, R0\n      jal   0x8004DBD4\n      addu  A1, S1, R0\n      jal   HideTextWindow\n      addu  A0, S0, R0\n      addu  S0, S2, R0\n      addu  A0, S1, R0\n      jal   AdjustPlayerCoinsGradual\n      addu  A1, S0, R0\n      addu  A0, S1, R0\n      jal   ShowPlayerCoinChange\n      addu  A1, S0, R0\n      jal   SleepProcess\n      addiu A0, R0, 30 ; 30 frames\n      jal   0x8003FEFC\n      addu  A0, S1, R0\n      lw    RA, 0x1c(SP)\n      lw    S2, 0x18(SP)\n      lw    S1, 0x14(SP)\n      lw    S0, 0x10(SP)\n      jr    RA\n      addiu SP, SP, 0x20\n    '}},a.addEventToLibrary(t.PassStart)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.ThwompChainSplit={id:"THWOMPCHAINSPLIT",name:"Thwomp Chain Split",activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,fakeEvent:!0,supportedGames:[r.Game.MP1_USA],parse:function(e,t){return!!i.hashEqual([e.buffer,t.offset,64],"A45C16B1E285427C790C6FAD1EC78394")}},a.addEventToLibrary(t.ThwompChainSplit)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(127),n(123),n(131),n(129),n(125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(128),n(124),n(136),n(135),n(406),n(121),n(122),n(130),n(407),n(126)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(2);var r=n(0),i=n(1),a=n(10);t.GateChainSplit={id:"GATECHAINSPLIT",name:"",fakeEvent:!0,activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.PROCESS,supportedGames:[r.Game.MP3_USA],parse:function(e,t){return i.hashEqual([e.buffer,t.offset,68],"A99A70CBC4A1F9509AAB966831FC584E"),!1},write:function(e,n,r,i){throw new Error(t.GateChainSplit.id+" not implemented")}},a.addEventToLibrary(t.GateChainSplit)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(10);t.ReverseChainSplit={id:"REVERSECHAINSPLIT",name:"",fakeEvent:!0,activationType:r.EventActivationType.WALKOVER,executionType:r.EventExecutionType.DIRECT,supportedGames:[r.Game.MP3_USA],parse:function(e,t){return!!i.hashEqual([e.buffer,t.offset,48],"0909C95D982B8A9B1F096AC54FFFB816")},write:function(e,n,r,i){throw new Error(t.ReverseChainSplit.id+" not implemented")}},a.addEventToLibrary(t.ReverseChainSplit)},function(e,t,n){(function(n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,o=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,o){var s=a.URL||a.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,n,o):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),n);else if(r(e))t(e,n,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){i(o)})}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,d=u.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});a.saveAs=o.saveAs=o,e.exports=o})?r.apply(t,i):r)||(e.exports=a)}).call(this,n(12))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(47),s=n(77),l=n(1),c=n(13),u=n(9),d=n(410),p=n(16),f=n(3),h=n(58),m=n(25);function _(e){return a.createElement("tr",null,a.createElement("td",null,a.createElement("label",null,e.label)),a.createElement("td",null,a.createElement("input",{type:"text",className:"dbInputShort",value:e.value,onChange:e.onChange})))}function g(){s.openFile(".zip",v)}function v(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){d.load(n.result)},n.readAsArrayBuffer(t)}}function y(){c.blockUI(!0),d.create(A)}function A(e){saveAs(e,"mp"+u.romhandler.getGameVersion()+"-files.zip"),c.blockUI(!1)}t.DebugView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={sceneIndex:"",sceneRamStartAddr:"",sceneCodeStartAddr:"",sceneCodeEndAddr:"",sceneRodataStartAddr:"",sceneRodataEndAddr:"",sceneBssStartAddr:"",sceneBssEndAddr:"",romToRamNumber:"",romToRamResult:"",printStringDir:"",printStringIndex:"",findStringValue:"",printStringRaw:!1},t.onPrintSceneAsmClick=function(){var e=parseInt(t.state.sceneIndex);isNaN(e)||d.printSceneAsm(e)},t.onPrintStringClick=function(){var e=parseInt(t.state.printStringIndex,16);if(!isNaN(e)){var n,r,i=t.state.printStringRaw;if(3===u.romhandler.getGameVersion()){if(r=parseInt(t.state.printStringDir,16),isNaN(r))return;n=h.strings3.read("en",r,e,i)}else n=m.strings.read(e,i);n instanceof ArrayBuffer?l.print(n):console.log(n)}},t.onFindStringClick=function(){3===u.romhandler.getGameVersion()?d.findStrings3(t.state.findStringValue):d.findStrings(t.state.findStringValue)},t.onRomToRamClick=function(){var e="",n=parseInt(t.state.romToRamNumber,16);if(!isNaN(n)){for(var r=p.scenes.count(),i=0;i<r;i++){var a=p.scenes.getInfo(i);if(a.rom_start<=n&&n<=a.rom_end){var o=n-a.rom_start;e="RAM: "+f.$$hex(a.ram_start+o,"")+"\n",e+="Overlay "+i+" ("+f.$$hex(i)+") offset +"+o+" (+"+f.$$hex(o)+")"}}e||n>=4096&&(e="RAM: "+f.$$hex((n-3072|2147483648)>>>0))}e?t.setState({romToRamResult:e}):t.setState({romToRamResult:"Unknown"})},t.onSceneIndexChange=function(e){t.setState({sceneIndex:e.target.value});var n=parseInt(e.target.value);if(isNaN(n))t.clearSceneValues();else{var r=p.scenes.getInfo(n);r?(t.setState({sceneRamStartAddr:f.$$hex(r.ram_start,"")}),t.setState({sceneCodeStartAddr:f.$$hex(r.code_start,"")}),t.setState({sceneCodeEndAddr:f.$$hex(r.code_end,"")}),t.setState({sceneRodataStartAddr:f.$$hex(r.rodata_start,"")}),t.setState({sceneRodataEndAddr:f.$$hex(r.rodata_end,"")}),t.setState({sceneBssStartAddr:f.$$hex(r.bss_start,"")}),t.setState({sceneBssEndAddr:f.$$hex(r.bss_end,"")})):t.clearSceneValues()}},t.onOverlayDownloadClick=function(){var e=parseInt(t.state.sceneIndex);if(!isNaN(e)){var n=p.scenes.getDataView(e);saveAs(new Blob([n]),"overlay-"+e+".bin")}},t.onOverlayReplaceClick=function(){var e=parseInt(t.state.sceneIndex);isNaN(e)||s.openFile("",function(n){var r=n.target.files[0];if(r){var i=new FileReader;i.onload=function(n){var r={ram_start:parseInt(t.state.sceneRamStartAddr,16),code_start:parseInt(t.state.sceneCodeStartAddr,16),code_end:parseInt(t.state.sceneCodeEndAddr,16),rodata_start:parseInt(t.state.sceneRodataStartAddr,16),rodata_end:parseInt(t.state.sceneRodataEndAddr,16),bss_start:parseInt(t.state.sceneBssStartAddr,16),bss_end:parseInt(t.state.sceneBssEndAddr,16)};p.scenes.replace(e,i.result,r)},i.readAsArrayBuffer(r)}})},t}return i(t,e),t.prototype.render=function(){var e,t=this,n=!!u.romhandler.getROMBuffer();return n&&(e=a.createElement(a.Fragment,null,a.createElement(o.Button,{onClick:g},"Import file dump"),a.createElement(o.Button,{onClick:y},"Export file dump"),a.createElement("br",null),a.createElement("br",null),a.createElement(o.Button,{onClick:d.images},"Dump images"),a.createElement(o.Button,{onClick:d.formImages},"Print FORM images (console)"),a.createElement("br",null),a.createElement("br",null),a.createElement(o.Button,{onClick:d.printSceneTable},"Print scene table (console)"),a.createElement(o.Button,{onClick:d.printSceneN64Split},"Print scene table n64split (console)"),a.createElement("br",null),a.createElement("br",null),a.createElement("input",{type:"text",placeholder:"Directory",className:"dbInputShort",value:this.state.printStringDir,onChange:function(e){return t.setState({printStringDir:e.target.value})}}),a.createElement("input",{type:"text",placeholder:"Index",className:"dbInputShort",value:this.state.printStringIndex,onChange:function(e){return t.setState({printStringIndex:e.target.value})}}),a.createElement(o.Button,{onClick:this.onPrintStringClick},"Print string (console)"),a.createElement("input",{type:"checkbox",checked:this.state.printStringRaw,onChange:function(e){return t.setState({printStringRaw:e.target.checked})}})," ",a.createElement("label",null,"Raw?"),a.createElement("br",null),a.createElement("input",{type:"text",placeholder:"Search string",className:"dbInputShort",value:this.state.findStringValue,onChange:function(e){return t.setState({findStringValue:e.target.value})}}),a.createElement(o.Button,{onClick:this.onFindStringClick},"Find string (console)"),a.createElement("br",null),a.createElement("br",null),a.createElement("input",{type:"text",placeholder:"ROM Offset",className:"dbInputShort",value:this.state.romToRamNumber,onChange:function(e){return t.setState({romToRamNumber:e.target.value,romToRamResult:""})}}),a.createElement(o.Button,{onClick:this.onRomToRamClick},"ROM -> RAM"),a.createElement("br",null),a.createElement("span",{className:"selectable dbMonospace"},this.state.romToRamResult),a.createElement("br",null),a.createElement("br",null),a.createElement("input",{type:"text",placeholder:"Scene number",className:"dbInputShort",value:this.state.sceneIndex,onChange:this.onSceneIndexChange}),a.createElement(o.Button,{onClick:this.onPrintSceneAsmClick},"Print scene assembly (console)"),a.createElement(o.Button,{onClick:this.onOverlayDownloadClick},"Download"),a.createElement(o.Button,{onClick:this.onOverlayReplaceClick},"Replace"),a.createElement("br",null),a.createElement("table",{role:"presentation"},a.createElement("tbody",null,a.createElement(_,{label:"RAM start:",value:this.state.sceneRamStartAddr,onChange:this.makeSceneValueSetter("sceneRamStartAddr")}),a.createElement(_,{label:"code start:",value:this.state.sceneCodeStartAddr,onChange:this.makeSceneValueSetter("sceneCodeStartAddr")}),a.createElement(_,{label:"code end:",value:this.state.sceneCodeEndAddr,onChange:this.makeSceneValueSetter("sceneCodeEndAddr")}),a.createElement(_,{label:"rodata start:",value:this.state.sceneRodataStartAddr,onChange:this.makeSceneValueSetter("sceneRodataStartAddr")}),a.createElement(_,{label:"rodata end:",value:this.state.sceneRodataEndAddr,onChange:this.makeSceneValueSetter("sceneRodataEndAddr")}),a.createElement(_,{label:"bss start:",value:this.state.sceneBssStartAddr,onChange:this.makeSceneValueSetter("sceneBssStartAddr")}),a.createElement(_,{label:"bss end:",value:this.state.sceneBssEndAddr,onChange:this.makeSceneValueSetter("sceneBssEndAddr")}))))),a.createElement("div",{id:"debugView"},a.createElement("h3",null,"Debug Functionality"),!n&&a.createElement("p",null,"Load a ROM to access more functionality here."),e)},t.prototype.makeSceneValueSetter=function(e){var t=this;return function(n){var r,i=parseInt(n.target.value,16);isNaN(i)||t.setState(((r={})[e]=f.$$hex(i,""),r))}},t.prototype.clearSceneValues=function(){this.setState({sceneRamStartAddr:""}),this.setState({sceneCodeStartAddr:""}),this.setState({sceneCodeEndAddr:""}),this.setState({sceneRodataStartAddr:""}),this.setState({sceneRodataEndAddr:""}),this.setState({sceneBssStartAddr:""}),this.setState({sceneBssEndAddr:""})},t}(a.Component);["setUint8","setInt8","setUint16","setInt16","setUint32","setInt32","setFloat32","setFloat64"].forEach(function(e){var t=DataView.prototype[e];DataView.prototype[e]=function(n,r){if("number"!=typeof n)throw new Error("Invalid offset in "+e);if("number"!=typeof r)throw new Error("Invalid value in "+e);t.apply(this,arguments)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(1),a=n(28),o=n(37),s=n(36),l=n(70),c=n(18),u=n(58),d=n(25),p=n(16),f=n(9),h=n(57),m=n(103),_=n(27),g=n(13),v=n(166);t.create=function(e){for(var t=new v,n=t.folder("mainfs"),r=c.mainfs.getDirectoryCount(),i=0;i<r;i++)for(var a=n.folder(i.toString()),o=c.mainfs.getFileCount(i),s=0;s<o;s++){var l=c.mainfs.get(i,s),u=s.toString();h.FORM.isForm(l)?u+=".form":m.MTNX.isMtnx(l)&&(u+=".mtnx"),a.file(u,l)}t.generateAsync({type:"blob"}).then(e)},t.load=function(e){(new v).loadAsync(e).then(function(e){var t=e.folder("mainfs");t.forEach(function(e,n){var i=e.match(/(\d+)\/(\d+)/);if(i){var a=parseInt(i[1]),o=parseInt(i[2]);isNaN(a)||isNaN(o)||n.async("arraybuffer").then(function(e){r.$$log("Overwriting MainFS "+a+"/"+o),t.write(a,o,e)})}})},function(e){r.$$log(e),g.showMessage("Something went wrong while loading the zip. "+e)})},t.images=function(){for(var e=new v,t=e.folder("mainfs"),n=c.mainfs.getDirectoryCount(),r=function(e){for(var n=t.folder(e.toString()),r=c.mainfs.getFileCount(e),a=function(t){try{var r=c.mainfs.get(e,t);if(h.FORM.isForm(r)){var a=h.FORM.unpack(r);a.BMP1.length&&a.BMP1.forEach(function(e,r){var a=i.arrayBufferToDataURL(e.parsed.src,e.parsed.width,e.parsed.height);n.file(t+"."+r+".png",a.substr(a.indexOf(",")+1),{base64:!0})})}else{var o=function(e,t){var n=c.mainfs.get(e,t),r=s.fromPack(n);if(r&&r.length)return r}(e,t);if(o.forEach(function(e,r){var a=i.arrayBufferToDataURL(e.src,e.width,e.height);n.file(t+"."+r+".png",a.substr(a.indexOf(",")+1),{base64:!0})}),o.length>1){var u=l.fromTiles(function(e,t){var n=c.mainfs.get(e,t),r=s.fromPack(n);if(r&&r.length)return r.map(function(e){return new DataView(e.src)})}(e,t),o.length,1,4*o[0].width,o[0].height),d=i.arrayBufferToDataURL(u,o[0].width*o.length,o[0].height);n.file(t+".all.png",d.substr(d.indexOf(",")+1),{base64:!0})}}}catch(e){}},o=0;o<r;o++)a(o)},a=0;a<n;a++)r(a);e.generateAsync({type:"blob"}).then(function(e){saveAs(e,"mp"+f.romhandler.getGameVersion()+"-images.zip")})},t.formImages=function(){for(var e=c.mainfs.getDirectoryCount(),t=function(e){for(var t=c.mainfs.getFileCount(e),n=function(t){var n=c.mainfs.get(e,t);if(!h.FORM.isForm(n))return"continue";try{var r=h.FORM.unpack(n);r.BMP1.length&&r.BMP1.forEach(function(n){var r=i.arrayBufferToDataURL(n.parsed.src,n.parsed.width,n.parsed.height);console.log(e+"/"+t+":"),console.log(r)})}catch(e){}},r=0;r<t;r++)n(r)},n=0;n<e;n++)t(n)},t.findStrings3=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);for(var n=u.strings3.getDirectoryCount("en"),a=0;a<n;a++)for(var o=u.strings3.getStringCount("en",a),s=0;s<o;s++){var l=u.strings3.read("en",a,s);if(!(l.indexOf(e)<0)){var c=a+"/"+s+" ("+r.$$hex(a)+"/"+r.$$hex(s)+"):\n"+l;t&&(c+="\n"+i.toHexString(u.strings3.read("en",a,s,!0))),console.log(c)}}},t.findStrings=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);for(var n=d.strings.getStringCount(),a=0;a<n;a++){var o=d.strings.read(a);if(!(o.indexOf(e)<0)){var s=a+" ("+r.$$hex(a)+"):\n"+o;t&&(s+="\n"+i.toHexString(d.strings.read(a,!0))),console.log(s)}}},t.saveWaluigi=function(){if(3!==f.romhandler.getGameVersion())throw"Waluigi is not in game "+f.romhandler.getGameVersion();window.waluigiParts=[];for(var e=0;e<163;e++)window.waluigiParts.push(c.mainfs.get(8,e));return window.waluigiParts},t.writeWaluigi=function(e){if(void 0===e&&(e=1),1!==f.romhandler.getGameVersion())throw"Waluigi cannot write to MP"+f.romhandler.getGameVersion();if(!window.waluigiParts)throw"Need to call saveWaluigi first!";163===window.waluigiParts.length&&window.waluigiParts.splice(158,2);for(var t=0;t<window.waluigiParts.length;t++)c.mainfs.write(e,t,window.waluigiParts[t])},t.saveDaisy=function(){if(3!==f.romhandler.getGameVersion())throw"Daisy is not in game "+f.romhandler.getGameVersion();return window.daisyParts=[],window.daisyParts.push(c.mainfs.get(9,1)),window.daisyParts.push(c.mainfs.get(9,3)),window.daisyParts},t.writeDaisy=function(e){if(void 0===e&&(e=6),1!==f.romhandler.getGameVersion())throw"Daisy cannot write to MP"+f.romhandler.getGameVersion();if(!window.daisyParts)throw"Need to call saveDaisy first!";c.mainfs.write(e,158,window.daisyParts[0]),c.mainfs.write(e,159,window.daisyParts[1])},t.searchForPatchLocations=function(e){if(!e)throw"Please pass a ROM offset the game tries to read at runtime";for(var t=(4294901760&e)>>>16,n=65535&e,i=0,a=f.romhandler.getDataView(),o=a.byteLength-10,s=2;s<o;s+=2){var l=a.getUint16(s);if(l===t||l+1===t||l-1===t){var c=0;(s>8&&a.getUint16(c=s-8)===n||s>4&&a.getUint16(c=s-4)===n||a.getUint16(c=s+2)===n||a.getUint16(c=s+3)===n||a.getUint16(c=s+4)===n||a.getUint16(c=s+5)===n||a.getUint16(c=s+6)===n||a.getUint16(c=s+7)===n||a.getUint16(c=s+8)===n||a.getUint16(c=s+9)===n||a.getUint16(c=s+10)===n||a.getUint16(c=s+12)===n||a.getUint16(c=s+16)===n||a.getUint16(c=s+20)===n)&&(console.log("Found "+r.$$hex(s)+", "+r.$$hex(c)+" ("+(c-s)+") Lower inst: "+r.$$hex(a.getUint16(c-2))),i++)}}console.log("Found "+i+" possible locations")},t.printSceneTable=function(){var e=_.getROMAdapter();if(e&&e.SCENE_TABLE_ROM){for(var t=p.scenes.count(),n=[],i=0;i<t;i++){var a=p.scenes.getInfo(i);n.push({i:r.$$hex(i),rom_start:r.$$hex(a.rom_start),rom_end:r.$$hex(a.rom_end),code_start:r.$$hex(a.code_start),rodata_start:r.$$hex(a.rodata_start),bss_start:r.$$hex(a.bss_start),bss_end:r.$$hex(a.bss_end)})}console.table(n)}else console.log("ROM is not loaded, or scene table location is unknown")},t.printSceneN64Split=function(){var e=_.getROMAdapter();if(e&&e.SCENE_TABLE_ROM){for(var t=p.scenes.count(),n=[],i=0;i<t;i++){var a=p.scenes.getInfo(i);n.push("   - ["+r.$$hex(a.rom_start)+", "+r.$$hex(a.rom_start+(a.code_end-a.code_start))+', "asm", "overlay'+i+'_main", '+r.$$hex(a.code_start)+"]"),n.push("   - ["+r.$$hex(a.rom_start+(a.rodata_start-a.code_start))+", "+r.$$hex(a.rom_start+(a.rodata_end-a.code_start))+', "bin", "overlay'+i+'_rodata_bin"]'),n.push("   # overlay"+i+" bss: "+r.$$hex(a.bss_start)+" - "+r.$$hex(a.bss_end))}console.log(n.join("\n"))}else console.log("ROM is not loaded, or scene table location is unknown")},t.printAsm=function(e,t){for(var n=f.romhandler.getDataView(),i=e,o=[];i<=t;){var s=n.getUint32(i),l="? "+r.$$hex(s);try{l=a.print(s)}catch(e){console.log("UNRECOGNIZED: "+r.$$hex(s))}o.push(r.$$hex(i)+": "+l),i+=4}console.log(o.join("\n"))},t.printSceneAsm=function(e){for(var t=p.scenes.getInfo(e),n=t.code_start,i=p.scenes.getCodeDataView(e),s=[],l=0;l<i.byteLength;l+=4){var c=i.getUint32(l),u="? "+r.$$hex(c);try{u=a.print(c)}catch(e){console.log("UNRECOGNIZED: "+r.$$hex(c))}s.push(r.$$hex(n)+": "+u),n+=4}console.log(s.join("\n"));var d=p.scenes.getRoDataView(e),f=[];n=t.rodata_start;for(var h=0;h<d.byteLength;)f.push("D_"+r.$$hex(n,"")+": "+o.pad(r.$$hex(d.getUint32(h),""),8,"0")),f.push("D_"+r.$$hex(n+4,"")+": "+o.pad(r.$$hex(d.getUint32(h+4),""),8,"0")),f.push("D_"+r.$$hex(n+8,"")+": "+o.pad(r.$$hex(d.getUint32(h+8),""),8,"0")),f.push("D_"+r.$$hex(n+12,"")+": "+o.pad(r.$$hex(d.getUint32(h+12),""),8,"0")),n+=16,h+=16;console.log(f.join("\n")),f=[];for(var m=t.bss_start;m<t.bss_end;m+=4)f.push("D_"+r.$$hex(m,"")+": .word 0");console.log(f.join("\n"))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(9),s=n(53),l=n(27),c=n(412),u=n(47),d=n(195),p=n(415),f=n(112),h=n(19),m=function(e){function t(t){var n=e.call(this,t)||this;return n.onPlayMidi=function(e,t){var r=c.playMidi(e,t);r.addOnFinished(function(){n.setState({playbackController:null,playing:!1})}),n.setState({playbackController:r,playingType:"midi",playing:[e,t]})},n.onPlaySound=function(e,t){var r=p.playSound(e,t);r.addOnFinished(function(){n.setState({playbackController:null,playing:!1})}),n.setState({playbackController:r,playingType:"sound",playing:[e,t]})},n.onStop=function(e,t){n.state.playbackController&&n.state.playbackController.stop()},n.state={playingType:"none",hasError:!1,playing:!1},n}return i(t,e),t.prototype.render=function(){if(this.state.hasError)return a.createElement("p",null,"An error was encountered.");for(var e=o.romhandler.getGameVersion(),t=l.getAdapter(e),n=t.getAudioMap(),r=h.get(h.$setting.uiAdvanced),i=[],c=s.audio.getSequenceTableCount(),p=function(e){e>0&&i.push(a.createElement("tr",{key:e+"hr"},a.createElement("td",{colSpan:2},a.createElement("hr",null))));for(var t=s.audio.getSequenceTable(e),o=function(t){var o=!1,l=!1;m.state.playing&&(l=!(o=e===m.state.playing[0]&&t===m.state.playing[1]&&"midi"===m.state.playingType));var c=void 0,p=n[t],f=t+", 0x"+t.toString(16).toUpperCase();c=p?a.createElement("span",{title:f},p,r&&a.createElement("span",{className:"audioIndexBesideName"}," ("+f+")")):a.createElement("span",{title:f},f),i.push(a.createElement(g,{key:e+"-"+t,table:e,index:t,isPlaying:o,cannotPlay:l,trackName:c,onPlay:m.onPlayMidi,onStop:m.onStop,exportButton:a.createElement(u.Button,{onClick:function(){return function(e,t,n){n=n||"music";var r=s.audio.getSequenceTable(e).midis[t].buffer,i=d.parseGameMidi(new DataView(r),r.byteLength);saveAs(new Blob([i]),n+".midi")}(e,t,p||"Unknown")},css:"btnAudioExport"},a.createElement("img",{src:"img/audio/export.png",height:"16",width:"16"}),"midi")}))},l=0;l<t.midis.length;l++)o(l)},m=this,v=0;v<c;v++)p(v);var y=[],A=s.audio.getSoundTableCount(),x=function(e){e>0&&y.push(a.createElement("tr",{key:e+"-s-hr"},a.createElement("td",{colSpan:2},a.createElement("hr",null))));for(var n=s.audio.getSoundTable(e),i=t.getSoundEffectMap(e),o=function(t){var n=!1,o=!1;S.state.playing&&(o=!(n=e===S.state.playing[0]&&t===S.state.playing[1]&&"sound"===S.state.playingType));var l=void 0,c=i[t],d=t+", 0x"+t.toString(16).toUpperCase();l=c?a.createElement("span",{title:d},c,r&&a.createElement("span",{className:"audioIndexBesideName"}," ("+d+")")):a.createElement("span",{title:d},d),y.push(a.createElement(g,{key:e+"-s-"+t,table:e,index:t,isPlaying:n,cannotPlay:o,trackName:l,onPlay:S.onPlaySound,onStop:S.onStop,exportButton:a.createElement(u.Button,{onClick:function(){return function(e,t,n){n=n||"sound";var r=s.audio.getSoundTable(e),i=r.sounds[t],a=f.extractWavFromSound(r.tbl,i,i.sampleRate);saveAs(new Blob([a]),n+".wav")}(e,t,name)},css:"btnAudioExport"},a.createElement("img",{src:"img/audio/export.png",height:"16",width:"16"}),"wav")}))},l=0;l<n.sounds.length;l++)o(l)},S=this;for(v=0;v<A;v++)x(v);return a.createElement("div",{className:"audioViewContainer"},a.createElement("h2",null,"Audio"),a.createElement("p",null,"This is an experimental audio player."),a.createElement("h3",null,"Sound Tracks"),a.createElement(_,{listing:i}),a.createElement("h3",null,"Sound Effects"),a.createElement(_,{listing:y}))},t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0}),console.error(e)},t}(a.Component);function _(e){return a.createElement("table",{className:"audioViewTable"},Array.isArray(e.listing)?a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",{className:"audioViewTableIconColumn"}))):null,a.createElement("tbody",null,e.listing))}t.AudioViewer=m;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this,t=a.createElement("td",null);if(this.props.isPlaying)t=a.createElement("td",null,a.createElement("img",{src:"img/audio/stop.png",alt:"Stop audio",title:"Stop audio",onClick:function(){return e.props.onStop(e.props.table,e.props.index)}}));else{var n=this.props.cannotPlay?"audioRowIconNoAction":"";t=a.createElement("td",null,a.createElement("img",{src:"img/audio/play.png",alt:"Play audio",title:"Play audio",className:n,onClick:function(){e.props.cannotPlay||e.props.onPlay(e.props.table,e.props.index)}}))}return a.createElement("tr",{className:"audioTableRow"},a.createElement("td",null,this.props.trackName),this.props.exportButton&&a.createElement("td",null,this.props.exportButton),t)},t}(a.Component)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(413),i=n(53),a=n(195),o=n(112),s=n(3),l=n(196);t.playMidi=function(e,t){if(l.getIsPlaying())throw new Error("Should not play more than one audio source at once.");var n=l.getAudioContext(),u=i.audio.getSequenceTable(e);console.log(u);var d=u.midis[t].buffer,p=a.parseGameMidi(new DataView(d),d.byteLength);s.$$log(p);for(var f=[],h=[],m=u.midis[t].soundbankIndex,_=u.soundbanks.banks[m],g=0;g<_.instruments.length;g++){h[g]=[];for(var v=_.instruments[g],y=function(e){var t=v.sounds[e],r=o.extractWavSound(u.tbl,_,g,e),i=h[g];i.push(null);var a=i.length-1,s=v.volume,l=n.decodeAudioData(r).then(function(e){i[a]={audioBuffer:e,keymap:t.keymap,instrumentVolume:s,soundVolume:t.sampleVolume}});f.push(l)},A=0;A<v.sounds.length;A++)y(A)}for(var x=[],S=[],b=0;b<_.instruments.length;b++)S.push(b);var w=[],E=[],P=[];for(b=0;b<=16;b++)P.push(127);function C(e){var t=e.track,n=e.channel||w[t],r=E[n];if(h[r]){x[n]||(x[n]={}),x[n][t]||(x[n][t]={});var i=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t>=i.keymap.keyMin&&t<=i.keymap.keyMax)return i}return null}(h[r],e.noteNumber);if(i){var a=x[n][t][e.noteNumber];if(e.velocity){a&&console.warn("There was a previous node playing for "+n+" note number "+e.noteNumber);var o=function(e,t,n,r){var i=l.getAudioContext(),a=i.createBufferSource();if(a.buffer=e.audioBuffer,a.detune.value=e.keymap.detune,t!==e.keymap.keyBase){var o=t-e.keymap.keyBase,s=100*o;a.detune.value+=s}var u=i.createGain();return u.gain.value=e.instrumentVolume/c,u.gain.value*=e.soundVolume/c,u.gain.value*=r/c,u.gain.value*=n/c,u.connect(i.destination),a.connect(u),a}(i,e.noteNumber,e.velocity,P[n]);o.start(0),x[n][t][e.noteNumber]=o}else a?a.stop():console.warn("There wasn't a node to stop playing for channel "+n+" track "+t+" note number "+e.noteNumber),x[n][t][e.noteNumber]=null}else console.warn("No note for channel "+n+" instrument "+r+" note number "+e.noteNumber)}else console.warn("Instrument "+r+" is unrecongized")}var T=new r.Player(function(e){s.$$log(e),function(e,t){var n=t.track,r=t.channel;if("channel"in t&&"track"in t&&(w[n]=r),"Program Change"===e)E[t.channel]=t.value;else if("Controller Change"===e)switch(t.number){case 7:"value"in t&&(P[r]=t.value);break;default:s.$$log("Unrecongized controller change event",t)}else"Note on"===e?C(t):t.running?"track"in t&&"noteNumber"in t&&"velocity"in t&&C(t):"End of Track"===e||s.$$log("Ignored event",t)}(e.name,e),e.name&&e.name});return T.on("endOfFile",function(){l.setIsPlaying(!1)}),T.loadArrayBuffer(p),Promise.all(f).then(function(){s.$$log(h),T.play()}),new l.AudioPlayerController(T)};var c=127},function(e,t,n){var r;e.exports=function e(t,n,i){function a(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof r&&r;if(!l&&c)return r(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return a(n||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){"use strict";n.byteLength=function(e){return 3*e.length/4-c(e)},n.toByteArray=function(e){var t,n,r,o,s,l=e.length;o=c(e),s=new a(3*l/4-o),n=o>0?l-4:l;var u=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[u++]=r>>16&255,s[u++]=r>>8&255,s[u++]=255&r;return 2===o?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[u++]=255&r):1===o&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[u++]=r>>8&255,s[u++]=255&r),s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a="",o=[],s=0,l=n-i;s<l;s+=16383)o.push(u(e,s,s+16383>l?l:s+16383));return 1===i?(t=e[n-1],a+=r[t>>2],a+=r[t<<4&63],a+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],a+=r[t>>10],a+=r[t>>4&63],a+=r[t<<2&63],a+="="),o.push(a),o.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function u(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var r=e("base64-js"),i=e("ieee754");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50;var a=2147483647;function o(e){if(e>a)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return l(e,t,n)}function l(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return j(e)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=s.prototype,r}(e,t,n):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t):function(e){if(s.isBuffer(e)){var t=0|p(e.length),n=o(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(N(e)||"length"in e)return"number"!=typeof e.length||U(e.length)?o(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e){return c(e),o(e<0?0:0|p(e))}function d(e){for(var t=e.length<0?0:0|p(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(N(e)||j(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return k(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),U(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var d=!0,p=0;p<l;p++)if(c(e,a+p)!==c(t,p)){d=!1;break}if(d)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(U(s))return o;e[n+o]=s}return o}function v(e,t,n,r){return I(B(t,e.length-n),e,n,r)}function y(e,t,n,r){return I(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function A(e,t,n,r){return y(e,t,n,r)}function x(e,t,n,r){return I(k(t),e,n,r)}function S(e,t,n,r){return I(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}n.kMaxLength=a,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return l(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},s.allocUnsafe=function(e){return u(e)},s.allocUnsafeSlow=function(e){return u(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,l=Math.min(a,o),c=this.slice(r,i),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],o=u[d];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=t;o<n;++o)a+=(r=e[o])<16?"0"+r.toString(16):r.toString(16);return a}function V(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function F(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,a){return t=+t,n>>>=0,a||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,a){return t=+t,n>>>=0,a||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:new s(e,r),l=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%l]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function k(e){return r.toByteArray(function(e){if((e=e.trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function N(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function U(e){return e!=e}},{"base64-js":1,ieee754:3}],3:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,p=n?-1:1,f=e[t+d];for(d+=p,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=c}return(f?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+f]=255&o,f+=h,o/=256,c-=8);e[n+f-h]|=128*m}},{}],4:[function(e,t,n){"use strict";for(var r={VERSION:"2.0.5",NOTES:[],CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},i=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],a=0,o=function(e){i.forEach(function(t){t.forEach(function(t){return r.NOTES[a]=t+e}),a++})},s=-1;s<=9;s++)o(s);n.Constants=r},{}],5:[function(e,t,n){"use strict";var r=e("./player"),i=e("./utils"),a=e("./constants");t.exports={Player:r.Player,Utils:i.Utils,Constants:a.Constants}},{"./constants":4,"./player":6,"./utils":8}],6:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./utils").Utils,o=e("./track").Track;Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var s=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.sampleRate=5,this.startTime=0,this.buffer=n||null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},"function"==typeof e&&this.on("midiEvent",e)}return i(t,[{key:"loadFile",value:function(t){var n=e("fs");return this.buffer=n.readFileSync(t),this.fileLoaded()}},{key:"loadArrayBuffer",value:function(e){return this.buffer=new Uint8Array(e),this.fileLoaded()}},{key:"loadDataUri",value:function(e){for(var t=a.atob(e.split(",")[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return this.buffer=n,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return"MThd"===a.bytesToLetters(this.buffer.subarray(0,4))}},{key:"getFormat",value:function(){return this.format=a.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var e=0;e<this.buffer.length;){if("MTrk"==a.bytesToLetters(this.buffer.subarray(e,e+4))){var t=a.bytesToNumber(this.buffer.subarray(e+4,e+8));this.tracks.push(new o(this.tracks.length,this.buffer.subarray(e+8,e+8+t)))}e+=a.bytesToNumber(this.buffer.subarray(e+4,e+8))+8}return this}},{key:"enableTrack",value:function(e){return this.tracks[e-1].enable(),this}},{key:"disableTrack",value:function(e){return this.tracks[e-1].disable(),this}},{key:"getDivision",value:function(){return this.division=a.bytesToNumber(this.buffer.subarray(12,14)),this}},{key:"playLoop",value:function(e){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach(function(t){if(!e&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var n=t.handleEvent(this.tick,e);e&&n?(n.hasOwnProperty("name")&&"Set Tempo"===n.name&&(this.defaultTempo=n.data,this.setTempo(n.data)),n.hasOwnProperty("name")&&"Program Change"===n.name&&(this.instruments.includes(n.value)||this.instruments.push(n.value))):n&&this.emitEvent(n)}},this),e||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(e){return this.tempo=e,this}},{key:"setStartTime",value:function(e){this.startTime=e}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=(new Date).getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(e){return this.stop(),this.startTick=e,this.tracks.forEach(function(t){t.setEventIndexByTick(e)}),this}},{key:"skipToPercent",value:function(e){if(e<0||e>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(e/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(e){var t=this.getSongTime();if(e<0||e>t)throw e+" seconds not within song time of "+t;return this.skipToPercent(e/t*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||"object"===r(this.setIntervalId)}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach(function(e){return e.reset()}),this}},{key:"getEvents",value:function(){return this.tracks.map(function(e){return e.events})}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map(function(e){return e.delta}))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce(function(e,t){return{events:{length:e.events.length+t.events.length}}},{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return 14+8*this.tracks.length+this.tracks.reduce(function(e,t){return{pointer:e.pointer+t.pointer}},{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce(function(e,t){return{eventIndex:e.eventIndex+t.eventIndex}},{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()==this.buffer.length}},{key:"getCurrentTick",value:function(){return!this.startTime&&this.tick?this.startTick:this.startTime?Math.round(((new Date).getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:0}},{key:"emitEvent",value:function(e){return this.triggerPlayerEvent("midiEvent",e),this}},{key:"on",value:function(e,t){return this.eventListeners.hasOwnProperty(e)||(this.eventListeners[e]=[]),this.eventListeners[e].push(t),this}},{key:"triggerPlayerEvent",value:function(e,t){return this.eventListeners.hasOwnProperty(e)&&this.eventListeners[e].forEach(function(e){return e(t||{})}),this}}]),t}();n.Player=s},{"./track":7,"./utils":8,fs:"fs"}],7:[function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./constants").Constants,a=e("./utils").Utils,o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=t,this.data=n,this.delta=0,this.runningDelta=0,this.events=[]}return r(e,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(e){for(var t in e=e||0,this.events)if(this.events[t].tick>=e)return this.eventIndex=t,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){for(var e=this.getCurrentByte(),t=1;e>=128;)e=this.data[this.pointer+t],t++;return t}},{key:"getDelta",value:function(){return a.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(e,t){if(t=t||!1){var n=e-this.lastTick,r=this.getDelta(),i=n>=r;if(this.pointer<this.data.length&&(t||i)){var a=this.parseEvent();if(this.enabled)return a}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=e&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(e){this.pointer;var t=a.readVarInt(this.data.subarray(e+2,e+2+1));return a.bytesToLetters(this.data.subarray(e+1+2,e+1+t+2))}},{key:"parseEvent",value:function(){var e=this.pointer+this.getDeltaByteCount(),t={},n=this.getDeltaByteCount();if(t.track=this.index+1,t.delta=this.getDelta(),this.lastTick=this.lastTick+t.delta,this.runningDelta+=t.delta,t.tick=this.runningDelta,t.byteIndex=this.pointer,255==this.data[e]){switch(this.data[e+1]){case 0:t.name="Sequence Number";break;case 1:t.name="Text Event",t.string=this.getStringData(e);break;case 2:t.name="Copyright Notice";break;case 3:t.name="Sequence/Track Name",t.string=this.getStringData(e);break;case 4:t.name="Instrument Name",t.string=this.getStringData(e);break;case 5:t.name="Lyric",t.string=this.getStringData(e);break;case 6:t.name="Marker";break;case 7:t.name="Cue Point",t.string=this.getStringData(e);break;case 9:t.name="Device Name",t.string=this.getStringData(e);break;case 32:t.name="MIDI Channel Prefix";break;case 33:t.name="MIDI Port",t.data=a.bytesToNumber([this.data[e+3]]);break;case 47:t.name="End of Track";break;case 81:t.name="Set Tempo",t.data=Math.round(6e7/a.bytesToNumber(this.data.subarray(e+3,e+6))),this.tempo=t.data;break;case 84:t.name="SMTPE Offset";break;case 88:t.name="Time Signature",t.data=this.data.subarray(e+3,e+7),t.timeSignature=t.data[0]+"/"+Math.pow(2,t.data[1]);break;case 89:t.name="Key Signature",t.data=this.data.subarray(e+3,e+5),t.data[0]>=0?t.keySignature=i.CIRCLE_OF_FIFTHS[t.data[0]]:t.data[0]<0&&(t.keySignature=i.CIRCLE_OF_FOURTHS[Math.abs(t.data[0])]),0==t.data[1]?t.keySignature+=" Major":1==t.data[1]&&(t.keySignature+=" Minor");break;case 127:t.name="Sequencer-Specific Meta-event";break;default:t.name="Unknown: "+this.data[e+1].toString(16)}var r=this.data[this.pointer+n+2];this.pointer+=n+3+r}else if(240==this.data[e]){t.name="Sysex";var r=this.data[this.pointer+n+1];this.pointer+=n+2+r}else this.data[e]<128?(t.running=!0,t.noteNumber=this.data[e],t.noteName=i.NOTES[this.data[e]],t.velocity=this.data[e+1],this.lastStatus<=143?(t.name="Note off",t.channel=this.lastStatus-128+1):this.lastStatus<=159&&(t.name="Note on",t.channel=this.lastStatus-144+1),this.pointer+=n+2):(this.lastStatus=this.data[e],this.data[e]<=143?(t.name="Note off",t.channel=this.lastStatus-128+1,t.noteNumber=this.data[e+1],t.noteName=i.NOTES[this.data[e+1]],t.velocity=Math.round(this.data[e+2]/127*100),this.pointer+=n+3):this.data[e]<=159?(t.name="Note on",t.channel=this.lastStatus-144+1,t.noteNumber=this.data[e+1],t.noteName=i.NOTES[this.data[e+1]],t.velocity=Math.round(this.data[e+2]/127*100),this.pointer+=n+3):this.data[e]<=175?(t.name="Polyphonic Key Pressure",t.channel=this.lastStatus-160+1,t.note=i.NOTES[this.data[e+1]],t.pressure=event[2],this.pointer+=n+3):this.data[e]<=191?(t.name="Controller Change",t.channel=this.lastStatus-176+1,t.number=this.data[e+1],t.value=this.data[e+2],this.pointer+=n+3):this.data[e]<=207?(t.name="Program Change",t.channel=this.lastStatus-192+1,t.value=this.data[e+1],this.pointer+=n+2):this.data[e]<=223?(t.name="Channel Key Pressure",t.channel=this.lastStatus-208+1,this.pointer+=n+2):this.data[e]<=239?(t.name="Pitch Bend",t.channel=this.lastStatus-224+1,this.pointer+=n+3):t.name="Unknown.  Pointer: "+this.pointer.toString()+" "+e.toString()+" "+this.data.length);return this.delta+=t.delta,this.events.push(t),t}},{key:"endOfTrack",value:function(){return 255==this.data[this.pointer+1]&&47==this.data[this.pointer+2]&&0==this.data[this.pointer+3]}}]),e}();t.exports.Track=o},{"./constants":4,"./utils":8}],8:[function(e,t,n){(function(e){"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return t(n,null,[{key:"byteToHex",value:function(e){return("0"+e.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(e){var t=[];return e.forEach(function(e){return t.push(n.byteToHex(e))}),t.join("")}},{key:"hexToNumber",value:function(e){return parseInt(e,16)}},{key:"bytesToNumber",value:function(e){return n.hexToNumber(n.bytesToHex(e))}},{key:"bytesToLetters",value:function(e){var t=[];return e.forEach(function(e){return t.push(String.fromCharCode(e))}),t.join("")}},{key:"decToBinary",value:function(e){return(e>>>0).toString(2)}},{key:"readVarInt",value:function(e){var t=0;return e.forEach(function(e){var n=e;128&n?(t+=127&n,t<<=7):t+=n}),t}},{key:"atob",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return"function"==typeof atob?atob(t):new e(t,"base64").toString("binary")})}]),n}();n.Utils=r}).call(this,e("buffer").Buffer)},{buffer:2}]},{},[5])(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new Int16Array([0,1,2,3,4,5,6,7,-8,-7,-6,-5,-4,-3,-2,-1]);new Int16Array([0,1,-2,-1]);function i(e,t,n,i,a,s,l,c){for(var u=new Int16Array(8),d=0,p=new DataView(n,i),f=l+8,h=0;h<8;h++)1&h?(u[h]=r[15&e.getUint8(t)]<<a,t++):u[h]=r[e.getUint8(t)>>4&15]<<a,u[h]=o(a+4,u[h]);for(h=0;h<8;h++){if(d=s[l+h]*c[6],d+=s[f+h]*c[7],h>0)for(var m=h-1;m>-1;m--)d+=u[h-1-m]*s[f+m];var _=0,g=(u[h]<<11)+d>>11;_=g>32767?32767:g<-32768?-32768:g,p.setInt16(2*h,_,!0)}for(h=0;h<8;h++)c[h]=p.getInt16(2*h,!0)}function a(e,t,n,r,i,a,s,l){var c=new Int16Array(8),u=0,d=new DataView(n,r),p=s+8;c[0]=((192&e.getUint8(t))>>6&3)<<i,c[0]=o(i+2,c[0]),c[1]=((48&e.getUint8(t))>>4&3)<<i,c[1]=o(i+2,c[1]),c[2]=((12&e.getUint8(t))>>2&3)<<i,c[2]=o(i+2,c[2]),c[3]=(3&e.getUint8(t))<<i,t++,c[3]=o(i+2,c[3]),c[4]=((192&e.getUint8(t))>>6&3)<<i,c[4]=o(i+2,c[4]),c[5]=((48&e.getUint8(t))>>4&3)<<i,c[5]=o(i+2,c[5]),c[6]=((12&e.getUint8(t))>>2&3)<<i,c[6]=o(i+2,c[6]),c[7]=(3&e.getUint8(t))<<i,t++,c[7]=o(i+2,c[7]);for(var f=0;f<8;f++){if(u=a[s+f]*l[6],u+=a[p+f]*l[7],f>0)for(var h=f-1;h>-1;h--)u+=c[f-1-h]*a[p+h];var m=0,_=(c[f]<<11)+u>>11;m=_>32767?32767:_<-32768?-32768:_,d.setInt16(2*f,m,!0)}for(f=0;f<8;f++)l[f]=d.getInt16(2*f,!0)}function o(e,t){var n=1<<e-1;return((t&=(1<<e)-1)^n)-n}t.decodeVADPCM=function(e,t,n,r,o){for(var s,l,c=new Int16Array(8),u=0,d=0,p=0,f=new Int16Array(16*r.npredictors),h=0;h<8*r.order*r.npredictors;h++)f[h]=r.predictors[h];if(o)for(m=5*Math.floor(n/5);m>0;)s=e.getUint8(u)>>4&15,l=15&e.getUint8(u),m--,a(e,++u,t,d,s,f,_=16*(l%=r.npredictors),c),m-=2,a(e,u+=2,t,d+=16,s,f,_,c),u+=2,m-=2,d+=16,p+=16;else for(var m=9*Math.floor(n/9);m>0;){var _;s=e.getUint8(u)>>4&15,l=15&e.getUint8(u),m--,i(e,++u,t,d,s,f,_=16*(l%=r.npredictors),c),m-=4,i(e,u+=4,t,d+=16,s,f,_,c),u+=4,m-=4,d+=16,p+=16}return p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(196),a=n(112);t.playSound=function(e,t){if(i.getIsPlaying())throw new Error("Should not play more than one audio source at once.");var n,o,s=i.getAudioContext(),l=r.audio.getSoundTable(e),c=l.sounds[t],u=a.extractWavFromSound(l.tbl,c,c.sampleRate);return s.decodeAudioData(u).then(function(e){(o=s.createBufferSource()).buffer=e,o.connect(s.destination),o.start(0),o.onended=function(){i.setIsPlaying(!1),n&&n()}}),new i.AudioPlayerController({stop:function(){o&&(o.stop(),i.setIsPlaying(!1))},on:function(e,t){if("endOfFile"!==e)throw new Error("Unexpected AudioPlayerController event "+e);n=t}})}}]);